(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Map_1 = __importDefault(require("../DataTypes/Collections/Map"));
/**
 * A manager class for all of the AI in a scene.
 * Keeps a list of registered actors and handles AI generation for actors.
 */
class AIManager {
    constructor() {
        this.actors = new Array();
        this.registeredAI = new Map_1.default();
    }
    /**
     * Registers an actor with the AIManager
     * @param actor The actor to register
     */
    registerActor(actor) {
        this.actors.push(actor);
    }
    removeActor(actor) {
        let index = this.actors.indexOf(actor);
        if (index !== -1) {
            this.actors.splice(index, 1);
        }
    }
    /**
     * Registers an AI with the AIManager for use later on
     * @param name The name of the AI to register
     * @param constr The constructor for the AI
     */
    registerAI(name, constr) {
        this.registeredAI.add(name, constr);
    }
    /**
     * Generates an AI instance from its name
     * @param name The name of the AI to add
     * @returns A new AI instance
     */
    generateAI(name) {
        if (this.registeredAI.has(name)) {
            return new (this.registeredAI.get(name))();
        }
        else {
            throw `Cannot create AI with name ${name}, no AI with that name is registered`;
        }
    }
    update(deltaT) {
        // Run the ai for every active actor
        this.actors.forEach(actor => { if (actor.aiActive)
            actor.ai.update(deltaT); });
    }
}
exports.default = AIManager;

},{"../DataTypes/Collections/Map":8}],2:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.GoapActionStatus = void 0;
const State_1 = __importDefault(require("../../DataTypes/State/State"));
class GoapAction extends State_1.default {
    constructor(parent, actor) {
        super(parent);
        this.actor = actor;
        this._preconditions = new Set();
        this._effects = new Set();
        this._cost = 0;
    }
    /** Cost it takes to complete this action */
    get cost() { return this._cost; }
    set cost(cost) { this._cost = cost; }
    /** Preconditions that have to be satisfied for an action to happen */
    get preconditions() { return Array.from(this._preconditions.values()); }
    ;
    /** Resulting statuses after this action completes */
    get effects() { return Array.from(this._effects.values()); }
    checkPreconditions(status) {
        return Array.from(this._preconditions.values()).every(precondition => status.includes(precondition));
    }
    addPrecondition(status) {
        this._preconditions.add(status);
    }
    addEffect(status) {
        this._effects.add(status);
    }
    finished() {
        this.parent.changeState();
    }
}
exports.default = GoapAction;
var GoapActionStatus;
(function (GoapActionStatus) {
    GoapActionStatus[GoapActionStatus["FAILURE"] = 0] = "FAILURE";
    GoapActionStatus[GoapActionStatus["SUCCESS"] = 1] = "SUCCESS";
    GoapActionStatus[GoapActionStatus["RUNNING"] = 2] = "RUNNING";
})(GoapActionStatus = exports.GoapActionStatus || (exports.GoapActionStatus = {}));

},{"../../DataTypes/State/State":23}],3:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Graph_1 = __importDefault(require("../../DataTypes/Graphs/Graph"));
const Stack_1 = __importDefault(require("../../DataTypes/Collections/Stack"));
const GraphUtils_1 = __importDefault(require("../../Utils/GraphUtils"));
class GoapActionPlanner {
    static plan(status, goal, actions) {
        let graph = new Graph_1.default(true);
        let mapping = new Map();
        //0 is our root
        graph.addNode();
        mapping.set(0, "Start");
        //1 is the goal
        graph.addNode();
        mapping.set(1, "Goal");
        graph.addEdge(1, 1, Number.POSITIVE_INFINITY);
        //Build tree from 0 to 1
        this.buildTree(status, actions, 0, goal, mapping, graph);
        //Run djikstra to find shortest path
        let path = GraphUtils_1.default.djikstra(graph, 0);
        //Push all elements of the plan
        let plan = new Stack_1.default();
        let i = 1;
        while (path[i] !== -1) {
            if (path[i] !== 0) {
                plan.push(mapping.get(path[i]));
            }
            i = path[i];
        }
        return plan;
    }
    static buildTree(status, actions, root, goal, mapping, graph) {
        //For each possible action 
        actions.forEach(action => {
            //Can it be performed?
            if (action.checkPreconditions(status)) {
                //This action can be performed
                //Add effects to currentStatus
                let newStatus = [...status];
                newStatus.push(...action.effects);
                //Check if the new node is the goal
                if (newStatus.includes(goal)) {
                    let newNode = graph.addNode();
                    mapping.set(newNode, action);
                    graph.addEdge(root, newNode, action.cost);
                    graph.addEdge(newNode, 1, 0);
                    return;
                }
                //Add node and edge from root
                let newNode = graph.addNode();
                mapping.set(newNode, action);
                graph.addEdge(root, newNode, action.cost);
                //Recursive call
                let newActions = actions.filter(act => act !== action);
                this.buildTree(newStatus, newActions, newNode, goal, mapping, graph);
            }
        });
    }
}
exports.default = GoapActionPlanner;

},{"../../DataTypes/Collections/Stack":10,"../../DataTypes/Graphs/Graph":13,"../../Utils/GraphUtils":107}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * A state for a GoapAI. The "state" is not the same as a state in a state machine, or something of that nature.
 */
class GoapState {
}
exports.default = GoapState;

},{}],5:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Stack_1 = __importDefault(require("../../DataTypes/Collections/Stack"));
const GoapActionPlanner_1 = __importDefault(require("./GoapActionPlanner"));
const Map_1 = __importDefault(require("../../DataTypes/Collections/Map"));
const StateMachineAI_1 = __importDefault(require("../StateMachineAI"));
/**
 * An implementation of basic Goap behavior.
 *
 * GOAP requires a lot of overhead for managing all of the symbols (statuses and goals), the
 * actual goap-actions, and creating the action plans.
 *
 * I've opted to try and extend the StateMachineAI for this class, mostly to try and keep things
 * similar to the StateMachineAI. My StateMachineGoapAI class kind of breaks LSP (Liskov's substitution principle)
 * which cues me into the fact that I should probably make a seperate class.
 *
 * Something I'd like to add is an additional class for managing a set of goals. The goals
 * are pretty similar to statuses, except that goals have some kind off priority associated
 * with them. Not sure how we'd do this.
 *
 * @author Peter Walsh
 */
class StateMachineGoapAI extends StateMachineAI_1.default {
    constructor() {
        super();
        this.statuses = new Map_1.default();
        this.stateMap = new Map_1.default();
        this.stack = new Stack_1.default();
        this.goal = null;
    }
    update(deltaT) {
        super.update(deltaT);
    }
    initialize() {
        // Initialize the AI by building a plan from the the current actions
        this.stack = this.buildPlan();
        this.currentState = this.stack.peek();
        this.currentState.onEnter({});
        this.setActive(true);
    }
    // NOTE; this method might trigger infinite recursion in your GOAP AI - Peteylumpkins
    changeState() {
        // Exit the current state
        let options = this.currentState.onExit();
        // Remove the previous state
        this.stack.pop();
        // If the plan is empty, build a new plan
        if (this.stack.isEmpty()) {
            this.stack = this.buildPlan();
        }
        // Set the current action
        this.currentState = this.stack.peek();
        // Emit an event if turned on
        if (this.emitEventOnStateChange) {
            this.emitter.fireEvent(this.stateChangeEventName, { state: this.currentState });
        }
        // Enter the new action
        this.currentState.onEnter(options);
    }
    buildPlan() {
        // Get all the current statuses
        let statuses = this.currentStatus();
        // Get all the current actions
        let actions = Array.from(this.stateMap.keys()).map(key => this.stateMap.get(key));
        // Create the plan
        return GoapActionPlanner_1.default.plan(statuses, this.goal, actions);
    }
    currentStatus() {
        return Array.from(this.statuses.keys()).filter(stat => this.statuses.get(stat).isSatisfied());
    }
    setGoal(goal) {
        if (!this.statuses.has(goal)) {
            throw new Error("Goal doesn't exist. Make sure your goal is a status for this GOAP AI");
        }
        this.goal = goal;
    }
    addStatus(statusName, status) {
        this.statuses.set(statusName, status);
    }
    addState(stateName, state) {
        super.addState(stateName, state);
    }
}
exports.default = StateMachineGoapAI;

},{"../../DataTypes/Collections/Map":8,"../../DataTypes/Collections/Stack":10,"../StateMachineAI":6,"./GoapActionPlanner":3}],6:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const StateMachine_1 = __importDefault(require("../DataTypes/State/StateMachine"));
/**
 * A version of a @reference[StateMachine] that is configured to work as an AI controller for a @reference[GameNode]
 */
class StateMachineAI extends StateMachine_1.default {
    // @implemented
    initializeAI(owner, config) { }
    // @implemented
    destroy() {
        // Get rid of our reference to the owner
        delete this.owner;
        this.receiver.destroy();
    }
    // @implemented
    activate(options) { }
}
exports.default = StateMachineAI;

},{"../DataTypes/State/StateMachine":24}],7:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class BinaryHeapSet {
    constructor(compareTo, maxElements = 100) {
        this.ROOT = 0;
        this.MAX_ELEMENTS = maxElements;
        this.heap = new Array(this.MAX_ELEMENTS);
        this.map = new Map();
        this.size = 0;
        this.comp = compareTo;
    }
    push(e) {
        if (!this.map.has(e)) {
            this.heap[this.size] = e;
            this.map.set(e, this.size);
            this.percup(this.size);
            this.size += 1;
        }
    }
    pop() {
        let top = this.peek();
        this.map.delete(this.heap[this.ROOT]);
        this.size -= 1;
        this.heap[this.ROOT] = this.heap[this.size];
        this.percdown(this.ROOT);
        return top;
    }
    peek() {
        return this.heap[this.ROOT];
    }
    isEmpty() {
        return this.size === 0;
    }
    forEach(func) {
        this.heap.forEach(func());
    }
    clear() {
        this.heap.fill(null);
    }
    restore(value) {
        let node = this.map.get(value);
        this.percup(node);
        this.percdown(node);
    }
    has(value) {
        return this.map.has(value);
    }
    toString() {
        let res = "Backing Heap: [";
        for (let i = 0; i < this.size; i++) {
            res += `${this.heap[i]}`;
            if (i < this.size - 1) {
                res += ", ";
            }
        }
        res += "]\nMap: [\n";
        this.map.forEach((val, key) => {
            res += `\t${key} -> ${val}\n`;
        });
        res += "]";
        return res;
    }
    percup(node) {
        let prnt = this.parent(node);
        while (node > this.ROOT && this.comp(this.heap[node], this.heap[prnt]) > 0) {
            this.swap(node, prnt);
            node = prnt;
            prnt = this.parent(node);
        }
    }
    percdown(node) {
        let child = this.lchild(node);
        while (child < this.size) {
            if (child < this.size - 1 && this.comp(this.heap[child], this.heap[child + 1]) <= 0) {
                child += 1;
            }
            if (this.comp(this.heap[child], this.heap[node]) > 0) {
                this.swap(node, child);
                node = child;
                child = this.lchild(node);
            }
            else {
                break;
            }
        }
    }
    parent(node) {
        return Math.floor((node - 1) / 2);
    }
    lchild(node) {
        return node * 2 + 1;
    }
    rchild(node) {
        return node * 2 + 2;
    }
    swap(node1, node2) {
        this.map.set(this.heap[node1], node2);
        this.map.set(this.heap[node2], node1);
        let temp = this.heap[node1];
        this.heap[node1] = this.heap[node2];
        this.heap[node2] = temp;
    }
}
exports.default = BinaryHeapSet;

},{}],8:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Associates strings with elements of type T
 */
class Map {
    /** Creates a new map */
    constructor() {
        this.map = {};
    }
    /**
     * Adds a value T stored at a key.
     * @param key The key of the item to be stored
     * @param value The item to be stored
     */
    add(key, value) {
        this.map[key] = value;
    }
    /**
     * Get the value associated with a key.
     * @param key The key of the item
     * @returns The item at the key or undefined
     */
    get(key) {
        return this.map[key];
    }
    /**
     * An alias of add. Sets the value stored at key to the new specified value
     * @param key The key of the item to be stored
     * @param value The item to be stored
     */
    set(key, value) {
        this.add(key, value);
    }
    /**
     * Returns true if there is a value stored at the specified key, false otherwise.
     * @param key The key to check
     * @returns A boolean representing whether or not there is an item at the given key.
     */
    has(key) {
        return this.map[key] !== undefined;
    }
    /**
     * Returns an array of all of the keys in this map.
     * @returns An array containing all keys in the map.
     */
    keys() {
        return Object.keys(this.map);
    }
    // @implemented
    forEach(func) {
        Object.keys(this.map).forEach(key => func(key));
    }
    /**
     * Deletes an item associated with a key
     * @param key The key at which to delete an item
     */
    delete(key) {
        delete this.map[key];
    }
    // @implemented
    clear() {
        this.forEach(key => delete this.map[key]);
    }
    /**
     * Converts this map to a string representation.
     * @returns The string representation of this map.
     */
    toString() {
        let str = "";
        this.forEach((key) => str += key + " -> " + this.get(key).toString() + "\n");
        return str;
    }
}
exports.default = Map;

},{}],9:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * A FIFO queue with elements of type T
 */
class Queue {
    /**
     * Constructs a new queue
     * @param maxElements The maximum size of the stack
     */
    constructor(maxElements = 100) {
        this.MAX_ELEMENTS = maxElements;
        this.q = new Array(this.MAX_ELEMENTS);
        this.head = 0;
        this.tail = 0;
        this.size = 0;
    }
    /**
     * Adds an item to the back of the queue
     * @param item The item to add to the back of the queue
     */
    enqueue(item) {
        if ((this.tail + 1) % this.MAX_ELEMENTS === this.head) {
            throw new Error("Queue full - cannot add element");
        }
        this.size += 1;
        this.q[this.tail] = item;
        this.tail = (this.tail + 1) % this.MAX_ELEMENTS;
    }
    /**
     * Retrieves an item from the front of the queue
     * @returns The item at the front of the queue
     */
    dequeue() {
        if (this.head === this.tail) {
            throw new Error("Queue empty - cannot remove element");
        }
        this.size -= 1;
        let item = this.q[this.head];
        // Now delete the item
        delete this.q[this.head];
        this.head = (this.head + 1) % this.MAX_ELEMENTS;
        return item;
    }
    /**
     * Returns the item at the front of the queue, but does not remove it
     * @returns The item at the front of the queue
     */
    peekNext() {
        if (this.head === this.tail) {
            throw "Queue empty - cannot get element";
        }
        let item = this.q[this.head];
        return item;
    }
    /**
     * Returns true if the queue has items in it, false otherwise
     * @returns A boolean representing whether or not this queue has items
     */
    hasItems() {
        return this.head !== this.tail;
    }
    /**
     * Returns the number of elements in the queue.
     * @returns The size of the queue
     */
    getSize() {
        return this.size;
    }
    // @implemented
    clear() {
        this.forEach((item, index) => delete this.q[index]);
        this.size = 0;
        this.head = this.tail;
    }
    // @implemented
    forEach(func) {
        let i = this.head;
        while (i !== this.tail) {
            func(this.q[i], i);
            i = (i + 1) % this.MAX_ELEMENTS;
        }
    }
    /**
     * Converts this queue into a string format
     * @returns A string representing this queue
     */
    toString() {
        let retval = "";
        this.forEach((item, index) => {
            let str = item.toString();
            if (index !== 0) {
                str += " -> ";
            }
            retval = str + retval;
        });
        return "Top -> " + retval;
    }
}
exports.default = Queue;

},{}],10:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * A LIFO stack with items of type T
 */
class Stack {
    /**
     * Constructs a new stack
     * @param maxElements The maximum size of the stack
     */
    constructor(maxElements = 100) {
        this.MAX_ELEMENTS = maxElements;
        this.stack = new Array(this.MAX_ELEMENTS);
        this.head = -1;
    }
    /**
     * Adds an item to the top of the stack
     * @param item The new item to add to the stack
     */
    push(item) {
        if (this.head + 1 === this.MAX_ELEMENTS) {
            throw "Stack full - cannot add element";
        }
        this.head += 1;
        this.stack[this.head] = item;
    }
    /**
     * Removes an item from the top of the stack
     * @returns The item at the top of the stack
     */
    pop() {
        if (this.head === -1) {
            throw "Stack empty - cannot remove element";
        }
        this.head -= 1;
        return this.stack[this.head + 1];
    }
    /**
     * Returns the element currently at the top of the stack
     * @returns The item at the top of the stack
     */
    peek() {
        if (this.head === -1) {
            throw "Stack empty - cannot get element";
        }
        return this.stack[this.head];
    }
    /** Returns true if this stack is empty
     * @returns A boolean that represents whether or not the stack is empty
    */
    isEmpty() {
        return this.head === -1;
    }
    // @implemented
    clear() {
        this.forEach((item, index) => delete this.stack[index]);
        this.head = -1;
    }
    /**
     * Returns the number of items currently in the stack
     * @returns The number of items in the stack
     */
    size() {
        return this.head + 1;
    }
    // @implemented
    forEach(func) {
        let i = 0;
        while (i <= this.head) {
            func(this.stack[i], i);
            i += 1;
        }
    }
    /**
     * Converts this stack into a string format
     * @returns A string representing this stack
     */
    toString() {
        let retval = "";
        this.forEach((item, index) => {
            let str = item.toString();
            if (index !== 0) {
                str += " -> ";
            }
            retval = str + retval;
        });
        return "Top -> " + retval;
    }
}
exports.default = Stack;

},{}],11:[function(require,module,exports){
"use strict";
// @ignorePage
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * A placeholder function for No Operation. Does nothing
 */
const NullFunc = () => { };
exports.default = NullFunc;

},{}],12:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * A linked-list for the edges in a @reference[Graph].
 */
class EdgeNode {
    /**
     * Creates a new EdgeNode
     * @param index The index of the node this edge connects to
     * @param weight The weight of this edge
     */
    constructor(index, weight) {
        this.y = index;
        this.next = null;
        this.weight = weight ? weight : 1;
    }
}
exports.default = EdgeNode;

},{}],13:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.MAX_V = void 0;
const EdgeNode_1 = __importDefault(require("./EdgeNode"));
exports.MAX_V = 10000;
/**
 * An implementation of a graph data structure using edge lists. Inspired by The Algorithm Design Manual.
 */
class Graph {
    /**
     * Constructs a new graph
     * @param directed Whether or not this graph is directed
     */
    constructor(directed = false) {
        this.directed = directed;
        this.weighted = false;
        this.numVertices = 0;
        this.numEdges = 0;
        this.edges = new Array(exports.MAX_V);
        this.degree = new Array(exports.MAX_V);
    }
    /** Adds a node to this graph and returns the index of it
     * @returns The index of the new node
    */
    addNode() {
        return this.numVertices++;
    }
    /** Adds an edge between node x and y, with an optional weight
     * @param x The index of the start of the edge
     * @param y The index of the end of the edge
     * @param weight The optional weight of the new edge
    */
    addEdge(x, y, weight) {
        let edge = new EdgeNode_1.default(y, weight);
        if (this.edges[x]) {
            edge.next = this.edges[x];
        }
        this.edges[x] = edge;
        if (!this.directed) {
            edge = new EdgeNode_1.default(x, weight);
            if (this.edges[y]) {
                edge.next = this.edges[y];
            }
            this.edges[y] = edge;
        }
        this.numEdges += 1;
    }
    /**
     * Checks whether or not an edge exists between two nodes.
     * This check is directional if this is a directed graph.
     * @param x The first node
     * @param y The second node
     * @returns true if an edge exists, false otherwise
     */
    edgeExists(x, y) {
        let edge = this.edges[x];
        while (edge !== null) {
            if (edge.y === y) {
                return true;
            }
            edge = edge.next;
        }
    }
    /**
     * Gets the edge list associated with node x
     * @param x The index of the node
     * @returns The head of a linked-list of edges
     */
    getEdges(x) {
        return this.edges[x];
    }
    /**
     * Gets the degree associated with node x
     * @param x The index of the node
     */
    getDegree(x) {
        return this.degree[x];
    }
    /**
     * Converts the specifed node into a string
     * @param index The index of the node to convert to a string
     * @returns The string representation of the node: "Node x"
     */
    nodeToString(index) {
        return "Node " + index;
    }
    /**
     * Converts the Graph into a string format
     * @returns The graph as a string
     */
    toString() {
        let retval = "";
        for (let i = 0; i < this.numVertices; i++) {
            let edge = this.edges[i];
            let edgeStr = "";
            while (edge !== undefined && edge !== null) {
                edgeStr += edge.y.toString();
                if (this.weighted) {
                    edgeStr += " (" + edge.weight + ")";
                }
                if (edge.next !== null) {
                    edgeStr += ", ";
                }
                edge = edge.next;
            }
            retval += this.nodeToString(i) + ": " + edgeStr + "\n";
        }
        return retval;
    }
}
exports.default = Graph;

},{"./EdgeNode":12}],14:[function(require,module,exports){
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
const Graph_1 = __importStar(require("./Graph"));
/**
 * An extension of Graph that has nodes with positions in 2D space.
 * This is a weighted graph (though not inherently directd)
*/
class PositionGraph extends Graph_1.default {
    /**
     * Createes a new PositionGraph
     * @param directed Whether or not this graph is directed
     */
    constructor(directed = false) {
        super(directed);
        this.debugRender = () => {
            // for(let point of this.positions){
            // 	ctx.fillRect((point.x - origin.x - 4)*zoom, (point.y - origin.y - 4)*zoom, 8, 8);
            // }
        };
        this.positions = new Array(Graph_1.MAX_V);
    }
    /**
     * Adds a positioned node to this graph
     * @param position The position of the node to add
     * @returns The index of the added node
     */
    addPositionedNode(position) {
        this.positions[this.numVertices] = position;
        return this.addNode();
    }
    /**
     * Changes the position of a node.
     * Automatically adjusts the weights of the graph tied to this node.
     * As such, be warned that this function has an O(n + m) running time, and use it sparingly.
     * @param index The index of the node
     * @param position The new position of the node
     */
    setNodePosition(index, position) {
        this.positions[index] = position;
        // Recalculate all weights associated with this index
        for (let i = 0; i < this.numEdges; i++) {
            let edge = this.edges[i];
            while (edge !== null) {
                // If this node is on either side of the edge, recalculate weight
                if (i === index || edge.y === index) {
                    edge.weight = this.positions[i].distanceTo(this.positions[edge.y]);
                }
                edge = edge.next;
            }
        }
    }
    /**
     * Gets the position of a node
     * @param index The index of the node
     * @returns The position of the node
     */
    getNodePosition(index) {
        return this.positions[index];
    }
    /**
     * Adds an edge to this graph between node x and y.
     * Automatically calculates the weight of the edge as the distance between the nodes.
     * @param x The beginning of the edge
     * @param y The end of the edge
     */
    addEdge(x, y) {
        if (!this.positions[x] || !this.positions[y]) {
            throw "Can't add edge to un-positioned node!";
        }
        // Weight is the distance between the nodes
        let weight = this.positions[x].distanceTo(this.positions[y]);
        super.addEdge(x, y, weight);
    }
    // @override
    nodeToString(index) {
        return "Node " + index + " - " + this.positions[index].toString();
    }
    /**
     * Finds the node in the graph with the position closest to the given position
     * @param position the position
     * @returns the node in the graph that is closest to the given position
     */
    snap(position) {
        let n = this.numVertices;
        let i = 1;
        let index = 0;
        let dist = position.distanceSqTo(this.positions[0]);
        while (i < n) {
            let d = position.distanceSqTo(this.positions[i]);
            if (d < dist) {
                dist = d;
                index = i;
            }
            i++;
        }
        return index;
    }
}
exports.default = PositionGraph;

},{"./Graph":13}],15:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isRegion = void 0;
function isRegion(arg) {
    return arg && arg.size && arg.scale && arg.boundary;
}
exports.isRegion = isRegion;

},{}],16:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Vec2_1 = __importDefault(require("./Vec2"));
/** A 4x4 matrix0 */
class Mat4x4 {
    constructor() {
        this.mat = new Float32Array([
            0, 0, 0, 0,
            0, 0, 0, 0,
            0, 0, 0, 0,
            0, 0, 0, 0
        ]);
    }
    // Static members
    static get IDENTITY() {
        return new Mat4x4().identity();
    }
    static get ZERO() {
        return new Mat4x4().zero();
    }
    // Accessors
    set _00(x) {
        this.mat[0] = x;
    }
    set(col, row, value) {
        if (col < 0 || col > 3 || row < 0 || row > 3) {
            throw `Error - index (${col}, ${row}) is out of bounds for Mat4x4`;
        }
        this.mat[row * 4 + col] = value;
        return this;
    }
    get(col, row) {
        return this.mat[row * 4 + col];
    }
    setAll(...items) {
        this.mat.set(items);
        return this;
    }
    identity() {
        return this.setAll(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
    }
    zero() {
        return this.setAll(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
    }
    /**
     * Makes this Mat4x4 a rotation matrix of the specified number of radians ccw
     * @param zRadians The number of radians to rotate
     * @returns this Mat4x4
     */
    rotate(zRadians) {
        return this.setAll(Math.cos(zRadians), -Math.sin(zRadians), 0, 0, Math.sin(zRadians), Math.cos(zRadians), 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
    }
    /**
     * Turns this Mat4x4 into a translation matrix of the specified translation
     * @param translation The translation in x and y
     * @returns this Mat4x4
     */
    translate(translation) {
        // If translation is a vec, get its array
        if (translation instanceof Vec2_1.default) {
            translation = translation.toArray();
        }
        return this.setAll(1, 0, 0, translation[0], 0, 1, 0, translation[1], 0, 0, 1, 0, 0, 0, 0, 1);
    }
    scale(scale) {
        // Make sure scale is a float32Array
        if (scale instanceof Vec2_1.default) {
            scale = scale.toArray();
        }
        else if (!(scale instanceof Float32Array)) {
            scale = new Float32Array([scale, scale]);
        }
        return this.setAll(scale[0], 0, 0, 0, 0, scale[1], 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
    }
    /**
     * Returns a new Mat4x4 that represents the right side multiplication THIS x OTHER
     * @param other The other Mat4x4 to multiply by
     * @returns a new Mat4x4 containing the product of these two Mat4x4s
     */
    mult(other, out) {
        let temp = new Float32Array(16);
        for (let i = 0; i < 4; i++) {
            for (let j = 0; j < 4; j++) {
                let value = 0;
                for (let k = 0; k < 4; k++) {
                    value += this.get(k, i) * other.get(j, k);
                }
                temp[j * 4 + i] = value;
            }
        }
        if (out !== undefined) {
            return out.setAll(...temp);
        }
        else {
            return new Mat4x4().setAll(...temp);
        }
    }
    /**
     * Multiplies all given matricies in order. e.g. MULT(A, B, C) -> A*B*C
     * @param mats A list of Mat4x4s to multiply in order
     * @returns A new Mat4x4 holding the result of the operation
     */
    static MULT(...mats) {
        // Create a new array
        let temp = Mat4x4.IDENTITY;
        // Multiply by every array in order, in place
        for (let i = 0; i < mats.length; i++) {
            temp.mult(mats[i], temp);
        }
        return temp;
    }
    toArray() {
        return this.mat;
    }
    toString() {
        return `|${this.mat[0].toFixed(2)}, ${this.mat[1].toFixed(2)}, ${this.mat[2].toFixed(2)}, ${this.mat[3].toFixed(2)}|\n` +
            `|${this.mat[4].toFixed(2)}, ${this.mat[5].toFixed(2)}, ${this.mat[6].toFixed(2)}, ${this.mat[7].toFixed(2)}|\n` +
            `|${this.mat[8].toFixed(2)}, ${this.mat[9].toFixed(2)}, ${this.mat[10].toFixed(2)}, ${this.mat[11].toFixed(2)}|\n` +
            `|${this.mat[12].toFixed(2)}, ${this.mat[13].toFixed(2)}, ${this.mat[14].toFixed(2)}, ${this.mat[15].toFixed(2)}|`;
    }
}
exports.default = Mat4x4;

},{"./Vec2":26}],17:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * A class that contains the area of overlap of two colliding objects to allow for sorting by the physics system.
 */
class AreaCollision {
    /**
     * Creates a new AreaCollision object
     * @param area The area of the collision
     * @param collider The other collider
     */
    constructor(area, collider, other, type, tile) {
        this.area = area;
        this.collider = collider;
        this.other = other;
        this.type = type;
        this.tile = tile;
    }
}
exports.default = AreaCollision;

},{}],18:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Vec2_1 = __importDefault(require("../Vec2"));
/**
 * An object representing the data collected from a physics hit between two geometric objects.
 * Inspired by the helpful collision documentation @link(here)(https://noonat.github.io/intersect/).
 */
class Hit {
    constructor() {
        /** The near times of the collision */
        this.nearTimes = Vec2_1.default.ZERO;
        /** The position of the collision */
        this.pos = Vec2_1.default.ZERO;
        /** The overlap distance of the hit */
        this.delta = Vec2_1.default.ZERO;
        /** The normal vector of the hit */
        this.normal = Vec2_1.default.ZERO;
    }
}
exports.default = Hit;

},{"../Vec2":26}],19:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/** A container for info about a webGL shader program */
class WebGLProgramType {
    /**
     * Deletes this shader program
     */
    delete(gl) {
        // Clean up all aspects of this program
        if (this.program) {
            gl.deleteProgram(this.program);
        }
        if (this.vertexShader) {
            gl.deleteShader(this.vertexShader);
        }
        if (this.fragmentShader) {
            gl.deleteShader(this.fragmentShader);
        }
    }
}
exports.default = WebGLProgramType;

},{}],20:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Shape_1 = __importDefault(require("./Shape"));
const Vec2_1 = __importDefault(require("../Vec2"));
const MathUtils_1 = __importDefault(require("../../Utils/MathUtils"));
const Circle_1 = __importDefault(require("./Circle"));
const Hit_1 = __importDefault(require("../Physics/Hit"));
/**
 * An Axis-Aligned Bounding Box. In other words, a rectangle that is always aligned to the x-y grid.
 * Inspired by the helpful collision documentation @link(here)(https://noonat.github.io/intersect/).
 */
class AABB extends Shape_1.default {
    /**
     * Creates a new AABB
     * @param center The center of the AABB
     * @param halfSize The half size of the AABB - The distance from the center to an edge in x and y
     */
    constructor(center, halfSize) {
        super();
        this.center = center ? center : new Vec2_1.default(0, 0);
        this.halfSize = halfSize ? halfSize : new Vec2_1.default(0, 0);
    }
    /** Returns a point representing the top left corner of the AABB */
    get topLeft() {
        return new Vec2_1.default(this.left, this.top);
    }
    /** Returns a point representing the top right corner of the AABB */
    get topRight() {
        return new Vec2_1.default(this.right, this.top);
    }
    /** Returns a point representing the bottom left corner of the AABB */
    get bottomLeft() {
        return new Vec2_1.default(this.left, this.bottom);
    }
    /** Returns a point representing the bottom right corner of the AABB */
    get bottomRight() {
        return new Vec2_1.default(this.right, this.bottom);
    }
    // @override
    getBoundingRect() {
        return this.clone();
    }
    // @override
    getBoundingCircle() {
        let r = Math.max(this.hw, this.hh);
        return new Circle_1.default(this.center.clone(), r);
    }
    // @deprecated
    getHalfSize() {
        return this.halfSize;
    }
    // @deprecated
    setHalfSize(halfSize) {
        this.halfSize = halfSize;
    }
    // TODO - move these all to the Shape class
    /**
     * A simple boolean check of whether this AABB contains a point
     * @param point The point to check
     * @returns A boolean representing whether this AABB contains the specified point
     */
    containsPoint(point) {
        return point.x >= this.x - this.hw && point.x <= this.x + this.hw
            && point.y >= this.y - this.hh && point.y <= this.y + this.hh;
    }
    /**
     * A simple boolean check of whether this AABB contains a point
     * @param point The point to check
     * @returns A boolean representing whether this AABB contains the specified point
     */
    intersectPoint(point) {
        let dx = point.x - this.x;
        let px = this.hw - Math.abs(dx);
        if (px <= 0) {
            return false;
        }
        let dy = point.y - this.y;
        let py = this.hh - Math.abs(dy);
        if (py <= 0) {
            return false;
        }
        return true;
    }
    /**
     * A boolean check of whether this AABB contains a point with soft left and top boundaries.
     * In other words, if the top left is (0, 0), the point (0, 0) is not in the AABB
     * @param point The point to check
     * @returns A boolean representing whether this AABB contains the specified point
     */
    containsPointSoft(point) {
        return point.x > this.x - this.hw && point.x <= this.x + this.hw
            && point.y > this.y - this.hh && point.y <= this.y + this.hh;
    }
    /**
     * Returns the data from the intersection of this AABB with a line segment from a point in a direction
     * @param point The point that the line segment starts from
     * @param delta The direction and distance of the segment
     * @param padding Pads the AABB to make it wider for the intersection test
     * @returns The Hit object representing the intersection, or null if there was no intersection
     */
    intersectSegment(point, delta, padding) {
        let paddingX = padding ? padding.x : 0;
        let paddingY = padding ? padding.y : 0;
        let scaleX = 1 / delta.x;
        let scaleY = 1 / delta.y;
        let signX = MathUtils_1.default.sign(scaleX);
        let signY = MathUtils_1.default.sign(scaleY);
        let tnearx = scaleX * (this.x - signX * (this.hw + paddingX) - point.x);
        let tneary = scaleY * (this.y - signY * (this.hh + paddingY) - point.y);
        let tfarx = scaleX * (this.x + signX * (this.hw + paddingX) - point.x);
        let tfary = scaleY * (this.y + signY * (this.hh + paddingY) - point.y);
        if (tnearx > tfary || tneary > tfarx) {
            // We aren't colliding - we clear one axis before intersecting another
            return null;
        }
        let tnear = Math.max(tnearx, tneary);
        // Double check for NaNs
        if (tnearx !== tnearx) {
            tnear = tneary;
        }
        else if (tneary !== tneary) {
            tnear = tnearx;
        }
        let tfar = Math.min(tfarx, tfary);
        if (tnear === -Infinity) {
            return null;
        }
        if (tnear >= 1 || tfar <= 0) {
            return null;
        }
        // We are colliding
        let hit = new Hit_1.default();
        hit.time = MathUtils_1.default.clamp01(tnear);
        hit.nearTimes.x = tnearx;
        hit.nearTimes.y = tneary;
        if (tnearx > tneary) {
            // We hit on the left or right size
            hit.normal.x = -signX;
            hit.normal.y = 0;
        }
        else if (Math.abs(tnearx - tneary) < 0.0001) {
            // We hit on the corner
            hit.normal.x = -signX;
            hit.normal.y = -signY;
            hit.normal.normalize();
        }
        else {
            // We hit on the top or bottom
            hit.normal.x = 0;
            hit.normal.y = -signY;
        }
        hit.delta.x = (1.0 - hit.time) * -delta.x;
        hit.delta.y = (1.0 - hit.time) * -delta.y;
        hit.pos.x = point.x + delta.x * hit.time;
        hit.pos.y = point.y + delta.y * hit.time;
        return hit;
    }
    // @override
    overlaps(other) {
        if (other instanceof AABB) {
            return this.overlapsAABB(other);
        }
        throw "Overlap not defined between these shapes.";
    }
    /**
     * A simple boolean check of whether this AABB overlaps another
     * @param other The other AABB to check against
     * @returns True if this AABB overlaps the other, false otherwise
     */
    overlapsAABB(other) {
        let dx = other.x - this.x;
        let px = this.hw + other.hw - Math.abs(dx);
        if (px <= 0) {
            return false;
        }
        let dy = other.y - this.y;
        let py = this.hh + other.hh - Math.abs(dy);
        if (py <= 0) {
            return false;
        }
        return true;
    }
    /**
     * Determines whether these AABBs are JUST touching - not overlapping.
     * Vec2.x is -1 if the other is to the left, 1 if to the right.
     * Likewise, Vec2.y is -1 if the other is on top, 1 if on bottom.
     * @param other The other AABB to check
     * @returns The collision sides stored in a Vec2 if the AABBs are touching, null otherwise
     */
    touchesAABB(other) {
        let dx = other.x - this.x;
        let px = this.hw + other.hw - Math.abs(dx);
        let dy = other.y - this.y;
        let py = this.hh + other.hh - Math.abs(dy);
        // If one axis is just touching and the other is overlapping, true
        if ((px === 0 && py >= 0) || (py === 0 && px >= 0)) {
            let ret = new Vec2_1.default();
            if (px === 0) {
                ret.x = other.x < this.x ? -1 : 1;
            }
            if (py === 0) {
                ret.y = other.y < this.y ? -1 : 1;
            }
            return ret;
        }
        else {
            return null;
        }
    }
    /**
     * Determines whether these AABBs are JUST touching - not overlapping.
     * Also, if they are only touching corners, they are considered not touching.
     * Vec2.x is -1 if the other is to the left, 1 if to the right.
     * Likewise, Vec2.y is -1 if the other is on top, 1 if on bottom.
     * @param other The other AABB to check
     * @returns The side of the touch, stored as a Vec2, or null if there is no touch
     */
    touchesAABBWithoutCorners(other) {
        let dx = other.x - this.x;
        let px = this.hw + other.hw - Math.abs(dx);
        let dy = other.y - this.y;
        let py = this.hh + other.hh - Math.abs(dy);
        // If one axis is touching, and the other is strictly overlapping
        if ((px === 0 && py > 0) || (py === 0 && px > 0)) {
            let ret = new Vec2_1.default();
            if (px === 0) {
                ret.x = other.x < this.x ? -1 : 1;
            }
            else {
                ret.y = other.y < this.y ? -1 : 1;
            }
            return ret;
        }
        else {
            return null;
        }
    }
    /**
     * Calculates the area of the overlap between this AABB and another
     * @param other The other AABB
     * @returns The area of the overlap between the AABBs
     */
    overlapArea(other) {
        let leftx = Math.max(this.x - this.hw, other.x - other.hw);
        let rightx = Math.min(this.x + this.hw, other.x + other.hw);
        let dx = rightx - leftx;
        let lefty = Math.max(this.y - this.hh, other.y - other.hh);
        let righty = Math.min(this.y + this.hh, other.y + other.hh);
        let dy = righty - lefty;
        if (dx < 0 || dy < 0)
            return 0;
        return dx * dy;
    }
    /**
     * Moves and resizes this rect from its current position to the position specified
     * @param velocity The movement of the rect from its position
     * @param fromPosition A position specified to be the starting point of sweeping
     * @param halfSize The halfSize of the sweeping rect
     */
    sweep(velocity, fromPosition, halfSize) {
        if (!fromPosition) {
            fromPosition = this.center;
        }
        if (!halfSize) {
            halfSize = this.halfSize;
        }
        let centerX = fromPosition.x + velocity.x / 2;
        let centerY = fromPosition.y + velocity.y / 2;
        let minX = Math.min(fromPosition.x - halfSize.x, fromPosition.x + velocity.x - halfSize.x);
        let minY = Math.min(fromPosition.y - halfSize.y, fromPosition.y + velocity.y - halfSize.y);
        this.center.set(centerX, centerY);
        this.halfSize.set(centerX - minX, centerY - minY);
    }
    // @override
    clone() {
        return new AABB(this.center.clone(), this.halfSize.clone());
    }
    /**
     * Converts this AABB to a string format
     * @returns (center: (x, y), halfSize: (x, y))
     */
    toString() {
        return "(center: " + this.center.toString() + ", half-size: " + this.halfSize.toString() + ")";
    }
}
exports.default = AABB;

},{"../../Utils/MathUtils":108,"../Physics/Hit":18,"../Vec2":26,"./Circle":21,"./Shape":22}],21:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Vec2_1 = __importDefault(require("../Vec2"));
const AABB_1 = __importDefault(require("./AABB"));
const Shape_1 = __importDefault(require("./Shape"));
/**
 * A Circle
 */
class Circle extends Shape_1.default {
    /**
     * Creates a new Circle
     * @param center The center of the circle
     * @param radius The radius of the circle
     */
    constructor(center, radius) {
        super();
        this._center = center ? center : new Vec2_1.default(0, 0);
        this.radius = radius ? radius : 0;
    }
    get center() {
        return this._center;
    }
    set center(center) {
        this._center = center;
    }
    get halfSize() {
        return new Vec2_1.default(this.radius, this.radius);
    }
    get r() {
        return this.radius;
    }
    set r(radius) {
        this.radius = radius;
    }
    // @override
    /**
     * A simple boolean check of whether this AABB contains a point
     * @param point The point to check
     * @returns A boolean representing whether this AABB contains the specified point
     */
    containsPoint(point) {
        return this.center.distanceSqTo(point) <= this.radius * this.radius;
    }
    // @override
    getBoundingRect() {
        return new AABB_1.default(this._center.clone(), new Vec2_1.default(this.radius, this.radius));
    }
    // @override
    getBoundingCircle() {
        return this.clone();
    }
    // @override
    overlaps(other) {
        throw new Error("Method not implemented.");
    }
    // @override
    clone() {
        return new Circle(this._center.clone(), this.radius);
    }
    toString() {
        return "(center: " + this.center.toString() + ", radius: " + this.radius + ")";
    }
}
exports.default = Circle;

},{"../Vec2":26,"./AABB":20,"./Shape":22}],22:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Vec2_1 = __importDefault(require("../Vec2"));
const AABB_1 = __importDefault(require("./AABB"));
/**
 * An abstract Shape class that acts as an interface for better interactions with subclasses.
 */
class Shape {
    get x() {
        return this.center.x;
    }
    get y() {
        return this.center.y;
    }
    get hw() {
        return this.halfSize.x;
    }
    get hh() {
        return this.halfSize.y;
    }
    get top() {
        return this.y - this.hh;
    }
    get bottom() {
        return this.y + this.hh;
    }
    get left() {
        return this.x - this.hw;
    }
    get right() {
        return this.x + this.hw;
    }
    static getTimeOfCollision(A, velA, B, velB) {
        if (A instanceof AABB_1.default && B instanceof AABB_1.default) {
            return Shape.getTimeOfCollision_AABB_AABB(A, velA, B, velB);
        }
    }
    static getTimeOfCollision_AABB_AABB(A, velA, B, velB) {
        let posSmaller = A.center;
        let posLarger = B.center;
        let sizeSmaller = A.halfSize;
        let sizeLarger = B.halfSize;
        let firstContact = new Vec2_1.default(0, 0);
        let lastContact = new Vec2_1.default(0, 0);
        let collidingX = false;
        let collidingY = false;
        // Sort by position
        if (posLarger.x < posSmaller.x) {
            // Swap, because smaller is further right than larger
            let temp;
            temp = sizeSmaller;
            sizeSmaller = sizeLarger;
            sizeLarger = temp;
            temp = posSmaller;
            posSmaller = posLarger;
            posLarger = temp;
            temp = velA;
            velA = velB;
            velB = temp;
        }
        // A is left, B is right
        firstContact.x = Infinity;
        lastContact.x = Infinity;
        if (posLarger.x - sizeLarger.x >= posSmaller.x + sizeSmaller.x) {
            // If we aren't currently colliding
            let relVel = velA.x - velB.x;
            if (relVel > 0) {
                // If they are moving towards each other
                firstContact.x = ((posLarger.x - sizeLarger.x) - (posSmaller.x + sizeSmaller.x)) / (relVel);
                lastContact.x = ((posLarger.x + sizeLarger.x) - (posSmaller.x - sizeSmaller.x)) / (relVel);
            }
        }
        else {
            collidingX = true;
        }
        if (posLarger.y < posSmaller.y) {
            // Swap, because smaller is further up than larger
            let temp;
            temp = sizeSmaller;
            sizeSmaller = sizeLarger;
            sizeLarger = temp;
            temp = posSmaller;
            posSmaller = posLarger;
            posLarger = temp;
            temp = velA;
            velA = velB;
            velB = temp;
        }
        // A is top, B is bottom
        firstContact.y = Infinity;
        lastContact.y = Infinity;
        if (posLarger.y - sizeLarger.y >= posSmaller.y + sizeSmaller.y) {
            // If we aren't currently colliding
            let relVel = velA.y - velB.y;
            if (relVel > 0) {
                // If they are moving towards each other
                firstContact.y = ((posLarger.y - sizeLarger.y) - (posSmaller.y + sizeSmaller.y)) / (relVel);
                lastContact.y = ((posLarger.y + sizeLarger.y) - (posSmaller.y - sizeSmaller.y)) / (relVel);
            }
        }
        else {
            collidingY = true;
        }
        return [firstContact, lastContact, collidingX, collidingY];
    }
}
exports.default = Shape;

},{"../Vec2":26,"./AABB":20}],23:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Emitter_1 = __importDefault(require("../../Events/Emitter"));
/**
 * An abstract implementation of a state for a @reference[StateMachine].
 * This class should be extended to allow for custom state behaviors.
 */
class State {
    /**
     * Constructs a new State
     * @param parent The parent StateMachine of this state
     */
    constructor(parent) {
        this.parent = parent;
        this.emitter = new Emitter_1.default();
    }
    /**
     * Tells the state machine that this state has ended, and makes it transition to the new state specified
     * @param stateName The name of the state to transition to
     */
    finished(stateName) {
        this.parent.changeState(stateName);
    }
}
exports.default = State;

},{"../../Events/Emitter":29}],24:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Stack_1 = __importDefault(require("../Collections/Stack"));
const Map_1 = __importDefault(require("../Collections/Map"));
const Receiver_1 = __importDefault(require("../../Events/Receiver"));
const Emitter_1 = __importDefault(require("../../Events/Emitter"));
/**
 * An implementation of a Push Down Automata State machine. States can also be hierarchical
 * for more flexibility, as described in @link(Game Programming Patterns)(https://gameprogrammingpatterns.com/state.html).
 */
class StateMachine {
    /**
     * Creates a new StateMachine
     */
    constructor() {
        this.stack = new Stack_1.default();
        this.stateMap = new Map_1.default();
        this.receiver = new Receiver_1.default();
        this.emitter = new Emitter_1.default();
        this.emitEventOnStateChange = false;
    }
    /**
     * Sets the activity state of this state machine
     * @param flag True if you want to set this machine running, false otherwise
     */
    setActive(flag) {
        this.active = flag;
    }
    /**
     * Makes this state machine emit an event any time its state changes
     * @param stateChangeEventName The name of the event to emit
     */
    setEmitEventOnStateChange(stateChangeEventName) {
        this.emitEventOnStateChange = true;
        this.stateChangeEventName = stateChangeEventName;
    }
    /**
     * Stops this state machine from emitting events on state change.
     */
    cancelEmitEventOnStateChange() {
        this.emitEventOnStateChange = false;
    }
    /**
     * Initializes this state machine with an initial state and sets it running
     * @param initialState The name of initial state of the state machine
     */
    initialize(initialState, options) {
        this.stack.push(this.stateMap.get(initialState));
        this.currentState = this.stack.peek();
        this.currentState.onEnter(options);
        this.setActive(true);
    }
    /**
     * Adds a state to this state machine
     * @param stateName The name of the state to add
     * @param state The state to add
     */
    addState(stateName, state) {
        this.stateMap.add(stateName, state);
    }
    /**
     * Changes the state of this state machine to the provided string
     * @param state The string name of the state to change to
     */
    changeState(state) {
        // Exit the current state
        let options = this.currentState.onExit();
        // Make sure the correct state is at the top of the stack
        if (state === "previous") {
            // Pop the current state off the stack
            this.stack.pop();
        }
        else {
            // Retrieve the new state from the statemap and put it at the top of the stack
            this.stack.pop();
            this.stack.push(this.stateMap.get(state));
        }
        // Retreive the new state from the stack
        this.currentState = this.stack.peek();
        // Emit an event if turned on
        if (this.emitEventOnStateChange) {
            this.emitter.fireEvent(this.stateChangeEventName, { state: this.currentState });
        }
        // Enter the new state
        this.currentState.onEnter(options);
    }
    /**
     * Handles input. This happens at the very beginning of this state machine's update cycle.
     * @param event The game event to process
     */
    handleEvent(event) {
        if (this.active) {
            this.currentState.handleInput(event);
        }
    }
    // @implemented
    update(deltaT) {
        // Distribute events
        while (this.receiver.hasNextEvent()) {
            let event = this.receiver.getNextEvent();
            this.handleEvent(event);
        }
        // Delegate the update to the current state
        this.currentState.update(deltaT);
    }
}
exports.default = StateMachine;

},{"../../Events/Emitter":29,"../../Events/Receiver":33,"../Collections/Map":8,"../Collections/Stack":10}],25:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const ResourceManager_1 = __importDefault(require("../../ResourceManager/ResourceManager"));
const Vec2_1 = __importDefault(require("../Vec2"));
/**
 * The data representation of a Tileset for the game engine. This represents one image,
 * with a startIndex if required (as it is with Tiled using two images in one tilset).
 */
class Tileset {
    // TODO: Change this to be more general and work with other tileset formats
    constructor(tilesetData) {
        // Defer handling of the data to a helper class
        this.initFromTiledData(tilesetData);
    }
    /**
     * Initialize the tileset from the data from a Tiled json file
     * @param tiledData The parsed object from a Tiled json file
     */
    initFromTiledData(tiledData) {
        this.numRows = tiledData.tilecount / tiledData.columns;
        this.numCols = tiledData.columns;
        this.startIndex = tiledData.firstgid;
        this.endIndex = this.startIndex + tiledData.tilecount - 1;
        this.tileSize = new Vec2_1.default(tiledData.tilewidth, tiledData.tilewidth);
        this.imageKey = tiledData.image;
        this.imageSize = new Vec2_1.default(tiledData.imagewidth, tiledData.imageheight);
    }
    /**
     * Gets the image key associated with this tilemap
     * @returns The image key of this tilemap
     */
    getImageKey() {
        return this.imageKey;
    }
    /**
     * Returns a Vec2 containing the left and top offset from the image origin for this tile.
     * @param tileIndex The index of the tile from startIndex to endIndex of this tileset
     * @returns A Vec2 containing the offset for the specified tile.
     */
    getImageOffsetForTile(tileIndex) {
        // Get the true index
        let index = tileIndex - this.startIndex;
        let row = Math.floor(index / this.numCols);
        let col = index % this.numCols;
        let width = this.tileSize.x;
        let height = this.tileSize.y;
        // Calculate the position to start a crop in the tileset image
        let left = col * width;
        let top = row * height;
        return new Vec2_1.default(left, top);
    }
    /**
     * Gets the start index
     * @returns The start index
     */
    getStartIndex() {
        return this.startIndex;
    }
    /**
     * Gets the tile set
     * @returns A Vec2 containing the tile size
     */
    getTileSize() {
        return this.tileSize;
    }
    /**
     * Gets the number of rows in the tileset
     * @returns The number of rows
     */
    getNumRows() {
        return this.numRows;
    }
    /**
     * Gets the number of columns in the tilset
     * @returns The number of columns
     */
    getNumCols() {
        return this.numCols;
    }
    getTileCount() {
        return this.endIndex - this.startIndex + 1;
    }
    /**
     * Checks whether or not this tilset contains the specified tile index. This is used for rendering.
     * @param tileIndex The index of the tile to check
     * @returns A boolean representing whether or not this tilset uses the specified index
     */
    hasTile(tileIndex) {
        return tileIndex >= this.startIndex && tileIndex <= this.endIndex;
    }
    /**
     * Render a singular tile with index tileIndex from the tileset located at position dataIndex
     * @param ctx The rendering context
     * @param tileIndex The value of the tile to render
     * @param dataIndex The index of the tile in the data array
     * @param worldSize The size of the world
     * @param origin The viewport origin in the current layer
     * @param scale The scale of the tilemap
     */
    renderTile(ctx, tileIndex, dataIndex, maxCols, origin, scale, zoom) {
        let image = ResourceManager_1.default.getInstance().getImage(this.imageKey);
        // Get the true index
        let index = tileIndex - this.startIndex;
        let row = Math.floor(index / this.numCols);
        let col = index % this.numCols;
        let width = this.tileSize.x;
        let height = this.tileSize.y;
        // Calculate the position to start a crop in the tileset image
        let left = col * width;
        let top = row * height;
        // Calculate the position in the world to render the tile
        let x = Math.floor((dataIndex % maxCols) * width * scale.x);
        let y = Math.floor(Math.floor(dataIndex / maxCols) * height * scale.y);
        ctx.drawImage(image, left, top, width, height, Math.floor((x - origin.x) * zoom), Math.floor((y - origin.y) * zoom), Math.ceil(width * scale.x * zoom), Math.ceil(height * scale.y * zoom));
    }
}
exports.default = Tileset;

},{"../../ResourceManager/ResourceManager":89,"../Vec2":26}],26:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const MathUtils_1 = __importDefault(require("../Utils/MathUtils"));
/**
 * A two-dimensional vector (x, y)
 */
class Vec2 {
    /**
     * Creates a new Vec2
     * @param x The x value of the vector
     * @param y The y value of the vector
     */
    constructor(x = 0, y = 0) {
        /**
         * When this vector changes its value, do something
         */
        this.onChange = () => { };
        this.vec = new Float32Array(2);
        this.vec[0] = x;
        this.vec[1] = y;
    }
    // Expose x and y with getters and setters
    get x() {
        return this.vec[0];
    }
    set x(x) {
        this.vec[0] = x;
        if (this.onChange) {
            this.onChange();
        }
    }
    get y() {
        return this.vec[1];
    }
    set y(y) {
        this.vec[1] = y;
        if (this.onChange) {
            this.onChange();
        }
    }
    static get ZERO() {
        return new Vec2(0, 0);
    }
    static get INF() {
        return new Vec2(Infinity, Infinity);
    }
    static get UP() {
        return new Vec2(0, -1);
    }
    static get DOWN() {
        return new Vec2(0, 1);
    }
    static get LEFT() {
        return new Vec2(-1, 0);
    }
    static get RIGHT() {
        return new Vec2(1, 0);
    }
    /**
     * The squared magnitude of the vector. This tends to be faster, so use it in situations where taking the
     * square root doesn't matter, like for comparing distances.
     * @returns The squared magnitude of the vector
     */
    magSq() {
        return this.x * this.x + this.y * this.y;
    }
    /**
     * The magnitude of the vector.
     * @returns The magnitude of the vector.
     */
    mag() {
        return Math.sqrt(this.magSq());
    }
    /**
     * Divdes x and y by the magnitude to obtain the unit vector in the direction of this vector.
     * @returns This vector as a unit vector.
     */
    normalize() {
        if (this.x === 0 && this.y === 0)
            return this;
        let mag = this.mag();
        this.x /= mag;
        this.y /= mag;
        return this;
    }
    /**
     * Works like normalize(), but returns a new Vec2
     * @returns A new vector that is the unit vector for this one
     */
    normalized() {
        if (this.isZero()) {
            return this;
        }
        let mag = this.mag();
        return new Vec2(this.x / mag, this.y / mag);
    }
    /**
     * Sets the x and y elements of this vector to zero.
     * @returns This vector, with x and y set to zero.
     */
    zero() {
        return this.set(0, 0);
    }
    /**
     * Sets the vector's x and y based on the angle provided. Goes counter clockwise.
     * @param angle The angle in radians
     * @param radius The magnitude of the vector at the specified angle
     * @returns This vector.
     */
    setToAngle(angle, radius = 1) {
        this.x = MathUtils_1.default.floorToPlace(Math.cos(angle) * radius, 5);
        this.y = MathUtils_1.default.floorToPlace(-Math.sin(angle) * radius, 5);
        return this;
    }
    /**
     * Returns a vector that point from this vector to another one
     * @param other The vector to point to
     * @returns A new Vec2 that points from this vector to the one provided
     */
    vecTo(other) {
        return new Vec2(other.x - this.x, other.y - this.y);
    }
    /**
     * Returns a vector containing the direction from this vector to another
     * @param other The vector to point to
     * @returns A new Vec2 that points from this vector to the one provided. This new Vec2 will be a unit vector.
     */
    dirTo(other) {
        return this.vecTo(other).normalize();
    }
    /**
     * Keeps the vector's direction, but sets its magnitude to be the provided magnitude
     * @param magnitude The magnitude the vector should be
     * @returns This vector with its magnitude set to the new magnitude
     */
    scaleTo(magnitude) {
        return this.normalize().scale(magnitude);
    }
    /**
     * Scales x and y by the number provided, or if two number are provided, scales them individually.
     * @param factor The scaling factor for the vector, or for only the x-component if yFactor is provided
     * @param yFactor The scaling factor for the y-component of the vector
     * @returns This vector after scaling
     */
    scale(factor, yFactor = null) {
        if (yFactor !== null) {
            this.x *= factor;
            this.y *= yFactor;
            return this;
        }
        this.x *= factor;
        this.y *= factor;
        return this;
    }
    /**
     * Returns a scaled version of this vector without modifying it.
     * @param factor The scaling factor for the vector, or for only the x-component if yFactor is provided
     * @param yFactor The scaling factor for the y-component of the vector
     * @returns A new vector that has the values of this vector after scaling
     */
    scaled(factor, yFactor = null) {
        return this.clone().scale(factor, yFactor);
    }
    /**
     * Rotates the vector counter-clockwise by the angle amount specified
     * @param angle The angle to rotate by in radians
     * @returns This vector after rotation.
     */
    rotateCCW(angle) {
        let cs = Math.cos(angle);
        let sn = Math.sin(angle);
        let tempX = this.x * cs - this.y * sn;
        let tempY = this.x * sn + this.y * cs;
        this.x = tempX;
        this.y = tempY;
        return this;
    }
    /**
     * Sets the vectors coordinates to be the ones provided
     * @param x The new x value for this vector
     * @param y The new y value for this vector
     * @returns This vector
     */
    set(x, y) {
        this.x = x;
        this.y = y;
        return this;
    }
    /**
     * Copies the values of the other Vec2 into this one.
     * @param other The Vec2 to copy
     * @returns This vector with its values set to the vector provided
     */
    copy(other) {
        return this.set(other.x, other.y);
    }
    /**
     * Adds this vector the another vector
     * @param other The Vec2 to add to this one
     * @returns This vector after adding the one provided
     */
    add(other) {
        this.x += other.x;
        this.y += other.y;
        return this;
    }
    /**
     * Increments the fields of this vector. Both are incremented with a, if only a is provided.
     * @param a The first number to increment by
     * @param b The second number to increment by
     * @returnss This vector after incrementing
     */
    inc(a, b) {
        if (b === undefined) {
            this.x += a;
            this.y += a;
        }
        else {
            this.x += a;
            this.y += b;
        }
        return this;
    }
    /**
     * Subtracts another vector from this vector
     * @param other The Vec2 to subtract from this one
     * @returns This vector after subtracting the one provided
     */
    sub(other) {
        this.x -= other.x;
        this.y -= other.y;
        return this;
    }
    /**
     * Multiplies this vector with another vector element-wise. In other words, this.x *= other.x and this.y *= other.y
     * @param other The Vec2 to multiply this one by
     * @returns This vector after multiplying its components by this one
     */
    mult(other) {
        this.x *= other.x;
        this.y *= other.y;
        return this;
    }
    /**
     * Divides this vector with another vector element-wise. In other words, this.x /= other.x and this.y /= other.y
     * @param other The vector to divide this one by
     * @returns This vector after division
     */
    div(other) {
        if (other.x === 0 || other.y === 0)
            throw "Divide by zero error";
        this.x /= other.x;
        this.y /= other.y;
        return this;
    }
    /**
     * Does an element wise remainder operation on this vector. this.x %= other.x and this.y %= other.y
     * @param other The other vector
     * @returns this vector
     */
    remainder(other) {
        this.x = this.x % other.x;
        this.y = this.y % other.y;
        return this;
    }
    /**
     * Returns the squared distance between this vector and another vector
     * @param other The vector to compute distance squared to
     * @returns The squared distance between this vector and the one provided
     */
    distanceSqTo(other) {
        return (this.x - other.x) * (this.x - other.x) + (this.y - other.y) * (this.y - other.y);
    }
    /**
     * Returns the distance between this vector and another vector
     * @param other The vector to compute distance to
     * @returns The distance between this vector and the one provided
     */
    distanceTo(other) {
        return Math.sqrt(this.distanceSqTo(other));
    }
    /**
     * Returns the dot product of this vector and another
     * @param other The vector to compute the dot product with
     * @returns The dot product of this vector and the one provided.
     */
    dot(other) {
        return this.x * other.x + this.y * other.y;
    }
    /**
     * Returns the angle counter-clockwise in radians from this vector to another vector
     * @param other The vector to compute the angle to
     * @returns The angle, rotating CCW, from this vector to the other vector
     */
    angleToCCW(other) {
        let dot = this.dot(other);
        let det = this.x * other.y - this.y * other.x;
        let angle = -Math.atan2(det, dot);
        if (angle < 0) {
            angle += 2 * Math.PI;
        }
        return angle;
    }
    /**
     * Returns a string representation of this vector rounded to 1 decimal point
     * @returns This vector as a string
     */
    toString() {
        return this.toFixed();
    }
    /**
     * Returns a string representation of this vector rounded to the specified number of decimal points
     * @param numDecimalPoints The number of decimal points to create a string to
     * @returns This vector as a string
     */
    toFixed(numDecimalPoints = 1) {
        return "(" + this.x.toFixed(numDecimalPoints) + ", " + this.y.toFixed(numDecimalPoints) + ")";
    }
    /**
     * Returns a new vector with the same coordinates as this one.
     * @returns A new Vec2 with the same values as this one
     */
    clone() {
        return new Vec2(this.x, this.y);
    }
    /**
     * Returns true if this vector and other have the EXACT same x and y (not assured to be safe for floats)
     * @param other The vector to check against
     * @returns A boolean representing the equality of the two vectors
     */
    strictEquals(other) {
        return this.x === other.x && this.y === other.y;
    }
    /**
     * Returns true if this vector and other have the same x and y
     * @param other The vector to check against
     * @returns A boolean representing the equality of the two vectors
     */
    equals(other) {
        let xEq = Math.abs(this.x - other.x) < 0.0000001;
        let yEq = Math.abs(this.y - other.y) < 0.0000001;
        return xEq && yEq;
    }
    /**
     * Returns true if this vector is the zero vector exactly (not assured to be safe for floats).
     * @returns A boolean representing the equality of this vector and the zero vector
     */
    strictIsZero() {
        return this.x === 0 && this.y === 0;
    }
    /**
     * Returns true if this x and y for this vector are both zero.
     * @returns A boolean representing the equality of this vector and the zero vector
     */
    isZero() {
        return Math.abs(this.x) < 0.0000001 && Math.abs(this.y) < 0.0000001;
    }
    /**
     * Sets the function that is called whenever this vector is changed.
     * @param f The function to be called
     */
    setOnChange(f) {
        this.onChange = f;
    }
    toArray() {
        return this.vec;
    }
    /**
     * Performs linear interpolation between two vectors
     * @param a The first vector
     * @param b The second vector
     * @param t The time of the lerp, with 0 being vector A, and 1 being vector B
     * @returns A new Vec2 representing the lerp between vector a and b.
     */
    static lerp(a, b, t) {
        return new Vec2(MathUtils_1.default.lerp(a.x, b.x, t), MathUtils_1.default.lerp(a.y, b.y, t));
    }
}
exports.default = Vec2;
Vec2.ZERO_STATIC = new Vec2(0, 0);

},{"../Utils/MathUtils":108}],27:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Map_1 = __importDefault(require("../DataTypes/Collections/Map"));
const Vec2_1 = __importDefault(require("../DataTypes/Vec2"));
const Color_1 = __importDefault(require("../Utils/Color"));
/**
 * A util class for rendering Debug messages to the canvas.
 */
class Debug {
    /**
     * Add a message to display on the debug screen
     * @param id A unique ID for this message
     * @param messages The messages to print to the debug screen
     */
    static log(id, ...messages) {
        // let message = "";
        // for(let i = 0; i < messages.length; i++){
        // 	message += messages[i].toString();
        // }
        // Join all messages with spaces
        let message = messages.map((m) => m.toString()).join(" ");
        this.logMessages.add(id, message);
    }
    /**
     * Deletes a a key from the log and stops it from keeping up space on the screen
     * @param id The id of the log item to clear
     */
    static clearLogItem(id) {
        this.logMessages.delete(id);
    }
    /**
     * Sets the list of nodes to render with the debugger
     * @param nodes The new list of nodes
     */
    static setNodes(nodes) {
        this.nodes = nodes;
    }
    /**
     * Draws a box at the specified position
     * @param center The center of the box
     * @param halfSize The dimensions of the box
     * @param filled A boolean for whether or not the box is filled
     * @param color The color of the box to draw
     */
    static drawBox(center, halfSize, filled, color) {
        let alpha = this.debugRenderingContext.globalAlpha;
        this.debugRenderingContext.globalAlpha = color.a;
        if (filled) {
            this.debugRenderingContext.fillStyle = color.toString();
            this.debugRenderingContext.fillRect(center.x - halfSize.x, center.y - halfSize.y, halfSize.x * 2, halfSize.y * 2);
        }
        else {
            let lineWidth = 2;
            this.debugRenderingContext.lineWidth = lineWidth;
            this.debugRenderingContext.strokeStyle = color.toString();
            this.debugRenderingContext.strokeRect(center.x - halfSize.x, center.y - halfSize.y, halfSize.x * 2, halfSize.y * 2);
        }
        this.debugRenderingContext.globalAlpha = alpha;
    }
    /**
     * Draws a circle at the specified position
     * @param center The center of the circle
     * @param radius The dimensions of the box
     * @param filled A boolean for whether or not the circle is filled
     * @param color The color of the circle
     */
    static drawCircle(center, radius, filled, color) {
        let alpha = this.debugRenderingContext.globalAlpha;
        this.debugRenderingContext.globalAlpha = color.a;
        if (filled) {
            this.debugRenderingContext.fillStyle = color.toString();
            this.debugRenderingContext.beginPath();
            this.debugRenderingContext.arc(center.x, center.y, radius, 0, 2 * Math.PI);
            this.debugRenderingContext.closePath();
            this.debugRenderingContext.fill();
        }
        else {
            let lineWidth = 2;
            this.debugRenderingContext.lineWidth = lineWidth;
            this.debugRenderingContext.strokeStyle = color.toString();
            this.debugRenderingContext.beginPath();
            this.debugRenderingContext.arc(center.x, center.y, radius, 0, 2 * Math.PI);
            this.debugRenderingContext.closePath();
            this.debugRenderingContext.stroke();
        }
        this.debugRenderingContext.globalAlpha = alpha;
    }
    /**
     * Draws a ray at the specified position
     * @param from The starting position of the ray
     * @param to The ending position of the ray
     * @param color The color of the ray
     */
    static drawRay(from, to, color) {
        this.debugRenderingContext.lineWidth = 2;
        this.debugRenderingContext.strokeStyle = color.toString();
        this.debugRenderingContext.beginPath();
        this.debugRenderingContext.moveTo(from.x, from.y);
        this.debugRenderingContext.lineTo(to.x, to.y);
        this.debugRenderingContext.closePath();
        this.debugRenderingContext.stroke();
    }
    /**
     * Draws a point at the specified position
     * @param pos The position of the point
     * @param color The color of the point
     */
    static drawPoint(pos, color) {
        let pointSize = 6;
        this.debugRenderingContext.fillStyle = color.toString();
        this.debugRenderingContext.fillRect(pos.x - pointSize / 2, pos.y - pointSize / 2, pointSize, pointSize);
    }
    /**
     * Sets the default rendering color for text for the debugger
     * @param color The color to render the text
     */
    static setDefaultTextColor(color) {
        this.defaultTextColor = color;
    }
    /**
     * Performs any necessary setup operations on the Debug canvas
     * @param canvas The debug canvas
     * @param width The desired width of the canvas
     * @param height The desired height of the canvas
     * @returns The rendering context extracted from the canvas
     */
    static initializeDebugCanvas(canvas, width, height) {
        canvas.width = width;
        canvas.height = height;
        this.debugCanvasSize = new Vec2_1.default(width, height);
        this.debugRenderingContext = canvas.getContext("2d");
        return this.debugRenderingContext;
    }
    /** Clears the debug canvas */
    static clearCanvas() {
        this.debugRenderingContext.clearRect(0, 0, this.debugCanvasSize.x, this.debugCanvasSize.y);
    }
    /** Renders the text and nodes sent to the Debug system */
    static render() {
        this.renderText();
        this.renderNodes();
    }
    /** Renders the text sent to the Debug canvas */
    static renderText() {
        let y = 20;
        this.debugRenderingContext.font = "20px Arial";
        this.debugRenderingContext.fillStyle = this.defaultTextColor.toString();
        // Draw all of the text
        this.logMessages.forEach((key) => {
            this.debugRenderingContext.fillText(this.logMessages.get(key), 10, y);
            y += 30;
        });
    }
    /** Renders the nodes registered with the debug canvas */
    static renderNodes() {
        if (this.nodes) {
            this.nodes.forEach(node => {
                node.debugRender();
            });
        }
    }
}
exports.default = Debug;
/** A map of log messages to display on the screen */
Debug.logMessages = new Map_1.default();
/** The rendering color for text */
Debug.defaultTextColor = Color_1.default.WHITE;

},{"../DataTypes/Collections/Map":8,"../DataTypes/Vec2":26,"../Utils/Color":105}],28:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Color_1 = __importDefault(require("../Utils/Color"));
// @ignorePage
class Stats extends Object {
    static initStats() {
        let canvas = document.getElementById("stats-canvas");
        canvas.width = this.CANVAS_WIDTH;
        canvas.height = this.CANVAS_HEIGHT;
        this.ctx = canvas.getContext("2d");
        this.statsDiv = document.getElementById("stats-display");
        this.prevfps = new Array();
        this.prevClearTimes = new Array();
        this.SGClearTimes = new Array();
        this.avgSGClearTime = 0;
        this.prevFillTimes = new Array();
        this.SGFillTimes = new Array();
        this.avgSGFillTime = 0;
        this.prevUpdateTimes = new Array();
        this.SGUpdateTimes = new Array();
        this.avgSGUpdateTime = 0;
        this.prevQueryTimes = new Array();
        this.SGQueryTimes = new Array();
        this.avgSGQueryTime = 0;
        let clearTime = document.createElement("span");
        clearTime.setAttribute("id", "sgclear");
        let fillTime = document.createElement("span");
        fillTime.setAttribute("id", "sgfill");
        let updateTime = document.createElement("span");
        updateTime.setAttribute("id", "sgupdate");
        let queryTime = document.createElement("span");
        queryTime.setAttribute("id", "sgquery");
        let br1 = document.createElement("br");
        let br2 = document.createElement("br");
        let br3 = document.createElement("br");
        this.statsDiv.append(clearTime, br1, fillTime, br2, updateTime, br3, queryTime);
        this.graphChoices = document.getElementById("chart-option");
        let option1 = document.createElement("option");
        option1.value = "prevfps";
        option1.label = "FPS";
        let option2 = document.createElement("option");
        option2.value = "prevClearTimes";
        option2.label = "Clear Time";
        let option3 = document.createElement("option");
        option3.value = "prevFillTimes";
        option3.label = "Fill time";
        let option4 = document.createElement("option");
        option4.value = "prevUpdateTimes";
        option4.label = "Update time";
        let option5 = document.createElement("option");
        option5.value = "prevQueryTimes";
        option5.label = "Query Time";
        let optionAll = document.createElement("option");
        optionAll.value = "all";
        optionAll.label = "All";
        this.graphChoices.append(option1, option2, option3, option4, option5, optionAll);
    }
    static updateFPS(fps) {
        this.prevfps.push(fps);
        if (this.prevfps.length > Stats.NUM_POINTS) {
            this.prevfps.shift();
        }
        if (this.SGClearTimes.length > 0) {
            this.prevClearTimes.push(this.avgSGClearTime);
            if (this.prevClearTimes.length > this.NUM_POINTS) {
                this.prevClearTimes.shift();
            }
        }
        if (this.SGFillTimes.length > 0) {
            this.prevFillTimes.push(this.avgSGFillTime);
            if (this.prevFillTimes.length > this.NUM_POINTS) {
                this.prevFillTimes.shift();
            }
        }
        if (this.SGUpdateTimes.length > 0) {
            this.prevUpdateTimes.push(this.avgSGUpdateTime);
            if (this.prevUpdateTimes.length > this.NUM_POINTS) {
                this.prevUpdateTimes.shift();
            }
        }
        if (this.SGQueryTimes.length > 0) {
            this.prevQueryTimes.push(this.avgSGQueryTime);
            if (this.prevQueryTimes.length > this.NUM_POINTS) {
                this.prevQueryTimes.shift();
            }
        }
        this.updateSGStats();
    }
    static log(key, data) {
        if (key === "sgclear") {
            this.SGClearTimes.push(data);
            if (this.SGClearTimes.length > 100) {
                this.SGClearTimes.shift();
            }
        }
        else if (key === "sgfill") {
            this.SGFillTimes.push(data);
            if (this.SGFillTimes.length > 100) {
                this.SGFillTimes.shift();
            }
        }
        else if (key === "sgupdate") {
            this.SGUpdateTimes.push(data);
            if (this.SGUpdateTimes.length > 100) {
                this.SGUpdateTimes.shift();
            }
        }
        else if (key === "sgquery") {
            this.SGQueryTimes.push(data);
            if (this.SGQueryTimes.length > 1000) {
                this.SGQueryTimes.shift();
            }
        }
    }
    static render() {
        // Display stats
        this.drawCharts();
    }
    static drawCharts() {
        this.ctx.clearRect(0, 0, this.CANVAS_WIDTH, this.CANVAS_HEIGHT);
        let paramString = this.graphChoices.value;
        if (paramString === "prevfps" || paramString === "all") {
            let param = this.prevfps;
            let color = Color_1.default.BLUE.toString();
            this.drawChart(param, color);
        }
        if (paramString === "prevClearTimes" || paramString === "all") {
            let param = this.prevClearTimes;
            let color = Color_1.default.RED.toString();
            this.drawChart(param, color);
        }
        if (paramString === "prevFillTimes" || paramString === "all") {
            let param = this.prevFillTimes;
            let color = Color_1.default.GREEN.toString();
            this.drawChart(param, color);
        }
        if (paramString === "prevUpdateTimes" || paramString === "all") {
            let param = this.prevUpdateTimes;
            let color = Color_1.default.CYAN.toString();
            this.drawChart(param, color);
        }
        if (paramString === "prevQueryTimes" || paramString === "all") {
            let param = this.prevQueryTimes;
            let color = Color_1.default.ORANGE.toString();
            this.drawChart(param, color);
        }
    }
    static drawChart(param, color) {
        this.ctx.strokeStyle = Color_1.default.BLACK.toString();
        this.ctx.beginPath();
        this.ctx.moveTo(10, 10);
        this.ctx.lineTo(10, this.CANVAS_HEIGHT - 10);
        this.ctx.closePath();
        this.ctx.stroke();
        this.ctx.beginPath();
        this.ctx.moveTo(10, this.CANVAS_HEIGHT - 10);
        this.ctx.lineTo(this.CANVAS_WIDTH - 10, this.CANVAS_HEIGHT - 10);
        this.ctx.closePath();
        this.ctx.stroke();
        let max = Math.max(...param);
        let prevX = 10;
        let prevY = this.CANVAS_HEIGHT - 10 - param[0] / max * (this.CANVAS_HEIGHT - 20);
        this.ctx.strokeStyle = color;
        for (let i = 1; i < param.length; i++) {
            let fps = param[i];
            let x = 10 + i * (this.CANVAS_WIDTH - 20) / this.NUM_POINTS;
            let y = this.CANVAS_HEIGHT - 10 - fps / max * (this.CANVAS_HEIGHT - 20);
            this.ctx.beginPath();
            this.ctx.moveTo(prevX, prevY);
            this.ctx.lineTo(x, y);
            this.ctx.closePath();
            this.ctx.stroke();
            prevX = x;
            prevY = y;
        }
    }
    static updateSGStats() {
        if (this.SGClearTimes.length > 0) {
            this.avgSGClearTime = this.SGClearTimes.reduce((acc, val) => acc + val) / this.SGClearTimes.length;
        }
        if (this.SGFillTimes.length > 0) {
            this.avgSGFillTime = this.SGFillTimes.reduce((acc, val) => acc + val) / this.SGFillTimes.length;
        }
        if (this.SGUpdateTimes.length > 0) {
            this.avgSGUpdateTime = this.SGUpdateTimes.reduce((acc, val) => acc + val) / this.SGUpdateTimes.length;
        }
        if (this.SGQueryTimes.length > 0) {
            this.avgSGQueryTime = this.SGQueryTimes.reduce((acc, val) => acc + val) / this.SGQueryTimes.length;
        }
        document.getElementById("sgclear").innerHTML = "Avg SG clear time: " + this.avgSGClearTime;
        document.getElementById("sgfill").innerHTML = "Avg SG fill time: " + this.avgSGFillTime;
        document.getElementById("sgupdate").innerHTML = "Avg SG update time: " + this.avgSGUpdateTime;
        document.getElementById("sgquery").innerHTML = "Avg SG query time: " + this.avgSGQueryTime;
    }
}
exports.default = Stats;
Stats.NUM_POINTS = 60;
Stats.CANVAS_WIDTH = 300;
Stats.CANVAS_HEIGHT = 300;

},{"../Utils/Color":105}],29:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const EventQueue_1 = __importDefault(require("./EventQueue"));
const GameEvent_1 = __importDefault(require("./GameEvent"));
/**
 * An event emitter object other systems can use to hook into the EventQueue.
 * Provides an easy interface for firing off events.
 */
class Emitter {
    /** Creates a new Emitter */
    constructor() {
        this.eventQueue = EventQueue_1.default.getInstance();
    }
    /**
     * Emit and event of type eventType with the data packet data
     * @param eventType The name of the event to fire off
     * @param data A @reference[Map] or record containing any data about the event
     */
    fireEvent(eventType, data = null) {
        this.eventQueue.addEvent(new GameEvent_1.default(eventType, data));
    }
}
exports.default = Emitter;

},{"./EventQueue":30,"./GameEvent":31}],30:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Queue_1 = __importDefault(require("../DataTypes/Collections/Queue"));
const Map_1 = __importDefault(require("../DataTypes/Collections/Map"));
const GameEventType_1 = require("./GameEventType");
/**
 * The main event system of the game engine.
 * Events are sent to the EventQueue, which handles distribution to any systems that are listening for those events.
 * This allows for handling of input without having classes directly hook into javascript event handles,
 * and allows otherwise separate classes to communicate with each other cleanly, such as a Player object
 * requesting a sound be played by the audio system.
 *
 * The distribution of @reference[GameEvent]s happens as follows:
 *
 * Events are recieved throughout a frame and are queued up by the EventQueue.
 * At the beginning of the next frame, events are sent out to any receivers that are hooked into the event type.
 * @reference[Receiver]s are then free to process events as they see fit.
 *
 * Overall, the EventQueue can be considered as something similar to an email server,
 * and the @reference[Receiver]s can be considered as the client inboxes.
 *
 * See @link(Game Programming Patterns)(https://gameprogrammingpatterns.com/event-queue.html) for more discussion on EventQueues
 */
class EventQueue {
    constructor() {
        this.MAX_SIZE = 200;
        this.q = new Queue_1.default(this.MAX_SIZE);
        this.receivers = new Map_1.default();
    }
    /** Retrieves the instance of the Singleton EventQueue */
    static getInstance() {
        if (this.instance === null) {
            this.instance = new EventQueue();
        }
        return this.instance;
    }
    /** Adds an event to the EventQueue.
     * This is exposed to the rest of the game engine through the @reference[Emitter] class */
    addEvent(event) {
        this.q.enqueue(event);
    }
    /**
     * Associates a receiver with a type of event. Every time this event appears in the future,
     * it will be given to the receiver (and any others watching that type).
     * This is exposed to the rest of the game engine through the @reference[Receiver] class
     * @param receiver The event receiver
     * @param type The type or types of events to subscribe to
     */
    subscribe(receiver, type) {
        if (type instanceof Array) {
            // If it is an array, subscribe to all event types
            for (let t of type) {
                this.addListener(receiver, t);
            }
        }
        else {
            this.addListener(receiver, type);
        }
    }
    /**
     * Unsubscribes the specified receiver from all events, or from whatever events are provided
     * @param receiver The receiver to unsubscribe
     * @param keys The events to unsubscribe from. If none are provided, unsubscribe from all
     */
    unsubscribe(receiver, ...events) {
        this.receivers.forEach(eventName => {
            // If keys were provided, only continue if this key is one of them
            if (events.length > 0 && events.indexOf(eventName) === -1)
                return;
            // Find the index of our receiver for this key
            let index = this.receivers.get(eventName).indexOf(receiver);
            // If an index was found, remove the receiver
            if (index !== -1) {
                this.receivers.get(eventName).splice(index, 1);
            }
        });
    }
    // Associate the receiver and the type
    addListener(receiver, type) {
        if (this.receivers.has(type)) {
            this.receivers.get(type).push(receiver);
        }
        else {
            this.receivers.add(type, [receiver]);
        }
    }
    update(deltaT) {
        while (this.q.hasItems()) {
            // Retrieve each event
            let event = this.q.dequeue();
            // If a receiver has this event type, send it the event
            if (this.receivers.has(event.type)) {
                for (let receiver of this.receivers.get(event.type)) {
                    receiver.receive(event);
                }
            }
            // If a receiver is subscribed to all events, send it the event
            if (this.receivers.has(GameEventType_1.GameEventType.ALL)) {
                for (let receiver of this.receivers.get(GameEventType_1.GameEventType.ALL)) {
                    receiver.receive(event);
                }
            }
        }
    }
}
exports.default = EventQueue;
EventQueue.instance = null;

},{"../DataTypes/Collections/Map":8,"../DataTypes/Collections/Queue":9,"./GameEventType":32}],31:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Map_1 = __importDefault(require("../DataTypes/Collections/Map"));
/**
 * A representation of an in-game event that is passed through the @reference[EventQueue]
 */
class GameEvent {
    /**
     * Creates a new GameEvent.
     * This is handled implicitly through the @reference[Emitter] class
     * @param type The type of the GameEvent
     * @param data The data contained by the GameEvent
     */
    constructor(type, data = null) {
        // Parse the game event data
        if (data === null) {
            this.data = new Map_1.default();
        }
        else if (!(data instanceof Map_1.default)) {
            // data is a raw object, unpack
            this.data = new Map_1.default();
            for (let key in data) {
                this.data.add(key, data[key]);
            }
        }
        else {
            this.data = data;
        }
        this.type = type;
        this.time = Date.now();
    }
    /**
     * Checks the type of the GameEvent
     * @param type The type to check
     * @returns True if the GameEvent is the specified type, false otherwise.
     */
    isType(type) {
        return this.type === type;
    }
    /**
     * Returns this GameEvent as a string
     * @returns The string representation of the GameEvent
     */
    toString() {
        return this.type + ": @" + this.time;
    }
}
exports.default = GameEvent;

},{"../DataTypes/Collections/Map":8}],32:[function(require,module,exports){
"use strict";
// @ignorePage
Object.defineProperty(exports, "__esModule", { value: true });
exports.GameEventType = void 0;
var GameEventType;
(function (GameEventType) {
    /**
     * Mouse Down event. Has data: {position: Vec2 - Mouse Position}
     */
    GameEventType["MOUSE_DOWN"] = "mouse_down";
    /**
     * Mouse Up event. Has data: {position: Vec2 - Mouse Position}
     */
    GameEventType["MOUSE_UP"] = "mouse_up";
    /**
     * Mouse Move event. Has data: {position: Vec2 - Mouse Position}
     */
    GameEventType["MOUSE_MOVE"] = "mouse_move";
    /**
     * Key Down event. Has data: {key: string - The key that is down}
     */
    GameEventType["KEY_DOWN"] = "key_down";
    /**
     * Key Up event. Has data: {key: string - The key that is up}
     */
    GameEventType["KEY_UP"] = "key_up";
    /**
     * Canvas Blur event. Has data: {}
     */
    GameEventType["CANVAS_BLUR"] = "canvas_blur";
    /**
     * Mouse wheel up event. Has data: {}
     */
    GameEventType["WHEEL_UP"] = "wheel_up";
    /**
     * Mouse wheel down event. Has data: {}
     */
    GameEventType["WHEEL_DOWN"] = "wheel_down";
    /**
     * Start Recording event. Has data: {recording: AbstractRecording}
     */
    GameEventType["START_RECORDING"] = "start_recording";
    /**
     * Stop Recording event. Has data: {}
     */
    GameEventType["STOP_RECORDING"] = "stop_recording";
    /**
     * Play Recording event. Has data: {}
     */
    GameEventType["PLAY_RECORDING"] = "play_recording";
    /**
     * Play Sound event. Has data: {key: string, loop: boolean, holdReference: boolean }
     */
    GameEventType["PLAY_SOUND"] = "play_sound";
    /**
     * Play Sound event. Has data: {key: string}
     */
    GameEventType["STOP_SOUND"] = "stop_sound";
    /**
     * Play Sound event. Has data: {key: string, loop: boolean, holdReference: boolean, channel: AudioChannelType }
     */
    GameEventType["PLAY_SFX"] = "play_sfx";
    /**
     * Play Sound event. Has data: {key: string, loop: boolean, holdReference: boolean }
     */
    GameEventType["PLAY_MUSIC"] = "play_music";
    /**
     * Mute audio channel event. Has data: {channel: AudioChannelType}
     */
    GameEventType["MUTE_CHANNEL"] = "mute_channel";
    /**
     * Unmute audio channel event. Has data: {channel: AudioChannelType}
     */
    GameEventType["UNMUTE_CHANNEL"] = "unmute_channel";
    /**
     * Encompasses all event types. Used for receivers only.
     */
    GameEventType["ALL"] = "all";
    /**
     * Disables reveiving input from the user for the specified inputs. Has data: {inputs: InputHanlders[]}
     */
    GameEventType["DISABLE_USER_INPUT"] = "disable_user_input";
    /**
     * Enables receiving input from the user for the specified inputs. Has data: {inputs: InputHandlers[]}
     */
    GameEventType["ENABLE_USER_INPUT"] = "enable_user_input";
    /**
     * Triggers a scene change. Has data: {scene: new (...args: any) => T extends Scene, init: Record<string, any>}
     */
    GameEventType["CHANGE_SCENE"] = "change_scene";
})(GameEventType = exports.GameEventType || (exports.GameEventType = {}));

},{}],33:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Queue_1 = __importDefault(require("../DataTypes/Collections/Queue"));
const EventQueue_1 = __importDefault(require("./EventQueue"));
/**
 * Receives subscribed events from the EventQueue.
 */
class Receiver {
    /** Creates a new Receiver */
    constructor() {
        this.MAX_SIZE = 200;
        this.q = new Queue_1.default(this.MAX_SIZE);
    }
    destroy() {
        EventQueue_1.default.getInstance().unsubscribe(this);
    }
    /**
     * Adds these types of events to this receiver's queue every update.
     * @param eventTypes The types of events this receiver will be subscribed to
     */
    subscribe(eventTypes) {
        EventQueue_1.default.getInstance().subscribe(this, eventTypes);
        this.q.clear();
    }
    /**
     * Adds an event to the queue of this reciever. This is used by the @reference[EventQueue] to distribute events
     * @param event The event to receive
     */
    receive(event) {
        try {
            this.q.enqueue(event);
        }
        catch (e) {
            console.warn("Receiver overflow for event " + event.toString());
            throw e;
        }
    }
    /**
     * Retrieves the next event from the receiver's queue
     * @returns The next GameEvent
     */
    getNextEvent() {
        return this.q.dequeue();
    }
    /**
     * Looks at the next event in the receiver's queue, but doesn't remove it from the queue
     * @returns The next GameEvent
     */
    peekNextEvent() {
        return this.q.peekNext();
    }
    /**
     * Returns true if the receiver has any events in its queue
     * @returns True if the receiver has another event, false otherwise
     */
    hasNextEvent() {
        return this.q.hasItems();
    }
    /**
     * Ignore all events this frame
     */
    ignoreEvents() {
        this.q.clear();
    }
}
exports.default = Receiver;

},{"../DataTypes/Collections/Queue":9,"./EventQueue":30}],34:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Receiver_1 = __importDefault(require("../Events/Receiver"));
const Map_1 = __importDefault(require("../DataTypes/Collections/Map"));
const Vec2_1 = __importDefault(require("../DataTypes/Vec2"));
const EventQueue_1 = __importDefault(require("../Events/EventQueue"));
const GameEventType_1 = require("../Events/GameEventType");
/**
 * Receives input events from the @reference[EventQueue] and allows for easy access of information about input by other systems
 */
class Input {
    /**
     * Initializes the Input object
     * @param viewport A reference to the viewport of the game
     */
    static initialize(viewport, keyMap) {
        Input.viewport = viewport;
        Input.mousePressed = false;
        Input.mouseJustPressed = false;
        Input.receiver = new Receiver_1.default();
        Input.keyJustPressed = new Map_1.default();
        Input.keyPressed = new Map_1.default();
        Input.mousePosition = new Vec2_1.default(0, 0);
        Input.mousePressPosition = new Vec2_1.default(0, 0);
        Input.scrollDirection = 0;
        Input.justScrolled = false;
        Input.keysDisabled = false;
        Input.mouseDisabled = false;
        // Initialize the keymap
        Input.keyMap = new Map_1.default();
        // Add all keys to the keymap
        for (let entry in keyMap) {
            let name = keyMap[entry].name;
            let keys = keyMap[entry].keys;
            Input.keyMap.add(name, keys);
        }
        Input.eventQueue = EventQueue_1.default.getInstance();
        // Subscribe to all input events
        Input.eventQueue.subscribe(Input.receiver, [GameEventType_1.GameEventType.MOUSE_DOWN, GameEventType_1.GameEventType.MOUSE_UP, GameEventType_1.GameEventType.MOUSE_MOVE,
            GameEventType_1.GameEventType.KEY_DOWN, GameEventType_1.GameEventType.KEY_UP, GameEventType_1.GameEventType.CANVAS_BLUR, GameEventType_1.GameEventType.WHEEL_UP, GameEventType_1.GameEventType.WHEEL_DOWN]);
    }
    static update(deltaT) {
        // Reset the justPressed values to false
        Input.mouseJustPressed = false;
        Input.keyJustPressed.forEach((key) => Input.keyJustPressed.set(key, false));
        Input.justScrolled = false;
        Input.scrollDirection = 0;
        while (Input.receiver.hasNextEvent()) {
            let event = Input.receiver.getNextEvent();
            // Handle each event type
            if (event.type === GameEventType_1.GameEventType.MOUSE_DOWN) {
                Input.mouseJustPressed = true;
                Input.mousePressed = true;
                Input.mousePressPosition = event.data.get("position");
                Input.mouseButtonPressed = event.data.get("button");
            }
            if (event.type === GameEventType_1.GameEventType.MOUSE_UP) {
                Input.mousePressed = false;
            }
            if (event.type === GameEventType_1.GameEventType.MOUSE_MOVE) {
                Input.mousePosition = event.data.get("position");
            }
            if (event.type === GameEventType_1.GameEventType.KEY_DOWN) {
                let key = event.data.get("key");
                // Handle space bar
                if (key === " ") {
                    key = "space";
                }
                if (!Input.keyPressed.get(key)) {
                    Input.keyJustPressed.set(key, true);
                    Input.keyPressed.set(key, true);
                }
            }
            if (event.type === GameEventType_1.GameEventType.KEY_UP) {
                let key = event.data.get("key");
                // Handle space bar
                if (key === " ") {
                    key = "space";
                }
                Input.keyPressed.set(key, false);
            }
            if (event.type === GameEventType_1.GameEventType.CANVAS_BLUR) {
                Input.clearKeyPresses();
            }
            if (event.type === GameEventType_1.GameEventType.WHEEL_UP) {
                Input.scrollDirection = -1;
                Input.justScrolled = true;
            }
            else if (event.type === GameEventType_1.GameEventType.WHEEL_DOWN) {
                Input.scrollDirection = 1;
                Input.justScrolled = true;
            }
        }
    }
    static clearKeyPresses() {
        Input.keyJustPressed.forEach((key) => Input.keyJustPressed.set(key, false));
        Input.keyPressed.forEach((key) => Input.keyPressed.set(key, false));
    }
    /**
     * Returns whether or not a key was newly pressed Input frame.
     * If the key is still pressed from last frame and wasn't re-pressed, Input will return false.
     * @param key The key
     * @returns True if the key was just pressed, false otherwise
     */
    static isKeyJustPressed(key) {
        if (Input.keysDisabled)
            return false;
        if (Input.keyJustPressed.has(key)) {
            return Input.keyJustPressed.get(key);
        }
        else {
            return false;
        }
    }
    /**
     * Returns an array of all of the keys that are newly pressed Input frame.
     * If a key is still pressed from last frame and wasn't re-pressed, it will not be in Input list.
     * @returns An array of all of the newly pressed keys.
     */
    static getKeysJustPressed() {
        if (Input.keysDisabled)
            return [];
        let keys = Array();
        Input.keyJustPressed.forEach(key => {
            if (Input.keyJustPressed.get(key)) {
                keys.push(key);
            }
        });
        return keys;
    }
    /**
     * Returns whether or not a key is being pressed.
     * @param key The key
     * @returns True if the key is currently pressed, false otherwise
     */
    static isKeyPressed(key) {
        if (Input.keysDisabled)
            return false;
        if (Input.keyPressed.has(key)) {
            return Input.keyPressed.get(key);
        }
        else {
            return false;
        }
    }
    /**
     * Changes the binding of an input name to keys
     * @param inputName The name of the input
     * @param keys The corresponding keys
     */
    static changeKeyBinding(inputName, keys) {
        Input.keyMap.set(inputName, keys);
    }
    /**
     * Clears all key bindings
     */
    static clearAllKeyBindings() {
        Input.keyMap.clear();
    }
    /**
     * Returns whether or not an input was just pressed this frame
     * @param inputName The name of the input
     * @returns True if the input was just pressed, false otherwise
     */
    static isJustPressed(inputName) {
        if (Input.keysDisabled)
            return false;
        if (Input.keyMap.has(inputName)) {
            const keys = Input.keyMap.get(inputName);
            let justPressed = false;
            for (let key of keys) {
                justPressed = justPressed || Input.isKeyJustPressed(key);
            }
            return justPressed;
        }
        else {
            return false;
        }
    }
    /**
     * Returns whether or not an input is currently pressed
     * @param inputName The name of the input
     * @returns True if the input is pressed, false otherwise
     */
    static isPressed(inputName) {
        if (Input.keysDisabled)
            return false;
        if (Input.keyMap.has(inputName)) {
            const keys = Input.keyMap.get(inputName);
            let pressed = false;
            for (let key of keys) {
                pressed = pressed || Input.isKeyPressed(key);
            }
            return pressed;
        }
        else {
            return false;
        }
    }
    /**
     *
     * Returns whether or not the mouse was newly pressed Input frame.
     * @param mouseButton Optionally specify which mouse click you want to know was pressed.
     * 0 for left click, 1 for middle click, 2 for right click.
     * @returns True if the mouse was just pressed, false otherwise
     */
    static isMouseJustPressed(mouseButton) {
        if (mouseButton !== undefined) {
            return Input.mouseJustPressed && !Input.mouseDisabled && mouseButton == this.mouseButtonPressed;
        }
        return Input.mouseJustPressed && !Input.mouseDisabled;
    }
    /**
     * Returns whether or not the mouse is currently pressed
     * @param mouseButton Optionally specify which mouse click you want to know was pressed.
     * 0 for left click, 1 for middle click, 2 for right click.
     * @returns True if the mouse is currently pressed, false otherwise
     */
    static isMousePressed(mouseButton) {
        if (mouseButton !== undefined) {
            return Input.mousePressed && !Input.mouseDisabled && mouseButton == this.mouseButtonPressed;
        }
        return Input.mousePressed && !Input.mouseDisabled;
    }
    /**
     * Returns whether the user scrolled or not
     * @returns True if the user just scrolled Input frame, false otherwise
     */
    static didJustScroll() {
        return Input.justScrolled && !Input.mouseDisabled;
    }
    /**
     * Gets the direction of the scroll
     * @returns -1 if the user scrolled up, 1 if they scrolled down
     */
    static getScrollDirection() {
        return Input.scrollDirection;
    }
    /**
     * Gets the position of the player's mouse
     * @returns The mouse position stored as a Vec2
     */
    static getMousePosition() {
        return Input.mousePosition.scaled(1 / this.viewport.getZoomLevel());
    }
    /**
     * Gets the position of the player's mouse in the game world,
     * taking into consideration the scrolling of the viewport
     * @returns The mouse position stored as a Vec2
     */
    static getGlobalMousePosition() {
        return Input.mousePosition.clone().scale(1 / this.viewport.getZoomLevel()).add(Input.viewport.getOrigin());
    }
    /**
     * Gets the position of the last mouse press
     * @returns The mouse position stored as a Vec2
     */
    static getMousePressPosition() {
        return Input.getMousePosition();
    }
    /**
     * Gets the position of the last mouse press in the game world,
     * taking into consideration the scrolling of the viewport
     * @returns The mouse position stored as a Vec2
     */
    static getGlobalMousePressPosition() {
        return Input.mousePressPosition.clone().add(Input.viewport.getOrigin());
    }
    /**
     * Disables all keypress and mouse click inputs
     */
    static disableInput() {
        Input.keysDisabled = true;
        Input.mouseDisabled = true;
    }
    /**
     * Enables all keypress and mouse click inputs
     */
    static enableInput() {
        Input.keysDisabled = false;
        Input.mouseDisabled = false;
    }
}
exports.default = Input;

},{"../DataTypes/Collections/Map":8,"../DataTypes/Vec2":26,"../Events/EventQueue":30,"../Events/GameEventType":32,"../Events/Receiver":33}],35:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.InputHandlers = void 0;
const EventQueue_1 = __importDefault(require("../Events/EventQueue"));
const Vec2_1 = __importDefault(require("../DataTypes/Vec2"));
const GameEvent_1 = __importDefault(require("../Events/GameEvent"));
const GameEventType_1 = require("../Events/GameEventType");
const Receiver_1 = __importDefault(require("../Events/Receiver"));
var InputHandlers;
(function (InputHandlers) {
    InputHandlers[InputHandlers["MOUSE_DOWN"] = 0] = "MOUSE_DOWN";
    InputHandlers[InputHandlers["MOUSE_UP"] = 1] = "MOUSE_UP";
    InputHandlers[InputHandlers["CONTEXT_MENU"] = 2] = "CONTEXT_MENU";
    InputHandlers[InputHandlers["MOUSE_MOVE"] = 3] = "MOUSE_MOVE";
    InputHandlers[InputHandlers["KEY_DOWN"] = 4] = "KEY_DOWN";
    InputHandlers[InputHandlers["KEY_UP"] = 5] = "KEY_UP";
    InputHandlers[InputHandlers["ON_BLUR"] = 6] = "ON_BLUR";
    InputHandlers[InputHandlers["ON_WHEEL"] = 7] = "ON_WHEEL";
})(InputHandlers = exports.InputHandlers || (exports.InputHandlers = {}));
/**
 * Handles communication with the web browser to receive asynchronous events and send them to the @reference[EventQueue]
 */
class InputHandler {
    /**
     * Creates a new InputHandler
     * @param canvas The game canvas
     */
    constructor(canvas) {
        this.handleMouseDown = (event, canvas) => {
            if (!this.enabled[InputHandlers.MOUSE_DOWN])
                return;
            let pos = this.getMousePosition(event, canvas);
            let button = event.button;
            let gameEvent = new GameEvent_1.default(GameEventType_1.GameEventType.MOUSE_DOWN, { position: pos, button: button });
            this.eventQueue.addEvent(gameEvent);
        };
        this.handleMouseUp = (event, canvas) => {
            if (!this.enabled[InputHandlers.MOUSE_DOWN])
                return;
            let pos = this.getMousePosition(event, canvas);
            let gameEvent = new GameEvent_1.default(GameEventType_1.GameEventType.MOUSE_UP, { position: pos });
            this.eventQueue.addEvent(gameEvent);
        };
        this.handleMouseMove = (event, canvas) => {
            if (!this.enabled[InputHandlers.MOUSE_MOVE])
                return;
            let pos = this.getMousePosition(event, canvas);
            let gameEvent = new GameEvent_1.default(GameEventType_1.GameEventType.MOUSE_MOVE, { position: pos });
            this.eventQueue.addEvent(gameEvent);
        };
        this.handleKeyDown = (event) => {
            if (!this.enabled[InputHandlers.KEY_DOWN])
                return;
            let key = this.getKey(event);
            let gameEvent = new GameEvent_1.default(GameEventType_1.GameEventType.KEY_DOWN, { key: key });
            this.eventQueue.addEvent(gameEvent);
        };
        this.handleKeyUp = (event) => {
            if (!this.enabled[InputHandlers.KEY_UP])
                return;
            let key = this.getKey(event);
            let gameEvent = new GameEvent_1.default(GameEventType_1.GameEventType.KEY_UP, { key: key });
            this.eventQueue.addEvent(gameEvent);
        };
        this.handleBlur = (event) => {
            if (!this.enabled[InputHandlers.ON_BLUR])
                return;
            let gameEvent = new GameEvent_1.default(GameEventType_1.GameEventType.CANVAS_BLUR, {});
            this.eventQueue.addEvent(gameEvent);
        };
        this.handleContextMenu = (event) => {
            event.preventDefault();
            event.stopPropagation();
        };
        this.handleWheel = (event) => {
            event.preventDefault();
            event.stopPropagation();
            if (!this.enabled[InputHandlers.ON_WHEEL])
                return;
            let gameEvent;
            if (event.deltaY < 0) {
                gameEvent = new GameEvent_1.default(GameEventType_1.GameEventType.WHEEL_UP, {});
            }
            else {
                gameEvent = new GameEvent_1.default(GameEventType_1.GameEventType.WHEEL_DOWN, {});
            }
            this.eventQueue.addEvent(gameEvent);
        };
        this.eventQueue = EventQueue_1.default.getInstance();
        this.enabled = new Array(...[true, true, true, true, true, true, true, true]);
        canvas.onmousedown = (event) => this.handleMouseDown(event, canvas);
        canvas.onmouseup = (event) => this.handleMouseUp(event, canvas);
        canvas.oncontextmenu = this.handleContextMenu;
        canvas.onmousemove = (event) => this.handleMouseMove(event, canvas);
        document.onkeydown = this.handleKeyDown;
        document.onkeyup = this.handleKeyUp;
        document.onblur = this.handleBlur;
        document.oncontextmenu = this.handleBlur;
        document.onwheel = this.handleWheel;
        this.receiver = new Receiver_1.default();
        this.receiver.subscribe(GameEventType_1.GameEventType.DISABLE_USER_INPUT);
        this.receiver.subscribe(GameEventType_1.GameEventType.ENABLE_USER_INPUT);
    }
    update(deltaT) {
        while (this.receiver.hasNextEvent()) {
            this.handleEvent(this.receiver.getNextEvent());
        }
    }
    handleEvent(event) {
        switch (event.type) {
            case GameEventType_1.GameEventType.DISABLE_USER_INPUT: {
                this.disableHandlers(event.data.get("inputs"));
                break;
            }
            case GameEventType_1.GameEventType.ENABLE_USER_INPUT: {
                this.enableHandlers(event.data.get("inputs"));
                break;
            }
            default: {
                throw new Error(`Unhandled event with type: ${event.type} caught in InputHandler.ts`);
            }
        }
    }
    enableHandlers(handlers) {
        handlers.forEach(handler => this.enabled[handler] = true);
    }
    disableHandlers(handlers) {
        handlers.forEach(handler => this.enabled[handler] = false);
    }
    getKey(keyEvent) {
        return keyEvent.key.toLowerCase();
    }
    getMousePosition(mouseEvent, canvas) {
        let rect = canvas.getBoundingClientRect();
        let x = mouseEvent.clientX - rect.left;
        let y = mouseEvent.clientY - rect.top;
        return new Vec2_1.default(x, y);
    }
}
exports.default = InputHandler;

},{"../DataTypes/Vec2":26,"../Events/EventQueue":30,"../Events/GameEvent":31,"../Events/GameEventType":32,"../Events/Receiver":33}],36:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// @ignorePage
/**
 * Sets up the environment of the game engine
 */
class EnvironmentInitializer {
    static setup() {
        CanvasRenderingContext2D.prototype.roundedRect = function (x, y, w, h, r) {
            // Clamp the radius between 0 and the min of the width or height
            if (r < 0)
                r = 0;
            if (r > Math.min(w, h))
                r = Math.min(w, h);
            // Draw the rounded rect
            this.beginPath();
            // Top
            this.moveTo(x + r, y);
            this.lineTo(x + w - r, y);
            this.arcTo(x + w, y, x + w, y + r, r);
            // Right
            this.lineTo(x + w, y + h - r);
            this.arcTo(x + w, y + h, x + w - r, y + h, r);
            // Bottom
            this.lineTo(x + r, y + h);
            this.arcTo(x, y + h, x, y + h - r, r);
            // Left
            this.lineTo(x, y + r);
            this.arcTo(x, y, x + r, y, r);
            this.closePath();
        };
        CanvasRenderingContext2D.prototype.strokeRoundedRect = function (x, y, w, h, r) {
            this.roundedRect(x, y, w, h, r);
            this.stroke();
        };
        CanvasRenderingContext2D.prototype.fillRoundedRect = function (x, y, w, h, r) {
            this.roundedRect(x, y, w, h, r);
            this.fill();
        };
    }
}
exports.default = EnvironmentInitializer;

},{}],37:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const GameLoop_1 = __importDefault(require("./GameLoop"));
const Debug_1 = __importDefault(require("../Debug/Debug"));
const Stats_1 = __importDefault(require("../Debug/Stats"));
/**
 * A game loop with a fixed update time and a variable render time.
 * Every frame, the game updates until all time since the last frame has been processed.
 * If too much time has passed, such as if the last update was too slow,
 * or if the browser was put into the background, the loop will panic and discard time.
 * A render happens at the end of every frame. This happens as fast as possible unless specified.
 * A loop of this type allows for deterministic behavior - No matter what the frame rate is, the update should behave the same,
 * as it is occuring in a fixed interval.
 */
class FixedUpdateGameLoop extends GameLoop_1.default {
    constructor() {
        super();
        /**
         * The main loop of the game. Updates until the current time is reached. Renders once
         * @param timestamp The current time in ms
         */
        this.doFrame = (timestamp) => {
            // If a pause was executed, stop doing the loop.
            if (this.paused) {
                return;
            }
            // Request animation frame to prepare for another update or render
            window.requestAnimationFrame((t) => this.doFrame(t));
            // If we are trying to render too soon, do nothing.
            if (timestamp < this.lastFrameTime + this.minFrameDelay) {
                return;
            }
            // A frame is actually happening
            this.startFrame(timestamp);
            // Update while there is still time to make up. If we do too many update steps, panic and exit the loop.
            this.numUpdateSteps = 0;
            let panic = false;
            while (this.frameDelta >= this.updateTimestep) {
                // Do an update
                this._doUpdate(this.updateTimestep / 1000);
                // Remove the update step time from the time we have to process
                this.frameDelta -= this.updateTimestep;
                // Increment steps and check if we've done too many
                this.numUpdateSteps++;
                if (this.numUpdateSteps > 100) {
                    panic = true;
                    break;
                }
            }
            // Updates are done, render
            this._doRender();
            // Wrap up the frame
            this.finishFrame(panic);
        };
        this.maxUpdateFPS = 60;
        this.updateTimestep = Math.floor(1000 / this.maxUpdateFPS);
        this.frameDelta = 0;
        this.lastFrameTime = 0;
        this.minFrameDelay = 0;
        this.frame = 0;
        this.fps = this.maxUpdateFPS; // Initialize the fps to the max allowed fps
        this.fpsUpdateInterval = 1000;
        this.lastFpsUpdate = 0;
        this.framesSinceLastFpsUpdate = 0;
        this.started = false;
        this.paused = false;
        this.running = false;
        this.numUpdateSteps = 0;
    }
    getFPS() {
        return 0;
    }
    /**
     * Updates the frame count and sum of time for the framerate of the game
     * @param timestep The current time in ms
     */
    updateFPS(timestamp) {
        this.fps = 0.9 * this.framesSinceLastFpsUpdate * 1000 / (timestamp - this.lastFpsUpdate) + (1 - 0.9) * this.fps;
        this.lastFpsUpdate = timestamp;
        this.framesSinceLastFpsUpdate = 0;
        Debug_1.default.log("fps", "FPS: " + this.fps.toFixed(1));
        Stats_1.default.updateFPS(this.fps);
    }
    /**
 * Changes the maximum allowed physics framerate of the game
 * @param initMax The max framerate
 */
    setMaxUpdateFPS(initMax) {
        this.maxUpdateFPS = initMax;
        this.updateTimestep = Math.floor(1000 / this.maxUpdateFPS);
    }
    /**
     * Sets the maximum rendering framerate
     * @param maxFPS The max framerate
     */
    setMaxFPS(maxFPS) {
        this.minFrameDelay = 1000 / maxFPS;
    }
    /**
     * This function is called when the game loop panics, i.e. it tries to process too much time in an entire frame.
     * This will reset the amount of time back to zero.
     * @returns The amount of time we are discarding from processing.
     */
    resetFrameDelta() {
        let oldFrameDelta = this.frameDelta;
        this.frameDelta = 0;
        return oldFrameDelta;
    }
    /**
     * Starts up the game loop and calls the first requestAnimationFrame
     */
    start() {
        if (!this.started) {
            this.started = true;
            window.requestAnimationFrame((timestamp) => this.doFirstFrame(timestamp));
        }
    }
    pause() {
        this.paused = true;
    }
    resume() {
        this.paused = false;
    }
    /**
     * The first game frame - initializes the first frame time and begins the render
     * @param timestamp The current time in ms
     */
    doFirstFrame(timestamp) {
        this.running = true;
        this._doRender();
        this.lastFrameTime = timestamp;
        this.lastFpsUpdate = timestamp;
        this.framesSinceLastFpsUpdate = 0;
        window.requestAnimationFrame((t) => this.doFrame(t));
    }
    /**
     * Handles any processing that needs to be done at the start of the frame
     * @param timestamp The time of the frame in ms
     */
    startFrame(timestamp) {
        // Update the amount of time we need our update to process
        this.frameDelta += timestamp - this.lastFrameTime;
        // Set the new time of the last frame
        this.lastFrameTime = timestamp;
        // Update the estimate of the framerate
        if (timestamp > this.lastFpsUpdate + this.fpsUpdateInterval) {
            this.updateFPS(timestamp);
        }
        // Increment the number of frames
        this.frame++;
        this.framesSinceLastFpsUpdate++;
    }
    /**
     * Wraps up the frame and handles the panic state if there is one
     * @param panic Whether or not the loop panicked
     */
    finishFrame(panic) {
        if (panic) {
            var discardedTime = Math.round(this.resetFrameDelta());
            console.warn('Main loop panicked, probably because the browser tab was put in the background. Discarding ' + discardedTime + 'ms');
        }
    }
}
exports.default = FixedUpdateGameLoop;

},{"../Debug/Debug":27,"../Debug/Stats":28,"./GameLoop":39}],38:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const EventQueue_1 = __importDefault(require("../Events/EventQueue"));
const Input_1 = __importDefault(require("../Input/Input"));
const InputHandler_1 = __importDefault(require("../Input/InputHandler"));
const Debug_1 = __importDefault(require("../Debug/Debug"));
const ResourceManager_1 = __importDefault(require("../ResourceManager/ResourceManager"));
const Viewport_1 = __importDefault(require("../SceneGraph/Viewport"));
const SceneManager_1 = __importDefault(require("../Scene/SceneManager"));
const AudioManager_1 = __importDefault(require("../Sound/AudioManager"));
const Stats_1 = __importDefault(require("../Debug/Stats"));
const CanvasRenderer_1 = __importDefault(require("../Rendering/CanvasRenderer"));
const Color_1 = __importDefault(require("../Utils/Color"));
const GameOptions_1 = __importDefault(require("./GameOptions"));
const FixedUpdateGameLoop_1 = __importDefault(require("./FixedUpdateGameLoop"));
const EnvironmentInitializer_1 = __importDefault(require("./EnvironmentInitializer"));
const Vec2_1 = __importDefault(require("../DataTypes/Vec2"));
const RegistryManager_1 = __importDefault(require("../Registry/RegistryManager"));
const WebGLRenderer_1 = __importDefault(require("../Rendering/WebGLRenderer"));
const PlaybackManager_1 = __importDefault(require("../Playback/PlaybackManager"));
/**
 * The main loop of the game engine.
 * Handles the update order, and initializes all subsystems.
 * The Game manages the update cycle, and requests animation frames to render to the browser.
 */
class Game {
    /**
     * Creates a new Game
     * @param options The options for Game initialization
     */
    constructor(options) {
        // Before anything else, build the environment
        EnvironmentInitializer_1.default.setup();
        // Typecast the config object to a GameConfig object
        this.gameOptions = GameOptions_1.default.parse(options);
        this.showDebug = this.gameOptions.showDebug;
        this.showStats = this.gameOptions.showStats;
        // Create an instance of a game loop
        this.loop = new FixedUpdateGameLoop_1.default();
        // Get the game canvas and give it a background color
        this.GAME_CANVAS = document.getElementById("game-canvas");
        this.DEBUG_CANVAS = document.getElementById("debug-canvas");
        // Give the canvas a size and get the rendering context
        this.WIDTH = this.gameOptions.canvasSize.x;
        this.HEIGHT = this.gameOptions.canvasSize.y;
        // This step MUST happen before the resource manager does anything
        if (this.gameOptions.useWebGL) {
            this.renderingManager = new WebGLRenderer_1.default();
        }
        else {
            this.renderingManager = new CanvasRenderer_1.default();
        }
        this.initializeGameWindow();
        this.ctx = this.renderingManager.initializeCanvas(this.GAME_CANVAS, this.WIDTH, this.HEIGHT);
        this.clearColor = new Color_1.default(this.gameOptions.clearColor.r, this.gameOptions.clearColor.g, this.gameOptions.clearColor.b);
        // Initialize debugging and stats
        Debug_1.default.initializeDebugCanvas(this.DEBUG_CANVAS, this.WIDTH, this.HEIGHT);
        Stats_1.default.initStats();
        if (this.gameOptions.showStats) {
            // Find the stats output and make it no longer hidden
            document.getElementById("stats").hidden = false;
        }
        // Size the viewport to the game canvas
        const canvasSize = new Vec2_1.default(this.WIDTH, this.HEIGHT);
        this.viewport = new Viewport_1.default(canvasSize, this.gameOptions.zoomLevel);
        // Initialize all necessary game subsystems
        this.eventQueue = EventQueue_1.default.getInstance();
        this.inputHandler = new InputHandler_1.default(this.GAME_CANVAS);
        Input_1.default.initialize(this.viewport, this.gameOptions.inputs);
        this.resourceManager = ResourceManager_1.default.getInstance();
        this.sceneManager = new SceneManager_1.default(this.viewport, this.renderingManager);
        this.audioManager = AudioManager_1.default.getInstance();
        this.playbackManager = new PlaybackManager_1.default();
    }
    /**
     * Set up the game window that holds the canvases
     */
    initializeGameWindow() {
        const gameWindow = document.getElementById("game-window");
        // Set the height of the game window
        gameWindow.style.width = this.WIDTH + "px";
        gameWindow.style.height = this.HEIGHT + "px";
    }
    /**
     * Retreives the SceneManager from the Game
     * @returns The SceneManager
     */
    getSceneManager() {
        return this.sceneManager;
    }
    /**
     * Starts the game
     */
    start(InitialScene, options) {
        // Set the update function of the loop
        this.loop.doUpdate = (deltaT) => this.update(deltaT);
        // Set the render function of the loop
        this.loop.doRender = () => this.render();
        // Preload registry items
        RegistryManager_1.default.preload();
        // Load the items with the resource manager
        this.resourceManager.loadResourcesFromQueue(() => {
            // When we're done loading, start the loop
            console.log("Finished Preload - loading first scene");
            this.sceneManager.changeToScene(InitialScene, {}, options);
            this.loop.start();
        });
    }
    /**
     * Updates all necessary subsystems of the game. Defers scene updates to the sceneManager
     * @param deltaT The time sine the last update
     */
    update(deltaT) {
        try {
            // Handle all events that happened since the start of the last loop
            this.eventQueue.update(deltaT);
            // Update the input handler - disabling/enabling user input
            this.inputHandler.update(deltaT);
            // Update the input data structures so game objects can see the input
            Input_1.default.update(deltaT);
            // Update the recording of the game
            this.playbackManager.update(deltaT);
            // Update all scenes
            this.sceneManager.update(deltaT);
            // Update all sounds
            this.audioManager.update(deltaT);
            // Load or unload any resources if needed
            this.resourceManager.update(deltaT);
        }
        catch (e) {
            this.loop.pause();
            console.warn("Uncaught Error in Update - Crashing gracefully");
            console.error(e);
        }
    }
    /**
     * Clears the canvas and defers scene rendering to the sceneManager. Renders the debug canvas
     */
    render() {
        try {
            // Clear the canvases
            Debug_1.default.clearCanvas();
            this.renderingManager.clear(this.clearColor);
            this.sceneManager.render();
            // Hacky debug mode
            if (Input_1.default.isKeyJustPressed("g")) {
                this.showDebug = !this.showDebug;
            }
            // Debug render
            if (this.showDebug) {
                Debug_1.default.render();
            }
            if (this.showStats) {
                Stats_1.default.render();
            }
        }
        catch (e) {
            this.loop.pause();
            console.warn("Uncaught Error in Render - Crashing gracefully");
            console.error(e);
        }
    }
}
exports.default = Game;

},{"../DataTypes/Vec2":26,"../Debug/Debug":27,"../Debug/Stats":28,"../Events/EventQueue":30,"../Input/Input":34,"../Input/InputHandler":35,"../Playback/PlaybackManager":68,"../Registry/RegistryManager":71,"../Rendering/CanvasRenderer":77,"../Rendering/WebGLRenderer":82,"../ResourceManager/ResourceManager":89,"../Scene/SceneManager":97,"../SceneGraph/Viewport":101,"../Sound/AudioManager":102,"../Utils/Color":105,"./EnvironmentInitializer":36,"./FixedUpdateGameLoop":37,"./GameOptions":40}],39:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const NullFunc_1 = __importDefault(require("../DataTypes/Functions/NullFunc"));
/**
 * The main game loop of the game. Keeps track of fps and handles scheduling of updates and rendering.
 * This class is left abstract, so that a subclass can handle exactly how the loop is scheduled.
 * For an example of different types of game loop scheduling, check out @link(Game Programming Patterns)(https://gameprogrammingpatterns.com/game-loop.html)
 */
class GameLoop {
    constructor() {
        /** The function to call when an update occurs */
        this._doUpdate = NullFunc_1.default;
        /** The function to call when a render occurs */
        this._doRender = NullFunc_1.default;
    }
    set doUpdate(update) {
        this._doUpdate = update;
    }
    set doRender(render) {
        this._doRender = render;
    }
}
exports.default = GameLoop;

},{"../DataTypes/Functions/NullFunc":11}],40:[function(require,module,exports){
"use strict";
// @ignorePage
Object.defineProperty(exports, "__esModule", { value: true });
/** The options for initializing the @reference[GameLoop] */
class GameOptions {
    /**
     * Parses the data in the raw options object
     * @param options The game options as a Record
     * @returns A version of the options converted to a GameOptions object
     */
    static parse(options) {
        let gOpt = new GameOptions();
        gOpt.canvasSize = options.canvasSize ? options.canvasSize : { x: 800, y: 600 };
        gOpt.zoomLevel = options.zoomLevel ? options.zoomLevel : 1;
        gOpt.clearColor = options.clearColor ? options.clearColor : { r: 255, g: 255, b: 255 };
        gOpt.inputs = options.inputs ? options.inputs : [];
        gOpt.showDebug = !!options.showDebug;
        gOpt.showStats = !!options.showStats;
        gOpt.useWebGL = !!options.useWebGL;
        return gOpt;
    }
}
exports.default = GameOptions;

},{}],41:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const GameNode_1 = __importDefault(require("./GameNode"));
const Vec2_1 = __importDefault(require("../DataTypes/Vec2"));
const AABB_1 = __importDefault(require("../DataTypes/Shapes/AABB"));
const Debug_1 = __importDefault(require("../Debug/Debug"));
const Color_1 = __importDefault(require("../Utils/Color"));
/**
 * The representation of an object in the game world that can be drawn to the screen
 */
class CanvasNode extends GameNode_1.default {
    constructor() {
        super();
        /** A flag for whether or not the CanvasNode is visible */
        this.visible = true;
        this._size = new Vec2_1.default(0, 0);
        this._size.setOnChange(() => this.sizeChanged());
        this._scale = new Vec2_1.default(1, 1);
        this._scale.setOnChange(() => this.scaleChanged());
        this._boundary = new AABB_1.default();
        this.updateBoundary();
        this._hasCustomShader = false;
    }
    get alpha() {
        return this._alpha;
    }
    set alpha(a) {
        this._alpha = a;
    }
    get size() {
        return this._size;
    }
    set size(size) {
        this._size = size;
        // Enter as a lambda to bind "this"
        this._size.setOnChange(() => this.sizeChanged());
        this.sizeChanged();
    }
    get scale() {
        return this._scale;
    }
    set scale(scale) {
        this._scale = scale;
        // Enter as a lambda to bind "this"
        this._scale.setOnChange(() => this.scaleChanged());
        this.scaleChanged();
    }
    set scaleX(value) {
        this.scale.x = value;
    }
    set scaleY(value) {
        this.scale.y = value;
    }
    get hasCustomShader() {
        return this._hasCustomShader;
    }
    get customShaderKey() {
        return this._customShaderKey;
    }
    // @override
    positionChanged() {
        super.positionChanged();
        this.updateBoundary();
    }
    /** Called if the size vector is changed or replaced. */
    sizeChanged() {
        this.updateBoundary();
    }
    /** Called if the scale vector is changed or replaced */
    scaleChanged() {
        this.updateBoundary();
    }
    // @docIgnore
    /** Called if the position, size, or scale of the CanvasNode is changed. Updates the boundary. */
    updateBoundary() {
        this._boundary.center.set(this.position.x, this.position.y);
        this._boundary.halfSize.set(this.size.x * this.scale.x / 2, this.size.y * this.scale.y / 2);
    }
    get boundary() {
        return this._boundary;
    }
    get sizeWithZoom() {
        let zoom = this.scene.getViewScale();
        return this.boundary.halfSize.clone().scaled(zoom, zoom);
    }
    /**
     * Adds a custom shader to this CanvasNode
     * @param key The registry key of the ShaderType
     */
    useCustomShader(key) {
        this._hasCustomShader = true;
        this._customShaderKey = key;
    }
    /**
     * Returns true if the point (x, y) is inside of this canvas object
     * @param x The x position of the point
     * @param y The y position of the point
     * @returns A flag representing whether or not this node contains the point.
     */
    contains(x, y) {
        return this._boundary.containsPoint(new Vec2_1.default(x, y));
    }
    // @implemented
    debugRender() {
        Debug_1.default.drawBox(this.relativePosition, this.sizeWithZoom, false, Color_1.default.BLUE);
        super.debugRender();
    }
}
exports.default = CanvasNode;

},{"../DataTypes/Shapes/AABB":20,"../DataTypes/Vec2":26,"../Debug/Debug":27,"../Utils/Color":105,"./GameNode":42}],42:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.TweenableProperties = void 0;
const Vec2_1 = __importDefault(require("../DataTypes/Vec2"));
const Receiver_1 = __importDefault(require("../Events/Receiver"));
const Emitter_1 = __importDefault(require("../Events/Emitter"));
const Region_1 = require("../DataTypes/Interfaces/Region");
const AABB_1 = __importDefault(require("../DataTypes/Shapes/AABB"));
const TweenController_1 = __importDefault(require("../Rendering/Animations/TweenController"));
const Debug_1 = __importDefault(require("../Debug/Debug"));
const Color_1 = __importDefault(require("../Utils/Color"));
const Circle_1 = __importDefault(require("../DataTypes/Shapes/Circle"));
/**
 * The representation of an object in the game world.
 * To construct GameNodes, see the @reference[Scene] documentation.
 */
class GameNode {
    // Constructor docs are ignored, as the user should NOT create new GameNodes with a raw constructor
    constructor() {
        /*---------- PHYSICAL ----------*/
        this.hasPhysics = false;
        this.moving = false;
        this.frozen = false;
        this.onGround = false;
        this.onWall = false;
        this.onCeiling = false;
        this.active = false;
        this.isColliding = false;
        this.pathfinding = false;
        this._position = new Vec2_1.default(0, 0);
        this._position.setOnChange(() => this.positionChanged());
        this.receiver = new Receiver_1.default();
        this.emitter = new Emitter_1.default();
        this.tweens = new TweenController_1.default(this);
        this.rotation = 0;
    }
    destroy() {
        this.tweens.destroy();
        this.receiver.destroy();
        if (this.hasPhysics) {
            this.removePhysics();
        }
        if (this._ai) {
            this._ai.destroy();
            delete this._ai;
            this.scene.getAIManager().removeActor(this);
        }
        this.scene.remove(this);
        this.layer.removeNode(this);
    }
    /*---------- POSITIONED ----------*/
    get position() {
        return this._position;
    }
    set position(pos) {
        this._position = pos;
        this._position.setOnChange(() => this.positionChanged());
        this.positionChanged();
    }
    get relativePosition() {
        return this.inRelativeCoordinates(this.position);
    }
    /**
     * Converts a point to coordinates relative to the zoom and origin of this node
     * @param point The point to conver
     * @returns A new Vec2 representing the point in relative coordinates
     */
    inRelativeCoordinates(point) {
        let origin = this.scene.getViewTranslation(this);
        let zoom = this.scene.getViewScale();
        return point.clone().sub(origin).scale(zoom);
    }
    /*---------- UNIQUE ----------*/
    get id() {
        return this._id;
    }
    set id(id) {
        // id can only be set once
        if (this._id === undefined) {
            this._id = id;
        }
        else {
            throw "Attempted to assign id to object that already has id.";
        }
    }
    /*---------- PHYSICAL ----------*/
    // @implemented
    /**
     * @param velocity The velocity with which to move the object.
     */
    move(velocity) {
        if (this.frozen)
            return;
        this.moving = true;
        this._velocity = velocity;
    }
    ;
    moveOnPath(speed, path) {
        if (this.frozen || path.isDone())
            return;
        this.path = path;
        let dir = path.getMoveDirection(this);
        this.moving = true;
        this.pathfinding = true;
        this._velocity = dir.scale(speed);
    }
    // @implemented
    /**
     * @param velocity The velocity with which the object will move.
     */
    finishMove() {
        this.moving = false;
        this.position.add(this._velocity);
        if (this.pathfinding) {
            this.path.handlePathProgress(this);
            this.path = null;
            this.pathfinding = false;
        }
    }
    // @implemented
    /**
     * @param collisionShape The collider for this object. If this has a region (implements Region),
     * it will be used when no collision shape is specified (or if collision shape is null).
     * @param isCollidable Whether this is collidable or not. True by default.
     * @param isStatic Whether this is static or not. False by default
     */
    addPhysics(collisionShape, colliderOffset, isCollidable = true, isStatic = false) {
        // Initialize the physics variables
        this.hasPhysics = true;
        this.moving = false;
        this.onGround = false;
        this.onWall = false;
        this.onCeiling = false;
        this.active = true;
        this.isCollidable = isCollidable;
        this.isStatic = isStatic;
        this.isTrigger = false;
        this.triggerMask = 0;
        this.triggerEnters = new Array(32);
        this.triggerExits = new Array(32);
        this._velocity = Vec2_1.default.ZERO;
        this.sweptRect = new AABB_1.default();
        this.collidedWithTilemap = false;
        this.group = -1; // The default group, collides with everything
        // Set the collision shape if provided, or simply use the the region if there is one.
        if (collisionShape) {
            this.collisionShape = collisionShape;
            this.collisionShape.center = this.position;
        }
        else if ((0, Region_1.isRegion)(this)) {
            // If the gamenode has a region and no other is specified, use that
            this.collisionShape = this.boundary.clone();
        }
        else {
            throw "No collision shape specified for physics object.";
        }
        // If we were provided with a collider offset, set it. Otherwise there is no offset, so use the zero vector
        if (colliderOffset) {
            this.colliderOffset = colliderOffset;
        }
        else {
            this.colliderOffset = Vec2_1.default.ZERO;
        }
        // Initialize the swept rect
        this.sweptRect = this.collisionShape.getBoundingRect();
        // Register the object with physics
        this.scene.getPhysicsManager().registerObject(this);
    }
    /** Removes this object from the physics system */
    removePhysics() {
        // Remove this from the physics manager
        this.scene.getPhysicsManager().deregisterObject(this);
        // Nullify all physics fields
        this.hasPhysics = false;
        this.moving = false;
        this.onGround = false;
        this.onWall = false;
        this.onCeiling = false;
        this.active = false;
        this.isCollidable = false;
        this.isStatic = false;
        this.isTrigger = false;
        this.triggerMask = 0;
        this.triggerEnters = null;
        this.triggerExits = null;
        this._velocity = Vec2_1.default.ZERO;
        this.sweptRect = null;
        this.collidedWithTilemap = false;
        this.group = -1;
        this.collisionShape = null;
        this.colliderOffset = Vec2_1.default.ZERO;
        this.sweptRect = null;
    }
    /** Disables physics movement for this node */
    freeze() {
        this.frozen = true;
    }
    /** Reenables physics movement for this node */
    unfreeze() {
        this.frozen = false;
    }
    /** Prevents this object from participating in all collisions and triggers. It can still move. */
    disablePhysics() {
        this.active = false;
    }
    /** Enables this object to participate in collisions and triggers. This is only necessary if disablePhysics was called */
    enablePhysics() {
        this.active = true;
    }
    /**
     * Sets the collider for this GameNode
     * @param collider The new collider to use
     */
    setCollisionShape(collider) {
        this.collisionShape = collider;
        this.collisionShape.center.copy(this.position);
    }
    // @implemented
    /**
     * Sets this object to be a trigger for a specific group
     * @param group The name of the group that activates the trigger
     * @param onEnter The name of the event to send when this trigger is activated
     * @param onExit The name of the event to send when this trigger stops being activated
     */
    setTrigger(group, onEnter, onExit) {
        // Make this object a trigger
        this.isTrigger = true;
        // Get the number of the physics layer
        let layerNumber = this.scene.getPhysicsManager().getGroupNumber(group);
        if (layerNumber === 0) {
            console.warn(`Trigger for GameNode ${this.id} not set - group "${group}" was not recognized by the physics manager.`);
            return;
        }
        // Add this to the trigger mask
        this.triggerMask |= layerNumber;
        // Layer numbers are bits, so get which bit it is
        let index = Math.log2(layerNumber);
        // Set the event names
        this.triggerEnters[index] = onEnter;
        this.triggerExits[index] = onExit;
    }
    ;
    // @implemented
    /**
     * @param group The physics group this node should belong to
     */
    setGroup(group) {
        this.scene.getPhysicsManager().setGroup(this, group);
    }
    // @implemened
    getLastVelocity() {
        return this._velocity;
    }
    /*---------- ACTOR ----------*/
    get ai() {
        return this._ai;
    }
    set ai(ai) {
        if (!this._ai) {
            // If we haven't been previously had an ai, register us with the ai manager
            this.scene.getAIManager().registerActor(this);
        }
        this._ai = ai;
        this.aiActive = true;
    }
    // @implemented
    addAI(ai, options, type) {
        if (!this._ai) {
            this.scene.getAIManager().registerActor(this);
        }
        if (typeof ai === "string") {
            this._ai = this.scene.getAIManager().generateAI(ai);
        }
        else {
            this._ai = new ai();
        }
        // Question, how much do we want different type of AI to be handled the same, i.e. should GoapAI and AI similar methods and signatures for the sake of unity
        this._ai.initializeAI(this, options);
        this.aiActive = true;
    }
    // @implemented
    setAIActive(active, options) {
        this.aiActive = active;
        if (this.aiActive) {
            this.ai.activate(options);
        }
    }
    /*---------- TWEENABLE PROPERTIES ----------*/
    set positionX(value) {
        this.position.x = value;
    }
    set positionY(value) {
        this.position.y = value;
    }
    /*---------- GAME NODE ----------*/
    /**
     * Sets the scene for this object.
     * @param scene The scene this object belongs to.
     */
    setScene(scene) {
        this.scene = scene;
    }
    /**
     * Gets the scene this object is in.
     * @returns The scene this object belongs to
    */
    getScene() {
        return this.scene;
    }
    /**
     * Sets the layer of this object.
     * @param layer The layer this object will be on.
     */
    setLayer(layer) {
        this.layer = layer;
    }
    /**
     * Returns the layer this object is on.
     * @returns This layer this object is on.
    */
    getLayer() {
        return this.layer;
    }
    /** Called if the position vector is modified or replaced */
    positionChanged() {
        if (this.collisionShape) {
            if (this.colliderOffset) {
                this.collisionShape.center = this.position.clone().add(this.colliderOffset);
            }
            else {
                this.collisionShape.center = this.position.clone();
            }
        }
    }
    ;
    /**
     * Updates this GameNode
     * @param deltaT The timestep of the update.
     */
    update(deltaT) {
        // Defer event handling to AI.
        while (this.receiver.hasNextEvent()) {
            this._ai.handleEvent(this.receiver.getNextEvent());
        }
    }
    // @implemented
    debugRender() {
        // Draw the position of this GameNode
        Debug_1.default.drawPoint(this.relativePosition, Color_1.default.BLUE);
        // If velocity is not zero, draw a vector for it
        if (this._velocity && !this._velocity.isZero()) {
            Debug_1.default.drawRay(this.relativePosition, this._velocity.clone().scaleTo(20).add(this.relativePosition), Color_1.default.BLUE);
        }
        // If this has a collider, draw it
        if (this.collisionShape) {
            let color = this.isColliding ? Color_1.default.RED : Color_1.default.GREEN;
            if (this.isTrigger) {
                color = Color_1.default.MAGENTA;
            }
            color.a = 0.2;
            if (this.collisionShape instanceof AABB_1.default) {
                Debug_1.default.drawBox(this.inRelativeCoordinates(this.collisionShape.center), this.collisionShape.halfSize.scaled(this.scene.getViewScale()), true, color);
            }
            else if (this.collisionShape instanceof Circle_1.default) {
                Debug_1.default.drawCircle(this.inRelativeCoordinates(this.collisionShape.center), this.collisionShape.hw * this.scene.getViewScale(), true, color);
            }
        }
    }
}
exports.default = GameNode;
var TweenableProperties;
(function (TweenableProperties) {
    TweenableProperties["posX"] = "positionX";
    TweenableProperties["posY"] = "positionY";
    TweenableProperties["scaleX"] = "scaleX";
    TweenableProperties["scaleY"] = "scaleY";
    TweenableProperties["rotation"] = "rotation";
    TweenableProperties["alpha"] = "alpha";
})(TweenableProperties = exports.TweenableProperties || (exports.TweenableProperties = {}));

},{"../DataTypes/Interfaces/Region":15,"../DataTypes/Shapes/AABB":20,"../DataTypes/Shapes/Circle":21,"../DataTypes/Vec2":26,"../Debug/Debug":27,"../Events/Emitter":29,"../Events/Receiver":33,"../Rendering/Animations/TweenController":75,"../Utils/Color":105}],43:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const CanvasNode_1 = __importDefault(require("./CanvasNode"));
const Color_1 = __importDefault(require("../Utils/Color"));
/**
 * The representation of a game object that doesn't rely on any resources to render - it is drawn to the screen by the canvas
 */
class Graphic extends CanvasNode_1.default {
    constructor() {
        super();
        this.color = Color_1.default.RED;
    }
    get alpha() {
        return this.color.a;
    }
    set alpha(a) {
        this.color.a = a;
    }
    // @deprecated
    /**
     * Sets the color of the Graphic. DEPRECATED
     * @param color The new color of the Graphic.
     */
    setColor(color) {
        this.color = color;
    }
    set colorR(r) {
        this.color.r = r;
    }
    get colorR() {
        return this.color.r;
    }
    set colorG(g) {
        this.color.g = g;
    }
    get colorG() {
        return this.color.g;
    }
    set colorB(b) {
        this.color.b = b;
    }
    get colorB() {
        return this.color.b;
    }
}
exports.default = Graphic;

},{"../Utils/Color":105,"./CanvasNode":41}],44:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.GraphicType = void 0;
var GraphicType;
(function (GraphicType) {
    GraphicType["POINT"] = "POINT";
    GraphicType["RECT"] = "RECT";
    GraphicType["LINE"] = "LINE";
    GraphicType["PARTICLE"] = "PARTICLE";
})(GraphicType = exports.GraphicType || (exports.GraphicType = {}));

},{}],45:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Graphic_1 = __importDefault(require("../Graphic"));
class Line extends Graphic_1.default {
    constructor(start, end) {
        super();
        this.start = start;
        this.end = end;
        this.thickness = 2;
        // Does this really have a meaning for lines?
        this.size.set(5, 5);
    }
    set start(pos) {
        this.position = pos;
    }
    get start() {
        return this.position;
    }
    set end(pos) {
        this._end = pos;
    }
    get end() {
        return this._end;
    }
}
exports.default = Line;

},{"../Graphic":43}],46:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Point_1 = __importDefault(require("./Point"));
/**
 * - Position X
- Velocity (speed and direction) X
- Color X
- Lifetime
- Age can be handled as lifetime
- Shape X
- Size X
- Transparency X
 */
class Particle extends Point_1.default {
    constructor(position, size, mass) {
        // Are we making this a circle?
        super(position);
        this.inUse = false;
        this.mass = mass;
    }
    setParticleActive(lifetime, position) {
        this.age = lifetime;
        this.inUse = true;
        this.visible = true;
        this.position = position;
    }
    decrementAge(decay) {
        this.age -= decay;
    }
    setParticleInactive() {
        this.inUse = false;
        this.visible = false;
    }
    set velY(y) {
        this.vel.y = y;
    }
    get velY() {
        return this.vel.y;
    }
}
exports.default = Particle;

},{"./Point":47}],47:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Graphic_1 = __importDefault(require("../Graphic"));
/** A basic point to be drawn on the screen. */
class Point extends Graphic_1.default {
    constructor(position) {
        // Are we making this a circle?
        super();
        this.position = position;
        this.size.set(5, 5);
    }
}
exports.default = Point;

},{"../Graphic":43}],48:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Graphic_1 = __importDefault(require("../Graphic"));
const Color_1 = __importDefault(require("../../Utils/Color"));
/** A basic rectangle to be drawn on the screen. */
class Rect extends Graphic_1.default {
    constructor(position, size) {
        super();
        this.position = position;
        this.size = size;
        this.borderColor = Color_1.default.TRANSPARENT;
        this.borderWidth = 0;
    }
    /**
     * Sets the border color of this rectangle
     * @param color The border color
     */
    setBorderColor(color) {
        this.borderColor = color;
    }
    // @deprecated
    getBorderColor() {
        return this.borderColor;
    }
    /**
     * Sets the border width of this rectangle
     * @param width The width of the rectangle in pixels
     */
    setBorderWidth(width) {
        this.borderWidth = width;
    }
    getBorderWidth() {
        return this.borderWidth;
    }
}
exports.default = Rect;

},{"../../Utils/Color":105,"../Graphic":43}],49:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Sprite_1 = __importDefault(require("./Sprite"));
const AnimationManager_1 = __importDefault(require("../../Rendering/Animations/AnimationManager"));
const Vec2_1 = __importDefault(require("../../DataTypes/Vec2"));
/** An sprite with specified animation frames. */
class AnimatedSprite extends Sprite_1.default {
    constructor(spritesheet) {
        super(spritesheet.name);
        this.numCols = spritesheet.columns;
        this.numRows = spritesheet.rows;
        // Set the size of the sprite to the sprite size specified by the spritesheet
        this.size.set(spritesheet.spriteWidth, spritesheet.spriteHeight);
        this.animation = new AnimationManager_1.default(this);
        // Add the animations to the animated sprite
        for (let animation of spritesheet.animations) {
            this.animation.add(animation.name, animation);
        }
    }
    get cols() {
        return this.numCols;
    }
    get rows() {
        return this.numRows;
    }
    /**
     * Gets the image offset for the current index of animation
     * @param index The index we're at in the animation
     * @returns A Vec2 containing the image offset
     */
    getAnimationOffset(index) {
        return new Vec2_1.default((index % this.numCols) * this.size.x, Math.floor(index / this.numCols) * this.size.y);
    }
}
exports.default = AnimatedSprite;

},{"../../DataTypes/Vec2":26,"../../Rendering/Animations/AnimationManager":72,"./Sprite":50}],50:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const CanvasNode_1 = __importDefault(require("../CanvasNode"));
const ResourceManager_1 = __importDefault(require("../../ResourceManager/ResourceManager"));
const Vec2_1 = __importDefault(require("../../DataTypes/Vec2"));
/**
 * The representation of a sprite - an in-game image
 */
class Sprite extends CanvasNode_1.default {
    constructor(imageId) {
        super();
        this.imageId = imageId;
        let image = ResourceManager_1.default.getInstance().getImage(this.imageId);
        this.size = new Vec2_1.default(image.width, image.height);
        this.imageOffset = Vec2_1.default.ZERO;
        this.invertX = false;
        this.invertY = false;
    }
    /**
     * Sets the offset of the sprite from (0, 0) in the image's coordinates
     * @param offset The offset of the sprite from (0, 0) in image coordinates
     */
    setImageOffset(offset) {
        this.imageOffset = offset;
    }
}
exports.default = Sprite;

},{"../../DataTypes/Vec2":26,"../../ResourceManager/ResourceManager":89,"../CanvasNode":41}],51:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Vec2_1 = __importDefault(require("../DataTypes/Vec2"));
const CanvasNode_1 = __importDefault(require("./CanvasNode"));
/**
 * The representation of a tilemap - this can consist of a combination of tilesets in one layer
 */
class Tilemap extends CanvasNode_1.default {
    // TODO: Make this no longer be specific to Tiled
    constructor(tilemapData, layer, tilesets, scale) {
        super();
        this.tilesets = tilesets;
        this.tileSize = new Vec2_1.default(0, 0);
        this.name = layer.name;
        this.numCols = tilemapData.width;
        this.numRows = tilemapData.height;
        let tilecount = 0;
        for (let tileset of tilesets) {
            tilecount += tileset.getTileCount() + 1;
        }
        this.collisionMap = new Array(tilecount);
        for (let i = 0; i < this.collisionMap.length; i++) {
            this.collisionMap[i] = false;
        }
        // Defer parsing of the data to child classes - this allows for isometric vs. orthographic tilemaps and handling of Tiled data or other data
        this.parseTilemapData(tilemapData, layer);
        this.scale.set(scale.x, scale.y);
    }
    get name() { return this._name; }
    set name(name) { this._name = name; }
    /**
     * Gets the data value of the tile at the specified index
     * @param index The index of the tile
     * @returns The data value of the tile
     */
    getTile(col, row) {
        let index = this.getTileIndex(col, row);
        if (index === -1) {
            return -1;
        }
        return this.data[index];
    }
    /**
     * Gets the index of the tile in the tilemaps backing array.
     * @param position the position in row-column format in the backing array of the tilemap
     * @returns the index of position in the tilemap
     */
    getTileIndex(col, row) {
        if (col < 0 || col >= this.numCols || row < 0 || row >= this.numRows) {
            return -1;
        }
        return row * this.numCols + col;
    }
    /**
     * Gets the column and row of a tile in the tilemap from the index of the tile
     * in the backing array.
     * @param index the index of the tile in the backing array
     * @return a Vec2 containing the column and row indices of the tile
     */
    getTileColRow(index) {
        let col = index % this.numCols;
        let row = Math.floor(index / this.numCols);
        return new Vec2_1.default(col, row);
    }
    /**
     * Sets the tile at the specified position to the given tile.
     * @param position the row and column of the tile in the backing array
     * @param tile the number of the tile to set
     */
    setTile(col, row, tile) {
        let index = this.getTileIndex(col, row);
        if (index !== -1) {
            this.data[index] = tile;
        }
    }
    /**
     * Returns an array of the tilesets associated with this tilemap
     * @returns An array of all of the tilesets assocaited with this tilemap.
     */
    getTilesets() {
        return this.tilesets;
    }
    /**
     * Gets the dimensions of the tilemap
     * @returns A Vec2 containing the number of columns and the number of rows in the tilemap.
     */
    getDimensions() {
        return new Vec2_1.default(this.numCols, this.numRows);
    }
    // Methods for getting the size of a tile
    /**
     * Gets the raw size of the tiles, without any scaling or zooming.
     * @returns the size of the tiles in this tilemap
     */
    getTileSize() {
        return this.tileSize;
    }
    /**
     * Returns the size of tiles in this tilemap as they appear in the game world after scaling
     * @returns A vector containing the size of tiles in this tilemap as they appear in the game world after scaling.
     */
    getScaledTileSize() {
        return this.getTileSize().scaled(this.scale.x, this.scale.y);
    }
    /**
     * Returns true if the tile at the specified row and column of the tilemap is collidable
     * @param col the specified column
     * @param row the specified row
     * @returns A flag representing whether or not the tile is collidable.
     */
    isTileCollidable(col, row) {
        if (col < 0 || col >= this.numCols || row < 0 || row >= this.numRows) {
            return false;
        }
        return this.collisionMap[this.getTile(col, row)];
    }
    /**
     * Adds this tilemap to the physics system
     */
    addPhysics() {
        this.hasPhysics = true;
        this.active = true;
        this.group = -1;
        this.scene.getPhysicsManager().registerTilemap(this);
    }
}
exports.default = Tilemap;

},{"../DataTypes/Vec2":26,"./CanvasNode":41}],52:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Vec2_1 = __importDefault(require("../../DataTypes/Vec2"));
const Debug_1 = __importDefault(require("../../Debug/Debug"));
const Color_1 = __importDefault(require("../../Utils/Color"));
const Tilemap_1 = __importDefault(require("../Tilemap"));
class IsometricTilemap extends Tilemap_1.default {
    getMinColRow(region) {
        return new Vec2_1.default(0, 0);
    }
    getMaxColRow(region) {
        return new Vec2_1.default(this.numCols, this.numRows);
    }
    getWorldPosition(col, row) {
        if (col < 0 || col > this.numCols || row < 0 || row > this.numRows) {
            return null;
        }
        let vpx = this.scene.getViewport().getHalfSize().x;
        let x = Math.floor(this.scale.x * this.tileSize.x / 2 * (col - row) + vpx);
        let y = Math.floor(this.scale.y * this.tileSize.y / 2 * (col + row));
        return new Vec2_1.default(x, y);
    }
    getTilemapPosition(x, y) {
        let vpx = this.scene.getViewport().getHalfSize().x;
        let col = Math.floor((x - vpx) / this.scale.x / this.tileSize.x + y / this.scale.y / this.tileSize.y);
        let row = Math.floor(y / this.scale.y / this.tileSize.y - (x - vpx) / this.scale.x / this.tileSize.x);
        if (col < 0 || col > this.numCols || row < 0 || row > this.numRows) {
            return null;
        }
        return new Vec2_1.default(col, row);
    }
    getTileCollider(col, row) {
        return;
    }
    parseTilemapData(tilemapData, layer) {
        // The size of the tilemap in local space
        this.numCols = tilemapData.width;
        this.numRows = tilemapData.height;
        // The size of tiles
        this.tileSize.set(tilemapData.tilewidth, tilemapData.tileheight);
        // The size of the tilemap on the canvas
        this.size.set(this.numCols * this.tileSize.x, this.numRows * this.tileSize.y);
        this.position.copy(this.size.scaled(0.5));
        this.data = layer.data;
        this.visible = layer.visible;
        // Whether the tilemap is collidable or not
        this.isCollidable = false;
        if (layer.properties) {
            for (let item of layer.properties) {
                if (item.name === "Collidable") {
                    this.isCollidable = item.value;
                    // Set all tiles besides "empty: 0" to be collidable
                    for (let i = 1; i < this.collisionMap.length; i++) {
                        this.collisionMap[i] = true;
                    }
                }
            }
        }
    }
    debugRender() {
        for (let tile = 0; tile < this.data.length; tile++) {
            let pos = this.getTileColRow(tile);
            Debug_1.default.drawPoint(this.getWorldPosition(pos.x, pos.y), Color_1.default.BLUE);
        }
    }
}
exports.default = IsometricTilemap;

},{"../../DataTypes/Vec2":26,"../../Debug/Debug":27,"../../Utils/Color":105,"../Tilemap":51}],53:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Tilemap_1 = __importDefault(require("../Tilemap"));
const Vec2_1 = __importDefault(require("../../DataTypes/Vec2"));
const Debug_1 = __importDefault(require("../../Debug/Debug"));
const Color_1 = __importDefault(require("../../Utils/Color"));
const AABB_1 = __importDefault(require("../../DataTypes/Shapes/AABB"));
/**
 * The representation of an orthogonal tilemap - i.e. a top down or platformer tilemap
 */
class OrthogonalTilemap extends Tilemap_1.default {
    getMinColRow(region) {
        return this.getTilemapPosition(region.topLeft.x, region.topLeft.y);
    }
    getMaxColRow(region) {
        return this.getTilemapPosition(region.bottomRight.x, region.bottomRight.y);
    }
    getTilemapPosition(x, y) {
        let col = Math.floor(x / this.tileSize.x / this.scale.x);
        let row = Math.floor(y / this.tileSize.y / this.scale.y);
        return new Vec2_1.default(col, row);
    }
    getWorldPosition(col, row) {
        let x = col * this.tileSize.x * this.scale.x;
        let y = row * this.tileSize.y * this.scale.y;
        return new Vec2_1.default(x, y);
    }
    getTileCollider(col, row) {
        let tileSize = this.getScaledTileSize();
        let centerX = col * tileSize.x + tileSize.x / 2;
        let centerY = row * tileSize.y + tileSize.y / 2;
        let center = new Vec2_1.default(centerX, centerY);
        let halfSize = tileSize.scaled(0.5);
        return new AABB_1.default(center, halfSize);
    }
    parseTilemapData(tilemapData, layer) {
        // The size of the tilemap in local space
        this.numCols = tilemapData.width;
        this.numRows = tilemapData.height;
        // The size of tiles
        this.tileSize.set(tilemapData.tilewidth, tilemapData.tileheight);
        // The size of the tilemap on the canvas
        this.size.set(this.numCols * this.tileSize.x, this.numRows * this.tileSize.y);
        this.position.copy(this.size.scaled(0.5));
        this.data = layer.data;
        this.visible = layer.visible;
        // Whether the tilemap is collidable or not
        this.isCollidable = false;
        if (layer.properties) {
            for (let item of layer.properties) {
                if (item.name === "Collidable") {
                    this.isCollidable = item.value;
                    // Set all tiles besides "empty: 0" to be collidable
                    for (let i = 1; i < this.collisionMap.length; i++) {
                        this.collisionMap[i] = true;
                    }
                }
            }
        }
    }
    // @override
    update(deltaT) { }
    // @override
    debugRender() {
        for (let i = 0; i < this.data.length; i++) {
            let cr = this.getTileColRow(i);
            if (this.isCollidable && this.isTileCollidable(cr.x, cr.y)) {
                let box = this.getTileCollider(cr.x, cr.y);
                Debug_1.default.drawBox(this.inRelativeCoordinates(box.center), box.halfSize.scale(this.scene.getViewScale()), false, Color_1.default.BLUE);
            }
        }
    }
}
exports.default = OrthogonalTilemap;

},{"../../DataTypes/Shapes/AABB":20,"../../DataTypes/Vec2":26,"../../Debug/Debug":27,"../../Utils/Color":105,"../Tilemap":51}],54:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const AABB_1 = __importDefault(require("../../DataTypes/Shapes/AABB"));
const Vec2_1 = __importDefault(require("../../DataTypes/Vec2"));
const Debug_1 = __importDefault(require("../../Debug/Debug"));
const Color_1 = __importDefault(require("../../Utils/Color"));
const Tilemap_1 = __importDefault(require("../Tilemap"));
class StaggeredIsometricTilemap extends Tilemap_1.default {
    getTilemapPosition(x, y) {
        let col = x / this.tileSize.x / this.scale.x;
        let row = Math.floor(y / this.tileSize.y / this.scale.y * 2);
        if (row % 2 !== 0) {
            col = (x - this.tileSize.x / this.scale.x / 2) / this.tileSize.x / this.scale.x;
        }
        return new Vec2_1.default(Math.floor(col), row);
    }
    getWorldPosition(col, row) {
        let x = col * this.tileSize.x * this.scale.x;
        let y = row * this.tileSize.y / 2 * this.scale.y;
        if (row % 2 !== 0) {
            x += this.tileSize.x * this.scale.x / 2;
        }
        return new Vec2_1.default(Math.floor(x), Math.floor(y));
    }
    getTileCollider(col, row) {
        let tileSize = this.getScaledTileSize();
        let centerX = col * tileSize.x + tileSize.x / 2;
        let centerY = row * tileSize.y / 2 + tileSize.y + tileSize.y / 2;
        if (row % 2 !== 0) {
            centerX += tileSize.x / 2;
        }
        let center = new Vec2_1.default(centerX, centerY);
        let halfSize = tileSize.scaled(0.5);
        return new AABB_1.default(center, halfSize);
    }
    getMinColRow(region) {
        return new Vec2_1.default(0, 0);
    }
    getMaxColRow(region) {
        return new Vec2_1.default(this.numCols, this.numRows);
    }
    parseTilemapData(tilemapData, layer) {
        // The size of the tilemap in local space
        this.numCols = tilemapData.width;
        this.numRows = tilemapData.height;
        // The size of tiles
        this.tileSize.set(tilemapData.tilewidth, tilemapData.tileheight);
        // The size of the tilemap on the canvas
        this.size.set(this.numCols * this.tileSize.x, this.numRows * this.tileSize.y);
        this.position.copy(this.size.scaled(0.5));
        this.data = layer.data;
        this.visible = layer.visible;
        // Whether the tilemap is collidable or not
        this.isCollidable = false;
        if (layer.properties) {
            for (let item of layer.properties) {
                if (item.name === "Collidable") {
                    this.isCollidable = item.value;
                    // Set all tiles besides "empty: 0" to be collidable
                    for (let i = 1; i < this.collisionMap.length; i++) {
                        this.collisionMap[i] = true;
                    }
                }
            }
        }
    }
    debugRender() {
        for (let i = 0; i < this.data.length; i++) {
            let rc = this.getTileColRow(i);
            let box = this.getTileCollider(rc.x, rc.y);
            Debug_1.default.drawBox(this.inRelativeCoordinates(box.center), box.halfSize.scale(this.scene.getViewScale()), false, Color_1.default.BLUE);
        }
    }
}
exports.default = StaggeredIsometricTilemap;

},{"../../DataTypes/Shapes/AABB":20,"../../DataTypes/Vec2":26,"../../Debug/Debug":27,"../../Utils/Color":105,"../Tilemap":51}],55:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const CanvasNode_1 = __importDefault(require("./CanvasNode"));
const Color_1 = __importDefault(require("../Utils/Color"));
const Vec2_1 = __importDefault(require("../DataTypes/Vec2"));
const Input_1 = __importDefault(require("../Input/Input"));
/**
 * The representation of a UIElement - the parent class of things like buttons
 */
class UIElement extends CanvasNode_1.default {
    constructor(position) {
        super();
        this.position = position;
        this.backgroundColor = new Color_1.default(0, 0, 0, 0);
        this.borderColor = new Color_1.default(0, 0, 0, 0);
        this.borderRadius = 5;
        this.borderWidth = 1;
        this.padding = Vec2_1.default.ZERO;
        this.onClick = null;
        this.onClickEventId = null;
        this.onRelease = null;
        this.onReleaseEventId = null;
        this.onEnter = null;
        this.onEnterEventId = null;
        this.onLeave = null;
        this.onLeaveEventId = null;
        this.isClicked = false;
        this.isEntered = false;
    }
    // @deprecated
    setBackgroundColor(color) {
        this.backgroundColor = color;
    }
    // @deprecated
    setPadding(padding) {
        this.padding.copy(padding);
    }
    update(deltaT) {
        super.update(deltaT);
        // See of this object was just clicked
        if (Input_1.default.isMouseJustPressed()) {
            let clickPos = Input_1.default.getMousePressPosition();
            if (this.contains(clickPos.x, clickPos.y) && this.visible && !this.layer.isHidden()) {
                this.isClicked = true;
                if (this.onClick !== null) {
                    this.onClick();
                }
                if (this.onClickEventId !== null) {
                    let data = {};
                    this.emitter.fireEvent(this.onClickEventId, data);
                }
            }
        }
        // If the mouse wasn't just pressed, then we definitely weren't clicked
        if (!Input_1.default.isMousePressed()) {
            if (this.isClicked) {
                this.isClicked = false;
            }
        }
        // Check if the mouse is hovering over this element
        let mousePos = Input_1.default.getMousePosition();
        if (mousePos && this.contains(mousePos.x, mousePos.y)) {
            this.isEntered = true;
            if (this.onEnter !== null) {
                this.onEnter();
            }
            if (this.onEnterEventId !== null) {
                let data = {};
                this.emitter.fireEvent(this.onEnterEventId, data);
            }
        }
        else if (this.isEntered) {
            this.isEntered = false;
            if (this.onLeave !== null) {
                this.onLeave();
            }
            if (this.onLeaveEventId !== null) {
                let data = {};
                this.emitter.fireEvent(this.onLeaveEventId, data);
            }
        }
        else if (this.isClicked) {
            // If mouse is dragged off of element while down, it is not clicked anymore
            this.isClicked = false;
        }
    }
    /**
     * Overridable method for calculating background color - useful for elements that want to be colored on different after certain events
     * @returns The background color of the UIElement
     */
    calculateBackgroundColor() {
        return this.backgroundColor;
    }
    /**
     * Overridable method for calculating border color - useful for elements that want to be colored on different after certain events
     * @returns The border color of the UIElement
     */
    calculateBorderColor() {
        return this.borderColor;
    }
}
exports.default = UIElement;

},{"../DataTypes/Vec2":26,"../Input/Input":34,"../Utils/Color":105,"./CanvasNode":41}],56:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Label_1 = __importDefault(require("./Label"));
const Color_1 = __importDefault(require("../../Utils/Color"));
/** A clickable button UIElement */
class Button extends Label_1.default {
    constructor(position, text) {
        super(position, text);
        this.backgroundColor = new Color_1.default(150, 75, 203);
        this.borderColor = new Color_1.default(41, 46, 30);
        this.textColor = new Color_1.default(255, 255, 255);
    }
    // @override
    calculateBackgroundColor() {
        // Change the background color if clicked or hovered
        if (this.isEntered && !this.isClicked) {
            return this.backgroundColor.lighten();
        }
        else if (this.isClicked) {
            return this.backgroundColor.darken();
        }
        else {
            return this.backgroundColor;
        }
    }
}
exports.default = Button;

},{"../../Utils/Color":105,"./Label":57}],57:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.HAlign = exports.VAlign = void 0;
const Vec2_1 = __importDefault(require("../../DataTypes/Vec2"));
const Color_1 = __importDefault(require("../../Utils/Color"));
const UIElement_1 = __importDefault(require("../UIElement"));
/** A basic text-containing label */
class Label extends UIElement_1.default {
    constructor(position, text) {
        super(position);
        this.text = text;
        this.textColor = new Color_1.default(0, 0, 0, 1);
        this.font = "Arial";
        this.fontSize = 30;
        this.hAlign = "center";
        this.vAlign = "center";
        this.sizeAssigned = false;
    }
    // @deprecated
    setText(text) {
        this.text = text;
    }
    // @deprecated
    setTextColor(color) {
        this.textColor = color;
    }
    /**
     * Gets a string containg the font details for rendering
     * @returns A string containing the font details
     */
    getFontString() {
        return this.fontSize + "px " + this.font;
    }
    /**
     * Overridable method for calculating text color - useful for elements that want to be colored on different after certain events
     * @returns a string containg the text color
     */
    calculateTextColor() {
        return this.textColor.toStringRGBA();
    }
    /**
     * Uses the canvas to calculate the width of the text
     * @param ctx The rendering context
     * @returns A number representing the rendered text width
     */
    calculateTextWidth(ctx) {
        ctx.font = this.fontSize + "px " + this.font;
        return ctx.measureText(this.text).width;
    }
    setHAlign(align) {
        this.hAlign = align;
    }
    setVAlign(align) {
        this.vAlign = align;
    }
    /**
     * Calculate the offset of the text - this is used for rendering text with different alignments
     * @param ctx The rendering context
     * @returns The offset of the text in a Vec2
     */
    calculateTextOffset(ctx) {
        let textWidth = this.calculateTextWidth(ctx);
        let offset = new Vec2_1.default(0, 0);
        let hDiff = this.size.x - textWidth;
        if (this.hAlign === HAlign.CENTER) {
            offset.x = hDiff / 2;
        }
        else if (this.hAlign === HAlign.RIGHT) {
            offset.x = hDiff;
        }
        if (this.vAlign === VAlign.TOP) {
            ctx.textBaseline = "top";
            offset.y = 0;
        }
        else if (this.vAlign === VAlign.BOTTOM) {
            ctx.textBaseline = "bottom";
            offset.y = this.size.y;
        }
        else {
            ctx.textBaseline = "middle";
            offset.y = this.size.y / 2;
        }
        return offset;
    }
    sizeChanged() {
        super.sizeChanged();
        this.sizeAssigned = true;
    }
    /**
     * Automatically sizes the element to the text within it
     * @param ctx The rendering context
     */
    autoSize(ctx) {
        let width = this.calculateTextWidth(ctx);
        let height = this.fontSize;
        this.size.set(width + this.padding.x * 2, height + this.padding.y * 2);
        this.sizeAssigned = true;
    }
    /**
     * Initially assigns a size to the UIElement if none is provided
     * @param ctx The rendering context
     */
    handleInitialSizing(ctx) {
        if (!this.sizeAssigned) {
            this.autoSize(ctx);
        }
    }
    /** On the next render, size this element to it's current text using its current font size */
    sizeToText() {
        this.sizeAssigned = false;
    }
}
exports.default = Label;
var VAlign;
(function (VAlign) {
    VAlign["TOP"] = "top";
    VAlign["CENTER"] = "center";
    VAlign["BOTTOM"] = "bottom";
})(VAlign = exports.VAlign || (exports.VAlign = {}));
var HAlign;
(function (HAlign) {
    HAlign["LEFT"] = "left";
    HAlign["CENTER"] = "center";
    HAlign["RIGHT"] = "right";
})(HAlign = exports.HAlign || (exports.HAlign = {}));

},{"../../DataTypes/Vec2":26,"../../Utils/Color":105,"../UIElement":55}],58:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Vec2_1 = __importDefault(require("../../DataTypes/Vec2"));
const Input_1 = __importDefault(require("../../Input/Input"));
const Color_1 = __importDefault(require("../../Utils/Color"));
const MathUtils_1 = __importDefault(require("../../Utils/MathUtils"));
const UIElement_1 = __importDefault(require("../UIElement"));
/** A slider UIElement */
class Slider extends UIElement_1.default {
    constructor(position, initValue) {
        super(position);
        this.value = initValue;
        this.nibColor = Color_1.default.RED;
        this.sliderColor = Color_1.default.BLACK;
        this.backgroundColor = Color_1.default.TRANSPARENT;
        this.borderColor = Color_1.default.TRANSPARENT;
        this.nibSize = new Vec2_1.default(10, 20);
        // Set a default size
        this.size.set(200, 20);
    }
    /**
     * Retrieves the value of the slider
     * @returns The value of the slider
     */
    getValue() {
        return this.value;
    }
    /** A method called in response to the value changing */
    valueChanged() {
        if (this.onValueChange) {
            this.onValueChange(this.value);
        }
        if (this.onValueChangeEventId) {
            this.emitter.fireEvent(this.onValueChangeEventId, { target: this, value: this.value });
        }
    }
    update(deltaT) {
        super.update(deltaT);
        if (this.isClicked) {
            let val = MathUtils_1.default.invLerp(this.position.x - this.size.x / 2, this.position.x + this.size.x / 2, Input_1.default.getMousePosition().x);
            this.value = MathUtils_1.default.clamp01(val);
            this.valueChanged();
        }
    }
}
exports.default = Slider;

},{"../../DataTypes/Vec2":26,"../../Input/Input":34,"../../Utils/Color":105,"../../Utils/MathUtils":108,"../UIElement":55}],59:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Color_1 = __importDefault(require("../../Utils/Color"));
const Label_1 = __importDefault(require("./Label"));
const Input_1 = __importDefault(require("../../Input/Input"));
/** A text input UIElement */
class TextInput extends Label_1.default {
    constructor(position) {
        super(position, "");
        this.focused = false;
        this.cursorCounter = 0;
        // Give a default size to the x only
        this.size.set(200, this.fontSize);
        this.hAlign = "left";
        this.borderColor = Color_1.default.BLACK;
        this.backgroundColor = Color_1.default.WHITE;
    }
    update(deltaT) {
        super.update(deltaT);
        if (Input_1.default.isMouseJustPressed()) {
            let clickPos = Input_1.default.getMousePressPosition();
            if (this.contains(clickPos.x, clickPos.y)) {
                this.focused = true;
                this.cursorCounter = 30;
            }
            else {
                this.focused = false;
            }
        }
        if (this.focused) {
            let keys = Input_1.default.getKeysJustPressed();
            let nums = "1234567890";
            let specialChars = "`~!@#$%^&*()-_=+[{]}\\|;:'\",<.>/?";
            let letters = "qwertyuiopasdfghjklzxcvbnm";
            let mask = nums + specialChars + letters;
            keys = keys.filter(key => mask.includes(key));
            let shiftPressed = Input_1.default.isKeyPressed("shift");
            let backspacePressed = Input_1.default.isKeyJustPressed("backspace");
            let spacePressed = Input_1.default.isKeyJustPressed("space");
            if (backspacePressed) {
                this.text = this.text.substring(0, this.text.length - 1);
            }
            else if (spacePressed) {
                this.text += " ";
            }
            else if (keys.length > 0) {
                if (shiftPressed) {
                    this.text += keys[0].toUpperCase();
                }
                else {
                    this.text += keys[0];
                }
            }
        }
    }
}
exports.default = TextInput;

},{"../../Input/Input":34,"../../Utils/Color":105,"./Label":57}],60:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.UIElementType = void 0;
var UIElementType;
(function (UIElementType) {
    UIElementType["BUTTON"] = "BUTTON";
    UIElementType["LABEL"] = "LABEL";
    UIElementType["SLIDER"] = "SLIDER";
    UIElementType["TEXT_INPUT"] = "TEXTINPUT";
})(UIElementType = exports.UIElementType || (exports.UIElementType = {}));

},{}],61:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Map_1 = __importDefault(require("../DataTypes/Collections/Map"));
/**
 * The manager class for navigation.
 * Handles all navigable entities, such and allows them to be accessed by outside systems by requesting a path
 * from one position to another.
 */
class NavigationManager {
    constructor() {
        this.navigableEntities = new Map_1.default();
    }
    /**
     * Adds a navigable entity to the NavigationManager
     * @param navName The name of the navigable entitry
     * @param nav The actual Navigable instance
     */
    addNavigableEntity(navName, nav) {
        this.navigableEntities.add(navName, nav);
    }
    /**
     * Gets a path frome one point to another using a specified Navigable object
     * @param navName The name of the registered Navigable object
     * @param fromPosition The starting position of navigation
     * @param toPosition The ending position of Navigation
     * @param direct If true, go direct from fromPosition to toPosition, don't use NavMesh
     * @returns A NavigationPath containing the route to take over the Navigable entity to get between the provided positions.
     */
    getPath(navName, fromPosition, toPosition) {
        let nav = this.navigableEntities.get(navName);
        return nav.getNavigationPath(fromPosition.clone(), toPosition.clone());
    }
}
exports.default = NavigationManager;

},{"../DataTypes/Collections/Map":8}],62:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Vec2_1 = __importDefault(require("../DataTypes/Vec2"));
/**
 * A path that AIs can follow. Uses finishMove() in Physical to determine progress on the route
 */
class NavigationPath {
    /**
     * Constructs a new NavigationPath
     * @param path The path of nodes to take
     */
    constructor(path) {
        this.path = path;
        this.currentMoveDirection = Vec2_1.default.ZERO;
        this.distanceThreshold = 4;
    }
    /**
     * Returns the status of navigation along this NavigationPath
     * @returns True if the node has reached the end of the path, false otherwise
     */
    isDone() {
        return this.path.isEmpty();
    }
    next() { return this.path.isEmpty() ? null : this.path.peek(); }
    /**
     * Gets the movement direction in the current position along the path
     * @param node The node to move along the path
     * @returns The movement direction as a Vec2
     */
    getMoveDirection(node) {
        // Return direction to next point in the nav
        return node.position.dirTo(this.path.peek());
    }
    /**
     * Updates this NavigationPath to the current state of the GameNode
     * @param node The node moving along the path
     */
    handlePathProgress(node) {
        if (!this.path.isEmpty() && node.position.distanceSqTo(this.path.peek()) < this.distanceThreshold * this.distanceThreshold) {
            // We've reached our node, move on to the next destination
            this.path.pop();
        }
    }
    toString() {
        return this.path.toString();
    }
}
exports.default = NavigationPath;

},{"../DataTypes/Vec2":26}],63:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * An implementation of a Navmesh. Navmeshes are graphs in the game world along which nodes can move.
 */
class Navmesh {
    /**
     * Creates a new Navmesh from the points in the speecified graph. Navigation is done using the
     * given NavigationStrategy.
     * @param graph the graph to construct a navmesh from
     * @param strategy a constructor for strategy to use to build paths for this navmesh
     */
    constructor(graph) {
        this._graph = graph;
        this._strategies = new Map();
        this._strategy = undefined;
    }
    get graph() { return this._graph; }
    setStrategy(strategy) { this._strategy = this._strategies.get(strategy); }
    // @implemented
    getNavigationPath(fromPosition, toPosition) {
        if (this._strategy === undefined) {
            throw new Error("Error.No pathfinding strategy set for this navmesh.");
        }
        return this._strategy.buildPath(toPosition, fromPosition);
    }
    registerStrategy(key, strategy) {
        this._strategies.set(key, strategy);
    }
}
exports.default = Navmesh;

},{}],64:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Stack_1 = __importDefault(require("../../DataTypes/Collections/Stack"));
const NavigationPath_1 = __importDefault(require("../NavigationPath"));
const NavigationStrategy_1 = __importDefault(require("./NavigationStrategy"));
/**
 * Constructs a navigation path that goes directly from point A to point B. In the
 * original implementation of the NavigationPath, you could set a flag to tell it to
 * create a direct path. I've basically removed that flag and created this class in
 * it's place.
 * @author PeteyLumpkins
 */
class DirectPathStrat extends NavigationStrategy_1.default {
    /**
     * @see NavPathStrat.buildPath()
     */
    buildPath(to, from) {
        let stack = new Stack_1.default();
        stack.push(to.clone());
        return new NavigationPath_1.default(stack);
    }
}
exports.default = DirectPathStrat;

},{"../../DataTypes/Collections/Stack":10,"../NavigationPath":62,"./NavigationStrategy":65}],65:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * An abstract navigation strategy for Wolfie2Ds navigation system. You can extend this class to create
 * your own strategy for constructing a NavigationPath for the navigation system.
 * @author PeteyLumpkins
 */
class NavigationStrategy {
    constructor(mesh) {
        this.mesh = mesh;
    }
    get mesh() { return this._mesh; }
    set mesh(mesh) { this._mesh = mesh; }
}
exports.default = NavigationStrategy;

},{}],66:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const PhysicsManager_1 = __importDefault(require("./PhysicsManager"));
const Vec2_1 = __importDefault(require("../DataTypes/Vec2"));
const OrthogonalTilemap_1 = __importDefault(require("../Nodes/Tilemaps/OrthogonalTilemap"));
const AreaCollision_1 = __importDefault(require("../DataTypes/Physics/AreaCollision"));
/**
 * ALGORITHM:
 * 	In an effort to keep things simple and working effectively, each dynamic node will resolve its
 * 	collisions considering the rest of the world as static.
 *
 * 	Collision detecting will happen first. This can be considered a broad phase, but it is not especially
 * 	efficient, as it does not need to be for this game engine. Every dynamic node is checked against every
 * 	other node for collision area. If collision area is non-zero (meaning the current node sweeps into another),
 * 	it is added to a list of hits.
 *
 * 	INITIALIZATION:
 * 		- Physics constants are reset
 * 		- Swept shapes are recalculated. If a node isn't moving, it is skipped.
 *
 * 	COLLISION DETECTION:
 * 		- For a node, collision area will be calculated using the swept AABB of the node against every other AABB in a static state
 * 		- These collisions will be sorted by area in descending order
 *
 * 	COLLISION RESOLUTION:
 * 		- For each hit, time of collision is calculated using a swept line through the AABB of the static node expanded
 * 			with minkowski sums (discretely, but the concept is there)
 * 		- The collision is resolved based on the near time of the collision (from method of separated axes)
 * 			- X is resolved by near x, Y by near y.
 * 			- There is some fudging to allow for sliding along walls of separate colliders. Sorting by area also helps with this.
 * 			- Corner to corner collisions are resolve to favor x-movement. This is in consideration of platformers, to give
 * 				the player some help with jumps
 *
 * 	Pros:
 * 		- Everything happens with a consistent time. There is a distinct before and after for each resolution.
 * 		- No back-tracking needs to be done. Once we resolve a node, it is definitively resolved.
 *
 * 	Cons:
 * 		- Nodes that are processed early have movement priority over other nodes. This can lead to some undesirable interactions.
 */
class BasicPhysicsManager extends PhysicsManager_1.default {
    constructor(options) {
        super();
        this.staticNodes = new Array();
        this.dynamicNodes = new Array();
        this.tilemaps = new Array();
        this.collisionMasks = new Array(32);
        // Parse options
        this.parseOptions(options);
    }
    /**
     * Parses the options for constructing the physics manager
     * @param options A record of options
     */
    parseOptions(options) {
        if (options.groupNames !== undefined && options.collisions !== undefined) {
            for (let i = 0; i < options.groupNames.length; i++) {
                let group = options.groupNames[i];
                // Register the group name and number
                this.groupNames[i] = group;
                this.groupMap.set(group, 1 << i);
                let collisionMask = 0;
                for (let j = 0; j < options.collisions[i].length; j++) {
                    if (options.collisions[i][j]) {
                        collisionMask |= 1 << j;
                    }
                }
                this.collisionMasks[i] = collisionMask;
            }
        }
    }
    // @override
    registerObject(node) {
        if (node.isStatic) {
            // Static and not collidable
            this.staticNodes.push(node);
        }
        else {
            // Dynamic and not collidable
            this.dynamicNodes.push(node);
        }
    }
    // @override
    deregisterObject(node) {
        if (node.isStatic) {
            // Remove the node from the static list
            const index = this.staticNodes.indexOf(node);
            this.staticNodes.splice(index, 1);
        }
        else {
            // Remove the node from the dynamic list
            const index = this.dynamicNodes.indexOf(node);
            this.dynamicNodes.splice(index, 1);
        }
    }
    // @override
    registerTilemap(tilemap) {
        this.tilemaps.push(tilemap);
    }
    // @override
    deregisterTilemap(tilemap) {
        const index = this.tilemaps.indexOf(tilemap);
        this.tilemaps.splice(index, 1);
    }
    // @override
    update(deltaT) {
        for (let node of this.dynamicNodes) {
            /*---------- INITIALIZATION PHASE ----------*/
            // Clear frame dependent boolean values for each node
            node.onGround = false;
            node.onCeiling = false;
            node.onWall = false;
            node.collidedWithTilemap = false;
            node.isColliding = false;
            // If this node is not active, don't process it
            if (!node.active) {
                continue;
            }
            // Update the swept shapes of each node
            if (node.moving) {
                // If moving, reflect that in the swept shape
                node.sweptRect.sweep(node._velocity, node.collisionShape.center, node.collisionShape.halfSize);
            }
            else {
                // If our node isn't moving, don't bother to check it (other nodes will detect if they run into it)
                node._velocity.zero();
                continue;
            }
            /*---------- DETECTION PHASE ----------*/
            // Gather a set of overlaps
            let overlaps = new Array();
            let groupIndex = node.group === -1 ? -1 : Math.log2(node.group);
            // First, check this node against every static node (order doesn't actually matter here, since we sort anyways)
            for (let other of this.staticNodes) {
                // Ignore inactive nodes
                if (!other.active)
                    continue;
                let collider = other.collisionShape.getBoundingRect();
                let area = node.sweptRect.overlapArea(collider);
                if (area > 0) {
                    // We had a collision
                    overlaps.push(new AreaCollision_1.default(area, collider, other, "GameNode", null));
                }
            }
            // Then, check it against every dynamic node
            for (let other of this.dynamicNodes) {
                // Ignore ourselves
                if (node === other)
                    continue;
                // Ignore inactive nodes
                if (!other.active)
                    continue;
                let collider = other.collisionShape.getBoundingRect();
                let area = node.sweptRect.overlapArea(collider);
                if (area > 0) {
                    // We had a collision
                    overlaps.push(new AreaCollision_1.default(area, collider, other, "GameNode", null));
                }
            }
            // Lastly, gather a set of AABBs from the tilemap.
            // This step involves the most extra work, so it is abstracted into a method
            for (let tilemap of this.tilemaps) {
                // Ignore inactive tilemaps
                if (!tilemap.active)
                    continue;
                if (tilemap instanceof OrthogonalTilemap_1.default) {
                    this.collideWithOrthogonalTilemap(node, tilemap, overlaps);
                }
            }
            // Sort the overlaps by area
            overlaps = overlaps.sort((a, b) => b.area - a.area);
            // Keep track of hits to use later
            let hits = [];
            /*---------- RESOLUTION PHASE ----------*/
            // For every overlap, determine if we need to collide with it and when
            for (let overlap of overlaps) {
                // Ignore nodes we don't interact with
                if (groupIndex !== -1 && overlap.other.group !== -1 && ((this.collisionMasks[groupIndex] & overlap.other.group) === 0))
                    continue;
                // Do a swept line test on the static AABB with this AABB size as padding (this is basically using a minkowski sum!)
                // Start the sweep at the position of this node with a delta of _velocity
                const point = node.collisionShape.center;
                const delta = node._velocity;
                const padding = node.collisionShape.halfSize;
                const otherAABB = overlap.collider;
                const hit = otherAABB.intersectSegment(node.collisionShape.center, node._velocity, node.collisionShape.halfSize);
                overlap.hit = hit;
                if (hit !== null) {
                    hits.push(hit);
                    // We got a hit, resolve with the time inside of the hit
                    let tnearx = hit.nearTimes.x;
                    let tneary = hit.nearTimes.y;
                    // Allow edge clipping (edge overlaps don't count, only area overlaps)
                    // Importantly don't allow both cases to be true. Then we clip through corners. Favor x to help players land jumps
                    if (tnearx < 1.0 && (point.y === otherAABB.top - padding.y || point.y === otherAABB.bottom + padding.y) && delta.x !== 0) {
                        tnearx = 1.0;
                    }
                    else if (tneary < 1.0 && (point.x === otherAABB.left - padding.x || point.x === otherAABB.right + padding.x) && delta.y !== 0) {
                        tneary = 1.0;
                    }
                    if (hit.nearTimes.x >= 0 && hit.nearTimes.x < 1) {
                        // Any tilemap objects that made it here are collidable
                        if (overlap.type === "Tilemap" || overlap.other.isCollidable) {
                            node._velocity.x = node._velocity.x * tnearx;
                            node.isColliding = true;
                        }
                    }
                    if (hit.nearTimes.y >= 0 && hit.nearTimes.y < 1) {
                        // Any tilemap objects that made it here are collidable
                        if (overlap.type === "Tilemap" || overlap.other.isCollidable) {
                            node._velocity.y = node._velocity.y * tneary;
                            node.isColliding = true;
                        }
                    }
                }
            }
            /*---------- INFORMATION/TRIGGER PHASE ----------*/
            // Check if we ended up on the ground, ceiling or wall
            // Also check for triggers
            for (let overlap of overlaps) {
                // Check for a trigger. If we care about the trigger, react
                if (overlap.other.isTrigger && (overlap.other.triggerMask & node.group) && node.group != -1) {
                    // Get the bit that this group is represented by
                    let index = Math.floor(Math.log2(node.group));
                    // Extract the triggerEnter event name
                    this.emitter.fireEvent(overlap.other.triggerEnters[index], {
                        node: node.id,
                        other: overlap.other.id
                    });
                }
                // Ignore collision sides for nodes we don't interact with
                if (groupIndex !== -1 && overlap.other.group !== -1 && ((this.collisionMasks[groupIndex] & overlap.other.group) === 0))
                    continue;
                // Only check for direction if the overlap was collidable
                if (overlap.type === "Tilemap" || overlap.other.isCollidable) {
                    let collisionSide = overlap.collider.touchesAABBWithoutCorners(node.collisionShape.getBoundingRect());
                    if (collisionSide !== null) {
                        // If we touch, not including corner cases, check the collision normal
                        if (overlap.hit !== null) {
                            // If we hit a tilemap, keep track of it
                            if (overlap.type == "Tilemap") {
                                node.collidedWithTilemap = true;
                            }
                            if (collisionSide.y === -1) {
                                // Node is on top of overlap, so onGround
                                node.onGround = true;
                            }
                            else if (collisionSide.y === 1) {
                                // Node is on bottom of overlap, so onCeiling
                                node.onCeiling = true;
                            }
                            else {
                                // Node wasn't touching on y, so it is touching on x
                                node.onWall = true;
                            }
                        }
                    }
                }
            }
            // Resolve the collision with the node, and move it
            node.finishMove();
        }
    }
    /**
     * Handles a collision between this node and an orthogonal tilemap
     * @param node The node
     * @param tilemap The tilemap the node may be colliding with
     * @param overlaps The list of overlaps
     */
    collideWithOrthogonalTilemap(node, tilemap, overlaps) {
        // Get the min and max x and y coordinates of the moving node
        let min = new Vec2_1.default(node.sweptRect.left, node.sweptRect.top);
        let max = new Vec2_1.default(node.sweptRect.right, node.sweptRect.bottom);
        // Convert the min/max x/y to the min and max row/col in the tilemap array
        let minIndex = tilemap.getMinColRow(node.sweptRect);
        let maxIndex = tilemap.getMaxColRow(node.sweptRect);
        // Loop over all possible tiles (which isn't many in the scope of the velocity per frame)
        for (let col = minIndex.x; col <= maxIndex.x; col++) {
            for (let row = minIndex.y; row <= maxIndex.y; row++) {
                if (tilemap.isTileCollidable(col, row)) {
                    // Create a new collider for this tile
                    let collider = tilemap.getTileCollider(col, row);
                    // Calculate collision area between the node and the tile
                    let area = node.sweptRect.overlapArea(collider);
                    if (area > 0) {
                        // We had a collision
                        overlaps.push(new AreaCollision_1.default(area, collider, tilemap, "Tilemap", new Vec2_1.default(col, row)));
                    }
                }
            }
        }
    }
}
exports.default = BasicPhysicsManager;

},{"../DataTypes/Physics/AreaCollision":17,"../DataTypes/Vec2":26,"../Nodes/Tilemaps/OrthogonalTilemap":53,"./PhysicsManager":67}],67:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Receiver_1 = __importDefault(require("../Events/Receiver"));
const Emitter_1 = __importDefault(require("../Events/Emitter"));
const Map_1 = __importDefault(require("../DataTypes/Collections/Map"));
/**
 * An abstract physics manager.
 * This class exposes functions for subclasses to implement that should allow for a working physics system to be created.
 */
class PhysicsManager {
    constructor() {
        this.receiver = new Receiver_1.default();
        this.emitter = new Emitter_1.default();
        // The creation and implementation of layers is deferred to the subclass
        this.groupMap = new Map_1.default();
        this.groupNames = new Array();
    }
    destroy() {
        this.receiver.destroy();
    }
    /**
     * Sets the physics layer of the GameNode
     * @param node The GameNode
     * @param group The group that the GameNode should be on
     */
    setGroup(node, group) {
        node.group = this.groupMap.get(group);
    }
    /**
     * Retrieves the layer number associated with the provided name
     * @param layer The name of the layer
     * @returns The layer number, or 0 if there is not a layer with that name registered
     */
    getGroupNumber(group) {
        if (this.groupMap.has(group)) {
            return this.groupMap.get(group);
        }
        else {
            return 0;
        }
    }
    /**
     * Gets all group names associated with the number provided
     * @param groups A mask of groups
     * @returns All groups contained in the mask
     */
    getGroupNames(groups) {
        if (groups === -1) {
            return [PhysicsManager.DEFAULT_GROUP];
        }
        else {
            let g = 1;
            let names = [];
            for (let i = 0; i < 32; i++) {
                if (g & groups) {
                    // This group is in the groups number
                    names.push(this.groupNames[i]);
                }
                // Shift the bit over
                g = g << 1;
            }
        }
    }
}
exports.default = PhysicsManager;
/** The default group name */
PhysicsManager.DEFAULT_GROUP = "Default";

},{"../DataTypes/Collections/Map":8,"../Events/Emitter":29,"../Events/Receiver":33}],68:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const GameEventType_1 = require("../Events/GameEventType");
const Receiver_1 = __importDefault(require("../Events/Receiver"));
class PlaybackManager {
    constructor() {
        this.recording = false;
        this.playing = false;
        this.receiver = new Receiver_1.default();
        this.receiver.subscribe([GameEventType_1.GameEventType.START_RECORDING, GameEventType_1.GameEventType.STOP_RECORDING, GameEventType_1.GameEventType.PLAY_RECORDING]);
    }
    update(deltaT) {
        while (this.receiver.hasNextEvent()) {
            this.handleEvent(this.receiver.getNextEvent());
        }
        if (this.recorder !== undefined) {
            this.recorder.update(deltaT);
            this.recording = this.recorder.active();
        }
        if (this.replayer !== undefined) {
            this.replayer.update(deltaT);
            this.playing = this.replayer.active();
        }
    }
    handleEvent(event) {
        switch (event.type) {
            case GameEventType_1.GameEventType.START_RECORDING: {
                this.handleStartRecordingEvent(event);
                break;
            }
            case GameEventType_1.GameEventType.STOP_RECORDING: {
                this.handleStopRecordingEvent();
                break;
            }
            case GameEventType_1.GameEventType.PLAY_RECORDING: {
                this.handlePlayRecordingEvent(event);
                break;
            }
        }
    }
    handleStartRecordingEvent(event) {
        let recording = event.data.get("recording");
        if (!this.playing && !this.recording && recording !== undefined) {
            this.lastRecording = recording;
            let Recorder = this.lastRecording.recorder();
            if (this.recorder === undefined || this.recorder.constructor !== Recorder) {
                this.recorder = new Recorder();
            }
            this.recorder.start(this.lastRecording);
            this.recording = this.recorder.active();
        }
    }
    handleStopRecordingEvent() {
        this.recorder.stop();
        this.recording = this.recorder.active();
    }
    handlePlayRecordingEvent(event) {
        if (!this.recording && this.lastRecording !== undefined) {
            let Replayer = this.lastRecording.replayer();
            if (this.replayer === undefined || this.replayer.constructor !== Replayer) {
                this.replayer = new Replayer();
            }
            this.replayer.start(this.lastRecording, event.data.get("onEnd"));
            this.playing = this.replayer.active();
        }
    }
}
exports.default = PlaybackManager;

},{"../Events/GameEventType":32,"../Events/Receiver":33}],69:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Map_1 = __importDefault(require("../../DataTypes/Collections/Map"));
/** */
class Registry extends Map_1.default {
}
exports.default = Registry;

},{"../../DataTypes/Collections/Map":8}],70:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const LabelShaderType_1 = __importDefault(require("../../Rendering/WebGLRendering/ShaderTypes/LabelShaderType"));
const PointShaderType_1 = __importDefault(require("../../Rendering/WebGLRendering/ShaderTypes/PointShaderType"));
const RectShaderType_1 = __importDefault(require("../../Rendering/WebGLRendering/ShaderTypes/RectShaderType"));
const SpriteShaderType_1 = __importDefault(require("../../Rendering/WebGLRendering/ShaderTypes/SpriteShaderType"));
const ResourceManager_1 = __importDefault(require("../../ResourceManager/ResourceManager"));
const Registry_1 = __importDefault(require("./Registry"));
/**
 * A registry that handles shaders
 */
class ShaderRegistry extends Registry_1.default {
    constructor() {
        super(...arguments);
        this.registryItems = new Array();
    }
    /**
     * Preloads all built-in shaders
     */
    preload() {
        // Get the resourceManager and queue all built-in shaders for preloading
        const rm = ResourceManager_1.default.getInstance();
        // Queue a load for the point shader
        this.registerAndPreloadItem(ShaderRegistry.POINT_SHADER, PointShaderType_1.default, "builtin/shaders/point.vshader", "builtin/shaders/point.fshader");
        // Queue a load for the rect shader
        this.registerAndPreloadItem(ShaderRegistry.RECT_SHADER, RectShaderType_1.default, "builtin/shaders/rect.vshader", "builtin/shaders/rect.fshader");
        // Queue a load for the sprite shader
        this.registerAndPreloadItem(ShaderRegistry.SPRITE_SHADER, SpriteShaderType_1.default, "builtin/shaders/sprite.vshader", "builtin/shaders/sprite.fshader");
        // Queue a load for the label shader
        this.registerAndPreloadItem(ShaderRegistry.LABEL_SHADER, LabelShaderType_1.default, "builtin/shaders/label.vshader", "builtin/shaders/label.fshader");
        // Queue a load for any preloaded items
        for (let item of this.registryItems) {
            const shader = new item.constr(item.key);
            shader.initBufferObject();
            this.add(item.key, shader);
            // Load if desired
            if (item.preload !== undefined) {
                rm.shader(item.key, item.preload.vshaderLocation, item.preload.fshaderLocation);
            }
        }
    }
    /**
     * Registers a shader in the registry and loads it before the game begins
     * @param key The key you wish to assign to the shader
     * @param constr The constructor of the ShaderType
     * @param vshaderLocation The location of the vertex shader
     * @param fshaderLocation the location of the fragment shader
     */
    registerAndPreloadItem(key, constr, vshaderLocation, fshaderLocation) {
        let shaderPreload = new ShaderPreload();
        shaderPreload.vshaderLocation = vshaderLocation;
        shaderPreload.fshaderLocation = fshaderLocation;
        let registryItem = new ShaderRegistryItem();
        registryItem.key = key;
        registryItem.constr = constr;
        registryItem.preload = shaderPreload;
        this.registryItems.push(registryItem);
    }
    /**
     * Registers a shader in the registry. NOTE: If you use this, you MUST load the shader before use.
     * If you wish to preload the shader, use registerAndPreloadItem()
     * @param key The key you wish to assign to the shader
     * @param constr The constructor of the ShaderType
     */
    registerItem(key, constr) {
        let registryItem = new ShaderRegistryItem();
        registryItem.key = key;
        registryItem.constr = constr;
        this.registryItems.push(registryItem);
    }
}
exports.default = ShaderRegistry;
// Shader names
ShaderRegistry.POINT_SHADER = "point";
ShaderRegistry.RECT_SHADER = "rect";
ShaderRegistry.SPRITE_SHADER = "sprite";
ShaderRegistry.LABEL_SHADER = "label";
class ShaderRegistryItem {
}
class ShaderPreload {
}

},{"../../Rendering/WebGLRendering/ShaderTypes/LabelShaderType":84,"../../Rendering/WebGLRendering/ShaderTypes/PointShaderType":85,"../../Rendering/WebGLRendering/ShaderTypes/RectShaderType":87,"../../Rendering/WebGLRendering/ShaderTypes/SpriteShaderType":88,"../../ResourceManager/ResourceManager":89,"./Registry":69}],71:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Map_1 = __importDefault(require("../DataTypes/Collections/Map"));
const ShaderRegistry_1 = __importDefault(require("./Registries/ShaderRegistry"));
/**
 * The Registry is the system's way of converting classes and types into string
 * representations for use elsewhere in the application.
 * It allows classes to be accessed without explicitly using constructors in code,
 * and for resources to be loaded at Game creation time.
 */
class RegistryManager {
    static preload() {
        this.shaders.preload();
        this.registries.forEach((key) => this.registries.get(key).preload());
    }
    static addCustomRegistry(name, registry) {
        this.registries.add(name, registry);
    }
    static getRegistry(key) {
        return this.registries.get(key);
    }
}
exports.default = RegistryManager;
RegistryManager.shaders = new ShaderRegistry_1.default();
/** Additional custom registries to add to the registry manager */
RegistryManager.registries = new Map_1.default();

},{"../DataTypes/Collections/Map":8,"./Registries/ShaderRegistry":70}],72:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Map_1 = __importDefault(require("../../DataTypes/Collections/Map"));
const Emitter_1 = __importDefault(require("../../Events/Emitter"));
const AnimationTypes_1 = require("./AnimationTypes");
/**
 * An animation manager class for an animated CanvasNode.
 * This class keeps track of the possible animations, as well as the current animation state,
 * and abstracts all interactions with playing, pausing, and stopping animations as well as
 * creating new animations from the CanvasNode.
 */
class AnimationManager {
    /**
     * Creates a new AnimationManager
     * @param owner The owner of the AnimationManager
     */
    constructor(owner) {
        this.owner = owner;
        this.animationState = AnimationTypes_1.AnimationState.STOPPED;
        this.currentAnimation = "";
        this.currentFrame = 0;
        this.frameProgress = 0;
        this.loop = false;
        this.animations = new Map_1.default();
        this.onEndEvent = null;
        this.emitter = new Emitter_1.default();
    }
    /**
     * Add an animation to this sprite
     * @param key The unique key of the animation
     * @param animation The animation data
     */
    add(key, animation) {
        this.animations.add(key, animation);
    }
    /**
     * Gets the index specified by the current animation and current frame
     * @returns The index in the current animation
     */
    getIndex() {
        if (this.animations.has(this.currentAnimation)) {
            return this.animations.get(this.currentAnimation).frames[this.currentFrame].index;
        }
        else {
            // No current animation, warn the user
            console.warn(`Animation index was requested, but the current animation: ${this.currentAnimation} was invalid`);
            return 0;
        }
    }
    /**
     * Determines whether the specified animation is currently playing
     * @param key The key of the animation to check
     * @returns true if the specified animation is playing, false otherwise
     */
    isPlaying(key) {
        return this.currentAnimation === key && this.animationState === AnimationTypes_1.AnimationState.PLAYING;
    }
    /**
     * Retrieves the current animation index and advances the animation frame
     * @returns The index of the animation frame
     */
    getIndexAndAdvanceAnimation() {
        // If we aren't playing, we won't be advancing the animation
        if (!(this.animationState === AnimationTypes_1.AnimationState.PLAYING)) {
            return this.getIndex();
        }
        if (this.animations.has(this.currentAnimation)) {
            let currentAnimation = this.animations.get(this.currentAnimation);
            let index = currentAnimation.frames[this.currentFrame].index;
            // Advance the animation
            this.frameProgress += 1;
            if (this.frameProgress >= currentAnimation.frames[this.currentFrame].duration) {
                // We have been on this frame for its whole duration, go to the next one
                this.frameProgress = 0;
                this.currentFrame += 1;
                if (this.currentFrame >= currentAnimation.frames.length) {
                    // We have reached the end of this animation
                    if (this.loop) {
                        this.currentFrame = 0;
                        this.frameProgress = 0;
                    }
                    else {
                        this.endCurrentAnimation();
                    }
                }
            }
            // Return the current index
            return index;
        }
        else {
            // No current animation, can't advance. Warn the user
            console.warn(`Animation index and advance was requested, but the current animation (${this.currentAnimation}) in node with id: ${this.owner.id} was invalid`);
            return 0;
        }
    }
    /** Ends the current animation and fires any necessary events, as well as starting any new animations */
    endCurrentAnimation() {
        this.currentFrame = 0;
        this.animationState = AnimationTypes_1.AnimationState.STOPPED;
        if (this.onEndEvent !== null) {
            this.emitter.fireEvent(this.onEndEvent, { owner: this.owner.id, animation: this.currentAnimation });
        }
        // If there is a pending animation, play it
        if (this.pendingAnimation !== null) {
            this.play(this.pendingAnimation, this.pendingLoop, this.pendingOnEnd);
        }
    }
    /**
     * Plays the specified animation. Does not restart it if it is already playing
     * @param animation The name of the animation to play
     * @param loop Whether or not to loop the animation. False by default
     * @param onEnd The name of an event to send when this animation naturally stops playing. This only matters if loop is false.
     */
    playIfNotAlready(animation, loop, onEnd) {
        if (this.currentAnimation !== animation) {
            this.play(animation, loop, onEnd);
        }
    }
    /**
     * Plays the specified animation
     * @param animation The name of the animation to play
     * @param loop Whether or not to loop the animation. False by default
     * @param onEnd The name of an event to send when this animation naturally stops playing. This only matters if loop is false.
     */
    play(animation, loop, onEnd) {
        this.currentAnimation = animation;
        this.currentFrame = 0;
        this.frameProgress = 0;
        this.animationState = AnimationTypes_1.AnimationState.PLAYING;
        // If loop arg was provided, use that
        if (loop !== undefined) {
            this.loop = loop;
        }
        else {
            // Otherwise, use what the json file specified
            this.loop = this.animations.get(animation).repeat;
        }
        if (onEnd !== undefined) {
            this.onEndEvent = onEnd;
        }
        else {
            this.onEndEvent = null;
        }
        // Reset pending animation
        this.pendingAnimation = null;
    }
    /**
     * Queues a single animation to be played after the current one. Does NOT stack.
     * Queueing additional animations past 1 will just replace the queued animation
     * @param animation The animation to queue
     * @param loop Whether or not the loop the queued animation
     * @param onEnd The event to fire when the queued animation ends
     */
    queue(animation, loop = false, onEnd) {
        this.pendingAnimation = animation;
        this.pendingLoop = loop;
        if (onEnd !== undefined) {
            this.pendingOnEnd = onEnd;
        }
        else {
            this.pendingOnEnd = null;
        }
    }
    /** Pauses the current animation */
    pause() {
        this.animationState = AnimationTypes_1.AnimationState.PAUSED;
    }
    /** Resumes the current animation if possible */
    resume() {
        if (this.animationState === AnimationTypes_1.AnimationState.PAUSED) {
            this.animationState = AnimationTypes_1.AnimationState.PLAYING;
        }
    }
    /** Stops the current animation. The animation cannot be resumed after this. */
    stop() {
        this.animationState = AnimationTypes_1.AnimationState.STOPPED;
    }
}
exports.default = AnimationManager;

},{"../../DataTypes/Collections/Map":8,"../../Events/Emitter":29,"./AnimationTypes":73}],73:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TweenData = exports.TweenEffect = exports.AnimationData = exports.AnimationState = void 0;
// @ignorePage
var AnimationState;
(function (AnimationState) {
    AnimationState[AnimationState["STOPPED"] = 0] = "STOPPED";
    AnimationState[AnimationState["PAUSED"] = 1] = "PAUSED";
    AnimationState[AnimationState["PLAYING"] = 2] = "PLAYING";
})(AnimationState = exports.AnimationState || (exports.AnimationState = {}));
class AnimationData {
    constructor() {
        this.repeat = false;
    }
}
exports.AnimationData = AnimationData;
class TweenEffect {
}
exports.TweenEffect = TweenEffect;
class TweenData {
}
exports.TweenData = TweenData;

},{}],74:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class ParticleSystemManager {
    constructor() {
        this.particleSystems = new Array();
    }
    static getInstance() {
        if (ParticleSystemManager.instance === null) {
            ParticleSystemManager.instance = new ParticleSystemManager();
        }
        return ParticleSystemManager.instance;
    }
    registerParticleSystem(system) {
        this.particleSystems.push(system);
    }
    deregisterParticleSystem(system) {
        let index = this.particleSystems.indexOf(system);
        this.particleSystems.splice(index, 1);
    }
    clearParticleSystems() {
        this.particleSystems = new Array();
    }
    update(deltaT) {
        for (let particleSystem of this.particleSystems) {
            particleSystem.update(deltaT);
        }
    }
}
exports.default = ParticleSystemManager;
ParticleSystemManager.instance = null;

},{}],75:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Map_1 = __importDefault(require("../../DataTypes/Collections/Map"));
const AnimationTypes_1 = require("./AnimationTypes");
const EaseFunctions_1 = __importDefault(require("../../Utils/EaseFunctions"));
const MathUtils_1 = __importDefault(require("../../Utils/MathUtils"));
const TweenManager_1 = __importDefault(require("./TweenManager"));
const Emitter_1 = __importDefault(require("../../Events/Emitter"));
/**
 * A manager for the tweens of a GameNode.
 * Tweens are short animations played by interpolating between two properties using an easing function.
 * For a good visual representation of easing functions, check out @link(https://easings.net/)(https://easings.net/).
 * Multiple tween can be played at the same time, as long as they don't change the same property.
 * This allows for some interesting polishes or animations that may be very difficult to do with sprite work alone
 * - especially pixel art (such as rotations or scaling).
 */
class TweenController {
    /**
     * Creates a new TweenController
     * @param owner The owner of the TweenController
     */
    constructor(owner) {
        this.owner = owner;
        this.tweens = new Map_1.default();
        this.emitter = new Emitter_1.default();
        // Give ourselves to the TweenManager
        TweenManager_1.default.getInstance().registerTweenController(this);
    }
    /**
     * Destroys this TweenController
     */
    destroy() {
        // Only the gamenode and the tween manager should have a reference to this
        delete this.owner.tweens;
        TweenManager_1.default.getInstance().deregisterTweenController(this);
    }
    /**
     * Add a tween to this game node
     * @param key The name of the tween
     * @param tween The data of the tween
     */
    add(key, tween) {
        let typedTween = tween;
        // Initialize members that we need (and the user didn't provide)
        typedTween.progress = 0;
        typedTween.elapsedTime = 0;
        typedTween.animationState = AnimationTypes_1.AnimationState.STOPPED;
        this.tweens.add(key, typedTween);
    }
    /**
     * Play a tween with a certain name
     * @param key The name of the tween to play
     * @param loop Whether or not the tween should loop
     */
    play(key, loop) {
        if (this.tweens.has(key)) {
            let tween = this.tweens.get(key);
            // Set loop if needed
            if (loop !== undefined) {
                tween.loop = loop;
            }
            // Set the initial values
            for (let effect of tween.effects) {
                if (effect.resetOnComplete) {
                    effect.initialValue = this.owner[effect.property];
                }
            }
            // Start the tween running
            tween.animationState = AnimationTypes_1.AnimationState.PLAYING;
            tween.elapsedTime = 0;
            tween.progress = 0;
            tween.reversing = false;
        }
        else {
            console.warn(`Tried to play tween "${key}" on node with id ${this.owner.id}, but no such tween exists`);
        }
    }
    /**
     * Pauses a playing tween. Does not affect tweens that are stopped.
     * @param key The name of the tween to pause.
     */
    pause(key) {
        if (this.tweens.has(key)) {
            this.tweens.get(key).animationState = AnimationTypes_1.AnimationState.PAUSED;
        }
    }
    /**
     * Resumes a paused tween.
     * @param key The name of the tween to resume
     */
    resume(key) {
        if (this.tweens.has(key)) {
            let tween = this.tweens.get(key);
            if (tween.animationState === AnimationTypes_1.AnimationState.PAUSED)
                tween.animationState = AnimationTypes_1.AnimationState.PLAYING;
        }
    }
    /**
     * Stops a currently playing tween
     * @param key The key of the tween
     */
    stop(key) {
        if (this.tweens.has(key)) {
            let tween = this.tweens.get(key);
            tween.animationState = AnimationTypes_1.AnimationState.STOPPED;
            // Return to the initial values
            for (let effect of tween.effects) {
                if (effect.resetOnComplete) {
                    this.owner[effect.property] = effect.initialValue;
                }
            }
        }
    }
    /**
     * The natural stop of a currently playing tween
     * @param key The key of the tween
     */
    end(key) {
        this.stop(key);
        if (this.tweens.has(key)) {
            // Get the tween
            let tween = this.tweens.get(key);
            // If it has an onEnd, send an event
            if (tween.onEnd) {
                let data = { key: key, node: this.owner.id };
                // If it has onEnd event data, add each entry, as long as the key is not named 'key' or 'node'
                if (tween.onEndData) {
                    Object.keys(tween.onEndData).forEach(key => {
                        if (key !== "key" && key !== "node") {
                            data[key] = tween.onEndData[key];
                        }
                    });
                }
                this.emitter.fireEvent(tween.onEnd, data);
            }
        }
    }
    /**
     * Stops all currently playing tweens
     */
    stopAll() {
        this.tweens.forEach(key => this.stop(key));
    }
    update(deltaT) {
        this.tweens.forEach(key => {
            let tween = this.tweens.get(key);
            if (tween.animationState === AnimationTypes_1.AnimationState.PLAYING) {
                // Update the progress of the tween
                tween.elapsedTime += deltaT * 1000;
                // If we're past the startDelay, do the tween
                if (tween.elapsedTime >= tween.startDelay) {
                    if (!tween.reversing && tween.elapsedTime >= tween.startDelay + tween.duration) {
                        // If we're over time, stop the tween, loop, or reverse
                        if (tween.reverseOnComplete) {
                            // If we're over time and can reverse, do so
                            tween.reversing = true;
                        }
                        else if (tween.loop) {
                            // If we can't reverse and can loop, do so
                            tween.elapsedTime -= tween.duration;
                        }
                        else {
                            // We aren't looping and can't reverse, so stop
                            this.end(key);
                        }
                    }
                    // Check for the end of reversing
                    if (tween.reversing && tween.elapsedTime >= tween.startDelay + 2 * tween.duration) {
                        if (tween.loop) {
                            tween.reversing = false;
                            tween.elapsedTime -= 2 * tween.duration;
                        }
                        else {
                            this.end(key);
                        }
                    }
                    // Update the progress, make sure it is between 0 and 1. Errors from this should never be large
                    if (tween.reversing) {
                        tween.progress = MathUtils_1.default.clamp01((2 * tween.duration - (tween.elapsedTime - tween.startDelay)) / tween.duration);
                    }
                    else {
                        tween.progress = MathUtils_1.default.clamp01((tween.elapsedTime - tween.startDelay) / tween.duration);
                    }
                    for (let effect of tween.effects) {
                        // Get the value from the ease function that corresponds to our progress
                        let ease = EaseFunctions_1.default[effect.ease](tween.progress);
                        // Use the value to lerp the property
                        let value = MathUtils_1.default.lerp(effect.start, effect.end, ease);
                        // Assign the value of the property
                        this.owner[effect.property] = value;
                    }
                }
            }
        });
    }
}
exports.default = TweenController;

},{"../../DataTypes/Collections/Map":8,"../../Events/Emitter":29,"../../Utils/EaseFunctions":106,"../../Utils/MathUtils":108,"./AnimationTypes":73,"./TweenManager":76}],76:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class TweenManager {
    constructor() {
        this.tweenControllers = new Array();
    }
    static getInstance() {
        if (TweenManager.instance === null) {
            TweenManager.instance = new TweenManager();
        }
        return TweenManager.instance;
    }
    registerTweenController(controller) {
        this.tweenControllers.push(controller);
    }
    deregisterTweenController(controller) {
        let index = this.tweenControllers.indexOf(controller);
        this.tweenControllers.splice(index, 1);
    }
    clearTweenControllers() {
        this.tweenControllers = new Array();
    }
    update(deltaT) {
        for (let tweenController of this.tweenControllers) {
            tweenController.update(deltaT);
        }
    }
}
exports.default = TweenManager;
TweenManager.instance = null;

},{}],77:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Graphic_1 = __importDefault(require("../Nodes/Graphic"));
const Point_1 = __importDefault(require("../Nodes/Graphics/Point"));
const Rect_1 = __importDefault(require("../Nodes/Graphics/Rect"));
const Sprite_1 = __importDefault(require("../Nodes/Sprites/Sprite"));
const UIElement_1 = __importDefault(require("../Nodes/UIElement"));
const GraphicRenderer_1 = __importDefault(require("./CanvasRendering/GraphicRenderer"));
const RenderingManager_1 = __importDefault(require("./RenderingManager"));
const TilemapRenderer_1 = __importDefault(require("./CanvasRendering/TilemapRenderer"));
const UIElementRenderer_1 = __importDefault(require("./CanvasRendering/UIElementRenderer"));
const Label_1 = __importDefault(require("../Nodes/UIElements/Label"));
const Button_1 = __importDefault(require("../Nodes/UIElements/Button"));
const Slider_1 = __importDefault(require("../Nodes/UIElements/Slider"));
const TextInput_1 = __importDefault(require("../Nodes/UIElements/TextInput"));
const AnimatedSprite_1 = __importDefault(require("../Nodes/Sprites/AnimatedSprite"));
const Vec2_1 = __importDefault(require("../DataTypes/Vec2"));
const Line_1 = __importDefault(require("../Nodes/Graphics/Line"));
const Debug_1 = __importDefault(require("../Debug/Debug"));
/**
 * An implementation of the RenderingManager class using CanvasRenderingContext2D.
 */
class CanvasRenderer extends RenderingManager_1.default {
    constructor() {
        super();
    }
    // @override
    setScene(scene) {
        this.scene = scene;
        this.graphicRenderer.setScene(scene);
        this.tilemapRenderer.setScene(scene);
        this.uiElementRenderer.setScene(scene);
    }
    // @override
    initializeCanvas(canvas, width, height) {
        canvas.width = width;
        canvas.height = height;
        this.worldSize = new Vec2_1.default(width, height);
        this.ctx = canvas.getContext("2d");
        this.graphicRenderer = new GraphicRenderer_1.default(this.ctx);
        this.tilemapRenderer = new TilemapRenderer_1.default(this.ctx);
        this.uiElementRenderer = new UIElementRenderer_1.default(this.ctx);
        // For crisp pixel art
        this.ctx.imageSmoothingEnabled = false;
        return this.ctx;
    }
    // @override
    render(visibleSet, tilemaps, uiLayers) {
        // Sort by depth, then by visible set by y-value
        visibleSet.sort((a, b) => {
            if (a.getLayer().getDepth() === b.getLayer().getDepth()) {
                return (a.boundary.bottom) - (b.boundary.bottom);
            }
            else {
                return a.getLayer().getDepth() - b.getLayer().getDepth();
            }
        });
        let tilemapIndex = 0;
        let tilemapLength = tilemaps.length;
        let visibleSetIndex = 0;
        let visibleSetLength = visibleSet.length;
        while (tilemapIndex < tilemapLength || visibleSetIndex < visibleSetLength) {
            // Check conditions where we've already reached the edge of one list
            if (tilemapIndex >= tilemapLength) {
                // Only render the remaining visible set
                let node = visibleSet[visibleSetIndex++];
                if (node.visible) {
                    this.renderNode(node);
                }
                continue;
            }
            if (visibleSetIndex >= visibleSetLength) {
                // Only render tilemaps
                this.renderTilemap(tilemaps[tilemapIndex++]);
                continue;
            }
            // Render whichever is further down
            if (tilemaps[tilemapIndex].getLayer().getDepth() <= visibleSet[visibleSetIndex].getLayer().getDepth()) {
                this.renderTilemap(tilemaps[tilemapIndex++]);
            }
            else {
                let node = visibleSet[visibleSetIndex++];
                if (node.visible) {
                    this.renderNode(node);
                }
            }
        }
        // Render the uiLayers on top of everything else
        let sortedUILayers = new Array();
        uiLayers.forEach(key => sortedUILayers.push(uiLayers.get(key)));
        sortedUILayers = sortedUILayers.sort((ui1, ui2) => ui1.getDepth() - ui2.getDepth());
        sortedUILayers.forEach(uiLayer => {
            if (!uiLayer.isHidden())
                uiLayer.getItems().forEach(node => {
                    if (node.visible) {
                        this.renderNode(node);
                    }
                });
        });
    }
    /**
     * Renders a specified CanvasNode
     * @param node The CanvasNode to render
     */
    renderNode(node) {
        // Calculate the origin of the viewport according to this sprite
        this.origin = this.scene.getViewTranslation(node);
        // Get the zoom level of the scene
        this.zoom = this.scene.getViewScale();
        // Move the canvas to the position of the node and rotate
        let xScale = 1;
        let yScale = 1;
        if (node instanceof Sprite_1.default) {
            xScale = node.invertX ? -1 : 1;
            yScale = node.invertY ? -1 : 1;
        }
        this.ctx.setTransform(xScale, 0, 0, yScale, (node.position.x - this.origin.x) * this.zoom, (node.position.y - this.origin.y) * this.zoom);
        this.ctx.rotate(-node.rotation);
        let globalAlpha = this.ctx.globalAlpha;
        if (node instanceof Rect_1.default) {
            Debug_1.default.log("node" + node.id, "Node" + node.id + " Alpha: " + node.alpha);
        }
        this.ctx.globalAlpha = node.alpha;
        if (node instanceof AnimatedSprite_1.default) {
            this.renderAnimatedSprite(node);
        }
        else if (node instanceof Sprite_1.default) {
            this.renderSprite(node);
        }
        else if (node instanceof Graphic_1.default) {
            this.renderGraphic(node);
        }
        else if (node instanceof UIElement_1.default) {
            this.renderUIElement(node);
        }
        this.ctx.globalAlpha = globalAlpha;
        this.ctx.setTransform(1, 0, 0, 1, 0, 0);
    }
    // @override
    renderSprite(sprite) {
        // Get the image from the resource manager
        let image = this.resourceManager.getImage(sprite.imageId);
        /*
            Coordinates in the space of the image:
                image crop start -> x, y
                image crop size  -> w, h
            Coordinates in the space of the world
                image draw start -> x, y
                image draw size  -> w, h
        */
        this.ctx.drawImage(image, sprite.imageOffset.x, sprite.imageOffset.y, sprite.size.x, sprite.size.y, (-sprite.size.x * sprite.scale.x / 2) * this.zoom, (-sprite.size.y * sprite.scale.y / 2) * this.zoom, sprite.size.x * sprite.scale.x * this.zoom, sprite.size.y * sprite.scale.y * this.zoom);
    }
    // @override
    renderAnimatedSprite(sprite) {
        // Get the image from the resource manager
        let image = this.resourceManager.getImage(sprite.imageId);
        let animationIndex = sprite.animation.getIndexAndAdvanceAnimation();
        let animationOffset = sprite.getAnimationOffset(animationIndex);
        /*
            Coordinates in the space of the image:
                image crop start -> x, y
                image crop size  -> w, h
            Coordinates in the space of the world (given we moved)
                image draw start -> -w/2, -h/2
                image draw size  -> w, h
        */
        this.ctx.drawImage(image, sprite.imageOffset.x + animationOffset.x, sprite.imageOffset.y + animationOffset.y, sprite.size.x, sprite.size.y, (-sprite.size.x * sprite.scale.x / 2) * this.zoom, (-sprite.size.y * sprite.scale.y / 2) * this.zoom, sprite.size.x * sprite.scale.x * this.zoom, sprite.size.y * sprite.scale.y * this.zoom);
    }
    // @override
    renderGraphic(graphic) {
        if (graphic instanceof Point_1.default) {
            this.graphicRenderer.renderPoint(graphic, this.zoom);
        }
        else if (graphic instanceof Line_1.default) {
            this.graphicRenderer.renderLine(graphic, this.origin, this.zoom);
        }
        else if (graphic instanceof Rect_1.default) {
            this.graphicRenderer.renderRect(graphic, this.zoom);
        }
    }
    // @override
    renderTilemap(tilemap) {
        this.tilemapRenderer.renderTilemap(tilemap);
    }
    // @override
    renderUIElement(uiElement) {
        if (uiElement instanceof Label_1.default) {
            this.uiElementRenderer.renderLabel(uiElement);
        }
        else if (uiElement instanceof Button_1.default) {
            this.uiElementRenderer.renderButton(uiElement);
        }
        else if (uiElement instanceof Slider_1.default) {
            this.uiElementRenderer.renderSlider(uiElement);
        }
        else if (uiElement instanceof TextInput_1.default) {
            this.uiElementRenderer.renderTextInput(uiElement);
        }
    }
    clear(clearColor) {
        this.ctx.clearRect(0, 0, this.worldSize.x, this.worldSize.y);
        this.ctx.fillStyle = clearColor.toString();
        this.ctx.fillRect(0, 0, this.worldSize.x, this.worldSize.y);
    }
}
exports.default = CanvasRenderer;

},{"../DataTypes/Vec2":26,"../Debug/Debug":27,"../Nodes/Graphic":43,"../Nodes/Graphics/Line":45,"../Nodes/Graphics/Point":47,"../Nodes/Graphics/Rect":48,"../Nodes/Sprites/AnimatedSprite":49,"../Nodes/Sprites/Sprite":50,"../Nodes/UIElement":55,"../Nodes/UIElements/Button":56,"../Nodes/UIElements/Label":57,"../Nodes/UIElements/Slider":58,"../Nodes/UIElements/TextInput":59,"./CanvasRendering/GraphicRenderer":78,"./CanvasRendering/TilemapRenderer":79,"./CanvasRendering/UIElementRenderer":80,"./RenderingManager":81}],78:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const ResourceManager_1 = __importDefault(require("../../ResourceManager/ResourceManager"));
/**
 * A utility class to help the @reference[CanvasRenderer] render @reference[Graphic]s
 */
class GraphicRenderer {
    constructor(ctx) {
        this.resourceManager = ResourceManager_1.default.getInstance();
        this.ctx = ctx;
    }
    /**
     * Sets the scene of this GraphicRenderer
     * @param scene The current scene
     */
    setScene(scene) {
        this.scene = scene;
    }
    /**
     * Renders a point
     * @param point The point to render
     * @param zoom The zoom level
     */
    renderPoint(point, zoom) {
        this.ctx.fillStyle = point.color.toStringRGBA();
        this.ctx.fillRect((-point.size.x / 2) * zoom, (-point.size.y / 2) * zoom, point.size.x * zoom, point.size.y * zoom);
    }
    renderLine(line, origin, zoom) {
        this.ctx.strokeStyle = line.color.toStringRGBA();
        this.ctx.lineWidth = line.thickness;
        this.ctx.beginPath();
        this.ctx.moveTo(0, 0);
        this.ctx.lineTo((line.end.x - line.start.x) * zoom, (line.end.y - line.start.y) * zoom);
        this.ctx.closePath();
        this.ctx.stroke();
    }
    /**
     * Renders a rect
     * @param rect The rect to render
     * @param zoom The zoom level
     */
    renderRect(rect, zoom) {
        // Draw the interior of the rect
        if (rect.color.a !== 0) {
            this.ctx.fillStyle = rect.color.toStringRGB();
            this.ctx.fillRect((-rect.size.x / 2) * zoom, (-rect.size.y / 2) * zoom, rect.size.x * zoom, rect.size.y * zoom);
        }
        // Draw the border of the rect if it isn't transparent
        if (rect.borderColor.a !== 0) {
            this.ctx.strokeStyle = rect.getBorderColor().toStringRGB();
            this.ctx.lineWidth = rect.getBorderWidth();
            this.ctx.strokeRect((-rect.size.x / 2) * zoom, (-rect.size.y / 2) * zoom, rect.size.x * zoom, rect.size.y * zoom);
        }
    }
}
exports.default = GraphicRenderer;

},{"../../ResourceManager/ResourceManager":89}],79:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const ResourceManager_1 = __importDefault(require("../../ResourceManager/ResourceManager"));
const Vec2_1 = __importDefault(require("../../DataTypes/Vec2"));
/**
 * A utility class for the @reference[CanvasRenderer] to render @reference[Tilemap]s
 */
class TilemapRenderer {
    constructor(ctx) {
        this.resourceManager = ResourceManager_1.default.getInstance();
        this.ctx = ctx;
    }
    /**
     * Sets the scene of this TilemapRenderer
     * @param scene The current scene
     */
    setScene(scene) {
        this.scene = scene;
    }
    /**
     * Renders an orthogonal tilemap
     * @param tilemap The tilemap to render
     */
    renderTilemap(tilemap) {
        let previousAlpha = this.ctx.globalAlpha;
        this.ctx.globalAlpha = tilemap.getLayer().getAlpha();
        let origin = this.scene.getViewTranslation(tilemap);
        let size = this.scene.getViewport().getHalfSize();
        let zoom = this.scene.getViewScale();
        let bottomRight = origin.clone().add(size.scaled(2 * zoom));
        if (tilemap.visible) {
            let minColRow = tilemap.getMinColRow(this.scene.getViewport().getView());
            let maxColRow = tilemap.getMaxColRow(this.scene.getViewport().getView());
            for (let row = minColRow.y; row <= maxColRow.y; row++) {
                for (let col = minColRow.x; col <= maxColRow.x; col++) {
                    // Get the tile at this position
                    let tile = tilemap.getTile(col, row);
                    // Extract the rot/flip parameters if there are any
                    const mask = (0xE << 28);
                    const rotFlip = ((mask & tile) >> 28) & 0xF;
                    tile = tile & ~mask;
                    // Find the tileset that owns this tile index and render
                    for (let tileset of tilemap.getTilesets()) {
                        if (tileset.hasTile(tile)) {
                            this.renderTile(tilemap, tileset, tile, col, row, origin, tilemap.scale, zoom, rotFlip);
                        }
                    }
                }
            }
        }
        this.ctx.globalAlpha = previousAlpha;
    }
    /**
     * Renders a tile
     * @param tileset The tileset this tile belongs to
     * @param tileIndex The index of the tile
     * @param tilemapRow The row of the tile in the tilemap
     * @param tilemapCol The column of the tile in the tilemap
     * @param origin The origin of the viewport
     * @param scale The scale of the tilemap
     * @param zoom The zoom level of the viewport
     */
    renderTile(tilemap, tileset, tileIndex, tilemapCol, tilemapRow, origin, scale, zoom, rotFlip) {
        let image = this.resourceManager.getImage(tileset.getImageKey());
        // Get the size of the tile to render
        let tileSize = tileset.getTileSize();
        let width = tileSize.x;
        let height = tileSize.y;
        // Calculate the position to start a crop in the tileset image
        let imagePosition = tileset.getImageOffsetForTile(tileIndex);
        let left = imagePosition.x;
        let top = imagePosition.y;
        // Calculate the position in the world to render the tile
        let worldPosition = tilemap.getWorldPosition(tilemapCol, tilemapRow);
        let worldX = Math.floor((worldPosition.x - origin.x) * zoom);
        let worldY = Math.floor((worldPosition.y - origin.y) * zoom);
        // Calculate the size of the world to render the tile in
        let worldWidth = Math.ceil(width * scale.x * zoom);
        let worldHeight = Math.ceil(height * scale.y * zoom);
        if (rotFlip !== 0) {
            let scaleX = 1;
            let scaleY = 1;
            let shearX = 0;
            let shearY = 0;
            // Flip on the x-axis
            if (rotFlip & 8) {
                scaleX = -1;
            }
            // Flip on the y-axis
            if (rotFlip & 4) {
                scaleY = -1;
            }
            // Flip over the line y=x
            if (rotFlip & 2) {
                shearX = scaleY;
                shearY = scaleX;
                scaleX = 0;
                scaleY = 0;
            }
            this.ctx.setTransform(scaleX, shearX, shearY, scaleY, worldX + worldWidth / 2, worldY + worldHeight / 2);
            // Render the tile
            this.ctx.drawImage(image, left, top, width, height, -worldWidth / 2, -worldHeight / 2, worldWidth, worldHeight);
            if (rotFlip !== 0) {
                this.ctx.setTransform(1, 0, 0, 1, 0, 0);
            }
        }
        else {
            // No rotations, don't do the calculations, just render the tile
            // Render the tile
            this.ctx.drawImage(image, left, top, width, height, worldX, worldY, worldWidth, worldHeight);
        }
    }
    getOrthogonalTileDrawPos(map, set, col, row) {
        let imgsize = set.getTileSize().mult(map.scale);
        let mapsize = map.getScaledTileSize();
        return map.getWorldPosition(col, row).sub(imgsize.sub(mapsize));
    }
    getIsometricTileDrawPos(map, set, col, row) {
        let size = set.getTileSize();
        let drawPos = map.getScaledTileSize().sub(new Vec2_1.default(size.x * map.scale.x, size.y * map.scale.y));
        drawPos.inc(-size.x * map.scale.x / 2, 0);
        drawPos.add(map.getWorldPosition(col, row));
        return drawPos;
    }
}
exports.default = TilemapRenderer;

},{"../../DataTypes/Vec2":26,"../../ResourceManager/ResourceManager":89}],80:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Vec2_1 = __importDefault(require("../../DataTypes/Vec2"));
const ResourceManager_1 = __importDefault(require("../../ResourceManager/ResourceManager"));
const MathUtils_1 = __importDefault(require("../../Utils/MathUtils"));
/**
 * A utility class to help the @reference[CanvasRenderer] render @reference[UIElement]s
 */
class UIElementRenderer {
    constructor(ctx) {
        this.resourceManager = ResourceManager_1.default.getInstance();
        this.ctx = ctx;
    }
    /**
     * Sets the scene of this UIElementRenderer
     * @param scene The current scene
     */
    setScene(scene) {
        this.scene = scene;
    }
    /**
     * Renders a label
     * @param label The label to render
     */
    renderLabel(label) {
        // If the size is unassigned (by the user or automatically) assign it
        label.handleInitialSizing(this.ctx);
        // Grab the global alpha so we can adjust it for this render
        let previousAlpha = this.ctx.globalAlpha;
        // Get the font and text position in label
        this.ctx.font = label.getFontString();
        let offset = label.calculateTextOffset(this.ctx);
        // Stroke and fill a rounded rect and give it text
        this.ctx.globalAlpha = label.backgroundColor.a;
        this.ctx.fillStyle = label.calculateBackgroundColor().toStringRGBA();
        this.ctx.fillRoundedRect(-label.size.x / 2, -label.size.y / 2, label.size.x, label.size.y, label.borderRadius);
        this.ctx.strokeStyle = label.calculateBorderColor().toStringRGBA();
        this.ctx.globalAlpha = label.borderColor.a;
        this.ctx.lineWidth = label.borderWidth;
        this.ctx.strokeRoundedRect(-label.size.x / 2, -label.size.y / 2, label.size.x, label.size.y, label.borderRadius);
        this.ctx.fillStyle = label.calculateTextColor();
        this.ctx.globalAlpha = label.textColor.a;
        this.ctx.fillText(label.text, offset.x - label.size.x / 2, offset.y - label.size.y / 2);
        this.ctx.globalAlpha = previousAlpha;
    }
    /**
     * Renders a button
     * @param button The button to render
     */
    renderButton(button) {
        this.renderLabel(button);
    }
    /**
     * Renders a slider
     * @param slider The slider to render
     */
    renderSlider(slider) {
        // Grab the global alpha so we can adjust it for this render
        let previousAlpha = this.ctx.globalAlpha;
        this.ctx.globalAlpha = slider.getLayer().getAlpha();
        // Calcualate the slider size
        let sliderSize = new Vec2_1.default(slider.size.x, 2);
        // Draw the slider
        this.ctx.fillStyle = slider.sliderColor.toString();
        this.ctx.fillRoundedRect(-sliderSize.x / 2, -sliderSize.y / 2, sliderSize.x, sliderSize.y, slider.borderRadius);
        // Calculate the nib size and position
        let x = MathUtils_1.default.lerp(-slider.size.x / 2, slider.size.x / 2, slider.getValue());
        // Draw the nib
        this.ctx.fillStyle = slider.nibColor.toString();
        this.ctx.fillRoundedRect(x - slider.nibSize.x / 2, -slider.nibSize.y / 2, slider.nibSize.x, slider.nibSize.y, slider.borderRadius);
        // Reset the alpha
        this.ctx.globalAlpha = previousAlpha;
    }
    /**
     * Renders a textInput
     * @param textInput The textInput to render
     */
    renderTextInput(textInput) {
        // Show a cursor sometimes
        if (textInput.focused && textInput.cursorCounter % 60 > 30) {
            textInput.text += "|";
        }
        this.renderLabel(textInput);
        if (textInput.focused) {
            if (textInput.cursorCounter % 60 > 30) {
                textInput.text = textInput.text.substring(0, textInput.text.length - 1);
            }
            textInput.cursorCounter += 1;
            if (textInput.cursorCounter >= 60) {
                textInput.cursorCounter = 0;
            }
        }
    }
}
exports.default = UIElementRenderer;

},{"../../DataTypes/Vec2":26,"../../ResourceManager/ResourceManager":89,"../../Utils/MathUtils":108}],81:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const ResourceManager_1 = __importDefault(require("../ResourceManager/ResourceManager"));
/**
 * An abstract framework to put all rendering in once place in the application
 */
class RenderingManager {
    constructor() {
        this.resourceManager = ResourceManager_1.default.getInstance();
    }
    /**
     * Sets the scene currently being rendered
     * @param scene The current Scene
     */
    setScene(scene) {
        this.scene = scene;
    }
}
exports.default = RenderingManager;

},{"../ResourceManager/ResourceManager":89}],82:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Vec2_1 = __importDefault(require("../DataTypes/Vec2"));
const Graphic_1 = __importDefault(require("../Nodes/Graphic"));
const Point_1 = __importDefault(require("../Nodes/Graphics/Point"));
const Rect_1 = __importDefault(require("../Nodes/Graphics/Rect"));
const AnimatedSprite_1 = __importDefault(require("../Nodes/Sprites/AnimatedSprite"));
const Sprite_1 = __importDefault(require("../Nodes/Sprites/Sprite"));
const UIElement_1 = __importDefault(require("../Nodes/UIElement"));
const Label_1 = __importDefault(require("../Nodes/UIElements/Label"));
const ShaderRegistry_1 = __importDefault(require("../Registry/Registries/ShaderRegistry"));
const RegistryManager_1 = __importDefault(require("../Registry/RegistryManager"));
const ResourceManager_1 = __importDefault(require("../ResourceManager/ResourceManager"));
const ParallaxLayer_1 = __importDefault(require("../Scene/Layers/ParallaxLayer"));
const RenderingManager_1 = __importDefault(require("./RenderingManager"));
class WebGLRenderer extends RenderingManager_1.default {
    initializeCanvas(canvas, width, height) {
        canvas.width = width;
        canvas.height = height;
        this.worldSize = Vec2_1.default.ZERO;
        this.worldSize.x = width;
        this.worldSize.y = height;
        // Get the WebGL context
        this.gl = canvas.getContext("webgl");
        this.gl.viewport(0, 0, canvas.width, canvas.height);
        this.gl.disable(this.gl.DEPTH_TEST);
        this.gl.enable(this.gl.BLEND);
        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);
        this.gl.enable(this.gl.CULL_FACE);
        // Tell the resource manager we're using WebGL
        ResourceManager_1.default.getInstance().useWebGL(true, this.gl);
        // Show the text canvas and get its context
        let textCanvas = document.getElementById("text-canvas");
        textCanvas.hidden = false;
        this.textCtx = textCanvas.getContext("2d");
        // Size the text canvas to be the same as the game canvas
        textCanvas.height = height;
        textCanvas.width = width;
        return this.gl;
    }
    render(visibleSet, tilemaps, uiLayers) {
        for (let node of visibleSet) {
            this.renderNode(node);
        }
        uiLayers.forEach(key => {
            if (!uiLayers.get(key).isHidden())
                uiLayers.get(key).getItems().forEach(node => this.renderNode(node));
        });
    }
    clear(color) {
        this.gl.clearColor(color.r, color.g, color.b, color.a);
        this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);
        this.textCtx.clearRect(0, 0, this.worldSize.x, this.worldSize.y);
    }
    renderNode(node) {
        // Calculate the origin of the viewport according to this sprite
        this.origin = this.scene.getViewTranslation(node);
        // Get the zoom level of the scene
        this.zoom = this.scene.getViewScale();
        if (node.hasCustomShader) {
            // If the node has a custom shader, render using that
            this.renderCustom(node);
        }
        else if (node instanceof Graphic_1.default) {
            this.renderGraphic(node);
        }
        else if (node instanceof Sprite_1.default) {
            if (node instanceof AnimatedSprite_1.default) {
                this.renderAnimatedSprite(node);
            }
            else {
                this.renderSprite(node);
            }
        }
        else if (node instanceof UIElement_1.default) {
            this.renderUIElement(node);
        }
    }
    renderSprite(sprite) {
        let shader = RegistryManager_1.default.shaders.get(ShaderRegistry_1.default.SPRITE_SHADER);
        let options = this.addOptions(shader.getOptions(sprite), sprite);
        shader.render(this.gl, options);
    }
    renderAnimatedSprite(sprite) {
        let shader = RegistryManager_1.default.shaders.get(ShaderRegistry_1.default.SPRITE_SHADER);
        let options = this.addOptions(shader.getOptions(sprite), sprite);
        shader.render(this.gl, options);
    }
    renderGraphic(graphic) {
        if (graphic instanceof Point_1.default) {
            let shader = RegistryManager_1.default.shaders.get(ShaderRegistry_1.default.POINT_SHADER);
            let options = this.addOptions(shader.getOptions(graphic), graphic);
            shader.render(this.gl, options);
        }
        else if (graphic instanceof Rect_1.default) {
            let shader = RegistryManager_1.default.shaders.get(ShaderRegistry_1.default.RECT_SHADER);
            let options = this.addOptions(shader.getOptions(graphic), graphic);
            shader.render(this.gl, options);
        }
    }
    renderTilemap(tilemap) {
        throw new Error("Method not implemented.");
    }
    renderUIElement(uiElement) {
        if (uiElement instanceof Label_1.default) {
            let shader = RegistryManager_1.default.shaders.get(ShaderRegistry_1.default.LABEL_SHADER);
            let options = this.addOptions(shader.getOptions(uiElement), uiElement);
            shader.render(this.gl, options);
            this.textCtx.setTransform(1, 0, 0, 1, (uiElement.position.x - this.origin.x) * this.zoom, (uiElement.position.y - this.origin.y) * this.zoom);
            this.textCtx.rotate(-uiElement.rotation);
            let globalAlpha = this.textCtx.globalAlpha;
            this.textCtx.globalAlpha = uiElement.alpha;
            // Render text
            this.textCtx.font = uiElement.getFontString();
            let offset = uiElement.calculateTextOffset(this.textCtx);
            this.textCtx.fillStyle = uiElement.calculateTextColor();
            this.textCtx.globalAlpha = uiElement.textColor.a;
            this.textCtx.fillText(uiElement.text, offset.x - uiElement.size.x / 2, offset.y - uiElement.size.y / 2);
            this.textCtx.globalAlpha = globalAlpha;
            this.textCtx.setTransform(1, 0, 0, 1, 0, 0);
        }
    }
    renderCustom(node) {
        let shader = RegistryManager_1.default.shaders.get(node.customShaderKey);
        let options = this.addOptions(shader.getOptions(node), node);
        shader.render(this.gl, options);
    }
    addOptions(options, node) {
        // Give the shader access to the world size
        options.worldSize = this.worldSize;
        // Adjust the origin position to the parallax
        let layer = node.getLayer();
        let parallax = new Vec2_1.default(1, 1);
        if (layer instanceof ParallaxLayer_1.default) {
            parallax = layer.parallax;
        }
        options.origin = this.origin.clone().mult(parallax);
        return options;
    }
}
exports.default = WebGLRenderer;

},{"../DataTypes/Vec2":26,"../Nodes/Graphic":43,"../Nodes/Graphics/Point":47,"../Nodes/Graphics/Rect":48,"../Nodes/Sprites/AnimatedSprite":49,"../Nodes/Sprites/Sprite":50,"../Nodes/UIElement":55,"../Nodes/UIElements/Label":57,"../Registry/Registries/ShaderRegistry":70,"../Registry/RegistryManager":71,"../ResourceManager/ResourceManager":89,"../Scene/Layers/ParallaxLayer":94,"./RenderingManager":81}],83:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const ResourceManager_1 = __importDefault(require("../../ResourceManager/ResourceManager"));
/**
 * A wrapper class for WebGL shaders.
 * This class is a singleton, and there is only one for each shader type.
 * All objects that use this shader type will refer to and modify this same type.
 */
class ShaderType {
    constructor(programKey) {
        this.programKey = programKey;
        this.resourceManager = ResourceManager_1.default.getInstance();
    }
    /**
     * Extracts the options from the CanvasNode and gives them to the render function
     * @param node The node to get options from
     * @returns An object containing the options that should be passed to the render function
     */
    getOptions(node) { return {}; }
}
exports.default = ShaderType;

},{"../../ResourceManager/ResourceManager":89}],84:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Mat4x4_1 = __importDefault(require("../../../DataTypes/Mat4x4"));
const Vec2_1 = __importDefault(require("../../../DataTypes/Vec2"));
const ResourceManager_1 = __importDefault(require("../../../ResourceManager/ResourceManager"));
const QuadShaderType_1 = __importDefault(require("./QuadShaderType"));
/** */
class LabelShaderType extends QuadShaderType_1.default {
    constructor(programKey) {
        super(programKey);
        this.resourceManager = ResourceManager_1.default.getInstance();
    }
    initBufferObject() {
        this.bufferObjectKey = "label";
        this.resourceManager.createBuffer(this.bufferObjectKey);
    }
    render(gl, options) {
        const backgroundColor = options.backgroundColor.toWebGL();
        const borderColor = options.borderColor.toWebGL();
        const program = this.resourceManager.getShaderProgram(this.programKey);
        const buffer = this.resourceManager.getBuffer(this.bufferObjectKey);
        gl.useProgram(program);
        const vertexData = this.getVertices(options.size.x, options.size.y);
        const FSIZE = vertexData.BYTES_PER_ELEMENT;
        // Bind the buffer
        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
        gl.bufferData(gl.ARRAY_BUFFER, vertexData, gl.STATIC_DRAW);
        // Attributes
        const a_Position = gl.getAttribLocation(program, "a_Position");
        gl.vertexAttribPointer(a_Position, 2, gl.FLOAT, false, 2 * FSIZE, 0 * FSIZE);
        gl.enableVertexAttribArray(a_Position);
        // Uniforms
        const u_BackgroundColor = gl.getUniformLocation(program, "u_BackgroundColor");
        gl.uniform4fv(u_BackgroundColor, backgroundColor);
        const u_BorderColor = gl.getUniformLocation(program, "u_BorderColor");
        gl.uniform4fv(u_BorderColor, borderColor);
        const u_MaxSize = gl.getUniformLocation(program, "u_MaxSize");
        gl.uniform2f(u_MaxSize, -vertexData[0], vertexData[1]);
        // Get transformation matrix
        // We want a square for our rendering space, so get the maximum dimension of our quad
        let maxDimension = Math.max(options.size.x, options.size.y);
        const u_BorderWidth = gl.getUniformLocation(program, "u_BorderWidth");
        gl.uniform1f(u_BorderWidth, options.borderWidth / maxDimension);
        const u_BorderRadius = gl.getUniformLocation(program, "u_BorderRadius");
        gl.uniform1f(u_BorderRadius, options.borderRadius / maxDimension);
        // The size of the rendering space will be a square with this maximum dimension
        let size = new Vec2_1.default(maxDimension, maxDimension).scale(2 / options.worldSize.x, 2 / options.worldSize.y);
        // Center our translations around (0, 0)
        const translateX = (options.position.x - options.origin.x - options.worldSize.x / 2) / maxDimension;
        const translateY = -(options.position.y - options.origin.y - options.worldSize.y / 2) / maxDimension;
        // Create our transformation matrix
        this.translation.translate(new Float32Array([translateX, translateY]));
        this.scale.scale(size);
        this.rotation.rotate(options.rotation);
        let transformation = Mat4x4_1.default.MULT(this.translation, this.scale, this.rotation);
        // Pass the translation matrix to our shader
        const u_Transform = gl.getUniformLocation(program, "u_Transform");
        gl.uniformMatrix4fv(u_Transform, false, transformation.toArray());
        // Draw the quad
        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
    }
    /**
     * The rendering space always has to be a square, so make sure its square w.r.t to the largest dimension
     * @param w The width of the quad in pixels
     * @param h The height of the quad in pixels
     * @returns An array of the vertices of the quad
     */
    getVertices(w, h) {
        let x, y;
        if (h > w) {
            y = 0.5;
            x = w / (2 * h);
        }
        else {
            x = 0.5;
            y = h / (2 * w);
        }
        return new Float32Array([
            -x, y,
            -x, -y,
            x, y,
            x, -y
        ]);
    }
    getOptions(rect) {
        let options = {
            position: rect.position,
            backgroundColor: rect.calculateBackgroundColor(),
            borderColor: rect.calculateBorderColor(),
            borderWidth: rect.borderWidth,
            borderRadius: rect.borderRadius,
            size: rect.size,
            rotation: rect.rotation
        };
        return options;
    }
}
exports.default = LabelShaderType;

},{"../../../DataTypes/Mat4x4":16,"../../../DataTypes/Vec2":26,"../../../ResourceManager/ResourceManager":89,"./QuadShaderType":86}],85:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const RenderingUtils_1 = __importDefault(require("../../../Utils/RenderingUtils"));
const ShaderType_1 = __importDefault(require("../ShaderType"));
class PointShaderType extends ShaderType_1.default {
    constructor(programKey) {
        super(programKey);
    }
    initBufferObject() {
        this.bufferObjectKey = "point";
        this.resourceManager.createBuffer(this.bufferObjectKey);
    }
    render(gl, options) {
        let position = RenderingUtils_1.default.toWebGLCoords(options.position, options.origin, options.worldSize);
        let color = RenderingUtils_1.default.toWebGLColor(options.color);
        const program = this.resourceManager.getShaderProgram(this.programKey);
        const buffer = this.resourceManager.getBuffer(this.bufferObjectKey);
        gl.useProgram(program);
        const vertexData = position;
        const FSIZE = vertexData.BYTES_PER_ELEMENT;
        // Bind the buffer
        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
        gl.bufferData(gl.ARRAY_BUFFER, vertexData, gl.STATIC_DRAW);
        // Attributes
        const a_Position = gl.getAttribLocation(program, "a_Position");
        gl.vertexAttribPointer(a_Position, 2, gl.FLOAT, false, 2 * FSIZE, 0 * FSIZE);
        gl.enableVertexAttribArray(a_Position);
        // Uniforms
        const u_Color = gl.getUniformLocation(program, "u_Color");
        gl.uniform4fv(u_Color, color);
        const u_PointSize = gl.getUniformLocation(program, "u_PointSize");
        gl.uniform1f(u_PointSize, options.pointSize);
        gl.drawArrays(gl.POINTS, 0, 1);
    }
    getOptions(point) {
        let options = {
            position: point.position,
            color: point.color,
            pointSize: point.size,
        };
        return options;
    }
}
exports.default = PointShaderType;

},{"../../../Utils/RenderingUtils":109,"../ShaderType":83}],86:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Mat4x4_1 = __importDefault(require("../../../DataTypes/Mat4x4"));
const ShaderType_1 = __importDefault(require("../ShaderType"));
/** Represents any WebGL objects that have a quad mesh (i.e. a rectangular game object composed of only two triangles) */
class QuadShaderType extends ShaderType_1.default {
    constructor(programKey) {
        super(programKey);
        this.scale = Mat4x4_1.default.IDENTITY;
        this.rotation = Mat4x4_1.default.IDENTITY;
        this.translation = Mat4x4_1.default.IDENTITY;
    }
}
exports.default = QuadShaderType;

},{"../../../DataTypes/Mat4x4":16,"../ShaderType":83}],87:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Mat4x4_1 = __importDefault(require("../../../DataTypes/Mat4x4"));
const Vec2_1 = __importDefault(require("../../../DataTypes/Vec2"));
const ResourceManager_1 = __importDefault(require("../../../ResourceManager/ResourceManager"));
const QuadShaderType_1 = __importDefault(require("./QuadShaderType"));
/** */
class RectShaderType extends QuadShaderType_1.default {
    constructor(programKey) {
        super(programKey);
        this.resourceManager = ResourceManager_1.default.getInstance();
    }
    initBufferObject() {
        this.bufferObjectKey = "rect";
        this.resourceManager.createBuffer(this.bufferObjectKey);
    }
    render(gl, options) {
        const color = options.color.toWebGL();
        const program = this.resourceManager.getShaderProgram(this.programKey);
        const buffer = this.resourceManager.getBuffer(this.bufferObjectKey);
        gl.useProgram(program);
        const vertexData = this.getVertices(options.size.x, options.size.y);
        const FSIZE = vertexData.BYTES_PER_ELEMENT;
        // Bind the buffer
        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
        gl.bufferData(gl.ARRAY_BUFFER, vertexData, gl.STATIC_DRAW);
        // Attributes
        const a_Position = gl.getAttribLocation(program, "a_Position");
        gl.vertexAttribPointer(a_Position, 2, gl.FLOAT, false, 2 * FSIZE, 0 * FSIZE);
        gl.enableVertexAttribArray(a_Position);
        // Uniforms
        const u_Color = gl.getUniformLocation(program, "u_Color");
        gl.uniform4fv(u_Color, color);
        // Get transformation matrix
        // We want a square for our rendering space, so get the maximum dimension of our quad
        let maxDimension = Math.max(options.size.x, options.size.y);
        // The size of the rendering space will be a square with this maximum dimension
        let size = new Vec2_1.default(maxDimension, maxDimension).scale(2 / options.worldSize.x, 2 / options.worldSize.y);
        // Center our translations around (0, 0)
        const translateX = (options.position.x - options.origin.x - options.worldSize.x / 2) / maxDimension;
        const translateY = -(options.position.y - options.origin.y - options.worldSize.y / 2) / maxDimension;
        // Create our transformation matrix
        this.translation.translate(new Float32Array([translateX, translateY]));
        this.scale.scale(size);
        this.rotation.rotate(options.rotation);
        let transformation = Mat4x4_1.default.MULT(this.translation, this.scale, this.rotation);
        // Pass the translation matrix to our shader
        const u_Transform = gl.getUniformLocation(program, "u_Transform");
        gl.uniformMatrix4fv(u_Transform, false, transformation.toArray());
        // Draw the quad
        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
    }
    /*
        So as it turns out, WebGL has an issue with non-square quads.
        It doesn't like when you don't have a 1-1 scale, and rotations are entirely messed up if this is not the case.
        To solve this, I used the scale of the LARGEST dimension of the quad to make a square, then adjusted the vertex coordinates inside of that.
        A diagram of the solution follows.

        There is a bounding square for the quad with dimensions hxh (in this case, since height is the largest dimension).
        The offset in the vertical direction is therefore 0.5, as it is normally.
        However, the offset in the horizontal direction is not so straightforward, but isn't conceptually hard.
        All we really have to do is a range change from [0, height/2] to [0, 0.5], where our value is t = width/2, and 0 <= t <= height/2.

        So now we have our rect, in a space scaled with respect to the largest dimension.
        Rotations work as you would expect, even for long rectangles.

                    0.5
            __ __ __ __ __ __ __
            |	|88888888888|	|
            |	|88888888888|	|
            |	|88888888888|	|
        -0.5|_ _|88888888888|_ _|0.5
            |	|88888888888|	|
            |	|88888888888|	|
            |	|88888888888|	|
            |___|88888888888|___|
                    -0.5

        The getVertices function below does as described, and converts the range
    */
    /**
     * The rendering space always has to be a square, so make sure its square w.r.t to the largest dimension
     * @param w The width of the quad in pixels
     * @param h The height of the quad in pixels
     * @returns An array of the vertices of the quad
     */
    getVertices(w, h) {
        let x, y;
        if (h > w) {
            y = 0.5;
            x = w / (2 * h);
        }
        else {
            x = 0.5;
            y = h / (2 * w);
        }
        return new Float32Array([
            -x, y,
            -x, -y,
            x, y,
            x, -y
        ]);
    }
    getOptions(rect) {
        let options = {
            position: rect.position,
            color: rect.color,
            size: rect.size,
            rotation: rect.rotation
        };
        return options;
    }
}
exports.default = RectShaderType;

},{"../../../DataTypes/Mat4x4":16,"../../../DataTypes/Vec2":26,"../../../ResourceManager/ResourceManager":89,"./QuadShaderType":86}],88:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Mat4x4_1 = __importDefault(require("../../../DataTypes/Mat4x4"));
const Vec2_1 = __importDefault(require("../../../DataTypes/Vec2"));
const AnimatedSprite_1 = __importDefault(require("../../../Nodes/Sprites/AnimatedSprite"));
const ResourceManager_1 = __importDefault(require("../../../ResourceManager/ResourceManager"));
const QuadShaderType_1 = __importDefault(require("./QuadShaderType"));
/** A shader for sprites and animated sprites */
class SpriteShaderType extends QuadShaderType_1.default {
    constructor(programKey) {
        super(programKey);
        this.resourceManager = ResourceManager_1.default.getInstance();
    }
    initBufferObject() {
        this.bufferObjectKey = "sprite";
        this.resourceManager.createBuffer(this.bufferObjectKey);
    }
    render(gl, options) {
        const program = this.resourceManager.getShaderProgram(this.programKey);
        const buffer = this.resourceManager.getBuffer(this.bufferObjectKey);
        const texture = this.resourceManager.getTexture(options.imageKey);
        gl.useProgram(program);
        const vertexData = this.getVertices(options.size.x, options.size.y, options.scale);
        const FSIZE = vertexData.BYTES_PER_ELEMENT;
        // Bind the buffer
        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
        gl.bufferData(gl.ARRAY_BUFFER, vertexData, gl.STATIC_DRAW);
        // Attributes
        const a_Position = gl.getAttribLocation(program, "a_Position");
        gl.vertexAttribPointer(a_Position, 2, gl.FLOAT, false, 4 * FSIZE, 0 * FSIZE);
        gl.enableVertexAttribArray(a_Position);
        const a_TexCoord = gl.getAttribLocation(program, "a_TexCoord");
        gl.vertexAttribPointer(a_TexCoord, 2, gl.FLOAT, false, 4 * FSIZE, 2 * FSIZE);
        gl.enableVertexAttribArray(a_TexCoord);
        // Uniforms
        // Get transformation matrix
        // We want a square for our rendering space, so get the maximum dimension of our quad
        let maxDimension = Math.max(options.size.x, options.size.y);
        // The size of the rendering space will be a square with this maximum dimension
        let size = new Vec2_1.default(maxDimension, maxDimension).scale(2 / options.worldSize.x, 2 / options.worldSize.y);
        // Center our translations around (0, 0)
        const translateX = (options.position.x - options.origin.x - options.worldSize.x / 2) / maxDimension;
        const translateY = -(options.position.y - options.origin.y - options.worldSize.y / 2) / maxDimension;
        // Create our transformation matrix
        this.translation.translate(new Float32Array([translateX, translateY]));
        this.scale.scale(size);
        this.rotation.rotate(options.rotation);
        let transformation = Mat4x4_1.default.MULT(this.translation, this.scale, this.rotation);
        // Pass the translation matrix to our shader
        const u_Transform = gl.getUniformLocation(program, "u_Transform");
        gl.uniformMatrix4fv(u_Transform, false, transformation.toArray());
        // Set up our sampler with our assigned texture unit
        const u_Sampler = gl.getUniformLocation(program, "u_Sampler");
        gl.uniform1i(u_Sampler, texture);
        // Pass in texShift
        const u_texShift = gl.getUniformLocation(program, "u_texShift");
        gl.uniform2fv(u_texShift, options.texShift);
        // Pass in texScale
        const u_texScale = gl.getUniformLocation(program, "u_texScale");
        gl.uniform2fv(u_texScale, options.texScale);
        // Draw the quad
        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
    }
    /**
     * The rendering space always has to be a square, so make sure its square w.r.t to the largest dimension
     * @param w The width of the quad in pixels
     * @param h The height of the quad in pixels
     * @returns An array of the vertices of the quad
     */
    getVertices(w, h, scale) {
        let x, y;
        if (h > w) {
            y = 0.5;
            x = w / (2 * h);
        }
        else {
            x = 0.5;
            y = h / (2 * w);
        }
        // Scale the rendering space if needed
        x *= scale[0];
        y *= scale[1];
        return new Float32Array([
            -x, y, 0.0, 0.0,
            -x, -y, 0.0, 1.0,
            x, y, 1.0, 0.0,
            x, -y, 1.0, 1.0
        ]);
    }
    getOptions(sprite) {
        let texShift;
        let texScale;
        if (sprite instanceof AnimatedSprite_1.default) {
            let animationIndex = sprite.animation.getIndexAndAdvanceAnimation();
            let offset = sprite.getAnimationOffset(animationIndex);
            texShift = new Float32Array([offset.x / (sprite.cols * sprite.size.x), offset.y / (sprite.rows * sprite.size.y)]);
            texScale = new Float32Array([1 / (sprite.cols), 1 / (sprite.rows)]);
        }
        else {
            texShift = new Float32Array([0, 0]);
            texScale = new Float32Array([1, 1]);
        }
        let options = {
            position: sprite.position,
            rotation: sprite.rotation,
            size: sprite.size,
            scale: sprite.scale.toArray(),
            imageKey: sprite.imageId,
            texShift,
            texScale
        };
        return options;
    }
}
exports.default = SpriteShaderType;

},{"../../../DataTypes/Mat4x4":16,"../../../DataTypes/Vec2":26,"../../../Nodes/Sprites/AnimatedSprite":49,"../../../ResourceManager/ResourceManager":89,"./QuadShaderType":86}],89:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Map_1 = __importDefault(require("../DataTypes/Collections/Map"));
const Queue_1 = __importDefault(require("../DataTypes/Collections/Queue"));
const StringUtils_1 = __importDefault(require("../Utils/StringUtils"));
const AudioManager_1 = __importDefault(require("../Sound/AudioManager"));
const WebGLProgramType_1 = __importDefault(require("../DataTypes/Rendering/WebGLProgramType"));
/**
 * The resource manager for the game engine.
 * The resource manager interfaces with the loadable assets of a game such as images, data files,
 * and sounds, which are all found in the dist folder.
 * This class controls loading and updates the @reference[Scene] with the loading progress, so that the scene does
 * not start before all necessary assets are loaded.
 */
class ResourceManager {
    constructor() {
        this.loading = false;
        this.justLoaded = false;
        this.loadonly_imagesLoaded = 0;
        this.loadonly_imagesToLoad = 0;
        this.loadonly_imageLoadingQueue = new Queue_1.default();
        this.images = new Map_1.default();
        this.loadonly_spritesheetsLoaded = 0;
        this.loadonly_spritesheetsToLoad = 0;
        this.loadonly_spritesheetLoadingQueue = new Queue_1.default();
        this.spritesheets = new Map_1.default();
        this.loadonly_tilemapsLoaded = 0;
        this.loadonly_tilemapsToLoad = 0;
        this.loadonly_tilemapLoadingQueue = new Queue_1.default();
        this.tilemaps = new Map_1.default();
        this.loadonly_audioLoaded = 0;
        this.loadonly_audioToLoad = 0;
        this.loadonly_audioLoadingQueue = new Queue_1.default();
        this.audioBuffers = new Map_1.default();
        this.loadonly_jsonLoaded = 0;
        this.loadonly_jsonToLoad = 0;
        this.loadonly_jsonLoadingQueue = new Queue_1.default();
        this.jsonObjects = new Map_1.default();
        this.loadonly_gl_ShaderProgramsLoaded = 0;
        this.loadonly_gl_ShaderProgramsToLoad = 0;
        this.loadonly_gl_ShaderLoadingQueue = new Queue_1.default();
        this.gl_ShaderPrograms = new Map_1.default();
        this.gl_Textures = new Map_1.default();
        this.gl_NextTextureID = 0;
        this.gl_Buffers = new Map_1.default();
        this.resourcesToUnload = new Array();
        this.resourcesToKeep = new Array();
    }
    ;
    /* ######################################## SINGLETON ########################################*/
    /**
     * Returns the current instance of this class or a new instance if none exist
     * @returns The resource manager
     */
    static getInstance() {
        if (!this.instance) {
            this.instance = new ResourceManager();
        }
        return this.instance;
    }
    /* ######################################## PUBLIC FUNCTION ########################################*/
    /**
     * Activates or deactivates the use of WebGL
     * @param flag True if WebGL should be used, false otherwise
     * @param gl The instance of the graphics context, if applicable
     */
    useWebGL(flag, gl) {
        this.gl_WebGLActive = flag;
        if (this.gl_WebGLActive) {
            this.gl = gl;
        }
    }
    /**
     * Loads an image from file
     * @param key The key to associate the loaded image with
     * @param path The path to the image to load
     */
    image(key, path) {
        this.loadonly_imageLoadingQueue.enqueue({ key: key, path: path });
    }
    /**
     * Tells the resource manager to keep this resource
     * @param key The key of the resource
     */
    keepImage(key) {
        this.keepResource(key, ResourceType.IMAGE);
    }
    /**
     * Retrieves a loaded image
     * @param key The key of the loaded image
     * @returns The image element associated with this key
     */
    getImage(key) {
        let image = this.images.get(key);
        if (image === undefined) {
            throw `There is no image associated with key "${key}"`;
        }
        return image;
    }
    /**
     * Loads a spritesheet from file
     * @param key The key to associate the loaded spritesheet with
     * @param path The path to the spritesheet to load
     */
    spritesheet(key, path) {
        this.loadonly_spritesheetLoadingQueue.enqueue({ key: key, path: path });
    }
    /**
     * Tells the resource manager to keep this resource
     * @param key The key of the resource
     */
    keepSpritesheet(key) {
        this.keepResource(key, ResourceType.SPRITESHEET);
    }
    /**
     * Retrieves a loaded spritesheet
     * @param key The key of the spritesheet to load
     * @returns The loaded Spritesheet
     */
    getSpritesheet(key) {
        return this.spritesheets.get(key);
    }
    /**
     * Loads an audio file
     * @param key The key to associate with the loaded audio file
     * @param path The path to the audio file to load
     */
    audio(key, path) {
        this.loadonly_audioLoadingQueue.enqueue({ key: key, path: path });
    }
    /**
     * Tells the resource manager to keep this resource
     * @param key The key of the resource
     */
    keepAudio(key) {
        this.keepResource(key, ResourceType.AUDIO);
    }
    /**
     * Retrieves a loaded audio file
     * @param key The key of the audio file to load
     * @returns The AudioBuffer created from the loaded audio fle
     */
    getAudio(key) {
        return this.audioBuffers.get(key);
    }
    /**
     * Load a tilemap from a json file. Automatically loads related images
     * @param key The key to associate with the loaded tilemap
     * @param path The path to the tilemap to load
     */
    tilemap(key, path) {
        this.loadonly_tilemapLoadingQueue.enqueue({ key: key, path: path });
    }
    /**
     * Tells the resource manager to keep this resource
     * @param key The key of the resource
     */
    keepTilemap(key) {
        this.keepResource(key, ResourceType.TILEMAP);
    }
    /**
     * Retreives a loaded tilemap
     * @param key The key of the loaded tilemap
     * @returns The tilemap data associated with the key
     */
    getTilemap(key) {
        return this.tilemaps.get(key);
    }
    /**
     * Loads an object from a json file.
     * @param key The key to associate with the loaded object
     * @param path The path to the json file to load
     */
    object(key, path) {
        this.loadonly_jsonLoadingQueue.enqueue({ key: key, path: path });
    }
    /**
     * Tells the resource manager to keep this resource
     * @param key The key of the resource
     */
    keepObject(key) {
        this.keepResource(key, ResourceType.JSON);
    }
    /**
     * Retreives a loaded object
     * @param key The key of the loaded object
     * @returns The object data associated with the key
     */
    getObject(key) {
        return this.jsonObjects.get(key);
    }
    /* ######################################## LOAD FUNCTION ########################################*/
    /**
     * Loads all resources currently in the queue
     * @param callback The function to cal when the resources are finished loading
     */
    loadResourcesFromQueue(callback) {
        this.loadonly_typesToLoad = 5;
        this.loading = true;
        // Load everything in the queues. Tilemaps have to come before images because they will add new images to the queue
        this.loadTilemapsFromQueue(() => {
            console.log("Loaded Tilemaps");
            this.loadSpritesheetsFromQueue(() => {
                console.log("Loaded Spritesheets");
                this.loadImagesFromQueue(() => {
                    console.log("Loaded Images");
                    this.loadAudioFromQueue(() => {
                        console.log("Loaded Audio");
                        this.loadObjectsFromQueue(() => {
                            console.log("Loaded Objects");
                            if (this.gl_WebGLActive) {
                                this.gl_LoadShadersFromQueue(() => {
                                    console.log("Loaded Shaders");
                                    this.finishLoading(callback);
                                });
                            }
                            else {
                                this.finishLoading(callback);
                            }
                        });
                    });
                });
            });
        });
    }
    finishLoading(callback) {
        // Done loading
        this.loading = false;
        this.justLoaded = true;
        callback();
    }
    /* ######################################## UNLOAD FUNCTION ########################################*/
    keepResource(key, type) {
        console.log("Keep resource...");
        for (let i = 0; i < this.resourcesToUnload.length; i++) {
            let resource = this.resourcesToUnload[i];
            if (resource.key === key && resource.resourceType === type) {
                console.log("Found resource " + key + " of type " + type + ". Keeping.");
                let resourceToMove = this.resourcesToUnload.splice(i, 1);
                this.resourcesToKeep.push(...resourceToMove);
                return;
            }
        }
    }
    /**
     * Deletes references to all resources in the resource manager
     */
    unloadAllResources() {
        this.loading = false;
        this.justLoaded = false;
        for (let resource of this.resourcesToUnload) {
            // Unload the resource
            this.unloadResource(resource);
        }
    }
    unloadResource(resource) {
        // Delete the resource itself
        switch (resource.resourceType) {
            case ResourceType.IMAGE:
                this.images.delete(resource.key);
                if (this.gl_WebGLActive) {
                    this.gl_Textures.delete(resource.key);
                }
                break;
            case ResourceType.TILEMAP:
                this.tilemaps.delete(resource.key);
                break;
            case ResourceType.SPRITESHEET:
                this.spritesheets.delete(resource.key);
                break;
            case ResourceType.AUDIO:
                this.audioBuffers.delete(resource.key);
                break;
            case ResourceType.JSON:
                this.jsonObjects.delete(resource.key);
                break;
            /*case ResourceType.SHADER:
                this.gl_ShaderPrograms.get(resource.key).delete(this.gl);
                this.gl_ShaderPrograms.delete(resource.key);
                break;*/
        }
        // Delete any dependencies
        for (let dependency of resource.dependencies) {
            this.unloadResource(dependency);
        }
    }
    /* ######################################## WORK FUNCTIONS ########################################*/
    /**
     * Loads all tilemaps currently in the tilemap loading queue
     * @param onFinishLoading The function to call when loading is complete
     */
    loadTilemapsFromQueue(onFinishLoading) {
        this.loadonly_tilemapsToLoad = this.loadonly_tilemapLoadingQueue.getSize();
        this.loadonly_tilemapsLoaded = 0;
        // If no items to load, we're finished
        if (this.loadonly_tilemapsToLoad === 0) {
            onFinishLoading();
            return;
        }
        while (this.loadonly_tilemapLoadingQueue.hasItems()) {
            let tilemap = this.loadonly_tilemapLoadingQueue.dequeue();
            this.loadTilemap(tilemap.key, tilemap.path, onFinishLoading);
        }
    }
    /**
     * Loads a singular tilemap
     * @param key The key of the tilemap
     * @param pathToTilemapJSON The path to the tilemap JSON file
     * @param callbackIfLast The function to call if this is the last tilemap to load
     */
    loadTilemap(key, pathToTilemapJSON, callbackIfLast) {
        this.loadTextFile(pathToTilemapJSON, (fileText) => {
            let tilemapObject = JSON.parse(fileText);
            // We can parse the object later - it's much faster than loading
            this.tilemaps.add(key, tilemapObject);
            let resource = new ResourceReference(key, ResourceType.TILEMAP);
            // Grab the tileset images we need to load and add them to the imageloading queue
            for (let tileset of tilemapObject.tilesets) {
                if (tileset.image) {
                    let key = tileset.image;
                    let path = StringUtils_1.default.getPathFromFilePath(pathToTilemapJSON) + key;
                    this.loadonly_imageLoadingQueue.enqueue({ key: key, path: path, isDependency: true });
                    // Add this image as a dependency to the tilemap
                    resource.addDependency(new ResourceReference(key, ResourceType.IMAGE));
                }
                else if (tileset.tiles) {
                    for (let tile of tileset.tiles) {
                        let key = tile.image;
                        let path = StringUtils_1.default.getPathFromFilePath(pathToTilemapJSON) + key;
                        this.loadonly_imageLoadingQueue.enqueue({ key: key, path: path, isDependency: true });
                        // Add this image as a dependency to the tilemap
                        resource.addDependency(new ResourceReference(key, ResourceType.IMAGE));
                    }
                }
            }
            // Add the resource reference to the list of resource to unload
            this.resourcesToUnload.push(resource);
            // Finish loading
            this.finishLoadingTilemap(callbackIfLast);
        });
    }
    /**
     * Finish loading a tilemap. Calls the callback function if this is the last tilemap being loaded
     * @param callback The function to call if this is the last tilemap to load
     */
    finishLoadingTilemap(callback) {
        this.loadonly_tilemapsLoaded += 1;
        if (this.loadonly_tilemapsLoaded === this.loadonly_tilemapsToLoad) {
            // We're done loading tilemaps
            callback();
        }
    }
    /**
     * Loads all spritesheets currently in the spritesheet loading queue
     * @param onFinishLoading The function to call when the spritesheets are done loading
     */
    loadSpritesheetsFromQueue(onFinishLoading) {
        this.loadonly_spritesheetsToLoad = this.loadonly_spritesheetLoadingQueue.getSize();
        this.loadonly_spritesheetsLoaded = 0;
        // If no items to load, we're finished
        if (this.loadonly_spritesheetsToLoad === 0) {
            onFinishLoading();
            return;
        }
        while (this.loadonly_spritesheetLoadingQueue.hasItems()) {
            let spritesheet = this.loadonly_spritesheetLoadingQueue.dequeue();
            this.loadSpritesheet(spritesheet.key, spritesheet.path, onFinishLoading);
        }
    }
    /**
     * Loads a singular spritesheet
     * @param key The key of the spritesheet to load
     * @param pathToSpritesheetJSON The path to the spritesheet JSON file
     * @param callbackIfLast The function to call if this is the last spritesheet
     */
    loadSpritesheet(key, pathToSpritesheetJSON, callbackIfLast) {
        this.loadTextFile(pathToSpritesheetJSON, (fileText) => {
            let spritesheet = JSON.parse(fileText);
            // We can parse the object later - it's much faster than loading
            this.spritesheets.add(key, spritesheet);
            let resource = new ResourceReference(key, ResourceType.SPRITESHEET);
            // Grab the image we need to load and add it to the imageloading queue
            let path = StringUtils_1.default.getPathFromFilePath(pathToSpritesheetJSON) + spritesheet.spriteSheetImage;
            this.loadonly_imageLoadingQueue.enqueue({ key: spritesheet.name, path: path, isDependency: true });
            resource.addDependency(new ResourceReference(spritesheet.name, ResourceType.IMAGE));
            this.resourcesToUnload.push(resource);
            // Finish loading
            this.finishLoadingSpritesheet(callbackIfLast);
        });
    }
    /**
     * Finish loading a spritesheet. Calls the callback function if this is the last spritesheet being loaded
     * @param callback The function to call if this is the last spritesheet to load
     */
    finishLoadingSpritesheet(callback) {
        this.loadonly_spritesheetsLoaded += 1;
        if (this.loadonly_spritesheetsLoaded === this.loadonly_spritesheetsToLoad) {
            // We're done loading spritesheets
            callback();
        }
    }
    /**
     * Loads all images currently in the image loading queue
     * @param onFinishLoading The function to call when there are no more images to load
     */
    loadImagesFromQueue(onFinishLoading) {
        this.loadonly_imagesToLoad = this.loadonly_imageLoadingQueue.getSize();
        this.loadonly_imagesLoaded = 0;
        // If no items to load, we're finished
        if (this.loadonly_imagesToLoad === 0) {
            onFinishLoading();
            return;
        }
        while (this.loadonly_imageLoadingQueue.hasItems()) {
            let image = this.loadonly_imageLoadingQueue.dequeue();
            this.loadImage(image.key, image.path, image.isDependency, onFinishLoading);
        }
    }
    /**
     * Loads a singular image
     * @param key The key of the image to load
     * @param path The path to the image to load
     * @param callbackIfLast The function to call if this is the last image
     */
    loadImage(key, path, isDependency, callbackIfLast) {
        var image = new Image();
        image.onload = () => {
            // Add to loaded images
            this.images.add(key, image);
            // If not a dependency, push it to the unload list. Otherwise it's managed by something else
            if (!isDependency) {
                this.resourcesToUnload.push(new ResourceReference(key, ResourceType.IMAGE));
            }
            // If WebGL is active, create a texture
            if (this.gl_WebGLActive) {
                this.createWebGLTexture(key, image);
            }
            // Finish image load
            this.finishLoadingImage(callbackIfLast);
        };
        image.src = path;
    }
    /**
     * Finish loading an image. If this is the last image, it calls the callback function
     * @param callback The function to call if this is the last image
     */
    finishLoadingImage(callback) {
        this.loadonly_imagesLoaded += 1;
        if (this.loadonly_imagesLoaded === this.loadonly_imagesToLoad) {
            // We're done loading images
            callback();
        }
    }
    /**
     * Loads all audio currently in the tilemap loading queue
     * @param onFinishLoading The function to call when tilemaps are done loading
     */
    loadAudioFromQueue(onFinishLoading) {
        this.loadonly_audioToLoad = this.loadonly_audioLoadingQueue.getSize();
        this.loadonly_audioLoaded = 0;
        // If no items to load, we're finished
        if (this.loadonly_audioToLoad === 0) {
            onFinishLoading();
            return;
        }
        while (this.loadonly_audioLoadingQueue.hasItems()) {
            let audio = this.loadonly_audioLoadingQueue.dequeue();
            this.loadAudio(audio.key, audio.path, onFinishLoading);
        }
    }
    /**
     * Load a singular audio file
     * @param key The key to the audio file to load
     * @param path The path to the audio file to load
     * @param callbackIfLast The function to call if this is the last audio file to load
     */
    loadAudio(key, path, callbackIfLast) {
        let audioCtx = AudioManager_1.default.getInstance().getAudioContext();
        let request = new XMLHttpRequest();
        request.open('GET', path, true);
        request.responseType = 'arraybuffer';
        request.onload = () => {
            audioCtx.decodeAudioData(request.response, (buffer) => {
                // Add to list of audio buffers
                this.audioBuffers.add(key, buffer);
                this.resourcesToUnload.push(new ResourceReference(key, ResourceType.AUDIO));
                // Finish loading sound
                this.finishLoadingAudio(callbackIfLast);
            }, (error) => {
                throw "Error loading sound";
            });
        };
        request.send();
    }
    /**
     * Finish loading an audio file. Calls the callback functon if this is the last audio sample being loaded.
     * @param callback The function to call if this is the last audio file to load
     */
    finishLoadingAudio(callback) {
        this.loadonly_audioLoaded += 1;
        if (this.loadonly_audioLoaded === this.loadonly_audioToLoad) {
            // We're done loading audio
            callback();
        }
    }
    /**
     * Loads all objects currently in the object loading queue
     * @param onFinishLoading The function to call when there are no more objects to load
     */
    loadObjectsFromQueue(onFinishLoading) {
        this.loadonly_jsonToLoad = this.loadonly_jsonLoadingQueue.getSize();
        this.loadonly_jsonLoaded = 0;
        // If no items to load, we're finished
        if (this.loadonly_jsonToLoad === 0) {
            onFinishLoading();
            return;
        }
        while (this.loadonly_jsonLoadingQueue.hasItems()) {
            let obj = this.loadonly_jsonLoadingQueue.dequeue();
            this.loadObject(obj.key, obj.path, onFinishLoading);
        }
    }
    /**
     * Loads a singular object
     * @param key The key of the object to load
     * @param path The path to the object to load
     * @param callbackIfLast The function to call if this is the last object
     */
    loadObject(key, path, callbackIfLast) {
        this.loadTextFile(path, (fileText) => {
            let obj = JSON.parse(fileText);
            this.jsonObjects.add(key, obj);
            this.resourcesToUnload.push(new ResourceReference(key, ResourceType.JSON));
            this.finishLoadingObject(callbackIfLast);
        });
    }
    /**
     * Finish loading an object. If this is the last object, it calls the callback function
     * @param callback The function to call if this is the last object
     */
    finishLoadingObject(callback) {
        this.loadonly_jsonLoaded += 1;
        if (this.loadonly_jsonLoaded === this.loadonly_jsonToLoad) {
            // We're done loading objects
            callback();
        }
    }
    /* ########## WEBGL SPECIFIC FUNCTIONS ########## */
    getTexture(key) {
        return this.gl_Textures.get(key);
    }
    getShaderProgram(key) {
        return this.gl_ShaderPrograms.get(key).program;
    }
    getBuffer(key) {
        return this.gl_Buffers.get(key);
    }
    createWebGLTexture(imageKey, image) {
        // Get the texture ID
        const textureID = this.getTextureID(this.gl_NextTextureID);
        // Create the texture
        const texture = this.gl.createTexture();
        // Set up the texture
        // Enable texture0
        this.gl.activeTexture(textureID);
        // Bind our texture to texture 0
        this.gl.bindTexture(this.gl.TEXTURE_2D, texture);
        // Set the texture parameters
        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR);
        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);
        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);
        // Set the texture image
        this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.gl.RGBA, this.gl.UNSIGNED_BYTE, image);
        // Add the texture to our map with the same key as the image
        this.gl_Textures.add(imageKey, this.gl_NextTextureID);
        // Increment the key
        this.gl_NextTextureID += 1;
    }
    getTextureID(id) {
        // Start with 9 cases - this can be expanded if needed, but for the best performance,
        // Textures should be stitched into an atlas
        switch (id) {
            case 0: return this.gl.TEXTURE0;
            case 1: return this.gl.TEXTURE1;
            case 2: return this.gl.TEXTURE2;
            case 3: return this.gl.TEXTURE3;
            case 4: return this.gl.TEXTURE4;
            case 5: return this.gl.TEXTURE5;
            case 6: return this.gl.TEXTURE6;
            case 7: return this.gl.TEXTURE7;
            case 8: return this.gl.TEXTURE8;
            default: return this.gl.TEXTURE9;
        }
    }
    createBuffer(key) {
        if (this.gl_WebGLActive) {
            let buffer = this.gl.createBuffer();
            this.gl_Buffers.add(key, buffer);
        }
    }
    /**
     * Enqueues loading of a new shader program
     * @param key The key of the shader program
     * @param vShaderFilepath
     * @param fShaderFilepath
     */
    shader(key, vShaderFilepath, fShaderFilepath) {
        let splitPath = vShaderFilepath.split(".");
        let end = splitPath[splitPath.length - 1];
        if (end !== "vshader") {
            throw `${vShaderFilepath} is not a valid vertex shader - must end in ".vshader`;
        }
        splitPath = fShaderFilepath.split(".");
        end = splitPath[splitPath.length - 1];
        if (end !== "fshader") {
            throw `${fShaderFilepath} is not a valid vertex shader - must end in ".fshader`;
        }
        let paths = new KeyPath_Shader();
        paths.key = key;
        paths.vpath = vShaderFilepath;
        paths.fpath = fShaderFilepath;
        this.loadonly_gl_ShaderLoadingQueue.enqueue(paths);
    }
    /**
     * Tells the resource manager to keep this resource
     * @param key The key of the resource
     */
    keepShader(key) {
        this.keepResource(key, ResourceType.IMAGE);
    }
    gl_LoadShadersFromQueue(onFinishLoading) {
        this.loadonly_gl_ShaderProgramsToLoad = this.loadonly_gl_ShaderLoadingQueue.getSize();
        this.loadonly_gl_ShaderProgramsLoaded = 0;
        // If webGL isn'active or there are no items to load, we're finished
        if (!this.gl_WebGLActive || this.loadonly_gl_ShaderProgramsToLoad === 0) {
            onFinishLoading();
            return;
        }
        while (this.loadonly_gl_ShaderLoadingQueue.hasItems()) {
            let shader = this.loadonly_gl_ShaderLoadingQueue.dequeue();
            this.gl_LoadShader(shader.key, shader.vpath, shader.fpath, onFinishLoading);
        }
    }
    gl_LoadShader(key, vpath, fpath, callbackIfLast) {
        this.loadTextFile(vpath, (vFileText) => {
            const vShader = vFileText;
            this.loadTextFile(fpath, (fFileText) => {
                const fShader = fFileText;
                // Extract the program and shaders
                const [shaderProgram, vertexShader, fragmentShader] = this.createShaderProgram(vShader, fShader);
                // Create a wrapper type
                const programWrapper = new WebGLProgramType_1.default();
                programWrapper.program = shaderProgram;
                programWrapper.vertexShader = vertexShader;
                programWrapper.fragmentShader = fragmentShader;
                // Add to our map
                this.gl_ShaderPrograms.add(key, programWrapper);
                this.resourcesToUnload.push(new ResourceReference(key, ResourceType.SHADER));
                // Finish loading
                this.gl_FinishLoadingShader(callbackIfLast);
            });
        });
    }
    gl_FinishLoadingShader(callback) {
        this.loadonly_gl_ShaderProgramsLoaded += 1;
        if (this.loadonly_gl_ShaderProgramsLoaded === this.loadonly_gl_ShaderProgramsToLoad) {
            // We're done loading shaders
            callback();
        }
    }
    createShaderProgram(vShaderSource, fShaderSource) {
        const vertexShader = this.loadVertexShader(vShaderSource);
        const fragmentShader = this.loadFragmentShader(fShaderSource);
        if (vertexShader === null || fragmentShader === null) {
            // We had a problem intializing - error
            return null;
        }
        // Create a shader program
        const program = this.gl.createProgram();
        if (!program) {
            // Error creating
            console.warn("Failed to create program");
            return null;
        }
        // Attach our vertex and fragment shader
        this.gl.attachShader(program, vertexShader);
        this.gl.attachShader(program, fragmentShader);
        // Link
        this.gl.linkProgram(program);
        if (!this.gl.getProgramParameter(program, this.gl.LINK_STATUS)) {
            // Error linking
            const error = this.gl.getProgramInfoLog(program);
            console.warn("Failed to link program: " + error);
            // Clean up
            this.gl.deleteProgram(program);
            this.gl.deleteShader(vertexShader);
            this.gl.deleteShader(fragmentShader);
            return null;
        }
        // We successfully create a program
        return [program, vertexShader, fragmentShader];
    }
    loadVertexShader(shaderSource) {
        // Create a new vertex shader
        return this.loadShader(this.gl.VERTEX_SHADER, shaderSource);
    }
    loadFragmentShader(shaderSource) {
        // Create a new fragment shader
        return this.loadShader(this.gl.FRAGMENT_SHADER, shaderSource);
    }
    loadShader(type, shaderSource) {
        const shader = this.gl.createShader(type);
        // If we couldn't create the shader, error
        if (shader === null) {
            console.warn("Unable to create shader");
            return null;
        }
        // Add the source to the shader and compile
        this.gl.shaderSource(shader, shaderSource);
        this.gl.compileShader(shader);
        // Make sure there were no errors during this process
        if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {
            // Not compiled - error
            const error = this.gl.getShaderInfoLog(shader);
            console.warn("Failed to compile shader: " + error);
            // Clean up
            this.gl.deleteShader(shader);
            return null;
        }
        // Sucess, so return the shader
        return shader;
    }
    /* ########## GENERAL LOADING FUNCTIONS ########## */
    loadTextFile(textFilePath, callback) {
        let xobj = new XMLHttpRequest();
        xobj.overrideMimeType("application/json");
        xobj.open('GET', textFilePath, true);
        xobj.onreadystatechange = function () {
            if ((xobj.readyState == 4) && (xobj.status == 200)) {
                callback(xobj.responseText);
            }
        };
        xobj.send(null);
    }
    /* ########## LOADING BAR INFO ########## */
    getLoadPercent() {
        return (this.loadonly_tilemapsLoaded / this.loadonly_tilemapsToLoad
            + this.loadonly_spritesheetsLoaded / this.loadonly_spritesheetsToLoad
            + this.loadonly_imagesLoaded / this.loadonly_imagesToLoad
            + this.loadonly_audioLoaded / this.loadonly_audioToLoad)
            / this.loadonly_typesToLoad;
    }
    update(deltaT) {
        if (this.loading) {
            if (this.onLoadProgress) {
                this.onLoadProgress(this.getLoadPercent());
            }
        }
        else if (this.justLoaded) {
            this.justLoaded = false;
            if (this.onLoadComplete) {
                this.onLoadComplete();
            }
        }
    }
}
exports.default = ResourceManager;
/**
 * A class representing a reference to a resource.
 * This is used for the exemption list to assure assets and their dependencies don't get
 * destroyed if they are still needed.
 */
class ResourceReference {
    constructor(key, resourceType) {
        this.key = key;
        this.resourceType = resourceType;
        this.dependencies = new Array();
    }
    addDependency(resource) {
        this.dependencies.push(resource);
    }
}
var ResourceType;
(function (ResourceType) {
    ResourceType["IMAGE"] = "IMAGE";
    ResourceType["TILEMAP"] = "TILEMAP";
    ResourceType["SPRITESHEET"] = "SPRITESHEET";
    ResourceType["AUDIO"] = "AUDIO";
    ResourceType["JSON"] = "JSON";
    ResourceType["SHADER"] = "SHADER";
})(ResourceType || (ResourceType = {}));
/**
 * A pair representing a key and the path of the resource to load
 */
class KeyPathPair {
    constructor() {
        this.isDependency = false;
    }
}
class KeyPath_Shader {
}

},{"../DataTypes/Collections/Map":8,"../DataTypes/Collections/Queue":9,"../DataTypes/Rendering/WebGLProgramType":19,"../Sound/AudioManager":102,"../Utils/StringUtils":110}],90:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Sprite_1 = __importDefault(require("../../Nodes/Sprites/Sprite"));
const GraphicTypes_1 = require("../../Nodes/Graphics/GraphicTypes");
const UIElementTypes_1 = require("../../Nodes/UIElements/UIElementTypes");
const Point_1 = __importDefault(require("../../Nodes/Graphics/Point"));
const Vec2_1 = __importDefault(require("../../DataTypes/Vec2"));
const Button_1 = __importDefault(require("../../Nodes/UIElements/Button"));
const Label_1 = __importDefault(require("../../Nodes/UIElements/Label"));
const Slider_1 = __importDefault(require("../../Nodes/UIElements/Slider"));
const TextInput_1 = __importDefault(require("../../Nodes/UIElements/TextInput"));
const Rect_1 = __importDefault(require("../../Nodes/Graphics/Rect"));
const ResourceManager_1 = __importDefault(require("../../ResourceManager/ResourceManager"));
const Line_1 = __importDefault(require("../../Nodes/Graphics/Line"));
const Particle_1 = __importDefault(require("../../Nodes/Graphics/Particle"));
// @ignorePage
/**
 * A factory that abstracts adding @reference[CanvasNode]s to the @reference[Scene].
 * Access methods in this factory through Scene.add.[methodName]().
 */
class CanvasNodeFactory {
    constructor() {
        /**
         * Adds an instance of a UIElement to the current scene - i.e. any class that extends UIElement
         * @param type The type of UIElement to add
         * @param layerName The layer to add the UIElement to
         * @param options Any additional arguments to feed to the constructor
         * @returns A new UIElement
         */
        this.addUIElement = (type, layerName, options) => {
            // Get the layer
            let layer = this.scene.getLayer(layerName);
            let instance;
            switch (type) {
                case UIElementTypes_1.UIElementType.BUTTON:
                    instance = this.buildButton(options);
                    break;
                case UIElementTypes_1.UIElementType.LABEL:
                    instance = this.buildLabel(options);
                    break;
                case UIElementTypes_1.UIElementType.SLIDER:
                    instance = this.buildSlider(options);
                    break;
                case UIElementTypes_1.UIElementType.TEXT_INPUT:
                    instance = this.buildTextInput(options);
                    break;
                default:
                    throw `UIElementType '${type}' does not exist, or is registered incorrectly.`;
            }
            instance.setScene(this.scene);
            instance.id = this.scene.generateId();
            this.scene.getSceneGraph().addNode(instance);
            // Add instance to layer
            layer.addNode(instance);
            return instance;
        };
        /**
         * Adds a sprite to the current scene
         * @param key The key of the image the sprite will represent
         * @param layerName The layer on which to add the sprite
         * @returns A new Sprite
         */
        this.addSprite = (key, layerName) => {
            let layer = this.scene.getLayer(layerName);
            let instance = new Sprite_1.default(key);
            // Add instance to scene
            instance.setScene(this.scene);
            instance.id = this.scene.generateId();
            if (!(this.scene.isParallaxLayer(layerName) || this.scene.isUILayer(layerName))) {
                this.scene.getSceneGraph().addNode(instance);
            }
            // Add instance to layer
            layer.addNode(instance);
            return instance;
        };
        /**
         * Adds an AnimatedSprite to the current scene
         * @param key The key of the image the sprite will represent
         * @param layerName The layer on which to add the sprite
         * @returns A new AnimatedSprite
         */
        this.addAnimatedSprite = (constr, key, layerName) => {
            let layer = this.scene.getLayer(layerName);
            let spritesheet = this.resourceManager.getSpritesheet(key);
            let instance = new constr(spritesheet);
            // Add instance fo scene
            instance.setScene(this.scene);
            instance.id = this.scene.generateId();
            if (!(this.scene.isParallaxLayer(layerName) || this.scene.isUILayer(layerName))) {
                this.scene.getSceneGraph().addNode(instance);
            }
            // Add instance to layer
            layer.addNode(instance);
            return instance;
        };
        /**
         * Adds a new graphic element to the current Scene
         * @param type The type of graphic to add
         * @param layerName The layer on which to add the graphic
         * @param options Any additional arguments to send to the graphic constructor
         * @returns A new Graphic
         */
        this.addGraphic = (type, layerName, options) => {
            // Get the layer
            let layer = this.scene.getLayer(layerName);
            let instance;
            switch (type) {
                case GraphicTypes_1.GraphicType.POINT:
                    instance = this.buildPoint(options);
                    break;
                case GraphicTypes_1.GraphicType.LINE:
                    instance = this.buildLine(options);
                    break;
                case GraphicTypes_1.GraphicType.RECT:
                    instance = this.buildRect(options);
                    break;
                case GraphicTypes_1.GraphicType.PARTICLE:
                    instance = this.buildParticle(options);
                    break;
                default:
                    throw `GraphicType '${type}' does not exist, or is registered incorrectly.`;
            }
            // Add instance to scene
            instance.setScene(this.scene);
            instance.id = this.scene.generateId();
            if (!(this.scene.isParallaxLayer(layerName) || this.scene.isUILayer(layerName))) {
                this.scene.getSceneGraph().addNode(instance);
            }
            // Add instance to layer
            layer.addNode(instance);
            return instance;
        };
    }
    init(scene) {
        this.scene = scene;
        this.resourceManager = ResourceManager_1.default.getInstance();
    }
    /* ---------- BUILDERS ---------- */
    buildButton(options) {
        this.checkIfPropExists("Button", options, "position", Vec2_1.default, "Vec2");
        this.checkIfPropExists("Button", options, "text", "string");
        return new Button_1.default(options.position, options.text);
    }
    buildLabel(options) {
        this.checkIfPropExists("Label", options, "position", Vec2_1.default, "Vec2");
        this.checkIfPropExists("Label", options, "text", "string");
        return new Label_1.default(options.position, options.text);
    }
    buildSlider(options) {
        this.checkIfPropExists("Slider", options, "position", Vec2_1.default, "Vec2");
        let initValue = 0;
        if (options.value !== undefined) {
            initValue = options.value;
        }
        return new Slider_1.default(options.position, initValue);
    }
    buildTextInput(options) {
        this.checkIfPropExists("TextInput", options, "position", Vec2_1.default, "Vec2");
        return new TextInput_1.default(options.position);
    }
    buildPoint(options) {
        this.checkIfPropExists("Point", options, "position", Vec2_1.default, "Vec2");
        return new Point_1.default(options.position);
    }
    buildParticle(options) {
        this.checkIfPropExists("Particle", options, "position", Vec2_1.default, "Vec2");
        this.checkIfPropExists("Particle", options, "size", Vec2_1.default, "Vec2");
        this.checkIfPropExists("Particle", options, "mass", "number", "number");
        //Changed for testing
        return new Particle_1.default(options.position, options.size, options.mass);
    }
    buildLine(options) {
        this.checkIfPropExists("Line", options, "start", Vec2_1.default, "Vec2");
        this.checkIfPropExists("Line", options, "end", Vec2_1.default, "Vec2");
        return new Line_1.default(options.start, options.end);
    }
    buildRect(options) {
        this.checkIfPropExists("Rect", options, "position", Vec2_1.default, "Vec2");
        this.checkIfPropExists("Rect", options, "size", Vec2_1.default, "Vec2");
        return new Rect_1.default(options.position, options.size);
    }
    /* ---------- ERROR HANDLING ---------- */
    checkIfPropExists(objectName, options, prop, type, typeName) {
        if (!options || options[prop] === undefined) {
            // Check that the options object has the property
            throw `${objectName} object requires argument ${prop} of type ${typeName}, but none was provided.`;
        }
        else {
            // Check that the property has the correct type
            if ((typeof type) === "string") {
                if (!(typeof options[prop] === type)) {
                    throw `${objectName} object requires argument ${prop} of type ${type}, but provided ${prop} was not of type ${type}.`;
                }
            }
            else if (type instanceof Function) {
                // If type is a constructor, check against that
                if (!(options[prop] instanceof type)) {
                    throw `${objectName} object requires argument ${prop} of type ${typeName}, but provided ${prop} was not of type ${typeName}.`;
                }
            }
            else {
                throw `${objectName} object requires argument ${prop} of type ${typeName}, but provided ${prop} was not of type ${typeName}.`;
            }
        }
    }
}
exports.default = CanvasNodeFactory;

},{"../../DataTypes/Vec2":26,"../../Nodes/Graphics/GraphicTypes":44,"../../Nodes/Graphics/Line":45,"../../Nodes/Graphics/Particle":46,"../../Nodes/Graphics/Point":47,"../../Nodes/Graphics/Rect":48,"../../Nodes/Sprites/Sprite":50,"../../Nodes/UIElements/Button":56,"../../Nodes/UIElements/Label":57,"../../Nodes/UIElements/Slider":58,"../../Nodes/UIElements/TextInput":59,"../../Nodes/UIElements/UIElementTypes":60,"../../ResourceManager/ResourceManager":89}],91:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const CanvasNodeFactory_1 = __importDefault(require("./CanvasNodeFactory"));
const TilemapFactory_1 = __importDefault(require("./TilemapFactory"));
/**
 * The manager of all factories used for adding @reference[GameNode]s to the @reference[Scene].
 */
class FactoryManager {
    constructor(scene, tilemaps) {
        // Constructors are called here to allow assignment of their functions to functions in this class
        this.canvasNodeFactory = new CanvasNodeFactory_1.default();
        this.tilemapFactory = new TilemapFactory_1.default();
        this.canvasNodeFactory.init(scene);
        this.tilemapFactory.init(scene, tilemaps);
    }
    // Expose all of the factories through the factory manager
    /**
     * Adds an instance of a UIElement to the current scene - i.e. any class that extends UIElement
     * @param type The type of UIElement to add
     * @param layerName The layer to add the UIElement to
     * @param options Any additional arguments to feed to the constructor
     * @returns A new UIElement
     */
    uiElement(type, layerName, options) {
        return this.canvasNodeFactory.addUIElement(type, layerName, options);
    }
    /**
     * Adds a sprite to the current scene
     * @param key The key of the image the sprite will represent
     * @param layerName The layer on which to add the sprite
     * @returns A new Sprite
     */
    sprite(key, layerName) {
        return this.canvasNodeFactory.addSprite(key, layerName);
    }
    /**
     * Adds an AnimatedSprite to the current scene
     * @param key The key of the image the sprite will represent
     * @param layerName The layer on which to add the sprite
     * @returns A new AnimatedSprite
     */
    animatedSprite(constr, key, layerName) {
        return this.canvasNodeFactory.addAnimatedSprite(constr, key, layerName);
    }
    /**
     * Adds a new graphic element to the current Scene
     * @param type The type of graphic to add
     * @param layerName The layer on which to add the graphic
     * @param options Any additional arguments to send to the graphic constructor
     * @returns A new Graphic
     */
    graphic(type, layerName, options) {
        return this.canvasNodeFactory.addGraphic(type, layerName, options);
    }
    /**
     * Adds a tilemap to the scene
     * @param key The key of the loaded tilemap to load
     * @param constr The constructor of the desired tilemap
     * @param args Additional arguments to send to the tilemap constructor
     * @returns An array of Layers, each of which contains a layer of the tilemap as its own Tilemap instance.
     */
    tilemap(key, scale) {
        return this.tilemapFactory.add(key, scale);
    }
}
exports.default = FactoryManager;

},{"./CanvasNodeFactory":90,"./TilemapFactory":92}],92:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.TilemapOrientation = void 0;
const ResourceManager_1 = __importDefault(require("../../ResourceManager/ResourceManager"));
const OrthogonalTilemap_1 = __importDefault(require("../../Nodes/Tilemaps/OrthogonalTilemap"));
const Tileset_1 = __importDefault(require("../../DataTypes/Tilesets/Tileset"));
const Vec2_1 = __importDefault(require("../../DataTypes/Vec2"));
const PositionGraph_1 = __importDefault(require("../../DataTypes/Graphs/PositionGraph"));
const Navmesh_1 = __importDefault(require("../../Pathfinding/Navmesh"));
const IsometricTilemap_1 = __importDefault(require("../../Nodes/Tilemaps/IsometricTilemap"));
const StaggeredIsometricTilemap_1 = __importDefault(require("../../Nodes/Tilemaps/StaggeredIsometricTilemap"));
// @ignorePage
var TilemapOrientation;
(function (TilemapOrientation) {
    TilemapOrientation["ORTHOGONAL"] = "orthogonal";
    TilemapOrientation["ISOMETRIC"] = "isometric";
    TilemapOrientation["STAGGERED_ISOMETRIC"] = "staggered";
})(TilemapOrientation = exports.TilemapOrientation || (exports.TilemapOrientation = {}));
/**
 * A factory that abstracts adding @reference[Tilemap]s to the @reference[Scene].
 * Access methods in this factory through Scene.add.[methodName]().
 */
class TilemapFactory {
    constructor() {
        // TODO - This is specifically catered to Tiled tilemaps right now. In the future,
        // it would be good to have a "parseTilemap" function that would convert the tilemap
        // data into a standard format. This could allow for support from other programs
        // or the development of an internal level builder tool
        /**
         * Adds a tilemap to the scene
         * @param key The key of the loaded tilemap to load
         * @param constr The constructor of the desired tilemap
         * @param args Additional arguments to send to the tilemap constructor
         * @returns An array of Layers, each of which contains a layer of the tilemap as its own Tilemap instance.
         */
        this.add = (key, scale = new Vec2_1.default(1, 1)) => {
            // Get Tilemap Data
            let tilemapData = this.resourceManager.getTilemap(key);
            // Set the constructor for this tilemap to either be orthographic or isometric
            let constr;
            switch (tilemapData.orientation) {
                case TilemapOrientation.ORTHOGONAL: {
                    constr = OrthogonalTilemap_1.default;
                    break;
                }
                case TilemapOrientation.ISOMETRIC: {
                    constr = IsometricTilemap_1.default;
                    break;
                }
                case TilemapOrientation.STAGGERED_ISOMETRIC: {
                    constr = StaggeredIsometricTilemap_1.default;
                    break;
                }
                default: {
                    throw new Error(`Unknown Tilemap Orientation "${tilemapData.orientation}"`);
                }
            }
            // Initialize the return value array
            let sceneLayers = new Array();
            // Create all of the tilesets for this tilemap
            let tilesets = new Array();
            let collectionTiles = new Array();
            for (let tileset of tilemapData.tilesets) {
                if (tileset.image) {
                    // If this is a standard tileset and not a collection, create a tileset for it.
                    // TODO - We are ignoring collection tilesets for now. This is likely not a great idea in practice,
                    // as theoretically someone could want to use one for a standard tilemap. We are assuming for now
                    // that we only want to use them for object layers
                    tilesets.push(new Tileset_1.default(tileset));
                }
                else {
                    tileset.tiles.forEach(tile => tile.id += tileset.firstgid);
                    collectionTiles.push(...tileset.tiles);
                }
            }
            // Loop over the layers of the tilemap and create tiledlayers or object layers
            for (let layer of tilemapData.layers) {
                let sceneLayer;
                let isParallaxLayer = false;
                let depth = 0;
                if (layer.properties) {
                    for (let prop of layer.properties) {
                        if (prop.name === "Parallax") {
                            isParallaxLayer = prop.value;
                        }
                        else if (prop.name === "Depth") {
                            depth = prop.value;
                        }
                    }
                }
                if (isParallaxLayer) {
                    sceneLayer = this.scene.addParallaxLayer(layer.name, new Vec2_1.default(1, 1), depth);
                }
                else {
                    sceneLayer = this.scene.addLayer(layer.name, depth);
                }
                if (layer.type === "tilelayer") {
                    // Create a new tilemap object for the layer
                    let tilemap = new constr(tilemapData, layer, tilesets, scale);
                    tilemap.id = this.scene.generateId();
                    tilemap.setScene(this.scene);
                    // Add tilemap to scene
                    this.tilemaps.push(tilemap);
                    sceneLayer.addNode(tilemap);
                    // Register tilemap with physics if it's collidable
                    if (tilemap.isCollidable) {
                        tilemap.addPhysics();
                        if (layer.properties) {
                            for (let item of layer.properties) {
                                if (item.name === "Group") {
                                    tilemap.setGroup(item.value);
                                }
                            }
                        }
                    }
                }
                else {
                    let isNavmeshPoints = false;
                    let navmeshName;
                    let edges;
                    if (layer.properties) {
                        for (let prop of layer.properties) {
                            if (prop.name === "NavmeshPoints") {
                                isNavmeshPoints = true;
                            }
                            else if (prop.name === "name") {
                                navmeshName = prop.value;
                            }
                            else if (prop.name === "edges") {
                                edges = prop.value;
                            }
                        }
                    }
                    if (isNavmeshPoints) {
                        let g = new PositionGraph_1.default();
                        for (let obj of layer.objects) {
                            g.addPositionedNode(new Vec2_1.default(obj.x, obj.y));
                        }
                        for (let edge of edges) {
                            g.addEdge(edge.from, edge.to);
                        }
                        this.scene.getNavigationManager().addNavigableEntity(navmeshName, new Navmesh_1.default(g));
                        continue;
                    }
                    // Layer is an object layer, so add each object as a sprite to a new layer
                    for (let obj of layer.objects) {
                        // Check if obj is collidable
                        let hasPhysics = false;
                        let isCollidable = false;
                        let isTrigger = false;
                        let onEnter = null;
                        let onExit = null;
                        let triggerGroup = null;
                        let group = "";
                        if (obj.properties) {
                            for (let prop of obj.properties) {
                                if (prop.name === "HasPhysics") {
                                    hasPhysics = prop.value;
                                }
                                else if (prop.name === "Collidable") {
                                    isCollidable = prop.value;
                                }
                                else if (prop.name === "Group") {
                                    group = prop.value;
                                }
                                else if (prop.name === "IsTrigger") {
                                    isTrigger = prop.value;
                                }
                                else if (prop.name === "TriggerGroup") {
                                    triggerGroup = prop.value;
                                }
                                else if (prop.name === "TriggerOnEnter") {
                                    onEnter = prop.value;
                                }
                                else if (prop.name === "TriggerOnExit") {
                                    onExit = prop.value;
                                }
                            }
                        }
                        let sprite;
                        // Check if obj is a tile from a tileset
                        for (let tileset of tilesets) {
                            if (tileset.hasTile(obj.gid)) {
                                // The object is a tile from this set
                                let imageKey = tileset.getImageKey();
                                let offset = tileset.getImageOffsetForTile(obj.gid);
                                sprite = this.scene.add.sprite(imageKey, layer.name);
                                let size = tileset.getTileSize().clone();
                                sprite.position.set((obj.x + size.x / 2) * scale.x, (obj.y - size.y / 2) * scale.y);
                                sprite.setImageOffset(offset);
                                sprite.size.copy(size);
                                sprite.scale.set(scale.x, scale.y);
                            }
                        }
                        // Not in a tileset, must correspond to a collection
                        if (!sprite) {
                            for (let tile of collectionTiles) {
                                if (obj.gid === tile.id) {
                                    let imageKey = tile.image;
                                    sprite = this.scene.add.sprite(imageKey, layer.name);
                                    sprite.position.set((obj.x + tile.imagewidth / 2) * scale.x, (obj.y - tile.imageheight / 2) * scale.y);
                                    sprite.scale.set(scale.x, scale.y);
                                }
                            }
                        }
                        // Now we have sprite. Associate it with our physics object if there is one
                        if (hasPhysics) {
                            // Make the sprite a static physics object
                            sprite.addPhysics(sprite.boundary.clone(), Vec2_1.default.ZERO, isCollidable, true);
                            sprite.setGroup(group);
                            if (isTrigger && triggerGroup !== null) {
                                sprite.setTrigger(triggerGroup, onEnter, onExit);
                            }
                        }
                    }
                }
                // Update the return value
                sceneLayers.push(sceneLayer);
            }
            return sceneLayers;
        };
    }
    init(scene, tilemaps) {
        this.scene = scene;
        this.tilemaps = tilemaps;
        this.resourceManager = ResourceManager_1.default.getInstance();
    }
}
exports.default = TilemapFactory;

},{"../../DataTypes/Graphs/PositionGraph":14,"../../DataTypes/Tilesets/Tileset":25,"../../DataTypes/Vec2":26,"../../Nodes/Tilemaps/IsometricTilemap":52,"../../Nodes/Tilemaps/OrthogonalTilemap":53,"../../Nodes/Tilemaps/StaggeredIsometricTilemap":54,"../../Pathfinding/Navmesh":63,"../../ResourceManager/ResourceManager":89}],93:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const MathUtils_1 = __importDefault(require("../Utils/MathUtils"));
/**
 * A layer in the scene. Layers are used for sorting @reference[GameNode]s by depth.
 */
class Layer {
    /**
     * Creates a new layer. To do this in a game, use the addLayer() method in @refrence[Scene]
     * @param scene The scene to add the layer to
     * @param name The name of the layer
     */
    constructor(scene, name) {
        this.scene = scene;
        this.name = name;
        this.paused = false;
        this.hidden = false;
        this.alpha = 1;
        this.items = new Array();
        this.ySort = false;
        this.depth = 0;
    }
    /**
     * Retreives the name of the layer
     * @returns The name of the layer
     */
    getName() {
        return this.name;
    }
    /**
     * Pauses/Unpauses the layer. Affects all elements in this layer
     * @param pauseValue True if the layer should be paused, false if not
     */
    setPaused(pauseValue) {
        this.paused = pauseValue;
    }
    /**
     * Returns whether or not the layer is paused
     */
    isPaused() {
        return this.paused;
    }
    /**
     * Sets the opacity of the layer
     * @param alpha The new opacity value in the range [0, 1]
     */
    setAlpha(alpha) {
        this.alpha = MathUtils_1.default.clamp(alpha, 0, 1);
    }
    /**
     * Gets the opacity of the layer
     * @returns The opacity
     */
    getAlpha() {
        return this.alpha;
    }
    /**
     * Sets the layer's hidden value. If hidden, a layer will not be rendered, but will still update
     * @param hidden The hidden value of the layer
     */
    setHidden(hidden) {
        this.hidden = hidden;
    }
    /**
     * Returns the hideen value of the lyaer
     * @returns True if the scene is hidden, false otherwise
     */
    isHidden() {
        return this.hidden;
    }
    /** Pauses this scene and hides it */
    disable() {
        this.paused = true;
        this.hidden = true;
    }
    /** Unpauses this layer and makes it visible */
    enable() {
        this.paused = false;
        this.hidden = false;
    }
    /**
     * Sets whether or not the scene will ySort automatically.
     * ySorting means that CanvasNodes on this layer will have their depth sorted depending on their y-value.
     * This means that if an object is "higher" in the scene, it will sort behind objects that are "lower".
     * This is useful for 3/4 view games, or similar situations, where you sometimes want to be in front of objects,
     * and other times want to be behind the same objects.
     * @param ySort True if ySorting should be active, false if not
     */
    setYSort(ySort) {
        this.ySort = ySort;
    }
    /**
     * Gets the ySort status of the scene
     * @returns True if ySorting is occurring, false otherwise
     */
    getYSort() {
        return this.ySort;
    }
    /**
     * Sets the depth of the layer compared to other layers. A larger number means the layer will be closer to the screen.
     * @param depth The depth of the layer.
     */
    setDepth(depth) {
        this.depth = depth;
    }
    /**
     * Retrieves the depth of the layer.
     * @returns The depth
     */
    getDepth() {
        return this.depth;
    }
    /**
     * Adds a node to this layer
     * @param node The node to add to this layer.
     */
    addNode(node) {
        this.items.push(node);
        node.setLayer(this);
    }
    /**
     * Removes a node from this layer
     * @param node The node to remove
     * @returns true if the node was removed, false otherwise
     */
    removeNode(node) {
        // Find and remove the node
        let index = this.items.indexOf(node);
        if (index !== -1) {
            this.items.splice(index, 1);
            node.setLayer(undefined);
        }
    }
    /**
     * Retreives all GameNodes from this layer
     * @returns an Array that contains all of the GameNodes in this layer.
     */
    getItems() {
        return this.items;
    }
}
exports.default = Layer;

},{"../Utils/MathUtils":108}],94:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Layer_1 = __importDefault(require("../Layer"));
/**
 * An extension of a Layer that has a parallax value.
 */
class ParallaxLayer extends Layer_1.default {
    /**
     * Creates a new ParallaxLayer.
     * Use addParallaxLayer() in @reference[Scene] to add a layer of this type to your game.
     * @param scene The Scene to add this ParallaxLayer to
     * @param name The name of the ParallaxLayer
     * @param parallax The parallax level
     */
    constructor(scene, name, parallax) {
        super(scene, name);
        this.parallax = parallax;
    }
}
exports.default = ParallaxLayer;

},{"../Layer":93}],95:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Vec2_1 = __importDefault(require("../../DataTypes/Vec2"));
const ParallaxLayer_1 = __importDefault(require("./ParallaxLayer"));
/**
 * A Layer strictly to be used for managing UIElements.
 * This is intended to be a Layer that always stays in the same place,
 * and thus renders things like a HUD or an inventory without taking into consideration the \reference[Viewport] scroll.
 */
class UILayer extends ParallaxLayer_1.default {
    /**
     * Creates a new UILayer.
     * Use addUILayer() in @reference[Scene] to add a layer of this type to your game.
     * @param scene The Scene to add this UILayer to
     * @param name The name of the UILayer
     */
    constructor(scene, name) {
        super(scene, name, Vec2_1.default.ZERO);
    }
}
exports.default = UILayer;

},{"../../DataTypes/Vec2":26,"./ParallaxLayer":94}],96:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Layer_1 = __importDefault(require("./Layer"));
const Vec2_1 = __importDefault(require("../DataTypes/Vec2"));
const BasicPhysicsManager_1 = __importDefault(require("../Physics/BasicPhysicsManager"));
const SceneGraphArray_1 = __importDefault(require("../SceneGraph/SceneGraphArray"));
const FactoryManager_1 = __importDefault(require("./Factories/FactoryManager"));
const ResourceManager_1 = __importDefault(require("../ResourceManager/ResourceManager"));
const Receiver_1 = __importDefault(require("../Events/Receiver"));
const Emitter_1 = __importDefault(require("../Events/Emitter"));
const NavigationManager_1 = __importDefault(require("../Pathfinding/NavigationManager"));
const AIManager_1 = __importDefault(require("../AI/AIManager"));
const Map_1 = __importDefault(require("../DataTypes/Collections/Map"));
const ParallaxLayer_1 = __importDefault(require("./Layers/ParallaxLayer"));
const UILayer_1 = __importDefault(require("./Layers/UILayer"));
const CanvasNode_1 = __importDefault(require("../Nodes/CanvasNode"));
const SceneOptions_1 = __importDefault(require("./SceneOptions"));
const Debug_1 = __importDefault(require("../Debug/Debug"));
const TimerManager_1 = __importDefault(require("../Timing/TimerManager"));
const TweenManager_1 = __importDefault(require("../Rendering/Animations/TweenManager"));
const ParticleSystemManager_1 = __importDefault(require("../Rendering/Animations/ParticleSystemManager"));
/**
 * Scenes are the main container in the game engine.
 * Your main scene is the current level or menu of the game, and will contain all of the GameNodes needed.
 * Scenes provide an easy way to load assets, add assets to the game world, and unload assets,
 * and have lifecycle methods exposed for these functions.
 */
class Scene {
    /**
     * Creates a new Scene. To add a new Scene in your game, use changeToScene() in @reference[SceneManager]
     * @param viewport The viewport of the game
     * @param sceneManager The SceneManager that owns this Scene
     * @param renderingManager The RenderingManager that will handle this Scene's rendering
     * @param game The instance of the Game
     * @param options The options for Scene initialization
     */
    constructor(viewport, sceneManager, renderingManager, options) {
        this.sceneOptions = SceneOptions_1.default.parse(options === undefined ? {} : options);
        this.worldSize = new Vec2_1.default(500, 500);
        this.viewport = viewport;
        this.viewport.setBounds(0, 0, 2560, 1280);
        this.running = false;
        this.sceneManager = sceneManager;
        this.receiver = new Receiver_1.default();
        this.emitter = new Emitter_1.default();
        this.tilemaps = new Array();
        this.sceneGraph = new SceneGraphArray_1.default(this.viewport, this);
        this.layers = new Map_1.default();
        this.uiLayers = new Map_1.default();
        this.parallaxLayers = new Map_1.default();
        this.physicsManager = new BasicPhysicsManager_1.default(this.sceneOptions.physics);
        this.navManager = new NavigationManager_1.default();
        this.aiManager = new AIManager_1.default();
        this.renderingManager = renderingManager;
        this.add = new FactoryManager_1.default(this, this.tilemaps);
        this.load = ResourceManager_1.default.getInstance();
        this.resourceManager = this.load;
        // Get the timer manager and clear any existing timers
        TimerManager_1.default.getInstance().clearTimers();
    }
    /** A lifecycle method that gets called immediately after a new scene is created, before anything else. */
    initScene(init) { }
    /** A lifecycle method that gets called when a new scene is created. Load all files you wish to access in the scene here. */
    loadScene() { }
    /** A lifecycle method called strictly after loadScene(). Create any game objects you wish to use in the scene here. */
    startScene() { }
    /**
     * A lifecycle method called every frame of the game. This is where you can dynamically do things like add in new enemies
     * @param delta The time this frame represents
     */
    updateScene(deltaT) { }
    /** A lifecycle method that gets called on scene destruction. Specify which files you no longer need for garbage collection. */
    unloadScene() { }
    update(deltaT) {
        this.updateScene(deltaT);
        // Do time updates
        TimerManager_1.default.getInstance().update(deltaT);
        // Do all AI updates
        this.aiManager.update(deltaT);
        // Update all physics objects
        this.physicsManager.update(deltaT);
        // Update all canvas objects
        this.sceneGraph.update(deltaT);
        // Update all tilemaps
        this.tilemaps.forEach(tilemap => {
            if (!tilemap.getLayer().isPaused()) {
                tilemap.update(deltaT);
            }
        });
        // Update all tweens
        TweenManager_1.default.getInstance().update(deltaT);
        // Update all particle systems
        ParticleSystemManager_1.default.getInstance().update(deltaT);
        // Update viewport
        this.viewport.update(deltaT);
    }
    /**
     * Collects renderable sets and coordinates with the RenderingManager to draw the Scene
     */
    render() {
        // Get the visible set of nodes
        let visibleSet = this.sceneGraph.getVisibleSet();
        // Add parallax layer items to the visible set (we're rendering them all for now)
        this.parallaxLayers.forEach(key => {
            let pLayer = this.parallaxLayers.get(key);
            for (let node of pLayer.getItems()) {
                if (node instanceof CanvasNode_1.default) {
                    visibleSet.push(node);
                }
            }
        });
        // Send the visible set, tilemaps, and uiLayers to the renderer
        this.renderingManager.render(visibleSet, this.tilemaps, this.uiLayers);
        let nodes = this.sceneGraph.getAllNodes();
        this.tilemaps.forEach(tilemap => tilemap.visible ? nodes.push(tilemap) : 0);
        Debug_1.default.setNodes(nodes);
    }
    /**
     * Sets the scene as running or not
     * @param running True if the Scene should be running, false if not
     */
    setRunning(running) {
        this.running = running;
    }
    /**
     * Returns whether or not the Scene is running
     * @returns True if the scene is running, false otherwise
     */
    isRunning() {
        return this.running;
    }
    /**
     * Removes a node from this Scene
     * @param node The node to remove
     */
    remove(node) {
        // Remove from the scene graph
        if (node instanceof CanvasNode_1.default) {
            this.sceneGraph.removeNode(node);
        }
    }
    /** Destroys this scene and all nodes in it */
    destroy() {
        for (let node of this.sceneGraph.getAllNodes()) {
            node.destroy();
        }
        for (let tilemap of this.tilemaps) {
            tilemap.destroy();
        }
        this.receiver.destroy();
        delete this.sceneGraph;
        delete this.physicsManager;
        delete this.navManager;
        delete this.aiManager;
        delete this.receiver;
    }
    /**
     * Adds a new layer to the scene and returns it
     * @param name The name of the new layer
     * @param depth The depth of the layer
     * @returns The newly created Layer
     */
    addLayer(name, depth) {
        if (this.layers.has(name) || this.parallaxLayers.has(name) || this.uiLayers.has(name)) {
            throw `Layer with name ${name} already exists`;
        }
        let layer = new Layer_1.default(this, name);
        this.layers.add(name, layer);
        if (depth) {
            layer.setDepth(depth);
        }
        return layer;
    }
    /**
     * Adds a new parallax layer to this scene and returns it
     * @param name The name of the parallax layer
     * @param parallax The parallax level
     * @param depth The depth of the layer
     * @returns The newly created ParallaxLayer
     */
    addParallaxLayer(name, parallax, depth) {
        if (this.layers.has(name) || this.parallaxLayers.has(name) || this.uiLayers.has(name)) {
            throw `Layer with name ${name} already exists`;
        }
        let layer = new ParallaxLayer_1.default(this, name, parallax);
        this.parallaxLayers.add(name, layer);
        if (depth) {
            layer.setDepth(depth);
        }
        return layer;
    }
    /**
     * Adds a new UILayer to the scene
     * @param name The name of the new UIlayer
     * @returns The newly created UILayer
     */
    addUILayer(name) {
        if (this.layers.has(name) || this.parallaxLayers.has(name) || this.uiLayers.has(name)) {
            throw `Layer with name ${name} already exists`;
        }
        let layer = new UILayer_1.default(this, name);
        this.uiLayers.add(name, layer);
        return layer;
    }
    /**
     * Gets a layer from the scene by name if it exists.
     * This can be a Layer or any of its subclasses
     * @param name The name of the layer
     * @returns The Layer found with that name
     */
    getLayer(name) {
        if (this.layers.has(name)) {
            return this.layers.get(name);
        }
        else if (this.parallaxLayers.has(name)) {
            return this.parallaxLayers.get(name);
        }
        else if (this.uiLayers.has(name)) {
            return this.uiLayers.get(name);
        }
        else {
            throw `Requested layer ${name} does not exist.`;
        }
    }
    /**
     * Returns true if this layer is a ParallaxLayer
     * @param name The name of the layer
     * @returns True if this layer is a ParallaxLayer
     */
    isParallaxLayer(name) {
        return this.parallaxLayers.has(name);
    }
    /**
     * Returns true if this layer is a UILayer
     * @param name The name of the layer
     * @returns True if this layer is ParallaxLayer
     */
    isUILayer(name) {
        return this.uiLayers.has(name);
    }
    /**
     * Returns the translation of this node with respect to camera space (due to the viewport moving).
     * This value is affected by the parallax level of the @reference[Layer] the node is on.
     * @param node The node to check the viewport with respect to
     * @returns A Vec2 containing the translation of viewport with respect to this node.
     */
    getViewTranslation(node) {
        let layer = node.getLayer();
        if (layer instanceof ParallaxLayer_1.default || layer instanceof UILayer_1.default) {
            return this.viewport.getOrigin().mult(layer.parallax);
        }
        else {
            return this.viewport.getOrigin();
        }
    }
    /**
     * Returns the scale level of the view
     * @returns The zoom level of the viewport
    */
    getViewScale() {
        return this.viewport.getZoomLevel();
    }
    /**
     * Returns the Viewport associated with this scene
     * @returns The current Viewport
     */
    getViewport() {
        return this.viewport;
    }
    /**
     * Gets the world size of this Scene
     * @returns The world size in a Vec2
     */
    getWorldSize() {
        return this.worldSize;
    }
    /**
     * Gets the SceneGraph associated with this Scene
     * @returns The SceneGraph
     */
    getSceneGraph() {
        return this.sceneGraph;
    }
    /**
     * Gets the PhysicsManager associated with this Scene
     * @returns The PhysicsManager
     */
    getPhysicsManager() {
        return this.physicsManager;
    }
    /**
     * Gets the NavigationManager associated with this Scene
     * @returns The NavigationManager
     */
    getNavigationManager() {
        return this.navManager;
    }
    /**
     * Gets the AIManager associated with this Scene
     * @returns The AIManager
     */
    getAIManager() {
        return this.aiManager;
    }
    /**
     * Generates an ID for a GameNode
     * @returns The new ID
     */
    generateId() {
        return this.sceneManager.generateId();
    }
    /**
     * Retrieves a Tilemap in this Scene
     * @param name The name of the Tilemap
     * @returns The Tilemap, if one this name exists, otherwise null
     */
    getTilemap(name) {
        for (let tilemap of this.tilemaps) {
            if (tilemap.name === name) {
                return tilemap;
            }
        }
        return null;
    }
}
exports.default = Scene;

},{"../AI/AIManager":1,"../DataTypes/Collections/Map":8,"../DataTypes/Vec2":26,"../Debug/Debug":27,"../Events/Emitter":29,"../Events/Receiver":33,"../Nodes/CanvasNode":41,"../Pathfinding/NavigationManager":61,"../Physics/BasicPhysicsManager":66,"../Rendering/Animations/ParticleSystemManager":74,"../Rendering/Animations/TweenManager":76,"../ResourceManager/ResourceManager":89,"../SceneGraph/SceneGraphArray":100,"../Timing/TimerManager":104,"./Factories/FactoryManager":91,"./Layer":93,"./Layers/ParallaxLayer":94,"./Layers/UILayer":95,"./SceneOptions":98}],97:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const ResourceManager_1 = __importDefault(require("../ResourceManager/ResourceManager"));
const Receiver_1 = __importDefault(require("../Events/Receiver"));
const GameEventType_1 = require("../Events/GameEventType");
/**
 * The SceneManager acts as an interface to create Scenes, and handles the lifecycle methods of Scenes.
 * It gives Scenes access to information they need from the @reference[Game] class while keeping a layer of separation.
 */
class SceneManager {
    /**
     * Creates a new SceneManager
     * @param viewport The Viewport of the game
     * @param game The Game instance
     * @param renderingManager The RenderingManager of the game
     */
    constructor(viewport, renderingManager) {
        this.resourceManager = ResourceManager_1.default.getInstance();
        this.viewport = viewport;
        this.renderingManager = renderingManager;
        this.idCounter = 0;
        this.pendingScene = null;
        this.receiver = new Receiver_1.default();
        this.receiver.subscribe(GameEventType_1.GameEventType.CHANGE_SCENE);
    }
    /**
     * Add a scene as the main scene.
     * Use this method if you've created a subclass of Scene, and you want to add it as the main Scene.
     * @param constr The constructor of the scene to add
     * @param init An object to pass to the init function of the new scene
     */
    changeToScene(constr, init, options) {
        console.log("Creating the new scene - change is pending until next update");
        this.pendingScene = new constr(this.viewport, this, this.renderingManager, options);
        this.pendingSceneInit = init;
    }
    doSceneChange() {
        console.log("Performing scene change");
        this.viewport.setCenter(this.viewport.getHalfSize().x, this.viewport.getHalfSize().y);
        if (this.currentScene) {
            console.log("Unloading old scene");
            this.currentScene.unloadScene();
            console.log("Destroying old scene");
            this.currentScene.destroy();
        }
        console.log("Unloading old resources...");
        this.resourceManager.unloadAllResources();
        // Make the pending scene the current one
        this.currentScene = this.pendingScene;
        // Make the pending scene null
        this.pendingScene = null;
        // Init the scene
        this.currentScene.initScene(this.pendingSceneInit);
        // Enqueue all scene asset loads
        this.currentScene.loadScene();
        // Load all assets
        console.log("Starting Scene Load");
        this.resourceManager.loadResourcesFromQueue(() => {
            console.log("Starting Scene");
            this.currentScene.startScene();
            this.currentScene.setRunning(true);
        });
        this.renderingManager.setScene(this.currentScene);
    }
    /**
     * Generates a unique ID
     * @returns A new ID
     */
    generateId() {
        return this.idCounter++;
    }
    /**
     * Renders the current Scene
     */
    render() {
        if (this.currentScene) {
            this.currentScene.render();
        }
    }
    /**
     * Updates the current Scene
     * @param deltaT The timestep of the Scene
     */
    update(deltaT) {
        while (this.receiver.hasNextEvent()) {
            let ev = this.receiver.getNextEvent();
            if (ev.type === GameEventType_1.GameEventType.CHANGE_SCENE)
                this.changeToScene(ev.data.get("scene"), ev.data.get("init"));
        }
        if (this.pendingScene !== null) {
            this.doSceneChange();
        }
        if (this.currentScene && this.currentScene.isRunning()) {
            this.currentScene.update(deltaT);
        }
    }
}
exports.default = SceneManager;

},{"../Events/GameEventType":32,"../Events/Receiver":33,"../ResourceManager/ResourceManager":89}],98:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// @ignorePage
/**
 * The options to give a @reference[Scene] for initialization
 */
class SceneOptions {
    static parse(options) {
        let sOpt = new SceneOptions();
        if (options.physics === undefined) {
            sOpt.physics = { groups: undefined, collisions: undefined };
        }
        else {
            sOpt.physics = options.physics;
        }
        return sOpt;
    }
}
exports.default = SceneOptions;

},{}],99:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Vec2_1 = __importDefault(require("../DataTypes/Vec2"));
/**
 * An abstract interface of a SceneGraph.
 * Exposes methods for use by other code, but leaves the implementation up to the subclasses.
 * The SceneGraph manages the positions of all GameNodes, and can easily prune a visible set for rendering.
 */
class SceneGraph {
    /**
     * Creates a new SceneGraph
     * @param viewport The viewport
     * @param scene The Scene this SceneGraph belongs to
     */
    constructor(viewport, scene) {
        this.viewport = viewport;
        this.scene = scene;
        this.nodeMap = new Array();
        this.idCounter = 0;
    }
    /**
     * Add a node to the SceneGraph
     * @param node The CanvasNode to add to the SceneGraph
     * @returns The SceneGraph ID of this newly added CanvasNode
     */
    addNode(node) {
        this.nodeMap[node.id] = node;
        this.addNodeSpecific(node, this.idCounter);
        this.idCounter += 1;
        return this.idCounter - 1;
    }
    ;
    /**
     * Removes a node from the SceneGraph
     * @param node The node to remove
     */
    removeNode(node) {
        // Find and remove node in O(n)
        this.nodeMap[node.id] = undefined;
        this.removeNodeSpecific(node, node.id);
    }
    ;
    /**
     * Get a specific node using its id
     * @param id The id of the CanvasNode to retrieve
     * @returns The node with this ID
     */
    getNode(id) {
        return this.nodeMap[id];
    }
    /**
     * Returns the nodes at specific coordinates
     * @param vecOrX The x-coordinate of the position, or the coordinates in a Vec2
     * @param y The y-coordinate of the position
     * @returns An array of nodes found at the position provided
     */
    getNodesAt(vecOrX, y = null) {
        if (vecOrX instanceof Vec2_1.default) {
            return this.getNodesAtCoords(vecOrX.x, vecOrX.y);
        }
        else {
            return this.getNodesAtCoords(vecOrX, y);
        }
    }
    /**
     * Returns all nodes in the SceneGraph
     * @returns An Array containing all nodes in the SceneGraph
     */
    getAllNodes() {
        let arr = new Array();
        for (let i = 0; i < this.nodeMap.length; i++) {
            if (this.nodeMap[i] !== undefined) {
                arr.push(this.nodeMap[i]);
            }
        }
        return arr;
    }
}
exports.default = SceneGraph;

},{"../DataTypes/Vec2":26}],100:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const SceneGraph_1 = __importDefault(require("./SceneGraph"));
const Stats_1 = __importDefault(require("../Debug/Stats"));
/**
 * An implementation of a SceneGraph that simply stored CanvasNodes in an array.
 */
class SceneGraphArray extends SceneGraph_1.default {
    /**
     * Creates a new SceneGraphArray
     * @param viewport The Viewport
     * @param scene The Scene this SceneGraph belongs to
     */
    constructor(viewport, scene) {
        super(viewport, scene);
        this.nodeList = new Array();
    }
    // @override
    addNodeSpecific(node, id) {
        this.nodeList.push(node);
    }
    // @override
    removeNodeSpecific(node, id) {
        let index = this.nodeList.indexOf(node);
        if (index > -1) {
            this.nodeList.splice(index, 1);
        }
    }
    // @override
    getNodesAtCoords(x, y) {
        let results = [];
        for (let node of this.nodeList) {
            if (node.contains(x, y)) {
                results.push(node);
            }
        }
        return results;
    }
    // @override
    getNodesInRegion(boundary) {
        let t0 = performance.now();
        let results = [];
        for (let node of this.nodeList) {
            if (boundary.overlaps(node.boundary)) {
                results.push(node);
            }
        }
        let t1 = performance.now();
        Stats_1.default.log("sgquery", (t1 - t0));
        return results;
    }
    update(deltaT) {
        let t0 = performance.now();
        for (let node of this.nodeList) {
            if (!node.getLayer().isPaused()) {
                node.update(deltaT);
            }
        }
        let t1 = performance.now();
        Stats_1.default.log("sgupdate", (t1 - t0));
    }
    render(ctx) { }
    // @override
    getVisibleSet() {
        let visibleSet = new Array();
        for (let node of this.nodeList) {
            if (!node.getLayer().isHidden() && node.visible && this.viewport.includes(node)) {
                visibleSet.push(node);
            }
        }
        return visibleSet;
    }
}
exports.default = SceneGraphArray;

},{"../Debug/Stats":28,"./SceneGraph":99}],101:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Vec2_1 = __importDefault(require("../DataTypes/Vec2"));
const MathUtils_1 = __importDefault(require("../Utils/MathUtils"));
const Queue_1 = __importDefault(require("../DataTypes/Collections/Queue"));
const AABB_1 = __importDefault(require("../DataTypes/Shapes/AABB"));
const Input_1 = __importDefault(require("../Input/Input"));
const ParallaxLayer_1 = __importDefault(require("../Scene/Layers/ParallaxLayer"));
const UILayer_1 = __importDefault(require("../Scene/Layers/UILayer"));
/**
 * The viewport of the game. Corresponds to the visible window displayed in the browser.
 * The viewport keeps track of its position in the game world, and can act as a camera to follow objects.
 */
class Viewport {
    constructor(canvasSize, zoomLevel) {
        /** The amount that is zoomed in or out. */
        this.ZOOM_FACTOR = 1.2;
        this.view = new AABB_1.default(Vec2_1.default.ZERO, Vec2_1.default.ZERO);
        this.boundary = new AABB_1.default(Vec2_1.default.ZERO, Vec2_1.default.ZERO);
        this.lastPositions = new Queue_1.default();
        this.smoothingFactor = 10;
        this.scrollZoomEnabled = false;
        this.canvasSize = Vec2_1.default.ZERO;
        this.focus = Vec2_1.default.ZERO;
        // Set the size of the canvas
        this.setCanvasSize(canvasSize);
        // Set the size of the viewport
        this.setSize(canvasSize);
        this.setZoomLevel(zoomLevel);
        // Set the center (and make the viewport stay there)
        this.setCenter(this.view.halfSize.clone());
        this.setFocus(this.view.halfSize.clone());
    }
    /** Enables the viewport to zoom in and out */
    enableZoom() {
        this.scrollZoomEnabled = true;
    }
    /**
     * Returns the position of the viewport
     * @returns The center of the viewport as a Vec2
     */
    getCenter() {
        return this.view.center;
    }
    /**
     * Returns a new Vec2 with the origin of the viewport
     * @returns The top left cornder of the Vieport as a Vec2
     */
    getOrigin() {
        return new Vec2_1.default(this.view.left, this.view.top);
    }
    /**
     * Returns the region visible to this viewport
     * @returns The AABB containing the region visible to the viewport
     */
    getView() {
        return this.view;
    }
    /**
     * Set the position of the viewport
     * @param vecOrX The new position or the x-coordinate of the new position
     * @param y The y-coordinate of the new position
     */
    setCenter(vecOrX, y = null) {
        let pos;
        if (vecOrX instanceof Vec2_1.default) {
            pos = vecOrX;
        }
        else {
            pos = new Vec2_1.default(vecOrX, y);
        }
        this.view.center = pos;
    }
    /**
     * Returns the size of the viewport as a Vec2
     * @returns The half-size of the viewport as a Vec2
     */
    getHalfSize() {
        return this.view.getHalfSize();
    }
    /**
     * Sets the size of the viewport
     * @param vecOrX The new width of the viewport or the new size as a Vec2
     * @param y The new height of the viewport
     */
    setSize(vecOrX, y = null) {
        if (vecOrX instanceof Vec2_1.default) {
            this.view.setHalfSize(vecOrX.scaled(1 / 2));
        }
        else {
            this.view.setHalfSize(new Vec2_1.default(vecOrX / 2, y / 2));
        }
    }
    /**
     * Sets the half-size of the viewport
     * @param vecOrX The new half-width of the viewport or the new half-size as a Vec2
     * @param y The new height of the viewport
     */
    setHalfSize(vecOrX, y = null) {
        if (vecOrX instanceof Vec2_1.default) {
            this.view.setHalfSize(vecOrX.clone());
        }
        else {
            this.view.setHalfSize(new Vec2_1.default(vecOrX, y));
        }
    }
    /**
     * Updates the viewport with the size of the current Canvas
     * @param vecOrX The width of the canvas, or the canvas size as a Vec2
     * @param y The height of the canvas
     */
    setCanvasSize(vecOrX, y = null) {
        if (vecOrX instanceof Vec2_1.default) {
            this.canvasSize = vecOrX.clone();
        }
        else {
            this.canvasSize = new Vec2_1.default(vecOrX, y);
        }
    }
    /**
     * Sets the zoom level of the viewport
     * @param zoom The zoom level
     */
    setZoomLevel(zoom) {
        this.view.halfSize.copy(this.canvasSize.scaled(1 / zoom / 2));
    }
    /**
     * Gets the zoom level of the viewport
     * @returns The zoom level
     */
    getZoomLevel() {
        return this.canvasSize.x / this.view.hw / 2;
    }
    /**
     * Sets the smoothing factor for the viewport movement.
     * @param smoothingFactor The smoothing factor for the viewport
     */
    setSmoothingFactor(smoothingFactor) {
        if (smoothingFactor < 1)
            smoothingFactor = 1;
        this.smoothingFactor = smoothingFactor;
    }
    /**
     * Tells the viewport to focus on a point. Overidden by "following".
     * @param focus The point the  viewport should focus on
     */
    setFocus(focus) {
        this.focus.copy(focus);
    }
    /**
     * Returns true if the CanvasNode is inside of the viewport
     * @param node The node to check
     * @returns True if the node is currently visible in the viewport, false if not
     */
    includes(node) {
        let parallax = node.getLayer() instanceof ParallaxLayer_1.default || node.getLayer() instanceof UILayer_1.default ? node.getLayer().parallax : new Vec2_1.default(1, 1);
        let center = this.view.center.clone();
        this.view.center.mult(parallax);
        let overlaps = this.view.overlaps(node.boundary);
        this.view.center = center;
        return overlaps;
    }
    // TODO: Put some error handling on this for trying to make the bounds too small for the viewport
    // TODO: This should probably be done automatically, or should consider the aspect ratio or something
    /**
     * Sets the bounds of the viewport
     * @param lowerX The left edge of the viewport
     * @param lowerY The top edge of the viewport
     * @param upperX The right edge of the viewport
     * @param upperY The bottom edge of the viewport
     */
    setBounds(lowerX, lowerY, upperX, upperY) {
        let hwidth = (upperX - lowerX) / 2;
        let hheight = (upperY - lowerY) / 2;
        let x = lowerX + hwidth;
        let y = lowerY + hheight;
        this.boundary.center.set(x, y);
        this.boundary.halfSize.set(hwidth, hheight);
    }
    /**
     * Make the viewport follow the specified GameNode
     * @param node The GameNode to follow
     */
    follow(node) {
        this.following = node;
    }
    updateView() {
        if (this.lastPositions.getSize() > this.smoothingFactor) {
            this.lastPositions.dequeue();
        }
        // Get the average of the last 10 positions
        let pos = Vec2_1.default.ZERO;
        this.lastPositions.forEach(position => pos.add(position));
        pos.scale(1 / this.lastPositions.getSize());
        // Set this position either to the object or to its bounds
        pos.x = MathUtils_1.default.clamp(pos.x, this.boundary.left + this.view.hw, this.boundary.right - this.view.hw);
        pos.y = MathUtils_1.default.clamp(pos.y, this.boundary.top + this.view.hh, this.boundary.bottom - this.view.hh);
        // Assure there are no lines in the tilemap
        pos.x = Math.floor(pos.x);
        pos.y = Math.floor(pos.y);
        this.view.center.copy(pos);
    }
    update(deltaT) {
        // If zoom is enabled
        if (this.scrollZoomEnabled) {
            if (Input_1.default.didJustScroll()) {
                let currentSize = this.view.getHalfSize().clone();
                if (Input_1.default.getScrollDirection() < 0) {
                    // Zoom in
                    currentSize.scale(1 / this.ZOOM_FACTOR);
                }
                else {
                    // Zoom out
                    currentSize.scale(this.ZOOM_FACTOR);
                }
                if (currentSize.x > this.boundary.hw) {
                    let factor = this.boundary.hw / currentSize.x;
                    currentSize.x = this.boundary.hw;
                    currentSize.y *= factor;
                }
                if (currentSize.y > this.boundary.hh) {
                    let factor = this.boundary.hh / currentSize.y;
                    currentSize.y = this.boundary.hh;
                    currentSize.x *= factor;
                }
                this.view.setHalfSize(currentSize);
            }
        }
        // If viewport is following an object
        if (this.following) {
            // Update our list of previous positions
            this.lastPositions.enqueue(this.following.position.clone());
        }
        else {
            this.lastPositions.enqueue(this.focus);
        }
        this.updateView();
    }
}
exports.default = Viewport;

},{"../DataTypes/Collections/Queue":9,"../DataTypes/Shapes/AABB":20,"../DataTypes/Vec2":26,"../Input/Input":34,"../Scene/Layers/ParallaxLayer":94,"../Scene/Layers/UILayer":95,"../Utils/MathUtils":108}],102:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.MAX_AUDIO_CHANNELS = exports.AudioChannelType = void 0;
const Map_1 = __importDefault(require("../DataTypes/Collections/Map"));
const Receiver_1 = __importDefault(require("../Events/Receiver"));
const ResourceManager_1 = __importDefault(require("../ResourceManager/ResourceManager"));
const GameEventType_1 = require("../Events/GameEventType");
/**
 * Manages any sounds or music needed for the game.
 * Through the EventQueue, exposes interface to play sounds so GameNodes can activate sounds without
 * needing direct references to the audio system
 */
class AudioManager {
    constructor() {
        this.initAudio();
        this.receiver = new Receiver_1.default();
        this.receiver.subscribe([
            GameEventType_1.GameEventType.PLAY_SOUND,
            GameEventType_1.GameEventType.STOP_SOUND,
            GameEventType_1.GameEventType.PLAY_MUSIC,
            GameEventType_1.GameEventType.PLAY_SFX,
            GameEventType_1.GameEventType.MUTE_CHANNEL,
            GameEventType_1.GameEventType.UNMUTE_CHANNEL
        ]);
        this.currentSounds = new Map_1.default();
        this.gainNodes = new Array(exports.MAX_AUDIO_CHANNELS);
        this.initGainNodes();
    }
    /**
     * Get the instance of the AudioManager class or create a new one if none exists
     * @returns The AudioManager
     */
    static getInstance() {
        if (!this.instance) {
            this.instance = new AudioManager();
        }
        return this.instance;
    }
    /**
     * Initializes the webAudio context
     */
    initAudio() {
        try {
            window.AudioContext = window.AudioContext; // || window.webkitAudioContext; 
            this.audioCtx = new AudioContext();
            console.log('Web Audio API successfully loaded');
        }
        catch (e) {
            console.warn('Web Audio API is not supported in this browser');
        }
    }
    initGainNodes() {
        for (let i = 0; i < exports.MAX_AUDIO_CHANNELS; i++) {
            this.gainNodes[i] = this.audioCtx.createGain();
        }
    }
    /**
     * Returns the current audio context
     * @returns The AudioContext
     */
    getAudioContext() {
        return this.audioCtx;
    }
    /*
        According to the MDN, create a new sound for every call:

        An AudioBufferSourceNode can only be played once; after each call to start(), you have to create a new node
        if you want to play the same sound again. Fortunately, these nodes are very inexpensive to create, and the
        actual AudioBuffers can be reused for multiple plays of the sound. Indeed, you can use these nodes in a
        "fire and forget" manner: create the node, call start() to begin playing the sound, and don't even bother to
        hold a reference to it. It will automatically be garbage-collected at an appropriate time, which won't be
        until sometime after the sound has finished playing.
    */
    /**
     * Creates a new sound from the key of a loaded audio file
     * @param key The key of the loaded audio file to create a new sound for
     * @returns The newly created AudioBuffer
     */
    createSound(key, holdReference, channel, options) {
        // Get audio buffer
        let buffer = ResourceManager_1.default.getInstance().getAudio(key);
        // Create a sound source
        var source = this.audioCtx.createBufferSource();
        // Tell the source which sound to play
        source.buffer = buffer;
        // Add any additional nodes
        const nodes = [source];
        // Do any additional nodes here?
        // Of course, there aren't any supported yet...
        // Add the gain node for this channel
        nodes.push(this.gainNodes[channel]);
        // Connect any nodes along the path
        for (let i = 1; i < nodes.length; i++) {
            nodes[i - 1].connect(nodes[i]);
        }
        // Connect the source to the context's destination
        nodes[nodes.length - 1].connect(this.audioCtx.destination);
        return source;
    }
    /**
     * Play the sound specified by the key
     * @param key The key of the sound to play
     * @param loop A boolean for whether or not to loop the sound
     * @param holdReference A boolean for whether or not we want to hold on to a reference of the audio node. This is good for playing music on a loop that will eventually need to be stopped.
     */
    playSound(key, loop, holdReference, channel, options) {
        let sound = this.createSound(key, holdReference, channel, options);
        if (loop) {
            sound.loop = true;
        }
        // Add a reference of the new sound to a map. This will allow us to stop a looping or long sound at a later time
        if (holdReference) {
            this.currentSounds.add(key, sound);
        }
        sound.start();
    }
    /**
     * Stop the sound specified by the key
     */
    stopSound(key) {
        let sound = this.currentSounds.get(key);
        if (sound) {
            sound.stop();
            this.currentSounds.delete(key);
        }
    }
    muteChannel(channel) {
        this.gainNodes[channel].gain.setValueAtTime(0, this.audioCtx.currentTime);
    }
    unmuteChannel(channel) {
        this.gainNodes[channel].gain.setValueAtTime(1, this.audioCtx.currentTime);
    }
    /**
     * Sets the volume of a channel using the GainNode for that channel. For more
     * information on GainNodes, see https://developer.mozilla.org/en-US/docs/Web/API/GainNode
     * @param channel The audio channel to set the volume for
     * @param volume The volume of the channel. 0 is muted. Values below zero will be set to zero.
     */
    static setVolume(channel, volume) {
        if (volume < 0) {
            volume = 0;
        }
        const am = AudioManager.getInstance();
        am.gainNodes[channel].gain.setValueAtTime(volume, am.audioCtx.currentTime);
    }
    /**
     * Returns the GainNode for this channel.
     * Learn more about GainNodes here https://developer.mozilla.org/en-US/docs/Web/API/GainNode
     * DON'T USE THIS UNLESS YOU KNOW WHAT YOU'RE DOING
     * @param channel The channel
     * @returns The GainNode for the specified channel
     */
    getChannelGainNode(channel) {
        return this.gainNodes[channel];
    }
    update(deltaT) {
        // Play each audio clip requested
        // TODO - Add logic to merge sounds if there are multiple of the same key
        while (this.receiver.hasNextEvent()) {
            let event = this.receiver.getNextEvent();
            if (event.type === GameEventType_1.GameEventType.PLAY_SOUND || event.type === GameEventType_1.GameEventType.PLAY_MUSIC || event.type === GameEventType_1.GameEventType.PLAY_SFX) {
                let soundKey = event.data.get("key");
                let loop = event.data.get("loop");
                let holdReference = event.data.get("holdReference");
                let channel = AudioChannelType.DEFAULT;
                if (event.type === GameEventType_1.GameEventType.PLAY_MUSIC) {
                    channel = AudioChannelType.MUSIC;
                }
                else if (GameEventType_1.GameEventType.PLAY_SFX) {
                    channel = AudioChannelType.SFX;
                }
                else if (event.data.has("channel")) {
                    channel = event.data.get("channel");
                }
                this.playSound(soundKey, loop, holdReference, channel, event.data);
            }
            if (event.type === GameEventType_1.GameEventType.STOP_SOUND) {
                let soundKey = event.data.get("key");
                this.stopSound(soundKey);
            }
            if (event.type === GameEventType_1.GameEventType.MUTE_CHANNEL) {
                this.muteChannel(event.data.get("channel"));
            }
            if (event.type === GameEventType_1.GameEventType.UNMUTE_CHANNEL) {
                this.unmuteChannel(event.data.get("channel"));
            }
        }
    }
}
exports.default = AudioManager;
var AudioChannelType;
(function (AudioChannelType) {
    AudioChannelType[AudioChannelType["DEFAULT"] = 0] = "DEFAULT";
    AudioChannelType[AudioChannelType["SFX"] = 1] = "SFX";
    AudioChannelType[AudioChannelType["MUSIC"] = 2] = "MUSIC";
    AudioChannelType[AudioChannelType["CUSTOM_1"] = 3] = "CUSTOM_1";
    AudioChannelType[AudioChannelType["CUSTOM_2"] = 4] = "CUSTOM_2";
    AudioChannelType[AudioChannelType["CUSTOM_3"] = 5] = "CUSTOM_3";
    AudioChannelType[AudioChannelType["CUSTOM_4"] = 6] = "CUSTOM_4";
    AudioChannelType[AudioChannelType["CUSTOM_5"] = 7] = "CUSTOM_5";
    AudioChannelType[AudioChannelType["CUSTOM_6"] = 8] = "CUSTOM_6";
    AudioChannelType[AudioChannelType["CUSTOM_7"] = 9] = "CUSTOM_7";
    AudioChannelType[AudioChannelType["CUSTOM_8"] = 10] = "CUSTOM_8";
    AudioChannelType[AudioChannelType["CUSTOM_9"] = 11] = "CUSTOM_9";
})(AudioChannelType = exports.AudioChannelType || (exports.AudioChannelType = {}));
exports.MAX_AUDIO_CHANNELS = 12;

},{"../DataTypes/Collections/Map":8,"../Events/GameEventType":32,"../Events/Receiver":33,"../ResourceManager/ResourceManager":89}],103:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.TimerState = void 0;
const MathUtils_1 = __importDefault(require("../Utils/MathUtils"));
const TimerManager_1 = __importDefault(require("./TimerManager"));
/** */
class Timer {
    constructor(time, onEnd, loop = false) {
        // Register this timer
        TimerManager_1.default.getInstance().addTimer(this);
        this.totalTime = time;
        this.timeLeft = 0;
        this.onEnd = onEnd;
        this.loop = loop;
        this.state = TimerState.STOPPED;
        this.numRuns = 0;
    }
    isStopped() {
        return this.state === TimerState.STOPPED;
    }
    isPaused() {
        return this.state === TimerState.PAUSED;
    }
    /**
     * Returns whether or not this timer has been run before
     * @returns true if it has been run at least once (after the latest reset), and false otherwise
     */
    hasRun() {
        return this.numRuns > 0;
    }
    start(time) {
        if (time !== undefined) {
            this.totalTime = time;
        }
        this.state = TimerState.ACTIVE;
        this.timeLeft = this.totalTime;
    }
    /** Resets this timer. Sets the progress back to zero, and sets the number of runs back to zero */
    reset() {
        this.timeLeft = this.totalTime;
        this.numRuns = 0;
    }
    pause() {
        this.state = TimerState.PAUSED;
    }
    update(deltaT) {
        if (this.state === TimerState.ACTIVE) {
            this.timeLeft -= deltaT * 1000;
            if (this.timeLeft <= 0) {
                this.timeLeft = MathUtils_1.default.clampLow0(this.timeLeft);
                this.end();
            }
        }
    }
    end() {
        // Update the state
        this.state = TimerState.STOPPED;
        this.numRuns += 1;
        // Call the end function if there is one
        if (this.onEnd) {
            this.onEnd();
        }
        // Loop if we want to
        if (this.loop) {
            this.state = TimerState.ACTIVE;
            this.timeLeft = this.totalTime;
        }
    }
    toString() {
        return "Timer: " + this.state + " - Time Left: " + this.timeLeft + "ms of " + this.totalTime + "ms";
    }
}
exports.default = Timer;
var TimerState;
(function (TimerState) {
    TimerState["ACTIVE"] = "ACTIVE";
    TimerState["PAUSED"] = "PAUSED";
    TimerState["STOPPED"] = "STOPPED";
})(TimerState = exports.TimerState || (exports.TimerState = {}));

},{"../Utils/MathUtils":108,"./TimerManager":104}],104:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class TimerManager {
    constructor() {
        this.timers = new Array();
    }
    static getInstance() {
        if (!this.instance) {
            this.instance = new TimerManager();
        }
        return this.instance;
    }
    addTimer(timer) {
        this.timers.push(timer);
    }
    clearTimers() {
        this.timers = new Array();
    }
    update(deltaT) {
        this.timers.forEach(timer => timer.update(deltaT));
    }
}
exports.default = TimerManager;

},{}],105:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const MathUtils_1 = __importDefault(require("./MathUtils"));
// TODO: This should be moved to the datatypes folder
/**
 * A Color util class that keeps track of colors like a vector, but can be converted into a string format
 */
class Color {
    /**
     * Creates a new color
     * @param r Red
     * @param g Green
     * @param b Blue
     * @param a Alpha
     */
    constructor(r = 0, g = 0, b = 0, a = 1) {
        this.r = r;
        this.g = g;
        this.b = b;
        this.a = a;
    }
    /**
     * Transparent color
     * @returns rgba(0, 0, 0, 0)
     */
    static get TRANSPARENT() {
        return new Color(0, 0, 0, 0);
    }
    /**
     * Red color
     * @returns rgb(255, 0, 0)
     */
    static get RED() {
        return new Color(255, 0, 0, 1);
    }
    /**
     * Green color
     * @returns rgb(0, 255, 0)
     */
    static get GREEN() {
        return new Color(0, 255, 0, 1);
    }
    /**
     * Blue color
     * @returns rgb(0, 0, 255)
     */
    static get BLUE() {
        return new Color(0, 0, 255, 1);
    }
    /**
     * Yellow color
     * @returns rgb(255, 255, 0)
     */
    static get YELLOW() {
        return new Color(255, 255, 0, 1);
    }
    /**
     * Magenta color
     * @returns rgb(255, 0, 255)
     */
    static get MAGENTA() {
        return new Color(255, 0, 255, 1);
    }
    /**
     * Cyan color
     * @returns rgb(0, 255, 255)
     */
    static get CYAN() {
        return new Color(0, 255, 255, 1);
    }
    /**
     * White color
     * @returns rgb(255, 255, 255)
     */
    static get WHITE() {
        return new Color(255, 255, 255, 1);
    }
    /**
     * Black color
     * @returns rgb(0, 0, 0)
     */
    static get BLACK() {
        return new Color(0, 0, 0, 1);
    }
    /**
     * Orange color
     * @returns rgb(255, 100, 0)
     */
    static get ORANGE() {
        return new Color(255, 100, 0, 1);
    }
    /**
     * Sets the color to the values provided
     * @param r Red
     * @param g Green
     * @param b Blue
     * @param a Alpha
     */
    set(r, g, b, a = 1) {
        this.r = r;
        this.g = g;
        this.b = b;
        this.a = a;
    }
    /**
     * Returns a new color slightly lighter than the current color
     * @returns A new lighter Color
     */
    lighten() {
        return new Color(MathUtils_1.default.clamp(this.r + 40, 0, 255), MathUtils_1.default.clamp(this.g + 40, 0, 255), MathUtils_1.default.clamp(this.b + 40, 0, 255), MathUtils_1.default.clamp(this.a + 10, 0, 255));
    }
    /**
     * Returns a new color slightly darker than the current color
     * @returns A new darker Color
     */
    darken() {
        return new Color(MathUtils_1.default.clamp(this.r - 40, 0, 255), MathUtils_1.default.clamp(this.g - 40, 0, 255), MathUtils_1.default.clamp(this.b - 40, 0, 255), MathUtils_1.default.clamp(this.a + 10, 0, 255));
    }
    /**
     * Returns this color as an array
     * @returns [r, g, b, a]
     */
    toArray() {
        return [this.r, this.g, this.b, this.a];
    }
    /**
     * Returns the color as a string of the form #RRGGBB
     * @returns #RRGGBB
     */
    toString() {
        return "#" + MathUtils_1.default.toHex(this.r, 2) + MathUtils_1.default.toHex(this.g, 2) + MathUtils_1.default.toHex(this.b, 2);
    }
    /**
     * Returns the color as a string of the form rgb(r, g, b)
     * @returns rgb(r, g, b)
     */
    toStringRGB() {
        return "rgb(" + this.r.toString() + ", " + this.g.toString() + ", " + this.b.toString() + ")";
    }
    /**
     * Returns the color as a string of the form rgba(r, g, b, a)
     * @returns rgba(r, g, b, a)
     */
    toStringRGBA() {
        if (this.a === 0) {
            return this.toStringRGB();
        }
        return "rgba(" + this.r.toString() + ", " + this.g.toString() + ", " + this.b.toString() + ", " + this.a.toString() + ")";
    }
    /**
     * Turns this color into a float32Array and changes color range to [0.0, 1.0]
     * @returns a Float32Array containing the color
     */
    toWebGL() {
        return new Float32Array([
            this.r / 255,
            this.g / 255,
            this.b / 255,
            this.a
        ]);
    }
    static fromStringHex(str) {
        let i = 0;
        if (str.charAt(0) == "#")
            i += 1;
        let r = MathUtils_1.default.fromHex(str.substring(i, i + 2));
        let g = MathUtils_1.default.fromHex(str.substring(i + 2, i + 4));
        let b = MathUtils_1.default.fromHex(str.substring(i + 4, i + 6));
        return new Color(r, g, b);
    }
}
exports.default = Color;

},{"./MathUtils":108}],106:[function(require,module,exports){
"use strict";
// @ignorePage
Object.defineProperty(exports, "__esModule", { value: true });
exports.EaseFunctionType = void 0;
class EaseFunctions {
    static easeInOutSine(x) {
        return -(Math.cos(Math.PI * x) - 1) / 2;
    }
    static easeOutInSine(x) {
        return x < 0.5 ? -Math.cos(Math.PI * (x + 0.5)) / 2 : -Math.cos(Math.PI * (x - 0.5)) / 2 + 1;
    }
    static easeOutSine(x) {
        return Math.sin((x * Math.PI) / 2);
    }
    static easeInSine(x) {
        return 1 - Math.cos((x * Math.PI) / 2);
    }
    static easeInOutQuint(x) {
        return x < 0.5 ? 16 * x * x * x * x * x : 1 - Math.pow(-2 * x + 2, 5) / 2;
    }
    static easeInOutQuad(x) {
        return x < 0.5 ? 2 * x * x : 1 - Math.pow(-2 * x + 2, 2) / 2;
    }
    static easeOutInQuad(x) {
        return x < 0.5 ? this.easeOutIn_OutPow(x, 2) : this.easeOutIn_InPow(x, 2);
    }
    static easeOutIn_OutPow(x, pow) {
        return 0.5 - Math.pow(-2 * x + 1, pow) / 2;
    }
    static easeOutIn_InPow(x, pow) {
        return 0.5 + Math.pow(2 * x - 1, pow) / 2;
    }
}
exports.default = EaseFunctions;
var EaseFunctionType;
(function (EaseFunctionType) {
    // SINE
    EaseFunctionType["IN_OUT_SINE"] = "easeInOutSine";
    EaseFunctionType["OUT_IN_SINE"] = "easeOutInSine";
    EaseFunctionType["IN_SINE"] = "easeInSine";
    EaseFunctionType["OUT_SINE"] = "easeOutSine";
    // QUAD
    EaseFunctionType["IN_OUT_QUAD"] = "easeInOutQuad";
    EaseFunctionType["OUT_IN_QUAD"] = "easeOutInQuad";
    // QUINT
    EaseFunctionType["IN_OUT_QUINT"] = "easeInOutQuint";
})(EaseFunctionType = exports.EaseFunctionType || (exports.EaseFunctionType = {}));

},{}],107:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const BinaryHeapSet_1 = __importDefault(require("../DataTypes/Collections/BinaryHeapSet"));
/** A class to provides some utility functions for graphs */
class GraphUtils {
    /**
     * An implementation of Djikstra's shortest path algorithm based on the one described in The Algorithm Design Manual.
     * @param g The graph
     * @param start The number to start the shortest path from
     * @returns An array containing the parent of each node of the Graph in the shortest path.
     */
    static djikstra(g, start) {
        let i; // Counter
        let p; // Pointer to edgenode
        let inTree = new Array(g.numVertices);
        let distance = new Array(g.numVertices);
        let parent = new Array(g.numVertices);
        let v; // Current vertex to process
        let w; // Candidate for next vertex
        let weight; // Edge weight
        let dist; // Best current distance from start
        for (i = 0; i < g.numVertices; i++) {
            inTree[i] = false;
            distance[i] = Infinity;
            parent[i] = -1;
        }
        distance[start] = 0;
        v = start;
        while (!inTree[v]) {
            inTree[v] = true;
            p = g.edges[v];
            while (p !== null) {
                w = p.y;
                weight = p.weight;
                if (distance[w] > distance[v] + weight) {
                    distance[w] = distance[v] + weight;
                    parent[w] = v;
                }
                p = p.next;
            }
            v = 0;
            dist = Infinity;
            for (i = 0; i <= g.numVertices; i++) {
                if (!inTree[i] && dist > distance[i]) {
                    dist = distance;
                    v = i;
                }
            }
        }
        return parent;
    }
    /**
     * An implementation of the A* algorithm
     * @param g the graph to search
     * @param start the node in the graph, g, to start searching from
     * @param goal the node in the graph, g, that A* should try to reach
     * @param heuristic the heuristic function used to calculate the f-score of a node in the graph, g
     * @return if a path between start and goal exists, an array of nodes representing the path from start
     * to goal found by A*; otherwise null
     */
    static astar(g, start, goal, heuristic) {
        // Construct a new map of the gScores - start gets a gScore of 0
        let gScore = new Map();
        gScore.set(start, 0);
        // Construct a new map of the fScores - f(n) = g(n) + h(n)
        let fScore = new Map();
        fScore.set(start, heuristic(start));
        // Construct a new map to hold the path from start to goal
        let cameFrom = new Map();
        // The open-set of nodes to be explored. Starts off with just starting node
        let openSet = new BinaryHeapSet_1.default((e1, e2) => {
            let e1fScore = fScore.has(e1) ? fScore.get(e1) : Number.POSITIVE_INFINITY;
            let e2fScore = fScore.has(e2) ? fScore.get(e2) : Number.POSITIVE_INFINITY;
            if (e1fScore < e2fScore)
                return 1;
            return 0;
        });
        openSet.push(start);
        // While there are elements in the openSet - explore the nodes
        while (!openSet.isEmpty()) {
            let current = openSet.peek();
            // If the next node is the goal - return the path
            if (current === goal) {
                let res = GraphUtils.astarPathBuilder(cameFrom, current);
                return res;
            }
            // Otherwise - remove the current node from the openSet and explore it's neighbors
            openSet.pop();
            // Iterate through the current node's edge list
            let edge = g.edges[current];
            while (edge !== null && edge !== undefined) {
                // Get the neighbor node from the edge
                let neighbor = edge.y;
                // Get tentative gscore
                let tentative_gscore = gScore.get(current) + edge.weight;
                // Get neighbors gscore - if neighbor doesn't have a gscore, default is positive infinity
                let neighbor_gscore = gScore.has(neighbor) ? gScore.get(neighbor) : Number.POSITIVE_INFINITY;
                if (tentative_gscore < neighbor_gscore) {
                    cameFrom.set(neighbor, current);
                    gScore.set(neighbor, tentative_gscore);
                    fScore.set(neighbor, tentative_gscore + heuristic(neighbor));
                    // If the openSet already contains the neighbor, then restore the heap about the neighbor
                    if (openSet.has(neighbor)) {
                        openSet.restore(neighbor);
                        // Otherwise, the openSet doesn't contain the neighbor, so we add the neighbor to the openSet
                    }
                    else {
                        openSet.push(neighbor);
                    }
                }
                edge = edge.next;
            }
        }
        return null;
    }
    static astarPathBuilder(cameFrom, current) {
        let path = new Array();
        path.push(current);
        while (cameFrom.has(current)) {
            current = cameFrom.get(current);
            path.push(current);
        }
        path.reverse();
        return path;
    }
}
exports.default = GraphUtils;

},{"../DataTypes/Collections/BinaryHeapSet":7}],108:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/** A class containing some utility functions for math operations */
class MathUtils {
    /**
     * Returns the sign of the value provided
     * @param x The value to extract the sign from
     * @returns -1 if the number is less than 0, 1 otherwise
     */
    static sign(x) {
        return x < 0 ? -1 : 1;
    }
    /**
     * Returns whether or not x is between a and b
     * @param a The min bound
     * @param b The max bound
     * @param x The value to check
     * @param exclusive Whether or not a and b are exclusive bounds
     * @returns True if x is between a and b, false otherwise
     */
    static between(a, b, x, exclusive) {
        if (exclusive) {
            return (a < x) && (x < b);
        }
        else {
            return (a <= x) && (x <= b);
        }
    }
    /**
     * Clamps the value x to the range [min, max], rounding up or down if needed
     * @param x The value to be clamped
     * @param min The min of the range
     * @param max The max of the range
     * @returns x, if it is between min and max, or min/max if it exceeds their bounds
     */
    static clamp(x, min, max) {
        if (x < min)
            return min;
        if (x > max)
            return max;
        return x;
    }
    /**
     * Clamps the value x to the range between 0 and 1
     * @param x The value to be clamped
     * @returns x, if it is between 0 and 1, or 0/1 if it exceeds their bounds
     */
    static clamp01(x) {
        return MathUtils.clamp(x, 0, 1);
    }
    /**
     * Clamps the lower end of the value of x to the range to min
     * @param x The value to be clamped
     * @param min The minimum allowed value of x
     * @returns x, if it is greater than min, otherwise min
     */
    static clampLow(x, min) {
        return x < min ? min : x;
    }
    /**
     * Clamps the lower end of the value of x to zero
     * @param x The value to be clamped
     * @returns x, if it is greater than 0, otherwise 0
     */
    static clampLow0(x) {
        return MathUtils.clampLow(x, 0);
    }
    static clampMagnitude(v, m) {
        if (v.magSq() > m * m) {
            return v.scaleTo(m);
        }
        else {
            return v;
        }
    }
    static changeRange(x, min, max, newMin, newMax) {
        return this.lerp(newMin, newMax, this.invLerp(min, max, x));
    }
    /**
     * Linear Interpolation
     * @param a The first value for the interpolation bound
     * @param b The second value for the interpolation bound
     * @param t The time we are interpolating to
     * @returns The value between a and b at time t
     */
    static lerp(a, b, t) {
        return a + t * (b - a);
    }
    /**
     * Inverse Linear Interpolation. Finds the time at which a value between a and b would occur
     * @param a The first value for the interpolation bound
     * @param b The second value for the interpolation bound
     * @param value The current value
     * @returns The time at which the current value occurs between a and b
     */
    static invLerp(a, b, value) {
        return (value - a) / (b - a);
    }
    /**
     * Cuts off decimal points of a number after a specified place
     * @param num The number to floor
     * @param place The last decimal place of the new number
     * @returns The floored number
     */
    static floorToPlace(num, place) {
        if (place === 0) {
            return Math.floor(num);
        }
        let factor = 10;
        while (place > 1) {
            factor != 10;
            place--;
        }
        return Math.floor(num * factor) / factor;
    }
    /**
     * Returns a number from a hex string
     * @param str the string containing the hex number
     * @returns the number in decimal represented by the hex string
     */
    static fromHex(str) {
        return parseInt(str, 16);
    }
    /**
     * Returns the number as a hexadecimal
     * @param num The number to convert to hex
     * @param minLength The length of the returned hex string (adds zero padding if needed)
     * @returns The hex representation of the number as a string
     */
    static toHex(num, minLength = null) {
        let factor = 1;
        while (factor * 16 < num) {
            factor *= 16;
        }
        let hexStr = "";
        while (factor >= 1) {
            let digit = Math.floor(num / factor);
            hexStr += MathUtils.toHexDigit(digit);
            num -= digit * factor;
            factor /= 16;
        }
        if (minLength !== null) {
            while (hexStr.length < minLength) {
                hexStr = "0" + hexStr;
            }
        }
        return hexStr;
    }
    /**
     * Converts a digit to hexadecimal. In this case, a digit is between 0 and 15 inclusive
     * @param num The digit to convert to hexadecimal
     * @returns The hex representation of the digit as a string
     */
    static toHexDigit(num) {
        if (num < 10) {
            return "" + num;
        }
        else {
            return String.fromCharCode(65 + num - 10);
        }
    }
}
exports.default = MathUtils;

},{}],109:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const MathUtils_1 = __importDefault(require("./MathUtils"));
class RenderingUtils {
    static toWebGLCoords(point, origin, worldSize) {
        return new Float32Array([
            MathUtils_1.default.changeRange(point.x, origin.x, origin.x + worldSize.x, -1, 1),
            MathUtils_1.default.changeRange(point.y, origin.y, origin.y + worldSize.y, 1, -1)
        ]);
    }
    static toWebGLScale(size, worldSize) {
        return new Float32Array([
            2 * size.x / worldSize.x,
            2 * size.y / worldSize.y,
        ]);
    }
    static toWebGLColor(color) {
        return new Float32Array([
            MathUtils_1.default.changeRange(color.r, 0, 255, 0, 1),
            MathUtils_1.default.changeRange(color.g, 0, 255, 0, 1),
            MathUtils_1.default.changeRange(color.b, 0, 255, 0, 1),
            color.a
        ]);
    }
}
exports.default = RenderingUtils;

},{"./MathUtils":108}],110:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/** Some utility functions for dealing with strings */
class StringUtils {
    /**
     * Extracts the path from a filepath that includes the file
     * @param filePath the filepath to extract the path from
     * @returns The path portion of the filepath provided
     */
    static getPathFromFilePath(filePath) {
        let splitPath = filePath.split("/");
        splitPath.pop();
        splitPath.push("");
        return splitPath.join("/");
    }
}
exports.default = StringUtils;

},{}],111:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const NPCAction_1 = __importDefault(require("./NPCAction"));
/**
 * An Idle action for the NPCGoapAI. Basically a default action for all of the NPCs
 * to do nothing.
 */
class IdleAction extends NPCAction_1.default {
    performAction(target) {
        this.finished();
    }
    handleInput(event) {
        switch (event.type) {
            default: {
                super.handleInput(event);
                break;
            }
        }
    }
}
exports.default = IdleAction;

},{"./NPCAction":112}],112:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const GoapAction_1 = __importDefault(require("../../../../Wolfie2D/AI/Goap/GoapAction"));
const BasicFinder_1 = __importDefault(require("../../../GameSystems/Searching/BasicFinder"));
const LaserGun_1 = __importDefault(require("../../../GameSystems/ItemSystem/Items/LaserGun"));
const Timer_1 = __importDefault(require("../../../../Wolfie2D/Timing/Timer"));
const Events_1 = require("../../../Events");
const GraphicTypes_1 = require("../../../../Wolfie2D/Nodes/Graphics/GraphicTypes");
const Vec2_1 = __importDefault(require("../../../../Wolfie2D/DataTypes/Vec2"));
/**
 * An abstract GoapAction for an NPC. All NPC actions consist of doing three things:
 *
 *  1. Selecting some target/location
 *  2. Going to or moving within range of the selected target
 *  3. Doing something at the target location
 *
 * The abstract NPC action takes care of the first two parts (selecting the target and moving to the target location). All
 * concrete implementations of the NPCAction will have to implement the abstract method performAction() which
 * gets called when the NPC reaches the target location.
 */
class NPCAction extends GoapAction_1.default {
    constructor(parent, actor) {
        super(parent, actor);
        this.targetFinder = new BasicFinder_1.default();
        this.targets = [];
        this.target = null;
        this.path = null;
        this.timer = new Timer_1.default(2000);
    }
    onEnter(options) {
        // Select the target location where the NPC should perform the action
        this.target = this.targetFinder.find(this.targets);
        // If we found a target, set the NPCs target to the target and find a path to the target
        if (this.target !== null && this.actor.position.distanceTo(this.target.position) < 200) {
            // Set the actors current target to be the target for this action
            this.actor.setTarget(this.target);
            // Construct a path from the actor to the target
            this.path = this.actor.getPath(this.actor.position, this.target.position);
        }
    }
    update(deltaT) {
        if (this.target !== null && this.path !== null && !this.path.isDone()) {
            if (this.actor.atTarget() || this.actor.position.distanceTo(this.target.position) < 50) {
                // this.performAction(this.target);
                let sprite = this.actor.getScene().add.sprite("laserGun", "primary");
                let line = this.actor.getScene().add.graphic(GraphicTypes_1.GraphicType.LINE, "primary", { start: Vec2_1.default.ZERO, end: Vec2_1.default.ZERO });
                this.lasergun = LaserGun_1.default.create(sprite, line);
                this.timer.isStopped() ? console.log("Weapon cooling down!") : console.log("Weapon ready!");
                // If the lasergun is not null and the lasergun is still in the actors inventory; shoot the lasergun
                if (this.timer.isStopped() && this.lasergun !== null) {
                    // Set the start, direction, and end position to shoot the laser gun
                    this.lasergun.laserStart.copy(this.actor.position);
                    this.lasergun.direction.copy(this.actor.position.dirTo(this.target.position));
                    this.lasergun.laserEnd.copy(this.target.position);
                    // Play the shooting animation for the laser gun  
                    this.lasergun.playShootAnimation();
                    this.actor.animation.playIfNotAlready("ATTACKING", false);
                    // Send a laser fired event
                    this.emitter.fireEvent(Events_1.ItemEvent.LASERGUN_FIRED, {
                        actorId: this.actor.id,
                        to: this.lasergun.laserStart.clone(),
                        from: this.lasergun.laserEnd.clone().sub(this.lasergun.laserStart)
                    });
                    this.timer.start();
                }
            }
            else {
                if (!this.actor.animation.isPlaying("ATTACKING"))
                    this.actor.animation.playIfNotAlready("IDLE", true);
                this.actor.moveOnPath(this.actor.speed * deltaT * 25, this.path);
                if (this.actor.collidedWithTilemap)
                    this.path = this.actor.getPath(this.actor.position, this.target.position);
            }
        }
        else {
            // // Select the target location where the NPC should perform the action
            this.target = this.targetFinder.find(this.targets);
            // If we found a target, set the NPCs target to the target and find a path to the target
            if (this.target !== null && this.actor.position.distanceTo(this.target.position) < 200) {
                // Set the actors current target to be the target for this action
                this.actor.setTarget(this.target);
                // Construct a path from the actor to the target
                this.path = this.actor.getPath(this.actor.position, this.target.position);
            }
            // this.finished();
        }
    }
    onExit() {
        // Clear the actor's current target
        this.actor.clearTarget();
        // Clear the reference to the target and the path in the action
        this.target = null;
        this.path = null;
        return {};
    }
    handleInput(event) {
        switch (event.type) {
            default: {
                throw new Error(`Unhandled event caught in NPCAction! Event type: ${event.type}`);
            }
        }
    }
    get targetFinder() { return this._targetFinder; }
    set targetFinder(finder) { this._targetFinder = finder; }
    get targets() { return this._targets; }
    set targets(targets) { this._targets = targets; }
    get target() { return this._target; }
    set target(target) { this._target = target; }
    set path(path) { this._path = path; }
    get path() { return this._path; }
}
exports.default = NPCAction;

},{"../../../../Wolfie2D/AI/Goap/GoapAction":2,"../../../../Wolfie2D/DataTypes/Vec2":26,"../../../../Wolfie2D/Nodes/Graphics/GraphicTypes":44,"../../../../Wolfie2D/Timing/Timer":103,"../../../Events":129,"../../../GameSystems/ItemSystem/Items/LaserGun":135,"../../../GameSystems/Searching/BasicFinder":136}],113:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const NPCAction_1 = __importDefault(require("./NPCAction"));
class PickupTargetedItem extends NPCAction_1.default {
    constructor(parent, actor) {
        super(parent, actor);
    }
    performAction(target) {
        if (target.inventory === null) {
            this.actor.inventory.add(target);
        }
        this.finished();
    }
    handleInput(event) {
        switch (event.type) {
            default: {
                super.handleInput(event);
                break;
            }
        }
    }
    get targetFinder() { return this._targetFinder; }
    set targetFinder(finder) { this._targetFinder = finder; }
    get targets() { return this._targets; }
    set targets(targets) { this._targets = targets; }
    get target() { return this._target; }
    set target(target) { this._target = target; }
}
exports.default = PickupTargetedItem;

},{"./NPCAction":112}],114:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const AABB_1 = __importDefault(require("../../../../Wolfie2D/DataTypes/Shapes/AABB"));
const Vec2_1 = __importDefault(require("../../../../Wolfie2D/DataTypes/Vec2"));
const LaserGun_1 = __importDefault(require("../../../GameSystems/ItemSystem/Items/LaserGun"));
const NPCAction_1 = __importDefault(require("./NPCAction"));
const Events_1 = require("../../../Events");
const Timer_1 = __importDefault(require("../../../../Wolfie2D/Timing/Timer"));
class ShootLaserGun extends NPCAction_1.default {
    constructor(parent, actor) {
        super(parent, actor);
        this.lasergun = null;
        this._target = null;
        this.timer = new Timer_1.default(2000);
    }
    performAction(target) {
        this.timer.isStopped() ? console.log("Weapon cooling down!") : console.log("Weapon ready!");
        // If the lasergun is not null and the lasergun is still in the actors inventory; shoot the lasergun
        if (this.timer.isStopped() && this.lasergun !== null && this.lasergun.inventory !== null && this.lasergun.inventory.id === this.actor.inventory.id) {
            // Set the start, direction, and end position to shoot the laser gun
            this.lasergun.laserStart.copy(this.actor.position);
            this.lasergun.direction.copy(this.actor.position.dirTo(target.position));
            this.lasergun.laserEnd.copy(this.getLaserEnd(this.actor.getScene().getWalls(), this.lasergun.laserStart, this.lasergun.direction));
            // Play the shooting animation for the laser gun
            this.lasergun.playShootAnimation();
            // Send a laser fired event
            this.emitter.fireEvent(Events_1.ItemEvent.LASERGUN_FIRED, {
                actorId: this.actor.id,
                battlerId: this.actor.battleGroup,
                to: this.lasergun.laserStart.clone(),
                from: this.lasergun.laserEnd.clone().sub(this.lasergun.laserStart)
            });
            this.timer.start();
        }
        // Finish the action
        this.finished();
    }
    onEnter(options) {
        super.onEnter(options);
        // Find a lasergun in the actors inventory
        let lasergun = this.actor.inventory.find(item => item.constructor === LaserGun_1.default);
        if (lasergun !== null && lasergun.constructor === LaserGun_1.default) {
            this.lasergun = lasergun;
        }
    }
    handleInput(event) {
        switch (event.type) {
            default: {
                super.handleInput(event);
                break;
            }
        }
    }
    update(deltaT) {
        super.update(deltaT);
    }
    onExit() {
        // Clear the reference to the lasergun
        this.lasergun = null;
        return super.onExit();
    }
    getLaserEnd(walls, start, dir) {
        let end = start.clone().add(dir.scaled(900));
        let delta = end.clone().sub(start);
        // Iterate through the tilemap region until we find a collision
        let minX = Math.min(start.x, end.x);
        let maxX = Math.max(start.x, end.x);
        let minY = Math.min(start.y, end.y);
        let maxY = Math.max(start.y, end.y);
        let minIndex = walls.getTilemapPosition(minX, minY);
        let maxIndex = walls.getTilemapPosition(maxX, maxY);
        let tileSize = walls.getScaledTileSize();
        for (let col = minIndex.x; col <= maxIndex.x; col++) {
            for (let row = minIndex.y; row <= maxIndex.y; row++) {
                if (walls.isTileCollidable(col, row)) {
                    // Get the position of this tile
                    let tilePos = new Vec2_1.default(col * tileSize.x + tileSize.x / 2, row * tileSize.y + tileSize.y / 2);
                    // Create a collider for this tile
                    let collider = new AABB_1.default(tilePos, tileSize.scaled(1 / 2));
                    let hit = collider.intersectSegment(start, delta, Vec2_1.default.ZERO);
                    if (hit !== null && start.distanceSqTo(hit.pos) < start.distanceSqTo(end)) {
                        end = hit.pos;
                    }
                }
            }
        }
        return end;
    }
}
exports.default = ShootLaserGun;

},{"../../../../Wolfie2D/DataTypes/Shapes/AABB":20,"../../../../Wolfie2D/DataTypes/Vec2":26,"../../../../Wolfie2D/Timing/Timer":103,"../../../Events":129,"../../../GameSystems/ItemSystem/Items/LaserGun":135,"./NPCAction":112}],115:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const StateMachineGoapAI_1 = __importDefault(require("../../../Wolfie2D/AI/Goap/StateMachineGoapAI"));
const Events_1 = require("../../Events");
/**
 * An abstract implementation of behavior for an NPC. Each concrete implementation of the
 * NPCBehavior class should define some new behavior for an NPCActor.
 */
class NPCBehavior extends StateMachineGoapAI_1.default {
    initializeAI(owner, options) {
        this.owner = owner;
        this.receiver.subscribe(Events_1.ItemEvent.LASERGUN_FIRED);
    }
    activate(options) { }
    update(deltaT) {
        super.update(deltaT);
    }
    /**
     * @param event the game event
     */
    handleEvent(event) {
        switch (event.type) {
            case Events_1.ItemEvent.LASERGUN_FIRED: {
                console.log("Catching and handling lasergun fired event!!!");
                // Enable to have every NPC have shoot audio
                // this.emitter.fireEvent(GameEventType.PLAY_SOUND, {key: this.owner.getScene().getShootAudioKey(), loop: false, holdReference: false});
                this.handleLasergunFired(event.data.get("actorId"), event.data.get("battlerId"), event.data.get("to"), event.data.get("from"));
                break;
            }
            default: {
                super.handleEvent(event);
                break;
            }
        }
    }
    handleLasergunFired(actorId, battlerId, to, from) {
        if (actorId !== this.owner.id && battlerId !== this.owner.battleGroup) {
            this.owner.health -= this.owner.collisionShape.getBoundingRect().intersectSegment(to, from) ? 1 : 0;
            if (!this.owner.animation.isPlaying("ATTACKING")) {
                this.owner.animation.playIfNotAlready("TAKING_DAMAGE", false, "IDLE");
            }
        }
    }
}
exports.default = NPCBehavior;

},{"../../../Wolfie2D/AI/Goap/StateMachineGoapAI":5,"../../Events":129}],116:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.GuardActions = exports.GuardStatuses = void 0;
const NPCBehavior_1 = __importDefault(require("../NPCBehavior"));
const GotoAction_1 = __importDefault(require("../NPCActions/GotoAction"));
const ShootLaserGun_1 = __importDefault(require("../NPCActions/ShootLaserGun"));
const BasicFinder_1 = __importDefault(require("../../../GameSystems/Searching/BasicFinder"));
const HW4Filters_1 = require("../../../GameSystems/Searching/HW4Filters");
const PickupItem_1 = __importDefault(require("../NPCActions/PickupItem"));
const HW4Reducers_1 = require("../../../GameSystems/Searching/HW4Reducers");
const LaserGun_1 = __importDefault(require("../../../GameSystems/ItemSystem/Items/LaserGun"));
const TargetExists_1 = require("../NPCStatuses/TargetExists");
const HasItem_1 = require("../NPCStatuses/HasItem");
const FalseStatus_1 = __importDefault(require("../NPCStatuses/FalseStatus"));
class GuardBehavior extends NPCBehavior_1.default {
    /** Initialize the NPC AI */
    initializeAI(owner, options) {
        super.initializeAI(owner, options);
        // Initialize the targetable entity the guard should try to protect and the range to the target
        this.target = options.target;
        this.range = options.range;
        this.owner.range = this.range;
        // Initialize guard statuses
        this.initializeStatuses();
        // Initialize guard actions
        this.initializeActions();
        // Set the guards goal
        this.goal = exports.GuardStatuses.GOAL;
        // Initialize the guard behavior
        this.initialize();
    }
    handleEvent(event) {
        switch (event.type) {
            default: {
                super.handleEvent(event);
                break;
            }
        }
    }
    update(deltaT) {
        super.update(deltaT);
    }
    initializeStatuses() {
        let scene = this.owner.getScene();
        // A status checking if there are any enemies at target the guard is guarding
        let enemyBattlerFinder = new BasicFinder_1.default(null, (0, HW4Filters_1.BattlerActiveFilter)(), (0, HW4Filters_1.EnemyFilter)(this.owner), (0, HW4Filters_1.RangeFilter)(this.target, 0, this.range * this.range));
        let enemyAtGuardPosition = new TargetExists_1.TargetExists(scene.getBattlers(), enemyBattlerFinder);
        this.addStatus(exports.GuardStatuses.ENEMY_IN_GUARD_POSITION, enemyAtGuardPosition);
        // Add a status to check if a lasergun exists in the scene and it's visible
        this.addStatus(exports.GuardStatuses.LASERGUN_EXISTS, new TargetExists_1.TargetExists(scene.getLaserGuns(), new BasicFinder_1.default(null, (0, HW4Filters_1.ItemFilter)(LaserGun_1.default), (0, HW4Filters_1.VisibleItemFilter)())));
        // Add a status to check if the guard has a lasergun
        this.addStatus(exports.GuardStatuses.HAS_WEAPON, new HasItem_1.HasItem(this.owner, new BasicFinder_1.default(null, (0, HW4Filters_1.ItemFilter)(LaserGun_1.default))));
        // Add the goal status 
        this.addStatus(exports.GuardStatuses.GOAL, new FalseStatus_1.default());
    }
    initializeActions() {
        let scene = this.owner.getScene();
        // An action for shooting an enemy in the guards guard area
        let shootEnemy = new ShootLaserGun_1.default(this, this.owner);
        shootEnemy.targets = scene.getBattlers();
        shootEnemy.targetFinder = new BasicFinder_1.default((0, HW4Reducers_1.ClosestPositioned)(this.owner), (0, HW4Filters_1.BattlerActiveFilter)(), (0, HW4Filters_1.EnemyFilter)(this.owner), (0, HW4Filters_1.RangeFilter)(this.target, 0, this.range * this.range));
        shootEnemy.addPrecondition(exports.GuardStatuses.HAS_WEAPON);
        shootEnemy.addPrecondition(exports.GuardStatuses.ENEMY_IN_GUARD_POSITION);
        shootEnemy.addEffect(exports.GuardStatuses.GOAL);
        shootEnemy.cost = 1;
        this.addState(exports.GuardActions.SHOOT_ENEMY, shootEnemy);
        // An action for picking up a lasergun
        let pickupLaserGun = new PickupItem_1.default(this, this.owner);
        pickupLaserGun.targets = scene.getLaserGuns();
        pickupLaserGun.targetFinder = new BasicFinder_1.default((0, HW4Reducers_1.ClosestPositioned)(this.owner), (0, HW4Filters_1.VisibleItemFilter)(), (0, HW4Filters_1.ItemFilter)(LaserGun_1.default));
        pickupLaserGun.addPrecondition(exports.GuardStatuses.LASERGUN_EXISTS);
        pickupLaserGun.addEffect(exports.GuardStatuses.HAS_WEAPON);
        pickupLaserGun.cost = 5;
        this.addState(exports.GuardActions.PICKUP_LASER_GUN, pickupLaserGun);
        // An action for guarding the guard's guard location
        let guard = new GotoAction_1.default(this, this.owner);
        guard.targets = [this.target];
        guard.targetFinder = new BasicFinder_1.default();
        guard.addPrecondition(exports.GuardStatuses.HAS_WEAPON);
        guard.addEffect(exports.GuardStatuses.GOAL);
        guard.cost = 1000;
        this.addState(exports.GuardActions.GUARD, guard);
    }
    addState(stateName, state) {
        super.addState(stateName, state);
    }
    addStatus(statusName, status) {
        super.addStatus(statusName, status);
    }
}
exports.default = GuardBehavior;
exports.GuardStatuses = {
    ENEMY_IN_GUARD_POSITION: "enemy-at-guard-position",
    HAS_WEAPON: "has-weapon",
    LASERGUN_EXISTS: "laser-gun-exists",
    GOAL: "goal"
};
exports.GuardActions = {
    PICKUP_LASER_GUN: "pickup-lasergun",
    SHOOT_ENEMY: "shoot-enemy",
    GUARD: "guard",
};

},{"../../../GameSystems/ItemSystem/Items/LaserGun":135,"../../../GameSystems/Searching/BasicFinder":136,"../../../GameSystems/Searching/HW4Filters":137,"../../../GameSystems/Searching/HW4Reducers":138,"../NPCActions/GotoAction":111,"../NPCActions/PickupItem":113,"../NPCActions/ShootLaserGun":114,"../NPCBehavior":115,"../NPCStatuses/FalseStatus":117,"../NPCStatuses/HasItem":118,"../NPCStatuses/TargetExists":119}],117:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const GoapState_1 = __importDefault(require("../../../../Wolfie2D/AI/Goap/GoapState"));
class FalseStatus extends GoapState_1.default {
    isSatisfied() {
        return false;
    }
}
exports.default = FalseStatus;

},{"../../../../Wolfie2D/AI/Goap/GoapState":4}],118:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.HasItem = void 0;
const GoapState_1 = __importDefault(require("../../../../Wolfie2D/AI/Goap/GoapState"));
class HasItem extends GoapState_1.default {
    constructor(actor, finder) {
        super();
        this.actor = actor;
        this.finder = finder;
    }
    isSatisfied() {
        return true;
        // return this.finder.find(Array.from(this.actor.inventory.items())) !== null
    }
}
exports.HasItem = HasItem;

},{"../../../../Wolfie2D/AI/Goap/GoapState":4}],119:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.TargetExists = void 0;
const GoapState_1 = __importDefault(require("../../../../Wolfie2D/AI/Goap/GoapState"));
class TargetExists extends GoapState_1.default {
    constructor(targets, finder) {
        super();
        this.finder = finder;
        this.targets = targets;
    }
    isSatisfied() {
        return this.finder.find(this.targets) !== null;
    }
}
exports.TargetExists = TargetExists;

},{"../../../../Wolfie2D/AI/Goap/GoapState":4}],120:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const StateMachineAI_1 = __importDefault(require("../../../Wolfie2D/AI/StateMachineAI"));
const GameEventType_1 = require("../../../Wolfie2D/Events/GameEventType");
const Events_1 = require("../../Events");
const PlayerController_1 = __importDefault(require("./PlayerController"));
const PlayerState_1 = require("./PlayerStates/PlayerState");
/**
 * The AI that controls the player. The players AI has been configured as a Finite State Machine (FSM)
 * with 4 states; Idle, Moving, Invincible, and Dead.
 */
class PlayerAI extends StateMachineAI_1.default {
    initializeAI(owner, opts) {
        this.owner = owner;
        this.controller = new PlayerController_1.default(owner);
        // Add the players states to it's StateMachine
        this.addState(PlayerState_1.PlayerStateType.IDLE, new PlayerState_1.Idle(this, this.owner));
        this.addState(PlayerState_1.PlayerStateType.INVINCIBLE, new PlayerState_1.Invincible(this, this.owner));
        this.addState(PlayerState_1.PlayerStateType.MOVING, new PlayerState_1.Moving(this, this.owner));
        this.addState(PlayerState_1.PlayerStateType.DEAD, new PlayerState_1.Dead(this, this.owner));
        // Initialize the players state to Idle
        this.initialize(PlayerState_1.PlayerStateType.IDLE);
    }
    activate(options) { }
    update(deltaT) {
        super.update(deltaT);
    }
    destroy() { }
    handleEvent(event) {
        switch (event.type) {
            case "PLAYER_DAMAGED": {
                console.log("hit audio  played");
                // Play hit audio here maybe
                // this.emitter.fireEvent(GameEventType.PLAY_SOUND, {key: this.owner.getScene().getHitAudioKey, loop: false, holdReference: false});
                this.owner.health -= 1;
            }
            case Events_1.ItemEvent.LASERGUN_FIRED: {
                this.handleLaserFiredEvent(event.data.get("actorId"), event.data.get("to"), event.data.get("from"));
                break;
            }
            default: {
                super.handleEvent(event);
                break;
            }
        }
    }
    handleLaserFiredEvent(actorId, to, from) {
        if (this.owner.id !== actorId && this.owner.collisionShape !== undefined) {
            if (this.owner.collisionShape.getBoundingRect().intersectSegment(to, from.clone().sub(to)) !== null
                || this.owner.collisionShape.center.distanceTo(to) < 55) {
                // play hit audio here?
                console.log("Hit audio played");
                this.emitter.fireEvent(GameEventType_1.GameEventType.PLAY_SOUND, { key: this.owner.getScene().getHitAudioKey(), loop: false, holdReference: false });
                this.owner.health -= 1;
                if (from.x >= to.x)
                    this.owner.animation.playIfNotAlready("TAKING_DAMAGE_LEFT", false, "IDLE");
                else
                    this.owner.animation.playIfNotAlready("TAKING_DAMAGE_RIGHT", false, "IDLE");
            }
        }
    }
}
exports.default = PlayerAI;

},{"../../../Wolfie2D/AI/StateMachineAI":6,"../../../Wolfie2D/Events/GameEventType":32,"../../Events":129,"./PlayerController":121,"./PlayerStates/PlayerState":126}],121:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.PlayerInput = void 0;
const Vec2_1 = __importDefault(require("../../../Wolfie2D/DataTypes/Vec2"));
const Input_1 = __importDefault(require("../../../Wolfie2D/Input/Input"));
/**
 * Strings used in the key binding for the player
 */
var PlayerInput;
(function (PlayerInput) {
    PlayerInput["MOVE_UP"] = "MOVE_UP";
    PlayerInput["MOVE_DOWN"] = "MOVE_DOWN";
    PlayerInput["MOVE_LEFT"] = "MOVE_LEFT";
    PlayerInput["MOVE_RIGHT"] = "MOVE_RIGHT";
    PlayerInput["ATTACKING"] = "ATTACKING";
    PlayerInput["PICKUP_ITEM"] = "PICKUP_ITEM";
    PlayerInput["DROP_ITEM"] = "DROP_ITEM";
})(PlayerInput = exports.PlayerInput || (exports.PlayerInput = {}));
/**
 * The PlayerController class handles processing the input recieved from the user and exposes
 * a set of methods to make dealing with the user input a bit simpler.
 */
class PlayerController {
    constructor(owner) {
        this.owner = owner;
    }
    /**
     * Gets the direction the player should move based on input from the keyboard.
     * @returns a Vec2 indicating the direction the player should move.
     */
    get moveDir() {
        let dir = Vec2_1.default.ZERO;
        dir.y = (Input_1.default.isPressed(PlayerInput.MOVE_UP) ? -1 : 0) + (Input_1.default.isPressed(PlayerInput.MOVE_DOWN) ? 1 : 0);
        dir.x = (Input_1.default.isPressed(PlayerInput.MOVE_LEFT) ? -1 : 0) + (Input_1.default.isPressed(PlayerInput.MOVE_RIGHT) ? 1 : 0);
        return dir.normalize().scale(2);
    }
    /**
     * Gets the direction the player should be facing based on the position of the
     * mouse around the player
     * @return a Vec2 representing the direction the player should face.
     */
    get faceDir() { return this.owner.position.dirTo(Input_1.default.getGlobalMousePosition()); }
    /**
     * Gets the rotation of the players sprite based on the direction the player
     * should be facing.
     * @return a number representing how much the player should be rotated
     */
    get rotation() { return Vec2_1.default.UP.angleToCCW(this.faceDir); }
    /**
     * Checks if the player is attempting to use a held item or not.
     * @return true if the player is attempting to use a held item; false otherwise
     */
    get useItem() { return Input_1.default.isMouseJustPressed(); }
    /**
     * Checks if the player is attempting to pick up an item or not.
     * @return true if the player is attempting to pick up an item; false otherwise.
     */
    get pickingUp() { return Input_1.default.isJustPressed(PlayerInput.PICKUP_ITEM); }
    /**
     * Checks if the player is attempting to drop their held item or not.
     * @return true if the player is attempting to drop their held item; false otherwise.
     */
    get dropping() { return Input_1.default.isJustPressed(PlayerInput.DROP_ITEM); }
}
exports.default = PlayerController;

},{"../../../Wolfie2D/DataTypes/Vec2":26,"../../../Wolfie2D/Input/Input":34}],122:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Events_1 = require("../../../Events");
const PlayerState_1 = __importDefault(require("./PlayerState"));
/**
 * The Dead state for the PlayerAI. While the player is in the "Dead" state, the player does not
 * get updated and all incoming events to the PlayerAI are ignored.
 */
class Dead extends PlayerState_1.default {
    /**
     * When the PlayerAI enters the dead state, an event is fired to alert the system
     * that the player is officially dead.
     */
    onEnter(options) {
        //play dying animation
        //this.parent.owner.animation.play("DYING",false, "DEAD");
        //this.parent.owner.animation.play("DEAD",false, PlayerEvent.PLAYER_KILLED);
        this.emitter.fireEvent(Events_1.PlayerEvent.PLAYER_KILLED);
        // this.parent.owner.animation.play("DYING", false, PlayerEvent.PLAYER_KILLED);
        // this.emitter.fireEvent(PlayerEvent.PLAYER_KILLED);
    }
    /**
     * The input handler for the dead state ignores all incoming events to the player.
     * @param event
     */
    handleInput(event) { }
    /**
     * Similar to the handleInput method, while in the dead state, the PlayerAI doesn't
     * get updated.
     * @param deltaT
     */
    update(deltaT) {
        // if (this.parent.owner.health <= 0) {
        //     this.parent.owner.animation.playIfNotAlready("DYING",false, "DEAD");
        // }
    }
    onExit() { return {}; }
}
exports.default = Dead;

},{"../../../Events":129,"./PlayerState":126}],123:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Vec2_1 = __importDefault(require("../../../../Wolfie2D/DataTypes/Vec2"));
const Input_1 = __importDefault(require("../../../../Wolfie2D/Input/Input"));
const PlayerState_1 = require("./PlayerState");
const PlayerState_2 = __importDefault(require("./PlayerState"));
const LaserGun_1 = __importDefault(require("../../../GameSystems/ItemSystem/Items/LaserGun"));
const Events_1 = require("../../../Events");
const GraphicTypes_1 = require("../../../../Wolfie2D/Nodes/Graphics/GraphicTypes");
const AABB_1 = __importDefault(require("../../../../Wolfie2D/DataTypes/Shapes/AABB"));
const GameEventType_1 = require("../../../../Wolfie2D/Events/GameEventType");
class Idle extends PlayerState_2.default {
    onEnter(options) {
        this.parent.owner.animation.playIfNotAlready(PlayerState_1.PlayerAnimationType.IDLE, true);
    }
    handleInput(event) {
        switch (event.type) {
            default: {
                super.handleInput(event);
                break;
            }
        }
    }
    getLaserEnd(walls, start, dir) {
        let end = start.clone().add(dir.scaled(900));
        let delta = end.clone().sub(start);
        // Iterate through the tilemap region until we find a collision
        let minX = Math.min(start.x, end.x);
        let maxX = Math.max(start.x, end.x);
        let minY = Math.min(start.y, end.y);
        let maxY = Math.max(start.y, end.y);
        let minIndex = walls.getTilemapPosition(minX, minY);
        let maxIndex = walls.getTilemapPosition(maxX, maxY);
        let tileSize = walls.getScaledTileSize();
        for (let col = minIndex.x; col <= maxIndex.x; col++) {
            for (let row = minIndex.y; row <= maxIndex.y; row++) {
                if (walls.isTileCollidable(col, row)) {
                    // Get the position of this tile
                    let tilePos = new Vec2_1.default(col * tileSize.x + tileSize.x / 2, row * tileSize.y + tileSize.y / 2);
                    // Create a collider for this tile
                    let collider = new AABB_1.default(tilePos, tileSize.scaled(1 / 2));
                    let hit = collider.intersectSegment(start, delta, Vec2_1.default.ZERO);
                    if (hit !== null && start.distanceSqTo(hit.pos) < start.distanceSqTo(end)) {
                        end = hit.pos;
                    }
                }
            }
        }
        return end;
    }
    update(deltaT) {
        super.update(deltaT);
        // If the player hits the attack button and the weapon system isn't running, restart the system and fire!
        if (Input_1.default.isKeyJustPressed("space")) {
            // Shoot Audio Played
            this.emitter.fireEvent(GameEventType_1.GameEventType.PLAY_SOUND, { key: this.owner.getScene().getShootAudioKey(), loop: false, holdReference: false });
            console.log("Space_pressed");
            let sprite = this.owner.getScene().add.sprite("laserGun", "primary");
            let line = this.owner.getScene().add.graphic(GraphicTypes_1.GraphicType.LINE, "primary", { start: Vec2_1.default.ZERO, end: Vec2_1.default.ZERO });
            this.lasergun = LaserGun_1.default.create(sprite, line);
            this.lasergun.laserStart.copy(this.owner.position);
            this.lasergun.direction.copy(this.owner.position.dirTo(Input_1.default.getGlobalMousePosition()));
            // this.lasergun.laserEnd.copy(Input.getGlobalMousePosition());
            this.lasergun.laserEnd.copy(this.getLaserEnd(this.owner.getScene().getWalls(), this.lasergun.laserStart, this.lasergun.direction));
            if (this.parent.controller.faceDir.x < 0) {
                console.log("Attacking left");
                this.owner.animation.play("ATTACKING_LEFT", false);
                // Play the shooting animation for the laser gun
                this.lasergun.playShootAnimation();
                // Send a laser fired event
                this.emitter.fireEvent(Events_1.ItemEvent.LASERGUN_FIRED, {
                    actorId: this.owner.id,
                    to: this.lasergun.laserStart.clone(),
                    from: this.lasergun.laserEnd.clone().sub(this.lasergun.laserStart)
                });
            }
            else {
                console.log("Attacking right");
                this.owner.animation.play("ATTACKING_RIGHT", false);
                // Play the shooting animation for the laser gun
                this.lasergun.playShootAnimation();
                // Send a laser fired event
                this.emitter.fireEvent(Events_1.ItemEvent.LASERGUN_FIRED, {
                    actorId: this.owner.id,
                    to: this.lasergun.laserStart.clone(),
                    from: this.lasergun.laserEnd.clone().sub(this.lasergun.laserStart)
                });
            }
            // Update the rotation to apply the particles velocity vector
            // this.weapon.rotation = 2*Math.PI - Vec2.UP.angleToCCW(this.parent.controller.faceDir) + Math.PI;
            // Start the particle system at the player's current position
            //this.weapon.startSystem(500, 0, this.owner.position);
        }
        if (!this.parent.controller.moveDir.equals(Vec2_1.default.ZERO)) {
            this.finished(PlayerState_1.PlayerStateType.MOVING);
        }
    }
    onExit() {
        return {};
    }
}
exports.default = Idle;

},{"../../../../Wolfie2D/DataTypes/Shapes/AABB":20,"../../../../Wolfie2D/DataTypes/Vec2":26,"../../../../Wolfie2D/Events/GameEventType":32,"../../../../Wolfie2D/Input/Input":34,"../../../../Wolfie2D/Nodes/Graphics/GraphicTypes":44,"../../../Events":129,"../../../GameSystems/ItemSystem/Items/LaserGun":135,"./PlayerState":126}],124:[function(require,module,exports){
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Timer_1 = __importDefault(require("../../../../Wolfie2D/Timing/Timer"));
const PlayerState_1 = __importStar(require("./PlayerState"));
class Invincible extends PlayerState_1.default {
    constructor(parent, owner) {
        super(parent, owner);
        this.timer = new Timer_1.default(100, () => this.finished(PlayerState_1.PlayerStateType.IDLE));
    }
    update(deltaT) { }
    handleInput(event) {
        switch (event.type) {
            default: {
                super.handleInput(event);
                break;
            }
        }
    }
    onEnter(options) {
        this.timer.start();
    }
    onExit() {
        return {};
    }
}
exports.default = Invincible;

},{"../../../../Wolfie2D/Timing/Timer":103,"./PlayerState":126}],125:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Vec2_1 = __importDefault(require("../../../../Wolfie2D/DataTypes/Vec2"));
const Input_1 = __importDefault(require("../../../../Wolfie2D/Input/Input"));
const PlayerState_1 = require("./PlayerState");
const PlayerState_2 = __importDefault(require("./PlayerState"));
const LaserGun_1 = __importDefault(require("../../../GameSystems/ItemSystem/Items/LaserGun"));
const Events_1 = require("../../../Events");
const GraphicTypes_1 = require("../../../../Wolfie2D/Nodes/Graphics/GraphicTypes");
const GameEventType_1 = require("../../../../Wolfie2D/Events/GameEventType");
const AABB_1 = __importDefault(require("../../../../Wolfie2D/DataTypes/Shapes/AABB"));
class Moving extends PlayerState_2.default {
    onEnter(options) {
    }
    handleInput(event) {
        switch (event.type) {
            default: {
                super.handleInput(event);
            }
        }
    }
    getLaserEnd(walls, start, dir) {
        let end = start.clone().add(dir.scaled(900));
        let delta = end.clone().sub(start);
        // Iterate through the tilemap region until we find a collision
        let minX = Math.min(start.x, end.x);
        let maxX = Math.max(start.x, end.x);
        let minY = Math.min(start.y, end.y);
        let maxY = Math.max(start.y, end.y);
        let minIndex = walls.getTilemapPosition(minX, minY);
        let maxIndex = walls.getTilemapPosition(maxX, maxY);
        let tileSize = walls.getScaledTileSize();
        for (let col = minIndex.x; col <= maxIndex.x; col++) {
            for (let row = minIndex.y; row <= maxIndex.y; row++) {
                if (walls.isTileCollidable(col, row)) {
                    // Get the position of this tile
                    let tilePos = new Vec2_1.default(col * tileSize.x + tileSize.x / 2, row * tileSize.y + tileSize.y / 2);
                    // Create a collider for this tile
                    let collider = new AABB_1.default(tilePos, tileSize.scaled(1 / 2));
                    let hit = collider.intersectSegment(start, delta, Vec2_1.default.ZERO);
                    if (hit !== null && start.distanceSqTo(hit.pos) < start.distanceSqTo(end)) {
                        end = hit.pos;
                    }
                }
            }
        }
        return end;
    }
    update(deltaT) {
        super.update(deltaT);
        // if (Input.isKeyJustPressed("space")) {
        //     console.log("Space_pressed")
        //     if(this.parent.controller.faceDir.x < 0) 
        //     {
        //         console.log("Attacking left");
        //         this.owner.animation.play("ATTACKING_LEFT", false);
        //     }
        //     else                                      
        //     {
        //         console.log("Attacking right");
        //         this.owner.animation.play("ATTACKING_RIGHT", false);
        //     }
        //     // Update the rotation to apply the particles velocity vector
        //     //this.weapon.rotation = 2*Math.PI - Vec2.UP.angleToCCW(this.parent.controller.faceDir) + Math.PI;
        //     // Start the particle system at the player's current position
        //     //this.weapon.startSystem(500, 0, this.owner.position);
        // }
        // if (Input.isKeyPressed("A") && Input.isKeyPressed("D")) {
        //     this.owner.animation.play("IDLE")
        // }
        // else if (Input.isKeyPressed("A")) {
        //     console.log("running left")
        //     this.owner.animation.play("RUNNING_LEFT", true, "IDLE");
        // }
        // else if (Input.isKeyPressed("D")) {
        //     console.log("running right")
        //     this.owner.animation.play("RUNNING_RIGHT", true, "IDLE");
        // }
        if (this.parent.controller.moveDir.x < 0) {
            this.owner.animation.playIfNotAlready("RUNNING_LEFT");
        }
        else if (this.parent.controller.moveDir.x > 0) {
            this.owner.animation.playIfNotAlready("RUNNING_RIGHT");
        }
        else {
            this.owner.animation.playIfNotAlready("IDLE");
        }
        if (this.parent.controller.moveDir.equals(Vec2_1.default.ZERO)) {
            this.finished(PlayerState_1.PlayerStateType.IDLE);
        }
        if (Input_1.default.isKeyJustPressed("space")) {
            console.log("Space_pressed");
            // if (this.parent.controller.moveDir.x < 0) {
            //     this.owner.animation.playIfNotAlready("RUNNING_LEFT");
            // }
            // else if(this.parent.controller.moveDir.x > 0)
            // {
            //     this.owner.animation.playIfNotAlready("RUNNING_RIGHT");
            // }
            // else
            // {
            //     this.owner.animation.playIfNotAlready("IDLE");
            // }
            // Shoot Audio Played
            this.emitter.fireEvent(GameEventType_1.GameEventType.PLAY_SOUND, { key: this.owner.getScene().getShootAudioKey(), loop: false, holdReference: false });
            if (this.parent.controller.moveDir.x < 0) {
                this.owner.animation.playIfNotAlready("RUNNING_LEFT");
            }
            else if (this.parent.controller.moveDir.x > 0) {
                this.owner.animation.playIfNotAlready("RUNNING_RIGHT");
            }
            else {
                this.owner.animation.playIfNotAlready("IDLE");
            }
            // if (this.parent.controller.moveDir.equals(Vec2.ZERO)) {
            //     this.finished(PlayerStateType.IDLE);
            // }
            let sprite = this.owner.getScene().add.sprite("laserGun", "primary");
            let line = this.owner.getScene().add.graphic(GraphicTypes_1.GraphicType.LINE, "primary", { start: Vec2_1.default.ZERO, end: Vec2_1.default.ZERO });
            this.lasergun = LaserGun_1.default.create(sprite, line);
            this.lasergun.laserStart.copy(this.owner.position);
            this.lasergun.direction.copy(this.owner.position.dirTo(Input_1.default.getGlobalMousePosition()));
            this.lasergun.laserEnd.copy(this.getLaserEnd(this.owner.getScene().getWalls(), this.lasergun.laserStart, this.lasergun.direction));
            if (this.parent.controller.faceDir.x < 0) {
                console.log("Attacking left");
                this.owner.animation.play("ATTACKING_LEFT", false, "IDLE");
                // Play the shooting animation for the laser gun
                this.lasergun.playShootAnimation();
                // Send a laser fired event
                this.emitter.fireEvent(Events_1.ItemEvent.LASERGUN_FIRED, {
                    actorId: this.owner.id,
                    to: this.lasergun.laserStart.clone(),
                    from: this.lasergun.laserEnd.clone().sub(this.lasergun.laserStart)
                });
            }
            else {
                console.log("Attacking right");
                this.owner.animation.play("ATTACKING_RIGHT", false, "RUNNING_RIGHT");
                // Play the shooting animation for the laser gun
                this.lasergun.playShootAnimation();
                // Send a laser fired event
                this.emitter.fireEvent(Events_1.ItemEvent.LASERGUN_FIRED, {
                    actorId: this.owner.id,
                    to: this.lasergun.laserStart.clone(),
                    from: this.lasergun.laserEnd.clone().sub(this.lasergun.laserStart)
                });
            }
        }
    }
    onExit() { return {}; }
}
exports.default = Moving;

},{"../../../../Wolfie2D/DataTypes/Shapes/AABB":20,"../../../../Wolfie2D/DataTypes/Vec2":26,"../../../../Wolfie2D/Events/GameEventType":32,"../../../../Wolfie2D/Input/Input":34,"../../../../Wolfie2D/Nodes/Graphics/GraphicTypes":44,"../../../Events":129,"../../../GameSystems/ItemSystem/Items/LaserGun":135,"./PlayerState":126}],126:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Dead = exports.Moving = exports.Invincible = exports.Idle = exports.PlayerStateType = exports.PlayerAnimationType = void 0;
const State_1 = __importDefault(require("../../../../Wolfie2D/DataTypes/State/State"));
const Events_1 = require("../../../Events");
var PlayerAnimationType;
(function (PlayerAnimationType) {
    PlayerAnimationType["IDLE"] = "IDLE";
})(PlayerAnimationType = exports.PlayerAnimationType || (exports.PlayerAnimationType = {}));
var PlayerStateType;
(function (PlayerStateType) {
    PlayerStateType["IDLE"] = "IDLE";
    PlayerStateType["INVINCIBLE"] = "INVINCIBLE";
    PlayerStateType["ATTACKING"] = "ATTACKING";
    PlayerStateType["MOVING"] = "MOVING";
    PlayerStateType["DEAD"] = "DEAD";
})(PlayerStateType = exports.PlayerStateType || (exports.PlayerStateType = {}));
class PlayerState extends State_1.default {
    constructor(parent, owner) {
        super(parent);
        this.bool = true;
        this.owner = owner;
    }
    onEnter(options) { }
    onExit() { return {}; }
    update(deltaT) {
        // Adjust the angle the player is facing 
        // this.parent.owner.rotation = this.parent.controller.rotation;
        // Update the rotation to apply the particles velocity vector
        //this.weapon.rotation = 2*Math.PI - Vec2.UP.angleToCCW(this.parent.controller.faceDir) + Math.PI;
        // Move the player
        this.parent.owner.move(this.parent.controller.moveDir);
        // if (this.parent.controller.moveDir.equals(Vec2.ZERO)) {
        //     this.finished(PlayerStateType.IDLE);
        // }
        if (this.parent.owner.health <= 0) {
            console.log("Playing dying audio");
            if (this.bool == true) {
                this.emitter.fireEvent(GameEventType_1.GameEventType.PLAY_SOUND, { key: this.owner.getScene().getDyingAudioKey(), loop: false, holdReference: false });
                this.bool = false;
            }
            this.parent.owner.animation.playIfNotAlready("DYING", false, "DEAD");
            this.parent.owner.freeze();
            //this.parent.owner.animation.playIfNotAlready("DEAD",false, PlayerStateType.DEAD);
            //this.finished(PlayerStateType.DEAD);
            // this.parent.owner.animation.play("DYING", true);
            if (!this.parent.owner.animation.isPlaying("DYING")) {
                this.parent.owner.animation.play("DEAD");
                this.finished(PlayerStateType.DEAD);
            }
        }
        // Handle the player trying to pick up an item
        if (this.parent.controller.pickingUp) {
            // Request an item from the scene
            this.emitter.fireEvent(Events_1.ItemEvent.ITEM_REQUEST, { node: this.owner, inventory: this.owner.inventory });
        }
        // Handle the player trying to drop an item
        if (this.parent.controller.dropping) {
        }
        if (this.parent.controller.useItem) {
        }
    }
    handleInput(event) {
        switch (event.type) {
            default: {
                throw new Error(`Unhandled event of type ${event.type} caught in PlayerState!`);
            }
        }
    }
}
exports.default = PlayerState;
const Idle_1 = __importDefault(require("./Idle"));
exports.Idle = Idle_1.default;
const Invincible_1 = __importDefault(require("./Invincible"));
exports.Invincible = Invincible_1.default;
const Moving_1 = __importDefault(require("./Moving"));
exports.Moving = Moving_1.default;
const Dead_1 = __importDefault(require("./Dead"));
exports.Dead = Dead_1.default;
const GameEventType_1 = require("../../../../Wolfie2D/Events/GameEventType");

},{"../../../../Wolfie2D/DataTypes/State/State":23,"../../../../Wolfie2D/Events/GameEventType":32,"../../../Events":129,"./Dead":122,"./Idle":123,"./Invincible":124,"./Moving":125}],127:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const AnimatedSprite_1 = __importDefault(require("../../Wolfie2D/Nodes/Sprites/AnimatedSprite"));
const Events_1 = require("../Events");
const BasicTargeting_1 = __importDefault(require("../GameSystems/Targeting/BasicTargeting"));
const BasicBattler_1 = __importDefault(require("../GameSystems/BattleSystem/BasicBattler"));
const Timer_1 = __importDefault(require("../../Wolfie2D/Timing/Timer"));
class NPCActor extends AnimatedSprite_1.default {
    constructor(sheet) {
        super(sheet);
        this._navkey = "navkey";
        this._battler = new BasicBattler_1.default(this);
        this._targeting = new BasicTargeting_1.default(this);
        this.invincibleTimer = new Timer_1.default(1000);
        this.receiver.subscribe("use-hpack");
    }
    /** The TargetingEntity interface */
    clearTarget() { this._targeting.clearTarget(); }
    setTarget(targetable) { this._targeting.setTarget(targetable); }
    hasTarget() { return this._targeting.hasTarget(); }
    getTarget() { return this._targeting.getTarget(); }
    /** The TargetableEntity interface */
    getTargeting() { return this._battler.getTargeting(); }
    addTargeting(targeting) { this._battler.addTargeting(targeting); }
    removeTargeting(targeting) { this._battler.removeTargeting(targeting); }
    atTarget() {
        return this._targeting.getTarget().position.distanceSqTo(this.position) < 625;
    }
    get battlerActive() { return this.battler.battlerActive; }
    set battlerActive(value) {
        this.battler.battlerActive = value;
        this.visible = value;
        this.aiActive = value;
    }
    get battleGroup() { return this.battler.battleGroup; }
    set battleGroup(battleGroup) { this.battler.battleGroup = battleGroup; }
    get maxHealth() { return this.battler.maxHealth; }
    set maxHealth(maxHealth) {
        this.battler.maxHealth = maxHealth;
        this.emitter.fireEvent(Events_1.HudEvent.HEALTH_CHANGE, { id: this.id, curhp: this.health, maxhp: this.maxHealth });
    }
    get health() { return this.battler.health; }
    set health(health) {
        this.battler.health = health;
        if (this.health <= 0 && this.battlerActive) {
            this.emitter.fireEvent(Events_1.BattlerEvent.BATTLER_KILLED, { id: this.id });
            // this.animation.play("DYING", false, "DEAD");
            // if(!this.animation.isPlaying("DYING"))
            // {
            // }
        }
    }
    get speed() { return this.battler.speed; }
    set speed(speed) { this.battler.speed = speed; }
    setScene(scene) { this.scene = scene; }
    getScene() { return this.scene; }
    get navkey() { return this._navkey; }
    set navkey(navkey) { this._navkey = navkey; }
    getPath(to, from) {
        return this.scene.getNavigationManager().getPath(this.navkey, to, from);
    }
    get inventory() { return this.battler.inventory; }
    /** Protected getters for the different components */
    get battler() { return this._battler; }
    get targeting() { return this._targeting; }
}
exports.default = NPCActor;

},{"../../Wolfie2D/Nodes/Sprites/AnimatedSprite":49,"../../Wolfie2D/Timing/Timer":103,"../Events":129,"../GameSystems/BattleSystem/BasicBattler":130,"../GameSystems/Targeting/BasicTargeting":140}],128:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const AnimatedSprite_1 = __importDefault(require("../../Wolfie2D/Nodes/Sprites/AnimatedSprite"));
const Events_1 = require("../Events");
const BasicBattler_1 = __importDefault(require("../GameSystems/BattleSystem/BasicBattler"));
const BasicTargetable_1 = __importDefault(require("../GameSystems/Targeting/BasicTargetable"));
// import HW4Scene from "../Scenes/HW4Scene";
class PlayerActor extends AnimatedSprite_1.default {
    constructor(sheet) {
        super(sheet);
        this.battler = new BasicBattler_1.default(this);
        this.targetable = new BasicTargetable_1.default(this);
        this.receiver.subscribe(Events_1.ItemEvent.LASERGUN_FIRED);
    }
    get battlerActive() {
        return this.battler.battlerActive;
    }
    set battlerActive(value) {
        this.battler.battlerActive = value;
        this.visible = value;
    }
    getTargeting() { return this.targetable.getTargeting(); }
    addTargeting(targeting) { this.targetable.addTargeting(targeting); }
    removeTargeting(targeting) { this.targetable.removeTargeting(targeting); }
    setScene(scene) { this.scene = scene; }
    getScene() { return this.scene; }
    get battleGroup() {
        return this.battler.battleGroup;
    }
    set battleGroup(value) {
        this.battler.battleGroup = value;
    }
    get maxHealth() {
        return this.battler.maxHealth;
    }
    set maxHealth(value) {
        this.battler.maxHealth = value;
    }
    get health() {
        return this.battler.health;
    }
    set health(value) {
        this.battler.health = value;
        // if (this.health <= 0) {
        //     this.emitter.fireEvent(BattlerEvent.BATTLER_KILLED, {id: this.id});
        // }
    }
    get speed() {
        return this.battler.speed;
    }
    set speed(value) {
        this.battler.speed = value;
    }
    get inventory() {
        return this.battler.inventory;
    }
}
exports.default = PlayerActor;

},{"../../Wolfie2D/Nodes/Sprites/AnimatedSprite":49,"../Events":129,"../GameSystems/BattleSystem/BasicBattler":130,"../GameSystems/Targeting/BasicTargetable":139}],129:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PlayerEvent = exports.HudEvent = exports.ItemEvent = exports.BattlerEvent = void 0;
var BattlerEvent;
(function (BattlerEvent) {
    BattlerEvent["BATTLER_KILLED"] = "BATTLER_KILLED";
    BattlerEvent["BATTLER_RESPAWN"] = "BATTLER_RESPAWN";
    BattlerEvent["BATTLER_CHANGE"] = "BATTLER_CHANGE";
    BattlerEvent["CONSUME"] = "CONSUME";
    BattlerEvent["HIT"] = "HIT";
})(BattlerEvent = exports.BattlerEvent || (exports.BattlerEvent = {}));
var ItemEvent;
(function (ItemEvent) {
    ItemEvent["ITEM_REQUEST"] = "ITEM_REQUEST";
    ItemEvent["LASERGUN_FIRED"] = "LASERGUN_FIRED";
    ItemEvent["WEAPON_USED"] = "WEAPON_USED";
    ItemEvent["CONSUMABLE_USED"] = "CONSUMABLE_USED";
    ItemEvent["INVENTORY_CHANGED"] = "INVENTORY_CHANGED";
})(ItemEvent = exports.ItemEvent || (exports.ItemEvent = {}));
var HudEvent;
(function (HudEvent) {
    HudEvent["HEALTH_CHANGE"] = "HEALTH_CHANGE";
})(HudEvent = exports.HudEvent || (exports.HudEvent = {}));
var PlayerEvent;
(function (PlayerEvent) {
    PlayerEvent["PLAYER_KILLED"] = "PLAYER_KILLED";
})(PlayerEvent = exports.PlayerEvent || (exports.PlayerEvent = {}));

},{}],130:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Inventory_1 = __importDefault(require("../ItemSystem/Inventory"));
const BasicTargetable_1 = __importDefault(require("../Targeting/BasicTargetable"));
class BasicBattler {
    constructor(owner) {
        this._owner = owner;
        this._targetable = new BasicTargetable_1.default(owner);
        this.inventory = new Inventory_1.default();
        this.maxHealth = 0;
        this.health = 0;
        this.battleGroup = 0;
        this.speed = 0;
        this.battlerActive = true;
    }
    get id() { return this._owner.id; }
    get position() { return this._targetable.position; }
    set position(position) { this._targetable.position = position; }
    get relativePosition() {
        return this._targetable.relativePosition;
    }
    get battleGroup() { return this._battleGroup; }
    set battleGroup(battleGroup) { this._battleGroup = battleGroup; }
    get maxHealth() { return this._maxHealth; }
    set maxHealth(maxHealth) { this._maxHealth = maxHealth; }
    get health() { return this._health; }
    set health(health) { this._health = health; }
    get speed() { return this._speed; }
    set speed(speed) { this._speed = speed; }
    get inventory() { return this._inventory; }
    set inventory(inventory) { this._inventory = inventory; }
    get battlerActive() { return this._active; }
    set battlerActive(value) { this._active = value; }
    getTargeting() { return this._targetable.getTargeting(); }
    addTargeting(targeting) { this._targetable.addTargeting(targeting); }
    removeTargeting(targeting) { this._targetable.removeTargeting(targeting); }
}
exports.default = BasicBattler;

},{"../ItemSystem/Inventory":132,"../Targeting/BasicTargetable":139}],131:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Color_1 = __importDefault(require("../../../Wolfie2D/Utils/Color"));
const UIElementTypes_1 = require("../../../Wolfie2D/Nodes/UIElements/UIElementTypes");
/**
 * A UI component that's suppossed to represent a healthbar
 */
class HealthbarHUD {
    constructor(scene, owner, layer, options) {
        this.scene = scene;
        this.layer = layer;
        this.owner = owner;
        this.size = options.size;
        this.offset = options.offset;
        this.healthBar = this.scene.add.uiElement(UIElementTypes_1.UIElementType.LABEL, layer, { position: this.owner.position.clone().add(this.offset), text: "" });
        this.healthBar.size.copy(this.size);
        this.healthBar.backgroundColor = Color_1.default.RED;
        this.healthBarBg = this.scene.add.uiElement(UIElementTypes_1.UIElementType.LABEL, layer, { position: this.owner.position.clone().add(this.offset), text: "" });
        this.healthBarBg.backgroundColor = Color_1.default.TRANSPARENT;
        this.healthBarBg.borderColor = Color_1.default.BLACK;
        this.healthBarBg.borderWidth = 1;
        this.healthBarBg.size.copy(this.size);
    }
    /**
     * Updates the healthbars position according to the position of it's owner
     * @param deltaT
     */
    update(deltaT) {
        this.healthBar.position.copy(this.owner.position).add(this.offset);
        this.healthBarBg.position.copy(this.owner.position).add(this.offset);
        let scale = this.scene.getViewScale();
        this.healthBar.scale.scale(scale);
        this.healthBarBg.scale.scale(scale);
        let unit = this.healthBarBg.size.x / this.owner.maxHealth;
        this.healthBar.size.set(this.healthBarBg.size.x - unit * (this.owner.maxHealth - this.owner.health), this.healthBarBg.size.y);
        this.healthBar.position.set(this.healthBarBg.position.x - (unit / scale / 2) * (this.owner.maxHealth - this.owner.health), this.healthBarBg.position.y);
        this.healthBar.backgroundColor = this.owner.health < this.owner.maxHealth * 1 / 4 ? Color_1.default.RED : this.owner.health < this.owner.maxHealth * 3 / 4 ? Color_1.default.YELLOW : Color_1.default.GREEN;
    }
    get ownerId() { return this.owner.id; }
    set visible(visible) {
        this.healthBar.visible = visible;
        this.healthBarBg.visible = visible;
    }
}
exports.default = HealthbarHUD;

},{"../../../Wolfie2D/Nodes/UIElements/UIElementTypes":60,"../../../Wolfie2D/Utils/Color":105}],132:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Emitter_1 = __importDefault(require("../../../Wolfie2D/Events/Emitter"));
/**
 * An inventory is a collection of items. All items in the inventory must be registered with
 * the Inventorys ItemManager class.
 */
class Inventory {
    constructor(capacity = 10) {
        this.__id = Inventory.NEXT_ID;
        Inventory.NEXT_ID += 1;
        this.inventory = new Map();
        this._emitter = new Emitter_1.default();
        this.size = 0;
        this.capacity = capacity;
        this.dirty = false;
        this.onChange = null;
    }
    get id() { return this.__id; }
    get dirty() { return this._dirty; }
    set dirty(dirty) { this._dirty = dirty; }
    get size() { return this._size; }
    set size(size) { this._size = size; }
    get capacity() { return this._capacity; }
    set capacity(capacity) { this._capacity = capacity; }
    get onChange() { return this._onChange; }
    set onChange(onChange) { this._onChange = onChange; }
    get inventory() { return this._inventory; }
    set inventory(inventory) { this._inventory = inventory; }
    get emitter() { return this._emitter; }
    set emitter(emitter) { this._emitter = emitter; }
    /**
     * Gets an item from this inventory by id.
     * @param id the id of the item to get
     * @returns the item if it exists; null otherwise
     */
    get(id) {
        if (!this.has(id)) {
            return null;
        }
        return this.inventory.get(id);
    }
    /**
     * Adds an item to this inventory
     * @param item adds an item to the inventory with the key of the items owner
     * @returns if the Item was successfully added to the inventory; null otherwise
     */
    add(item) {
        if (this.has(item.id) || this.size >= this.capacity || item.inventory !== null) {
            return null;
        }
        this.inventory.set(item.id, item);
        this.size += 1;
        this.dirty = true;
        item.inventory = this;
        item.visible = false;
        return item;
    }
    /**
     * Checks if an item with the given id number exists in this inventory.
     * @param id the id of the item in the inventory
     * @returns true if the item with the id exists; false otherwise
     */
    has(id) {
        return this.inventory.has(id);
    }
    /**
     * Removes the item with the given id number from this inventory
     * @param id the id of the item
     * @returns the item that was removed or null
     */
    remove(id) {
        if (!this.has(id)) {
            return null;
        }
        let item = this.get(id);
        this.inventory.delete(id);
        this.size -= 1;
        this.dirty = true;
        item.inventory = null;
        return item;
    }
    items() {
        return this.inventory.values();
    }
    find(func) {
        let item = Array.from(this.inventory.values()).find(func);
        return item === undefined ? null : item;
    }
    clean() {
        this.dirty = false;
        if (this.onChange !== null) {
            this.emitter.fireEvent(this.onChange, { id: this.id, inventory: this });
        }
    }
}
exports.default = Inventory;
/** The id number of the next inventory */
Inventory.NEXT_ID = 0;

},{"../../../Wolfie2D/Events/Emitter":29}],133:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Emitter_1 = __importDefault(require("../../../Wolfie2D/Events/Emitter"));
const BasicTargetable_1 = __importDefault(require("../Targeting/BasicTargetable"));
class Item {
    constructor(sprite) {
        this.sprite = sprite;
        this.emitter = new Emitter_1.default();
        this._inventory = null;
        this._targetable = new BasicTargetable_1.default(this.sprite);
    }
    getTargeting() {
        return this._targetable.getTargeting();
    }
    addTargeting(targeting) {
        this._targetable.addTargeting(targeting);
    }
    removeTargeting(targeting) {
        this._targetable.removeTargeting(targeting);
    }
    get relativePosition() { return this.sprite.relativePosition; }
    get id() { return this.sprite.id; }
    get position() { return this.sprite.position; }
    get visible() { return this.sprite.visible; }
    set visible(value) { this.sprite.visible = value; }
    get inventory() { return this._inventory; }
    set inventory(value) { this._inventory = value; }
}
exports.default = Item;

},{"../../../Wolfie2D/Events/Emitter":29,"../Targeting/BasicTargetable":139}],134:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
// import HW4Scene from "../../../Scenes/HW4Scene";
const Item_1 = __importDefault(require("../Item"));
class Healthpack extends Item_1.default {
    constructor(sprite) {
        super(sprite);
        this.hp = 5;
    }
    get health() { return this.hp; }
    set health(hp) { this.hp = hp; }
}
exports.default = Healthpack;

},{"../Item":133}],135:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Vec2_1 = __importDefault(require("../../../../Wolfie2D/DataTypes/Vec2"));
const GameNode_1 = require("../../../../Wolfie2D/Nodes/GameNode");
const Color_1 = __importDefault(require("../../../../Wolfie2D/Utils/Color"));
const EaseFunctions_1 = require("../../../../Wolfie2D/Utils/EaseFunctions");
// import HW4Scene from "../../../Scenes/HW4Scene";
const Item_1 = __importDefault(require("../Item"));
class LaserGun extends Item_1.default {
    constructor(sprite, laser) {
        super(sprite);
        this._laser = laser;
        this._laser.start.copy(Vec2_1.default.ZERO_STATIC);
        this._laser.end.copy(Vec2_1.default.ZERO_STATIC);
        this._laser.color = Color_1.default.RED;
        this._laser.tweens.add("fade", {
            startDelay: 0,
            duration: 300,
            effects: [
                {
                    property: GameNode_1.TweenableProperties.alpha,
                    start: 1,
                    end: 0,
                    ease: EaseFunctions_1.EaseFunctionType.OUT_SINE
                }
            ],
            onEnd: "Laser faded"
        });
        this._direction = Vec2_1.default.ZERO;
    }
    static create(sprite, laser) {
        return new LaserGun(sprite, laser);
    }
    get direction() { return this._direction; }
    get laserStart() { return this._laser.start; }
    get laserEnd() { return this._laser.end; }
    playShootAnimation() { this._laser.tweens.play("fade"); }
}
exports.default = LaserGun;

},{"../../../../Wolfie2D/DataTypes/Vec2":26,"../../../../Wolfie2D/Nodes/GameNode":42,"../../../../Wolfie2D/Utils/Color":105,"../../../../Wolfie2D/Utils/EaseFunctions":106,"../Item":133}],136:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class BasicFinder {
    constructor(reducer = null, ...filters) {
        this.reducer = reducer;
        this.filters = filters;
    }
    find(targets) {
        let filtered = targets.filter(target => this.filters.every(filter => filter(target)));
        return filtered.length === 0 ? null : this.reducer === null ? filtered[0] : filtered.reduce(this.reducer);
    }
}
exports.default = BasicFinder;

},{}],137:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.VisibleItemFilter = exports.ItemFilter = exports.RangeFilter = exports.EnemyFilter = exports.AllyFilter = exports.BattlerGroupFilter = exports.BattlerHealthFilter = exports.BattlerActiveFilter = void 0;
const MathUtils_1 = __importDefault(require("../../../Wolfie2D/Utils/MathUtils"));
function BattlerActiveFilter() {
    return (b) => b.battlerActive;
}
exports.BattlerActiveFilter = BattlerActiveFilter;
function BattlerHealthFilter(min, max) {
    return (b) => { return MathUtils_1.default.between(min, max, b.health, true); };
}
exports.BattlerHealthFilter = BattlerHealthFilter;
function BattlerGroupFilter(groups, whitelist = true) {
    return whitelist ? (b) => { return groups.includes(b.battleGroup); } : (b) => { return !groups.includes(b.battleGroup); };
}
exports.BattlerGroupFilter = BattlerGroupFilter;
function AllyFilter(battler) {
    return (other) => { return battler.battleGroup === other.battleGroup; };
}
exports.AllyFilter = AllyFilter;
function EnemyFilter(battler) {
    return (other) => { return battler.battleGroup !== other.battleGroup; };
}
exports.EnemyFilter = EnemyFilter;
function RangeFilter(positioned, minDistSq, maxDistSq) {
    return (t) => {
        let distSq = t.position.distanceSqTo(positioned.position);
        return distSq > minDistSq && distSq < maxDistSq;
    };
}
exports.RangeFilter = RangeFilter;
function ItemFilter(constr) {
    return (i) => { return i.constructor === constr; };
}
exports.ItemFilter = ItemFilter;
function VisibleItemFilter() {
    return (i) => i.visible;
}
exports.VisibleItemFilter = VisibleItemFilter;

},{"../../../Wolfie2D/Utils/MathUtils":108}],138:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.LowestHealthBattler = exports.ClosestPositioned = void 0;
function ClosestPositioned(positioned) {
    return (p1, p2) => {
        return p1.position.distanceSqTo(positioned.position) < p2.position.distanceSqTo(positioned.position) ? p1 : p2;
    };
}
exports.ClosestPositioned = ClosestPositioned;
function LowestHealthBattler(b1, b2) {
    return b1.health < b2.health ? b1 : b2;
}
exports.LowestHealthBattler = LowestHealthBattler;

},{}],139:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class BasicTargetable {
    constructor(owner) {
        this.owner = owner;
        this.targeting = new Map();
    }
    getTargeting() {
        return Array.from(this.targeting.values());
    }
    addTargeting(targeting) {
        this.targeting.set(targeting.id, targeting);
    }
    removeTargeting(targeting) {
        this.targeting.delete(targeting.id);
    }
    get position() { return this.owner.position; }
    get relativePosition() { return this.owner.relativePosition; }
}
exports.default = BasicTargetable;

},{}],140:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class BasicTargeting {
    constructor(owner) {
        this.owner = owner;
        this.target = null;
    }
    clearTarget() {
        if (this.target !== null) {
            this.target.removeTargeting(this);
        }
        this._target = null;
    }
    setTarget(targetable) {
        if (this.target !== null) {
            this.target.removeTargeting(this);
        }
        this.target = targetable;
        this.target.addTargeting(this);
    }
    getTarget() {
        if (this.target === null) {
            throw new Error("Target not set!");
        }
        return this.target;
    }
    hasTarget() {
        return this.target !== null;
    }
    get id() { return this.owner.id; }
    get target() { return this._target; }
    set target(target) { this._target = target; }
}
exports.default = BasicTargeting;

},{}],141:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Stack_1 = __importDefault(require("../../Wolfie2D/DataTypes/Collections/Stack"));
const NavigationPath_1 = __importDefault(require("../../Wolfie2D/Pathfinding/NavigationPath"));
const NavigationStrategy_1 = __importDefault(require("../../Wolfie2D/Pathfinding/Strategies/NavigationStrategy"));
const GraphUtils_1 = __importDefault(require("../../Wolfie2D/Utils/GraphUtils"));
/**
 * This is where the students will be implementing their version of A* - in theory.
 *
 * The AstarStrategy class is an extension of the abstract NavPathStrategy class. For our navigation system, you can
 * now specify and define your own pathfinding strategy. Originally, the two options were to use Djikstras or a
 * direct (point A -> point B) strategy. The only way to change how the pathfinding was done was by hard-coding things
 * into the classes associated with the navigation system.
 *
 * This is the Strategy design pattern ;)
 * @author PeteyLumpkins
 */
class AstarStrategy extends NavigationStrategy_1.default {
    /**
     * @see NavPathStrat.buildPath()
     */
    buildPath(to, from) {
        let start = this.mesh.graph.snap(from);
        let end = this.mesh.graph.snap(to);
        let pathStack = new Stack_1.default(this.mesh.graph.numVertices);
        // Push the final position and the final position in the graph
        pathStack.push(to.clone());
        pathStack.push(this.mesh.graph.positions[end]);
        // Use A* on the mesh's PositionGraph to find a path from start to end
        let parent = GraphUtils_1.default.astar(this.mesh.graph, start, end, (node) => {
            return this.mesh.graph.getNodePosition(node).distanceTo(this.mesh.graph.getNodePosition(end));
        });
        // If A* cannot find a path
        if (parent === null) {
            return new NavigationPath_1.default(pathStack);
        }
        // Need to push the nodes from the array returned from my implementation into the path stack
        for (let i = parent.length - 1; i >= 0; i--) {
            pathStack.push(this.mesh.graph.positions[parent[i]]);
        }
        return new NavigationPath_1.default(pathStack);
    }
}
exports.default = AstarStrategy;

},{"../../Wolfie2D/DataTypes/Collections/Stack":10,"../../Wolfie2D/Pathfinding/NavigationPath":62,"../../Wolfie2D/Pathfinding/Strategies/NavigationStrategy":65,"../../Wolfie2D/Utils/GraphUtils":107}],142:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.FinalProjectSceneLayers = void 0;
const Vec2_1 = __importDefault(require("../../Wolfie2D/DataTypes/Vec2"));
const Scene_1 = __importDefault(require("../../Wolfie2D/Scene/Scene"));
const LaserGun_1 = __importDefault(require("../GameSystems/ItemSystem/Items/LaserGun"));
const Healthpack_1 = __importDefault(require("../GameSystems/ItemSystem/Items/Healthpack"));
const HealthbarHUD_1 = __importDefault(require("../GameSystems/HUD/HealthbarHUD"));
const PlayerActor_1 = __importDefault(require("../Actors/PlayerActor"));
const NPCActor_1 = __importDefault(require("../Actors/NPCActor"));
const PositionGraph_1 = __importDefault(require("../../Wolfie2D/DataTypes/Graphs/PositionGraph"));
const Events_1 = require("../Events");
const MathUtils_1 = __importDefault(require("../../Wolfie2D/Utils/MathUtils"));
const AABB_1 = __importDefault(require("../../Wolfie2D/DataTypes/Shapes/AABB"));
const GraphicTypes_1 = require("../../Wolfie2D/Nodes/Graphics/GraphicTypes");
const GaurdBehavior_1 = __importDefault(require("../AI/NPC/NPCBehavior/GaurdBehavior"));
const Navmesh_1 = __importDefault(require("../../Wolfie2D/Pathfinding/Navmesh"));
const DirectStrategy_1 = __importDefault(require("../../Wolfie2D/Pathfinding/Strategies/DirectStrategy"));
const AstarStrategy_1 = __importDefault(require("../Pathfinding/AstarStrategy"));
const PlayerAI_1 = __importDefault(require("../AI/Player/PlayerAI"));
const GameEvent_1 = __importDefault(require("../../Wolfie2D/Events/GameEvent"));
const HW4Reducers_1 = require("../GameSystems/Searching/HW4Reducers");
const MainMenu_1 = __importDefault(require("./MainMenu"));
// import MainHW4Scene from "./MainHW4Scene";
const UIElementTypes_1 = require("../../Wolfie2D/Nodes/UIElements/UIElementTypes");
const Color_1 = __importDefault(require("../../Wolfie2D/Utils/Color"));
const Input_1 = __importDefault(require("../../Wolfie2D/Input/Input"));
const GameOver_1 = __importDefault(require("./GameOver"));
const Level1Scene_1 = __importDefault(require("./Level1Scene"));
const Level2Scene_1 = __importDefault(require("./Level2Scene"));
const Level3Scene_1 = __importDefault(require("./Level3Scene"));
const Level4Scene_1 = __importDefault(require("./Level4Scene"));
const Level5Scene_1 = __importDefault(require("./Level5Scene"));
const LastScene_1 = __importDefault(require("./LastScene"));
const GameEventType_1 = require("../../Wolfie2D/Events/GameEventType");
// import testScene from "./Level1Scene";
const BattlerGroups = {
    RED: 1,
    BLUE: 2
};
exports.FinalProjectSceneLayers = {
    PRIMARY: "PRIMARY",
    BACKGROUND: "BACKGROUND",
    UI: "UI",
    PAUSE: "PAUSE",
    CONTROLS: "CONTROLS",
    HELP: "HELP",
    COMPLETE: "COMPLETE"
};
class FinalProjectScene extends Scene_1.default {
    startScene() {
        // super.startScene();
        // 
        const center = this.viewport.getCenter();
        // this.addLayer(MainSceneLayers.UI, );
        // this.addLayer(MainSceneLayers.PAUSE, 5);
        // let v = this.getLayer("UI");
        // Add in the tilemap
        let tilemapLayers = this.add.tilemap("level");
        // Get the wall layer
        this.walls = tilemapLayers[1].getItems()[0];
        // Set the viewport bounds to the tilemap
        let tilemapSize = this.walls.size;
        this.viewport.setBounds(0, 0, tilemapSize.x, tilemapSize.y);
        // 
        this.initLayers();
        // Create the player
        this.initializePlayer();
        this.initializeItems();
        this.initializeNavmesh();
        // Create the NPCS
        this.initializeNPCs();
        // Subscribe to relevant events
        this.receiver.subscribe("healthpack");
        this.receiver.subscribe("enemyDied");
        this.receiver.subscribe(Events_1.ItemEvent.ITEM_REQUEST);
        // Add a UI for health
        this.addUILayer("health");
        // Pause Button (Not needed just press escape)
        // let pause = this.add.uiElement(UIElementType.BUTTON, MainSceneLayers.UI, {position: new Vec2(center.x + 600, center.y - 400), text: "Pause"});
        // pause.size.set(100, 50);
        // pause.borderWidth = 2;
        // pause.borderColor = Color.TRANSPARENT;
        // pause.backgroundColor = Color.TRANSPARENT;
        // pause.onClickEventId = "pause";
        // this.pauseMenu = pause;
        // TODO Make text move with button
        // let pauseBar = new PauseHUD(this, pause, center);
        // this.pause = pauseBar;
        let pauseLayer = this.getLayer("PAUSE");
        this.pauseImage = this.add.sprite(FinalProjectScene.PAUSE_KEY, pauseLayer.getName());
        this.pauseImage.position.copy(this.viewport.getCenter());
        // this.pauseImage.alpha = 0.7;
        const unpause = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.FinalProjectSceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y - 210), text: "" });
        unpause.size.set(400, 100);
        unpause.borderWidth = 2;
        unpause.borderColor = Color_1.default.TRANSPARENT;
        unpause.backgroundColor = Color_1.default.TRANSPARENT;
        unpause.onClickEventId = "unpause";
        const mainMenu = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.FinalProjectSceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y + 223), text: "" });
        mainMenu.size.set(400, 100);
        mainMenu.borderWidth = 2;
        mainMenu.borderColor = Color_1.default.TRANSPARENT;
        mainMenu.backgroundColor = Color_1.default.TRANSPARENT;
        mainMenu.onClickEventId = "mainmenu";
        const controlsButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.FinalProjectSceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y - 65), text: "" });
        controlsButton.size.set(400, 100);
        controlsButton.borderWidth = 2;
        controlsButton.borderColor = Color_1.default.TRANSPARENT;
        controlsButton.backgroundColor = Color_1.default.TRANSPARENT;
        controlsButton.onClickEventId = "controls";
        const helpButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.FinalProjectSceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y + 80), text: "" });
        helpButton.size.set(400, 100);
        helpButton.borderWidth = 2;
        helpButton.borderColor = Color_1.default.TRANSPARENT;
        helpButton.backgroundColor = Color_1.default.TRANSPARENT;
        helpButton.onClickEventId = "help";
        pauseLayer.setPaused(true);
        pauseLayer.setHidden(true);
        let controlsLayer = this.getLayer("CONTROLS");
        this.controlsImage = this.add.sprite(FinalProjectScene.CONTROLS_KEY, controlsLayer.getName());
        this.controlsImage.position.copy(this.viewport.getCenter());
        // this.controlsImage.alpha = 0.5;
        const controlsBackButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.FinalProjectSceneLayers.CONTROLS, { position: new Vec2_1.default(center.x - 595, center.y + 415), text: "" });
        controlsBackButton.size.set(200, 50);
        controlsBackButton.borderWidth = 2;
        controlsBackButton.borderColor = Color_1.default.TRANSPARENT;
        controlsBackButton.backgroundColor = Color_1.default.TRANSPARENT;
        controlsBackButton.onClickEventId = "backcontrols";
        controlsLayer.setPaused(true);
        controlsLayer.setHidden(true);
        // 
        let helpLayer = this.getLayer("HELP");
        this.helpImage = this.add.sprite(FinalProjectScene.HELP_KEY, helpLayer.getName());
        this.helpImage.position.copy(this.viewport.getCenter());
        // this.helpImage.alpha = 0.5;
        const helpBackButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.FinalProjectSceneLayers.HELP, { position: new Vec2_1.default(center.x - 595, center.y + 415), text: "" });
        helpBackButton.size.set(200, 50);
        helpBackButton.borderWidth = 2;
        helpBackButton.borderColor = Color_1.default.TRANSPARENT;
        helpBackButton.backgroundColor = Color_1.default.TRANSPARENT;
        helpBackButton.onClickEventId = "helpcontrols";
        helpLayer.setPaused(true);
        helpLayer.setHidden(true);
        // Complete Layer
        let completeLayer = this.getLayer("COMPLETE");
        this.completeImage = this.add.sprite(FinalProjectScene.COMPLETE_KEY, completeLayer.getName());
        this.completeImage.position.copy(this.viewport.getCenter());
        const completeButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.FinalProjectSceneLayers.COMPLETE, { position: new Vec2_1.default(center.x, center.y + 475), text: "" });
        completeButton.size.set(1320, 2000);
        completeButton.borderWidth = 2;
        completeButton.borderColor = Color_1.default.WHITE;
        completeButton.backgroundColor = Color_1.default.TRANSPARENT;
        completeButton.onClickEventId = "nextlvl";
        completeLayer.setPaused(true);
        completeLayer.setHidden(true);
        // this.pauseMenu = unpause;
        // let val = this.layers;
        // console.log(val);
        this.viewport.setZoomLevel(3);
        this.receiver.subscribe(Events_1.PlayerEvent.PLAYER_KILLED);
        this.receiver.subscribe(Events_1.BattlerEvent.BATTLER_KILLED);
        this.receiver.subscribe(Events_1.BattlerEvent.BATTLER_RESPAWN);
        this.receiver.subscribe("pause");
        this.receiver.subscribe("unpause");
        this.receiver.subscribe("mainmenu");
        this.receiver.subscribe("controls");
        this.receiver.subscribe("help");
        this.receiver.subscribe("backcontrols");
        this.receiver.subscribe("helpcontrols");
        this.receiver.subscribe("nextlvl");
        this.emitter.fireEvent(GameEventType_1.GameEventType.PLAY_SOUND, { key: this.levelMusicKey, loop: true, holdReference: true });
        // this.emitter.fireEvent(GameEventType.PLAY_SOUND, {key: this.getShootAudioKey(), loop: false, holdReference: false});
    }
    /**
       * @see Scene.updateScene
       */
    updateScene(deltaT) {
        while (this.receiver.hasNextEvent()) {
            this.handleEvent(this.receiver.getNextEvent());
        }
        // this.inventoryHud.update(deltaT);
        this.healthbars.forEach(healthbar => healthbar.update(deltaT));
        // this.pause.setCenter(this.viewport.getCenter());
        // this.pauseMenu.update(deltaT);
        // this.pause.update(deltaT);
        if (Input_1.default.isKeyJustPressed("escape")) {
            console.log("Escape pressed");
            let v = new GameEvent_1.default("pause", null);
            this.handleEvent(v);
        }
        if (this.boss.health <= 0) {
            this.viewport.setZoomLevel(1);
            this.unpauseCompleteLayer();
            this.player[0].freeze(); // Freezes player
            this.player[0].disablePhysics();
            this.player[0].aiActive = false;
            for (let i = 0; i < this.enemies.length; i++) { // Freezes enemies 
                if (this.enemies[i].battlerActive == true) {
                    this.enemies[i].freeze();
                    this.enemies[i].disablePhysics();
                    this.enemies[i].aiActive = false;
                }
            }
        }
        let pauseLayer = this.getLayer("PAUSE");
        if (!pauseLayer.isHidden()) {
            this.pauseImage.position.copy(this.viewport.getCenter()); // Works but when moving the screen gets moved upwards.
        }
        if (Input_1.default.isKeyPressed("z")) {
            this.viewport.setZoomLevel(1);
        }
        if (Input_1.default.isKeyPressed("x")) {
            this.viewport.setZoomLevel(3);
        }
        // Another way to play shoot audio is when player pressed space
        //  if(Input.isKeyJustPressed("space")){
        //     console.log("Shoot Audio Played");
        //     this.emitter.fireEvent(GameEventType.PLAY_SOUND, {key: this.getShootAudioKey(), loop: false, holdReference: false});
        //  }
        // TODO If input is 2, 3, 4, 5, 6 go to those levels by chaning the scene
        if (Input_1.default.isKeyJustPressed("1")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level1Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("2")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level2Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("3")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level3Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("4")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level4Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("5")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level5Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("6")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(LastScene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("t")) {
            this.player[0].position = this.bossLocation;
        }
    }
    /**
     * Handle events from the rest of the game
     * @param event a game event
     */
    handleEvent(event) {
        switch (event.type) {
            case Events_1.BattlerEvent.BATTLER_KILLED: {
                this.handleBattlerKilled(event);
                break;
            }
            case Events_1.BattlerEvent.BATTLER_RESPAWN: {
                break;
            }
            case Events_1.ItemEvent.ITEM_REQUEST: {
                this.handleItemRequest(event.data.get("node"), event.data.get("inventory"));
                break;
            }
            case Events_1.PlayerEvent.PLAYER_KILLED: {
                this.viewport.follow(undefined);
                this.sceneManager.changeToScene(GameOver_1.default);
            }
            case "pause": {
                console.log("Pause");
                // this.pauseImage.scale = this.pauseImage.sizeWithZoom;
                this.viewport.setZoomLevel(1);
                this.pauseImage.position.copy(this.viewport.getCenter()); // Works but when moving the screen gets moved upwards.
                // this.viewport.follow(undefined);
                this.player[0].freeze(); // Freezes player
                this.player[0].disablePhysics();
                for (let i = 0; i < this.enemies.length; i++) { // Freezes enemies 
                    if (this.enemies[i].battlerActive == true) {
                        this.enemies[i].freeze();
                        this.enemies[i].disablePhysics();
                        this.enemies[i].aiActive = false;
                    }
                    // this.enemies[i].clearTarget(); 
                    // TODO Stop enemy from attacking while paused
                }
                this.unpausePauseLayer();
                this.pausePrimaryLayer();
                this.pauseUILayer();
                break;
            }
            case "unpause": {
                console.log("unpause");
                this.viewport.setZoomLevel(3);
                let center = this.viewport.getCenter();
                // this.pauseMenu.position.set(center.x, center.y);
                this.player[0].unfreeze();
                this.player[0].enablePhysics();
                // Input.enableInput();
                for (let i = 0; i < this.enemies.length; i++) {
                    if (this.enemies[i].battlerActive == true) {
                        this.enemies[i].unfreeze();
                        this.enemies[i].enablePhysics();
                        this.enemies[i].aiActive = true;
                    }
                    // this.enemies[i].setTarget(this.battlers[0]);
                }
                this.pausePauseLayer();
                this.unpausePrimaryLayer();
                this.unpauseUILayer();
                break;
            }
            case "mainmenu": {
                this.viewport.follow(undefined);
                this.viewport.setZoomLevel(1);
                this.sceneManager.changeToScene(MainMenu_1.default);
                break;
            }
            case "controls": {
                this.controlsImage.position.copy(this.viewport.getCenter());
                this.pausePauseLayer();
                this.unpauseControlsLayer();
                break;
            }
            case "backcontrols": {
                this.unpausePauseLayer();
                this.pauseControlsLayer();
                break;
            }
            case "help": {
                this.helpImage.position.copy(this.viewport.getCenter());
                this.pausePauseLayer();
                this.unpauseHelpLayer();
                break;
            }
            case "helpcontrols": {
                this.unpausePauseLayer();
                this.pauseHelpLayer();
                break;
            }
            case "nextlvl": {
                this.viewport.follow(undefined);
                this.viewport.setZoomLevel(1);
                this.sceneManager.changeToScene(Level2Scene_1.default);
                break;
            }
            default: {
                throw new Error(`Unhandled event type "${event.type}" caught in HW3Scene event handler`);
            }
        }
    }
    pausePauseLayer() {
        let pauseLayer = this.getLayer("PAUSE");
        pauseLayer.setPaused(true);
        pauseLayer.setHidden(true);
    }
    unpausePauseLayer() {
        let pauseLayer = this.getLayer("PAUSE");
        pauseLayer.setPaused(false);
        pauseLayer.setHidden(false);
    }
    pauseControlsLayer() {
        let controlsLayer = this.getLayer("CONTROLS");
        controlsLayer.setPaused(true);
        controlsLayer.setHidden(true);
    }
    unpauseControlsLayer() {
        let controlsLayer = this.getLayer("CONTROLS");
        controlsLayer.setPaused(false);
        controlsLayer.setHidden(false);
    }
    pausePrimaryLayer() {
        let primaryLayer = this.getLayer("primary");
        primaryLayer.setPaused(true);
        primaryLayer.setHidden(true);
    }
    unpausePrimaryLayer() {
        let primaryLayer = this.getLayer("primary");
        primaryLayer.setPaused(false);
        primaryLayer.setHidden(false);
    }
    pauseUILayer() {
        let uiLayer = this.getLayer("UI");
        uiLayer.setPaused(true);
        uiLayer.setHidden(true);
    }
    unpauseUILayer() {
        let uiLayer = this.getLayer("UI");
        uiLayer.setPaused(false);
        uiLayer.setHidden(false);
    }
    pauseHelpLayer() {
        let helpLayer = this.getLayer("HELP");
        helpLayer.setPaused(true);
        helpLayer.setHidden(true);
    }
    unpauseHelpLayer() {
        let helpLayer = this.getLayer("HELP");
        helpLayer.setPaused(false);
        helpLayer.setHidden(false);
    }
    pauseCompleteLayer() {
        let completeLayer = this.getLayer("COMPLETE");
        completeLayer.setPaused(true);
        completeLayer.setHidden(true);
    }
    unpauseCompleteLayer() {
        let completeLayer = this.getLayer("COMPLETE");
        completeLayer.setPaused(false);
        completeLayer.setHidden(false);
    }
    handleItemRequest(node, inventory) {
        let items = new Array(...this.healthpacks, ...this.laserguns).filter((item) => {
            return item.inventory === null && item.position.distanceTo(node.position) <= 100;
        });
        if (items.length > 0) {
            inventory.add(items.reduce((0, HW4Reducers_1.ClosestPositioned)(node)));
        }
    }
    /**
     * Handles an NPC being killed by unregistering the NPC from the scenes subsystems
     * @param event an NPC-killed event
     */
    handleBattlerKilled(event) {
        let id = event.data.get("id");
        let battler = this.battlers.find(b => b.id === id);
        if (battler) {
            battler.battlerActive = false;
            this.healthbars.get(id).visible = false;
        }
    }
    /** Initializes the layers in the scene */
    initLayers() {
        this.addLayer(exports.FinalProjectSceneLayers.UI);
        this.addLayer(exports.FinalProjectSceneLayers.PAUSE, 10);
        this.addLayer(exports.FinalProjectSceneLayers.HELP, 11);
        this.addLayer(exports.FinalProjectSceneLayers.CONTROLS, 11);
        this.addLayer(exports.FinalProjectSceneLayers.COMPLETE, 12);
        this.addLayer("primary", 5);
    }
    /**
     * Initializes the player in the scene
     */
    initializePlayer() {
        const center = this.viewport.getCenter();
        let player = this.add.animatedSprite(PlayerActor_1.default, "player1", "primary");
        player.position.set(center.x - 300, center.y + 300);
        player.battleGroup = 2;
        player.health = 10;
        player.maxHealth = 10;
        player.scale = new Vec2_1.default(0.4, 0.4); // Scales player 
        player.inventory.onChange = Events_1.ItemEvent.INVENTORY_CHANGED;
        // this.inventoryHud = new InventoryHUD(this, player.inventory, "inventorySlot", {
        //     start: new Vec2(232, 24),
        //     slotLayer: "slots",
        //     padding: 8,
        //     itemLayer: "items"
        // });
        // Give the player physics
        player.addPhysics(new AABB_1.default(Vec2_1.default.ZERO, new Vec2_1.default(16, 16)));
        // Give the player a healthbar
        let healthbar = new HealthbarHUD_1.default(this, player, "primary", { size: player.size.clone().scaled(1, 1 / 4), offset: player.size.clone().scaled(0, -1 / 3) });
        this.healthbars.set(player.id, healthbar);
        // Give the player PlayerAI
        player.addAI(PlayerAI_1.default);
        // Start the player in the "IDLE" animation
        player.animation.play("IDLE");
        this.battlers.push(player);
        this.player.push(player);
        this.viewport.follow(player);
        this.viewport.setZoomLevel(3);
    }
    /**
     * Initialize the NPCs
     */
    initializeNPCs() {
        // Get the object data for the blue enemies
        let blue = this.load.getObject("blue");
        // Initialize the blue enemies
        for (let i = 0; i < blue.enemies.length; i++) {
            let npc = this.add.animatedSprite(NPCActor_1.default, "BlueEnemy", "primary");
            npc.position.set(blue.enemies[i][0], blue.enemies[i][1]);
            npc.addPhysics(new AABB_1.default(Vec2_1.default.ZERO, new Vec2_1.default(8, 8)), null, false);
            // Give the NPCS their healthbars
            let healthbar = new HealthbarHUD_1.default(this, npc, "primary", { size: npc.size.clone().scaled(1 / 2, 1 / 4), offset: npc.size.clone().scaled(0, -1 / 3) });
            this.healthbars.set(npc.id, healthbar);
            npc.battleGroup = 1;
            npc.speed = 10;
            npc.health = 1;
            npc.maxHealth = 1;
            npc.navkey = "navmesh";
            npc.scale = new Vec2_1.default(0.4, 0.4);
            // Give the NPCs their AI
            npc.addAI(GaurdBehavior_1.default, { target: this.battlers[0], range: 0 });
            // Play the NPCs "IDLE" animation 
            npc.animation.play("IDLE");
            this.battlers.push(npc);
            this.enemies.push(npc);
        }
        let npc = this.add.animatedSprite(NPCActor_1.default, "BlueEnemy", "primary");
        this.boss = npc;
        npc.position.set(650, 250);
        this.bossLocation = new Vec2_1.default(650, 250);
        npc.addPhysics(new AABB_1.default(Vec2_1.default.ZERO, new Vec2_1.default(32, 32)), null, false);
        // Give the NPCS their healthbars
        let healthbar = new HealthbarHUD_1.default(this, npc, "primary", { size: npc.size.clone().scaled(2, 1 / 4), offset: npc.size.clone().scaled(0, -1 / 2) });
        this.healthbars.set(npc.id, healthbar);
        npc.battleGroup = 1;
        npc.speed = 10;
        npc.health = 10;
        npc.maxHealth = 10;
        npc.navkey = "navmesh";
        npc.scale = new Vec2_1.default(1, 1);
        // Give the NPCs their AI
        npc.addAI(GaurdBehavior_1.default, { target: this.battlers[0], range: 0 });
        // Play the NPCs "IDLE" animation 
        npc.animation.play("IDLE");
        this.battlers.push(npc);
        this.enemies.push(npc);
    }
    /**
     * Initialize the items in the scene (healthpacks and laser guns)
     */
    initializeItems() {
        let laserguns = this.load.getObject("laserguns");
        this.laserguns = new Array(laserguns.items.length);
        for (let i = 0; i < laserguns.items.length; i++) {
            let sprite = this.add.sprite("laserGun", "primary");
            let line = this.add.graphic(GraphicTypes_1.GraphicType.LINE, "primary", { start: Vec2_1.default.ZERO, end: Vec2_1.default.ZERO });
            this.laserguns[i] = LaserGun_1.default.create(sprite, line);
            this.laserguns[i].position.set(laserguns.items[i][0], laserguns.items[i][1]);
        }
        let healthpacks = this.load.getObject("healthpacks");
        this.healthpacks = new Array(healthpacks.items.length);
        for (let i = 0; i < healthpacks.items.length; i++) {
            let sprite = this.add.sprite("healthpack", "primary");
            this.healthpacks[i] = new Healthpack_1.default(sprite);
            this.healthpacks[i].position.set(healthpacks.items[i][0], healthpacks.items[i][1]);
        }
    }
    /**
     * Initializes the navmesh graph used by the NPCs in the HW3Scene. This method is a little buggy, and
     * and it skips over some of the positions on the tilemap. If you can fix my navmesh generation algorithm,
     * go for it.
     *
     * - Peter
     */
    initializeNavmesh() {
        // Create the graph
        this.graph = new PositionGraph_1.default();
        let dim = this.walls.getDimensions();
        for (let i = 0; i < dim.y; i++) {
            for (let j = 0; j < dim.x; j++) {
                let tile = this.walls.getTileCollider(j, i);
                this.graph.addPositionedNode(tile.center);
            }
        }
        let rc;
        for (let i = 0; i < this.graph.numVertices; i++) {
            rc = this.walls.getTileColRow(i);
            if (!this.walls.isTileCollidable(rc.x, rc.y) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x - 1, 0, dim.x - 1), rc.y) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x + 1, 0, dim.x - 1), rc.y) &&
                !this.walls.isTileCollidable(rc.x, MathUtils_1.default.clamp(rc.y - 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(rc.x, MathUtils_1.default.clamp(rc.y + 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x + 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y + 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x - 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y + 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x + 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y - 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x - 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y - 1, 0, dim.y - 1))) {
                // Create edge to the left
                rc = this.walls.getTileColRow(i + 1);
                if ((i + 1) % dim.x !== 0 && !this.walls.isTileCollidable(rc.x, rc.y)) {
                    this.graph.addEdge(i, i + 1);
                    // this.add.graphic(GraphicType.LINE, "graph", {start: this.graph.getNodePosition(i), end: this.graph.getNodePosition(i + 1)})
                }
                // Create edge below
                rc = this.walls.getTileColRow(i + dim.x);
                if (i + dim.x < this.graph.numVertices && !this.walls.isTileCollidable(rc.x, rc.y)) {
                    this.graph.addEdge(i, i + dim.x);
                    // this.add.graphic(GraphicType.LINE, "graph", {start: this.graph.getNodePosition(i), end: this.graph.getNodePosition(i + dim.x)})
                }
            }
        }
        // Set this graph as a navigable entity
        let navmesh = new Navmesh_1.default(this.graph);
        // Add different strategies to use for this navmesh
        navmesh.registerStrategy("direct", new DirectStrategy_1.default(navmesh));
        navmesh.registerStrategy("astar", new AstarStrategy_1.default(navmesh));
        // Select A* as our navigation strategy
        navmesh.setStrategy("astar");
        // Add this navmesh to the navigation manager
        this.navManager.addNavigableEntity("navmesh", navmesh);
    }
    unloadScene() {
        // The scene is being destroyed, so we can stop playing the song
        this.emitter.fireEvent(GameEventType_1.GameEventType.STOP_SOUND, { key: this.levelMusicKey });
    }
    getShootAudioKey() {
        return this.shootAudioKey;
    }
    getHitAudioKey() {
        return this.hitAudioKey;
    }
    getDyingAudioKey() {
        return this.dyingAudioKey;
    }
}
exports.default = FinalProjectScene;
FinalProjectScene.PAUSE_KEY = "PAUSE";
FinalProjectScene.PAUSE_PATH = "hw4_assets/sprites/Paused-Screen.png";
FinalProjectScene.HELP_KEY = "HELP";
FinalProjectScene.HELP_PATH = "hw4_assets/sprites/Help-Screen.png";
FinalProjectScene.CONTROLS_KEY = "CONTROLS";
FinalProjectScene.CONTROLS_PATH = "hw4_assets/sprites/Controls-Screen.png";
FinalProjectScene.COMPLETE_KEY = "COMPLETE";
FinalProjectScene.COMPLETE_PATH = "hw4_assets/sprites/Level-Complete.png";

},{"../../Wolfie2D/DataTypes/Graphs/PositionGraph":14,"../../Wolfie2D/DataTypes/Shapes/AABB":20,"../../Wolfie2D/DataTypes/Vec2":26,"../../Wolfie2D/Events/GameEvent":31,"../../Wolfie2D/Events/GameEventType":32,"../../Wolfie2D/Input/Input":34,"../../Wolfie2D/Nodes/Graphics/GraphicTypes":44,"../../Wolfie2D/Nodes/UIElements/UIElementTypes":60,"../../Wolfie2D/Pathfinding/Navmesh":63,"../../Wolfie2D/Pathfinding/Strategies/DirectStrategy":64,"../../Wolfie2D/Scene/Scene":96,"../../Wolfie2D/Utils/Color":105,"../../Wolfie2D/Utils/MathUtils":108,"../AI/NPC/NPCBehavior/GaurdBehavior":116,"../AI/Player/PlayerAI":120,"../Actors/NPCActor":127,"../Actors/PlayerActor":128,"../Events":129,"../GameSystems/HUD/HealthbarHUD":131,"../GameSystems/ItemSystem/Items/Healthpack":134,"../GameSystems/ItemSystem/Items/LaserGun":135,"../GameSystems/Searching/HW4Reducers":138,"../Pathfinding/AstarStrategy":141,"./GameOver":143,"./LastScene":145,"./Level1Scene":146,"./Level2Scene":147,"./Level3Scene":148,"./Level4Scene":149,"./Level5Scene":150,"./MainMenu":151}],143:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Vec2_1 = __importDefault(require("../../Wolfie2D/DataTypes/Vec2"));
const UIElementTypes_1 = require("../../Wolfie2D/Nodes/UIElements/UIElementTypes");
const Scene_1 = __importDefault(require("../../Wolfie2D/Scene/Scene"));
const Color_1 = __importDefault(require("../../Wolfie2D/Utils/Color"));
const MainMenu_1 = __importDefault(require("./MainMenu"));
class GameOver extends Scene_1.default {
    loadScene() {
    }
    startScene() {
        const center = this.viewport.getCenter();
        this.viewport.setZoomLevel(1);
        this.addUILayer("primary");
        const gameOver = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, "primary", { position: new Vec2_1.default(center.x, center.y), text: "Game Over" });
        gameOver.size.set(1320, 2000);
        gameOver.borderWidth = 2;
        gameOver.borderColor = Color_1.default.WHITE;
        gameOver.backgroundColor = Color_1.default.TRANSPARENT;
        gameOver.onClickEventId = "mainmenu";
        this.receiver.subscribe("mainmenu");
    }
    updateScene() {
        while (this.receiver.hasNextEvent()) {
            this.handleEvent(this.receiver.getNextEvent());
        }
    }
    handleEvent(event) {
        switch (event.type) {
            case "mainmenu": {
                this.sceneManager.changeToScene(MainMenu_1.default);
                break;
            }
        }
    }
}
exports.default = GameOver;

},{"../../Wolfie2D/DataTypes/Vec2":26,"../../Wolfie2D/Nodes/UIElements/UIElementTypes":60,"../../Wolfie2D/Scene/Scene":96,"../../Wolfie2D/Utils/Color":105,"./MainMenu":151}],144:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Scene_1 = __importDefault(require("../../Wolfie2D/Scene/Scene"));
class HW4Scene extends Scene_1.default {
    getShootAudioKey() {
        return this.shootAudioKey;
    }
    getHitAudioKey() {
        return this.hitAudioKey;
    }
    getDyingAudioKey() {
        return this.dyingAudioKey;
    }
}
exports.default = HW4Scene;

},{"../../Wolfie2D/Scene/Scene":96}],145:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.LastSceneLayers = void 0;
const PositionGraph_1 = __importDefault(require("../../Wolfie2D/DataTypes/Graphs/PositionGraph"));
const AABB_1 = __importDefault(require("../../Wolfie2D/DataTypes/Shapes/AABB"));
const Vec2_1 = __importDefault(require("../../Wolfie2D/DataTypes/Vec2"));
const GameEvent_1 = __importDefault(require("../../Wolfie2D/Events/GameEvent"));
const Input_1 = __importDefault(require("../../Wolfie2D/Input/Input"));
const GraphicTypes_1 = require("../../Wolfie2D/Nodes/Graphics/GraphicTypes");
const UIElementTypes_1 = require("../../Wolfie2D/Nodes/UIElements/UIElementTypes");
const Navmesh_1 = __importDefault(require("../../Wolfie2D/Pathfinding/Navmesh"));
const DirectStrategy_1 = __importDefault(require("../../Wolfie2D/Pathfinding/Strategies/DirectStrategy"));
const Color_1 = __importDefault(require("../../Wolfie2D/Utils/Color"));
const MathUtils_1 = __importDefault(require("../../Wolfie2D/Utils/MathUtils"));
const NPCActor_1 = __importDefault(require("../Actors/NPCActor"));
const PlayerActor_1 = __importDefault(require("../Actors/PlayerActor"));
const GaurdBehavior_1 = __importDefault(require("../AI/NPC/NPCBehavior/GaurdBehavior"));
const PlayerAI_1 = __importDefault(require("../AI/Player/PlayerAI"));
const Events_1 = require("../Events");
const HealthbarHUD_1 = __importDefault(require("../GameSystems/HUD/HealthbarHUD"));
const Healthpack_1 = __importDefault(require("../GameSystems/ItemSystem/Items/Healthpack"));
const LaserGun_1 = __importDefault(require("../GameSystems/ItemSystem/Items/LaserGun"));
const HW4Reducers_1 = require("../GameSystems/Searching/HW4Reducers");
const AstarStrategy_1 = __importDefault(require("../Pathfinding/AstarStrategy"));
const GameOver_1 = __importDefault(require("./GameOver"));
// import HW4Scene from "./HW4Scene";
// import MainMenu from "./MainMenu";
// import LevelSelectionScene from "./LevelSelectionScene";
// import { GameEventType } from "../../Wolfie2D/Events/GameEventType";
// import testHW4Scene from "./FinalProjectScene";
const FinalProjectScene_1 = __importDefault(require("./FinalProjectScene"));
// import testMainScene from "./testmain";
const HW4Scene_1 = __importDefault(require("./HW4Scene"));
const MainMenu_1 = __importDefault(require("./MainMenu"));
const Level1Scene_1 = __importDefault(require("./Level1Scene"));
const Level2Scene_1 = __importDefault(require("./Level2Scene"));
const Level3Scene_1 = __importDefault(require("./Level3Scene"));
const Level4Scene_1 = __importDefault(require("./Level4Scene"));
const Level5Scene_1 = __importDefault(require("./Level5Scene"));
const SplashScreen_1 = __importDefault(require("./SplashScreen"));
const GameEventType_1 = require("../../Wolfie2D/Events/GameEventType");
const BattlerGroups = {
    RED: 1,
    BLUE: 2
};
exports.LastSceneLayers = {
    PRIMARY: "PRIMARY",
    BACKGROUND: "BACKGROUND",
    UI: "UI",
    PAUSE: "PAUSE",
    CONTROLS: "CONTROLS",
    HELP: "HELP",
    COMPLETE: "COMPLETE"
};
class LastScene extends HW4Scene_1.default {
    constructor(viewport, sceneManager, renderingManager, options) {
        super(viewport, sceneManager, renderingManager, options);
        this.battlers = new Array();
        this.healthbars = new Map();
        this.player = new Array();
        this.enemies = new Array();
        this.laserguns = new Array();
        this.healthpacks = new Array();
        this.shootAudioKey = LastScene.SHOOT_AUDIO_KEY;
        this.hitAudioKey = LastScene.HIT_AUDIO_KEY;
        this.dyingAudioKey = LastScene.DYING_AUDIO_KEY;
        this.levelMusicKey = LastScene.LEVEL_MUSIC_KEY;
    }
    /**
     * @see Scene.update()
     */
    loadScene() {
        // Load the player and enemy spritesheets
        this.load.spritesheet("player1", "hw4_assets/spritesheets/Warball_001_Lukas.json");
        // Load in the enemy sprites
        this.load.spritesheet("BlueEnemy", "hw4_assets/spritesheets/Ball_Bat.json");
        this.load.spritesheet("RedEnemy", "hw4_assets/spritesheets/Ball_Bat.json");
        this.load.spritesheet("BlueHealer", "hw4_assets/spritesheets/Psyfly.json");
        this.load.spritesheet("RedHealer", "hw4_assets/spritesheets/Ball_Bat.json");
        this.load.spritesheet("Boss", "hw4_assets/spritesheets/KYU.json");
        // Load the tilemap
        this.load.tilemap("level", "hw4_assets/tilemaps/FinalStageTilemap.json");
        // Load the enemy locations
        // this.load.object("boss", "hw4_assets/data/enemies/lvl6.json");
        // this.load.object("blue", "hw4_assets/data/enemies/red.json");
        // Load the healthpack and lasergun loactions
        this.load.object("healthpacks", "hw4_assets/data/items/healthpacks.json");
        this.load.object("laserguns", "hw4_assets/data/items/laserguns.json");
        // Load the healthpack, inventory slot, and laser gun sprites
        this.load.image("healthpack", "hw4_assets/sprites/healthpack.png");
        this.load.image("inventorySlot", "hw4_assets/sprites/inventory.png");
        this.load.image("laserGun", "hw4_assets/sprites/laserGun.png");
        this.load.image(LastScene.PAUSE_KEY, LastScene.PAUSE_PATH);
        this.load.image(LastScene.HELP_KEY, LastScene.HELP_PATH);
        this.load.image(LastScene.CONTROLS_KEY, LastScene.CONTROLS_PATH);
        this.load.image(LastScene.COMPLETE_KEY, LastScene.COMPLETE_PATH);
        this.load.audio(this.shootAudioKey, LastScene.SHOOT_AUDIO_PATH);
        this.load.audio(this.hitAudioKey, LastScene.HIT_AUDIO_PATH);
        this.load.audio(this.dyingAudioKey, LastScene.DYING_AUDIO_PATH);
        this.load.audio(this.levelMusicKey, LastScene.LEVEL_MUSIC_PATH);
    }
    startScene() {
        // super.startScene();
        // 
        const center = this.viewport.getCenter();
        // this.addLayer(MainSceneLayers.UI, );
        // this.addLayer(MainSceneLayers.PAUSE, 5);
        // let v = this.getLayer("UI");
        // Add in the tilemap
        let tilemapLayers = this.add.tilemap("level");
        // Get the wall layer
        this.walls = tilemapLayers[1].getItems()[0];
        // Set the viewport bounds to the tilemap
        let tilemapSize = this.walls.size;
        this.viewport.setBounds(0, 0, tilemapSize.x, tilemapSize.y);
        // 
        this.initLayers();
        // Create the player
        this.initializePlayer();
        this.initializeItems();
        this.initializeNavmesh();
        // Create the NPCS
        this.initializeNPCs();
        // Subscribe to relevant events
        this.receiver.subscribe("healthpack");
        this.receiver.subscribe("enemyDied");
        this.receiver.subscribe(Events_1.ItemEvent.ITEM_REQUEST);
        // Add a UI for health
        this.addUILayer("health");
        // Pause Button (Not needed just press escape)
        // let pause = this.add.uiElement(UIElementType.BUTTON, MainSceneLayers.UI, {position: new Vec2(center.x + 600, center.y - 400), text: "Pause"});
        // pause.size.set(100, 50);
        // pause.borderWidth = 2;
        // pause.borderColor = Color.TRANSPARENT;
        // pause.backgroundColor = Color.TRANSPARENT;
        // pause.onClickEventId = "pause";
        // this.pauseMenu = pause;
        // TODO Make text move with button
        // let pauseBar = new PauseHUD(this, pause, center);
        // this.pause = pauseBar;
        let pauseLayer = this.getLayer("PAUSE");
        this.pauseImage = this.add.sprite(LastScene.PAUSE_KEY, pauseLayer.getName());
        this.pauseImage.position.copy(this.viewport.getCenter());
        // this.pauseImage.alpha = 0.7;
        const unpause = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.LastSceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y - 210), text: "" });
        unpause.size.set(400, 100);
        unpause.borderWidth = 2;
        unpause.borderColor = Color_1.default.TRANSPARENT;
        unpause.backgroundColor = Color_1.default.TRANSPARENT;
        unpause.onClickEventId = "unpause";
        const mainMenu = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.LastSceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y + 223), text: "" });
        mainMenu.size.set(400, 100);
        mainMenu.borderWidth = 2;
        mainMenu.borderColor = Color_1.default.TRANSPARENT;
        mainMenu.backgroundColor = Color_1.default.TRANSPARENT;
        mainMenu.onClickEventId = "mainmenu";
        const controlsButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.LastSceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y - 65), text: "" });
        controlsButton.size.set(400, 100);
        controlsButton.borderWidth = 2;
        controlsButton.borderColor = Color_1.default.TRANSPARENT;
        controlsButton.backgroundColor = Color_1.default.TRANSPARENT;
        controlsButton.onClickEventId = "controls";
        const helpButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.LastSceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y + 80), text: "" });
        helpButton.size.set(400, 100);
        helpButton.borderWidth = 2;
        helpButton.borderColor = Color_1.default.TRANSPARENT;
        helpButton.backgroundColor = Color_1.default.TRANSPARENT;
        helpButton.onClickEventId = "help";
        pauseLayer.setPaused(true);
        pauseLayer.setHidden(true);
        let controlsLayer = this.getLayer("CONTROLS");
        this.controlsImage = this.add.sprite(LastScene.CONTROLS_KEY, controlsLayer.getName());
        this.controlsImage.position.copy(this.viewport.getCenter());
        // this.controlsImage.alpha = 0.5;
        const controlsBackButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.LastSceneLayers.CONTROLS, { position: new Vec2_1.default(center.x - 595, center.y + 415), text: "" });
        controlsBackButton.size.set(200, 50);
        controlsBackButton.borderWidth = 2;
        controlsBackButton.borderColor = Color_1.default.TRANSPARENT;
        controlsBackButton.backgroundColor = Color_1.default.TRANSPARENT;
        controlsBackButton.onClickEventId = "backcontrols";
        controlsLayer.setPaused(true);
        controlsLayer.setHidden(true);
        // 
        let helpLayer = this.getLayer("HELP");
        this.helpImage = this.add.sprite(LastScene.HELP_KEY, helpLayer.getName());
        this.helpImage.position.copy(this.viewport.getCenter());
        // this.helpImage.alpha = 0.5;
        const helpBackButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.LastSceneLayers.HELP, { position: new Vec2_1.default(center.x - 595, center.y + 415), text: "" });
        helpBackButton.size.set(200, 50);
        helpBackButton.borderWidth = 2;
        helpBackButton.borderColor = Color_1.default.TRANSPARENT;
        helpBackButton.backgroundColor = Color_1.default.TRANSPARENT;
        helpBackButton.onClickEventId = "helpcontrols";
        helpLayer.setPaused(true);
        helpLayer.setHidden(true);
        let completeLayer = this.getLayer("COMPLETE");
        this.completeImage = this.add.sprite(FinalProjectScene_1.default.COMPLETE_KEY, completeLayer.getName());
        this.completeImage.position.copy(this.viewport.getCenter());
        const completeButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.LastSceneLayers.COMPLETE, { position: new Vec2_1.default(center.x, center.y + 475), text: "" });
        completeButton.size.set(1320, 2000);
        completeButton.borderWidth = 2;
        completeButton.borderColor = Color_1.default.WHITE;
        completeButton.backgroundColor = Color_1.default.TRANSPARENT;
        completeButton.onClickEventId = "nextlvl";
        completeLayer.setPaused(true);
        completeLayer.setHidden(true);
        // this.pauseMenu = unpause;
        // let val = this.layers;
        // console.log(val);
        this.viewport.setZoomLevel(3);
        this.receiver.subscribe(Events_1.PlayerEvent.PLAYER_KILLED);
        this.receiver.subscribe(Events_1.BattlerEvent.BATTLER_KILLED);
        this.receiver.subscribe(Events_1.BattlerEvent.BATTLER_RESPAWN);
        this.receiver.subscribe("pause");
        this.receiver.subscribe("unpause");
        this.receiver.subscribe("mainmenu");
        this.receiver.subscribe("controls");
        this.receiver.subscribe("help");
        this.receiver.subscribe("backcontrols");
        this.receiver.subscribe("helpcontrols");
        this.receiver.subscribe("nextlvl");
        this.emitter.fireEvent(GameEventType_1.GameEventType.PLAY_SOUND, { key: this.levelMusicKey, loop: true, holdReference: true });
        // this.emitter.fireEvent(GameEventType.PLAY_SOUND, {key: this.getShootAudioKey(), loop: false, holdReference: false});
    }
    /**
     * @see Scene.updateScene
     */
    updateScene(deltaT) {
        while (this.receiver.hasNextEvent()) {
            this.handleEvent(this.receiver.getNextEvent());
        }
        // this.inventoryHud.update(deltaT);
        this.healthbars.forEach(healthbar => healthbar.update(deltaT));
        // this.pause.setCenter(this.viewport.getCenter());
        // this.pauseMenu.update(deltaT);
        // this.pause.update(deltaT);
        if (Input_1.default.isKeyJustPressed("escape")) {
            console.log("Escape pressed");
            let v = new GameEvent_1.default("pause", null);
            this.handleEvent(v);
        }
        if (this.boss.health <= 0) {
            this.viewport.setZoomLevel(1);
            this.unpauseCompleteLayer();
            this.player[0].freeze(); // Freezes player
            this.player[0].disablePhysics();
            this.player[0].aiActive = false;
            for (let i = 0; i < this.enemies.length; i++) { // Freezes enemies 
                if (this.enemies[i].battlerActive == true) {
                    this.enemies[i].freeze();
                    this.enemies[i].disablePhysics();
                    this.enemies[i].aiActive = false;
                }
            }
        }
        let pauseLayer = this.getLayer("PAUSE");
        if (!pauseLayer.isHidden()) {
            this.pauseImage.position.copy(this.viewport.getCenter()); // Works but when moving the screen gets moved upwards.
        }
        if (Input_1.default.isKeyPressed("z")) {
            this.viewport.setZoomLevel(1);
        }
        if (Input_1.default.isKeyPressed("x")) {
            this.viewport.setZoomLevel(3);
        }
        if (Input_1.default.isKeyJustPressed("1")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level1Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("2")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level2Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("3")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level3Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("4")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level4Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("5")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level5Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("6")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(LastScene);
        }
        if (Input_1.default.isKeyJustPressed("t")) {
            this.player[0].position = this.bossLocation;
        }
        // Another way to play shoot audio is when player pressed space
        //  if(Input.isKeyJustPressed("space")){
        //     console.log("Shoot Audio Played");
        //     this.emitter.fireEvent(GameEventType.PLAY_SOUND, {key: this.getShootAudioKey(), loop: false, holdReference: false});
        //  }
        // TODO If input is 2, 3, 4, 5, 6 go to those levels by chaning the scene
    }
    /**
     * Handle events from the rest of the game
     * @param event a game event
     */
    handleEvent(event) {
        switch (event.type) {
            case Events_1.BattlerEvent.BATTLER_KILLED: {
                this.handleBattlerKilled(event);
                this.viewport.follow(undefined);
                this.viewport.setZoomLevel(1);
                // this.sceneManager.changeToScene(LevelSelectionScene);
                break;
            }
            case Events_1.BattlerEvent.BATTLER_RESPAWN: {
                break;
            }
            case Events_1.ItemEvent.ITEM_REQUEST: {
                this.handleItemRequest(event.data.get("node"), event.data.get("inventory"));
                break;
            }
            case Events_1.PlayerEvent.PLAYER_KILLED: {
                this.viewport.follow(undefined);
                this.sceneManager.changeToScene(GameOver_1.default);
            }
            case "pause": {
                console.log("Pause");
                // this.pauseImage.scale = this.pauseImage.sizeWithZoom;
                this.viewport.setZoomLevel(1);
                this.pauseImage.position.copy(this.viewport.getCenter()); // Works but when moving the screen gets moved upwards.
                // this.viewport.follow(undefined);
                this.player[0].freeze(); // Freezes player
                this.player[0].disablePhysics();
                for (let i = 0; i < this.enemies.length; i++) { // Freezes enemies 
                    if (this.enemies[i].battlerActive == true) {
                        this.enemies[i].freeze();
                        this.enemies[i].disablePhysics();
                        this.enemies[i].aiActive = false;
                    }
                    // this.enemies[i].clearTarget(); 
                    // TODO Stop enemy from attacking while paused
                }
                this.unpausePauseLayer();
                this.pausePrimaryLayer();
                this.pauseUILayer();
                break;
            }
            case "unpause": {
                console.log("unpause");
                this.viewport.setZoomLevel(3);
                let center = this.viewport.getCenter();
                // this.pauseMenu.position.set(center.x, center.y);
                this.player[0].unfreeze();
                this.player[0].enablePhysics();
                // Input.enableInput();
                for (let i = 0; i < this.enemies.length; i++) {
                    if (this.enemies[i].battlerActive == true) {
                        this.enemies[i].unfreeze();
                        this.enemies[i].enablePhysics();
                        this.enemies[i].aiActive = true;
                    }
                    // this.enemies[i].setTarget(this.battlers[0]);
                }
                this.pausePauseLayer();
                this.unpausePrimaryLayer();
                this.unpauseUILayer();
                break;
            }
            case "mainmenu": {
                this.viewport.follow(undefined);
                this.viewport.setZoomLevel(1);
                this.sceneManager.changeToScene(MainMenu_1.default);
                break;
            }
            case "controls": {
                this.controlsImage.position.copy(this.viewport.getCenter());
                this.pausePauseLayer();
                this.unpauseControlsLayer();
                break;
            }
            case "backcontrols": {
                this.unpausePauseLayer();
                this.pauseControlsLayer();
                break;
            }
            case "help": {
                this.helpImage.position.copy(this.viewport.getCenter());
                this.pausePauseLayer();
                this.unpauseHelpLayer();
                break;
            }
            case "helpcontrols": {
                this.unpausePauseLayer();
                this.pauseHelpLayer();
                break;
            }
            case "nextlvl": {
                this.viewport.follow(undefined);
                this.viewport.setZoomLevel(1);
                this.sceneManager.changeToScene(SplashScreen_1.default);
                break;
            }
            default: {
                throw new Error(`Unhandled event type "${event.type}" caught in HW3Scene event handler`);
            }
        }
    }
    pausePauseLayer() {
        let pauseLayer = this.getLayer("PAUSE");
        pauseLayer.setPaused(true);
        pauseLayer.setHidden(true);
    }
    unpausePauseLayer() {
        let pauseLayer = this.getLayer("PAUSE");
        pauseLayer.setPaused(false);
        pauseLayer.setHidden(false);
    }
    pauseControlsLayer() {
        let controlsLayer = this.getLayer("CONTROLS");
        controlsLayer.setPaused(true);
        controlsLayer.setHidden(true);
    }
    unpauseControlsLayer() {
        let controlsLayer = this.getLayer("CONTROLS");
        controlsLayer.setPaused(false);
        controlsLayer.setHidden(false);
    }
    pausePrimaryLayer() {
        let primaryLayer = this.getLayer("primary");
        primaryLayer.setPaused(true);
        primaryLayer.setHidden(true);
    }
    unpausePrimaryLayer() {
        let primaryLayer = this.getLayer("primary");
        primaryLayer.setPaused(false);
        primaryLayer.setHidden(false);
    }
    pauseUILayer() {
        let uiLayer = this.getLayer("UI");
        uiLayer.setPaused(true);
        uiLayer.setHidden(true);
    }
    unpauseUILayer() {
        let uiLayer = this.getLayer("UI");
        uiLayer.setPaused(false);
        uiLayer.setHidden(false);
    }
    pauseHelpLayer() {
        let helpLayer = this.getLayer("HELP");
        helpLayer.setPaused(true);
        helpLayer.setHidden(true);
    }
    unpauseHelpLayer() {
        let helpLayer = this.getLayer("HELP");
        helpLayer.setPaused(false);
        helpLayer.setHidden(false);
    }
    pauseCompleteLayer() {
        let completeLayer = this.getLayer("COMPLETE");
        completeLayer.setPaused(true);
        completeLayer.setHidden(true);
    }
    unpauseCompleteLayer() {
        let completeLayer = this.getLayer("COMPLETE");
        completeLayer.setPaused(false);
        completeLayer.setHidden(false);
    }
    handleItemRequest(node, inventory) {
        let items = new Array(...this.healthpacks, ...this.laserguns).filter((item) => {
            return item.inventory === null && item.position.distanceTo(node.position) <= 100;
        });
        if (items.length > 0) {
            inventory.add(items.reduce((0, HW4Reducers_1.ClosestPositioned)(node)));
        }
    }
    /**
     * Handles an NPC being killed by unregistering the NPC from the scenes subsystems
     * @param event an NPC-killed event
     */
    handleBattlerKilled(event) {
        let id = event.data.get("id");
        let battler = this.battlers.find(b => b.id === id);
        if (battler) {
            battler.battlerActive = false;
            this.healthbars.get(id).visible = false;
        }
    }
    /** Initializes the layers in the scene */
    initLayers() {
        this.addLayer(exports.LastSceneLayers.UI);
        this.addLayer(exports.LastSceneLayers.PAUSE, 10);
        this.addLayer(exports.LastSceneLayers.HELP, 11);
        this.addLayer(exports.LastSceneLayers.CONTROLS, 11);
        this.addLayer(exports.LastSceneLayers.COMPLETE, 12);
        this.addLayer("primary", 5);
    }
    /**
     * Initializes the player in the scene
     */
    initializePlayer() {
        const center = this.viewport.getCenter();
        let player = this.add.animatedSprite(PlayerActor_1.default, "player1", "primary");
        player.position.set(center.x + 15, center.y + 390);
        player.battleGroup = 2;
        player.health = 10;
        player.maxHealth = 10;
        player.scale = new Vec2_1.default(0.4, 0.4); // Scales player 
        player.inventory.onChange = Events_1.ItemEvent.INVENTORY_CHANGED;
        // this.inventoryHud = new InventoryHUD(this, player.inventory, "inventorySlot", {
        //     start: new Vec2(232, 24),
        //     slotLayer: "slots",
        //     padding: 8,
        //     itemLayer: "items"
        // });
        // Give the player physics
        player.addPhysics(new AABB_1.default(Vec2_1.default.ZERO, new Vec2_1.default(16, 16)));
        // Give the player a healthbar
        let healthbar = new HealthbarHUD_1.default(this, player, "primary", { size: player.size.clone().scaled(1, 1 / 4), offset: player.size.clone().scaled(0, -1 / 3) });
        this.healthbars.set(player.id, healthbar);
        // Give the player PlayerAI
        player.addAI(PlayerAI_1.default);
        // Start the player in the "IDLE" animation
        player.animation.play("IDLE");
        this.battlers.push(player);
        this.player.push(player);
        this.viewport.follow(player);
        this.viewport.setZoomLevel(3);
    }
    /**
     * Initialize the NPCs
     */
    initializeNPCs() {
        let npc = this.add.animatedSprite(NPCActor_1.default, "Boss", "primary");
        this.boss = npc;
        npc.position.set(650, 150);
        this.bossLocation = new Vec2_1.default(650, 150);
        npc.addPhysics(new AABB_1.default(Vec2_1.default.ZERO, new Vec2_1.default(32, 32)), null, false);
        // Give the NPCS their healthbars
        let healthbar = new HealthbarHUD_1.default(this, npc, "primary", { size: npc.size.clone().scaled(4, 1 / 4), offset: npc.size.clone().scaled(0, -1 / 2) });
        this.healthbars.set(npc.id, healthbar);
        npc.battleGroup = 1;
        npc.speed = 10;
        npc.health = 50;
        npc.maxHealth = 50;
        npc.navkey = "navmesh";
        npc.scale = new Vec2_1.default(1, 1);
        // Give the NPCs their AI
        npc.addAI(GaurdBehavior_1.default, { target: this.battlers[0], range: 0 });
        // Play the NPCs "IDLE" animation 
        npc.animation.play("IDLE");
        this.battlers.push(npc);
        this.enemies.push(npc);
        // Initialize the blue healers
    }
    /**
     * Initialize the items in the scene (healthpacks and laser guns)
     */
    initializeItems() {
        let laserguns = this.load.getObject("laserguns");
        this.laserguns = new Array(laserguns.items.length);
        for (let i = 0; i < laserguns.items.length; i++) {
            let sprite = this.add.sprite("laserGun", "primary");
            let line = this.add.graphic(GraphicTypes_1.GraphicType.LINE, "primary", { start: Vec2_1.default.ZERO, end: Vec2_1.default.ZERO });
            this.laserguns[i] = LaserGun_1.default.create(sprite, line);
            this.laserguns[i].position.set(laserguns.items[i][0], laserguns.items[i][1]);
        }
        let healthpacks = this.load.getObject("healthpacks");
        this.healthpacks = new Array(healthpacks.items.length);
        for (let i = 0; i < healthpacks.items.length; i++) {
            let sprite = this.add.sprite("healthpack", "primary");
            this.healthpacks[i] = new Healthpack_1.default(sprite);
            this.healthpacks[i].position.set(healthpacks.items[i][0], healthpacks.items[i][1]);
        }
    }
    /**
     * Initializes the navmesh graph used by the NPCs in the HW3Scene. This method is a little buggy, and
     * and it skips over some of the positions on the tilemap. If you can fix my navmesh generation algorithm,
     * go for it.
     *
     * - Peter
     */
    initializeNavmesh() {
        // Create the graph
        this.graph = new PositionGraph_1.default();
        let dim = this.walls.getDimensions();
        for (let i = 0; i < dim.y; i++) {
            for (let j = 0; j < dim.x; j++) {
                let tile = this.walls.getTileCollider(j, i);
                this.graph.addPositionedNode(tile.center);
            }
        }
        let rc;
        for (let i = 0; i < this.graph.numVertices; i++) {
            rc = this.walls.getTileColRow(i);
            if (!this.walls.isTileCollidable(rc.x, rc.y) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x - 1, 0, dim.x - 1), rc.y) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x + 1, 0, dim.x - 1), rc.y) &&
                !this.walls.isTileCollidable(rc.x, MathUtils_1.default.clamp(rc.y - 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(rc.x, MathUtils_1.default.clamp(rc.y + 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x + 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y + 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x - 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y + 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x + 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y - 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x - 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y - 1, 0, dim.y - 1))) {
                // Create edge to the left
                rc = this.walls.getTileColRow(i + 1);
                if ((i + 1) % dim.x !== 0 && !this.walls.isTileCollidable(rc.x, rc.y)) {
                    this.graph.addEdge(i, i + 1);
                    // this.add.graphic(GraphicType.LINE, "graph", {start: this.graph.getNodePosition(i), end: this.graph.getNodePosition(i + 1)})
                }
                // Create edge below
                rc = this.walls.getTileColRow(i + dim.x);
                if (i + dim.x < this.graph.numVertices && !this.walls.isTileCollidable(rc.x, rc.y)) {
                    this.graph.addEdge(i, i + dim.x);
                    // this.add.graphic(GraphicType.LINE, "graph", {start: this.graph.getNodePosition(i), end: this.graph.getNodePosition(i + dim.x)})
                }
            }
        }
        // Set this graph as a navigable entity
        let navmesh = new Navmesh_1.default(this.graph);
        // Add different strategies to use for this navmesh
        navmesh.registerStrategy("direct", new DirectStrategy_1.default(navmesh));
        navmesh.registerStrategy("astar", new AstarStrategy_1.default(navmesh));
        // Select A* as our navigation strategy
        navmesh.setStrategy("astar");
        // Add this navmesh to the navigation manager
        this.navManager.addNavigableEntity("navmesh", navmesh);
    }
    unloadScene() {
        // The scene is being destroyed, so we can stop playing the song
        this.emitter.fireEvent(GameEventType_1.GameEventType.STOP_SOUND, { key: this.levelMusicKey });
    }
    getBattlers() { return this.battlers; }
    getWalls() { return this.walls; }
    getHealthpacks() { return this.healthpacks; }
    getLaserGuns() { return this.laserguns; }
    /**
     * Checks if the given target position is visible from the given position.
     * @param position
     * @param target
     * @returns
     */
    isTargetVisible(position, target) {
        // Get the new player location
        let start = position.clone();
        let delta = target.clone().sub(start);
        // Iterate through the tilemap region until we find a collision
        let minX = Math.min(start.x, target.x);
        let maxX = Math.max(start.x, target.x);
        let minY = Math.min(start.y, target.y);
        let maxY = Math.max(start.y, target.y);
        // Get the wall tilemap
        let walls = this.getWalls();
        let minIndex = walls.getTilemapPosition(minX, minY);
        let maxIndex = walls.getTilemapPosition(maxX, maxY);
        let tileSize = walls.getScaledTileSize();
        for (let col = minIndex.x; col <= maxIndex.x; col++) {
            for (let row = minIndex.y; row <= maxIndex.y; row++) {
                if (walls.isTileCollidable(col, row)) {
                    // Get the position of this tile
                    let tilePos = new Vec2_1.default(col * tileSize.x + tileSize.x / 2, row * tileSize.y + tileSize.y / 2);
                    // Create a collider for this tile
                    let collider = new AABB_1.default(tilePos, tileSize.scaled(1 / 4));
                    let hit = collider.intersectSegment(start, delta, Vec2_1.default.ZERO);
                    if (hit !== null && start.distanceSqTo(hit.pos) < start.distanceSqTo(target)) {
                        // We hit a wall, we can't see the player
                        return false;
                    }
                }
            }
        }
        return true;
    }
}
exports.default = LastScene;
LastScene.PAUSE_KEY = "PAUSE";
LastScene.PAUSE_PATH = "hw4_assets/sprites/Paused-Screen.png";
LastScene.HELP_KEY = "HELP";
LastScene.HELP_PATH = "hw4_assets/sprites/Help-Screen.png";
LastScene.CONTROLS_KEY = "CONTROLS";
LastScene.CONTROLS_PATH = "hw4_assets/sprites/Controls-Screen.png";
LastScene.COMPLETE_KEY = "COMPLETE";
LastScene.COMPLETE_PATH = "hw4_assets/sprites/Game-Complete.png";
LastScene.SHOOT_AUDIO_KEY = "PLAYER_SHOOT";
LastScene.SHOOT_AUDIO_PATH = "hw4_assets/sounds/laserShoot.wav";
LastScene.HIT_AUDIO_KEY = "PLAYER_HIT";
LastScene.HIT_AUDIO_PATH = "hw4_assets/sounds/hit.wav";
LastScene.DYING_AUDIO_KEY = "PLAYER_DYING";
LastScene.DYING_AUDIO_PATH = "hw4_assets/sounds/dying.wav";
LastScene.LEVEL_MUSIC_KEY = "LEVEL_MUSIC";
LastScene.LEVEL_MUSIC_PATH = "hw4_assets/music/Finalstagetheme.wav";

},{"../../Wolfie2D/DataTypes/Graphs/PositionGraph":14,"../../Wolfie2D/DataTypes/Shapes/AABB":20,"../../Wolfie2D/DataTypes/Vec2":26,"../../Wolfie2D/Events/GameEvent":31,"../../Wolfie2D/Events/GameEventType":32,"../../Wolfie2D/Input/Input":34,"../../Wolfie2D/Nodes/Graphics/GraphicTypes":44,"../../Wolfie2D/Nodes/UIElements/UIElementTypes":60,"../../Wolfie2D/Pathfinding/Navmesh":63,"../../Wolfie2D/Pathfinding/Strategies/DirectStrategy":64,"../../Wolfie2D/Utils/Color":105,"../../Wolfie2D/Utils/MathUtils":108,"../AI/NPC/NPCBehavior/GaurdBehavior":116,"../AI/Player/PlayerAI":120,"../Actors/NPCActor":127,"../Actors/PlayerActor":128,"../Events":129,"../GameSystems/HUD/HealthbarHUD":131,"../GameSystems/ItemSystem/Items/Healthpack":134,"../GameSystems/ItemSystem/Items/LaserGun":135,"../GameSystems/Searching/HW4Reducers":138,"../Pathfinding/AstarStrategy":141,"./FinalProjectScene":142,"./GameOver":143,"./HW4Scene":144,"./Level1Scene":146,"./Level2Scene":147,"./Level3Scene":148,"./Level4Scene":149,"./Level5Scene":150,"./MainMenu":151,"./SplashScreen":152}],146:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const AABB_1 = __importDefault(require("../../Wolfie2D/DataTypes/Shapes/AABB"));
const Vec2_1 = __importDefault(require("../../Wolfie2D/DataTypes/Vec2"));
// import HW4Scene from "./HW4Scene";
// import MainMenu from "./MainMenu";
// import LevelSelectionScene from "./LevelSelectionScene";
// import { GameEventType } from "../../Wolfie2D/Events/GameEventType";
// import testHW4Scene from "./FinalProjectScene";
const FinalProjectScene_1 = __importDefault(require("./FinalProjectScene"));
class Level1Scene extends FinalProjectScene_1.default {
    constructor(viewport, sceneManager, renderingManager, options) {
        super(viewport, sceneManager, renderingManager, options);
        this.battlers = new Array();
        this.healthbars = new Map();
        this.player = new Array();
        this.enemies = new Array();
        this.laserguns = new Array();
        this.healthpacks = new Array();
        this.shootAudioKey = Level1Scene.SHOOT_AUDIO_KEY;
        this.hitAudioKey = Level1Scene.HIT_AUDIO_KEY;
        this.dyingAudioKey = Level1Scene.DYING_AUDIO_KEY;
        this.levelMusicKey = Level1Scene.LEVEL_MUSIC_KEY;
    }
    /**
     * @see Scene.update()
     */
    loadScene() {
        // Load the player and enemy spritesheets
        this.load.spritesheet("player1", "hw4_assets/spritesheets/Warball_001_Lukas.json");
        // Load in the enemy sprites
        this.load.spritesheet("BlueEnemy", "hw4_assets/spritesheets/Psyfly.json");
        this.load.spritesheet("RedEnemy", "hw4_assets/spritesheets/Ball_Bat.json");
        this.load.spritesheet("BlueHealer", "hw4_assets/spritesheets/Psyfly.json");
        this.load.spritesheet("RedHealer", "hw4_assets/spritesheets/Ball_Bat.json");
        // Load the tilemap
        this.load.tilemap("level", "hw4_assets/tilemaps/BGCTilemap.json");
        // Load the enemy locations
        // this.load.object("red", "hw4_assets/data/enemies/lvl2.json");
        this.load.object("blue", "hw4_assets/data/enemies/blue.json");
        // Load the healthpack and lasergun loactions
        this.load.object("healthpacks", "hw4_assets/data/items/healthpacks.json");
        this.load.object("laserguns", "hw4_assets/data/items/laserguns.json");
        // Load the healthpack, inventory slot, and laser gun sprites
        this.load.image("healthpack", "hw4_assets/sprites/healthpack.png");
        this.load.image("inventorySlot", "hw4_assets/sprites/inventory.png");
        this.load.image("laserGun", "hw4_assets/sprites/laserGun.png");
        this.load.image(FinalProjectScene_1.default.PAUSE_KEY, FinalProjectScene_1.default.PAUSE_PATH);
        this.load.image(FinalProjectScene_1.default.HELP_KEY, FinalProjectScene_1.default.HELP_PATH);
        this.load.image(FinalProjectScene_1.default.CONTROLS_KEY, FinalProjectScene_1.default.CONTROLS_PATH);
        this.load.image(FinalProjectScene_1.default.COMPLETE_KEY, FinalProjectScene_1.default.COMPLETE_PATH);
        this.load.audio(this.shootAudioKey, Level1Scene.SHOOT_AUDIO_PATH);
        this.load.audio(this.hitAudioKey, Level1Scene.HIT_AUDIO_PATH);
        this.load.audio(this.dyingAudioKey, Level1Scene.DYING_AUDIO_PATH);
        this.load.audio(this.levelMusicKey, Level1Scene.LEVEL_MUSIC_PATH);
    }
    /**
     * @see Scene.startScene
     */
    startScene() {
        super.startScene();
    }
    getBattlers() { return this.battlers; }
    getWalls() { return this.walls; }
    getHealthpacks() { return this.healthpacks; }
    getLaserGuns() { return this.laserguns; }
    /**
     * Checks if the given target position is visible from the given position.
     * @param position
     * @param target
     * @returns
     */
    isTargetVisible(position, target) {
        // Get the new player location
        let start = position.clone();
        let delta = target.clone().sub(start);
        // Iterate through the tilemap region until we find a collision
        let minX = Math.min(start.x, target.x);
        let maxX = Math.max(start.x, target.x);
        let minY = Math.min(start.y, target.y);
        let maxY = Math.max(start.y, target.y);
        // Get the wall tilemap
        let walls = this.getWalls();
        let minIndex = walls.getTilemapPosition(minX, minY);
        let maxIndex = walls.getTilemapPosition(maxX, maxY);
        let tileSize = walls.getScaledTileSize();
        for (let col = minIndex.x; col <= maxIndex.x; col++) {
            for (let row = minIndex.y; row <= maxIndex.y; row++) {
                if (walls.isTileCollidable(col, row)) {
                    // Get the position of this tile
                    let tilePos = new Vec2_1.default(col * tileSize.x + tileSize.x / 2, row * tileSize.y + tileSize.y / 2);
                    // Create a collider for this tile
                    let collider = new AABB_1.default(tilePos, tileSize.scaled(1 / 4));
                    let hit = collider.intersectSegment(start, delta, Vec2_1.default.ZERO);
                    if (hit !== null && start.distanceSqTo(hit.pos) < start.distanceSqTo(target)) {
                        // We hit a wall, we can't see the player
                        return false;
                    }
                }
            }
        }
        return true;
    }
}
exports.default = Level1Scene;
Level1Scene.SHOOT_AUDIO_KEY = "PLAYER_SHOOT";
Level1Scene.SHOOT_AUDIO_PATH = "hw4_assets/sounds/laserShoot.wav";
Level1Scene.HIT_AUDIO_KEY = "PLAYER_HIT";
Level1Scene.HIT_AUDIO_PATH = "hw4_assets/sounds/hit.wav";
Level1Scene.DYING_AUDIO_KEY = "PLAYER_DYING";
Level1Scene.DYING_AUDIO_PATH = "hw4_assets/sounds/dying.wav";
Level1Scene.LEVEL_MUSIC_KEY = "LEVEL_MUSIC";
Level1Scene.LEVEL_MUSIC_PATH = "hw4_assets/music/MainGameMusic.wav";

},{"../../Wolfie2D/DataTypes/Shapes/AABB":20,"../../Wolfie2D/DataTypes/Vec2":26,"./FinalProjectScene":142}],147:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Level2SceneLayers = void 0;
const PositionGraph_1 = __importDefault(require("../../Wolfie2D/DataTypes/Graphs/PositionGraph"));
const AABB_1 = __importDefault(require("../../Wolfie2D/DataTypes/Shapes/AABB"));
const Vec2_1 = __importDefault(require("../../Wolfie2D/DataTypes/Vec2"));
const GameEvent_1 = __importDefault(require("../../Wolfie2D/Events/GameEvent"));
const Input_1 = __importDefault(require("../../Wolfie2D/Input/Input"));
const GraphicTypes_1 = require("../../Wolfie2D/Nodes/Graphics/GraphicTypes");
const UIElementTypes_1 = require("../../Wolfie2D/Nodes/UIElements/UIElementTypes");
const Navmesh_1 = __importDefault(require("../../Wolfie2D/Pathfinding/Navmesh"));
const DirectStrategy_1 = __importDefault(require("../../Wolfie2D/Pathfinding/Strategies/DirectStrategy"));
const Color_1 = __importDefault(require("../../Wolfie2D/Utils/Color"));
const MathUtils_1 = __importDefault(require("../../Wolfie2D/Utils/MathUtils"));
const NPCActor_1 = __importDefault(require("../Actors/NPCActor"));
const PlayerActor_1 = __importDefault(require("../Actors/PlayerActor"));
const GaurdBehavior_1 = __importDefault(require("../AI/NPC/NPCBehavior/GaurdBehavior"));
const PlayerAI_1 = __importDefault(require("../AI/Player/PlayerAI"));
const Events_1 = require("../Events");
const HealthbarHUD_1 = __importDefault(require("../GameSystems/HUD/HealthbarHUD"));
const Healthpack_1 = __importDefault(require("../GameSystems/ItemSystem/Items/Healthpack"));
const LaserGun_1 = __importDefault(require("../GameSystems/ItemSystem/Items/LaserGun"));
const HW4Reducers_1 = require("../GameSystems/Searching/HW4Reducers");
const AstarStrategy_1 = __importDefault(require("../Pathfinding/AstarStrategy"));
const GameOver_1 = __importDefault(require("./GameOver"));
// import testMainScene from "./testmain";
const HW4Scene_1 = __importDefault(require("./HW4Scene"));
const MainMenu_1 = __importDefault(require("./MainMenu"));
const LastScene_1 = __importDefault(require("./LastScene"));
const Level1Scene_1 = __importDefault(require("./Level1Scene"));
const Level3Scene_1 = __importDefault(require("./Level3Scene"));
const Level4Scene_1 = __importDefault(require("./Level4Scene"));
const Level5Scene_1 = __importDefault(require("./Level5Scene"));
const GameEventType_1 = require("../../Wolfie2D/Events/GameEventType");
const BattlerGroups = {
    RED: 1,
    BLUE: 2
};
exports.Level2SceneLayers = {
    PRIMARY: "PRIMARY",
    BACKGROUND: "BACKGROUND",
    UI: "UI",
    PAUSE: "PAUSE",
    CONTROLS: "CONTROLS",
    HELP: "HELP",
    COMPLETE: "COMPLETE"
};
class Level2Scene extends HW4Scene_1.default {
    constructor(viewport, sceneManager, renderingManager, options) {
        super(viewport, sceneManager, renderingManager, options);
        this.battlers = new Array();
        this.healthbars = new Map();
        this.player = new Array();
        this.enemies = new Array();
        this.laserguns = new Array();
        this.healthpacks = new Array();
        this.shootAudioKey = Level2Scene.SHOOT_AUDIO_KEY;
        this.hitAudioKey = Level2Scene.HIT_AUDIO_KEY;
        this.dyingAudioKey = Level2Scene.DYING_AUDIO_KEY;
        this.levelMusicKey = Level2Scene.LEVEL_MUSIC_KEY;
    }
    /**
     * @see Scene.update()
     */
    loadScene() {
        // Load the player and enemy spritesheets
        this.load.spritesheet("player1", "hw4_assets/spritesheets/Warball_001_Lukas.json");
        // Load in the enemy sprites
        this.load.spritesheet("BlueEnemy", "hw4_assets/spritesheets/Slime.json");
        this.load.spritesheet("RedEnemy", "hw4_assets/spritesheets/Slime.json");
        this.load.spritesheet("BlueHealer", "hw4_assets/spritesheets/Slime.json");
        this.load.spritesheet("RedHealer", "hw4_assets/spritesheets/Slime.json");
        // Load the tilemap
        this.load.tilemap("level", "hw4_assets/tilemaps/Level2Tilemap.json");
        // Load the enemy locations
        // this.load.object("red", "hw4_assets/data/enemies/lvl2.json");
        this.load.object("blue", "hw4_assets/data/enemies/red.json");
        // Load the healthpack and lasergun loactions
        this.load.object("healthpacks", "hw4_assets/data/items/healthpacks.json");
        this.load.object("laserguns", "hw4_assets/data/items/laserguns.json");
        // Load the healthpack, inventory slot, and laser gun sprites
        this.load.image("healthpack", "hw4_assets/sprites/healthpack.png");
        this.load.image("inventorySlot", "hw4_assets/sprites/inventory.png");
        this.load.image("laserGun", "hw4_assets/sprites/laserGun.png");
        this.load.image(Level2Scene.PAUSE_KEY, Level2Scene.PAUSE_PATH);
        this.load.image(Level2Scene.HELP_KEY, Level2Scene.HELP_PATH);
        this.load.image(Level2Scene.CONTROLS_KEY, Level2Scene.CONTROLS_PATH);
        this.load.image(Level2Scene.COMPLETE_KEY, Level2Scene.COMPLETE_PATH);
        this.load.audio(this.shootAudioKey, Level2Scene.SHOOT_AUDIO_PATH);
        this.load.audio(this.hitAudioKey, Level2Scene.HIT_AUDIO_PATH);
        this.load.audio(this.dyingAudioKey, Level2Scene.DYING_AUDIO_PATH);
        this.load.audio(this.levelMusicKey, Level2Scene.LEVEL_MUSIC_PATH);
    }
    startScene() {
        // super.startScene();
        // 
        const center = this.viewport.getCenter();
        // this.addLayer(MainSceneLayers.UI, );
        // this.addLayer(MainSceneLayers.PAUSE, 5);
        // let v = this.getLayer("UI");
        // Add in the tilemap
        let tilemapLayers = this.add.tilemap("level");
        // Get the wall layer
        this.walls = tilemapLayers[1].getItems()[0];
        // Set the viewport bounds to the tilemap
        let tilemapSize = this.walls.size;
        this.viewport.setBounds(0, 0, tilemapSize.x, tilemapSize.y);
        // 
        this.initLayers();
        // Create the player
        this.initializePlayer();
        this.initializeItems();
        this.initializeNavmesh();
        // Create the NPCS
        this.initializeNPCs();
        // Subscribe to relevant events
        this.receiver.subscribe("healthpack");
        this.receiver.subscribe("enemyDied");
        this.receiver.subscribe(Events_1.ItemEvent.ITEM_REQUEST);
        // Add a UI for health
        this.addUILayer("health");
        // Pause Button (Not needed just press escape)
        // let pause = this.add.uiElement(UIElementType.BUTTON, MainSceneLayers.UI, {position: new Vec2(center.x + 600, center.y - 400), text: "Pause"});
        // pause.size.set(100, 50);
        // pause.borderWidth = 2;
        // pause.borderColor = Color.TRANSPARENT;
        // pause.backgroundColor = Color.TRANSPARENT;
        // pause.onClickEventId = "pause";
        // this.pauseMenu = pause;
        // TODO Make text move with button
        // let pauseBar = new PauseHUD(this, pause, center);
        // this.pause = pauseBar;
        let pauseLayer = this.getLayer("PAUSE");
        this.pauseImage = this.add.sprite(Level2Scene.PAUSE_KEY, pauseLayer.getName());
        this.pauseImage.position.copy(this.viewport.getCenter());
        // this.pauseImage.alpha = 0.7;
        const unpause = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level2SceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y - 210), text: "" });
        unpause.size.set(400, 100);
        unpause.borderWidth = 2;
        unpause.borderColor = Color_1.default.TRANSPARENT;
        unpause.backgroundColor = Color_1.default.TRANSPARENT;
        unpause.onClickEventId = "unpause";
        const mainMenu = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level2SceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y + 223), text: "" });
        mainMenu.size.set(400, 100);
        mainMenu.borderWidth = 2;
        mainMenu.borderColor = Color_1.default.TRANSPARENT;
        mainMenu.backgroundColor = Color_1.default.TRANSPARENT;
        mainMenu.onClickEventId = "mainmenu";
        const controlsButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level2SceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y - 65), text: "" });
        controlsButton.size.set(400, 100);
        controlsButton.borderWidth = 2;
        controlsButton.borderColor = Color_1.default.TRANSPARENT;
        controlsButton.backgroundColor = Color_1.default.TRANSPARENT;
        controlsButton.onClickEventId = "controls";
        const helpButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level2SceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y + 80), text: "" });
        helpButton.size.set(400, 100);
        helpButton.borderWidth = 2;
        helpButton.borderColor = Color_1.default.TRANSPARENT;
        helpButton.backgroundColor = Color_1.default.TRANSPARENT;
        helpButton.onClickEventId = "help";
        pauseLayer.setPaused(true);
        pauseLayer.setHidden(true);
        let controlsLayer = this.getLayer("CONTROLS");
        this.controlsImage = this.add.sprite(Level2Scene.CONTROLS_KEY, controlsLayer.getName());
        this.controlsImage.position.copy(this.viewport.getCenter());
        // this.controlsImage.alpha = 0.5;
        const controlsBackButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level2SceneLayers.CONTROLS, { position: new Vec2_1.default(center.x - 595, center.y + 415), text: "" });
        controlsBackButton.size.set(200, 50);
        controlsBackButton.borderWidth = 2;
        controlsBackButton.borderColor = Color_1.default.TRANSPARENT;
        controlsBackButton.backgroundColor = Color_1.default.TRANSPARENT;
        controlsBackButton.onClickEventId = "backcontrols";
        controlsLayer.setPaused(true);
        controlsLayer.setHidden(true);
        // 
        let helpLayer = this.getLayer("HELP");
        this.helpImage = this.add.sprite(Level2Scene.HELP_KEY, helpLayer.getName());
        this.helpImage.position.copy(this.viewport.getCenter());
        // this.helpImage.alpha = 0.5;
        const helpBackButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level2SceneLayers.HELP, { position: new Vec2_1.default(center.x - 595, center.y + 415), text: "" });
        helpBackButton.size.set(200, 50);
        helpBackButton.borderWidth = 2;
        helpBackButton.borderColor = Color_1.default.TRANSPARENT;
        helpBackButton.backgroundColor = Color_1.default.TRANSPARENT;
        helpBackButton.onClickEventId = "helpcontrols";
        helpLayer.setPaused(true);
        helpLayer.setHidden(true);
        // Complete Layer
        let completeLayer = this.getLayer("COMPLETE");
        this.completeImage = this.add.sprite(Level2Scene.COMPLETE_KEY, completeLayer.getName());
        this.completeImage.position.copy(this.viewport.getCenter());
        const completeButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level2SceneLayers.COMPLETE, { position: new Vec2_1.default(center.x, center.y + 475), text: "" });
        completeButton.size.set(1320, 2000);
        completeButton.borderWidth = 2;
        completeButton.borderColor = Color_1.default.WHITE;
        completeButton.backgroundColor = Color_1.default.TRANSPARENT;
        completeButton.onClickEventId = "nextlvl";
        completeLayer.setPaused(true);
        completeLayer.setHidden(true);
        // this.pauseMenu = unpause;
        // let val = this.layers;
        // console.log(val);
        this.viewport.setZoomLevel(3);
        this.receiver.subscribe(Events_1.PlayerEvent.PLAYER_KILLED);
        this.receiver.subscribe(Events_1.BattlerEvent.BATTLER_KILLED);
        this.receiver.subscribe(Events_1.BattlerEvent.BATTLER_RESPAWN);
        this.receiver.subscribe("pause");
        this.receiver.subscribe("unpause");
        this.receiver.subscribe("mainmenu");
        this.receiver.subscribe("controls");
        this.receiver.subscribe("help");
        this.receiver.subscribe("backcontrols");
        this.receiver.subscribe("helpcontrols");
        this.receiver.subscribe("nextlvl");
        this.emitter.fireEvent(GameEventType_1.GameEventType.PLAY_SOUND, { key: this.levelMusicKey, loop: true, holdReference: true });
        // this.emitter.fireEvent(GameEventType.PLAY_SOUND, {key: this.getShootAudioKey(), loop: false, holdReference: false});
    }
    /**
     * @see Scene.updateScene
     */
    updateScene(deltaT) {
        while (this.receiver.hasNextEvent()) {
            this.handleEvent(this.receiver.getNextEvent());
        }
        // this.inventoryHud.update(deltaT);
        this.healthbars.forEach(healthbar => healthbar.update(deltaT));
        // this.pause.setCenter(this.viewport.getCenter());
        // this.pauseMenu.update(deltaT);
        // this.pause.update(deltaT);
        if (Input_1.default.isKeyJustPressed("escape")) {
            console.log("Escape pressed");
            let v = new GameEvent_1.default("pause", null);
            this.handleEvent(v);
        }
        if (this.boss.health <= 0) {
            this.viewport.setZoomLevel(1);
            this.unpauseCompleteLayer();
            this.player[0].freeze(); // Freezes player
            this.player[0].disablePhysics();
            this.player[0].aiActive = false;
            for (let i = 0; i < this.enemies.length; i++) { // Freezes enemies 
                if (this.enemies[i].battlerActive == true) {
                    this.enemies[i].freeze();
                    this.enemies[i].disablePhysics();
                    this.enemies[i].aiActive = false;
                }
            }
        }
        let pauseLayer = this.getLayer("PAUSE");
        if (!pauseLayer.isHidden()) {
            this.pauseImage.position.copy(this.viewport.getCenter()); // Works but when moving the screen gets moved upwards.
        }
        if (Input_1.default.isKeyPressed("z")) {
            this.viewport.setZoomLevel(1);
        }
        if (Input_1.default.isKeyPressed("x")) {
            this.viewport.setZoomLevel(3);
        }
        if (Input_1.default.isKeyJustPressed("1")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level1Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("2")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level2Scene);
        }
        if (Input_1.default.isKeyJustPressed("3")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level3Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("4")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level4Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("5")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level5Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("6")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(LastScene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("t")) {
            this.player[0].position = this.bossLocation;
        }
        // Another way to play shoot audio is when player pressed space
        //  if(Input.isKeyJustPressed("space")){
        //     console.log("Shoot Audio Played");
        //     this.emitter.fireEvent(GameEventType.PLAY_SOUND, {key: this.getShootAudioKey(), loop: false, holdReference: false});
        //  }
        // TODO If input is 2, 3, 4, 5, 6 go to those levels by chaning the scene
    }
    /**
     * Handle events from the rest of the game
     * @param event a game event
     */
    handleEvent(event) {
        switch (event.type) {
            case Events_1.BattlerEvent.BATTLER_KILLED: {
                this.handleBattlerKilled(event);
                break;
            }
            case Events_1.BattlerEvent.BATTLER_RESPAWN: {
                break;
            }
            case Events_1.ItemEvent.ITEM_REQUEST: {
                this.handleItemRequest(event.data.get("node"), event.data.get("inventory"));
                break;
            }
            case Events_1.PlayerEvent.PLAYER_KILLED: {
                this.viewport.follow(undefined);
                this.sceneManager.changeToScene(GameOver_1.default);
            }
            case "pause": {
                console.log("Pause");
                // this.pauseImage.scale = this.pauseImage.sizeWithZoom;
                this.viewport.setZoomLevel(1);
                this.pauseImage.position.copy(this.viewport.getCenter()); // Works but when moving the screen gets moved upwards.
                // this.viewport.follow(undefined);
                this.player[0].freeze(); // Freezes player
                this.player[0].disablePhysics();
                for (let i = 0; i < this.enemies.length; i++) { // Freezes enemies 
                    if (this.enemies[i].battlerActive == true) {
                        this.enemies[i].freeze();
                        this.enemies[i].disablePhysics();
                        this.enemies[i].aiActive = false;
                    }
                }
                this.unpausePauseLayer();
                this.pausePrimaryLayer();
                this.pauseUILayer();
                break;
            }
            case "unpause": {
                console.log("unpause");
                this.viewport.setZoomLevel(3);
                let center = this.viewport.getCenter();
                // this.pauseMenu.position.set(center.x, center.y);
                this.player[0].unfreeze();
                this.player[0].enablePhysics();
                // Input.enableInput();
                for (let i = 0; i < this.enemies.length; i++) {
                    if (this.enemies[i].battlerActive == true) {
                        this.enemies[i].unfreeze();
                        this.enemies[i].enablePhysics();
                        this.enemies[i].aiActive = true;
                    }
                    // this.enemies[i].setTarget(this.battlers[0]);
                }
                this.pausePauseLayer();
                this.unpausePrimaryLayer();
                this.unpauseUILayer();
                break;
            }
            case "mainmenu": {
                this.viewport.follow(undefined);
                this.viewport.setZoomLevel(1);
                this.sceneManager.changeToScene(MainMenu_1.default);
                break;
            }
            case "controls": {
                this.controlsImage.position.copy(this.viewport.getCenter());
                this.pausePauseLayer();
                this.unpauseControlsLayer();
                break;
            }
            case "backcontrols": {
                this.unpausePauseLayer();
                this.pauseControlsLayer();
                break;
            }
            case "help": {
                this.helpImage.position.copy(this.viewport.getCenter());
                this.pausePauseLayer();
                this.unpauseHelpLayer();
                break;
            }
            case "helpcontrols": {
                this.unpausePauseLayer();
                this.pauseHelpLayer();
                break;
            }
            case "nextlvl": {
                this.viewport.follow(undefined);
                this.viewport.setZoomLevel(1);
                this.sceneManager.changeToScene(Level3Scene_1.default);
                break;
            }
            default: {
                throw new Error(`Unhandled event type "${event.type}" caught in HW3Scene event handler`);
            }
        }
    }
    pausePauseLayer() {
        let pauseLayer = this.getLayer("PAUSE");
        pauseLayer.setPaused(true);
        pauseLayer.setHidden(true);
    }
    unpausePauseLayer() {
        let pauseLayer = this.getLayer("PAUSE");
        pauseLayer.setPaused(false);
        pauseLayer.setHidden(false);
    }
    pauseControlsLayer() {
        let controlsLayer = this.getLayer("CONTROLS");
        controlsLayer.setPaused(true);
        controlsLayer.setHidden(true);
    }
    unpauseControlsLayer() {
        let controlsLayer = this.getLayer("CONTROLS");
        controlsLayer.setPaused(false);
        controlsLayer.setHidden(false);
    }
    pausePrimaryLayer() {
        let primaryLayer = this.getLayer("primary");
        primaryLayer.setPaused(true);
        primaryLayer.setHidden(true);
    }
    unpausePrimaryLayer() {
        let primaryLayer = this.getLayer("primary");
        primaryLayer.setPaused(false);
        primaryLayer.setHidden(false);
    }
    pauseUILayer() {
        let uiLayer = this.getLayer("UI");
        uiLayer.setPaused(true);
        uiLayer.setHidden(true);
    }
    unpauseUILayer() {
        let uiLayer = this.getLayer("UI");
        uiLayer.setPaused(false);
        uiLayer.setHidden(false);
    }
    pauseHelpLayer() {
        let helpLayer = this.getLayer("HELP");
        helpLayer.setPaused(true);
        helpLayer.setHidden(true);
    }
    unpauseHelpLayer() {
        let helpLayer = this.getLayer("HELP");
        helpLayer.setPaused(false);
        helpLayer.setHidden(false);
    }
    pauseCompleteLayer() {
        let completeLayer = this.getLayer("COMPLETE");
        completeLayer.setPaused(true);
        completeLayer.setHidden(true);
    }
    unpauseCompleteLayer() {
        let completeLayer = this.getLayer("COMPLETE");
        completeLayer.setPaused(false);
        completeLayer.setHidden(false);
    }
    handleItemRequest(node, inventory) {
        let items = new Array(...this.healthpacks, ...this.laserguns).filter((item) => {
            return item.inventory === null && item.position.distanceTo(node.position) <= 100;
        });
        if (items.length > 0) {
            inventory.add(items.reduce((0, HW4Reducers_1.ClosestPositioned)(node)));
        }
    }
    /**
     * Handles an NPC being killed by unregistering the NPC from the scenes subsystems
     * @param event an NPC-killed event
     */
    handleBattlerKilled(event) {
        let id = event.data.get("id");
        let battler = this.battlers.find(b => b.id === id);
        if (battler) {
            battler.battlerActive = false;
            this.healthbars.get(id).visible = false;
        }
    }
    /** Initializes the layers in the scene */
    initLayers() {
        this.addLayer(exports.Level2SceneLayers.UI);
        this.addLayer(exports.Level2SceneLayers.PAUSE, 10);
        this.addLayer(exports.Level2SceneLayers.HELP, 11);
        this.addLayer(exports.Level2SceneLayers.CONTROLS, 11);
        this.addLayer(exports.Level2SceneLayers.COMPLETE, 12);
        this.addLayer("primary", 5);
    }
    /**
     * Initializes the player in the scene
     */
    initializePlayer() {
        const center = this.viewport.getCenter();
        let player = this.add.animatedSprite(PlayerActor_1.default, "player1", "primary");
        player.position.set(center.x - 300, center.y + 300);
        player.battleGroup = 2;
        player.health = 10;
        player.maxHealth = 10;
        player.scale = new Vec2_1.default(0.4, 0.4); // Scales player 
        player.inventory.onChange = Events_1.ItemEvent.INVENTORY_CHANGED;
        // this.inventoryHud = new InventoryHUD(this, player.inventory, "inventorySlot", {
        //     start: new Vec2(232, 24),
        //     slotLayer: "slots",
        //     padding: 8,
        //     itemLayer: "items"
        // });
        // Give the player physics
        player.addPhysics(new AABB_1.default(Vec2_1.default.ZERO, new Vec2_1.default(16, 16)));
        // Give the player a healthbar
        let healthbar = new HealthbarHUD_1.default(this, player, "primary", { size: player.size.clone().scaled(1, 1 / 4), offset: player.size.clone().scaled(0, -1 / 3) });
        this.healthbars.set(player.id, healthbar);
        // Give the player PlayerAI
        player.addAI(PlayerAI_1.default);
        // Start the player in the "IDLE" animation
        player.animation.play("IDLE");
        this.battlers.push(player);
        this.player.push(player);
        this.viewport.follow(player);
        this.viewport.setZoomLevel(3);
    }
    /**
     * Initialize the NPCs
     */
    initializeNPCs() {
        // Get the object data for the blue enemies
        let blue = this.load.getObject("blue");
        // Initialize the blue enemies
        for (let i = 0; i < blue.enemies.length; i++) {
            let npc = this.add.animatedSprite(NPCActor_1.default, "BlueEnemy", "primary");
            npc.position.set(blue.enemies[i][0], blue.enemies[i][1]);
            npc.addPhysics(new AABB_1.default(Vec2_1.default.ZERO, new Vec2_1.default(8, 8)), null, false);
            // Give the NPCS their healthbars
            let healthbar = new HealthbarHUD_1.default(this, npc, "primary", { size: npc.size.clone().scaled(1 / 2, 1 / 4), offset: npc.size.clone().scaled(0, -1 / 3) });
            this.healthbars.set(npc.id, healthbar);
            npc.battleGroup = 1;
            npc.speed = 10;
            npc.health = 2;
            npc.maxHealth = 2;
            npc.navkey = "navmesh";
            npc.scale = new Vec2_1.default(0.4, 0.4);
            // Give the NPCs their AI
            npc.addAI(GaurdBehavior_1.default, { target: this.battlers[0], range: 0 });
            // Play the NPCs "IDLE" animation 
            npc.animation.play("IDLE");
            this.battlers.push(npc);
            this.enemies.push(npc);
        }
        let npc = this.add.animatedSprite(NPCActor_1.default, "BlueEnemy", "primary");
        this.boss = npc;
        npc.position.set(1200, 100);
        this.bossLocation = new Vec2_1.default(1200, 100);
        npc.addPhysics(new AABB_1.default(Vec2_1.default.ZERO, new Vec2_1.default(32, 32)), null, false);
        // Give the NPCS their healthbars
        let healthbar = new HealthbarHUD_1.default(this, npc, "primary", { size: npc.size.clone().scaled(2, 1 / 4), offset: npc.size.clone().scaled(0, -1 / 3) });
        this.healthbars.set(npc.id, healthbar);
        npc.battleGroup = 1;
        npc.speed = 10;
        npc.health = 15;
        npc.maxHealth = 15;
        npc.navkey = "navmesh";
        npc.scale = new Vec2_1.default(1, 1);
        // Give the NPCs their AI
        npc.addAI(GaurdBehavior_1.default, { target: this.battlers[0], range: 0 });
        // Play the NPCs "IDLE" animation 
        npc.animation.play("IDLE");
        this.battlers.push(npc);
        this.enemies.push(npc);
        // Initialize the blue healers
    }
    /**
     * Initialize the items in the scene (healthpacks and laser guns)
     */
    initializeItems() {
        let laserguns = this.load.getObject("laserguns");
        this.laserguns = new Array(laserguns.items.length);
        for (let i = 0; i < laserguns.items.length; i++) {
            let sprite = this.add.sprite("laserGun", "primary");
            let line = this.add.graphic(GraphicTypes_1.GraphicType.LINE, "primary", { start: Vec2_1.default.ZERO, end: Vec2_1.default.ZERO });
            this.laserguns[i] = LaserGun_1.default.create(sprite, line);
            this.laserguns[i].position.set(laserguns.items[i][0], laserguns.items[i][1]);
        }
        let healthpacks = this.load.getObject("healthpacks");
        this.healthpacks = new Array(healthpacks.items.length);
        for (let i = 0; i < healthpacks.items.length; i++) {
            let sprite = this.add.sprite("healthpack", "primary");
            this.healthpacks[i] = new Healthpack_1.default(sprite);
            this.healthpacks[i].position.set(healthpacks.items[i][0], healthpacks.items[i][1]);
        }
    }
    /**
     * Initializes the navmesh graph used by the NPCs in the HW3Scene. This method is a little buggy, and
     * and it skips over some of the positions on the tilemap. If you can fix my navmesh generation algorithm,
     * go for it.
     *
     * - Peter
     */
    initializeNavmesh() {
        // Create the graph
        this.graph = new PositionGraph_1.default();
        let dim = this.walls.getDimensions();
        for (let i = 0; i < dim.y; i++) {
            for (let j = 0; j < dim.x; j++) {
                let tile = this.walls.getTileCollider(j, i);
                this.graph.addPositionedNode(tile.center);
            }
        }
        let rc;
        for (let i = 0; i < this.graph.numVertices; i++) {
            rc = this.walls.getTileColRow(i);
            if (!this.walls.isTileCollidable(rc.x, rc.y) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x - 1, 0, dim.x - 1), rc.y) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x + 1, 0, dim.x - 1), rc.y) &&
                !this.walls.isTileCollidable(rc.x, MathUtils_1.default.clamp(rc.y - 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(rc.x, MathUtils_1.default.clamp(rc.y + 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x + 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y + 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x - 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y + 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x + 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y - 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x - 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y - 1, 0, dim.y - 1))) {
                // Create edge to the left
                rc = this.walls.getTileColRow(i + 1);
                if ((i + 1) % dim.x !== 0 && !this.walls.isTileCollidable(rc.x, rc.y)) {
                    this.graph.addEdge(i, i + 1);
                    // this.add.graphic(GraphicType.LINE, "graph", {start: this.graph.getNodePosition(i), end: this.graph.getNodePosition(i + 1)})
                }
                // Create edge below
                rc = this.walls.getTileColRow(i + dim.x);
                if (i + dim.x < this.graph.numVertices && !this.walls.isTileCollidable(rc.x, rc.y)) {
                    this.graph.addEdge(i, i + dim.x);
                    // this.add.graphic(GraphicType.LINE, "graph", {start: this.graph.getNodePosition(i), end: this.graph.getNodePosition(i + dim.x)})
                }
            }
        }
        // Set this graph as a navigable entity
        let navmesh = new Navmesh_1.default(this.graph);
        // Add different strategies to use for this navmesh
        navmesh.registerStrategy("direct", new DirectStrategy_1.default(navmesh));
        navmesh.registerStrategy("astar", new AstarStrategy_1.default(navmesh));
        // Select A* as our navigation strategy
        navmesh.setStrategy("astar");
        // Add this navmesh to the navigation manager
        this.navManager.addNavigableEntity("navmesh", navmesh);
    }
    unloadScene() {
        // The scene is being destroyed, so we can stop playing the song
        this.emitter.fireEvent(GameEventType_1.GameEventType.STOP_SOUND, { key: this.levelMusicKey });
    }
    getBattlers() { return this.battlers; }
    getWalls() { return this.walls; }
    getHealthpacks() { return this.healthpacks; }
    getLaserGuns() { return this.laserguns; }
    /**
     * Checks if the given target position is visible from the given position.
     * @param position
     * @param target
     * @returns
     */
    isTargetVisible(position, target) {
        // Get the new player location
        let start = position.clone();
        let delta = target.clone().sub(start);
        // Iterate through the tilemap region until we find a collision
        let minX = Math.min(start.x, target.x);
        let maxX = Math.max(start.x, target.x);
        let minY = Math.min(start.y, target.y);
        let maxY = Math.max(start.y, target.y);
        // Get the wall tilemap
        let walls = this.getWalls();
        let minIndex = walls.getTilemapPosition(minX, minY);
        let maxIndex = walls.getTilemapPosition(maxX, maxY);
        let tileSize = walls.getScaledTileSize();
        for (let col = minIndex.x; col <= maxIndex.x; col++) {
            for (let row = minIndex.y; row <= maxIndex.y; row++) {
                if (walls.isTileCollidable(col, row)) {
                    // Get the position of this tile
                    let tilePos = new Vec2_1.default(col * tileSize.x + tileSize.x / 2, row * tileSize.y + tileSize.y / 2);
                    // Create a collider for this tile
                    let collider = new AABB_1.default(tilePos, tileSize.scaled(1 / 4));
                    let hit = collider.intersectSegment(start, delta, Vec2_1.default.ZERO);
                    if (hit !== null && start.distanceSqTo(hit.pos) < start.distanceSqTo(target)) {
                        // We hit a wall, we can't see the player
                        return false;
                    }
                }
            }
        }
        return true;
    }
}
exports.default = Level2Scene;
Level2Scene.PAUSE_KEY = "PAUSE";
Level2Scene.PAUSE_PATH = "hw4_assets/sprites/Paused-Screen.png";
Level2Scene.HELP_KEY = "HELP";
Level2Scene.HELP_PATH = "hw4_assets/sprites/Help-Screen.png";
Level2Scene.CONTROLS_KEY = "CONTROLS";
Level2Scene.CONTROLS_PATH = "hw4_assets/sprites/Controls-Screen.png";
Level2Scene.SHOOT_AUDIO_KEY = "PLAYER_SHOOT";
Level2Scene.SHOOT_AUDIO_PATH = "hw4_assets/sounds/laserShoot.wav";
Level2Scene.COMPLETE_KEY = "COMPLETE";
Level2Scene.COMPLETE_PATH = "hw4_assets/sprites/Level-Complete.png";
Level2Scene.HIT_AUDIO_KEY = "PLAYER_HIT";
Level2Scene.HIT_AUDIO_PATH = "hw4_assets/sounds/hit.wav";
Level2Scene.DYING_AUDIO_KEY = "PLAYER_DYING";
Level2Scene.DYING_AUDIO_PATH = "hw4_assets/sounds/dying.wav";
Level2Scene.LEVEL_MUSIC_KEY = "LEVEL_MUSIC";
Level2Scene.LEVEL_MUSIC_PATH = "hw4_assets/music/MainGameMusic.wav";

},{"../../Wolfie2D/DataTypes/Graphs/PositionGraph":14,"../../Wolfie2D/DataTypes/Shapes/AABB":20,"../../Wolfie2D/DataTypes/Vec2":26,"../../Wolfie2D/Events/GameEvent":31,"../../Wolfie2D/Events/GameEventType":32,"../../Wolfie2D/Input/Input":34,"../../Wolfie2D/Nodes/Graphics/GraphicTypes":44,"../../Wolfie2D/Nodes/UIElements/UIElementTypes":60,"../../Wolfie2D/Pathfinding/Navmesh":63,"../../Wolfie2D/Pathfinding/Strategies/DirectStrategy":64,"../../Wolfie2D/Utils/Color":105,"../../Wolfie2D/Utils/MathUtils":108,"../AI/NPC/NPCBehavior/GaurdBehavior":116,"../AI/Player/PlayerAI":120,"../Actors/NPCActor":127,"../Actors/PlayerActor":128,"../Events":129,"../GameSystems/HUD/HealthbarHUD":131,"../GameSystems/ItemSystem/Items/Healthpack":134,"../GameSystems/ItemSystem/Items/LaserGun":135,"../GameSystems/Searching/HW4Reducers":138,"../Pathfinding/AstarStrategy":141,"./GameOver":143,"./HW4Scene":144,"./LastScene":145,"./Level1Scene":146,"./Level3Scene":148,"./Level4Scene":149,"./Level5Scene":150,"./MainMenu":151}],148:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Level3SceneLayers = void 0;
const PositionGraph_1 = __importDefault(require("../../Wolfie2D/DataTypes/Graphs/PositionGraph"));
const AABB_1 = __importDefault(require("../../Wolfie2D/DataTypes/Shapes/AABB"));
const Vec2_1 = __importDefault(require("../../Wolfie2D/DataTypes/Vec2"));
const GameEvent_1 = __importDefault(require("../../Wolfie2D/Events/GameEvent"));
const Input_1 = __importDefault(require("../../Wolfie2D/Input/Input"));
const GraphicTypes_1 = require("../../Wolfie2D/Nodes/Graphics/GraphicTypes");
const UIElementTypes_1 = require("../../Wolfie2D/Nodes/UIElements/UIElementTypes");
const Navmesh_1 = __importDefault(require("../../Wolfie2D/Pathfinding/Navmesh"));
const DirectStrategy_1 = __importDefault(require("../../Wolfie2D/Pathfinding/Strategies/DirectStrategy"));
const Color_1 = __importDefault(require("../../Wolfie2D/Utils/Color"));
const MathUtils_1 = __importDefault(require("../../Wolfie2D/Utils/MathUtils"));
const NPCActor_1 = __importDefault(require("../Actors/NPCActor"));
const PlayerActor_1 = __importDefault(require("../Actors/PlayerActor"));
const GaurdBehavior_1 = __importDefault(require("../AI/NPC/NPCBehavior/GaurdBehavior"));
const PlayerAI_1 = __importDefault(require("../AI/Player/PlayerAI"));
const Events_1 = require("../Events");
const HealthbarHUD_1 = __importDefault(require("../GameSystems/HUD/HealthbarHUD"));
const Healthpack_1 = __importDefault(require("../GameSystems/ItemSystem/Items/Healthpack"));
const LaserGun_1 = __importDefault(require("../GameSystems/ItemSystem/Items/LaserGun"));
const HW4Reducers_1 = require("../GameSystems/Searching/HW4Reducers");
const AstarStrategy_1 = __importDefault(require("../Pathfinding/AstarStrategy"));
const GameOver_1 = __importDefault(require("./GameOver"));
// import HW4Scene from "./HW4Scene";
// import MainMenu from "./MainMenu";
// import LevelSelectionScene from "./LevelSelectionScene";
// import { GameEventType } from "../../Wolfie2D/Events/GameEventType";
// import testHW4Scene from "./FinalProjectScene";
const FinalProjectScene_1 = __importDefault(require("./FinalProjectScene"));
// import testMainScene from "./testmain";
const HW4Scene_1 = __importDefault(require("./HW4Scene"));
const MainMenu_1 = __importDefault(require("./MainMenu"));
const LastScene_1 = __importDefault(require("./LastScene"));
const Level1Scene_1 = __importDefault(require("./Level1Scene"));
const Level2Scene_1 = __importDefault(require("./Level2Scene"));
const Level4Scene_1 = __importDefault(require("./Level4Scene"));
const Level5Scene_1 = __importDefault(require("./Level5Scene"));
const GameEventType_1 = require("../../Wolfie2D/Events/GameEventType");
const BattlerGroups = {
    RED: 1,
    BLUE: 2
};
exports.Level3SceneLayers = {
    PRIMARY: "PRIMARY",
    BACKGROUND: "BACKGROUND",
    UI: "UI",
    PAUSE: "PAUSE",
    CONTROLS: "CONTROLS",
    HELP: "HELP",
    COMPLETE: "COMPLETE"
};
class Level3Scene extends HW4Scene_1.default {
    constructor(viewport, sceneManager, renderingManager, options) {
        super(viewport, sceneManager, renderingManager, options);
        this.battlers = new Array();
        this.healthbars = new Map();
        this.player = new Array();
        this.enemies = new Array();
        this.laserguns = new Array();
        this.healthpacks = new Array();
        this.shootAudioKey = Level3Scene.SHOOT_AUDIO_KEY;
        this.hitAudioKey = Level3Scene.HIT_AUDIO_KEY;
        this.dyingAudioKey = Level3Scene.DYING_AUDIO_KEY;
        this.levelMusicKey = Level3Scene.LEVEL_MUSIC_KEY;
    }
    /**
     * @see Scene.update()
     */
    loadScene() {
        // Load the player and enemy spritesheets
        this.load.spritesheet("player1", "hw4_assets/spritesheets/Warball_001_Lukas.json");
        // Load in the enemy sprites
        this.load.spritesheet("BlueEnemy", "hw4_assets/spritesheets/Ball_Clown.json");
        this.load.spritesheet("RedEnemy", "hw4_assets/spritesheets/Ball_Bat.json");
        this.load.spritesheet("BlueHealer", "hw4_assets/spritesheets/Psyfly.json");
        this.load.spritesheet("RedHealer", "hw4_assets/spritesheets/Ball_Bat.json");
        // Load the tilemap
        this.load.tilemap("level", "hw4_assets/tilemaps/Level3Tilemap.json");
        // Load the enemy locations
        // this.load.object("red", "hw4_assets/data/enemies/lvl2.json");
        this.load.object("blue", "hw4_assets/data/enemies/lvl3.json");
        // Load the healthpack and lasergun loactions
        this.load.object("healthpacks", "hw4_assets/data/items/healthpacks.json");
        this.load.object("laserguns", "hw4_assets/data/items/laserguns.json");
        // Load the healthpack, inventory slot, and laser gun sprites
        this.load.image("healthpack", "hw4_assets/sprites/healthpack.png");
        this.load.image("inventorySlot", "hw4_assets/sprites/inventory.png");
        this.load.image("laserGun", "hw4_assets/sprites/laserGun.png");
        this.load.image(Level3Scene.PAUSE_KEY, Level3Scene.PAUSE_PATH);
        this.load.image(Level3Scene.HELP_KEY, Level3Scene.HELP_PATH);
        this.load.image(Level3Scene.CONTROLS_KEY, Level3Scene.CONTROLS_PATH);
        this.load.image(Level3Scene.COMPLETE_KEY, Level3Scene.COMPLETE_PATH);
        this.load.audio(this.shootAudioKey, Level3Scene.SHOOT_AUDIO_PATH);
        this.load.audio(this.hitAudioKey, Level3Scene.HIT_AUDIO_PATH);
        this.load.audio(this.dyingAudioKey, Level3Scene.DYING_AUDIO_PATH);
        this.load.audio(this.levelMusicKey, Level3Scene.LEVEL_MUSIC_PATH);
    }
    startScene() {
        // super.startScene();
        // 
        const center = this.viewport.getCenter();
        // this.addLayer(MainSceneLayers.UI, );
        // this.addLayer(MainSceneLayers.PAUSE, 5);
        // let v = this.getLayer("UI");
        // Add in the tilemap
        let tilemapLayers = this.add.tilemap("level");
        // Get the wall layer
        this.walls = tilemapLayers[1].getItems()[0];
        // Set the viewport bounds to the tilemap
        let tilemapSize = this.walls.size;
        this.viewport.setBounds(0, 0, tilemapSize.x, tilemapSize.y);
        // 
        this.initLayers();
        // Create the player
        this.initializePlayer();
        this.initializeItems();
        this.initializeNavmesh();
        // Create the NPCS
        this.initializeNPCs();
        // Subscribe to relevant events
        this.receiver.subscribe("healthpack");
        this.receiver.subscribe("enemyDied");
        this.receiver.subscribe(Events_1.ItemEvent.ITEM_REQUEST);
        // Add a UI for health
        this.addUILayer("health");
        // Pause Button (Not needed just press escape)
        // let pause = this.add.uiElement(UIElementType.BUTTON, MainSceneLayers.UI, {position: new Vec2(center.x + 600, center.y - 400), text: "Pause"});
        // pause.size.set(100, 50);
        // pause.borderWidth = 2;
        // pause.borderColor = Color.TRANSPARENT;
        // pause.backgroundColor = Color.TRANSPARENT;
        // pause.onClickEventId = "pause";
        // this.pauseMenu = pause;
        // TODO Make text move with button
        // let pauseBar = new PauseHUD(this, pause, center);
        // this.pause = pauseBar;
        let pauseLayer = this.getLayer("PAUSE");
        this.pauseImage = this.add.sprite(Level3Scene.PAUSE_KEY, pauseLayer.getName());
        this.pauseImage.position.copy(this.viewport.getCenter());
        // this.pauseImage.alpha = 0.7;
        const unpause = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level3SceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y - 210), text: "" });
        unpause.size.set(400, 100);
        unpause.borderWidth = 2;
        unpause.borderColor = Color_1.default.TRANSPARENT;
        unpause.backgroundColor = Color_1.default.TRANSPARENT;
        unpause.onClickEventId = "unpause";
        const mainMenu = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level3SceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y + 223), text: "" });
        mainMenu.size.set(400, 100);
        mainMenu.borderWidth = 2;
        mainMenu.borderColor = Color_1.default.TRANSPARENT;
        mainMenu.backgroundColor = Color_1.default.TRANSPARENT;
        mainMenu.onClickEventId = "mainmenu";
        const controlsButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level3SceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y - 65), text: "" });
        controlsButton.size.set(400, 100);
        controlsButton.borderWidth = 2;
        controlsButton.borderColor = Color_1.default.TRANSPARENT;
        controlsButton.backgroundColor = Color_1.default.TRANSPARENT;
        controlsButton.onClickEventId = "controls";
        const helpButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level3SceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y + 80), text: "" });
        helpButton.size.set(400, 100);
        helpButton.borderWidth = 2;
        helpButton.borderColor = Color_1.default.TRANSPARENT;
        helpButton.backgroundColor = Color_1.default.TRANSPARENT;
        helpButton.onClickEventId = "help";
        pauseLayer.setPaused(true);
        pauseLayer.setHidden(true);
        let controlsLayer = this.getLayer("CONTROLS");
        this.controlsImage = this.add.sprite(Level3Scene.CONTROLS_KEY, controlsLayer.getName());
        this.controlsImage.position.copy(this.viewport.getCenter());
        // this.controlsImage.alpha = 0.5;
        const controlsBackButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level3SceneLayers.CONTROLS, { position: new Vec2_1.default(center.x - 595, center.y + 415), text: "" });
        controlsBackButton.size.set(200, 50);
        controlsBackButton.borderWidth = 2;
        controlsBackButton.borderColor = Color_1.default.TRANSPARENT;
        controlsBackButton.backgroundColor = Color_1.default.TRANSPARENT;
        controlsBackButton.onClickEventId = "backcontrols";
        controlsLayer.setPaused(true);
        controlsLayer.setHidden(true);
        // 
        let helpLayer = this.getLayer("HELP");
        this.helpImage = this.add.sprite(Level3Scene.HELP_KEY, helpLayer.getName());
        this.helpImage.position.copy(this.viewport.getCenter());
        // this.helpImage.alpha = 0.5;
        const helpBackButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level3SceneLayers.HELP, { position: new Vec2_1.default(center.x - 595, center.y + 415), text: "" });
        helpBackButton.size.set(200, 50);
        helpBackButton.borderWidth = 2;
        helpBackButton.borderColor = Color_1.default.TRANSPARENT;
        helpBackButton.backgroundColor = Color_1.default.TRANSPARENT;
        helpBackButton.onClickEventId = "helpcontrols";
        helpLayer.setPaused(true);
        helpLayer.setHidden(true);
        let completeLayer = this.getLayer("COMPLETE");
        this.completeImage = this.add.sprite(FinalProjectScene_1.default.COMPLETE_KEY, completeLayer.getName());
        this.completeImage.position.copy(this.viewport.getCenter());
        const completeButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level3SceneLayers.COMPLETE, { position: new Vec2_1.default(center.x, center.y + 475), text: "" });
        completeButton.size.set(1320, 2000);
        completeButton.borderWidth = 2;
        completeButton.borderColor = Color_1.default.WHITE;
        completeButton.backgroundColor = Color_1.default.TRANSPARENT;
        completeButton.onClickEventId = "nextlvl";
        completeLayer.setPaused(true);
        completeLayer.setHidden(true);
        // this.pauseMenu = unpause;
        // let val = this.layers;
        // console.log(val);
        this.viewport.setZoomLevel(3);
        this.receiver.subscribe(Events_1.PlayerEvent.PLAYER_KILLED);
        this.receiver.subscribe(Events_1.BattlerEvent.BATTLER_KILLED);
        this.receiver.subscribe(Events_1.BattlerEvent.BATTLER_RESPAWN);
        this.receiver.subscribe("pause");
        this.receiver.subscribe("unpause");
        this.receiver.subscribe("mainmenu");
        this.receiver.subscribe("controls");
        this.receiver.subscribe("help");
        this.receiver.subscribe("backcontrols");
        this.receiver.subscribe("helpcontrols");
        this.receiver.subscribe("nextlvl");
        this.emitter.fireEvent(GameEventType_1.GameEventType.PLAY_SOUND, { key: this.levelMusicKey, loop: true, holdReference: true });
        // this.emitter.fireEvent(GameEventType.PLAY_SOUND, {key: this.getShootAudioKey(), loop: false, holdReference: false});
    }
    /**
     * @see Scene.updateScene
     */
    updateScene(deltaT) {
        while (this.receiver.hasNextEvent()) {
            this.handleEvent(this.receiver.getNextEvent());
        }
        // this.inventoryHud.update(deltaT);
        this.healthbars.forEach(healthbar => healthbar.update(deltaT));
        // this.pause.setCenter(this.viewport.getCenter());
        // this.pauseMenu.update(deltaT);
        // this.pause.update(deltaT);
        if (Input_1.default.isKeyJustPressed("escape")) {
            console.log("Escape pressed");
            let v = new GameEvent_1.default("pause", null);
            this.handleEvent(v);
        }
        if (this.boss.health <= 0) {
            this.viewport.setZoomLevel(1);
            this.unpauseCompleteLayer();
            this.player[0].freeze(); // Freezes player
            this.player[0].disablePhysics();
            this.player[0].aiActive = false;
            for (let i = 0; i < this.enemies.length; i++) { // Freezes enemies 
                if (this.enemies[i].battlerActive == true) {
                    this.enemies[i].freeze();
                    this.enemies[i].disablePhysics();
                    this.enemies[i].aiActive = false;
                }
            }
        }
        let pauseLayer = this.getLayer("PAUSE");
        if (!pauseLayer.isHidden()) {
            this.pauseImage.position.copy(this.viewport.getCenter()); // Works but when moving the screen gets moved upwards.
        }
        if (Input_1.default.isKeyPressed("z")) {
            this.viewport.setZoomLevel(1);
        }
        if (Input_1.default.isKeyPressed("x")) {
            this.viewport.setZoomLevel(3);
        }
        if (Input_1.default.isKeyJustPressed("1")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level1Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("2")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level2Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("3")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level3Scene);
        }
        if (Input_1.default.isKeyJustPressed("4")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level4Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("5")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level5Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("6")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(LastScene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("t")) {
            this.player[0].position = this.bossLocation;
        }
        // Another way to play shoot audio is when player pressed space
        //  if(Input.isKeyJustPressed("space")){
        //     console.log("Shoot Audio Played");
        //     this.emitter.fireEvent(GameEventType.PLAY_SOUND, {key: this.getShootAudioKey(), loop: false, holdReference: false});
        //  }
        // TODO If input is 2, 3, 4, 5, 6 go to those levels by chaning the scene
    }
    /**
     * Handle events from the rest of the game
     * @param event a game event
     */
    handleEvent(event) {
        switch (event.type) {
            case Events_1.BattlerEvent.BATTLER_KILLED: {
                this.handleBattlerKilled(event);
                break;
            }
            case Events_1.BattlerEvent.BATTLER_RESPAWN: {
                break;
            }
            case Events_1.ItemEvent.ITEM_REQUEST: {
                this.handleItemRequest(event.data.get("node"), event.data.get("inventory"));
                break;
            }
            case Events_1.PlayerEvent.PLAYER_KILLED: {
                this.viewport.follow(undefined);
                this.sceneManager.changeToScene(GameOver_1.default);
            }
            case "pause": {
                console.log("Pause");
                // this.pauseImage.scale = this.pauseImage.sizeWithZoom;
                this.viewport.setZoomLevel(1);
                this.pauseImage.position.copy(this.viewport.getCenter()); // Works but when moving the screen gets moved upwards.
                // this.viewport.follow(undefined);
                this.player[0].freeze(); // Freezes player
                this.player[0].disablePhysics();
                for (let i = 0; i < this.enemies.length; i++) { // Freezes enemies 
                    if (this.enemies[i].battlerActive == true) {
                        this.enemies[i].freeze();
                        this.enemies[i].disablePhysics();
                        this.enemies[i].aiActive = false;
                    }
                    // this.enemies[i].clearTarget(); 
                    // TODO Stop enemy from attacking while paused
                }
                this.unpausePauseLayer();
                this.pausePrimaryLayer();
                this.pauseUILayer();
                break;
            }
            case "unpause": {
                console.log("unpause");
                this.viewport.setZoomLevel(3);
                let center = this.viewport.getCenter();
                // this.pauseMenu.position.set(center.x, center.y);
                this.player[0].unfreeze();
                this.player[0].enablePhysics();
                // Input.enableInput();
                for (let i = 0; i < this.enemies.length; i++) {
                    if (this.enemies[i].battlerActive == true) {
                        this.enemies[i].unfreeze();
                        this.enemies[i].enablePhysics();
                        this.enemies[i].aiActive = true;
                    }
                    // this.enemies[i].setTarget(this.battlers[0]);
                }
                this.pausePauseLayer();
                this.unpausePrimaryLayer();
                this.unpauseUILayer();
                break;
            }
            case "mainmenu": {
                this.viewport.follow(undefined);
                this.viewport.setZoomLevel(1);
                this.sceneManager.changeToScene(MainMenu_1.default);
                break;
            }
            case "controls": {
                this.controlsImage.position.copy(this.viewport.getCenter());
                this.pausePauseLayer();
                this.unpauseControlsLayer();
                break;
            }
            case "backcontrols": {
                this.unpausePauseLayer();
                this.pauseControlsLayer();
                break;
            }
            case "help": {
                this.helpImage.position.copy(this.viewport.getCenter());
                this.pausePauseLayer();
                this.unpauseHelpLayer();
                break;
            }
            case "helpcontrols": {
                this.unpausePauseLayer();
                this.pauseHelpLayer();
                break;
            }
            case "nextlvl": {
                this.viewport.follow(undefined);
                this.viewport.setZoomLevel(1);
                this.sceneManager.changeToScene(Level4Scene_1.default);
                break;
            }
            default: {
                throw new Error(`Unhandled event type "${event.type}" caught in HW3Scene event handler`);
            }
        }
    }
    pausePauseLayer() {
        let pauseLayer = this.getLayer("PAUSE");
        pauseLayer.setPaused(true);
        pauseLayer.setHidden(true);
    }
    unpausePauseLayer() {
        let pauseLayer = this.getLayer("PAUSE");
        pauseLayer.setPaused(false);
        pauseLayer.setHidden(false);
    }
    pauseControlsLayer() {
        let controlsLayer = this.getLayer("CONTROLS");
        controlsLayer.setPaused(true);
        controlsLayer.setHidden(true);
    }
    unpauseControlsLayer() {
        let controlsLayer = this.getLayer("CONTROLS");
        controlsLayer.setPaused(false);
        controlsLayer.setHidden(false);
    }
    pausePrimaryLayer() {
        let primaryLayer = this.getLayer("primary");
        primaryLayer.setPaused(true);
        primaryLayer.setHidden(true);
    }
    unpausePrimaryLayer() {
        let primaryLayer = this.getLayer("primary");
        primaryLayer.setPaused(false);
        primaryLayer.setHidden(false);
    }
    pauseUILayer() {
        let uiLayer = this.getLayer("UI");
        uiLayer.setPaused(true);
        uiLayer.setHidden(true);
    }
    unpauseUILayer() {
        let uiLayer = this.getLayer("UI");
        uiLayer.setPaused(false);
        uiLayer.setHidden(false);
    }
    pauseHelpLayer() {
        let helpLayer = this.getLayer("HELP");
        helpLayer.setPaused(true);
        helpLayer.setHidden(true);
    }
    unpauseHelpLayer() {
        let helpLayer = this.getLayer("HELP");
        helpLayer.setPaused(false);
        helpLayer.setHidden(false);
    }
    pauseCompleteLayer() {
        let completeLayer = this.getLayer("COMPLETE");
        completeLayer.setPaused(true);
        completeLayer.setHidden(true);
    }
    unpauseCompleteLayer() {
        let completeLayer = this.getLayer("COMPLETE");
        completeLayer.setPaused(false);
        completeLayer.setHidden(false);
    }
    handleItemRequest(node, inventory) {
        let items = new Array(...this.healthpacks, ...this.laserguns).filter((item) => {
            return item.inventory === null && item.position.distanceTo(node.position) <= 100;
        });
        if (items.length > 0) {
            inventory.add(items.reduce((0, HW4Reducers_1.ClosestPositioned)(node)));
        }
    }
    /**
     * Handles an NPC being killed by unregistering the NPC from the scenes subsystems
     * @param event an NPC-killed event
     */
    handleBattlerKilled(event) {
        let id = event.data.get("id");
        let battler = this.battlers.find(b => b.id === id);
        if (battler) {
            battler.battlerActive = false;
            this.healthbars.get(id).visible = false;
        }
    }
    /** Initializes the layers in the scene */
    initLayers() {
        this.addLayer(exports.Level3SceneLayers.UI);
        this.addLayer(exports.Level3SceneLayers.PAUSE, 10);
        this.addLayer(exports.Level3SceneLayers.HELP, 11);
        this.addLayer(exports.Level3SceneLayers.CONTROLS, 11);
        this.addLayer(exports.Level3SceneLayers.COMPLETE, 12);
        this.addLayer("primary", 5);
    }
    /**
     * Initializes the player in the scene
     */
    initializePlayer() {
        const center = this.viewport.getCenter();
        let player = this.add.animatedSprite(PlayerActor_1.default, "player1", "primary");
        player.position.set(center.x - 600, center.y + 300);
        player.battleGroup = 2;
        player.health = 10;
        player.maxHealth = 10;
        player.scale = new Vec2_1.default(0.4, 0.4); // Scales player 
        player.inventory.onChange = Events_1.ItemEvent.INVENTORY_CHANGED;
        // this.inventoryHud = new InventoryHUD(this, player.inventory, "inventorySlot", {
        //     start: new Vec2(232, 24),
        //     slotLayer: "slots",
        //     padding: 8,
        //     itemLayer: "items"
        // });
        // Give the player physics
        player.addPhysics(new AABB_1.default(Vec2_1.default.ZERO, new Vec2_1.default(16, 16)));
        // Give the player a healthbar
        let healthbar = new HealthbarHUD_1.default(this, player, "primary", { size: player.size.clone().scaled(1, 1 / 4), offset: player.size.clone().scaled(0, -1 / 3) });
        this.healthbars.set(player.id, healthbar);
        // Give the player PlayerAI
        player.addAI(PlayerAI_1.default);
        // Start the player in the "IDLE" animation
        player.animation.play("IDLE");
        this.battlers.push(player);
        this.player.push(player);
        this.viewport.follow(player);
        this.viewport.setZoomLevel(3);
    }
    /**
     * Initialize the NPCs
     */
    initializeNPCs() {
        // Get the object data for the blue enemies
        let blue = this.load.getObject("blue");
        // Initialize the blue enemies
        for (let i = 0; i < blue.enemies.length; i++) {
            let npc = this.add.animatedSprite(NPCActor_1.default, "BlueEnemy", "primary");
            npc.position.set(blue.enemies[i][0], blue.enemies[i][1]);
            npc.addPhysics(new AABB_1.default(Vec2_1.default.ZERO, new Vec2_1.default(8, 8)), null, false);
            // Give the NPCS their healthbars
            let healthbar = new HealthbarHUD_1.default(this, npc, "primary", { size: npc.size.clone().scaled(1 / 2, 1 / 4), offset: npc.size.clone().scaled(0, -1 / 3) });
            this.healthbars.set(npc.id, healthbar);
            npc.battleGroup = 1;
            npc.speed = 10;
            npc.health = 3;
            npc.maxHealth = 3;
            npc.navkey = "navmesh";
            npc.scale = new Vec2_1.default(0.4, 0.4);
            // Give the NPCs their AI
            npc.addAI(GaurdBehavior_1.default, { target: this.battlers[0], range: 0 });
            // Play the NPCs "IDLE" animation 
            npc.animation.play("IDLE");
            this.battlers.push(npc);
            this.enemies.push(npc);
        }
        let npc = this.add.animatedSprite(NPCActor_1.default, "BlueEnemy", "primary");
        this.boss = npc;
        npc.position.set(1200, 100);
        this.bossLocation = new Vec2_1.default(1200, 100);
        npc.addPhysics(new AABB_1.default(Vec2_1.default.ZERO, new Vec2_1.default(32, 32)), null, false);
        // Give the NPCS their healthbars
        let healthbar = new HealthbarHUD_1.default(this, npc, "primary", { size: npc.size.clone().scaled(2, 1 / 4), offset: npc.size.clone().scaled(0, -1 / 3) });
        this.healthbars.set(npc.id, healthbar);
        npc.battleGroup = 1;
        npc.speed = 10;
        npc.health = 20;
        npc.maxHealth = 20;
        npc.navkey = "navmesh";
        npc.scale = new Vec2_1.default(1, 1);
        // Give the NPCs their AI
        npc.addAI(GaurdBehavior_1.default, { target: this.battlers[0], range: 0 });
        // Play the NPCs "IDLE" animation 
        npc.animation.play("IDLE");
        this.battlers.push(npc);
        this.enemies.push(npc);
        // Initialize the blue healers
    }
    /**
     * Initialize the items in the scene (healthpacks and laser guns)
     */
    initializeItems() {
        let laserguns = this.load.getObject("laserguns");
        this.laserguns = new Array(laserguns.items.length);
        for (let i = 0; i < laserguns.items.length; i++) {
            let sprite = this.add.sprite("laserGun", "primary");
            let line = this.add.graphic(GraphicTypes_1.GraphicType.LINE, "primary", { start: Vec2_1.default.ZERO, end: Vec2_1.default.ZERO });
            this.laserguns[i] = LaserGun_1.default.create(sprite, line);
            this.laserguns[i].position.set(laserguns.items[i][0], laserguns.items[i][1]);
        }
        let healthpacks = this.load.getObject("healthpacks");
        this.healthpacks = new Array(healthpacks.items.length);
        for (let i = 0; i < healthpacks.items.length; i++) {
            let sprite = this.add.sprite("healthpack", "primary");
            this.healthpacks[i] = new Healthpack_1.default(sprite);
            this.healthpacks[i].position.set(healthpacks.items[i][0], healthpacks.items[i][1]);
        }
    }
    /**
     * Initializes the navmesh graph used by the NPCs in the HW3Scene. This method is a little buggy, and
     * and it skips over some of the positions on the tilemap. If you can fix my navmesh generation algorithm,
     * go for it.
     *
     * - Peter
     */
    initializeNavmesh() {
        // Create the graph
        this.graph = new PositionGraph_1.default();
        let dim = this.walls.getDimensions();
        for (let i = 0; i < dim.y; i++) {
            for (let j = 0; j < dim.x; j++) {
                let tile = this.walls.getTileCollider(j, i);
                this.graph.addPositionedNode(tile.center);
            }
        }
        let rc;
        for (let i = 0; i < this.graph.numVertices; i++) {
            rc = this.walls.getTileColRow(i);
            if (!this.walls.isTileCollidable(rc.x, rc.y) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x - 1, 0, dim.x - 1), rc.y) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x + 1, 0, dim.x - 1), rc.y) &&
                !this.walls.isTileCollidable(rc.x, MathUtils_1.default.clamp(rc.y - 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(rc.x, MathUtils_1.default.clamp(rc.y + 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x + 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y + 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x - 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y + 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x + 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y - 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x - 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y - 1, 0, dim.y - 1))) {
                // Create edge to the left
                rc = this.walls.getTileColRow(i + 1);
                if ((i + 1) % dim.x !== 0 && !this.walls.isTileCollidable(rc.x, rc.y)) {
                    this.graph.addEdge(i, i + 1);
                    // this.add.graphic(GraphicType.LINE, "graph", {start: this.graph.getNodePosition(i), end: this.graph.getNodePosition(i + 1)})
                }
                // Create edge below
                rc = this.walls.getTileColRow(i + dim.x);
                if (i + dim.x < this.graph.numVertices && !this.walls.isTileCollidable(rc.x, rc.y)) {
                    this.graph.addEdge(i, i + dim.x);
                    // this.add.graphic(GraphicType.LINE, "graph", {start: this.graph.getNodePosition(i), end: this.graph.getNodePosition(i + dim.x)})
                }
            }
        }
        // Set this graph as a navigable entity
        let navmesh = new Navmesh_1.default(this.graph);
        // Add different strategies to use for this navmesh
        navmesh.registerStrategy("direct", new DirectStrategy_1.default(navmesh));
        navmesh.registerStrategy("astar", new AstarStrategy_1.default(navmesh));
        // Select A* as our navigation strategy
        navmesh.setStrategy("astar");
        // Add this navmesh to the navigation manager
        this.navManager.addNavigableEntity("navmesh", navmesh);
    }
    unloadScene() {
        // The scene is being destroyed, so we can stop playing the song
        this.emitter.fireEvent(GameEventType_1.GameEventType.STOP_SOUND, { key: this.levelMusicKey });
    }
    getBattlers() { return this.battlers; }
    getWalls() { return this.walls; }
    getHealthpacks() { return this.healthpacks; }
    getLaserGuns() { return this.laserguns; }
    /**
     * Checks if the given target position is visible from the given position.
     * @param position
     * @param target
     * @returns
     */
    isTargetVisible(position, target) {
        // Get the new player location
        let start = position.clone();
        let delta = target.clone().sub(start);
        // Iterate through the tilemap region until we find a collision
        let minX = Math.min(start.x, target.x);
        let maxX = Math.max(start.x, target.x);
        let minY = Math.min(start.y, target.y);
        let maxY = Math.max(start.y, target.y);
        // Get the wall tilemap
        let walls = this.getWalls();
        let minIndex = walls.getTilemapPosition(minX, minY);
        let maxIndex = walls.getTilemapPosition(maxX, maxY);
        let tileSize = walls.getScaledTileSize();
        for (let col = minIndex.x; col <= maxIndex.x; col++) {
            for (let row = minIndex.y; row <= maxIndex.y; row++) {
                if (walls.isTileCollidable(col, row)) {
                    // Get the position of this tile
                    let tilePos = new Vec2_1.default(col * tileSize.x + tileSize.x / 2, row * tileSize.y + tileSize.y / 2);
                    // Create a collider for this tile
                    let collider = new AABB_1.default(tilePos, tileSize.scaled(1 / 4));
                    let hit = collider.intersectSegment(start, delta, Vec2_1.default.ZERO);
                    if (hit !== null && start.distanceSqTo(hit.pos) < start.distanceSqTo(target)) {
                        // We hit a wall, we can't see the player
                        return false;
                    }
                }
            }
        }
        return true;
    }
}
exports.default = Level3Scene;
Level3Scene.PAUSE_KEY = "PAUSE";
Level3Scene.PAUSE_PATH = "hw4_assets/sprites/Paused-Screen.png";
Level3Scene.HELP_KEY = "HELP";
Level3Scene.HELP_PATH = "hw4_assets/sprites/Help-Screen.png";
Level3Scene.CONTROLS_KEY = "CONTROLS";
Level3Scene.CONTROLS_PATH = "hw4_assets/sprites/Controls-Screen.png";
Level3Scene.SHOOT_AUDIO_KEY = "PLAYER_SHOOT";
Level3Scene.SHOOT_AUDIO_PATH = "hw4_assets/sounds/laserShoot.wav";
Level3Scene.COMPLETE_KEY = "COMPLETE";
Level3Scene.COMPLETE_PATH = "hw4_assets/sprites/Level-Complete.png";
Level3Scene.HIT_AUDIO_KEY = "PLAYER_HIT";
Level3Scene.HIT_AUDIO_PATH = "hw4_assets/sounds/hit.wav";
Level3Scene.DYING_AUDIO_KEY = "PLAYER_DYING";
Level3Scene.DYING_AUDIO_PATH = "hw4_assets/sounds/dying.wav";
Level3Scene.LEVEL_MUSIC_KEY = "LEVEL_MUSIC";
Level3Scene.LEVEL_MUSIC_PATH = "hw4_assets/music/MainGameMusic.wav";

},{"../../Wolfie2D/DataTypes/Graphs/PositionGraph":14,"../../Wolfie2D/DataTypes/Shapes/AABB":20,"../../Wolfie2D/DataTypes/Vec2":26,"../../Wolfie2D/Events/GameEvent":31,"../../Wolfie2D/Events/GameEventType":32,"../../Wolfie2D/Input/Input":34,"../../Wolfie2D/Nodes/Graphics/GraphicTypes":44,"../../Wolfie2D/Nodes/UIElements/UIElementTypes":60,"../../Wolfie2D/Pathfinding/Navmesh":63,"../../Wolfie2D/Pathfinding/Strategies/DirectStrategy":64,"../../Wolfie2D/Utils/Color":105,"../../Wolfie2D/Utils/MathUtils":108,"../AI/NPC/NPCBehavior/GaurdBehavior":116,"../AI/Player/PlayerAI":120,"../Actors/NPCActor":127,"../Actors/PlayerActor":128,"../Events":129,"../GameSystems/HUD/HealthbarHUD":131,"../GameSystems/ItemSystem/Items/Healthpack":134,"../GameSystems/ItemSystem/Items/LaserGun":135,"../GameSystems/Searching/HW4Reducers":138,"../Pathfinding/AstarStrategy":141,"./FinalProjectScene":142,"./GameOver":143,"./HW4Scene":144,"./LastScene":145,"./Level1Scene":146,"./Level2Scene":147,"./Level4Scene":149,"./Level5Scene":150,"./MainMenu":151}],149:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Level4SceneLayers = void 0;
const PositionGraph_1 = __importDefault(require("../../Wolfie2D/DataTypes/Graphs/PositionGraph"));
const AABB_1 = __importDefault(require("../../Wolfie2D/DataTypes/Shapes/AABB"));
const Vec2_1 = __importDefault(require("../../Wolfie2D/DataTypes/Vec2"));
const GameEvent_1 = __importDefault(require("../../Wolfie2D/Events/GameEvent"));
const Input_1 = __importDefault(require("../../Wolfie2D/Input/Input"));
const GraphicTypes_1 = require("../../Wolfie2D/Nodes/Graphics/GraphicTypes");
const UIElementTypes_1 = require("../../Wolfie2D/Nodes/UIElements/UIElementTypes");
const Navmesh_1 = __importDefault(require("../../Wolfie2D/Pathfinding/Navmesh"));
const DirectStrategy_1 = __importDefault(require("../../Wolfie2D/Pathfinding/Strategies/DirectStrategy"));
const Color_1 = __importDefault(require("../../Wolfie2D/Utils/Color"));
const MathUtils_1 = __importDefault(require("../../Wolfie2D/Utils/MathUtils"));
const NPCActor_1 = __importDefault(require("../Actors/NPCActor"));
const PlayerActor_1 = __importDefault(require("../Actors/PlayerActor"));
const GaurdBehavior_1 = __importDefault(require("../AI/NPC/NPCBehavior/GaurdBehavior"));
const PlayerAI_1 = __importDefault(require("../AI/Player/PlayerAI"));
const Events_1 = require("../Events");
const HealthbarHUD_1 = __importDefault(require("../GameSystems/HUD/HealthbarHUD"));
const Healthpack_1 = __importDefault(require("../GameSystems/ItemSystem/Items/Healthpack"));
const LaserGun_1 = __importDefault(require("../GameSystems/ItemSystem/Items/LaserGun"));
const HW4Reducers_1 = require("../GameSystems/Searching/HW4Reducers");
const AstarStrategy_1 = __importDefault(require("../Pathfinding/AstarStrategy"));
const GameOver_1 = __importDefault(require("./GameOver"));
// import HW4Scene from "./HW4Scene";
// import MainMenu from "./MainMenu";
// import LevelSelectionScene from "./LevelSelectionScene";
// import { GameEventType } from "../../Wolfie2D/Events/GameEventType";
// import testHW4Scene from "./FinalProjectScene";
const FinalProjectScene_1 = __importDefault(require("./FinalProjectScene"));
// import testMainScene from "./testmain";
const HW4Scene_1 = __importDefault(require("./HW4Scene"));
const MainMenu_1 = __importDefault(require("./MainMenu"));
const LastScene_1 = __importDefault(require("./LastScene"));
const Level1Scene_1 = __importDefault(require("./Level1Scene"));
const Level2Scene_1 = __importDefault(require("./Level2Scene"));
const Level3Scene_1 = __importDefault(require("./Level3Scene"));
const Level5Scene_1 = __importDefault(require("./Level5Scene"));
const GameEventType_1 = require("../../Wolfie2D/Events/GameEventType");
const BattlerGroups = {
    RED: 1,
    BLUE: 2
};
exports.Level4SceneLayers = {
    PRIMARY: "PRIMARY",
    BACKGROUND: "BACKGROUND",
    UI: "UI",
    PAUSE: "PAUSE",
    CONTROLS: "CONTROLS",
    HELP: "HELP",
    COMPLETE: "COMPLETE"
};
class Level4Scene extends HW4Scene_1.default {
    constructor(viewport, sceneManager, renderingManager, options) {
        super(viewport, sceneManager, renderingManager, options);
        this.battlers = new Array();
        this.healthbars = new Map();
        this.player = new Array();
        this.enemies = new Array();
        this.laserguns = new Array();
        this.healthpacks = new Array();
        this.shootAudioKey = Level4Scene.SHOOT_AUDIO_KEY;
        this.hitAudioKey = Level4Scene.HIT_AUDIO_KEY;
        this.dyingAudioKey = Level4Scene.DYING_AUDIO_KEY;
        this.levelMusicKey = Level4Scene.LEVEL_MUSIC_KEY;
    }
    /**
     * @see Scene.update()
     */
    loadScene() {
        // Load the player and enemy spritesheets
        this.load.spritesheet("player1", "hw4_assets/spritesheets/Warball_001_Lukas.json");
        // Load in the enemy sprites
        this.load.spritesheet("BlueEnemy", "hw4_assets/spritesheets/Ball_Bat.json");
        this.load.spritesheet("RedEnemy", "hw4_assets/spritesheets/Ball_Bat.json");
        this.load.spritesheet("BlueHealer", "hw4_assets/spritesheets/Psyfly.json");
        this.load.spritesheet("RedHealer", "hw4_assets/spritesheets/Ball_Bat.json");
        // Load the tilemap
        this.load.tilemap("level", "hw4_assets/tilemaps/Level4Tilemap.json");
        // Load the enemy locations
        // this.load.object("red", "hw4_assets/data/enemies/lvl2.json");
        this.load.object("blue", "hw4_assets/data/enemies/lvl4.json");
        // Load the healthpack and lasergun loactions
        this.load.object("healthpacks", "hw4_assets/data/items/healthpacks.json");
        this.load.object("laserguns", "hw4_assets/data/items/laserguns.json");
        // Load the healthpack, inventory slot, and laser gun sprites
        this.load.image("healthpack", "hw4_assets/sprites/healthpack.png");
        this.load.image("inventorySlot", "hw4_assets/sprites/inventory.png");
        this.load.image("laserGun", "hw4_assets/sprites/laserGun.png");
        this.load.image(Level4Scene.PAUSE_KEY, Level4Scene.PAUSE_PATH);
        this.load.image(Level4Scene.HELP_KEY, Level4Scene.HELP_PATH);
        this.load.image(Level4Scene.CONTROLS_KEY, Level4Scene.CONTROLS_PATH);
        this.load.image(Level4Scene.COMPLETE_KEY, Level4Scene.COMPLETE_PATH);
        this.load.audio(this.shootAudioKey, Level4Scene.SHOOT_AUDIO_PATH);
        this.load.audio(this.hitAudioKey, Level4Scene.HIT_AUDIO_PATH);
        this.load.audio(this.dyingAudioKey, Level4Scene.DYING_AUDIO_PATH);
        this.load.audio(this.levelMusicKey, Level4Scene.LEVEL_MUSIC_PATH);
    }
    startScene() {
        // super.startScene();
        // 
        const center = this.viewport.getCenter();
        // this.addLayer(MainSceneLayers.UI, );
        // this.addLayer(MainSceneLayers.PAUSE, 5);
        // let v = this.getLayer("UI");
        // Add in the tilemap
        let tilemapLayers = this.add.tilemap("level");
        // Get the wall layer
        this.walls = tilemapLayers[1].getItems()[0];
        // Set the viewport bounds to the tilemap
        let tilemapSize = this.walls.size;
        this.viewport.setBounds(0, 0, tilemapSize.x, tilemapSize.y);
        // 
        this.initLayers();
        // Create the player
        this.initializePlayer();
        this.initializeItems();
        this.initializeNavmesh();
        // Create the NPCS
        this.initializeNPCs();
        // Subscribe to relevant events
        this.receiver.subscribe("healthpack");
        this.receiver.subscribe("enemyDied");
        this.receiver.subscribe(Events_1.ItemEvent.ITEM_REQUEST);
        // Add a UI for health
        this.addUILayer("health");
        // Pause Button (Not needed just press escape)
        // let pause = this.add.uiElement(UIElementType.BUTTON, MainSceneLayers.UI, {position: new Vec2(center.x + 600, center.y - 400), text: "Pause"});
        // pause.size.set(100, 50);
        // pause.borderWidth = 2;
        // pause.borderColor = Color.TRANSPARENT;
        // pause.backgroundColor = Color.TRANSPARENT;
        // pause.onClickEventId = "pause";
        // this.pauseMenu = pause;
        // TODO Make text move with button
        // let pauseBar = new PauseHUD(this, pause, center);
        // this.pause = pauseBar;
        let pauseLayer = this.getLayer("PAUSE");
        this.pauseImage = this.add.sprite(Level4Scene.PAUSE_KEY, pauseLayer.getName());
        this.pauseImage.position.copy(this.viewport.getCenter());
        // this.pauseImage.alpha = 0.7;
        const unpause = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level4SceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y - 210), text: "" });
        unpause.size.set(400, 100);
        unpause.borderWidth = 2;
        unpause.borderColor = Color_1.default.TRANSPARENT;
        unpause.backgroundColor = Color_1.default.TRANSPARENT;
        unpause.onClickEventId = "unpause";
        const mainMenu = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level4SceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y + 223), text: "" });
        mainMenu.size.set(400, 100);
        mainMenu.borderWidth = 2;
        mainMenu.borderColor = Color_1.default.TRANSPARENT;
        mainMenu.backgroundColor = Color_1.default.TRANSPARENT;
        mainMenu.onClickEventId = "mainmenu";
        const controlsButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level4SceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y - 65), text: "" });
        controlsButton.size.set(400, 100);
        controlsButton.borderWidth = 2;
        controlsButton.borderColor = Color_1.default.TRANSPARENT;
        controlsButton.backgroundColor = Color_1.default.TRANSPARENT;
        controlsButton.onClickEventId = "controls";
        const helpButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level4SceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y + 80), text: "" });
        helpButton.size.set(400, 100);
        helpButton.borderWidth = 2;
        helpButton.borderColor = Color_1.default.TRANSPARENT;
        helpButton.backgroundColor = Color_1.default.TRANSPARENT;
        helpButton.onClickEventId = "help";
        pauseLayer.setPaused(true);
        pauseLayer.setHidden(true);
        let controlsLayer = this.getLayer("CONTROLS");
        this.controlsImage = this.add.sprite(Level4Scene.CONTROLS_KEY, controlsLayer.getName());
        this.controlsImage.position.copy(this.viewport.getCenter());
        // this.controlsImage.alpha = 0.5;
        const controlsBackButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level4SceneLayers.CONTROLS, { position: new Vec2_1.default(center.x - 595, center.y + 415), text: "" });
        controlsBackButton.size.set(200, 50);
        controlsBackButton.borderWidth = 2;
        controlsBackButton.borderColor = Color_1.default.TRANSPARENT;
        controlsBackButton.backgroundColor = Color_1.default.TRANSPARENT;
        controlsBackButton.onClickEventId = "backcontrols";
        controlsLayer.setPaused(true);
        controlsLayer.setHidden(true);
        // 
        let helpLayer = this.getLayer("HELP");
        this.helpImage = this.add.sprite(Level4Scene.HELP_KEY, helpLayer.getName());
        this.helpImage.position.copy(this.viewport.getCenter());
        // this.helpImage.alpha = 0.5;
        const helpBackButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level4SceneLayers.HELP, { position: new Vec2_1.default(center.x - 595, center.y + 415), text: "" });
        helpBackButton.size.set(200, 50);
        helpBackButton.borderWidth = 2;
        helpBackButton.borderColor = Color_1.default.TRANSPARENT;
        helpBackButton.backgroundColor = Color_1.default.TRANSPARENT;
        helpBackButton.onClickEventId = "helpcontrols";
        helpLayer.setPaused(true);
        helpLayer.setHidden(true);
        let completeLayer = this.getLayer("COMPLETE");
        this.completeImage = this.add.sprite(FinalProjectScene_1.default.COMPLETE_KEY, completeLayer.getName());
        this.completeImage.position.copy(this.viewport.getCenter());
        const completeButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level4SceneLayers.COMPLETE, { position: new Vec2_1.default(center.x, center.y + 475), text: "" });
        completeButton.size.set(1320, 2000);
        completeButton.borderWidth = 2;
        completeButton.borderColor = Color_1.default.WHITE;
        completeButton.backgroundColor = Color_1.default.TRANSPARENT;
        completeButton.onClickEventId = "nextlvl";
        completeLayer.setPaused(true);
        completeLayer.setHidden(true);
        // this.pauseMenu = unpause;
        // let val = this.layers;
        // console.log(val);
        this.viewport.setZoomLevel(3);
        this.receiver.subscribe(Events_1.PlayerEvent.PLAYER_KILLED);
        this.receiver.subscribe(Events_1.BattlerEvent.BATTLER_KILLED);
        this.receiver.subscribe(Events_1.BattlerEvent.BATTLER_RESPAWN);
        this.receiver.subscribe("pause");
        this.receiver.subscribe("unpause");
        this.receiver.subscribe("mainmenu");
        this.receiver.subscribe("controls");
        this.receiver.subscribe("help");
        this.receiver.subscribe("backcontrols");
        this.receiver.subscribe("helpcontrols");
        this.receiver.subscribe("nextlvl");
        this.emitter.fireEvent(GameEventType_1.GameEventType.PLAY_SOUND, { key: this.levelMusicKey, loop: true, holdReference: true });
        // this.emitter.fireEvent(GameEventType.PLAY_SOUND, {key: this.getShootAudioKey(), loop: false, holdReference: false});
    }
    /**
     * @see Scene.updateScene
     */
    updateScene(deltaT) {
        while (this.receiver.hasNextEvent()) {
            this.handleEvent(this.receiver.getNextEvent());
        }
        // this.inventoryHud.update(deltaT);
        this.healthbars.forEach(healthbar => healthbar.update(deltaT));
        // this.pause.setCenter(this.viewport.getCenter());
        // this.pauseMenu.update(deltaT);
        // this.pause.update(deltaT);
        if (Input_1.default.isKeyJustPressed("escape")) {
            console.log("Escape pressed");
            let v = new GameEvent_1.default("pause", null);
            this.handleEvent(v);
        }
        if (this.boss.health <= 0) {
            this.viewport.setZoomLevel(1);
            this.unpauseCompleteLayer();
            this.player[0].freeze(); // Freezes player
            this.player[0].disablePhysics();
            this.player[0].aiActive = false;
            for (let i = 0; i < this.enemies.length; i++) { // Freezes enemies 
                if (this.enemies[i].battlerActive == true) {
                    this.enemies[i].freeze();
                    this.enemies[i].disablePhysics();
                    this.enemies[i].aiActive = false;
                }
            }
        }
        let pauseLayer = this.getLayer("PAUSE");
        if (!pauseLayer.isHidden()) {
            this.pauseImage.position.copy(this.viewport.getCenter()); // Works but when moving the screen gets moved upwards.
        }
        if (Input_1.default.isKeyPressed("z")) {
            this.viewport.setZoomLevel(1);
        }
        if (Input_1.default.isKeyPressed("x")) {
            this.viewport.setZoomLevel(3);
        }
        if (Input_1.default.isKeyJustPressed("1")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level1Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("2")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level2Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("3")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level3Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("4")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level4Scene);
        }
        if (Input_1.default.isKeyJustPressed("5")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level5Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("6")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(LastScene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("t")) {
            this.player[0].position = this.bossLocation;
        }
        // Another way to play shoot audio is when player pressed space
        //  if(Input.isKeyJustPressed("space")){
        //     console.log("Shoot Audio Played");
        //     this.emitter.fireEvent(GameEventType.PLAY_SOUND, {key: this.getShootAudioKey(), loop: false, holdReference: false});
        //  }
        // TODO If input is 2, 3, 4, 5, 6 go to those levels by chaning the scene
    }
    /**
     * Handle events from the rest of the game
     * @param event a game event
     */
    handleEvent(event) {
        switch (event.type) {
            case Events_1.BattlerEvent.BATTLER_KILLED: {
                this.handleBattlerKilled(event);
                break;
            }
            case Events_1.BattlerEvent.BATTLER_RESPAWN: {
                break;
            }
            case Events_1.ItemEvent.ITEM_REQUEST: {
                this.handleItemRequest(event.data.get("node"), event.data.get("inventory"));
                break;
            }
            case Events_1.PlayerEvent.PLAYER_KILLED: {
                this.viewport.follow(undefined);
                this.sceneManager.changeToScene(GameOver_1.default);
            }
            case "pause": {
                console.log("Pause");
                // this.pauseImage.scale = this.pauseImage.sizeWithZoom;
                this.viewport.setZoomLevel(1);
                this.pauseImage.position.copy(this.viewport.getCenter()); // Works but when moving the screen gets moved upwards.
                // this.viewport.follow(undefined);
                this.player[0].freeze(); // Freezes player
                this.player[0].disablePhysics();
                for (let i = 0; i < this.enemies.length; i++) { // Freezes enemies 
                    if (this.enemies[i].battlerActive == true) {
                        this.enemies[i].freeze();
                        this.enemies[i].disablePhysics();
                        this.enemies[i].aiActive = false;
                    }
                }
                this.unpausePauseLayer();
                this.pausePrimaryLayer();
                this.pauseUILayer();
                break;
            }
            case "unpause": {
                console.log("unpause");
                this.viewport.setZoomLevel(3);
                let center = this.viewport.getCenter();
                // this.pauseMenu.position.set(center.x, center.y);
                this.player[0].unfreeze();
                this.player[0].enablePhysics();
                // Input.enableInput();
                for (let i = 0; i < this.enemies.length; i++) {
                    if (this.enemies[i].battlerActive == true) {
                        this.enemies[i].unfreeze();
                        this.enemies[i].enablePhysics();
                        this.enemies[i].aiActive = true;
                    }
                    // this.enemies[i].setTarget(this.battlers[0]);
                }
                this.pausePauseLayer();
                this.unpausePrimaryLayer();
                this.unpauseUILayer();
                break;
            }
            case "mainmenu": {
                this.viewport.follow(undefined);
                this.viewport.setZoomLevel(1);
                this.sceneManager.changeToScene(MainMenu_1.default);
                break;
            }
            case "controls": {
                this.controlsImage.position.copy(this.viewport.getCenter());
                this.pausePauseLayer();
                this.unpauseControlsLayer();
                break;
            }
            case "backcontrols": {
                this.unpausePauseLayer();
                this.pauseControlsLayer();
                break;
            }
            case "help": {
                this.helpImage.position.copy(this.viewport.getCenter());
                this.pausePauseLayer();
                this.unpauseHelpLayer();
                break;
            }
            case "helpcontrols": {
                this.unpausePauseLayer();
                this.pauseHelpLayer();
                break;
            }
            case "nextlvl": {
                this.viewport.follow(undefined);
                this.viewport.setZoomLevel(1);
                this.sceneManager.changeToScene(Level5Scene_1.default);
                break;
            }
            default: {
                throw new Error(`Unhandled event type "${event.type}" caught in HW3Scene event handler`);
            }
        }
    }
    pausePauseLayer() {
        let pauseLayer = this.getLayer("PAUSE");
        pauseLayer.setPaused(true);
        pauseLayer.setHidden(true);
    }
    unpausePauseLayer() {
        let pauseLayer = this.getLayer("PAUSE");
        pauseLayer.setPaused(false);
        pauseLayer.setHidden(false);
    }
    pauseControlsLayer() {
        let controlsLayer = this.getLayer("CONTROLS");
        controlsLayer.setPaused(true);
        controlsLayer.setHidden(true);
    }
    unpauseControlsLayer() {
        let controlsLayer = this.getLayer("CONTROLS");
        controlsLayer.setPaused(false);
        controlsLayer.setHidden(false);
    }
    pausePrimaryLayer() {
        let primaryLayer = this.getLayer("primary");
        primaryLayer.setPaused(true);
        primaryLayer.setHidden(true);
    }
    unpausePrimaryLayer() {
        let primaryLayer = this.getLayer("primary");
        primaryLayer.setPaused(false);
        primaryLayer.setHidden(false);
    }
    pauseUILayer() {
        let uiLayer = this.getLayer("UI");
        uiLayer.setPaused(true);
        uiLayer.setHidden(true);
    }
    unpauseUILayer() {
        let uiLayer = this.getLayer("UI");
        uiLayer.setPaused(false);
        uiLayer.setHidden(false);
    }
    pauseHelpLayer() {
        let helpLayer = this.getLayer("HELP");
        helpLayer.setPaused(true);
        helpLayer.setHidden(true);
    }
    unpauseHelpLayer() {
        let helpLayer = this.getLayer("HELP");
        helpLayer.setPaused(false);
        helpLayer.setHidden(false);
    }
    pauseCompleteLayer() {
        let completeLayer = this.getLayer("COMPLETE");
        completeLayer.setPaused(true);
        completeLayer.setHidden(true);
    }
    unpauseCompleteLayer() {
        let completeLayer = this.getLayer("COMPLETE");
        completeLayer.setPaused(false);
        completeLayer.setHidden(false);
    }
    handleItemRequest(node, inventory) {
        let items = new Array(...this.healthpacks, ...this.laserguns).filter((item) => {
            return item.inventory === null && item.position.distanceTo(node.position) <= 100;
        });
        if (items.length > 0) {
            inventory.add(items.reduce((0, HW4Reducers_1.ClosestPositioned)(node)));
        }
    }
    /**
     * Handles an NPC being killed by unregistering the NPC from the scenes subsystems
     * @param event an NPC-killed event
     */
    handleBattlerKilled(event) {
        let id = event.data.get("id");
        let battler = this.battlers.find(b => b.id === id);
        if (battler) {
            battler.battlerActive = false;
            this.healthbars.get(id).visible = false;
        }
    }
    /** Initializes the layers in the scene */
    initLayers() {
        this.addLayer(exports.Level4SceneLayers.UI);
        this.addLayer(exports.Level4SceneLayers.PAUSE, 10);
        this.addLayer(exports.Level4SceneLayers.HELP, 11);
        this.addLayer(exports.Level4SceneLayers.CONTROLS, 11);
        this.addLayer(exports.Level4SceneLayers.COMPLETE, 12);
        this.addLayer("primary", 5);
    }
    /**
     * Initializes the player in the scene
     */
    initializePlayer() {
        const center = this.viewport.getCenter();
        let player = this.add.animatedSprite(PlayerActor_1.default, "player1", "primary");
        player.position.set(center.x + 600, center.y - 300);
        player.battleGroup = 2;
        player.health = 10;
        player.maxHealth = 10;
        player.scale = new Vec2_1.default(0.4, 0.4); // Scales player 
        player.inventory.onChange = Events_1.ItemEvent.INVENTORY_CHANGED;
        // this.inventoryHud = new InventoryHUD(this, player.inventory, "inventorySlot", {
        //     start: new Vec2(232, 24),
        //     slotLayer: "slots",
        //     padding: 8,
        //     itemLayer: "items"
        // });
        // Give the player physics
        player.addPhysics(new AABB_1.default(Vec2_1.default.ZERO, new Vec2_1.default(16, 16)));
        // Give the player a healthbar
        let healthbar = new HealthbarHUD_1.default(this, player, "primary", { size: player.size.clone().scaled(1, 1 / 4), offset: player.size.clone().scaled(0, -1 / 3) });
        this.healthbars.set(player.id, healthbar);
        // Give the player PlayerAI
        player.addAI(PlayerAI_1.default);
        // Start the player in the "IDLE" animation
        player.animation.play("IDLE");
        this.battlers.push(player);
        this.player.push(player);
        this.viewport.follow(player);
        this.viewport.setZoomLevel(3);
    }
    /**
     * Initialize the NPCs
     */
    initializeNPCs() {
        // Get the object data for the blue enemies
        let blue = this.load.getObject("blue");
        // Initialize the blue enemies
        for (let i = 0; i < blue.enemies.length; i++) {
            let npc = this.add.animatedSprite(NPCActor_1.default, "BlueEnemy", "primary");
            npc.position.set(blue.enemies[i][0], blue.enemies[i][1]);
            npc.addPhysics(new AABB_1.default(Vec2_1.default.ZERO, new Vec2_1.default(8, 8)), null, false);
            // Give the NPCS their healthbars
            let healthbar = new HealthbarHUD_1.default(this, npc, "primary", { size: npc.size.clone().scaled(1 / 2, 1 / 4), offset: npc.size.clone().scaled(0, -1 / 3) });
            this.healthbars.set(npc.id, healthbar);
            npc.battleGroup = 1;
            npc.speed = 10;
            npc.health = 4;
            npc.maxHealth = 4;
            npc.navkey = "navmesh";
            npc.scale = new Vec2_1.default(0.4, 0.4);
            // Give the NPCs their AI
            npc.addAI(GaurdBehavior_1.default, { target: this.battlers[0], range: 0 });
            // Play the NPCs "IDLE" animation 
            npc.animation.play("IDLE");
            this.battlers.push(npc);
            this.enemies.push(npc);
        }
        let npc = this.add.animatedSprite(NPCActor_1.default, "BlueEnemy", "primary");
        this.boss = npc;
        npc.position.set(100, 800);
        this.bossLocation = new Vec2_1.default(100, 800);
        npc.addPhysics(new AABB_1.default(Vec2_1.default.ZERO, new Vec2_1.default(32, 32)), null, false);
        // Give the NPCS their healthbars
        let healthbar = new HealthbarHUD_1.default(this, npc, "primary", { size: npc.size.clone().scaled(2, 1 / 4), offset: npc.size.clone().scaled(0, -1 / 3) });
        this.healthbars.set(npc.id, healthbar);
        npc.battleGroup = 1;
        npc.speed = 10;
        npc.health = 25;
        npc.maxHealth = 25;
        npc.navkey = "navmesh";
        npc.scale = new Vec2_1.default(1, 1);
        // Give the NPCs their AI
        npc.addAI(GaurdBehavior_1.default, { target: this.battlers[0], range: 0 });
        // Play the NPCs "IDLE" animation 
        npc.animation.play("IDLE");
        this.battlers.push(npc);
        this.enemies.push(npc);
        // Initialize the blue healers
    }
    /**
     * Initialize the items in the scene (healthpacks and laser guns)
     */
    initializeItems() {
        let laserguns = this.load.getObject("laserguns");
        this.laserguns = new Array(laserguns.items.length);
        for (let i = 0; i < laserguns.items.length; i++) {
            let sprite = this.add.sprite("laserGun", "primary");
            let line = this.add.graphic(GraphicTypes_1.GraphicType.LINE, "primary", { start: Vec2_1.default.ZERO, end: Vec2_1.default.ZERO });
            this.laserguns[i] = LaserGun_1.default.create(sprite, line);
            this.laserguns[i].position.set(laserguns.items[i][0], laserguns.items[i][1]);
        }
        let healthpacks = this.load.getObject("healthpacks");
        this.healthpacks = new Array(healthpacks.items.length);
        for (let i = 0; i < healthpacks.items.length; i++) {
            let sprite = this.add.sprite("healthpack", "primary");
            this.healthpacks[i] = new Healthpack_1.default(sprite);
            this.healthpacks[i].position.set(healthpacks.items[i][0], healthpacks.items[i][1]);
        }
    }
    /**
     * Initializes the navmesh graph used by the NPCs in the HW3Scene. This method is a little buggy, and
     * and it skips over some of the positions on the tilemap. If you can fix my navmesh generation algorithm,
     * go for it.
     *
     * - Peter
     */
    initializeNavmesh() {
        // Create the graph
        this.graph = new PositionGraph_1.default();
        let dim = this.walls.getDimensions();
        for (let i = 0; i < dim.y; i++) {
            for (let j = 0; j < dim.x; j++) {
                let tile = this.walls.getTileCollider(j, i);
                this.graph.addPositionedNode(tile.center);
            }
        }
        let rc;
        for (let i = 0; i < this.graph.numVertices; i++) {
            rc = this.walls.getTileColRow(i);
            if (!this.walls.isTileCollidable(rc.x, rc.y) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x - 1, 0, dim.x - 1), rc.y) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x + 1, 0, dim.x - 1), rc.y) &&
                !this.walls.isTileCollidable(rc.x, MathUtils_1.default.clamp(rc.y - 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(rc.x, MathUtils_1.default.clamp(rc.y + 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x + 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y + 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x - 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y + 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x + 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y - 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x - 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y - 1, 0, dim.y - 1))) {
                // Create edge to the left
                rc = this.walls.getTileColRow(i + 1);
                if ((i + 1) % dim.x !== 0 && !this.walls.isTileCollidable(rc.x, rc.y)) {
                    this.graph.addEdge(i, i + 1);
                    // this.add.graphic(GraphicType.LINE, "graph", {start: this.graph.getNodePosition(i), end: this.graph.getNodePosition(i + 1)})
                }
                // Create edge below
                rc = this.walls.getTileColRow(i + dim.x);
                if (i + dim.x < this.graph.numVertices && !this.walls.isTileCollidable(rc.x, rc.y)) {
                    this.graph.addEdge(i, i + dim.x);
                    // this.add.graphic(GraphicType.LINE, "graph", {start: this.graph.getNodePosition(i), end: this.graph.getNodePosition(i + dim.x)})
                }
            }
        }
        // Set this graph as a navigable entity
        let navmesh = new Navmesh_1.default(this.graph);
        // Add different strategies to use for this navmesh
        navmesh.registerStrategy("direct", new DirectStrategy_1.default(navmesh));
        navmesh.registerStrategy("astar", new AstarStrategy_1.default(navmesh));
        // Select A* as our navigation strategy
        navmesh.setStrategy("astar");
        // Add this navmesh to the navigation manager
        this.navManager.addNavigableEntity("navmesh", navmesh);
    }
    unloadScene() {
        // The scene is being destroyed, so we can stop playing the song
        this.emitter.fireEvent(GameEventType_1.GameEventType.STOP_SOUND, { key: this.levelMusicKey });
    }
    getBattlers() { return this.battlers; }
    getWalls() { return this.walls; }
    getHealthpacks() { return this.healthpacks; }
    getLaserGuns() { return this.laserguns; }
    /**
     * Checks if the given target position is visible from the given position.
     * @param position
     * @param target
     * @returns
     */
    isTargetVisible(position, target) {
        // Get the new player location
        let start = position.clone();
        let delta = target.clone().sub(start);
        // Iterate through the tilemap region until we find a collision
        let minX = Math.min(start.x, target.x);
        let maxX = Math.max(start.x, target.x);
        let minY = Math.min(start.y, target.y);
        let maxY = Math.max(start.y, target.y);
        // Get the wall tilemap
        let walls = this.getWalls();
        let minIndex = walls.getTilemapPosition(minX, minY);
        let maxIndex = walls.getTilemapPosition(maxX, maxY);
        let tileSize = walls.getScaledTileSize();
        for (let col = minIndex.x; col <= maxIndex.x; col++) {
            for (let row = minIndex.y; row <= maxIndex.y; row++) {
                if (walls.isTileCollidable(col, row)) {
                    // Get the position of this tile
                    let tilePos = new Vec2_1.default(col * tileSize.x + tileSize.x / 2, row * tileSize.y + tileSize.y / 2);
                    // Create a collider for this tile
                    let collider = new AABB_1.default(tilePos, tileSize.scaled(1 / 4));
                    let hit = collider.intersectSegment(start, delta, Vec2_1.default.ZERO);
                    if (hit !== null && start.distanceSqTo(hit.pos) < start.distanceSqTo(target)) {
                        // We hit a wall, we can't see the player
                        return false;
                    }
                }
            }
        }
        return true;
    }
}
exports.default = Level4Scene;
Level4Scene.PAUSE_KEY = "PAUSE";
Level4Scene.PAUSE_PATH = "hw4_assets/sprites/Paused-Screen.png";
Level4Scene.HELP_KEY = "HELP";
Level4Scene.HELP_PATH = "hw4_assets/sprites/Help-Screen.png";
Level4Scene.CONTROLS_KEY = "CONTROLS";
Level4Scene.CONTROLS_PATH = "hw4_assets/sprites/Controls-Screen.png";
Level4Scene.COMPLETE_KEY = "COMPLETE";
Level4Scene.COMPLETE_PATH = "hw4_assets/sprites/Level-Complete.png";
Level4Scene.SHOOT_AUDIO_KEY = "PLAYER_SHOOT";
Level4Scene.SHOOT_AUDIO_PATH = "hw4_assets/sounds/laserShoot.wav";
Level4Scene.HIT_AUDIO_KEY = "PLAYER_HIT";
Level4Scene.HIT_AUDIO_PATH = "hw4_assets/sounds/hit.wav";
Level4Scene.DYING_AUDIO_KEY = "PLAYER_DYING";
Level4Scene.DYING_AUDIO_PATH = "hw4_assets/sounds/dying.wav";
Level4Scene.LEVEL_MUSIC_KEY = "LEVEL_MUSIC";
Level4Scene.LEVEL_MUSIC_PATH = "hw4_assets/music/MainGameMusic.wav";

},{"../../Wolfie2D/DataTypes/Graphs/PositionGraph":14,"../../Wolfie2D/DataTypes/Shapes/AABB":20,"../../Wolfie2D/DataTypes/Vec2":26,"../../Wolfie2D/Events/GameEvent":31,"../../Wolfie2D/Events/GameEventType":32,"../../Wolfie2D/Input/Input":34,"../../Wolfie2D/Nodes/Graphics/GraphicTypes":44,"../../Wolfie2D/Nodes/UIElements/UIElementTypes":60,"../../Wolfie2D/Pathfinding/Navmesh":63,"../../Wolfie2D/Pathfinding/Strategies/DirectStrategy":64,"../../Wolfie2D/Utils/Color":105,"../../Wolfie2D/Utils/MathUtils":108,"../AI/NPC/NPCBehavior/GaurdBehavior":116,"../AI/Player/PlayerAI":120,"../Actors/NPCActor":127,"../Actors/PlayerActor":128,"../Events":129,"../GameSystems/HUD/HealthbarHUD":131,"../GameSystems/ItemSystem/Items/Healthpack":134,"../GameSystems/ItemSystem/Items/LaserGun":135,"../GameSystems/Searching/HW4Reducers":138,"../Pathfinding/AstarStrategy":141,"./FinalProjectScene":142,"./GameOver":143,"./HW4Scene":144,"./LastScene":145,"./Level1Scene":146,"./Level2Scene":147,"./Level3Scene":148,"./Level5Scene":150,"./MainMenu":151}],150:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Level5SceneLayers = void 0;
const PositionGraph_1 = __importDefault(require("../../Wolfie2D/DataTypes/Graphs/PositionGraph"));
const AABB_1 = __importDefault(require("../../Wolfie2D/DataTypes/Shapes/AABB"));
const Vec2_1 = __importDefault(require("../../Wolfie2D/DataTypes/Vec2"));
const GameEvent_1 = __importDefault(require("../../Wolfie2D/Events/GameEvent"));
const Input_1 = __importDefault(require("../../Wolfie2D/Input/Input"));
const GraphicTypes_1 = require("../../Wolfie2D/Nodes/Graphics/GraphicTypes");
const UIElementTypes_1 = require("../../Wolfie2D/Nodes/UIElements/UIElementTypes");
const Navmesh_1 = __importDefault(require("../../Wolfie2D/Pathfinding/Navmesh"));
const DirectStrategy_1 = __importDefault(require("../../Wolfie2D/Pathfinding/Strategies/DirectStrategy"));
const Color_1 = __importDefault(require("../../Wolfie2D/Utils/Color"));
const MathUtils_1 = __importDefault(require("../../Wolfie2D/Utils/MathUtils"));
const NPCActor_1 = __importDefault(require("../Actors/NPCActor"));
const PlayerActor_1 = __importDefault(require("../Actors/PlayerActor"));
const GaurdBehavior_1 = __importDefault(require("../AI/NPC/NPCBehavior/GaurdBehavior"));
const PlayerAI_1 = __importDefault(require("../AI/Player/PlayerAI"));
const Events_1 = require("../Events");
const HealthbarHUD_1 = __importDefault(require("../GameSystems/HUD/HealthbarHUD"));
const Healthpack_1 = __importDefault(require("../GameSystems/ItemSystem/Items/Healthpack"));
const LaserGun_1 = __importDefault(require("../GameSystems/ItemSystem/Items/LaserGun"));
const HW4Reducers_1 = require("../GameSystems/Searching/HW4Reducers");
const AstarStrategy_1 = __importDefault(require("../Pathfinding/AstarStrategy"));
const GameOver_1 = __importDefault(require("./GameOver"));
// import HW4Scene from "./HW4Scene";
// import MainMenu from "./MainMenu";
// import LevelSelectionScene from "./LevelSelectionScene";
// import { GameEventType } from "../../Wolfie2D/Events/GameEventType";
// import testHW4Scene from "./FinalProjectScene";
const FinalProjectScene_1 = __importDefault(require("./FinalProjectScene"));
// import testMainScene from "./testmain";
const HW4Scene_1 = __importDefault(require("./HW4Scene"));
const MainMenu_1 = __importDefault(require("./MainMenu"));
const Level1Scene_1 = __importDefault(require("./Level1Scene"));
const LastScene_1 = __importDefault(require("./LastScene"));
const Level2Scene_1 = __importDefault(require("./Level2Scene"));
const Level3Scene_1 = __importDefault(require("./Level3Scene"));
const Level4Scene_1 = __importDefault(require("./Level4Scene"));
const GameEventType_1 = require("../../Wolfie2D/Events/GameEventType");
const BattlerGroups = {
    RED: 1,
    BLUE: 2
};
exports.Level5SceneLayers = {
    PRIMARY: "PRIMARY",
    BACKGROUND: "BACKGROUND",
    UI: "UI",
    PAUSE: "PAUSE",
    CONTROLS: "CONTROLS",
    HELP: "HELP",
    COMPLETE: "COMPLETE"
};
class Level5Scene extends HW4Scene_1.default {
    constructor(viewport, sceneManager, renderingManager, options) {
        super(viewport, sceneManager, renderingManager, options);
        this.battlers = new Array();
        this.healthbars = new Map();
        this.player = new Array();
        this.enemies = new Array();
        this.laserguns = new Array();
        this.healthpacks = new Array();
        this.shootAudioKey = Level5Scene.SHOOT_AUDIO_KEY;
        this.hitAudioKey = Level5Scene.HIT_AUDIO_KEY;
        this.dyingAudioKey = Level5Scene.DYING_AUDIO_KEY;
        this.levelMusicKey = Level5Scene.LEVEL_MUSIC_KEY;
    }
    /**
     * @see Scene.update()
     */
    loadScene() {
        // Load the player and enemy spritesheets
        this.load.spritesheet("player1", "hw4_assets/spritesheets/Warball_001_Lukas.json");
        // Load in the enemy sprites
        this.load.spritesheet("BlueEnemy", "hw4_assets/spritesheets/Neo.json");
        this.load.spritesheet("RedEnemy", "hw4_assets/spritesheets/Neo.json");
        this.load.spritesheet("BlueHealer", "hw4_assets/spritesheets/Neo.json");
        this.load.spritesheet("RedHealer", "hw4_assets/spritesheets/Neo.json");
        // Load the tilemap
        this.load.tilemap("level", "hw4_assets/tilemaps/Level5Tilemap.json");
        // Load the enemy locations
        // this.load.object("red", "hw4_assets/data/enemies/lvl2.json");
        this.load.object("blue", "hw4_assets/data/enemies/lvl5.json");
        // Load the healthpack and lasergun loactions
        this.load.object("healthpacks", "hw4_assets/data/items/healthpacks.json");
        this.load.object("laserguns", "hw4_assets/data/items/laserguns.json");
        // Load the healthpack, inventory slot, and laser gun sprites
        this.load.image("healthpack", "hw4_assets/sprites/healthpack.png");
        this.load.image("inventorySlot", "hw4_assets/sprites/inventory.png");
        this.load.image("laserGun", "hw4_assets/sprites/laserGun.png");
        this.load.image(Level5Scene.PAUSE_KEY, Level5Scene.PAUSE_PATH);
        this.load.image(Level5Scene.HELP_KEY, Level5Scene.HELP_PATH);
        this.load.image(Level5Scene.CONTROLS_KEY, Level5Scene.CONTROLS_PATH);
        this.load.image(Level5Scene.COMPLETE_KEY, Level5Scene.COMPLETE_PATH);
        this.load.audio(this.shootAudioKey, Level5Scene.SHOOT_AUDIO_PATH);
        this.load.audio(this.hitAudioKey, Level5Scene.HIT_AUDIO_PATH);
        this.load.audio(this.dyingAudioKey, Level5Scene.DYING_AUDIO_PATH);
        this.load.audio(this.levelMusicKey, Level5Scene.LEVEL_MUSIC_PATH);
    }
    startScene() {
        // super.startScene();
        // 
        const center = this.viewport.getCenter();
        // this.addLayer(MainSceneLayers.UI, );
        // this.addLayer(MainSceneLayers.PAUSE, 5);
        // let v = this.getLayer("UI");
        // Add in the tilemap
        let tilemapLayers = this.add.tilemap("level");
        // Get the wall layer
        this.walls = tilemapLayers[1].getItems()[0];
        // Set the viewport bounds to the tilemap
        let tilemapSize = this.walls.size;
        this.viewport.setBounds(0, 0, tilemapSize.x, tilemapSize.y);
        // 
        this.initLayers();
        // Create the player
        this.initializePlayer();
        this.initializeItems();
        this.initializeNavmesh();
        // Create the NPCS
        this.initializeNPCs();
        // Subscribe to relevant events
        this.receiver.subscribe("healthpack");
        this.receiver.subscribe("enemyDied");
        this.receiver.subscribe(Events_1.ItemEvent.ITEM_REQUEST);
        // Add a UI for health
        this.addUILayer("health");
        // Pause Button (Not needed just press escape)
        // let pause = this.add.uiElement(UIElementType.BUTTON, MainSceneLayers.UI, {position: new Vec2(center.x + 600, center.y - 400), text: "Pause"});
        // pause.size.set(100, 50);
        // pause.borderWidth = 2;
        // pause.borderColor = Color.TRANSPARENT;
        // pause.backgroundColor = Color.TRANSPARENT;
        // pause.onClickEventId = "pause";
        // this.pauseMenu = pause;
        // TODO Make text move with button
        // let pauseBar = new PauseHUD(this, pause, center);
        // this.pause = pauseBar;
        let pauseLayer = this.getLayer("PAUSE");
        this.pauseImage = this.add.sprite(Level5Scene.PAUSE_KEY, pauseLayer.getName());
        this.pauseImage.position.copy(this.viewport.getCenter());
        // this.pauseImage.alpha = 0.7;
        const unpause = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level5SceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y - 210), text: "" });
        unpause.size.set(400, 100);
        unpause.borderWidth = 2;
        unpause.borderColor = Color_1.default.TRANSPARENT;
        unpause.backgroundColor = Color_1.default.TRANSPARENT;
        unpause.onClickEventId = "unpause";
        const mainMenu = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level5SceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y + 223), text: "" });
        mainMenu.size.set(400, 100);
        mainMenu.borderWidth = 2;
        mainMenu.borderColor = Color_1.default.TRANSPARENT;
        mainMenu.backgroundColor = Color_1.default.TRANSPARENT;
        mainMenu.onClickEventId = "mainmenu";
        const controlsButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level5SceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y - 65), text: "" });
        controlsButton.size.set(400, 100);
        controlsButton.borderWidth = 2;
        controlsButton.borderColor = Color_1.default.TRANSPARENT;
        controlsButton.backgroundColor = Color_1.default.TRANSPARENT;
        controlsButton.onClickEventId = "controls";
        const helpButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level5SceneLayers.PAUSE, { position: new Vec2_1.default(center.x - 5, center.y + 80), text: "" });
        helpButton.size.set(400, 100);
        helpButton.borderWidth = 2;
        helpButton.borderColor = Color_1.default.TRANSPARENT;
        helpButton.backgroundColor = Color_1.default.TRANSPARENT;
        helpButton.onClickEventId = "help";
        pauseLayer.setPaused(true);
        pauseLayer.setHidden(true);
        let controlsLayer = this.getLayer("CONTROLS");
        this.controlsImage = this.add.sprite(Level5Scene.CONTROLS_KEY, controlsLayer.getName());
        this.controlsImage.position.copy(this.viewport.getCenter());
        // this.controlsImage.alpha = 0.5;
        const controlsBackButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level5SceneLayers.CONTROLS, { position: new Vec2_1.default(center.x - 595, center.y + 415), text: "" });
        controlsBackButton.size.set(200, 50);
        controlsBackButton.borderWidth = 2;
        controlsBackButton.borderColor = Color_1.default.TRANSPARENT;
        controlsBackButton.backgroundColor = Color_1.default.TRANSPARENT;
        controlsBackButton.onClickEventId = "backcontrols";
        controlsLayer.setPaused(true);
        controlsLayer.setHidden(true);
        // 
        let helpLayer = this.getLayer("HELP");
        this.helpImage = this.add.sprite(Level5Scene.HELP_KEY, helpLayer.getName());
        this.helpImage.position.copy(this.viewport.getCenter());
        // this.helpImage.alpha = 0.5;
        const helpBackButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level5SceneLayers.HELP, { position: new Vec2_1.default(center.x - 595, center.y + 415), text: "" });
        helpBackButton.size.set(200, 50);
        helpBackButton.borderWidth = 2;
        helpBackButton.borderColor = Color_1.default.TRANSPARENT;
        helpBackButton.backgroundColor = Color_1.default.TRANSPARENT;
        helpBackButton.onClickEventId = "helpcontrols";
        helpLayer.setPaused(true);
        helpLayer.setHidden(true);
        let completeLayer = this.getLayer("COMPLETE");
        this.completeImage = this.add.sprite(FinalProjectScene_1.default.COMPLETE_KEY, completeLayer.getName());
        this.completeImage.position.copy(this.viewport.getCenter());
        const completeButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.Level5SceneLayers.COMPLETE, { position: new Vec2_1.default(center.x, center.y + 475), text: "" });
        completeButton.size.set(1320, 2000);
        completeButton.borderWidth = 2;
        completeButton.borderColor = Color_1.default.WHITE;
        completeButton.backgroundColor = Color_1.default.TRANSPARENT;
        completeButton.onClickEventId = "nextlvl";
        completeLayer.setPaused(true);
        completeLayer.setHidden(true);
        // this.pauseMenu = unpause;
        // let val = this.layers;
        // console.log(val);
        this.viewport.setZoomLevel(3);
        this.receiver.subscribe(Events_1.PlayerEvent.PLAYER_KILLED);
        this.receiver.subscribe(Events_1.BattlerEvent.BATTLER_KILLED);
        this.receiver.subscribe(Events_1.BattlerEvent.BATTLER_RESPAWN);
        this.receiver.subscribe("pause");
        this.receiver.subscribe("unpause");
        this.receiver.subscribe("mainmenu");
        this.receiver.subscribe("controls");
        this.receiver.subscribe("help");
        this.receiver.subscribe("backcontrols");
        this.receiver.subscribe("helpcontrols");
        this.receiver.subscribe("nextlvl");
        this.emitter.fireEvent(GameEventType_1.GameEventType.PLAY_SOUND, { key: this.levelMusicKey, loop: true, holdReference: true });
        // this.emitter.fireEvent(GameEventType.PLAY_SOUND, {key: this.getShootAudioKey(), loop: false, holdReference: false});
    }
    /**
     * @see Scene.updateScene
     */
    updateScene(deltaT) {
        while (this.receiver.hasNextEvent()) {
            this.handleEvent(this.receiver.getNextEvent());
        }
        // this.inventoryHud.update(deltaT);
        this.healthbars.forEach(healthbar => healthbar.update(deltaT));
        // this.pause.setCenter(this.viewport.getCenter());
        // this.pauseMenu.update(deltaT);
        // this.pause.update(deltaT);
        if (Input_1.default.isKeyJustPressed("escape")) {
            console.log("Escape pressed");
            let v = new GameEvent_1.default("pause", null);
            this.handleEvent(v);
        }
        if (this.boss.health <= 0) {
            this.viewport.setZoomLevel(1);
            this.unpauseCompleteLayer();
            this.player[0].freeze(); // Freezes player
            this.player[0].disablePhysics();
            this.player[0].aiActive = false;
            for (let i = 0; i < this.enemies.length; i++) { // Freezes enemies 
                if (this.enemies[i].battlerActive == true) {
                    this.enemies[i].freeze();
                    this.enemies[i].disablePhysics();
                    this.enemies[i].aiActive = false;
                }
            }
        }
        let pauseLayer = this.getLayer("PAUSE");
        if (!pauseLayer.isHidden()) {
            this.pauseImage.position.copy(this.viewport.getCenter()); // Works but when moving the screen gets moved upwards.
        }
        if (Input_1.default.isKeyPressed("z")) {
            this.viewport.setZoomLevel(1);
        }
        if (Input_1.default.isKeyPressed("x")) {
            this.viewport.setZoomLevel(3);
        }
        if (Input_1.default.isKeyJustPressed("1")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level1Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("2")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level2Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("3")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level3Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("4")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level4Scene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("5")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(Level5Scene);
        }
        if (Input_1.default.isKeyJustPressed("6")) {
            this.viewport.follow(undefined);
            this.viewport.setZoomLevel(1);
            this.sceneManager.changeToScene(LastScene_1.default);
        }
        if (Input_1.default.isKeyJustPressed("t")) {
            this.player[0].position = this.bossLocation;
        }
        // Another way to play shoot audio is when player pressed space
        //  if(Input.isKeyJustPressed("space")){
        //     console.log("Shoot Audio Played");
        //     this.emitter.fireEvent(GameEventType.PLAY_SOUND, {key: this.getShootAudioKey(), loop: false, holdReference: false});
        //  }
        // TODO If input is 2, 3, 4, 5, 6 go to those levels by chaning the scene
    }
    /**
     * Handle events from the rest of the game
     * @param event a game event
     */
    handleEvent(event) {
        switch (event.type) {
            case Events_1.BattlerEvent.BATTLER_KILLED: {
                this.handleBattlerKilled(event);
                break;
            }
            case Events_1.BattlerEvent.BATTLER_RESPAWN: {
                break;
            }
            case Events_1.ItemEvent.ITEM_REQUEST: {
                this.handleItemRequest(event.data.get("node"), event.data.get("inventory"));
                break;
            }
            case Events_1.PlayerEvent.PLAYER_KILLED: {
                this.viewport.follow(undefined);
                this.sceneManager.changeToScene(GameOver_1.default);
            }
            case "pause": {
                console.log("Pause");
                // this.pauseImage.scale = this.pauseImage.sizeWithZoom;
                this.viewport.setZoomLevel(1);
                this.pauseImage.position.copy(this.viewport.getCenter()); // Works but when moving the screen gets moved upwards.
                // this.viewport.follow(undefined);
                this.player[0].freeze(); // Freezes player
                this.player[0].disablePhysics();
                for (let i = 0; i < this.enemies.length; i++) { // Freezes enemies 
                    if (this.enemies[i].battlerActive == true) {
                        this.enemies[i].freeze();
                        this.enemies[i].disablePhysics();
                        this.enemies[i].aiActive = false;
                    }
                }
                this.unpausePauseLayer();
                this.pausePrimaryLayer();
                this.pauseUILayer();
                break;
            }
            case "unpause": {
                console.log("unpause");
                this.viewport.setZoomLevel(3);
                let center = this.viewport.getCenter();
                // this.pauseMenu.position.set(center.x, center.y);
                this.player[0].unfreeze();
                this.player[0].enablePhysics();
                // Input.enableInput();
                for (let i = 0; i < this.enemies.length; i++) {
                    if (this.enemies[i].battlerActive == true) {
                        this.enemies[i].unfreeze();
                        this.enemies[i].enablePhysics();
                        this.enemies[i].aiActive = true;
                    }
                    // this.enemies[i].setTarget(this.battlers[0]);
                }
                this.pausePauseLayer();
                this.unpausePrimaryLayer();
                this.unpauseUILayer();
                break;
            }
            case "mainmenu": {
                this.viewport.follow(undefined);
                this.viewport.setZoomLevel(1);
                this.sceneManager.changeToScene(MainMenu_1.default);
                break;
            }
            case "controls": {
                this.controlsImage.position.copy(this.viewport.getCenter());
                this.pausePauseLayer();
                this.unpauseControlsLayer();
                break;
            }
            case "backcontrols": {
                this.unpausePauseLayer();
                this.pauseControlsLayer();
                break;
            }
            case "help": {
                this.helpImage.position.copy(this.viewport.getCenter());
                this.pausePauseLayer();
                this.unpauseHelpLayer();
                break;
            }
            case "helpcontrols": {
                this.unpausePauseLayer();
                this.pauseHelpLayer();
                break;
            }
            case "nextlvl": {
                this.viewport.follow(undefined);
                this.viewport.setZoomLevel(1);
                this.sceneManager.changeToScene(LastScene_1.default);
                break;
            }
            default: {
                throw new Error(`Unhandled event type "${event.type}" caught in HW3Scene event handler`);
            }
        }
    }
    pausePauseLayer() {
        let pauseLayer = this.getLayer("PAUSE");
        pauseLayer.setPaused(true);
        pauseLayer.setHidden(true);
    }
    unpausePauseLayer() {
        let pauseLayer = this.getLayer("PAUSE");
        pauseLayer.setPaused(false);
        pauseLayer.setHidden(false);
    }
    pauseControlsLayer() {
        let controlsLayer = this.getLayer("CONTROLS");
        controlsLayer.setPaused(true);
        controlsLayer.setHidden(true);
    }
    unpauseControlsLayer() {
        let controlsLayer = this.getLayer("CONTROLS");
        controlsLayer.setPaused(false);
        controlsLayer.setHidden(false);
    }
    pausePrimaryLayer() {
        let primaryLayer = this.getLayer("primary");
        primaryLayer.setPaused(true);
        primaryLayer.setHidden(true);
    }
    unpausePrimaryLayer() {
        let primaryLayer = this.getLayer("primary");
        primaryLayer.setPaused(false);
        primaryLayer.setHidden(false);
    }
    pauseUILayer() {
        let uiLayer = this.getLayer("UI");
        uiLayer.setPaused(true);
        uiLayer.setHidden(true);
    }
    unpauseUILayer() {
        let uiLayer = this.getLayer("UI");
        uiLayer.setPaused(false);
        uiLayer.setHidden(false);
    }
    pauseHelpLayer() {
        let helpLayer = this.getLayer("HELP");
        helpLayer.setPaused(true);
        helpLayer.setHidden(true);
    }
    unpauseHelpLayer() {
        let helpLayer = this.getLayer("HELP");
        helpLayer.setPaused(false);
        helpLayer.setHidden(false);
    }
    pauseCompleteLayer() {
        let completeLayer = this.getLayer("COMPLETE");
        completeLayer.setPaused(true);
        completeLayer.setHidden(true);
    }
    unpauseCompleteLayer() {
        let completeLayer = this.getLayer("COMPLETE");
        completeLayer.setPaused(false);
        completeLayer.setHidden(false);
    }
    handleItemRequest(node, inventory) {
        let items = new Array(...this.healthpacks, ...this.laserguns).filter((item) => {
            return item.inventory === null && item.position.distanceTo(node.position) <= 100;
        });
        if (items.length > 0) {
            inventory.add(items.reduce((0, HW4Reducers_1.ClosestPositioned)(node)));
        }
    }
    /**
     * Handles an NPC being killed by unregistering the NPC from the scenes subsystems
     * @param event an NPC-killed event
     */
    handleBattlerKilled(event) {
        let id = event.data.get("id");
        let battler = this.battlers.find(b => b.id === id);
        if (battler) {
            battler.battlerActive = false;
            this.healthbars.get(id).visible = false;
        }
    }
    /** Initializes the layers in the scene */
    initLayers() {
        this.addLayer(exports.Level5SceneLayers.UI);
        this.addLayer(exports.Level5SceneLayers.PAUSE, 10);
        this.addLayer(exports.Level5SceneLayers.HELP, 11);
        this.addLayer(exports.Level5SceneLayers.CONTROLS, 11);
        this.addLayer(exports.Level5SceneLayers.COMPLETE, 12);
        this.addLayer("primary", 5);
    }
    /**
     * Initializes the player in the scene
     */
    initializePlayer() {
        const center = this.viewport.getCenter();
        let player = this.add.animatedSprite(PlayerActor_1.default, "player1", "primary");
        player.position.set(center.x, center.y + 400);
        player.battleGroup = 2;
        player.health = 10;
        player.maxHealth = 10;
        player.scale = new Vec2_1.default(0.4, 0.4); // Scales player 
        player.inventory.onChange = Events_1.ItemEvent.INVENTORY_CHANGED;
        // this.inventoryHud = new InventoryHUD(this, player.inventory, "inventorySlot", {
        //     start: new Vec2(232, 24),
        //     slotLayer: "slots",
        //     padding: 8,
        //     itemLayer: "items"
        // });
        // Give the player physics
        player.addPhysics(new AABB_1.default(Vec2_1.default.ZERO, new Vec2_1.default(16, 16)));
        // Give the player a healthbar
        let healthbar = new HealthbarHUD_1.default(this, player, "primary", { size: player.size.clone().scaled(1, 1 / 4), offset: player.size.clone().scaled(0, -1 / 3) });
        this.healthbars.set(player.id, healthbar);
        // Give the player PlayerAI
        player.addAI(PlayerAI_1.default);
        // Start the player in the "IDLE" animation
        player.animation.play("IDLE");
        this.battlers.push(player);
        this.player.push(player);
        this.viewport.follow(player);
        this.viewport.setZoomLevel(3);
    }
    /**
     * Initialize the NPCs
     */
    initializeNPCs() {
        // Get the object data for the blue enemies
        let blue = this.load.getObject("blue");
        // Initialize the blue enemies
        for (let i = 0; i < blue.enemies.length; i++) {
            let npc = this.add.animatedSprite(NPCActor_1.default, "BlueEnemy", "primary");
            npc.position.set(blue.enemies[i][0], blue.enemies[i][1]);
            npc.addPhysics(new AABB_1.default(Vec2_1.default.ZERO, new Vec2_1.default(8, 8)), null, false);
            // Give the NPCS their healthbars
            let healthbar = new HealthbarHUD_1.default(this, npc, "primary", { size: npc.size.clone().scaled(1 / 2, 1 / 4), offset: npc.size.clone().scaled(0, -1 / 3) });
            this.healthbars.set(npc.id, healthbar);
            npc.battleGroup = 1;
            npc.speed = 10;
            npc.health = 4;
            npc.maxHealth = 4;
            npc.navkey = "navmesh";
            npc.scale = new Vec2_1.default(0.4, 0.4);
            // Give the NPCs their AI
            npc.addAI(GaurdBehavior_1.default, { target: this.battlers[0], range: 0 });
            // Play the NPCs "IDLE" animation 
            npc.animation.play("IDLE");
            this.battlers.push(npc);
            this.enemies.push(npc);
        }
        let npc = this.add.animatedSprite(NPCActor_1.default, "BlueEnemy", "primary");
        this.boss = npc;
        const center = this.viewport.getCenter();
        npc.position.set(center.x, center.y);
        this.bossLocation = new Vec2_1.default(center.x, center.y);
        npc.addPhysics(new AABB_1.default(Vec2_1.default.ZERO, new Vec2_1.default(32, 32)), null, false);
        // Give the NPCS their healthbars
        let healthbar = new HealthbarHUD_1.default(this, npc, "primary", { size: npc.size.clone().scaled(2, 1 / 4), offset: npc.size.clone().scaled(0, -1 / 3) });
        this.healthbars.set(npc.id, healthbar);
        npc.battleGroup = 1;
        npc.speed = 10;
        npc.health = 25;
        npc.maxHealth = 25;
        npc.navkey = "navmesh";
        npc.scale = new Vec2_1.default(1, 1);
        // Give the NPCs their AI
        npc.addAI(GaurdBehavior_1.default, { target: this.battlers[0], range: 0 });
        // Play the NPCs "IDLE" animation 
        npc.animation.play("IDLE");
        this.battlers.push(npc);
        this.enemies.push(npc);
        // Initialize the blue healers
    }
    /**
     * Initialize the items in the scene (healthpacks and laser guns)
     */
    initializeItems() {
        let laserguns = this.load.getObject("laserguns");
        this.laserguns = new Array(laserguns.items.length);
        for (let i = 0; i < laserguns.items.length; i++) {
            let sprite = this.add.sprite("laserGun", "primary");
            let line = this.add.graphic(GraphicTypes_1.GraphicType.LINE, "primary", { start: Vec2_1.default.ZERO, end: Vec2_1.default.ZERO });
            this.laserguns[i] = LaserGun_1.default.create(sprite, line);
            this.laserguns[i].position.set(laserguns.items[i][0], laserguns.items[i][1]);
        }
        let healthpacks = this.load.getObject("healthpacks");
        this.healthpacks = new Array(healthpacks.items.length);
        for (let i = 0; i < healthpacks.items.length; i++) {
            let sprite = this.add.sprite("healthpack", "primary");
            this.healthpacks[i] = new Healthpack_1.default(sprite);
            this.healthpacks[i].position.set(healthpacks.items[i][0], healthpacks.items[i][1]);
        }
    }
    /**
     * Initializes the navmesh graph used by the NPCs in the HW3Scene. This method is a little buggy, and
     * and it skips over some of the positions on the tilemap. If you can fix my navmesh generation algorithm,
     * go for it.
     *
     * - Peter
     */
    initializeNavmesh() {
        // Create the graph
        this.graph = new PositionGraph_1.default();
        let dim = this.walls.getDimensions();
        for (let i = 0; i < dim.y; i++) {
            for (let j = 0; j < dim.x; j++) {
                let tile = this.walls.getTileCollider(j, i);
                this.graph.addPositionedNode(tile.center);
            }
        }
        let rc;
        for (let i = 0; i < this.graph.numVertices; i++) {
            rc = this.walls.getTileColRow(i);
            if (!this.walls.isTileCollidable(rc.x, rc.y) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x - 1, 0, dim.x - 1), rc.y) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x + 1, 0, dim.x - 1), rc.y) &&
                !this.walls.isTileCollidable(rc.x, MathUtils_1.default.clamp(rc.y - 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(rc.x, MathUtils_1.default.clamp(rc.y + 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x + 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y + 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x - 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y + 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x + 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y - 1, 0, dim.y - 1)) &&
                !this.walls.isTileCollidable(MathUtils_1.default.clamp(rc.x - 1, 0, dim.x - 1), MathUtils_1.default.clamp(rc.y - 1, 0, dim.y - 1))) {
                // Create edge to the left
                rc = this.walls.getTileColRow(i + 1);
                if ((i + 1) % dim.x !== 0 && !this.walls.isTileCollidable(rc.x, rc.y)) {
                    this.graph.addEdge(i, i + 1);
                    // this.add.graphic(GraphicType.LINE, "graph", {start: this.graph.getNodePosition(i), end: this.graph.getNodePosition(i + 1)})
                }
                // Create edge below
                rc = this.walls.getTileColRow(i + dim.x);
                if (i + dim.x < this.graph.numVertices && !this.walls.isTileCollidable(rc.x, rc.y)) {
                    this.graph.addEdge(i, i + dim.x);
                    // this.add.graphic(GraphicType.LINE, "graph", {start: this.graph.getNodePosition(i), end: this.graph.getNodePosition(i + dim.x)})
                }
            }
        }
        // Set this graph as a navigable entity
        let navmesh = new Navmesh_1.default(this.graph);
        // Add different strategies to use for this navmesh
        navmesh.registerStrategy("direct", new DirectStrategy_1.default(navmesh));
        navmesh.registerStrategy("astar", new AstarStrategy_1.default(navmesh));
        // Select A* as our navigation strategy
        navmesh.setStrategy("astar");
        // Add this navmesh to the navigation manager
        this.navManager.addNavigableEntity("navmesh", navmesh);
    }
    unloadScene() {
        // The scene is being destroyed, so we can stop playing the song
        this.emitter.fireEvent(GameEventType_1.GameEventType.STOP_SOUND, { key: this.levelMusicKey });
    }
    getBattlers() { return this.battlers; }
    getWalls() { return this.walls; }
    getHealthpacks() { return this.healthpacks; }
    getLaserGuns() { return this.laserguns; }
    /**
     * Checks if the given target position is visible from the given position.
     * @param position
     * @param target
     * @returns
     */
    isTargetVisible(position, target) {
        // Get the new player location
        let start = position.clone();
        let delta = target.clone().sub(start);
        // Iterate through the tilemap region until we find a collision
        let minX = Math.min(start.x, target.x);
        let maxX = Math.max(start.x, target.x);
        let minY = Math.min(start.y, target.y);
        let maxY = Math.max(start.y, target.y);
        // Get the wall tilemap
        let walls = this.getWalls();
        let minIndex = walls.getTilemapPosition(minX, minY);
        let maxIndex = walls.getTilemapPosition(maxX, maxY);
        let tileSize = walls.getScaledTileSize();
        for (let col = minIndex.x; col <= maxIndex.x; col++) {
            for (let row = minIndex.y; row <= maxIndex.y; row++) {
                if (walls.isTileCollidable(col, row)) {
                    // Get the position of this tile
                    let tilePos = new Vec2_1.default(col * tileSize.x + tileSize.x / 2, row * tileSize.y + tileSize.y / 2);
                    // Create a collider for this tile
                    let collider = new AABB_1.default(tilePos, tileSize.scaled(1 / 4));
                    let hit = collider.intersectSegment(start, delta, Vec2_1.default.ZERO);
                    if (hit !== null && start.distanceSqTo(hit.pos) < start.distanceSqTo(target)) {
                        // We hit a wall, we can't see the player
                        return false;
                    }
                }
            }
        }
        return true;
    }
}
exports.default = Level5Scene;
Level5Scene.PAUSE_KEY = "PAUSE";
Level5Scene.PAUSE_PATH = "hw4_assets/sprites/Paused-Screen.png";
Level5Scene.HELP_KEY = "HELP";
Level5Scene.HELP_PATH = "hw4_assets/sprites/Help-Screen.png";
Level5Scene.CONTROLS_KEY = "CONTROLS";
Level5Scene.CONTROLS_PATH = "hw4_assets/sprites/Controls-Screen.png";
Level5Scene.COMPLETE_KEY = "COMPLETE";
Level5Scene.COMPLETE_PATH = "hw4_assets/sprites/Level-Complete.png";
Level5Scene.SHOOT_AUDIO_KEY = "PLAYER_SHOOT";
Level5Scene.SHOOT_AUDIO_PATH = "hw4_assets/sounds/laserShoot.wav";
Level5Scene.HIT_AUDIO_KEY = "PLAYER_HIT";
Level5Scene.HIT_AUDIO_PATH = "hw4_assets/sounds/hit.wav";
Level5Scene.DYING_AUDIO_KEY = "PLAYER_DYING";
Level5Scene.DYING_AUDIO_PATH = "hw4_assets/sounds/dying.wav";
Level5Scene.LEVEL_MUSIC_KEY = "LEVEL_MUSIC";
Level5Scene.LEVEL_MUSIC_PATH = "hw4_assets/music/MainGameMusic.wav";

},{"../../Wolfie2D/DataTypes/Graphs/PositionGraph":14,"../../Wolfie2D/DataTypes/Shapes/AABB":20,"../../Wolfie2D/DataTypes/Vec2":26,"../../Wolfie2D/Events/GameEvent":31,"../../Wolfie2D/Events/GameEventType":32,"../../Wolfie2D/Input/Input":34,"../../Wolfie2D/Nodes/Graphics/GraphicTypes":44,"../../Wolfie2D/Nodes/UIElements/UIElementTypes":60,"../../Wolfie2D/Pathfinding/Navmesh":63,"../../Wolfie2D/Pathfinding/Strategies/DirectStrategy":64,"../../Wolfie2D/Utils/Color":105,"../../Wolfie2D/Utils/MathUtils":108,"../AI/NPC/NPCBehavior/GaurdBehavior":116,"../AI/Player/PlayerAI":120,"../Actors/NPCActor":127,"../Actors/PlayerActor":128,"../Events":129,"../GameSystems/HUD/HealthbarHUD":131,"../GameSystems/ItemSystem/Items/Healthpack":134,"../GameSystems/ItemSystem/Items/LaserGun":135,"../GameSystems/Searching/HW4Reducers":138,"../Pathfinding/AstarStrategy":141,"./FinalProjectScene":142,"./GameOver":143,"./HW4Scene":144,"./LastScene":145,"./Level1Scene":146,"./Level2Scene":147,"./Level3Scene":148,"./Level4Scene":149,"./MainMenu":151}],151:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.MainMenuLayers = void 0;
const Vec2_1 = __importDefault(require("../../Wolfie2D/DataTypes/Vec2"));
const UIElementTypes_1 = require("../../Wolfie2D/Nodes/UIElements/UIElementTypes");
const Scene_1 = __importDefault(require("../../Wolfie2D/Scene/Scene"));
const Color_1 = __importDefault(require("../../Wolfie2D/Utils/Color"));
const Level1Scene_1 = __importDefault(require("./Level1Scene"));
const GameEventType_1 = require("../../Wolfie2D/Events/GameEventType");
const LastScene_1 = __importDefault(require("./LastScene"));
const Level2Scene_1 = __importDefault(require("./Level2Scene"));
const Level3Scene_1 = __importDefault(require("./Level3Scene"));
const Level4Scene_1 = __importDefault(require("./Level4Scene"));
const Level5Scene_1 = __importDefault(require("./Level5Scene"));
exports.MainMenuLayers = {
    PRIMARY: "PRIMARY",
    BACKGROUND: "BACKGROUND",
    UI: "UI",
    CONTROLS: "CONTROLS",
    HELP: "HELP",
    LEVELSELECT: "LEVELSELECT"
};
class MainMenu extends Scene_1.default {
    loadScene() {
        this.load.image(MainMenu.BACKGROUND_KEY, MainMenu.BACKGROUND_PATH);
        this.load.audio(MainMenu.MUSIC_KEY, MainMenu.MUSIC_PATH);
        this.load.image(MainMenu.HELP_KEY, MainMenu.HELP_PATH);
        this.load.image(MainMenu.CONTROLS_KEY, MainMenu.CONTROLS_PATH);
        this.load.image(MainMenu.LEVELSELECT_KEY, MainMenu.LEVELSELECT_PATH);
    }
    startScene() {
        console.log(this.viewport.getCenter());
        let a = new Vec2_1.default(660, 440);
        this.viewport.setCenter(a);
        // const center = a;
        // console.log(center);
        const center = this.viewport.getCenter();
        // this.viewport.setCenter(center);
        // let a = new Vec2(660,440)
        // this.viewport.setCenter(660, 440);
        this.addLayer(exports.MainMenuLayers.BACKGROUND, 0);
        this.initBackground();
        this.addLayer(exports.MainMenuLayers.PRIMARY, 5);
        this.addLayer(exports.MainMenuLayers.CONTROLS, 6);
        this.addLayer(exports.MainMenuLayers.HELP, 6);
        this.addLayer(exports.MainMenuLayers.LEVELSELECT, 6);
        // The main menu
        // this.mainMenu = this.addUILayer("mainMenu");
        const play = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.MainMenuLayers.PRIMARY, { position: new Vec2_1.default(center.x + 2, center.y + 335), text: "" });
        play.size.set(180, 210);
        play.borderWidth = 2;
        play.borderColor = Color_1.default.TRANSPARENT;
        play.backgroundColor = Color_1.default.TRANSPARENT;
        play.onClickEventId = "play";
        const help = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.MainMenuLayers.PRIMARY, { position: new Vec2_1.default(center.x + 242, center.y + 230), text: "" });
        help.size.set(230, 430);
        help.borderWidth = 2;
        help.borderColor = Color_1.default.TRANSPARENT;
        help.backgroundColor = Color_1.default.TRANSPARENT;
        help.onClickEventId = "help";
        const controls = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.MainMenuLayers.PRIMARY, { position: new Vec2_1.default(center.x - 238, center.y + 230), text: "" });
        controls.size.set(230, 430);
        controls.borderWidth = 2;
        controls.borderColor = Color_1.default.TRANSPARENT;
        controls.backgroundColor = Color_1.default.TRANSPARENT;
        controls.onClickEventId = "controls";
        const level = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.MainMenuLayers.PRIMARY, { position: new Vec2_1.default(center.x, center.y - 225), text: "" });
        level.size.set(705, 470);
        level.borderWidth = 2;
        level.borderColor = Color_1.default.TRANSPARENT;
        level.backgroundColor = Color_1.default.TRANSPARENT;
        level.onClickEventId = "level";
        let controlsLayer = this.getLayer("CONTROLS");
        this.controlsImage = this.add.sprite(MainMenu.CONTROLS_KEY, controlsLayer.getName());
        this.controlsImage.position.copy(this.viewport.getCenter());
        // this.controlsImage.alpha = 0.5;
        const controlsBackButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.MainMenuLayers.CONTROLS, { position: new Vec2_1.default(center.x - 595, center.y + 415), text: "" });
        controlsBackButton.size.set(200, 50);
        controlsBackButton.borderWidth = 2;
        controlsBackButton.borderColor = Color_1.default.TRANSPARENT;
        controlsBackButton.backgroundColor = Color_1.default.TRANSPARENT;
        controlsBackButton.onClickEventId = "backcontrols";
        controlsLayer.setPaused(true);
        controlsLayer.setHidden(true);
        // 
        let helpLayer = this.getLayer("HELP");
        this.helpImage = this.add.sprite(MainMenu.HELP_KEY, helpLayer.getName());
        this.helpImage.position.copy(this.viewport.getCenter());
        // this.helpImage.alpha = 0.5;
        const helpBackButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.MainMenuLayers.HELP, { position: new Vec2_1.default(center.x - 595, center.y + 415), text: "" });
        helpBackButton.size.set(200, 50);
        helpBackButton.borderWidth = 2;
        helpBackButton.borderColor = Color_1.default.TRANSPARENT;
        helpBackButton.backgroundColor = Color_1.default.TRANSPARENT;
        helpBackButton.onClickEventId = "helpcontrols";
        helpLayer.setPaused(true);
        helpLayer.setHidden(true);
        let LevelSelectLayer = this.getLayer("LEVELSELECT");
        this.levelSelectImage = this.add.sprite(MainMenu.LEVELSELECT_KEY, LevelSelectLayer.getName());
        this.levelSelectImage.position.copy(this.viewport.getCenter());
        // Back Button
        const back = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.MainMenuLayers.LEVELSELECT, { position: new Vec2_1.default(center.x - 600, center.y + 420), text: "" });
        back.size.set(600, 50);
        back.borderWidth = 2;
        back.borderColor = Color_1.default.TRANSPARENT;
        back.backgroundColor = Color_1.default.TRANSPARENT;
        back.onClickEventId = "mainmenu";
        // 
        // Lvl 1 Button
        const lvl1Button = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.MainMenuLayers.LEVELSELECT, { position: new Vec2_1.default(center.x - 5, center.y + 268), text: "" });
        lvl1Button.size.set(370, 67);
        lvl1Button.borderWidth = 2;
        lvl1Button.borderColor = Color_1.default.TRANSPARENT;
        lvl1Button.backgroundColor = Color_1.default.TRANSPARENT;
        lvl1Button.onClickEventId = "level1";
        //
        // Lvl 2 Button
        const lvl2Button = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.MainMenuLayers.LEVELSELECT, { position: new Vec2_1.default(center.x - 5, center.y + 192), text: "" });
        lvl2Button.size.set(370, 67);
        lvl2Button.borderWidth = 2;
        lvl2Button.borderColor = Color_1.default.TRANSPARENT;
        lvl2Button.backgroundColor = Color_1.default.TRANSPARENT;
        lvl2Button.onClickEventId = "level2";
        //
        // Lvl 3 Button
        const lvl3Button = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.MainMenuLayers.LEVELSELECT, { position: new Vec2_1.default(center.x - 5, center.y + 116), text: "" });
        lvl3Button.size.set(370, 67);
        lvl3Button.borderWidth = 2;
        lvl3Button.borderColor = Color_1.default.TRANSPARENT;
        lvl3Button.backgroundColor = Color_1.default.TRANSPARENT;
        lvl3Button.onClickEventId = "level3";
        //
        // 40
        // Lvl 4 Button
        const lvl4Button = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.MainMenuLayers.LEVELSELECT, { position: new Vec2_1.default(center.x - 5, center.y + 40), text: "" });
        lvl4Button.size.set(370, 67);
        lvl4Button.borderWidth = 2;
        lvl4Button.borderColor = Color_1.default.TRANSPARENT;
        lvl4Button.backgroundColor = Color_1.default.TRANSPARENT;
        lvl4Button.onClickEventId = "level4";
        //
        // -36
        // Lvl 5 Button
        const lvl5Button = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.MainMenuLayers.LEVELSELECT, { position: new Vec2_1.default(center.x - 5, center.y - 36), text: "" });
        lvl5Button.size.set(370, 67);
        lvl5Button.borderWidth = 2;
        lvl5Button.borderColor = Color_1.default.TRANSPARENT;
        lvl5Button.backgroundColor = Color_1.default.TRANSPARENT;
        lvl5Button.onClickEventId = "level5";
        //
        // Lvl 5 Button
        const finalLvlButton = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.MainMenuLayers.LEVELSELECT, { position: new Vec2_1.default(center.x - 5, center.y - 122), text: "" });
        finalLvlButton.size.set(230, 63);
        finalLvlButton.borderWidth = 2;
        finalLvlButton.borderColor = Color_1.default.TRANSPARENT;
        finalLvlButton.backgroundColor = Color_1.default.TRANSPARENT;
        finalLvlButton.onClickEventId = "final";
        //
        LevelSelectLayer.setPaused(true);
        LevelSelectLayer.setHidden(true);
        this.receiver.subscribe("mainmenu");
        this.receiver.subscribe("level1");
        this.receiver.subscribe("level2");
        this.receiver.subscribe("level3");
        this.receiver.subscribe("level4");
        this.receiver.subscribe("level5");
        this.receiver.subscribe("final");
        // Subscribe to the button events
        this.receiver.subscribe("play");
        this.receiver.subscribe("help");
        this.receiver.subscribe("controls");
        this.receiver.subscribe("level");
        this.receiver.subscribe("backcontrols");
        this.receiver.subscribe("helpcontrols");
        this.emitter.fireEvent(GameEventType_1.GameEventType.PLAY_SOUND, { key: MainMenu.MUSIC_KEY, loop: true, holdReference: true });
    }
    updateScene() {
        while (this.receiver.hasNextEvent()) {
            this.handleEvent(this.receiver.getNextEvent());
        }
    }
    initBackground() {
        const center = this.viewport.getCenter();
        this.bg1 = this.add.sprite(MainMenu.BACKGROUND_KEY, exports.MainMenuLayers.BACKGROUND);
        // this.bg1.scale.set(1, 1.15);
        // this.viewport.setCenter(660, 440);
        this.bg1.position.copy(center);
        // this.bg2 = this.add.sprite(SplashScreen.BACKGROUND_KEY, SplashScreenLayers.BACKGROUND);
        // this.bg2.scale.set(1.5, 1.5);
        // this.bg2.position = this.bg1.position.clone();
        // this.bg2.position.add(this.bg1.sizeWithZoom.scale(2, 0));
    }
    handleEvent(event) {
        switch (event.type) {
            case "play": {
                // this.emitter.fireEvent(GameEventType.STOP_SOUND, {key: MainMenu.MUSIC_KEY});
                this.sceneManager.changeToScene(Level1Scene_1.default);
                break;
            }
            case "help": {
                this.helpImage.position.copy(this.viewport.getCenter());
                // this.pausePauseLayer();
                this.pausePrimaryLayer();
                this.pauseBackgroundLayer();
                this.unpauseHelpLayer();
                break;
            }
            case "controls": {
                // this.sceneManager.changeToScene(ControlsScene);
                this.pausePrimaryLayer();
                this.pauseBackgroundLayer();
                this.unpauseControlsLayer();
                break;
            }
            case "backcontrols": {
                this.unpausePrimaryLayer();
                this.unpauseBackgroundLayer();
                this.pauseControlsLayer();
                break;
            }
            case "helpcontrols": {
                // this.unpausePauseLayer();
                this.unpausePrimaryLayer();
                this.unpauseBackgroundLayer();
                this.pauseHelpLayer();
                break;
            }
            case "level": {
                // this.sceneManager.changeToScene(LevelSelectionScene);
                this.pausePrimaryLayer();
                this.pauseBackgroundLayer();
                this.unpauseLevelSelectLayer();
                break;
            }
            case "level1": {
                console.log("Goto lvl1");
                this.sceneManager.changeToScene(Level1Scene_1.default);
                break;
            }
            case "level2": {
                console.log("Goto lvl2");
                this.sceneManager.changeToScene(Level2Scene_1.default);
                // TODO Change scene to lvl 2
                break;
            }
            case "level3": {
                console.log("Goto lvl3");
                this.sceneManager.changeToScene(Level3Scene_1.default);
                // TODO Change scene to lvl 3
                break;
            }
            case "level4": {
                console.log("Goto lvl4");
                this.sceneManager.changeToScene(Level4Scene_1.default);
                // TODO Change scene to lvl 4
                break;
            }
            case "level5": {
                console.log("Goto lvl5");
                this.sceneManager.changeToScene(Level5Scene_1.default);
                // TODO Change scene to lvl 5
                break;
            }
            case "final": {
                console.log("Goto final lvl");
                this.sceneManager.changeToScene(LastScene_1.default);
                // TODO Change scene to final level
                break;
            }
            case "mainmenu": {
                // this.sceneManager.changeToScene(MainMenu);
                this.unpausePrimaryLayer();
                this.unpauseBackgroundLayer();
                this.pauseLevelSelectLayer();
                break;
            }
        }
    }
    pausePrimaryLayer() {
        let primaryLayer = this.getLayer("PRIMARY");
        primaryLayer.setPaused(true);
        primaryLayer.setHidden(true);
    }
    unpausePrimaryLayer() {
        let primaryLayer = this.getLayer("PRIMARY");
        primaryLayer.setPaused(false);
        primaryLayer.setHidden(false);
    }
    pauseBackgroundLayer() {
        let backgroundLayer = this.getLayer("BACKGROUND");
        backgroundLayer.setPaused(true);
        backgroundLayer.setHidden(true);
    }
    unpauseBackgroundLayer() {
        let backgroundLayer = this.getLayer("BACKGROUND");
        backgroundLayer.setPaused(false);
        backgroundLayer.setHidden(false);
    }
    pauseHelpLayer() {
        let helpLayer = this.getLayer("HELP");
        helpLayer.setPaused(true);
        helpLayer.setHidden(true);
    }
    unpauseHelpLayer() {
        let helpLayer = this.getLayer("HELP");
        helpLayer.setPaused(false);
        helpLayer.setHidden(false);
    }
    pauseControlsLayer() {
        let controlsLayer = this.getLayer("CONTROLS");
        controlsLayer.setPaused(true);
        controlsLayer.setHidden(true);
    }
    unpauseControlsLayer() {
        let controlsLayer = this.getLayer("CONTROLS");
        controlsLayer.setPaused(false);
        controlsLayer.setHidden(false);
    }
    pauseLevelSelectLayer() {
        let levelSelectLayer = this.getLayer("LEVELSELECT");
        levelSelectLayer.setPaused(true);
        levelSelectLayer.setHidden(true);
    }
    unpauseLevelSelectLayer() {
        let levelSelectLayer = this.getLayer("LEVELSELECT");
        levelSelectLayer.setPaused(false);
        levelSelectLayer.setHidden(false);
    }
    unloadScene() {
        // The scene is being destroyed, so we can stop playing the song
        this.emitter.fireEvent(GameEventType_1.GameEventType.STOP_SOUND, { key: MainMenu.MUSIC_KEY });
    }
}
exports.default = MainMenu;
MainMenu.BACKGROUND_KEY = "BACKGROUND";
MainMenu.BACKGROUND_PATH = "hw4_assets/sprites/Main-Menu.png";
MainMenu.MUSIC_KEY = "MAIN_MENU_MUSIC";
MainMenu.MUSIC_PATH = "hw4_assets/music/FalloftheBGCMainMenu.mp3";
MainMenu.HELP_KEY = "HELP";
MainMenu.HELP_PATH = "hw4_assets/sprites/Help-Screen.png";
MainMenu.CONTROLS_KEY = "CONTROLS";
MainMenu.CONTROLS_PATH = "hw4_assets/sprites/Controls-Screen.png";
MainMenu.LEVELSELECT_KEY = "LEVELSELECT";
MainMenu.LEVELSELECT_PATH = "hw4_assets/sprites/Levels-Selection-Screen.png";

},{"../../Wolfie2D/DataTypes/Vec2":26,"../../Wolfie2D/Events/GameEventType":32,"../../Wolfie2D/Nodes/UIElements/UIElementTypes":60,"../../Wolfie2D/Scene/Scene":96,"../../Wolfie2D/Utils/Color":105,"./LastScene":145,"./Level1Scene":146,"./Level2Scene":147,"./Level3Scene":148,"./Level4Scene":149,"./Level5Scene":150}],152:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.SplashScreenLayers = void 0;
const Vec2_1 = __importDefault(require("../../Wolfie2D/DataTypes/Vec2"));
const UIElementTypes_1 = require("../../Wolfie2D/Nodes/UIElements/UIElementTypes");
const Scene_1 = __importDefault(require("../../Wolfie2D/Scene/Scene"));
const Color_1 = __importDefault(require("../../Wolfie2D/Utils/Color"));
const MainMenu_1 = __importDefault(require("./MainMenu"));
exports.SplashScreenLayers = {
    PRIMARY: "PRIMARY",
    BACKGROUND: "BACKGROUND",
    UI: "UI"
};
class SplashScreen extends Scene_1.default {
    loadScene() {
        this.load.image(SplashScreen.BACKGROUND_KEY, SplashScreen.BACKGROUND_PATH);
    }
    startScene() {
        const center = this.viewport.getCenter();
        this.addLayer(exports.SplashScreenLayers.BACKGROUND, 0);
        this.initBackground();
        this.addLayer(exports.SplashScreenLayers.PRIMARY, 5);
        const play = this.add.uiElement(UIElementTypes_1.UIElementType.BUTTON, exports.SplashScreenLayers.PRIMARY, { position: new Vec2_1.default(center.x, center.y + 475), text: "" });
        play.size.set(1320, 2000);
        play.borderWidth = 2;
        play.borderColor = Color_1.default.WHITE;
        play.backgroundColor = Color_1.default.TRANSPARENT;
        play.onClickEventId = "mainmenu";
        this.receiver.subscribe("mainmenu");
    }
    updateScene() {
        while (this.receiver.hasNextEvent()) {
            this.handleEvent(this.receiver.getNextEvent());
        }
    }
    initBackground() {
        this.bg1 = this.add.sprite(SplashScreen.BACKGROUND_KEY, exports.SplashScreenLayers.BACKGROUND);
        // this.bg1.scale.set(1.75, 1.2);
        this.bg1.position.copy(this.viewport.getCenter());
        // this.bg2 = this.add.sprite(SplashScreen.BACKGROUND_KEY, SplashScreenLayers.BACKGROUND);
        // this.bg2.scale.set(1.5, 1.5);
        // this.bg2.position = this.bg1.position.clone();
        // this.bg2.position.add(this.bg1.sizeWithZoom.scale(2, 0));
    }
    handleEvent(event) {
        switch (event.type) {
            case "mainmenu": {
                this.sceneManager.changeToScene(MainMenu_1.default);
                break;
            }
        }
    }
}
exports.default = SplashScreen;
SplashScreen.BACKGROUND_KEY = "BACKGROUND";
SplashScreen.BACKGROUND_PATH = "hw4_assets/sprites/Splash-Screen.png";

},{"../../Wolfie2D/DataTypes/Vec2":26,"../../Wolfie2D/Nodes/UIElements/UIElementTypes":60,"../../Wolfie2D/Scene/Scene":96,"../../Wolfie2D/Utils/Color":105,"./MainMenu":151}],153:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Game_1 = __importDefault(require("./Wolfie2D/Loop/Game"));
const PlayerController_1 = require("./hw4/AI/Player/PlayerController");
const SplashScreen_1 = __importDefault(require("./hw4/Scenes/SplashScreen"));
// The main function is your entrypoint into Wolfie2D. Specify your first scene and any options here.
(function main() {
    // Run any tests
    runTests();
    // Set up options for our game
    let options = {
        canvasSize: { x: 1320, y: 880 },
        clearColor: { r: 0.1, g: 0.1, b: 0.1 },
        inputs: [
            { name: PlayerController_1.PlayerInput.MOVE_UP, keys: ["w"] },
            { name: PlayerController_1.PlayerInput.MOVE_DOWN, keys: ["s"] },
            { name: PlayerController_1.PlayerInput.MOVE_LEFT, keys: ["a"] },
            { name: PlayerController_1.PlayerInput.MOVE_RIGHT, keys: ["d"] },
            { name: PlayerController_1.PlayerInput.PICKUP_ITEM, keys: ["e"] },
            { name: PlayerController_1.PlayerInput.DROP_ITEM, keys: ["q"] },
            { name: "slot1", keys: ["1"] },
            { name: "slot2", keys: ["2"] },
        ],
        useWebGL: false,
        showDebug: false // Whether to show debug messages. You can change this to true if you want
    };
    // Set up custom registries
    // Create a game with the options specified
    const game = new Game_1.default(options);
    // Start our game
    game.start(SplashScreen_1.default, {});
})();
function runTests() { }
;

},{"./Wolfie2D/Loop/Game":38,"./hw4/AI/Player/PlayerController":121,"./hw4/Scenes/SplashScreen":152}]},{},[153])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvV29sZmllMkQvQUkvQUlNYW5hZ2VyLnRzIiwic3JjL1dvbGZpZTJEL0FJL0dvYXAvR29hcEFjdGlvbi50cyIsInNyYy9Xb2xmaWUyRC9BSS9Hb2FwL0dvYXBBY3Rpb25QbGFubmVyLnRzIiwic3JjL1dvbGZpZTJEL0FJL0dvYXAvR29hcFN0YXRlLnRzIiwic3JjL1dvbGZpZTJEL0FJL0dvYXAvU3RhdGVNYWNoaW5lR29hcEFJLnRzIiwic3JjL1dvbGZpZTJEL0FJL1N0YXRlTWFjaGluZUFJLnRzIiwic3JjL1dvbGZpZTJEL0RhdGFUeXBlcy9Db2xsZWN0aW9ucy9CaW5hcnlIZWFwU2V0LnRzIiwic3JjL1dvbGZpZTJEL0RhdGFUeXBlcy9Db2xsZWN0aW9ucy9NYXAudHMiLCJzcmMvV29sZmllMkQvRGF0YVR5cGVzL0NvbGxlY3Rpb25zL1F1ZXVlLnRzIiwic3JjL1dvbGZpZTJEL0RhdGFUeXBlcy9Db2xsZWN0aW9ucy9TdGFjay50cyIsInNyYy9Xb2xmaWUyRC9EYXRhVHlwZXMvRnVuY3Rpb25zL051bGxGdW5jLnRzIiwic3JjL1dvbGZpZTJEL0RhdGFUeXBlcy9HcmFwaHMvRWRnZU5vZGUudHMiLCJzcmMvV29sZmllMkQvRGF0YVR5cGVzL0dyYXBocy9HcmFwaC50cyIsInNyYy9Xb2xmaWUyRC9EYXRhVHlwZXMvR3JhcGhzL1Bvc2l0aW9uR3JhcGgudHMiLCJzcmMvV29sZmllMkQvRGF0YVR5cGVzL0ludGVyZmFjZXMvUmVnaW9uLnRzIiwic3JjL1dvbGZpZTJEL0RhdGFUeXBlcy9NYXQ0eDQudHMiLCJzcmMvV29sZmllMkQvRGF0YVR5cGVzL1BoeXNpY3MvQXJlYUNvbGxpc2lvbi50cyIsInNyYy9Xb2xmaWUyRC9EYXRhVHlwZXMvUGh5c2ljcy9IaXQudHMiLCJzcmMvV29sZmllMkQvRGF0YVR5cGVzL1JlbmRlcmluZy9XZWJHTFByb2dyYW1UeXBlLnRzIiwic3JjL1dvbGZpZTJEL0RhdGFUeXBlcy9TaGFwZXMvQUFCQi50cyIsInNyYy9Xb2xmaWUyRC9EYXRhVHlwZXMvU2hhcGVzL0NpcmNsZS50cyIsInNyYy9Xb2xmaWUyRC9EYXRhVHlwZXMvU2hhcGVzL1NoYXBlLnRzIiwic3JjL1dvbGZpZTJEL0RhdGFUeXBlcy9TdGF0ZS9TdGF0ZS50cyIsInNyYy9Xb2xmaWUyRC9EYXRhVHlwZXMvU3RhdGUvU3RhdGVNYWNoaW5lLnRzIiwic3JjL1dvbGZpZTJEL0RhdGFUeXBlcy9UaWxlc2V0cy9UaWxlc2V0LnRzIiwic3JjL1dvbGZpZTJEL0RhdGFUeXBlcy9WZWMyLnRzIiwic3JjL1dvbGZpZTJEL0RlYnVnL0RlYnVnLnRzIiwic3JjL1dvbGZpZTJEL0RlYnVnL1N0YXRzLnRzIiwic3JjL1dvbGZpZTJEL0V2ZW50cy9FbWl0dGVyLnRzIiwic3JjL1dvbGZpZTJEL0V2ZW50cy9FdmVudFF1ZXVlLnRzIiwic3JjL1dvbGZpZTJEL0V2ZW50cy9HYW1lRXZlbnQudHMiLCJzcmMvV29sZmllMkQvRXZlbnRzL0dhbWVFdmVudFR5cGUudHMiLCJzcmMvV29sZmllMkQvRXZlbnRzL1JlY2VpdmVyLnRzIiwic3JjL1dvbGZpZTJEL0lucHV0L0lucHV0LnRzIiwic3JjL1dvbGZpZTJEL0lucHV0L0lucHV0SGFuZGxlci50cyIsInNyYy9Xb2xmaWUyRC9Mb29wL0Vudmlyb25tZW50SW5pdGlhbGl6ZXIudHMiLCJzcmMvV29sZmllMkQvTG9vcC9GaXhlZFVwZGF0ZUdhbWVMb29wLnRzIiwic3JjL1dvbGZpZTJEL0xvb3AvR2FtZS50cyIsInNyYy9Xb2xmaWUyRC9Mb29wL0dhbWVMb29wLnRzIiwic3JjL1dvbGZpZTJEL0xvb3AvR2FtZU9wdGlvbnMudHMiLCJzcmMvV29sZmllMkQvTm9kZXMvQ2FudmFzTm9kZS50cyIsInNyYy9Xb2xmaWUyRC9Ob2Rlcy9HYW1lTm9kZS50cyIsInNyYy9Xb2xmaWUyRC9Ob2Rlcy9HcmFwaGljLnRzIiwic3JjL1dvbGZpZTJEL05vZGVzL0dyYXBoaWNzL0dyYXBoaWNUeXBlcy50cyIsInNyYy9Xb2xmaWUyRC9Ob2Rlcy9HcmFwaGljcy9MaW5lLnRzIiwic3JjL1dvbGZpZTJEL05vZGVzL0dyYXBoaWNzL1BhcnRpY2xlLnRzIiwic3JjL1dvbGZpZTJEL05vZGVzL0dyYXBoaWNzL1BvaW50LnRzIiwic3JjL1dvbGZpZTJEL05vZGVzL0dyYXBoaWNzL1JlY3QudHMiLCJzcmMvV29sZmllMkQvTm9kZXMvU3ByaXRlcy9BbmltYXRlZFNwcml0ZS50cyIsInNyYy9Xb2xmaWUyRC9Ob2Rlcy9TcHJpdGVzL1Nwcml0ZS50cyIsInNyYy9Xb2xmaWUyRC9Ob2Rlcy9UaWxlbWFwLnRzIiwic3JjL1dvbGZpZTJEL05vZGVzL1RpbGVtYXBzL0lzb21ldHJpY1RpbGVtYXAudHMiLCJzcmMvV29sZmllMkQvTm9kZXMvVGlsZW1hcHMvT3J0aG9nb25hbFRpbGVtYXAudHMiLCJzcmMvV29sZmllMkQvTm9kZXMvVGlsZW1hcHMvU3RhZ2dlcmVkSXNvbWV0cmljVGlsZW1hcC50cyIsInNyYy9Xb2xmaWUyRC9Ob2Rlcy9VSUVsZW1lbnQudHMiLCJzcmMvV29sZmllMkQvTm9kZXMvVUlFbGVtZW50cy9CdXR0b24udHMiLCJzcmMvV29sZmllMkQvTm9kZXMvVUlFbGVtZW50cy9MYWJlbC50cyIsInNyYy9Xb2xmaWUyRC9Ob2Rlcy9VSUVsZW1lbnRzL1NsaWRlci50cyIsInNyYy9Xb2xmaWUyRC9Ob2Rlcy9VSUVsZW1lbnRzL1RleHRJbnB1dC50cyIsInNyYy9Xb2xmaWUyRC9Ob2Rlcy9VSUVsZW1lbnRzL1VJRWxlbWVudFR5cGVzLnRzIiwic3JjL1dvbGZpZTJEL1BhdGhmaW5kaW5nL05hdmlnYXRpb25NYW5hZ2VyLnRzIiwic3JjL1dvbGZpZTJEL1BhdGhmaW5kaW5nL05hdmlnYXRpb25QYXRoLnRzIiwic3JjL1dvbGZpZTJEL1BhdGhmaW5kaW5nL05hdm1lc2gudHMiLCJzcmMvV29sZmllMkQvUGF0aGZpbmRpbmcvU3RyYXRlZ2llcy9EaXJlY3RTdHJhdGVneS50cyIsInNyYy9Xb2xmaWUyRC9QYXRoZmluZGluZy9TdHJhdGVnaWVzL05hdmlnYXRpb25TdHJhdGVneS50cyIsInNyYy9Xb2xmaWUyRC9QaHlzaWNzL0Jhc2ljUGh5c2ljc01hbmFnZXIudHMiLCJzcmMvV29sZmllMkQvUGh5c2ljcy9QaHlzaWNzTWFuYWdlci50cyIsInNyYy9Xb2xmaWUyRC9QbGF5YmFjay9QbGF5YmFja01hbmFnZXIudHMiLCJzcmMvV29sZmllMkQvUmVnaXN0cnkvUmVnaXN0cmllcy9SZWdpc3RyeS50cyIsInNyYy9Xb2xmaWUyRC9SZWdpc3RyeS9SZWdpc3RyaWVzL1NoYWRlclJlZ2lzdHJ5LnRzIiwic3JjL1dvbGZpZTJEL1JlZ2lzdHJ5L1JlZ2lzdHJ5TWFuYWdlci50cyIsInNyYy9Xb2xmaWUyRC9SZW5kZXJpbmcvQW5pbWF0aW9ucy9BbmltYXRpb25NYW5hZ2VyLnRzIiwic3JjL1dvbGZpZTJEL1JlbmRlcmluZy9BbmltYXRpb25zL0FuaW1hdGlvblR5cGVzLnRzIiwic3JjL1dvbGZpZTJEL1JlbmRlcmluZy9BbmltYXRpb25zL1BhcnRpY2xlU3lzdGVtTWFuYWdlci50cyIsInNyYy9Xb2xmaWUyRC9SZW5kZXJpbmcvQW5pbWF0aW9ucy9Ud2VlbkNvbnRyb2xsZXIudHMiLCJzcmMvV29sZmllMkQvUmVuZGVyaW5nL0FuaW1hdGlvbnMvVHdlZW5NYW5hZ2VyLnRzIiwic3JjL1dvbGZpZTJEL1JlbmRlcmluZy9DYW52YXNSZW5kZXJlci50cyIsInNyYy9Xb2xmaWUyRC9SZW5kZXJpbmcvQ2FudmFzUmVuZGVyaW5nL0dyYXBoaWNSZW5kZXJlci50cyIsInNyYy9Xb2xmaWUyRC9SZW5kZXJpbmcvQ2FudmFzUmVuZGVyaW5nL1RpbGVtYXBSZW5kZXJlci50cyIsInNyYy9Xb2xmaWUyRC9SZW5kZXJpbmcvQ2FudmFzUmVuZGVyaW5nL1VJRWxlbWVudFJlbmRlcmVyLnRzIiwic3JjL1dvbGZpZTJEL1JlbmRlcmluZy9SZW5kZXJpbmdNYW5hZ2VyLnRzIiwic3JjL1dvbGZpZTJEL1JlbmRlcmluZy9XZWJHTFJlbmRlcmVyLnRzIiwic3JjL1dvbGZpZTJEL1JlbmRlcmluZy9XZWJHTFJlbmRlcmluZy9TaGFkZXJUeXBlLnRzIiwic3JjL1dvbGZpZTJEL1JlbmRlcmluZy9XZWJHTFJlbmRlcmluZy9TaGFkZXJUeXBlcy9MYWJlbFNoYWRlclR5cGUudHMiLCJzcmMvV29sZmllMkQvUmVuZGVyaW5nL1dlYkdMUmVuZGVyaW5nL1NoYWRlclR5cGVzL1BvaW50U2hhZGVyVHlwZS50cyIsInNyYy9Xb2xmaWUyRC9SZW5kZXJpbmcvV2ViR0xSZW5kZXJpbmcvU2hhZGVyVHlwZXMvUXVhZFNoYWRlclR5cGUudHMiLCJzcmMvV29sZmllMkQvUmVuZGVyaW5nL1dlYkdMUmVuZGVyaW5nL1NoYWRlclR5cGVzL1JlY3RTaGFkZXJUeXBlLnRzIiwic3JjL1dvbGZpZTJEL1JlbmRlcmluZy9XZWJHTFJlbmRlcmluZy9TaGFkZXJUeXBlcy9TcHJpdGVTaGFkZXJUeXBlLnRzIiwic3JjL1dvbGZpZTJEL1Jlc291cmNlTWFuYWdlci9SZXNvdXJjZU1hbmFnZXIudHMiLCJzcmMvV29sZmllMkQvU2NlbmUvRmFjdG9yaWVzL0NhbnZhc05vZGVGYWN0b3J5LnRzIiwic3JjL1dvbGZpZTJEL1NjZW5lL0ZhY3Rvcmllcy9GYWN0b3J5TWFuYWdlci50cyIsInNyYy9Xb2xmaWUyRC9TY2VuZS9GYWN0b3JpZXMvVGlsZW1hcEZhY3RvcnkudHMiLCJzcmMvV29sZmllMkQvU2NlbmUvTGF5ZXIudHMiLCJzcmMvV29sZmllMkQvU2NlbmUvTGF5ZXJzL1BhcmFsbGF4TGF5ZXIudHMiLCJzcmMvV29sZmllMkQvU2NlbmUvTGF5ZXJzL1VJTGF5ZXIudHMiLCJzcmMvV29sZmllMkQvU2NlbmUvU2NlbmUudHMiLCJzcmMvV29sZmllMkQvU2NlbmUvU2NlbmVNYW5hZ2VyLnRzIiwic3JjL1dvbGZpZTJEL1NjZW5lL1NjZW5lT3B0aW9ucy50cyIsInNyYy9Xb2xmaWUyRC9TY2VuZUdyYXBoL1NjZW5lR3JhcGgudHMiLCJzcmMvV29sZmllMkQvU2NlbmVHcmFwaC9TY2VuZUdyYXBoQXJyYXkudHMiLCJzcmMvV29sZmllMkQvU2NlbmVHcmFwaC9WaWV3cG9ydC50cyIsInNyYy9Xb2xmaWUyRC9Tb3VuZC9BdWRpb01hbmFnZXIudHMiLCJzcmMvV29sZmllMkQvVGltaW5nL1RpbWVyLnRzIiwic3JjL1dvbGZpZTJEL1RpbWluZy9UaW1lck1hbmFnZXIudHMiLCJzcmMvV29sZmllMkQvVXRpbHMvQ29sb3IudHMiLCJzcmMvV29sZmllMkQvVXRpbHMvRWFzZUZ1bmN0aW9ucy50cyIsInNyYy9Xb2xmaWUyRC9VdGlscy9HcmFwaFV0aWxzLnRzIiwic3JjL1dvbGZpZTJEL1V0aWxzL01hdGhVdGlscy50cyIsInNyYy9Xb2xmaWUyRC9VdGlscy9SZW5kZXJpbmdVdGlscy50cyIsInNyYy9Xb2xmaWUyRC9VdGlscy9TdHJpbmdVdGlscy50cyIsInNyYy9odzQvQUkvTlBDL05QQ0FjdGlvbnMvR290b0FjdGlvbi50cyIsInNyYy9odzQvQUkvTlBDL05QQ0FjdGlvbnMvTlBDQWN0aW9uLnRzIiwic3JjL2h3NC9BSS9OUEMvTlBDQWN0aW9ucy9QaWNrdXBJdGVtLnRzIiwic3JjL2h3NC9BSS9OUEMvTlBDQWN0aW9ucy9TaG9vdExhc2VyR3VuLnRzIiwic3JjL2h3NC9BSS9OUEMvTlBDQmVoYXZpb3IudHMiLCJzcmMvaHc0L0FJL05QQy9OUENCZWhhdmlvci9HYXVyZEJlaGF2aW9yLnRzIiwic3JjL2h3NC9BSS9OUEMvTlBDU3RhdHVzZXMvRmFsc2VTdGF0dXMudHMiLCJzcmMvaHc0L0FJL05QQy9OUENTdGF0dXNlcy9IYXNJdGVtLnRzIiwic3JjL2h3NC9BSS9OUEMvTlBDU3RhdHVzZXMvVGFyZ2V0RXhpc3RzLnRzIiwic3JjL2h3NC9BSS9QbGF5ZXIvUGxheWVyQUkudHMiLCJzcmMvaHc0L0FJL1BsYXllci9QbGF5ZXJDb250cm9sbGVyLnRzIiwic3JjL2h3NC9BSS9QbGF5ZXIvUGxheWVyU3RhdGVzL0RlYWQudHMiLCJzcmMvaHc0L0FJL1BsYXllci9QbGF5ZXJTdGF0ZXMvSWRsZS50cyIsInNyYy9odzQvQUkvUGxheWVyL1BsYXllclN0YXRlcy9JbnZpbmNpYmxlLnRzIiwic3JjL2h3NC9BSS9QbGF5ZXIvUGxheWVyU3RhdGVzL01vdmluZy50cyIsInNyYy9odzQvQUkvUGxheWVyL1BsYXllclN0YXRlcy9QbGF5ZXJTdGF0ZS50cyIsInNyYy9odzQvQWN0b3JzL05QQ0FjdG9yLnRzIiwic3JjL2h3NC9BY3RvcnMvUGxheWVyQWN0b3IudHMiLCJzcmMvaHc0L0V2ZW50cy50cyIsInNyYy9odzQvR2FtZVN5c3RlbXMvQmF0dGxlU3lzdGVtL0Jhc2ljQmF0dGxlci50cyIsInNyYy9odzQvR2FtZVN5c3RlbXMvSFVEL0hlYWx0aGJhckhVRC50cyIsInNyYy9odzQvR2FtZVN5c3RlbXMvSXRlbVN5c3RlbS9JbnZlbnRvcnkudHMiLCJzcmMvaHc0L0dhbWVTeXN0ZW1zL0l0ZW1TeXN0ZW0vSXRlbS50cyIsInNyYy9odzQvR2FtZVN5c3RlbXMvSXRlbVN5c3RlbS9JdGVtcy9IZWFsdGhwYWNrLnRzIiwic3JjL2h3NC9HYW1lU3lzdGVtcy9JdGVtU3lzdGVtL0l0ZW1zL0xhc2VyR3VuLnRzIiwic3JjL2h3NC9HYW1lU3lzdGVtcy9TZWFyY2hpbmcvQmFzaWNGaW5kZXIudHMiLCJzcmMvaHc0L0dhbWVTeXN0ZW1zL1NlYXJjaGluZy9IVzRGaWx0ZXJzLnRzIiwic3JjL2h3NC9HYW1lU3lzdGVtcy9TZWFyY2hpbmcvSFc0UmVkdWNlcnMudHMiLCJzcmMvaHc0L0dhbWVTeXN0ZW1zL1RhcmdldGluZy9CYXNpY1RhcmdldGFibGUudHMiLCJzcmMvaHc0L0dhbWVTeXN0ZW1zL1RhcmdldGluZy9CYXNpY1RhcmdldGluZy50cyIsInNyYy9odzQvUGF0aGZpbmRpbmcvQXN0YXJTdHJhdGVneS50cyIsInNyYy9odzQvU2NlbmVzL0ZpbmFsUHJvamVjdFNjZW5lLnRzIiwic3JjL2h3NC9TY2VuZXMvR2FtZU92ZXIudHMiLCJzcmMvaHc0L1NjZW5lcy9IVzRTY2VuZS50cyIsInNyYy9odzQvU2NlbmVzL0xhc3RTY2VuZS50cyIsInNyYy9odzQvU2NlbmVzL0xldmVsMVNjZW5lLnRzIiwic3JjL2h3NC9TY2VuZXMvTGV2ZWwyU2NlbmUudHMiLCJzcmMvaHc0L1NjZW5lcy9MZXZlbDNTY2VuZS50cyIsInNyYy9odzQvU2NlbmVzL0xldmVsNFNjZW5lLnRzIiwic3JjL2h3NC9TY2VuZXMvTGV2ZWw1U2NlbmUudHMiLCJzcmMvaHc0L1NjZW5lcy9NYWluTWVudS50cyIsInNyYy9odzQvU2NlbmVzL1NwbGFzaFNjcmVlbi50cyIsInNyYy9tYWluLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7QUNJQSx1RUFBK0M7QUFFL0M7OztHQUdHO0FBQ0gsTUFBcUIsU0FBUztJQU03QjtRQUNDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQztRQUMxQixJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksYUFBRyxFQUFFLENBQUM7SUFDL0IsQ0FBQztJQUVEOzs7T0FHRztJQUNILGFBQWEsQ0FBQyxLQUFZO1FBQ3pCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3pCLENBQUM7SUFFRCxXQUFXLENBQUMsS0FBWTtRQUN2QixJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUV2QyxJQUFHLEtBQUssS0FBSyxDQUFDLENBQUMsRUFBQztZQUNmLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztTQUM3QjtJQUNGLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsVUFBVSxDQUFDLElBQVksRUFBRSxNQUEwQztRQUNsRSxJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDckMsQ0FBQztJQUVEOzs7O09BSUc7SUFDSCxVQUFVLENBQUMsSUFBWTtRQUN0QixJQUFHLElBQUksQ0FBQyxZ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QUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUs7WUFDdEgsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSztZQUNoSCxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLO1lBQ2xILElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FB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LENBQUMsU0FBUyxFQUFFLENBQUM7UUFDckIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ3hCLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsYUFBYSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1FBQzdDLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDckIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNsQixJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsYUFBYSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1FBQzdDLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFZLEdBQUcsRUFBRSxFQUFFLElBQUksQ0FBQyxhQUFhLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDakUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUNyQixJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBRWxCLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQztRQUM3QixJQUFJLEtBQUssR0FBRyxFQUFFLENBQUM7UUFDZixJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsYUFBYSxHQUFHLEVBQUUsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUMsR0FBRyxHQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsR0FBQyxFQUFFLENBQUMsQ0FBQztRQUMzRSxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7UUFFN0IsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUM7WUFDakMs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SUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBRWpCLE1BQU07WUFDTixJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDdEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUMxQixJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUV0QyxRQUFRO1lBQ1IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDOUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUU5QyxTQUFTO1lBQ1QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMxQixJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUV0QyxPQUFPO1lBQ1AsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ3RCLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtZQUU3QixJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDckIsQ0FBQyxDQUFB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Q0FBQyxDQUFDO1FBQ25ELElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBQzNFLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckUsT0FBTyxJQUFJLGNBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDMUIsQ0FBQztJQUNlLGtCQUFrQixDQUFDLENBQVMsRUFBRSxDQUFTO1FBQ25ELElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ25ELElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEcsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztR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RyxlQUFLLENBQUMsV0FBVyxDQUFDO1FBQ3JELElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxHQUFHLGVBQUssQ0FBQyxLQUFLLENBQUM7UUFDM0MsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDO1FBQ2pDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVEOzs7T0FHRztJQUNJLE1BQU0sQ0FBQyxNQUFjO1FBRXhCLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDbkUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUVyRSxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ3RDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNsQyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFcEMsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDO1FBQ2hFLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMs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QUF5RTtRQUV6RSxJQUFHLGVBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsRUFBQztZQUMzQixJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUM1QixJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNsQyxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxxQkFBVyxDQUFDLENBQUM7U0FDL0M7UUFDRCxJQUFHLGVBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsRUFBQztZQUM1QixJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUM1QixJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNsQyxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxxQkFBVyxDQUFDLENBQUM7U0FDL0M7UUFDRCxJQUFHLGVBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsRUFBQztZQUM1QixJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUM1QixJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNsQyxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxxQkFBVyxDQUFDLENBQUM7U0FDL0M7UUFDRCxJQUFHLGVBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsRUFBQztZQUM1QixJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUM1QixJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNsQyxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxxQkFBVyxDQUFDLENBQUM7U0FDL0M7UUFDRCxJQUFHLGVBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsRUFBQztZQUM1QixJQUFJLENBQUMsUUFB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QUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQzNFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLG1CQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUMzRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsbUJBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsbUJBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQzlHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxtQkFBUyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxtQkFBUyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDOUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLG1CQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLG1CQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FB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LENBQUMsQ0FBQztTQUMvQztRQUNELElBQUcsZUFBSyxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxFQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLHFCQUFXLENBQUMsQ0FBQztTQUMvQztRQUNELElBQUcsZUFBSyxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxFQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLHFCQUFXLENBQUMsQ0FBQztTQUMvQztRQUNELElBQUcsZUFBSyxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxFQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLHFCQUFXLENBQUMsQ0FBQztTQUMvQztRQUNELElBQUcsZUFBSyxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxFQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1NBQzdDO1FBRUQsSUFBRyxlQUFLLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLEVBQUM7WUFDNUIsSUFB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QUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUMzRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxtQkFBUyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDM0UsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsbUJBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQzNFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxtQkFBUyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxtQkFBUyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDOUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLG1CQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLG1CQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUM5RyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsbUJBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMs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QUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDM0UsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsbUJBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQzNFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLG1CQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUMzRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsbUJBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsbUJBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQzlHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxtQkFBUyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxtQkFBUyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDOUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLG1CQUFT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LENBQUMsVUFBVSxDQUFDLFFBQVEsRUFBRSxFQUFDO1lBQ3RCLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyx1REFBdUQ7U0FDcEg7UUFFRCxJQUFHLGVBQUssQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLEVBQUM7WUFDbkIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDckM7UUFFRCxJQUFHLGVBQUssQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLEVBQUM7WUFDdkIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDaEM7UUFFRCxJQUFHLGVBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsRUFBQztZQUM1QixJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUM1QixJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNsQyxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxxQkFBVyxDQUFDLENBQUM7U0FDL0M7UUFDRCxJQUFHLGVBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsRUFBQztZQUM1QixJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUM1QixJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNsQyxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxxQkFBVyxDQUFDLENBQUM7U0FDL0M7UUFDRCxJQUFHLGVBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsRUFBQztZQUM1QixJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUM1QixJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FB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LEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxtQkFBUyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUMzRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsbUJBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDM0UsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsbUJBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQzNFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLG1CQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUMzRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsbUJBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsbUJBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQzlHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxt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UUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNsQyxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxxQkFBVyxDQUFDLENBQUM7U0FDL0M7UUFDRCxJQUFHLGVBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsRUFBQztZQUM1QixJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUM1QixJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNsQyxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxxQkFBVyxDQUFDLENBQUM7U0FDL0M7UUFDRCxJQUFHLGVBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsRUFBQztZQUM1QixJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUM1QixJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNsQyxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUMsQ0FBQztTQUMvQztRQUNELElBQUcsZUFBSyxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxFQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLHFCQUFXLENBQUMsQ0FBQztTQUMvQztRQUNELElBQUcsZUFBSyxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxFQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLG1C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Q0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLHFCQUFXLENBQUMsQ0FBQztTQUMvQztRQUNELElBQUcsZUFBSyxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxFQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLHFCQUFXLENBQUMsQ0FBQztTQUMvQztRQUNELElBQUcsZUFBSyxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxFQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLHFCQUFXLENBQUMsQ0FBQztTQUMvQztRQUNELElBQUcsZUFBSyxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxFQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLHFCQUFXLENBQUMsQ0FBQztTQUMvQztRQUNELElBQUcsZUFBSyxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxFQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxD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QUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQzNFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLG1CQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUMzRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsbUJBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsbUJBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQzlHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxtQkFBUyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxtQkFBUyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDOUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLG1CQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLG1CQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFB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QyxHQUFHLENBQUMsRUFBQztZQUMzQyxFQUFDLElBQUksRUFBRSw4QkFBVyxDQUFDLFdBQVcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBQztZQUM1QyxFQUFDLElBQUksRUFBRSw4QkFBVyxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBQztZQUMxQyxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUM7WUFDNUIsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFDO1NBQy9CO1FBQ0QsUUFBUSxFQUFFLEtBQUs7UUFDZixTQUFTLEVBQUUsS0FBSyxDQUFzQiwwRUFBMEU7S0FDbkgsQ0FBQTtJQUVELDJCQUEyQjtJQUUzQiwyQ0FBMkM7SUFDM0MsTUFBTSxJQUFJLEdBQUcsSUFBSSxjQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsaUJBQWlCO0lBQ2pCLElBQUksQ0FBQyxLQUFLLENBQUMsc0JBQVksRUFBRSxFQUFFLENBQUMsQ0FBQztBQUVqQyxDQUFDLENBQUMsRUFBRSxDQUFDO0FBRUwsU0FBUyxRQUFRLEtBQUcsQ0FBQztBQUFBLENBQUMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgQWN0b3IgZnJvbSBcIi4uL0RhdGFUeXBlcy9JbnRlcmZhY2VzL0FjdG9yXCI7XG5pbXBvcnQgVXBkYXRlYWJsZSBmcm9tIFwiLi4vRGF0YVR5cGVzL0ludGVyZmFjZXMvVXBkYXRlYWJsZVwiO1xuaW1wb3J0IEFJIGZyb20gXCIuLi9EYXRhVHlwZXMvSW50ZXJmYWNlcy9BSVwiO1xuaW1wb3J0IEdvYXBBSSBmcm9tIFwiLi4vRGF0YVR5cGVzL0dvYXAvR29hcEFJXCJcbmltcG9ydCBNYXAgZnJvbSBcIi4uL0RhdGFUeXBlcy9Db2xsZWN0aW9ucy9NYXBcIjtcblxuLyoqXG4gKiBBIG1hbmFnZXIgY2xhc3MgZm9yIGFsbCBvZiB0aGUgQUkgaW4gYSBzY2VuZS5cbiAqIEtlZXBzIGEgbGlzdCBvZiByZWdpc3RlcmVkIGFjdG9ycyBhbmQgaGFuZGxlcyBBSSBnZW5lcmF0aW9uIGZvciBhY3RvcnMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFJTWFuYWdlciBpbXBsZW1lbnRzIFVwZGF0ZWFibGUge1xuXHQvKiogVGhlIGFycmF5IG9mIHJlZ2lzdGVyZWQgYWN0b3JzICovXG5cdGFjdG9yczogQXJyYXk8QWN0b3I+O1xuXHQvKiogTWFwcyBBSSBuYW1lcyB0byB0aGVpciBjb25zdHJ1Y3RvcnMgKi9cblx0cmVnaXN0ZXJlZEFJOiBNYXA8QUlDb25zdHJ1Y3Rvcj47XG5cblx0Y29uc3RydWN0b3IoKXtcblx0XHR0aGlzLmFjdG9ycyA9IG5ldyBBcnJheSgpO1xuXHRcdHRoaXMucmVnaXN0ZXJlZEFJID0gbmV3IE1hcCgpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlZ2lzdGVycyBhbiBhY3RvciB3aXRoIHRoZSBBSU1hbmFnZXJcblx0ICogQHBhcmFtIGFjdG9yIFRoZSBhY3RvciB0byByZWdpc3RlclxuXHQgKi9cblx0cmVnaXN0ZXJBY3RvcihhY3RvcjogQWN0b3IpOiB2b2lkIHtcblx0XHR0aGlzLmFjdG9ycy5wdXNoKGFjdG9yKTtcblx0fVxuXG5cdHJlbW92ZUFjdG9yKGFjdG9yOiBBY3Rvcik6IHZvaWQge1xuXHRcdGxldCBpbmRleCA9IHRoaXMuYWN0b3JzLmluZGV4T2YoYWN0b3IpO1xuXG5cdFx0aWYoaW5kZXggIT09IC0xKXtcblx0XHRcdHRoaXMuYWN0b3JzLnNwbGljZShpbmRleCwgMSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFJlZ2lzdGVycyBhbiBBSSB3aXRoIHRoZSBBSU1hbmFnZXIgZm9yIHVzZSBsYXRlciBvblxuXHQgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgQUkgdG8gcmVnaXN0ZXJcblx0ICogQHBhcmFtIGNvbnN0ciBUaGUgY29uc3RydWN0b3IgZm9yIHRoZSBBSVxuXHQgKi9cblx0cmVnaXN0ZXJBSShuYW1lOiBzdHJpbmcsIGNvbnN0cjogbmV3IDxUIGV4dGVuZHMgQUkgfCBHb2FwQUk+KCkgPT4gVCApOiB2b2lkIHtcblx0XHR0aGlzLnJlZ2lzdGVyZWRBSS5hZGQobmFtZSwgY29uc3RyKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZW5lcmF0ZXMgYW4gQUkgaW5zdGFuY2UgZnJvbSBpdHMgbmFtZVxuXHQgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgQUkgdG8gYWRkXG5cdCAqIEByZXR1cm5zIEEgbmV3IEFJIGluc3RhbmNlXG5cdCAqL1xuXHRnZW5lcmF0ZUFJKG5hbWU6IHN0cmluZyk6IEFJIHwgR29hcEFJIHtcblx0XHRpZih0aGlzLnJlZ2lzdGVyZWRBSS5oYXMobmFtZSkpe1xuXHRcdFx0cmV0dXJuIG5ldyAodGhpcy5yZWdpc3RlcmVkQUkuZ2V0KG5hbWUpKSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBgQ2Fubm90IGNyZWF0ZSBBSSB3aXRoIG5hbWUgJHtuYW1lfSwgbm8gQUkgd2l0aCB0aGF0IG5hbWUgaXMgcmVnaXN0ZXJlZGA7XG5cdFx0fVxuXHR9XG5cblx0dXBkYXRlKGRlbHRhVDogbnVtYmVyKTogdm9pZCB7XG5cdFx0Ly8gUnVuIHRoZSBhaSBmb3IgZXZlcnkgYWN0aXZlIGFjdG9yXG5cdFx0dGhpcy5hY3RvcnMuZm9yRWFjaChhY3RvciA9PiB7IGlmKGFjdG9yLmFpQWN0aXZlKSBhY3Rvci5haS51cGRhdGUoZGVsdGFUKSB9KTtcblx0fVxufVxuXG50eXBlIEFJQ29uc3RydWN0b3IgPSBuZXcgPFQgZXh0ZW5kcyBBST4oKSA9PiBUOyIsImltcG9ydCBBY3RvciBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL0ludGVyZmFjZXMvQWN0b3JcIjtcbmltcG9ydCBTdGF0ZSBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL1N0YXRlL1N0YXRlXCI7XG5pbXBvcnQgU3RhdGVNYWNoaW5lR29hcEFJIGZyb20gXCIuL1N0YXRlTWFjaGluZUdvYXBBSVwiO1xuXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBHb2FwQWN0aW9uIGV4dGVuZHMgU3RhdGUge1xuXG4gICAgcHJvdGVjdGVkIHBhcmVudDogU3RhdGVNYWNoaW5lR29hcEFJPEdvYXBBY3Rpb24+XG4gICAgcHJvdGVjdGVkIGFjdG9yOiBBY3RvcjtcblxuICAgIHByb3RlY3RlZCBfcHJlY29uZGl0aW9uczogU2V0PHN0cmluZz47XG4gICAgcHJvdGVjdGVkIF9lZmZlY3RzOiBTZXQ8c3RyaW5nPjtcbiAgICBwcm90ZWN0ZWQgX2Nvc3Q6IG51bWJlcjtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihwYXJlbnQ6IFN0YXRlTWFjaGluZUdvYXBBSTxHb2FwQWN0aW9uPiwgYWN0b3I6IEFjdG9yKSB7XG4gICAgICAgIHN1cGVyKHBhcmVudCk7XG4gICAgICAgIHRoaXMuYWN0b3IgPSBhY3RvcjtcbiAgICAgICAgdGhpcy5fcHJlY29uZGl0aW9ucyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgICAgICB0aGlzLl9lZmZlY3RzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgICAgIHRoaXMuX2Nvc3QgPSAwO1xuICAgIH1cblxuICAgIC8qKiBDb3N0IGl0IHRha2VzIHRvIGNvbXBsZXRlIHRoaXMgYWN0aW9uICovXG4gICAgZ2V0IGNvc3QoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2Nvc3Q7IH1cbiAgICBzZXQgY29zdChjb3N0OiBudW1iZXIpIHsgdGhpcy5fY29zdCA9IGNvc3Q7IH1cblxuICAgIC8qKiBQcmVjb25kaXRpb25zIHRoYXQgaGF2ZSB0byBiZSBzYXRpc2ZpZWQgZm9yIGFuIGFjdGlvbiB0byBoYXBwZW4gKi9cbiAgICBnZXQgcHJlY29uZGl0aW9ucygpOiBzdHJpbmdbXSB7IHJldHVybiBBcnJheS5mcm9tKHRoaXMuX3ByZWNvbmRpdGlvbnMudmFsdWVzKCkpOyB9O1xuXG4gICAgLyoqIFJlc3VsdGluZyBzdGF0dXNlcyBhZnRlciB0aGlzIGFjdGlvbiBjb21wbGV0ZXMgKi9cbiAgICBnZXQgZWZmZWN0cygpOiBzdHJpbmdbXSB7IHJldHVybiBBcnJheS5mcm9tKHRoaXMuX2VmZmVjdHMudmFsdWVzKCkpOyB9XG5cbiAgICBwdWJsaWMgY2hlY2tQcmVjb25kaXRpb25zKHN0YXR1czogc3RyaW5nW10pOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5fcHJlY29uZGl0aW9ucy52YWx1ZXMoKSkuZXZlcnkocHJlY29uZGl0aW9uID0+IHN0YXR1cy5pbmNsdWRlcyhwcmVjb25kaXRpb24pKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkUHJlY29uZGl0aW9uKHN0YXR1czogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX3ByZWNvbmRpdGlvbnMuYWRkKHN0YXR1cyk7XG4gICAgfVxuICAgIHB1YmxpYyBhZGRFZmZlY3Qoc3RhdHVzOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fZWZmZWN0cy5hZGQoc3RhdHVzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb3ZlcnJpZGUgZmluaXNoZWQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucGFyZW50LmNoYW5nZVN0YXRlKCk7XG4gICAgfVxuXG59XG5cbmV4cG9ydCBlbnVtIEdvYXBBY3Rpb25TdGF0dXMge1xuICAgIEZBSUxVUkUgPSAwLFxuICAgIFNVQ0NFU1MgPSAxLFxuICAgIFJVTk5JTkcgPSAyXG59IiwiaW1wb3J0IEdyYXBoIGZyb20gXCIuLi8uLi9EYXRhVHlwZXMvR3JhcGhzL0dyYXBoXCI7XG5pbXBvcnQgR29hcEFjdGlvbiBmcm9tIFwiLi9Hb2FwQWN0aW9uXCI7XG5pbXBvcnQgU3RhY2sgZnJvbSBcIi4uLy4uL0RhdGFUeXBlcy9Db2xsZWN0aW9ucy9TdGFja1wiO1xuaW1wb3J0IEdyYXBoVXRpbHMgZnJvbSBcIi4uLy4uL1V0aWxzL0dyYXBoVXRpbHNcIjtcbmltcG9ydCBBSSBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL0ludGVyZmFjZXMvQUlcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR29hcEFjdGlvblBsYW5uZXIge1xuICAgIFxuICAgIHB1YmxpYyBzdGF0aWMgcGxhbjxUIGV4dGVuZHMgR29hcEFjdGlvbj4oc3RhdHVzOiBzdHJpbmdbXSwgZ29hbDogc3RyaW5nLCBhY3Rpb25zOiBBcnJheTxUPik6IFN0YWNrPFQ+IHtcbiAgICAgICAgbGV0IGdyYXBoOiBHcmFwaCA9IG5ldyBHcmFwaCh0cnVlKTtcbiAgICAgICAgbGV0IG1hcHBpbmc6IE1hcDxudW1iZXIsIFQgfCBzdHJpbmc+ID0gbmV3IE1hcCgpO1xuXG4gICAgICAgIC8vMCBpcyBvdXIgcm9vdFxuICAgICAgICBncmFwaC5hZGROb2RlKCk7XG4gICAgICAgIG1hcHBpbmcuc2V0KDAsXCJTdGFydFwiKTtcbiAgICAgICAgLy8xIGlzIHRoZSBnb2FsXG4gICAgICAgIGdyYXBoLmFkZE5vZGUoKTtcbiAgICAgICAgbWFwcGluZy5zZXQoMSxcIkdvYWxcIik7XG4gICAgICAgIGdyYXBoLmFkZEVkZ2UoMSwxLE51bWJlci5QT1NJVElWRV9JTkZJTklUWSk7XG5cbiAgICAgICAgLy9CdWlsZCB0cmVlIGZyb20gMCB0byAxXG4gICAgICAgIHRoaXMuYnVpbGRUcmVlPFQ+KHN0YXR1cywgYWN0aW9ucywgMCwgZ29hbCwgbWFwcGluZywgZ3JhcGgpO1xuXG4gICAgICAgIC8vUnVuIGRqaWtzdHJhIHRvIGZpbmQgc2hvcnRlc3QgcGF0aFxuICAgICAgICBsZXQgcGF0aDogQXJyYXk8bnVtYmVyPiA9IEdyYXBoVXRpbHMuZGppa3N0cmEoZ3JhcGgsIDApO1xuXG4gICAgICAgIC8vUHVzaCBhbGwgZWxlbWVudHMgb2YgdGhlIHBsYW5cbiAgICAgICAgbGV0IHBsYW4gPSBuZXcgU3RhY2s8VD4oKTtcblx0XHRcblx0XHRsZXQgaSA9IDE7XG5cdFx0d2hpbGUocGF0aFtpXSAhPT0gLTEpe1xuICAgICAgICAgICAgaWYgKHBhdGhbaV0gIT09IDApe1xuXHRcdFx0ICAgIHBsYW4ucHVzaCg8VD5tYXBwaW5nLmdldChwYXRoW2ldKSk7XG4gICAgICAgICAgICB9XG5cdFx0XHRpID0gcGF0aFtpXTtcblx0XHR9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcGxhbjtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBidWlsZFRyZWUgIDxUIGV4dGVuZHMgR29hcEFjdGlvbj4gKHN0YXR1czogc3RyaW5nW10sIGFjdGlvbnM6IEFycmF5PFQ+LCByb290OiBudW1iZXIsIGdvYWw6IHN0cmluZywgbWFwcGluZzogTWFwPG51bWJlciwgVCB8IHN0cmluZz4sIGdyYXBoOiBHcmFwaCk6IHZvaWQge1xuICAgICAgICAvL0ZvciBlYWNoIHBvc3NpYmxlIGFjdGlvbiBcbiAgICAgICAgYWN0aW9ucy5mb3JFYWNoKGFjdGlvbiA9PiB7XG4gICAgICAgICAgICAvL0NhbiBpdCBiZSBwZXJmb3JtZWQ/XG4gICAgICAgICAgICBpZiAoYWN0aW9uLmNoZWNrUHJlY29uZGl0aW9ucyhzdGF0dXMpKXtcbiAgICAgICAgICAgICAgICAvL1RoaXMgYWN0aW9uIGNhbiBiZSBwZXJmb3JtZWRcbiAgICAgICAgICAgICAgICAvL0FkZCBlZmZlY3RzIHRvIGN1cnJlbnRTdGF0dXNcbiAgICAgICAgICAgICAgICBsZXQgbmV3U3RhdHVzID0gWy4uLnN0YXR1c107XG4gICAgICAgICAgICAgICAgbmV3U3RhdHVzLnB1c2goLi4uYWN0aW9uLmVmZmVjdHMpO1xuXG4gICAgICAgICAgICAgICAgLy9DaGVjayBpZiB0aGUgbmV3IG5vZGUgaXMgdGhlIGdvYWxcbiAgICAgICAgICAgICAgICBpZiAobmV3U3RhdHVzLmluY2x1ZGVzKGdvYWwpKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld05vZGUgPSBncmFwaC5hZGROb2RlKCk7XG4gICAgICAgICAgICAgICAgICAgIG1hcHBpbmcuc2V0KG5ld05vZGUsIGFjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGdyYXBoLmFkZEVkZ2Uocm9vdCwgbmV3Tm9kZSwgYWN0aW9uLmNvc3QpO1xuICAgICAgICAgICAgICAgICAgICBncmFwaC5hZGRFZGdlKG5ld05vZGUsIDEsIDApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9BZGQgbm9kZSBhbmQgZWRnZSBmcm9tIHJvb3RcbiAgICAgICAgICAgICAgICBsZXQgbmV3Tm9kZSA9IGdyYXBoLmFkZE5vZGUoKTtcbiAgICAgICAgICAgICAgICBtYXBwaW5nLnNldChuZXdOb2RlLCBhY3Rpb24pO1xuICAgICAgICAgICAgICAgIGdyYXBoLmFkZEVkZ2Uocm9vdCwgbmV3Tm9kZSwgYWN0aW9uLmNvc3QpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vUmVjdXJzaXZlIGNhbGxcbiAgICAgICAgICAgICAgICBsZXQgbmV3QWN0aW9ucyA9IGFjdGlvbnMuZmlsdGVyKGFjdCA9PiBhY3QgIT09IGFjdGlvbilcbiAgICAgICAgICAgICAgICB0aGlzLmJ1aWxkVHJlZShuZXdTdGF0dXMsIG5ld0FjdGlvbnMsIG5ld05vZGUsIGdvYWwsIG1hcHBpbmcsIGdyYXBoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSIsImltcG9ydCBBY3RvciBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL0ludGVyZmFjZXMvQWN0b3JcIjtcblxuLyoqXG4gKiBBIHN0YXRlIGZvciBhIEdvYXBBSS4gVGhlIFwic3RhdGVcIiBpcyBub3QgdGhlIHNhbWUgYXMgYSBzdGF0ZSBpbiBhIHN0YXRlIG1hY2hpbmUsIG9yIHNvbWV0aGluZyBvZiB0aGF0IG5hdHVyZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgR29hcFN0YXRlIHtcblxuICAgIHB1YmxpYyBhYnN0cmFjdCBpc1NhdGlzZmllZCgpOiBib29sZWFuO1xuICAgIFxufSIsImltcG9ydCBTdGFjayBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL0NvbGxlY3Rpb25zL1N0YWNrXCI7XG5pbXBvcnQgR29hcEFjdGlvbiBmcm9tIFwiLi9Hb2FwQWN0aW9uXCI7XG5pbXBvcnQgR29hcEFjdGlvblBsYW5uZXIgZnJvbSBcIi4vR29hcEFjdGlvblBsYW5uZXJcIlxuaW1wb3J0IEdhbWVFdmVudCBmcm9tIFwiLi4vLi4vRXZlbnRzL0dhbWVFdmVudFwiO1xuaW1wb3J0IEdhbWVOb2RlIGZyb20gXCIuLi8uLi9Ob2Rlcy9HYW1lTm9kZVwiO1xuaW1wb3J0IEFJIGZyb20gXCIuLi8uLi9EYXRhVHlwZXMvSW50ZXJmYWNlcy9BSVwiO1xuaW1wb3J0IE1hcCBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL0NvbGxlY3Rpb25zL01hcFwiO1xuaW1wb3J0IEFjdG9yIGZyb20gXCIuLi8uLi9EYXRhVHlwZXMvSW50ZXJmYWNlcy9BY3RvclwiO1xuaW1wb3J0IEdvYXBTdGF0ZSBmcm9tIFwiLi9Hb2FwU3RhdGVcIjtcbmltcG9ydCBTdGF0ZU1hY2hpbmVBSSBmcm9tIFwiLi4vU3RhdGVNYWNoaW5lQUlcIjtcblxuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBiYXNpYyBHb2FwIGJlaGF2aW9yLlxuICogXG4gKiBHT0FQIHJlcXVpcmVzIGEgbG90IG9mIG92ZXJoZWFkIGZvciBtYW5hZ2luZyBhbGwgb2YgdGhlIHN5bWJvbHMgKHN0YXR1c2VzIGFuZCBnb2FscyksIHRoZVxuICogYWN0dWFsIGdvYXAtYWN0aW9ucywgYW5kIGNyZWF0aW5nIHRoZSBhY3Rpb24gcGxhbnMuIFxuICogXG4gKiBJJ3ZlIG9wdGVkIHRvIHRyeSBhbmQgZXh0ZW5kIHRoZSBTdGF0ZU1hY2hpbmVBSSBmb3IgdGhpcyBjbGFzcywgbW9zdGx5IHRvIHRyeSBhbmQga2VlcCB0aGluZ3NcbiAqIHNpbWlsYXIgdG8gdGhlIFN0YXRlTWFjaGluZUFJLiBNeSBTdGF0ZU1hY2hpbmVHb2FwQUkgY2xhc3Mga2luZCBvZiBicmVha3MgTFNQIChMaXNrb3YncyBzdWJzdGl0dXRpb24gcHJpbmNpcGxlKVxuICogd2hpY2ggY3VlcyBtZSBpbnRvIHRoZSBmYWN0IHRoYXQgSSBzaG91bGQgcHJvYmFibHkgbWFrZSBhIHNlcGVyYXRlIGNsYXNzLlxuICogXG4gKiBTb21ldGhpbmcgSSdkIGxpa2UgdG8gYWRkIGlzIGFuIGFkZGl0aW9uYWwgY2xhc3MgZm9yIG1hbmFnaW5nIGEgc2V0IG9mIGdvYWxzLiBUaGUgZ29hbHMgXG4gKiBhcmUgcHJldHR5IHNpbWlsYXIgdG8gc3RhdHVzZXMsIGV4Y2VwdCB0aGF0IGdvYWxzIGhhdmUgc29tZSBraW5kIG9mZiBwcmlvcml0eSBhc3NvY2lhdGVkXG4gKiB3aXRoIHRoZW0uIE5vdCBzdXJlIGhvdyB3ZSdkIGRvIHRoaXMuXG4gKiBcbiAqIEBhdXRob3IgUGV0ZXIgV2Fsc2hcbiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgU3RhdGVNYWNoaW5lR29hcEFJPFQgZXh0ZW5kcyBHb2FwQWN0aW9uPiBleHRlbmRzIFN0YXRlTWFjaGluZUFJIHtcblxuICAgIC8qKiBUaGUgcGFyZW50IEFjdG9yIG9mIHRoaXMgR29hcEFJICovXG4gICAgcHJvdGVjdGVkIG93bmVyOiBHYW1lTm9kZTtcblxuICAgIC8qKiBUaGUgZ29hbC9zdGF0dXMgd2UncmUgdHJ5aW5nIHRvIHJlYWNoICovXG4gICAgcHJvdGVjdGVkIGdvYWw6IHN0cmluZztcbiAgICAvKiogQWxsIHN0YXR1c2VzIGZvciB0aGlzIEdvYXBBSSAqL1xuICAgIHByb3RlY3RlZCBzdGF0dXNlczogTWFwPEdvYXBTdGF0ZT5cbiAgICAvKiogQWxsIG9mIHRoZSBhY3Rpb24gdGhlIEdPQVAgQUkgY2FuIHBlcmZvcm0gKi9cbiAgICBwcm90ZWN0ZWQgc3RhdGVNYXA6IE1hcDxUPjtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zdGF0dXNlcyA9IG5ldyBNYXA8R29hcFN0YXRlPigpO1xuICAgICAgICB0aGlzLnN0YXRlTWFwID0gbmV3IE1hcDxUPigpO1xuICAgICAgICB0aGlzLnN0YWNrID0gbmV3IFN0YWNrPFQ+KCk7XG4gICAgICAgIHRoaXMuZ29hbCA9IG51bGw7XG4gICAgfVxuXG5cbiAgICBwdWJsaWMgdXBkYXRlKGRlbHRhVDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHN1cGVyLnVwZGF0ZShkZWx0YVQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvdmVycmlkZSBpbml0aWFsaXplKCk6IHZvaWQge1xuICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBBSSBieSBidWlsZGluZyBhIHBsYW4gZnJvbSB0aGUgdGhlIGN1cnJlbnQgYWN0aW9uc1xuICAgICAgICB0aGlzLnN0YWNrID0gdGhpcy5idWlsZFBsYW4oKTtcbiAgICAgICAgdGhpcy5jdXJyZW50U3RhdGUgPSB0aGlzLnN0YWNrLnBlZWsoKTtcbiAgICAgICAgdGhpcy5jdXJyZW50U3RhdGUub25FbnRlcih7fSk7XG4gICAgICAgIHRoaXMuc2V0QWN0aXZlKHRydWUpO1xuICAgIH1cblxuICAgIC8vIE5PVEU7IHRoaXMgbWV0aG9kIG1pZ2h0IHRyaWdnZXIgaW5maW5pdGUgcmVjdXJzaW9uIGluIHlvdXIgR09BUCBBSSAtIFBldGV5bHVtcGtpbnNcbiAgICBwdWJsaWMgb3ZlcnJpZGUgY2hhbmdlU3RhdGUoKTogdm9pZCB7XG4gICAgICAgIC8vIEV4aXQgdGhlIGN1cnJlbnQgc3RhdGVcbiAgICAgICAgbGV0IG9wdGlvbnMgPSB0aGlzLmN1cnJlbnRTdGF0ZS5vbkV4aXQoKTtcblxuICAgICAgICAvLyBSZW1vdmUgdGhlIHByZXZpb3VzIHN0YXRlXG4gICAgICAgIHRoaXMuc3RhY2sucG9wKCk7XG5cbiAgICAgICAgLy8gSWYgdGhlIHBsYW4gaXMgZW1wdHksIGJ1aWxkIGEgbmV3IHBsYW5cbiAgICAgICAgaWYgKHRoaXMuc3RhY2suaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICB0aGlzLnN0YWNrID0gdGhpcy5idWlsZFBsYW4oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCB0aGUgY3VycmVudCBhY3Rpb25cbiAgICAgICAgdGhpcy5jdXJyZW50U3RhdGUgPSB0aGlzLnN0YWNrLnBlZWsoKTtcblxuICAgICAgICAvLyBFbWl0IGFuIGV2ZW50IGlmIHR1cm5lZCBvblxuICAgICAgICBpZih0aGlzLmVtaXRFdmVudE9uU3RhdGVDaGFuZ2Upe1xuICAgICAgICAgICAgdGhpcy5lbWl0dGVyLmZpcmVFdmVudCh0aGlzLnN0YXRlQ2hhbmdlRXZlbnROYW1lLCB7c3RhdGU6IHRoaXMuY3VycmVudFN0YXRlfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFbnRlciB0aGUgbmV3IGFjdGlvblxuICAgICAgICB0aGlzLmN1cnJlbnRTdGF0ZS5vbkVudGVyKG9wdGlvbnMpO1xuICAgIH1cbiAgIFxuICAgIHByb3RlY3RlZCBidWlsZFBsYW4oKTogU3RhY2s8VD4ge1xuICAgICAgICAvLyBHZXQgYWxsIHRoZSBjdXJyZW50IHN0YXR1c2VzXG4gICAgICAgIGxldCBzdGF0dXNlcyA9IHRoaXMuY3VycmVudFN0YXR1cygpO1xuICAgICAgICAvLyBHZXQgYWxsIHRoZSBjdXJyZW50IGFjdGlvbnNcbiAgICAgICAgbGV0IGFjdGlvbnMgPSBBcnJheS5mcm9tKHRoaXMuc3RhdGVNYXAua2V5cygpKS5tYXAoa2V5ID0+IHRoaXMuc3RhdGVNYXAuZ2V0KGtleSkpO1xuICAgICAgICAvLyBDcmVhdGUgdGhlIHBsYW5cbiAgICAgICAgcmV0dXJuIEdvYXBBY3Rpb25QbGFubmVyLnBsYW48VD4oc3RhdHVzZXMsIHRoaXMuZ29hbCwgYWN0aW9ucyk7XG4gICAgfVxuXG4gICAgcHVibGljIGN1cnJlbnRTdGF0dXMoKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnN0YXR1c2VzLmtleXMoKSkuZmlsdGVyKHN0YXQgPT4gdGhpcy5zdGF0dXNlcy5nZXQoc3RhdCkuaXNTYXRpc2ZpZWQoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldEdvYWwoZ29hbDogc3RyaW5nKSB7IFxuICAgICAgICBpZiAoIXRoaXMuc3RhdHVzZXMuaGFzKGdvYWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHb2FsIGRvZXNuJ3QgZXhpc3QuIE1ha2Ugc3VyZSB5b3VyIGdvYWwgaXMgYSBzdGF0dXMgZm9yIHRoaXMgR09BUCBBSVwiKVxuICAgICAgICB9ICAgXG4gICAgICAgIHRoaXMuZ29hbCA9IGdvYWw7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZFN0YXR1cyhzdGF0dXNOYW1lOiBzdHJpbmcsIHN0YXR1czogR29hcFN0YXRlKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RhdHVzZXMuc2V0KHN0YXR1c05hbWUsIHN0YXR1cyk7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZFN0YXRlKHN0YXRlTmFtZTogc3RyaW5nLCBzdGF0ZTogR29hcEFjdGlvbik6IHZvaWQge1xuICAgICAgICBzdXBlci5hZGRTdGF0ZShzdGF0ZU5hbWUsIHN0YXRlKTtcbiAgICB9XG5cblxufSIsImltcG9ydCBBSSBmcm9tIFwiLi4vRGF0YVR5cGVzL0ludGVyZmFjZXMvQUlcIjtcbmltcG9ydCBTdGF0ZU1hY2hpbmUgZnJvbSBcIi4uL0RhdGFUeXBlcy9TdGF0ZS9TdGF0ZU1hY2hpbmVcIjtcbmltcG9ydCBHYW1lTm9kZSBmcm9tIFwiLi4vTm9kZXMvR2FtZU5vZGVcIjtcblxuLyoqXG4gKiBBIHZlcnNpb24gb2YgYSBAcmVmZXJlbmNlW1N0YXRlTWFjaGluZV0gdGhhdCBpcyBjb25maWd1cmVkIHRvIHdvcmsgYXMgYW4gQUkgY29udHJvbGxlciBmb3IgYSBAcmVmZXJlbmNlW0dhbWVOb2RlXVxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdGF0ZU1hY2hpbmVBSSBleHRlbmRzIFN0YXRlTWFjaGluZSBpbXBsZW1lbnRzIEFJIHtcblx0LyoqXHRUaGUgR2FtZU5vZGUgdGhhdCB1c2VzIHRoaXMgU3RhdGVNYWNoaW5lIGZvciBpdHMgQUkgKi9cblx0cHJvdGVjdGVkIG93bmVyOiBHYW1lTm9kZTtcblxuXHQvLyBAaW1wbGVtZW50ZWRcblx0aW5pdGlhbGl6ZUFJKG93bmVyOiBHYW1lTm9kZSwgY29uZmlnOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogdm9pZCB7IH1cblxuXHQvLyBAaW1wbGVtZW50ZWRcblx0ZGVzdHJveSgpe1xuXHRcdC8vIEdldCByaWQgb2Ygb3VyIHJlZmVyZW5jZSB0byB0aGUgb3duZXJcblx0XHRkZWxldGUgdGhpcy5vd25lcjtcblx0XHR0aGlzLnJlY2VpdmVyLmRlc3Ryb3koKTtcblx0fVxuXG5cdC8vIEBpbXBsZW1lbnRlZFxuXHRhY3RpdmF0ZShvcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogdm9pZCB7fVxufSIsImltcG9ydCBDb2xsZWN0aW9uIGZyb20gXCIuLi9JbnRlcmZhY2VzL0NvbGxlY3Rpb25cIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmluYXJ5SGVhcFNldDxUPiBpbXBsZW1lbnRzIENvbGxlY3Rpb24ge1xuXG4gICAgcHJpdmF0ZSByZWFkb25seSBNQVhfRUxFTUVOVFM6IG51bWJlcjtcbiAgICBwcml2YXRlIHJlYWRvbmx5IFJPT1Q6IG51bWJlcjtcblxuICAgIC8qKiBBbiBhcnJheSByZXByZXNlbnRpbmcgdGhlIGJpbmFyeSBoZWFwIGJhY2tpbmcgdGhlIHByaW9yaXR5IHF1ZXVlICovXG4gICAgcHJpdmF0ZSBoZWFwOiBBcnJheTxUPjtcbiAgICAvKiogQSBtYXBwaW5nIG9mIG5vZGVzIHRoYXQgZXhpc3QgaW4gdGhlIHF1ZXVlIHRvIHRoZWlyIHBvc2l0aW9ucyBpbiB0aGUgaGVhcCBhcnJheSAqL1xuICAgIHByaXZhdGUgbWFwOiBNYXA8VCwgbnVtYmVyPjtcblxuICAgIC8qKiBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIGN1cnJlbnRseSBpbiB0aGUgaGVhcCAqL1xuICAgIHByaXZhdGUgc2l6ZTogbnVtYmVyO1xuICAgIC8qKiBUaGUgY29tcGFyaXNvbiBmdW5jdGlvbiB1c2VkIHRvIGNvbXBhcmUgaGVhcCBlbGVtZW50cyAqL1xuICAgIHByaXZhdGUgY29tcDogKGUxOiBULCBlMjogVCkgPT4gbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoY29tcGFyZVRvOiAoZTE6IFQsIGUyOiBUKSA9PiBudW1iZXIsIG1heEVsZW1lbnRzOiBudW1iZXIgPSAxMDApIHtcbiAgICAgICAgdGhpcy5ST09UID0gMDtcbiAgICAgICAgdGhpcy5NQVhfRUxFTUVOVFMgPSBtYXhFbGVtZW50cztcblxuICAgICAgICB0aGlzLmhlYXAgPSBuZXcgQXJyYXkodGhpcy5NQVhfRUxFTUVOVFMpO1xuICAgICAgICB0aGlzLm1hcCA9IG5ldyBNYXA8VCwgbnVtYmVyPigpO1xuICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgICAgICB0aGlzLmNvbXAgPSBjb21wYXJlVG87XG4gICAgfVxuXG4gICAgcHVzaChlOiBUKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5tYXAuaGFzKGUpKSB7XG4gICAgICAgICAgICB0aGlzLmhlYXBbdGhpcy5zaXplXSA9IGU7XG4gICAgICAgICAgICB0aGlzLm1hcC5zZXQoZSwgdGhpcy5zaXplKTtcbiAgICAgICAgICAgIHRoaXMucGVyY3VwKHRoaXMuc2l6ZSk7XG4gICAgICAgICAgICB0aGlzLnNpemUgKz0gMTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHBvcCgpOiBUIHtcbiAgICAgICAgbGV0IHRvcCA9IHRoaXMucGVlaygpO1xuICAgICAgICB0aGlzLm1hcC5kZWxldGUodGhpcy5oZWFwW3RoaXMuUk9PVF0pO1xuICAgICAgICB0aGlzLnNpemUgLT0gMTtcblxuICAgICAgICB0aGlzLmhlYXBbdGhpcy5ST09UXSA9IHRoaXMuaGVhcFt0aGlzLnNpemVdO1xuICAgICAgICB0aGlzLnBlcmNkb3duKHRoaXMuUk9PVCk7XG5cbiAgICAgICAgcmV0dXJuIHRvcDtcbiAgICB9XG5cbiAgICBwZWVrKCk6IFQge1xuICAgICAgICByZXR1cm4gdGhpcy5oZWFwW3RoaXMuUk9PVF07XG4gICAgfVxuXG4gICAgaXNFbXB0eSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gMDtcbiAgICB9XG5cbiAgICBmb3JFYWNoKGZ1bmM6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaGVhcC5mb3JFYWNoKGZ1bmMoKSk7XG4gICAgfVxuXG4gICAgY2xlYXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaGVhcC5maWxsKG51bGwpO1xuICAgIH1cblxuICAgIHJlc3RvcmUodmFsdWU6IFQpOiB2b2lkIHtcbiAgICAgICAgbGV0IG5vZGUgPSB0aGlzLm1hcC5nZXQodmFsdWUpO1xuICAgICAgICB0aGlzLnBlcmN1cChub2RlKTtcbiAgICAgICAgdGhpcy5wZXJjZG93bihub2RlKTtcbiAgICB9XG5cbiAgICBoYXModmFsdWU6IFQpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmhhcyh2YWx1ZSk7XG4gICAgfVxuXG4gICAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHJlcyA9IFwiQmFja2luZyBIZWFwOiBbXCI7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zaXplOyBpKyspIHtcbiAgICAgICAgICAgIHJlcyArPSBgJHt0aGlzLmhlYXBbaV19YFxuICAgICAgICAgICAgaWYgKGkgPCB0aGlzLnNpemUgLSAxKSB7XG4gICAgICAgICAgICAgICAgcmVzICs9IFwiLCBcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlcyArPSBcIl1cXG5NYXA6IFtcXG5cIjtcbiAgICAgICAgdGhpcy5tYXAuZm9yRWFjaCgodmFsOiBudW1iZXIsIGtleTogVCkgPT4ge1xuICAgICAgICAgICAgcmVzICs9IGBcXHQke2tleX0gLT4gJHt2YWx9XFxuYDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcyArPSBcIl1cIjtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgcGVyY3VwKG5vZGU6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBsZXQgcHJudCA9IHRoaXMucGFyZW50KG5vZGUpO1xuICAgICAgICB3aGlsZSAobm9kZSA+IHRoaXMuUk9PVCAmJiB0aGlzLmNvbXAodGhpcy5oZWFwW25vZGVdLCB0aGlzLmhlYXBbcHJudF0pID4gMCkge1xuICAgICAgICAgICAgdGhpcy5zd2FwKG5vZGUsIHBybnQpO1xuICAgICAgICAgICAgbm9kZSA9IHBybnQ7XG4gICAgICAgICAgICBwcm50ID0gdGhpcy5wYXJlbnQobm9kZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvdGVjdGVkIHBlcmNkb3duKG5vZGU6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLmxjaGlsZChub2RlKTtcbiAgICAgICAgd2hpbGUgKGNoaWxkIDwgdGhpcy5zaXplKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGQgPCB0aGlzLnNpemUgLSAxICYmIHRoaXMuY29tcCh0aGlzLmhlYXBbY2hpbGRdLCB0aGlzLmhlYXBbY2hpbGQgKyAxXSkgPD0gMCkge1xuICAgICAgICAgICAgICAgIGNoaWxkICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb21wKHRoaXMuaGVhcFtjaGlsZF0sIHRoaXMuaGVhcFtub2RlXSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zd2FwKG5vZGUsIGNoaWxkKTtcbiAgICAgICAgICAgICAgICBub2RlID0gY2hpbGQ7XG4gICAgICAgICAgICAgICAgY2hpbGQgPSB0aGlzLmxjaGlsZChub2RlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgcGFyZW50KG5vZGU6IG51bWJlcik6IG51bWJlciB7IFxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigobm9kZSAtIDEpLzIpOyBcbiAgICB9XG4gICAgcHJvdGVjdGVkIGxjaGlsZChub2RlOiBudW1iZXIpOiBudW1iZXIgeyBcbiAgICAgICAgcmV0dXJuIG5vZGUqMiArIDE7IFxuICAgIH1cbiAgICBwcm90ZWN0ZWQgcmNoaWxkKG5vZGU6IG51bWJlcik6IG51bWJlciB7IFxuICAgICAgICByZXR1cm4gbm9kZSoyICsgMjsgXG4gICAgfVxuICAgIHByb3RlY3RlZCBzd2FwKG5vZGUxOiBudW1iZXIsIG5vZGUyOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5tYXAuc2V0KHRoaXMuaGVhcFtub2RlMV0sIG5vZGUyKTtcbiAgICAgICAgdGhpcy5tYXAuc2V0KHRoaXMuaGVhcFtub2RlMl0sIG5vZGUxKTtcblxuICAgICAgICBsZXQgdGVtcCA9IHRoaXMuaGVhcFtub2RlMV07XG4gICAgICAgIHRoaXMuaGVhcFtub2RlMV0gPSB0aGlzLmhlYXBbbm9kZTJdO1xuICAgICAgICB0aGlzLmhlYXBbbm9kZTJdID0gdGVtcDtcbiAgICB9XG4gICAgXG59IiwiaW1wb3J0IENvbGxlY3Rpb24gZnJvbSBcIi4uL0ludGVyZmFjZXMvQ29sbGVjdGlvblwiO1xuXG4vKipcbiAqIEFzc29jaWF0ZXMgc3RyaW5ncyB3aXRoIGVsZW1lbnRzIG9mIHR5cGUgVFxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXA8VD4gaW1wbGVtZW50cyBDb2xsZWN0aW9uIHtcblx0cHJpdmF0ZSBtYXA6IFJlY29yZDxzdHJpbmcsIFQ+O1xuXG5cdC8qKiBDcmVhdGVzIGEgbmV3IG1hcCAqL1xuXHRjb25zdHJ1Y3Rvcigpe1xuXHRcdHRoaXMubWFwID0ge307XG5cdH1cblxuXHQvKipcblx0ICogQWRkcyBhIHZhbHVlIFQgc3RvcmVkIGF0IGEga2V5LlxuXHQgKiBAcGFyYW0ga2V5IFRoZSBrZXkgb2YgdGhlIGl0ZW0gdG8gYmUgc3RvcmVkXG5cdCAqIEBwYXJhbSB2YWx1ZSBUaGUgaXRlbSB0byBiZSBzdG9yZWRcblx0ICovXG5cdGFkZChrZXk6IHN0cmluZywgdmFsdWU6IFQpOiB2b2lkIHtcblx0XHR0aGlzLm1hcFtrZXldID0gdmFsdWU7XG5cdH1cblxuXHQvKipcblx0ICogR2V0IHRoZSB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggYSBrZXkuXG5cdCAqIEBwYXJhbSBrZXkgVGhlIGtleSBvZiB0aGUgaXRlbVxuXHQgKiBAcmV0dXJucyBUaGUgaXRlbSBhdCB0aGUga2V5IG9yIHVuZGVmaW5lZFxuXHQgKi9cblx0Z2V0KGtleTogc3RyaW5nKTogVCB7XG5cdFx0cmV0dXJuIHRoaXMubWFwW2tleV07XG5cdH1cblxuXHQvKipcblx0ICogQW4gYWxpYXMgb2YgYWRkLiBTZXRzIHRoZSB2YWx1ZSBzdG9yZWQgYXQga2V5IHRvIHRoZSBuZXcgc3BlY2lmaWVkIHZhbHVlXG5cdCAqIEBwYXJhbSBrZXkgVGhlIGtleSBvZiB0aGUgaXRlbSB0byBiZSBzdG9yZWRcblx0ICogQHBhcmFtIHZhbHVlIFRoZSBpdGVtIHRvIGJlIHN0b3JlZFxuXHQgKi9cblx0c2V0KGtleTogc3RyaW5nLCB2YWx1ZTogVCk6IHZvaWQge1xuXHRcdHRoaXMuYWRkKGtleSwgdmFsdWUpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSBpcyBhIHZhbHVlIHN0b3JlZCBhdCB0aGUgc3BlY2lmaWVkIGtleSwgZmFsc2Ugb3RoZXJ3aXNlLlxuXHQgKiBAcGFyYW0ga2V5IFRoZSBrZXkgdG8gY2hlY2tcblx0ICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB3aGV0aGVyIG9yIG5vdCB0aGVyZSBpcyBhbiBpdGVtIGF0IHRoZSBnaXZlbiBrZXkuXG5cdCAqL1xuXHRoYXMoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy5tYXBba2V5XSAhPT0gdW5kZWZpbmVkO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgYW4gYXJyYXkgb2YgYWxsIG9mIHRoZSBrZXlzIGluIHRoaXMgbWFwLlxuXHQgKiBAcmV0dXJucyBBbiBhcnJheSBjb250YWluaW5nIGFsbCBrZXlzIGluIHRoZSBtYXAuXG5cdCAqL1xuXHRrZXlzKCk6IEFycmF5PHN0cmluZz4ge1xuXHRcdHJldHVybiBPYmplY3Qua2V5cyh0aGlzLm1hcCk7XG5cdH1cblx0XG5cdC8vIEBpbXBsZW1lbnRlZFxuXHRmb3JFYWNoKGZ1bmM6IChrZXk6IHN0cmluZykgPT4gdm9pZCk6IHZvaWQge1xuXHRcdE9iamVjdC5rZXlzKHRoaXMubWFwKS5mb3JFYWNoKGtleSA9PiBmdW5jKGtleSkpO1xuXHR9XG5cblx0LyoqXG5cdCAqIERlbGV0ZXMgYW4gaXRlbSBhc3NvY2lhdGVkIHdpdGggYSBrZXlcblx0ICogQHBhcmFtIGtleSBUaGUga2V5IGF0IHdoaWNoIHRvIGRlbGV0ZSBhbiBpdGVtXG5cdCAqL1xuXHRkZWxldGUoa2V5OiBzdHJpbmcpOiB2b2lkIHtcblx0XHRkZWxldGUgdGhpcy5tYXBba2V5XTtcblx0fVxuXG5cdC8vIEBpbXBsZW1lbnRlZFxuXHRjbGVhcigpOiB2b2lkIHtcblx0XHR0aGlzLmZvckVhY2goa2V5ID0+IGRlbGV0ZSB0aGlzLm1hcFtrZXldKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyB0aGlzIG1hcCB0byBhIHN0cmluZyByZXByZXNlbnRhdGlvbi5cblx0ICogQHJldHVybnMgVGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIG1hcC5cblx0ICovXG5cdHRvU3RyaW5nKCk6IHN0cmluZyB7XG5cdFx0bGV0IHN0ciA9IFwiXCI7XG5cblx0XHR0aGlzLmZvckVhY2goKGtleSkgPT4gc3RyICs9IGtleSArIFwiIC0+IFwiICsgdGhpcy5nZXQoa2V5KS50b1N0cmluZygpICsgXCJcXG5cIik7XG5cblx0XHRyZXR1cm4gc3RyO1xuXHR9XG59IiwiaW1wb3J0IENvbGxlY3Rpb24gZnJvbSBcIi4uL0ludGVyZmFjZXMvQ29sbGVjdGlvblwiO1xuXG4vKipcbiAqIEEgRklGTyBxdWV1ZSB3aXRoIGVsZW1lbnRzIG9mIHR5cGUgVFxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBRdWV1ZTxUPiBpbXBsZW1lbnRzIENvbGxlY3Rpb24ge1xuICAgIC8qKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgZWxlbWVudHMgaW4gdGhlIFF1ZXVlICovXG4gICAgcHJpdmF0ZSByZWFkb25seSBNQVhfRUxFTUVOVFM6IG51bWJlcjtcblxuICAgIC8qKiBUaGUgaW50ZXJuYWwgcmVwcmVzZW50YXRpb24gb2YgdGhlIHF1ZXVlICovXG4gICAgcHJpdmF0ZSBxOiBBcnJheTxUPjtcbiAgICBcbiAgICAvKiogVGhlIGhlYWQgb2YgdGhlIHF1ZXVlICovXG4gICAgcHJpdmF0ZSBoZWFkOiBudW1iZXI7XG4gICAgXG4gICAgLyoqIFRoZSB0YWlsIG9mIHRoZSBxdWV1ZSAqL1xuICAgIHByaXZhdGUgdGFpbDogbnVtYmVyO1xuXG4gICAgLyoqIFRoZSBjdXJyZW50IG51bWJlciBvZiBpdGVtcyBpbiB0aGUgcXVldWUgKi9cbiAgICBwcml2YXRlIHNpemU6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgcXVldWVcbiAgICAgKiBAcGFyYW0gbWF4RWxlbWVudHMgVGhlIG1heGltdW0gc2l6ZSBvZiB0aGUgc3RhY2tcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihtYXhFbGVtZW50czogbnVtYmVyID0gMTAwKXtcbiAgICAgICAgdGhpcy5NQVhfRUxFTUVOVFMgPSBtYXhFbGVtZW50cztcbiAgICAgICAgdGhpcy5xID0gbmV3IEFycmF5KHRoaXMuTUFYX0VMRU1FTlRTKTtcbiAgICAgICAgdGhpcy5oZWFkID0gMDtcbiAgICAgICAgdGhpcy50YWlsID0gMDtcbiAgICAgICAgdGhpcy5zaXplID0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIGl0ZW0gdG8gdGhlIGJhY2sgb2YgdGhlIHF1ZXVlXG4gICAgICogQHBhcmFtIGl0ZW0gVGhlIGl0ZW0gdG8gYWRkIHRvIHRoZSBiYWNrIG9mIHRoZSBxdWV1ZVxuICAgICAqL1xuICAgIGVucXVldWUoaXRlbTogVCk6IHZvaWR7XG4gICAgICAgIGlmKCh0aGlzLnRhaWwgKyAxKSAlIHRoaXMuTUFYX0VMRU1FTlRTID09PSB0aGlzLmhlYWQpe1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUXVldWUgZnVsbCAtIGNhbm5vdCBhZGQgZWxlbWVudFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2l6ZSArPSAxO1xuICAgICAgICB0aGlzLnFbdGhpcy50YWlsXSA9IGl0ZW07XG4gICAgICAgIHRoaXMudGFpbCA9ICh0aGlzLnRhaWwgKyAxKSAlIHRoaXMuTUFYX0VMRU1FTlRTO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbiBpdGVtIGZyb20gdGhlIGZyb250IG9mIHRoZSBxdWV1ZVxuICAgICAqIEByZXR1cm5zIFRoZSBpdGVtIGF0IHRoZSBmcm9udCBvZiB0aGUgcXVldWVcbiAgICAgKi9cbiAgICBkZXF1ZXVlKCk6IFQge1xuICAgICAgICBpZih0aGlzLmhlYWQgPT09IHRoaXMudGFpbCl7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJRdWV1ZSBlbXB0eSAtIGNhbm5vdCByZW1vdmUgZWxlbWVudFwiKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgdGhpcy5zaXplIC09IDE7XG4gICAgICAgIGxldCBpdGVtID0gdGhpcy5xW3RoaXMuaGVhZF07XG4gICAgICAgIC8vIE5vdyBkZWxldGUgdGhlIGl0ZW1cbiAgICAgICAgZGVsZXRlIHRoaXMucVt0aGlzLmhlYWRdO1xuICAgICAgICB0aGlzLmhlYWQgPSAodGhpcy5oZWFkICsgMSkgJSB0aGlzLk1BWF9FTEVNRU5UUztcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGl0ZW0gYXQgdGhlIGZyb250IG9mIHRoZSBxdWV1ZSwgYnV0IGRvZXMgbm90IHJlbW92ZSBpdFxuICAgICAqIEByZXR1cm5zIFRoZSBpdGVtIGF0IHRoZSBmcm9udCBvZiB0aGUgcXVldWVcbiAgICAgKi9cbiAgICBwZWVrTmV4dCgpOiBUIHtcbiAgICAgICAgaWYodGhpcy5oZWFkID09PSB0aGlzLnRhaWwpe1xuICAgICAgICAgICAgdGhyb3cgXCJRdWV1ZSBlbXB0eSAtIGNhbm5vdCBnZXQgZWxlbWVudFwiXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaXRlbSA9IHRoaXMucVt0aGlzLmhlYWRdO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBxdWV1ZSBoYXMgaXRlbXMgaW4gaXQsIGZhbHNlIG90aGVyd2lzZVxuICAgICAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgd2hldGhlciBvciBub3QgdGhpcyBxdWV1ZSBoYXMgaXRlbXNcbiAgICAgKi9cbiAgICBoYXNJdGVtcygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVhZCAhPT0gdGhpcy50YWlsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUgcXVldWUuXG4gICAgICogQHJldHVybnMgVGhlIHNpemUgb2YgdGhlIHF1ZXVlXG4gICAgICovXG4gICAgZ2V0U2l6ZSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplO1xuICAgIH1cblxuICAgIC8vIEBpbXBsZW1lbnRlZFxuICAgIGNsZWFyKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiBkZWxldGUgdGhpcy5xW2luZGV4XSk7XG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgICAgIHRoaXMuaGVhZCA9IHRoaXMudGFpbDtcbiAgICB9XG5cbiAgICAvLyBAaW1wbGVtZW50ZWRcbiAgICBmb3JFYWNoKGZ1bmM6IChpdGVtOiBULCBpbmRleD86IG51bWJlcikgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICBsZXQgaSA9IHRoaXMuaGVhZDtcbiAgICAgICAgd2hpbGUoaSAhPT0gdGhpcy50YWlsKXtcbiAgICAgICAgICAgIGZ1bmModGhpcy5xW2ldLCBpKTtcbiAgICAgICAgICAgIGkgPSAoaSArIDEpICUgdGhpcy5NQVhfRUxFTUVOVFM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIHF1ZXVlIGludG8gYSBzdHJpbmcgZm9ybWF0XG4gICAgICogQHJldHVybnMgQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoaXMgcXVldWVcbiAgICAgKi9cbiAgICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgICAgICBsZXQgcmV0dmFsID0gXCJcIjtcblxuICAgICAgICB0aGlzLmZvckVhY2goIChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgbGV0IHN0ciA9IGl0ZW0udG9TdHJpbmcoKVxuICAgICAgICAgICAgaWYoaW5kZXggIT09IDApe1xuICAgICAgICAgICAgICAgIHN0ciArPSBcIiAtPiBcIlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dmFsID0gc3RyICsgcmV0dmFsO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gXCJUb3AgLT4gXCIgKyByZXR2YWw7XG4gICAgfVxufSIsImltcG9ydCBDb2xsZWN0aW9uIGZyb20gXCIuLi9JbnRlcmZhY2VzL0NvbGxlY3Rpb25cIjtcblxuLyoqXG4gKiBBIExJRk8gc3RhY2sgd2l0aCBpdGVtcyBvZiB0eXBlIFRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RhY2s8VD4gaW1wbGVtZW50cyBDb2xsZWN0aW9uIHtcbiAgICAvKiogVGhlIG1heGltdW0gbnVtYmVyIG9mIGVsZW1lbnRzIGluIHRoZSBTdGFjayAqL1xuICAgIHByaXZhdGUgTUFYX0VMRU1FTlRTOiBudW1iZXI7XG4gICAgXG4gICAgLyoqIFRoZSBpbnRlcm5hbCByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3RhY2sgKi9cbiAgICBwcml2YXRlIHN0YWNrOiBBcnJheTxUPjtcbiAgICBcbiAgICAvKiogVGhlIGhlYWQgb2YgdGhlIHN0YWNrICovXG5cdHByaXZhdGUgaGVhZDogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIG5ldyBzdGFja1xuICAgICAqIEBwYXJhbSBtYXhFbGVtZW50cyBUaGUgbWF4aW11bSBzaXplIG9mIHRoZSBzdGFja1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG1heEVsZW1lbnRzOiBudW1iZXIgPSAxMDApe1xuICAgICAgICB0aGlzLk1BWF9FTEVNRU5UUyA9IG1heEVsZW1lbnRzO1xuICAgICAgICB0aGlzLnN0YWNrID0gbmV3IEFycmF5PFQ+KHRoaXMuTUFYX0VMRU1FTlRTKTtcbiAgICAgICAgdGhpcy5oZWFkID0gLTE7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEFkZHMgYW4gaXRlbSB0byB0aGUgdG9wIG9mIHRoZSBzdGFja1xuICAgICAqIEBwYXJhbSBpdGVtIFRoZSBuZXcgaXRlbSB0byBhZGQgdG8gdGhlIHN0YWNrXG4gICAgICovXG4gICAgcHVzaChpdGVtOiBUKTogdm9pZCB7XG4gICAgICAgIGlmKHRoaXMuaGVhZCArIDEgPT09IHRoaXMuTUFYX0VMRU1FTlRTKXtcbiAgICAgICAgICAgIHRocm93IFwiU3RhY2sgZnVsbCAtIGNhbm5vdCBhZGQgZWxlbWVudFwiO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGVhZCArPSAxO1xuICAgICAgICB0aGlzLnN0YWNrW3RoaXMuaGVhZF0gPSBpdGVtO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYW4gaXRlbSBmcm9tIHRoZSB0b3Agb2YgdGhlIHN0YWNrXG4gICAgICogQHJldHVybnMgVGhlIGl0ZW0gYXQgdGhlIHRvcCBvZiB0aGUgc3RhY2tcbiAgICAgKi9cbiAgICBwb3AoKTogVCB7XG4gICAgICAgIGlmKHRoaXMuaGVhZCA9PT0gLTEpe1xuICAgICAgICAgICAgdGhyb3cgXCJTdGFjayBlbXB0eSAtIGNhbm5vdCByZW1vdmUgZWxlbWVudFwiO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGVhZCAtPSAxO1xuICAgICAgICByZXR1cm4gdGhpcy5zdGFja1t0aGlzLmhlYWQgKyAxXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBlbGVtZW50IGN1cnJlbnRseSBhdCB0aGUgdG9wIG9mIHRoZSBzdGFja1xuICAgICAqIEByZXR1cm5zIFRoZSBpdGVtIGF0IHRoZSB0b3Agb2YgdGhlIHN0YWNrXG4gICAgICovXG4gICAgcGVlaygpOiBUIHtcbiAgICAgICAgaWYodGhpcy5oZWFkID09PSAtMSl7XG4gICAgICAgICAgICB0aHJvdyBcIlN0YWNrIGVtcHR5IC0gY2Fubm90IGdldCBlbGVtZW50XCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhY2tbdGhpcy5oZWFkXTtcbiAgICB9XG5cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoaXMgc3RhY2sgaXMgZW1wdHlcbiAgICAgKiBAcmV0dXJucyBBIGJvb2xlYW4gdGhhdCByZXByZXNlbnRzIHdoZXRoZXIgb3Igbm90IHRoZSBzdGFjayBpcyBlbXB0eVxuICAgICovXG4gICAgaXNFbXB0eSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVhZCA9PT0gLTE7XG4gICAgfVxuXG4gICAgLy8gQGltcGxlbWVudGVkXG4gICAgY2xlYXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IGRlbGV0ZSB0aGlzLnN0YWNrW2luZGV4XSk7XG4gICAgICAgIHRoaXMuaGVhZCA9IC0xO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBpdGVtcyBjdXJyZW50bHkgaW4gdGhlIHN0YWNrXG4gICAgICogQHJldHVybnMgVGhlIG51bWJlciBvZiBpdGVtcyBpbiB0aGUgc3RhY2tcbiAgICAgKi9cbiAgICBzaXplKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmhlYWQgKyAxO1xuICAgIH1cblxuICAgIC8vIEBpbXBsZW1lbnRlZFxuICAgIGZvckVhY2goZnVuYzogKGl0ZW06IFQsIGluZGV4PzogbnVtYmVyKSA9PiB2b2lkKTogdm9pZHtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICB3aGlsZShpIDw9IHRoaXMuaGVhZCl7XG4gICAgICAgICAgICBmdW5jKHRoaXMuc3RhY2tbaV0sIGkpO1xuICAgICAgICAgICAgaSArPSAxO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhpcyBzdGFjayBpbnRvIGEgc3RyaW5nIGZvcm1hdFxuICAgICAqIEByZXR1cm5zIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGlzIHN0YWNrXG4gICAgICovXG4gICAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHJldHZhbCA9IFwiXCI7XG5cbiAgICAgICAgdGhpcy5mb3JFYWNoKCAoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGxldCBzdHIgPSBpdGVtLnRvU3RyaW5nKClcbiAgICAgICAgICAgIGlmKGluZGV4ICE9PSAwKXtcbiAgICAgICAgICAgICAgICBzdHIgKz0gXCIgLT4gXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHZhbCA9IHN0ciArIHJldHZhbDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIFwiVG9wIC0+IFwiICsgcmV0dmFsO1xuICAgIH1cbn0iLCIvLyBAaWdub3JlUGFnZVxuXG4vKipcbiAqIEEgcGxhY2Vob2xkZXIgZnVuY3Rpb24gZm9yIE5vIE9wZXJhdGlvbi4gRG9lcyBub3RoaW5nXG4gKi9cbmNvbnN0IE51bGxGdW5jID0gKCkgPT4ge307XG5cbmV4cG9ydCBkZWZhdWx0IE51bGxGdW5jOyIsIi8qKlxuICogQSBsaW5rZWQtbGlzdCBmb3IgdGhlIGVkZ2VzIGluIGEgQHJlZmVyZW5jZVtHcmFwaF0uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVkZ2VOb2RlIHtcbiAgICAvKiogVGhlIG5vZGUgaW4gdGhlIEdyYXBoIHRoaXMgZWRnZSBjb25uZWN0cyB0byAqL1xuICAgIHk6IG51bWJlcjtcbiAgICAvKiogVGhlIHdlaWdodCBvZiB0aGlzIEVkZ2VOb2RlICovXG5cdHdlaWdodDogbnVtYmVyO1xuICAgIC8qKiBUaGUgbmV4dCBFZGdlTm9kZSBpbiB0aGUgbGlua2VkLWxpc3QgKi9cbiAgICBuZXh0OiBFZGdlTm9kZTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgRWRnZU5vZGVcbiAgICAgKiBAcGFyYW0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBub2RlIHRoaXMgZWRnZSBjb25uZWN0cyB0b1xuICAgICAqIEBwYXJhbSB3ZWlnaHQgVGhlIHdlaWdodCBvZiB0aGlzIGVkZ2VcbiAgICAgKi9cblx0Y29uc3RydWN0b3IoaW5kZXg6IG51bWJlciwgd2VpZ2h0PzogbnVtYmVyKXtcblx0XHR0aGlzLnkgPSBpbmRleDtcblx0XHR0aGlzLm5leHQgPSBudWxsO1xuXHRcdHRoaXMud2VpZ2h0ID0gd2VpZ2h0ID8gd2VpZ2h0IDogMTtcblx0fVxufSIsImltcG9ydCBFZGdlTm9kZSBmcm9tIFwiLi9FZGdlTm9kZVwiO1xuXG5leHBvcnQgY29uc3QgTUFYX1YgPSAxMDAwMDtcblxuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBhIGdyYXBoIGRhdGEgc3RydWN0dXJlIHVzaW5nIGVkZ2UgbGlzdHMuIEluc3BpcmVkIGJ5IFRoZSBBbGdvcml0aG0gRGVzaWduIE1hbnVhbC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR3JhcGgge1xuXHQvKiogQW4gYXJyYXkgb2YgZWRnZXMgYXQgdGhlIG5vZGUgc3BlY2lmaWVkIGJ5IHRoZSBpbmRleCAqL1xuXHRlZGdlczogQXJyYXk8RWRnZU5vZGU+O1xuXHQvKiogQW4gYXJyYXkgcmVwcmVzZW50aW5nIHRoZSBkZWdyZWUgb2YgdGhlIG5vZGUgc3BlY2lmaWVkIGJ5IHRoZSBpbmRleCAqL1xuXHRkZWdyZWU6IEFycmF5PG51bWJlcj47XG5cdC8qKiBUaGUgbnVtYmVyIG9mIHZlcnRpY2VzIGluIHRoZSBncmFwaCAqL1xuXHRudW1WZXJ0aWNlczogbnVtYmVyO1xuXHQvKiogVGhlIG51bWJlciBvZiBlZGdlcyBpbiB0aGUgZ3JhcGggKi9cblx0bnVtRWRnZXM6IG51bWJlcjtcblx0LyoqIFdoZXRoZXIgb3Igbm90IHRoZSBncmFwaCBpcyBkaXJlY3RlZCAqL1xuXHRkaXJlY3RlZDogYm9vbGVhbjtcblx0LyoqIFdoZXRoZXIgb3Igbm90IHRoZSBncmFwaCBpcyB3ZWlnaHRlZCAqL1xuXHR3ZWlnaHRlZDogYm9vbGVhbjtcblxuXHQvKipcblx0ICogQ29uc3RydWN0cyBhIG5ldyBncmFwaFxuXHQgKiBAcGFyYW0gZGlyZWN0ZWQgV2hldGhlciBvciBub3QgdGhpcyBncmFwaCBpcyBkaXJlY3RlZFxuXHQgKi9cblx0Y29uc3RydWN0b3IoZGlyZWN0ZWQ6IGJvb2xlYW4gPSBmYWxzZSl7XG5cdFx0dGhpcy5kaXJlY3RlZCA9IGRpcmVjdGVkO1xuXHRcdHRoaXMud2VpZ2h0ZWQgPSBmYWxzZTtcblxuXHRcdHRoaXMubnVtVmVydGljZXMgPSAwO1xuXHRcdHRoaXMubnVtRWRnZXMgPSAwO1xuXG5cdFx0dGhpcy5lZGdlcyA9IG5ldyBBcnJheShNQVhfVik7XG5cdFx0dGhpcy5kZWdyZWUgPSBuZXcgQXJyYXkoTUFYX1YpO1xuXHR9XG5cblx0LyoqIEFkZHMgYSBub2RlIHRvIHRoaXMgZ3JhcGggYW5kIHJldHVybnMgdGhlIGluZGV4IG9mIGl0XG5cdCAqIEByZXR1cm5zIFRoZSBpbmRleCBvZiB0aGUgbmV3IG5vZGVcblx0Ki9cblx0YWRkTm9kZSgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLm51bVZlcnRpY2VzKys7XG5cdH1cblxuXHQvKiogQWRkcyBhbiBlZGdlIGJldHdlZW4gbm9kZSB4IGFuZCB5LCB3aXRoIGFuIG9wdGlvbmFsIHdlaWdodFxuXHQgKiBAcGFyYW0geCBUaGUgaW5kZXggb2YgdGhlIHN0YXJ0IG9mIHRoZSBlZGdlXG5cdCAqIEBwYXJhbSB5IFRoZSBpbmRleCBvZiB0aGUgZW5kIG9mIHRoZSBlZGdlXG5cdCAqIEBwYXJhbSB3ZWlnaHQgVGhlIG9wdGlvbmFsIHdlaWdodCBvZiB0aGUgbmV3IGVkZ2Vcblx0Ki9cblx0YWRkRWRnZSh4OiBudW1iZXIsIHk6IG51bWJlciwgd2VpZ2h0PzogbnVtYmVyKTogdm9pZCB7XG5cdFx0bGV0IGVkZ2UgPSBuZXcgRWRnZU5vZGUoeSwgd2VpZ2h0KTtcblxuXG5cblx0XHRpZih0aGlzLmVkZ2VzW3hdKXtcblx0XHRcdGVkZ2UubmV4dCA9IHRoaXMuZWRnZXNbeF07XG5cdFx0fVxuXHRcdFxuXHRcdHRoaXMuZWRnZXNbeF0gPSBlZGdlO1xuXG5cdFx0aWYoIXRoaXMuZGlyZWN0ZWQpe1xuXHRcdFx0ZWRnZSA9IG5ldyBFZGdlTm9kZSh4LCB3ZWlnaHQpO1xuXG5cdFx0XHRpZih0aGlzLmVkZ2VzW3ldKXtcblx0XHRcdFx0ZWRnZS5uZXh0ID0gdGhpcy5lZGdlc1t5XTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0dGhpcy5lZGdlc1t5XSA9IGVkZ2U7XG5cdFx0fVxuXG5cdFx0dGhpcy5udW1FZGdlcyArPSAxO1xuXHR9XG5cblx0LyoqXG5cdCAqIENoZWNrcyB3aGV0aGVyIG9yIG5vdCBhbiBlZGdlIGV4aXN0cyBiZXR3ZWVuIHR3byBub2Rlcy5cblx0ICogVGhpcyBjaGVjayBpcyBkaXJlY3Rpb25hbCBpZiB0aGlzIGlzIGEgZGlyZWN0ZWQgZ3JhcGguXG5cdCAqIEBwYXJhbSB4IFRoZSBmaXJzdCBub2RlXG5cdCAqIEBwYXJhbSB5IFRoZSBzZWNvbmQgbm9kZVxuXHQgKiBAcmV0dXJucyB0cnVlIGlmIGFuIGVkZ2UgZXhpc3RzLCBmYWxzZSBvdGhlcndpc2Vcblx0ICovXG5cdGVkZ2VFeGlzdHMoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBib29sZWFuIHtcblx0XHRsZXQgZWRnZSA9IHRoaXMuZWRnZXNbeF07XG5cblx0XHR3aGlsZShlZGdlICE9PSBudWxsKXtcblx0XHRcdGlmKGVkZ2UueSA9PT0geSl7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0ZWRnZSA9IGVkZ2UubmV4dDtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogR2V0cyB0aGUgZWRnZSBsaXN0IGFzc29jaWF0ZWQgd2l0aCBub2RlIHhcblx0ICogQHBhcmFtIHggVGhlIGluZGV4IG9mIHRoZSBub2RlXG5cdCAqIEByZXR1cm5zIFRoZSBoZWFkIG9mIGEgbGlua2VkLWxpc3Qgb2YgZWRnZXNcblx0ICovXG5cdGdldEVkZ2VzKHg6IG51bWJlcik6IEVkZ2VOb2RlIHtcblx0XHRyZXR1cm4gdGhpcy5lZGdlc1t4XTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBkZWdyZWUgYXNzb2NpYXRlZCB3aXRoIG5vZGUgeFxuXHQgKiBAcGFyYW0geCBUaGUgaW5kZXggb2YgdGhlIG5vZGVcblx0ICovXG5cdGdldERlZ3JlZSh4OiBudW1iZXIpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLmRlZ3JlZVt4XTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyB0aGUgc3BlY2lmZWQgbm9kZSBpbnRvIGEgc3RyaW5nXG5cdCAqIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIG5vZGUgdG8gY29udmVydCB0byBhIHN0cmluZ1xuXHQgKiBAcmV0dXJucyBUaGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBub2RlOiBcIk5vZGUgeFwiXG5cdCAqL1xuXHRwcm90ZWN0ZWQgbm9kZVRvU3RyaW5nKGluZGV4OiBudW1iZXIpOiBzdHJpbmcge1xuXHRcdHJldHVybiBcIk5vZGUgXCIgKyBpbmRleDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyB0aGUgR3JhcGggaW50byBhIHN0cmluZyBmb3JtYXRcblx0ICogQHJldHVybnMgVGhlIGdyYXBoIGFzIGEgc3RyaW5nXG5cdCAqL1xuXHR0b1N0cmluZygpOiBzdHJpbmcge1xuXHRcdGxldCByZXR2YWwgPSBcIlwiO1xuXG5cdFx0Zm9yKGxldCBpID0gMDsgaSA8IHRoaXMubnVtVmVydGljZXM7IGkrKyl7XG5cdFx0XHRsZXQgZWRnZSA9IHRoaXMuZWRnZXNbaV07XG5cdFx0XHRsZXQgZWRnZVN0ciA9IFwiXCI7XG5cdFx0XHR3aGlsZShlZGdlICE9PSB1bmRlZmluZWQgJiYgZWRnZSAhPT0gbnVsbCl7XG5cdFx0XHRcdGVkZ2VTdHIgKz0gZWRnZS55LnRvU3RyaW5nKCk7XG5cdFx0XHRcdGlmKHRoaXMud2VpZ2h0ZWQpe1xuXHRcdFx0XHRcdGVkZ2VTdHIgKz0gXCIgKFwiICsgZWRnZS53ZWlnaHQgKyBcIilcIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZihlZGdlLm5leHQgIT09IG51bGwpe1xuXHRcdFx0XHRcdGVkZ2VTdHIgKz0gXCIsIFwiO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZWRnZSA9IGVkZ2UubmV4dDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dmFsICs9IHRoaXMubm9kZVRvU3RyaW5nKGkpICsgXCI6IFwiICsgZWRnZVN0ciArIFwiXFxuXCI7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJldHZhbDtcblx0fVxufSIsImltcG9ydCBHcmFwaCwgeyBNQVhfViB9IGZyb20gXCIuL0dyYXBoXCI7XG5pbXBvcnQgVmVjMiBmcm9tIFwiLi4vVmVjMlwiO1xuaW1wb3J0IERlYnVnUmVuZGVyYWJsZSBmcm9tIFwiLi4vSW50ZXJmYWNlcy9EZWJ1Z1JlbmRlcmFibGVcIjtcblxuLyoqXG4gKiBBbiBleHRlbnNpb24gb2YgR3JhcGggdGhhdCBoYXMgbm9kZXMgd2l0aCBwb3NpdGlvbnMgaW4gMkQgc3BhY2UuXG4gKiBUaGlzIGlzIGEgd2VpZ2h0ZWQgZ3JhcGggKHRob3VnaCBub3QgaW5oZXJlbnRseSBkaXJlY3RkKVxuKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvc2l0aW9uR3JhcGggZXh0ZW5kcyBHcmFwaCBpbXBsZW1lbnRzIERlYnVnUmVuZGVyYWJsZSB7XG5cdC8qKiBBbiBhcnJheSBvZiB0aGUgcG9zaXRpb25zIG9mIHRoZSBub2RlcyBpbiB0aGlzIGdyYXBoICovXG5cdHBvc2l0aW9uczogQXJyYXk8VmVjMj47XG5cblx0LyoqXG5cdCAqIENyZWF0ZWVzIGEgbmV3IFBvc2l0aW9uR3JhcGhcblx0ICogQHBhcmFtIGRpcmVjdGVkIFdoZXRoZXIgb3Igbm90IHRoaXMgZ3JhcGggaXMgZGlyZWN0ZWRcblx0ICovXG5cdGNvbnN0cnVjdG9yKGRpcmVjdGVkOiBib29sZWFuID0gZmFsc2Upe1xuXHRcdHN1cGVyKGRpcmVjdGVkKTtcblx0XHR0aGlzLnBvc2l0aW9ucyA9IG5ldyBBcnJheShNQVhfVik7XG5cdH1cblxuXHQvKipcblx0ICogQWRkcyBhIHBvc2l0aW9uZWQgbm9kZSB0byB0aGlzIGdyYXBoXG5cdCAqIEBwYXJhbSBwb3NpdGlvbiBUaGUgcG9zaXRpb24gb2YgdGhlIG5vZGUgdG8gYWRkXG5cdCAqIEByZXR1cm5zIFRoZSBpbmRleCBvZiB0aGUgYWRkZWQgbm9kZVxuXHQgKi9cblx0YWRkUG9zaXRpb25lZE5vZGUocG9zaXRpb246IFZlYzIpOiBudW1iZXIge1xuXHRcdHRoaXMucG9zaXRpb25zW3RoaXMubnVtVmVydGljZXNdID0gcG9zaXRpb247XG5cdFx0cmV0dXJuIHRoaXMuYWRkTm9kZSgpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENoYW5nZXMgdGhlIHBvc2l0aW9uIG9mIGEgbm9kZS5cblx0ICogQXV0b21hdGljYWxseSBhZGp1c3RzIHRoZSB3ZWlnaHRzIG9mIHRoZSBncmFwaCB0aWVkIHRvIHRoaXMgbm9kZS5cblx0ICogQXMgc3VjaCwgYmUgd2FybmVkIHRoYXQgdGhpcyBmdW5jdGlvbiBoYXMgYW4gTyhuICsgbSkgcnVubmluZyB0aW1lLCBhbmQgdXNlIGl0IHNwYXJpbmdseS5cblx0ICogQHBhcmFtIGluZGV4IFRoZSBpbmRleCBvZiB0aGUgbm9kZVxuXHQgKiBAcGFyYW0gcG9zaXRpb24gVGhlIG5ldyBwb3NpdGlvbiBvZiB0aGUgbm9kZVxuXHQgKi9cblx0c2V0Tm9kZVBvc2l0aW9uKGluZGV4OiBudW1iZXIsIHBvc2l0aW9uOiBWZWMyKTogdm9pZCB7XG5cdFx0dGhpcy5wb3NpdGlvbnNbaW5kZXhdID0gcG9zaXRpb247XG5cblx0XHQvLyBSZWNhbGN1bGF0ZSBhbGwgd2VpZ2h0cyBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbmRleFxuXHRcdGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLm51bUVkZ2VzOyBpKyspe1xuXG5cdFx0XHRsZXQgZWRnZSA9IHRoaXMuZWRnZXNbaV07XG5cblx0XHRcdHdoaWxlKGVkZ2UgIT09IG51bGwpe1xuXHRcdFx0XHQvLyBJZiB0aGlzIG5vZGUgaXMgb24gZWl0aGVyIHNpZGUgb2YgdGhlIGVkZ2UsIHJlY2FsY3VsYXRlIHdlaWdodFxuXHRcdFx0XHRpZihpID09PSBpbmRleCB8fCBlZGdlLnkgPT09IGluZGV4KXtcblx0XHRcdFx0XHRlZGdlLndlaWdodCA9IHRoaXMucG9zaXRpb25zW2ldLmRpc3RhbmNlVG8odGhpcy5wb3NpdGlvbnNbZWRnZS55XSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRlZGdlID0gZWRnZS5uZXh0O1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBwb3NpdGlvbiBvZiBhIG5vZGVcblx0ICogQHBhcmFtIGluZGV4IFRoZSBpbmRleCBvZiB0aGUgbm9kZVxuXHQgKiBAcmV0dXJucyBUaGUgcG9zaXRpb24gb2YgdGhlIG5vZGVcblx0ICovXG5cdGdldE5vZGVQb3NpdGlvbihpbmRleDogbnVtYmVyKTogVmVjMiB7XG5cdFx0cmV0dXJuIHRoaXMucG9zaXRpb25zW2luZGV4XTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBZGRzIGFuIGVkZ2UgdG8gdGhpcyBncmFwaCBiZXR3ZWVuIG5vZGUgeCBhbmQgeS5cblx0ICogQXV0b21hdGljYWxseSBjYWxjdWxhdGVzIHRoZSB3ZWlnaHQgb2YgdGhlIGVkZ2UgYXMgdGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIG5vZGVzLlxuXHQgKiBAcGFyYW0geCBUaGUgYmVnaW5uaW5nIG9mIHRoZSBlZGdlXG5cdCAqIEBwYXJhbSB5IFRoZSBlbmQgb2YgdGhlIGVkZ2Vcblx0ICovXG5cdGFkZEVkZ2UoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcblx0XHRpZighdGhpcy5wb3NpdGlvbnNbeF0gfHwgIXRoaXMucG9zaXRpb25zW3ldKXtcblx0XHRcdHRocm93IFwiQ2FuJ3QgYWRkIGVkZ2UgdG8gdW4tcG9zaXRpb25lZCBub2RlIVwiO1xuXHRcdH1cblxuXHRcdC8vIFdlaWdodCBpcyB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgbm9kZXNcblx0XHRsZXQgd2VpZ2h0ID0gdGhpcy5wb3NpdGlvbnNbeF0uZGlzdGFuY2VUbyh0aGlzLnBvc2l0aW9uc1t5XSk7XG5cblx0XHRzdXBlci5hZGRFZGdlKHgsIHksIHdlaWdodCk7XG5cdH1cblxuXHQvLyBAb3ZlcnJpZGVcblx0cHJvdGVjdGVkIG5vZGVUb1N0cmluZyhpbmRleDogbnVtYmVyKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gXCJOb2RlIFwiICsgaW5kZXggKyBcIiAtIFwiICsgdGhpcy5wb3NpdGlvbnNbaW5kZXhdLnRvU3RyaW5nKCk7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBub2RlIGluIHRoZSBncmFwaCB3aXRoIHRoZSBwb3NpdGlvbiBjbG9zZXN0IHRvIHRoZSBnaXZlbiBwb3NpdGlvblxuICAgICAqIEBwYXJhbSBwb3NpdGlvbiB0aGUgcG9zaXRpb25cbiAgICAgKiBAcmV0dXJucyB0aGUgbm9kZSBpbiB0aGUgZ3JhcGggdGhhdCBpcyBjbG9zZXN0IHRvIHRoZSBnaXZlbiBwb3NpdGlvblxuICAgICAqL1xuICAgIHB1YmxpYyBzbmFwKHBvc2l0aW9uOiBWZWMyKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IG4gPSB0aGlzLm51bVZlcnRpY2VzO1xuXHRcdGxldCBpID0gMTtcblx0XHRsZXQgaW5kZXggPSAwO1xuXHRcdGxldCBkaXN0ID0gcG9zaXRpb24uZGlzdGFuY2VTcVRvKHRoaXMucG9zaXRpb25zWzBdKTtcblx0XHR3aGlsZShpIDwgbil7XG5cdFx0XHRsZXQgZCA9IHBvc2l0aW9uLmRpc3RhbmNlU3FUbyh0aGlzLnBvc2l0aW9uc1tpXSk7XG5cdFx0XHRpZihkIDwgZGlzdCl7XG5cdFx0XHRcdGRpc3QgPSBkO1xuXHRcdFx0XHRpbmRleCA9IGk7XG5cdFx0XHR9XG5cdFx0XHRpKys7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGluZGV4O1xuICAgIH1cblxuXHRkZWJ1Z1JlbmRlciA9ICgpOiB2b2lkID0+IHtcblx0XHQvLyBmb3IobGV0IHBvaW50IG9mIHRoaXMucG9zaXRpb25zKXtcblx0XHQvLyBcdGN0eC5maWxsUmVjdCgocG9pbnQueCAtIG9yaWdpbi54IC0gNCkqem9vbSwgKHBvaW50LnkgLSBvcmlnaW4ueSAtIDQpKnpvb20sIDgsIDgpO1xuXHRcdC8vIH1cblx0fVxufSIsImltcG9ydCBWZWMyIGZyb20gXCIuLi9WZWMyXCI7XG5pbXBvcnQgQUFCQiBmcm9tIFwiLi4vU2hhcGVzL0FBQkJcIjtcblxuLyoqIEFuIG9iamVjdCB0aGF0IGlzIGEgcmVnaW9uLCB3aXRoIGEgc2l6ZSwgc2NhbGUsIGFuZCBib3VuZGFyeS4gKi9cbmV4cG9ydCBkZWZhdWx0IGludGVyZmFjZSBSZWdpb24ge1xuICAgIC8qKiBUaGUgc2l6ZSBvZiB0aGlzIG9iamVjdC4gKi9cbiAgICBzaXplOiBWZWMyO1xuXG4gICAgLyoqIFRoZSBzY2FsZSBvZiB0aGlzIG9iamVjdC4gKi9cbiAgICBzY2FsZTogVmVjMjtcblxuICAgIC8qKiBUaGUgc2l6ZSBvZiB0aGUgb2JqZWN0IHRha2luZyBpbnRvIGFjY291bnQgdGhlIHpvb20gYW5kIHNjYWxlICovXG4gICAgcmVhZG9ubHkgc2l6ZVdpdGhab29tOiBWZWMyO1xuXG4gICAgLyoqIFRoZSBib3VuZGluZyBib3ggb2YgdGhpcyBvYmplY3QuICovXG4gICAgYm91bmRhcnk6IEFBQkI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1JlZ2lvbihhcmc6IGFueSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBhcmcgJiYgYXJnLnNpemUgJiYgYXJnLnNjYWxlICYmIGFyZy5ib3VuZGFyeTtcbn0iLCJpbXBvcnQgVmVjMiBmcm9tIFwiLi9WZWMyXCI7XG5cbi8qKiBBIDR4NCBtYXRyaXgwICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXQ0eDQge1xuXHRwcml2YXRlIG1hdDogRmxvYXQzMkFycmF5O1xuXG5cdGNvbnN0cnVjdG9yKCl7XG5cdFx0dGhpcy5tYXQgPSBuZXcgRmxvYXQzMkFycmF5KFtcblx0XHRcdDAsIDAsIDAsIDAsXG5cdFx0XHQwLCAwLCAwLCAwLFxuXHRcdFx0MCwgMCwgMCwgMCxcblx0XHRcdDAsIDAsIDAsIDBcblx0XHRdKTtcblx0fVxuXG5cdC8vIFN0YXRpYyBtZW1iZXJzXG5cdHN0YXRpYyBnZXQgSURFTlRJVFkoKTogTWF0NHg0IHtcblx0XHRyZXR1cm4gbmV3IE1hdDR4NCgpLmlkZW50aXR5KCk7XG5cdH1cblxuXHRzdGF0aWMgZ2V0IFpFUk8oKTogTWF0NHg0IHtcblx0XHRyZXR1cm4gbmV3IE1hdDR4NCgpLnplcm8oKTtcblx0fVxuXG5cdC8vIEFjY2Vzc29yc1xuXHRzZXQgXzAwKHg6IG51bWJlcikge1xuXHRcdHRoaXMubWF0WzBdID0geDtcblx0fVxuXG5cdHNldChjb2w6IG51bWJlciwgcm93OiBudW1iZXIsIHZhbHVlOiBudW1iZXIpOiBNYXQ0eDQge1xuXHRcdGlmKGNvbCA8IDAgfHwgY29sID4gMyB8fCByb3cgPCAwIHx8IHJvdyA+IDMpe1xuXHRcdFx0dGhyb3cgYEVycm9yIC0gaW5kZXggKCR7Y29sfSwgJHtyb3d9KSBpcyBvdXQgb2YgYm91bmRzIGZvciBNYXQ0eDRgXG5cdFx0fVxuXHRcdHRoaXMubWF0W3Jvdyo0ICsgY29sXSA9IHZhbHVlO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHRnZXQoY29sOiBudW1iZXIsIHJvdzogbnVtYmVyKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5tYXRbcm93KjQgKyBjb2xdO1xuXHR9XG5cblx0c2V0QWxsKC4uLml0ZW1zOiBBcnJheTxudW1iZXI+KTogTWF0NHg0IHtcblx0XHR0aGlzLm1hdC5zZXQoaXRlbXMpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0aWRlbnRpdHkoKTogTWF0NHg0IHtcblx0XHRyZXR1cm4gdGhpcy5zZXRBbGwoXG5cdFx0XHQxLCAwLCAwLCAwLFxuXHRcdFx0MCwgMSwgMCwgMCxcblx0XHRcdDAsIDAsIDEsIDAsXG5cdFx0XHQwLCAwLCAwLCAxXG5cdFx0KVxuXHR9XG5cblx0emVybygpOiBNYXQ0eDQge1xuXHRcdHJldHVybiB0aGlzLnNldEFsbChcblx0XHRcdDAsIDAsIDAsIDAsXG5cdFx0XHQwLCAwLCAwLCAwLFxuXHRcdFx0MCwgMCwgMCwgMCxcblx0XHRcdDAsIDAsIDAsIDBcblx0XHQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIE1ha2VzIHRoaXMgTWF0NHg0IGEgcm90YXRpb24gbWF0cml4IG9mIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIHJhZGlhbnMgY2N3XG5cdCAqIEBwYXJhbSB6UmFkaWFucyBUaGUgbnVtYmVyIG9mIHJhZGlhbnMgdG8gcm90YXRlXG5cdCAqIEByZXR1cm5zIHRoaXMgTWF0NHg0XG5cdCAqL1xuXHRyb3RhdGUoelJhZGlhbnM6IG51bWJlcik6IE1hdDR4NCB7XG5cdFx0cmV0dXJuIHRoaXMuc2V0QWxsKFxuXHRcdFx0TWF0aC5jb3MoelJhZGlhbnMpLCAtTWF0aC5zaW4oelJhZGlhbnMpLCBcdDAsIDAsXG5cdFx0XHRNYXRoLnNpbih6UmFkaWFucyksIE1hdGguY29zKHpSYWRpYW5zKSwgXHQwLCAwLFxuXHRcdFx0MCwgXHRcdFx0XHRcdDAsIFx0XHRcdFx0XHRcdDEsIDAsXG5cdFx0XHQwLCBcdFx0XHRcdFx0MCwgXHRcdFx0XHRcdFx0MCwgMVxuXHRcdCk7XG5cdH1cblxuXHQvKipcblx0ICogVHVybnMgdGhpcyBNYXQ0eDQgaW50byBhIHRyYW5zbGF0aW9uIG1hdHJpeCBvZiB0aGUgc3BlY2lmaWVkIHRyYW5zbGF0aW9uXG5cdCAqIEBwYXJhbSB0cmFuc2xhdGlvbiBUaGUgdHJhbnNsYXRpb24gaW4geCBhbmQgeVxuXHQgKiBAcmV0dXJucyB0aGlzIE1hdDR4NFxuXHQgKi9cblx0dHJhbnNsYXRlKHRyYW5zbGF0aW9uOiBWZWMyIHwgRmxvYXQzMkFycmF5KTogTWF0NHg0IHtcblx0XHQvLyBJZiB0cmFuc2xhdGlvbiBpcyBhIHZlYywgZ2V0IGl0cyBhcnJheVxuXHRcdGlmKHRyYW5zbGF0aW9uIGluc3RhbmNlb2YgVmVjMil7XG5cdFx0XHR0cmFuc2xhdGlvbiA9IHRyYW5zbGF0aW9uLnRvQXJyYXkoKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5zZXRBbGwoXG5cdFx0XHQxLCAwLCAwLCB0cmFuc2xhdGlvblswXSxcblx0XHRcdDAsIDEsIDAsIHRyYW5zbGF0aW9uWzFdLFxuXHRcdFx0MCwgMCwgMSwgMCxcblx0XHRcdDAsIDAsIDAsIDFcblx0XHQpO1xuXHR9XG5cblx0c2NhbGUoc2NhbGU6IFZlYzIgfCBGbG9hdDMyQXJyYXkgfCBudW1iZXIpOiBNYXQ0eDQge1xuXHRcdC8vIE1ha2Ugc3VyZSBzY2FsZSBpcyBhIGZsb2F0MzJBcnJheVxuXHRcdGlmKHNjYWxlIGluc3RhbmNlb2YgVmVjMil7XG5cdFx0XHRzY2FsZSA9IHNjYWxlLnRvQXJyYXkoKTtcblx0XHR9IGVsc2UgaWYoIShzY2FsZSBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSkpe1xuXHRcdFx0c2NhbGUgPSBuZXcgRmxvYXQzMkFycmF5KFtzY2FsZSwgc2NhbGVdKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5zZXRBbGwoXG5cdFx0XHRzY2FsZVswXSwgMCwgXHRcdDAsIDAsXG5cdFx0XHQwLCBcdFx0ICBzY2FsZVsxXSwgMCwgMCxcblx0XHRcdDAsIFx0XHQgIDAsXHRcdDEsIDAsXG5cdFx0XHQwLCBcdFx0ICAwLFx0XHQwLCAxXG5cdFx0KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIGEgbmV3IE1hdDR4NCB0aGF0IHJlcHJlc2VudHMgdGhlIHJpZ2h0IHNpZGUgbXVsdGlwbGljYXRpb24gVEhJUyB4IE9USEVSXG5cdCAqIEBwYXJhbSBvdGhlciBUaGUgb3RoZXIgTWF0NHg0IHRvIG11bHRpcGx5IGJ5XG5cdCAqIEByZXR1cm5zIGEgbmV3IE1hdDR4NCBjb250YWluaW5nIHRoZSBwcm9kdWN0IG9mIHRoZXNlIHR3byBNYXQ0eDRzXG5cdCAqL1xuXHRtdWx0KG90aGVyOiBNYXQ0eDQsIG91dD86IE1hdDR4NCk6IE1hdDR4NCB7XG5cdFx0bGV0IHRlbXAgPSBuZXcgRmxvYXQzMkFycmF5KDE2KTtcblxuXHRcdGZvcihsZXQgaSA9IDA7IGkgPCA0OyBpKyspe1xuXHRcdFx0Zm9yKGxldCBqID0gMDsgaiA8IDQ7IGorKyl7XG5cdFx0XHRcdGxldCB2YWx1ZSA9IDA7XG5cdFx0XHRcdGZvcihsZXQgayA9IDA7IGsgPCA0OyBrKyspe1xuXHRcdFx0XHRcdHZhbHVlICs9IHRoaXMuZ2V0KGssIGkpICogb3RoZXIuZ2V0KGosIGspO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRlbXBbaio0ICsgaV0gID0gdmFsdWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYob3V0ICE9PSB1bmRlZmluZWQpe1xuXHRcdFx0cmV0dXJuIG91dC5zZXRBbGwoLi4udGVtcCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBuZXcgTWF0NHg0KCkuc2V0QWxsKC4uLnRlbXApO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBNdWx0aXBsaWVzIGFsbCBnaXZlbiBtYXRyaWNpZXMgaW4gb3JkZXIuIGUuZy4gTVVMVChBLCBCLCBDKSAtPiBBKkIqQ1xuXHQgKiBAcGFyYW0gbWF0cyBBIGxpc3Qgb2YgTWF0NHg0cyB0byBtdWx0aXBseSBpbiBvcmRlclxuXHQgKiBAcmV0dXJucyBBIG5ldyBNYXQ0eDQgaG9sZGluZyB0aGUgcmVzdWx0IG9mIHRoZSBvcGVyYXRpb25cblx0ICovXG5cdHN0YXRpYyBNVUxUKC4uLm1hdHM6IEFycmF5PE1hdDR4ND4pOiBNYXQ0eDQge1xuXHRcdC8vIENyZWF0ZSBhIG5ldyBhcnJheVxuXHRcdGxldCB0ZW1wID0gTWF0NHg0LklERU5USVRZO1xuXG5cdFx0Ly8gTXVsdGlwbHkgYnkgZXZlcnkgYXJyYXkgaW4gb3JkZXIsIGluIHBsYWNlXG5cdFx0Zm9yKGxldCBpID0gMDsgaSA8IG1hdHMubGVuZ3RoOyBpKyspe1xuXHRcdFx0dGVtcC5tdWx0KG1hdHNbaV0sIHRlbXApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0ZW1wO1xuXHR9XG5cblx0dG9BcnJheSgpOiBGbG9hdDMyQXJyYXkge1xuXHRcdHJldHVybiB0aGlzLm1hdDtcblx0fVxuXG5cdHRvU3RyaW5nKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuICBgfCR7dGhpcy5tYXRbMF0udG9GaXhlZCgyKX0sICR7dGhpcy5tYXRbMV0udG9GaXhlZCgyKX0sICR7dGhpcy5tYXRbMl0udG9GaXhlZCgyKX0sICR7dGhpcy5tYXRbM10udG9GaXhlZCgyKX18XFxuYCArIFxuXHRcdFx0XHRgfCR7dGhpcy5tYXRbNF0udG9GaXhlZCgyKX0sICR7dGhpcy5tYXRbNV0udG9GaXhlZCgyKX0sICR7dGhpcy5tYXRbNl0udG9GaXhlZCgyKX0sICR7dGhpcy5tYXRbN10udG9GaXhlZCgyKX18XFxuYCArXG5cdFx0XHRcdGB8JHt0aGlzLm1hdFs4XS50b0ZpeGVkKDIpfSwgJHt0aGlzLm1hdFs5XS50b0ZpeGVkKDIpfSwgJHt0aGlzLm1hdFsxMF0udG9GaXhlZCgyKX0sICR7dGhpcy5tYXRbMTFdLnRvRml4ZWQoMil9fFxcbmAgK1xuXHRcdFx0XHRgfCR7dGhpcy5tYXRbMTJdLnRvRml4ZWQoMil9LCAke3RoaXMubWF0WzEzXS50b0ZpeGVkKDIpfSwgJHt0aGlzLm1hdFsxNF0udG9GaXhlZCgyKX0sICR7dGhpcy5tYXRbMTVdLnRvRml4ZWQoMil9fGA7XG5cdH1cbn0iLCJpbXBvcnQgUGh5c2ljYWwgZnJvbSBcIi4uL0ludGVyZmFjZXMvUGh5c2ljYWxcIjtcbmltcG9ydCBBQUJCIGZyb20gXCIuLi9TaGFwZXMvQUFCQlwiO1xuaW1wb3J0IFZlYzIgZnJvbSBcIi4uL1ZlYzJcIjtcbmltcG9ydCBIaXQgZnJvbSBcIi4vSGl0XCI7XG5cbi8qKlxuICogQSBjbGFzcyB0aGF0IGNvbnRhaW5zIHRoZSBhcmVhIG9mIG92ZXJsYXAgb2YgdHdvIGNvbGxpZGluZyBvYmplY3RzIHRvIGFsbG93IGZvciBzb3J0aW5nIGJ5IHRoZSBwaHlzaWNzIHN5c3RlbS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXJlYUNvbGxpc2lvbiB7XG4gICAgLyoqIFRoZSBhcmVhIG9mIHRoZSBvdmVybGFwIGZvciB0aGUgY29sbGlkaW5nIG9iamVjdHMgKi9cbiAgICBhcmVhOiBudW1iZXI7XG5cbiAgICAvKiogVGhlIEFBQkIgb2YgdGhlIG90aGVyIGNvbGxpZGVyIGluIHRoaXMgY29sbGlzaW9uICovXG4gICAgY29sbGlkZXI6IEFBQkI7XG5cbiAgICAvKiogVHlwZSBvZiB0aGUgY29sbGlzaW9uICovXG4gICAgdHlwZTogc3RyaW5nO1xuXG4gICAgLyoqIFRoZXIgb3RoZXIgb2JqZWN0IGluIHRoZSBjb2xsaXNpb24gKi9cbiAgICBvdGhlcjogUGh5c2ljYWw7XG5cbiAgICAvKiogVGhlIHRpbGUsIGlmIHRoaXMgd2FzIGEgdGlsZW1hcCBjb2xsaXNpb24gKi9cbiAgICB0aWxlOiBWZWMyO1xuXG4gICAgLyoqIFRoZSBwaHlzaWNzIGhpdCBmb3IgdGhpcyBvYmplY3QgKi9cbiAgICBoaXQ6IEhpdDtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgQXJlYUNvbGxpc2lvbiBvYmplY3RcbiAgICAgKiBAcGFyYW0gYXJlYSBUaGUgYXJlYSBvZiB0aGUgY29sbGlzaW9uXG4gICAgICogQHBhcmFtIGNvbGxpZGVyIFRoZSBvdGhlciBjb2xsaWRlclxuICAgICAqL1xuXHRjb25zdHJ1Y3RvcihhcmVhOiBudW1iZXIsIGNvbGxpZGVyOiBBQUJCLCBvdGhlcjogUGh5c2ljYWwsIHR5cGU6IHN0cmluZywgdGlsZTogVmVjMil7XG5cdFx0dGhpcy5hcmVhID0gYXJlYTtcbiAgICAgICAgdGhpcy5jb2xsaWRlciA9IGNvbGxpZGVyO1xuICAgICAgICB0aGlzLm90aGVyID0gb3RoZXI7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMudGlsZSA9IHRpbGU7XG5cdH1cbn0iLCJpbXBvcnQgVmVjMiBmcm9tIFwiLi4vVmVjMlwiO1xuXG4vKipcbiAqIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGRhdGEgY29sbGVjdGVkIGZyb20gYSBwaHlzaWNzIGhpdCBiZXR3ZWVuIHR3byBnZW9tZXRyaWMgb2JqZWN0cy5cbiAqIEluc3BpcmVkIGJ5IHRoZSBoZWxwZnVsIGNvbGxpc2lvbiBkb2N1bWVudGF0aW9uIEBsaW5rKGhlcmUpKGh0dHBzOi8vbm9vbmF0LmdpdGh1Yi5pby9pbnRlcnNlY3QvKS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGl0IHtcbiAgICAvKiogVGhlIHRpbWUgb2YgdGhlIGNvbGxpc2lvbi4gT25seSBudW1iZXJzIDAgdGhyb3VnaCAxIGhhcHBlbiBpbiB0aGlzIGZyYW1lLiAqL1xuICAgIHRpbWU6IG51bWJlcjtcbiAgICAvKiogVGhlIG5lYXIgdGltZXMgb2YgdGhlIGNvbGxpc2lvbiAqL1xuICAgIG5lYXJUaW1lczogVmVjMiA9IFZlYzIuWkVSTztcbiAgICAvKiogVGhlIHBvc2l0aW9uIG9mIHRoZSBjb2xsaXNpb24gKi9cbiAgICBwb3M6IFZlYzIgPSBWZWMyLlpFUk87XG4gICAgLyoqIFRoZSBvdmVybGFwIGRpc3RhbmNlIG9mIHRoZSBoaXQgKi9cbiAgICBkZWx0YTogVmVjMiA9IFZlYzIuWkVSTztcbiAgICAvKiogVGhlIG5vcm1hbCB2ZWN0b3Igb2YgdGhlIGhpdCAqL1xuICAgIG5vcm1hbDogVmVjMiA9IFZlYzIuWkVSTztcbn0iLCIvKiogQSBjb250YWluZXIgZm9yIGluZm8gYWJvdXQgYSB3ZWJHTCBzaGFkZXIgcHJvZ3JhbSAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2ViR0xQcm9ncmFtVHlwZSB7XG5cdC8qKiBBIHdlYkdMIHByb2dyYW0gKi9cblx0cHJvZ3JhbTogV2ViR0xQcm9ncmFtO1xuXHRcblx0LyoqIEEgdmVydGV4IHNoYWRlciAqL1xuXHR2ZXJ0ZXhTaGFkZXI6IFdlYkdMU2hhZGVyO1xuXG5cdC8qKiBBIGZyYWdtZW50IHNoYWRlciAqL1xuXHRmcmFnbWVudFNoYWRlcjogV2ViR0xTaGFkZXI7XG5cblx0LyoqXG5cdCAqIERlbGV0ZXMgdGhpcyBzaGFkZXIgcHJvZ3JhbVxuXHQgKi9cblx0ZGVsZXRlKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpOiB2b2lkIHtcblx0XHQvLyBDbGVhbiB1cCBhbGwgYXNwZWN0cyBvZiB0aGlzIHByb2dyYW1cblx0XHRpZih0aGlzLnByb2dyYW0pe1xuXHRcdFx0Z2wuZGVsZXRlUHJvZ3JhbSh0aGlzLnByb2dyYW0pO1xuXHRcdH1cblx0XHRcdFxuXHRcdGlmKHRoaXMudmVydGV4U2hhZGVyKXtcblx0XHRcdGdsLmRlbGV0ZVNoYWRlcih0aGlzLnZlcnRleFNoYWRlcik7XG5cdFx0fVxuXG5cdFx0aWYodGhpcy5mcmFnbWVudFNoYWRlcil7XG5cdFx0XHRnbC5kZWxldGVTaGFkZXIodGhpcy5mcmFnbWVudFNoYWRlcik7XG5cdFx0fVxuXHR9XG59IiwiaW1wb3J0IFNoYXBlIGZyb20gXCIuL1NoYXBlXCI7XG5pbXBvcnQgVmVjMiBmcm9tIFwiLi4vVmVjMlwiO1xuaW1wb3J0IE1hdGhVdGlscyBmcm9tIFwiLi4vLi4vVXRpbHMvTWF0aFV0aWxzXCI7XG5pbXBvcnQgQ2lyY2xlIGZyb20gXCIuL0NpcmNsZVwiO1xuaW1wb3J0IEhpdCBmcm9tIFwiLi4vUGh5c2ljcy9IaXRcIjtcblxuLyoqXG4gKiBBbiBBeGlzLUFsaWduZWQgQm91bmRpbmcgQm94LiBJbiBvdGhlciB3b3JkcywgYSByZWN0YW5nbGUgdGhhdCBpcyBhbHdheXMgYWxpZ25lZCB0byB0aGUgeC15IGdyaWQuXG4gKiBJbnNwaXJlZCBieSB0aGUgaGVscGZ1bCBjb2xsaXNpb24gZG9jdW1lbnRhdGlvbiBAbGluayhoZXJlKShodHRwczovL25vb25hdC5naXRodWIuaW8vaW50ZXJzZWN0LykuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFBQkIgZXh0ZW5kcyBTaGFwZSB7XG4gICAgY2VudGVyOiBWZWMyO1xuICAgIGhhbGZTaXplOiBWZWMyO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBBQUJCXG4gICAgICogQHBhcmFtIGNlbnRlciBUaGUgY2VudGVyIG9mIHRoZSBBQUJCXG4gICAgICogQHBhcmFtIGhhbGZTaXplIFRoZSBoYWxmIHNpemUgb2YgdGhlIEFBQkIgLSBUaGUgZGlzdGFuY2UgZnJvbSB0aGUgY2VudGVyIHRvIGFuIGVkZ2UgaW4geCBhbmQgeVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNlbnRlcj86IFZlYzIsIGhhbGZTaXplPzogVmVjMil7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY2VudGVyID0gY2VudGVyID8gY2VudGVyIDogbmV3IFZlYzIoMCwgMCk7XG4gICAgICAgIHRoaXMuaGFsZlNpemUgPSBoYWxmU2l6ZSA/IGhhbGZTaXplIDogbmV3IFZlYzIoMCwgMCk7XG4gICAgfVxuXG4gICAgLyoqIFJldHVybnMgYSBwb2ludCByZXByZXNlbnRpbmcgdGhlIHRvcCBsZWZ0IGNvcm5lciBvZiB0aGUgQUFCQiAqL1xuICAgIGdldCB0b3BMZWZ0KCk6IFZlYzIge1xuICAgICAgICByZXR1cm4gbmV3IFZlYzIodGhpcy5sZWZ0LCB0aGlzLnRvcClcbiAgICB9XG5cbiAgICAvKiogUmV0dXJucyBhIHBvaW50IHJlcHJlc2VudGluZyB0aGUgdG9wIHJpZ2h0IGNvcm5lciBvZiB0aGUgQUFCQiAqL1xuICAgIGdldCB0b3BSaWdodCgpOiBWZWMyIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMyKHRoaXMucmlnaHQsIHRoaXMudG9wKVxuICAgIH1cblxuICAgIC8qKiBSZXR1cm5zIGEgcG9pbnQgcmVwcmVzZW50aW5nIHRoZSBib3R0b20gbGVmdCBjb3JuZXIgb2YgdGhlIEFBQkIgKi9cbiAgICBnZXQgYm90dG9tTGVmdCgpOiBWZWMyIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMyKHRoaXMubGVmdCwgdGhpcy5ib3R0b20pXG4gICAgfVxuXG4gICAgLyoqIFJldHVybnMgYSBwb2ludCByZXByZXNlbnRpbmcgdGhlIGJvdHRvbSByaWdodCBjb3JuZXIgb2YgdGhlIEFBQkIgKi9cbiAgICBnZXQgYm90dG9tUmlnaHQoKTogVmVjMiB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjMih0aGlzLnJpZ2h0LCB0aGlzLmJvdHRvbSlcbiAgICB9XG5cbiAgICAvLyBAb3ZlcnJpZGVcbiAgICBnZXRCb3VuZGluZ1JlY3QoKTogQUFCQiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNsb25lKCk7XG4gICAgfVxuXG4gICAgLy8gQG92ZXJyaWRlXG4gICAgZ2V0Qm91bmRpbmdDaXJjbGUoKTogQ2lyY2xlIHtcbiAgICAgICAgbGV0IHIgPSBNYXRoLm1heCh0aGlzLmh3LCB0aGlzLmhoKVxuICAgICAgICByZXR1cm4gbmV3IENpcmNsZSh0aGlzLmNlbnRlci5jbG9uZSgpLCByKTtcbiAgICB9XG5cbiAgICAvLyBAZGVwcmVjYXRlZFxuICAgIGdldEhhbGZTaXplKCk6IFZlYzIge1xuICAgICAgICByZXR1cm4gdGhpcy5oYWxmU2l6ZTtcbiAgICB9XG5cbiAgICAvLyBAZGVwcmVjYXRlZFxuICAgIHNldEhhbGZTaXplKGhhbGZTaXplOiBWZWMyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaGFsZlNpemUgPSBoYWxmU2l6ZTtcbiAgICB9XG5cbiAgICAvLyBUT0RPIC0gbW92ZSB0aGVzZSBhbGwgdG8gdGhlIFNoYXBlIGNsYXNzXG4gICAgLyoqXG4gICAgICogQSBzaW1wbGUgYm9vbGVhbiBjaGVjayBvZiB3aGV0aGVyIHRoaXMgQUFCQiBjb250YWlucyBhIHBvaW50XG4gICAgICogQHBhcmFtIHBvaW50IFRoZSBwb2ludCB0byBjaGVja1xuICAgICAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgd2hldGhlciB0aGlzIEFBQkIgY29udGFpbnMgdGhlIHNwZWNpZmllZCBwb2ludFxuICAgICAqL1xuICAgIGNvbnRhaW5zUG9pbnQocG9pbnQ6IFZlYzIpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHBvaW50LnggPj0gdGhpcy54IC0gdGhpcy5odyAmJiBwb2ludC54IDw9IHRoaXMueCArIHRoaXMuaHdcbiAgICAgICAgICAgICYmIHBvaW50LnkgPj0gdGhpcy55IC0gdGhpcy5oaCAmJiBwb2ludC55IDw9IHRoaXMueSArIHRoaXMuaGhcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQSBzaW1wbGUgYm9vbGVhbiBjaGVjayBvZiB3aGV0aGVyIHRoaXMgQUFCQiBjb250YWlucyBhIHBvaW50XG4gICAgICogQHBhcmFtIHBvaW50IFRoZSBwb2ludCB0byBjaGVja1xuICAgICAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgd2hldGhlciB0aGlzIEFBQkIgY29udGFpbnMgdGhlIHNwZWNpZmllZCBwb2ludFxuICAgICAqL1xuICAgIGludGVyc2VjdFBvaW50KHBvaW50OiBWZWMyKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBkeCA9IHBvaW50LnggLSB0aGlzLng7XG4gICAgICAgIGxldCBweCA9IHRoaXMuaHcgLSBNYXRoLmFicyhkeCk7XG4gICAgICAgIFxuICAgICAgICBpZihweCA8PSAwKXtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBkeSA9IHBvaW50LnkgLSB0aGlzLnk7XG4gICAgICAgIGxldCBweSA9IHRoaXMuaGggLSBNYXRoLmFicyhkeSk7XG5cbiAgICAgICAgaWYocHkgPD0gMCl7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGJvb2xlYW4gY2hlY2sgb2Ygd2hldGhlciB0aGlzIEFBQkIgY29udGFpbnMgYSBwb2ludCB3aXRoIHNvZnQgbGVmdCBhbmQgdG9wIGJvdW5kYXJpZXMuXG4gICAgICogSW4gb3RoZXIgd29yZHMsIGlmIHRoZSB0b3AgbGVmdCBpcyAoMCwgMCksIHRoZSBwb2ludCAoMCwgMCkgaXMgbm90IGluIHRoZSBBQUJCXG4gICAgICogQHBhcmFtIHBvaW50IFRoZSBwb2ludCB0byBjaGVja1xuICAgICAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgd2hldGhlciB0aGlzIEFBQkIgY29udGFpbnMgdGhlIHNwZWNpZmllZCBwb2ludFxuICAgICAqL1xuICAgIGNvbnRhaW5zUG9pbnRTb2Z0KHBvaW50OiBWZWMyKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBwb2ludC54ID4gdGhpcy54IC0gdGhpcy5odyAmJiBwb2ludC54IDw9IHRoaXMueCArIHRoaXMuaHdcbiAgICAgICAgICAgICYmIHBvaW50LnkgPiB0aGlzLnkgLSB0aGlzLmhoICYmIHBvaW50LnkgPD0gdGhpcy55ICsgdGhpcy5oaFxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZGF0YSBmcm9tIHRoZSBpbnRlcnNlY3Rpb24gb2YgdGhpcyBBQUJCIHdpdGggYSBsaW5lIHNlZ21lbnQgZnJvbSBhIHBvaW50IGluIGEgZGlyZWN0aW9uXG4gICAgICogQHBhcmFtIHBvaW50IFRoZSBwb2ludCB0aGF0IHRoZSBsaW5lIHNlZ21lbnQgc3RhcnRzIGZyb21cbiAgICAgKiBAcGFyYW0gZGVsdGEgVGhlIGRpcmVjdGlvbiBhbmQgZGlzdGFuY2Ugb2YgdGhlIHNlZ21lbnRcbiAgICAgKiBAcGFyYW0gcGFkZGluZyBQYWRzIHRoZSBBQUJCIHRvIG1ha2UgaXQgd2lkZXIgZm9yIHRoZSBpbnRlcnNlY3Rpb24gdGVzdFxuICAgICAqIEByZXR1cm5zIFRoZSBIaXQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgaW50ZXJzZWN0aW9uLCBvciBudWxsIGlmIHRoZXJlIHdhcyBubyBpbnRlcnNlY3Rpb25cbiAgICAgKi9cbiAgICBpbnRlcnNlY3RTZWdtZW50KHBvaW50OiBWZWMyLCBkZWx0YTogVmVjMiwgcGFkZGluZz86IFZlYzIpOiBIaXQge1xuICAgICAgICBsZXQgcGFkZGluZ1ggPSBwYWRkaW5nID8gcGFkZGluZy54IDogMDtcbiAgICAgICAgbGV0IHBhZGRpbmdZID0gcGFkZGluZyA/IHBhZGRpbmcueSA6IDA7XG5cbiAgICAgICAgbGV0IHNjYWxlWCA9IDEvZGVsdGEueDtcbiAgICAgICAgbGV0IHNjYWxlWSA9IDEvZGVsdGEueTtcblxuICAgICAgICBsZXQgc2lnblggPSBNYXRoVXRpbHMuc2lnbihzY2FsZVgpO1xuICAgICAgICBsZXQgc2lnblkgPSBNYXRoVXRpbHMuc2lnbihzY2FsZVkpO1xuXG4gICAgICAgIGxldCB0bmVhcnggPSBzY2FsZVgqKHRoaXMueCAtIHNpZ25YKih0aGlzLmh3ICsgcGFkZGluZ1gpIC0gcG9pbnQueCk7XG4gICAgICAgIGxldCB0bmVhcnkgPSBzY2FsZVkqKHRoaXMueSAtIHNpZ25ZKih0aGlzLmhoICsgcGFkZGluZ1kpIC0gcG9pbnQueSk7XG4gICAgICAgIGxldCB0ZmFyeCA9IHNjYWxlWCoodGhpcy54ICsgc2lnblgqKHRoaXMuaHcgKyBwYWRkaW5nWCkgLSBwb2ludC54KTtcbiAgICAgICAgbGV0IHRmYXJ5ID0gc2NhbGVZKih0aGlzLnkgKyBzaWduWSoodGhpcy5oaCArIHBhZGRpbmdZKSAtIHBvaW50LnkpO1xuICAgICAgICBcbiAgICAgICAgaWYodG5lYXJ4ID4gdGZhcnkgfHwgdG5lYXJ5ID4gdGZhcngpe1xuICAgICAgICAgICAgLy8gV2UgYXJlbid0IGNvbGxpZGluZyAtIHdlIGNsZWFyIG9uZSBheGlzIGJlZm9yZSBpbnRlcnNlY3RpbmcgYW5vdGhlclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdG5lYXIgPSBNYXRoLm1heCh0bmVhcngsIHRuZWFyeSk7XG5cbiAgICAgICAgLy8gRG91YmxlIGNoZWNrIGZvciBOYU5zXG4gICAgICAgIGlmKHRuZWFyeCAhPT0gdG5lYXJ4KXtcbiAgICAgICAgICAgIHRuZWFyID0gdG5lYXJ5O1xuICAgICAgICB9IGVsc2UgaWYgKHRuZWFyeSAhPT0gdG5lYXJ5KXtcbiAgICAgICAgICAgIHRuZWFyID0gdG5lYXJ4O1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHRmYXIgPSBNYXRoLm1pbih0ZmFyeCwgdGZhcnkpO1xuXG4gICAgICAgIGlmKHRuZWFyID09PSAtSW5maW5pdHkpe1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZih0bmVhciA+PSAxIHx8IHRmYXIgPD0gMCl7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdlIGFyZSBjb2xsaWRpbmdcbiAgICAgICAgbGV0IGhpdCA9IG5ldyBIaXQoKTtcbiAgICAgICAgaGl0LnRpbWUgPSBNYXRoVXRpbHMuY2xhbXAwMSh0bmVhcik7XG4gICAgICAgIGhpdC5uZWFyVGltZXMueCA9IHRuZWFyeDtcbiAgICAgICAgaGl0Lm5lYXJUaW1lcy55ID0gdG5lYXJ5O1xuXG4gICAgICAgIGlmKHRuZWFyeCA+IHRuZWFyeSl7XG4gICAgICAgICAgICAvLyBXZSBoaXQgb24gdGhlIGxlZnQgb3IgcmlnaHQgc2l6ZVxuICAgICAgICAgICAgaGl0Lm5vcm1hbC54ID0gLXNpZ25YO1xuICAgICAgICAgICAgaGl0Lm5vcm1hbC55ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmKE1hdGguYWJzKHRuZWFyeCAtIHRuZWFyeSkgPCAwLjAwMDEpe1xuICAgICAgICAgICAgLy8gV2UgaGl0IG9uIHRoZSBjb3JuZXJcbiAgICAgICAgICAgIGhpdC5ub3JtYWwueCA9IC1zaWduWDtcbiAgICAgICAgICAgIGhpdC5ub3JtYWwueSA9IC1zaWduWTtcbiAgICAgICAgICAgIGhpdC5ub3JtYWwubm9ybWFsaXplKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBXZSBoaXQgb24gdGhlIHRvcCBvciBib3R0b21cbiAgICAgICAgICAgIGhpdC5ub3JtYWwueCA9IDA7XG4gICAgICAgICAgICBoaXQubm9ybWFsLnkgPSAtc2lnblk7XG4gICAgICAgIH1cblxuICAgICAgICBoaXQuZGVsdGEueCA9ICgxLjAgLSBoaXQudGltZSkgKiAtZGVsdGEueDtcbiAgICAgICAgaGl0LmRlbHRhLnkgPSAoMS4wIC0gaGl0LnRpbWUpICogLWRlbHRhLnk7XG4gICAgICAgIGhpdC5wb3MueCA9IHBvaW50LnggKyBkZWx0YS54ICogaGl0LnRpbWU7XG4gICAgICAgIGhpdC5wb3MueSA9IHBvaW50LnkgKyBkZWx0YS55ICogaGl0LnRpbWU7XG5cbiAgICAgICAgcmV0dXJuIGhpdDtcbiAgICB9XG5cbiAgICAvLyBAb3ZlcnJpZGVcbiAgICBvdmVybGFwcyhvdGhlcjogU2hhcGUpOiBib29sZWFuIHtcbiAgICAgICAgaWYob3RoZXIgaW5zdGFuY2VvZiBBQUJCKXtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXBzQUFCQihvdGhlcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgXCJPdmVybGFwIG5vdCBkZWZpbmVkIGJldHdlZW4gdGhlc2Ugc2hhcGVzLlwiXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzaW1wbGUgYm9vbGVhbiBjaGVjayBvZiB3aGV0aGVyIHRoaXMgQUFCQiBvdmVybGFwcyBhbm90aGVyXG4gICAgICogQHBhcmFtIG90aGVyIFRoZSBvdGhlciBBQUJCIHRvIGNoZWNrIGFnYWluc3RcbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoaXMgQUFCQiBvdmVybGFwcyB0aGUgb3RoZXIsIGZhbHNlIG90aGVyd2lzZVxuICAgICAqL1xuICAgIHByb3RlY3RlZCBvdmVybGFwc0FBQkIob3RoZXI6IEFBQkIpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IGR4ID0gb3RoZXIueCAtIHRoaXMueDtcbiAgICAgICAgbGV0IHB4ID0gdGhpcy5odyArIG90aGVyLmh3IC0gTWF0aC5hYnMoZHgpO1xuICAgICAgICBcbiAgICAgICAgaWYocHggPD0gMCl7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZHkgPSBvdGhlci55IC0gdGhpcy55O1xuICAgICAgICBsZXQgcHkgPSB0aGlzLmhoICsgb3RoZXIuaGggLSBNYXRoLmFicyhkeSk7XG5cbiAgICAgICAgaWYocHkgPD0gMCl7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlc2UgQUFCQnMgYXJlIEpVU1QgdG91Y2hpbmcgLSBub3Qgb3ZlcmxhcHBpbmcuXG4gICAgICogVmVjMi54IGlzIC0xIGlmIHRoZSBvdGhlciBpcyB0byB0aGUgbGVmdCwgMSBpZiB0byB0aGUgcmlnaHQuXG4gICAgICogTGlrZXdpc2UsIFZlYzIueSBpcyAtMSBpZiB0aGUgb3RoZXIgaXMgb24gdG9wLCAxIGlmIG9uIGJvdHRvbS5cbiAgICAgKiBAcGFyYW0gb3RoZXIgVGhlIG90aGVyIEFBQkIgdG8gY2hlY2tcbiAgICAgKiBAcmV0dXJucyBUaGUgY29sbGlzaW9uIHNpZGVzIHN0b3JlZCBpbiBhIFZlYzIgaWYgdGhlIEFBQkJzIGFyZSB0b3VjaGluZywgbnVsbCBvdGhlcndpc2VcbiAgICAgKi9cbiAgICB0b3VjaGVzQUFCQihvdGhlcjogQUFCQik6IFZlYzIge1xuICAgICAgICBsZXQgZHggPSBvdGhlci54IC0gdGhpcy54O1xuICAgICAgICBsZXQgcHggPSB0aGlzLmh3ICsgb3RoZXIuaHcgLSBNYXRoLmFicyhkeCk7XG5cbiAgICAgICAgbGV0IGR5ID0gb3RoZXIueSAtIHRoaXMueTtcbiAgICAgICAgbGV0IHB5ID0gdGhpcy5oaCArIG90aGVyLmhoIC0gTWF0aC5hYnMoZHkpO1xuXG4gICAgICAgIC8vIElmIG9uZSBheGlzIGlzIGp1c3QgdG91Y2hpbmcgYW5kIHRoZSBvdGhlciBpcyBvdmVybGFwcGluZywgdHJ1ZVxuICAgICAgICBpZigocHggPT09IDAgJiYgcHkgPj0gMCkgfHwgKHB5ID09PSAwICYmIHB4ID49IDApKXtcbiAgICAgICAgICAgIGxldCByZXQgPSBuZXcgVmVjMigpO1xuXG4gICAgICAgICAgICBpZihweCA9PT0gMCl7XG4gICAgICAgICAgICAgICAgcmV0LnggPSBvdGhlci54IDwgdGhpcy54ID8gLTEgOiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihweSA9PT0gMCl7XG4gICAgICAgICAgICAgICAgcmV0LnkgPSBvdGhlci55IDwgdGhpcy55ID8gLTEgOiAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlc2UgQUFCQnMgYXJlIEpVU1QgdG91Y2hpbmcgLSBub3Qgb3ZlcmxhcHBpbmcuXG4gICAgICogQWxzbywgaWYgdGhleSBhcmUgb25seSB0b3VjaGluZyBjb3JuZXJzLCB0aGV5IGFyZSBjb25zaWRlcmVkIG5vdCB0b3VjaGluZy5cbiAgICAgKiBWZWMyLnggaXMgLTEgaWYgdGhlIG90aGVyIGlzIHRvIHRoZSBsZWZ0LCAxIGlmIHRvIHRoZSByaWdodC5cbiAgICAgKiBMaWtld2lzZSwgVmVjMi55IGlzIC0xIGlmIHRoZSBvdGhlciBpcyBvbiB0b3AsIDEgaWYgb24gYm90dG9tLlxuICAgICAqIEBwYXJhbSBvdGhlciBUaGUgb3RoZXIgQUFCQiB0byBjaGVja1xuICAgICAqIEByZXR1cm5zIFRoZSBzaWRlIG9mIHRoZSB0b3VjaCwgc3RvcmVkIGFzIGEgVmVjMiwgb3IgbnVsbCBpZiB0aGVyZSBpcyBubyB0b3VjaFxuICAgICAqL1xuICAgIHRvdWNoZXNBQUJCV2l0aG91dENvcm5lcnMob3RoZXI6IEFBQkIpOiBWZWMyIHtcbiAgICAgICAgbGV0IGR4ID0gb3RoZXIueCAtIHRoaXMueDtcbiAgICAgICAgbGV0IHB4ID0gdGhpcy5odyArIG90aGVyLmh3IC0gTWF0aC5hYnMoZHgpO1xuXG4gICAgICAgIGxldCBkeSA9IG90aGVyLnkgLSB0aGlzLnk7XG4gICAgICAgIGxldCBweSA9IHRoaXMuaGggKyBvdGhlci5oaCAtIE1hdGguYWJzKGR5KTtcblxuICAgICAgICAvLyBJZiBvbmUgYXhpcyBpcyB0b3VjaGluZywgYW5kIHRoZSBvdGhlciBpcyBzdHJpY3RseSBvdmVybGFwcGluZ1xuICAgICAgICBpZigocHggPT09IDAgJiYgcHkgPiAwKSB8fCAocHkgPT09IDAgJiYgcHggPiAwKSl7XG4gICAgICAgICAgICBsZXQgcmV0ID0gbmV3IFZlYzIoKTtcblxuICAgICAgICAgICAgaWYocHggPT09IDApe1xuICAgICAgICAgICAgICAgIHJldC54ID0gb3RoZXIueCA8IHRoaXMueCA/IC0xIDogMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0LnkgPSBvdGhlci55IDwgdGhpcy55ID8gLTEgOiAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgdGhlIGFyZWEgb2YgdGhlIG92ZXJsYXAgYmV0d2VlbiB0aGlzIEFBQkIgYW5kIGFub3RoZXJcbiAgICAgKiBAcGFyYW0gb3RoZXIgVGhlIG90aGVyIEFBQkJcbiAgICAgKiBAcmV0dXJucyBUaGUgYXJlYSBvZiB0aGUgb3ZlcmxhcCBiZXR3ZWVuIHRoZSBBQUJCc1xuICAgICAqL1xuICAgIG92ZXJsYXBBcmVhKG90aGVyOiBBQUJCKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGxlZnR4ID0gTWF0aC5tYXgodGhpcy54IC0gdGhpcy5odywgb3RoZXIueCAtIG90aGVyLmh3KTtcbiAgICAgICAgbGV0IHJpZ2h0eCA9IE1hdGgubWluKHRoaXMueCArIHRoaXMuaHcsIG90aGVyLnggKyBvdGhlci5odyk7XG4gICAgICAgIGxldCBkeCA9IHJpZ2h0eCAtIGxlZnR4O1xuXG4gICAgICAgIGxldCBsZWZ0eSA9IE1hdGgubWF4KHRoaXMueSAtIHRoaXMuaGgsIG90aGVyLnkgLSBvdGhlci5oaCk7XG4gICAgICAgIGxldCByaWdodHkgPSBNYXRoLm1pbih0aGlzLnkgKyB0aGlzLmhoLCBvdGhlci55ICsgb3RoZXIuaGgpO1xuICAgICAgICBsZXQgZHkgPSByaWdodHkgLSBsZWZ0eTtcblxuICAgICAgICBpZihkeCA8IDAgfHwgZHkgPCAwKSByZXR1cm4gMDtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBkeCpkeTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyBhbmQgcmVzaXplcyB0aGlzIHJlY3QgZnJvbSBpdHMgY3VycmVudCBwb3NpdGlvbiB0byB0aGUgcG9zaXRpb24gc3BlY2lmaWVkXG4gICAgICogQHBhcmFtIHZlbG9jaXR5IFRoZSBtb3ZlbWVudCBvZiB0aGUgcmVjdCBmcm9tIGl0cyBwb3NpdGlvblxuICAgICAqIEBwYXJhbSBmcm9tUG9zaXRpb24gQSBwb3NpdGlvbiBzcGVjaWZpZWQgdG8gYmUgdGhlIHN0YXJ0aW5nIHBvaW50IG9mIHN3ZWVwaW5nXG4gICAgICogQHBhcmFtIGhhbGZTaXplIFRoZSBoYWxmU2l6ZSBvZiB0aGUgc3dlZXBpbmcgcmVjdCBcbiAgICAgKi9cbiAgICBzd2VlcCh2ZWxvY2l0eTogVmVjMiwgZnJvbVBvc2l0aW9uPzogVmVjMiwgaGFsZlNpemU/OiBWZWMyKTogdm9pZCB7XG4gICAgICAgIGlmKCFmcm9tUG9zaXRpb24pe1xuICAgICAgICAgICAgZnJvbVBvc2l0aW9uID0gdGhpcy5jZW50ZXI7XG4gICAgICAgIH1cblxuICAgICAgICBpZighaGFsZlNpemUpe1xuICAgICAgICAgICAgaGFsZlNpemUgPSB0aGlzLmhhbGZTaXplO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGNlbnRlclggPSBmcm9tUG9zaXRpb24ueCArIHZlbG9jaXR5LngvMjtcbiAgICAgICAgbGV0IGNlbnRlclkgPSBmcm9tUG9zaXRpb24ueSArIHZlbG9jaXR5LnkvMjtcblxuICAgICAgICBsZXQgbWluWCA9IE1hdGgubWluKGZyb21Qb3NpdGlvbi54IC0gaGFsZlNpemUueCwgZnJvbVBvc2l0aW9uLnggKyB2ZWxvY2l0eS54IC0gaGFsZlNpemUueCk7XG4gICAgICAgIGxldCBtaW5ZID0gTWF0aC5taW4oZnJvbVBvc2l0aW9uLnkgLSBoYWxmU2l6ZS55LCBmcm9tUG9zaXRpb24ueSArIHZlbG9jaXR5LnkgLSBoYWxmU2l6ZS55KTtcblxuICAgICAgICB0aGlzLmNlbnRlci5zZXQoY2VudGVyWCwgY2VudGVyWSk7XG4gICAgICAgIHRoaXMuaGFsZlNpemUuc2V0KGNlbnRlclggLSBtaW5YLCBjZW50ZXJZIC0gbWluWSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEBvdmVycmlkZVxuICAgIGNsb25lKCk6IEFBQkIge1xuICAgICAgICByZXR1cm4gbmV3IEFBQkIodGhpcy5jZW50ZXIuY2xvbmUoKSwgdGhpcy5oYWxmU2l6ZS5jbG9uZSgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIEFBQkIgdG8gYSBzdHJpbmcgZm9ybWF0XG4gICAgICogQHJldHVybnMgKGNlbnRlcjogKHgsIHkpLCBoYWxmU2l6ZTogKHgsIHkpKVxuICAgICAqL1xuICAgIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcIihjZW50ZXI6IFwiICsgdGhpcy5jZW50ZXIudG9TdHJpbmcoKSArIFwiLCBoYWxmLXNpemU6IFwiICsgdGhpcy5oYWxmU2l6ZS50b1N0cmluZygpICsgXCIpXCJcbiAgICB9XG59IiwiaW1wb3J0IFZlYzIgZnJvbSBcIi4uL1ZlYzJcIjtcbmltcG9ydCBBQUJCIGZyb20gXCIuL0FBQkJcIjtcbmltcG9ydCBTaGFwZSBmcm9tIFwiLi9TaGFwZVwiO1xuXG4vKipcbiAqIEEgQ2lyY2xlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENpcmNsZSBleHRlbmRzIFNoYXBlIHtcblx0cHJpdmF0ZSBfY2VudGVyOiBWZWMyO1xuXHRyYWRpdXM6IG51bWJlcjtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgbmV3IENpcmNsZVxuXHQgKiBAcGFyYW0gY2VudGVyIFRoZSBjZW50ZXIgb2YgdGhlIGNpcmNsZVxuXHQgKiBAcGFyYW0gcmFkaXVzIFRoZSByYWRpdXMgb2YgdGhlIGNpcmNsZVxuXHQgKi9cblx0Y29uc3RydWN0b3IoY2VudGVyOiBWZWMyLCByYWRpdXM6IG51bWJlcikge1xuXHRcdHN1cGVyKCk7XG4gICAgICAgIHRoaXMuX2NlbnRlciA9IGNlbnRlciA/IGNlbnRlciA6IG5ldyBWZWMyKDAsIDApO1xuICAgICAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cyA/IHJhZGl1cyA6IDA7XG5cdH1cblxuXHRnZXQgY2VudGVyKCk6IFZlYzIge1xuXHRcdHJldHVybiB0aGlzLl9jZW50ZXI7XG5cdH1cblxuXHRzZXQgY2VudGVyKGNlbnRlcjogVmVjMikge1xuXHRcdHRoaXMuX2NlbnRlciA9IGNlbnRlcjtcblx0fVxuXG5cdGdldCBoYWxmU2l6ZSgpOiBWZWMyIHtcblx0XHRyZXR1cm4gbmV3IFZlYzIodGhpcy5yYWRpdXMsIHRoaXMucmFkaXVzKTtcblx0fVxuXG5cdGdldCByKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMucmFkaXVzO1xuXHR9XG5cblx0c2V0IHIocmFkaXVzOiBudW1iZXIpIHtcblx0XHR0aGlzLnJhZGl1cyA9IHJhZGl1cztcblx0fVxuXG5cdC8vIEBvdmVycmlkZVxuXHQvKipcbiAgICAgKiBBIHNpbXBsZSBib29sZWFuIGNoZWNrIG9mIHdoZXRoZXIgdGhpcyBBQUJCIGNvbnRhaW5zIGEgcG9pbnRcbiAgICAgKiBAcGFyYW0gcG9pbnQgVGhlIHBvaW50IHRvIGNoZWNrXG4gICAgICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB3aGV0aGVyIHRoaXMgQUFCQiBjb250YWlucyB0aGUgc3BlY2lmaWVkIHBvaW50XG4gICAgICovXG4gICAgY29udGFpbnNQb2ludChwb2ludDogVmVjMik6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5jZW50ZXIuZGlzdGFuY2VTcVRvKHBvaW50KSA8PSB0aGlzLnJhZGl1cyp0aGlzLnJhZGl1cztcbiAgICB9XG5cblx0Ly8gQG92ZXJyaWRlXG5cdGdldEJvdW5kaW5nUmVjdCgpOiBBQUJCIHtcblx0XHRyZXR1cm4gbmV3IEFBQkIodGhpcy5fY2VudGVyLmNsb25lKCksIG5ldyBWZWMyKHRoaXMucmFkaXVzLCB0aGlzLnJhZGl1cykpO1xuXHR9XG5cblx0Ly8gQG92ZXJyaWRlXG5cdGdldEJvdW5kaW5nQ2lyY2xlKCk6IENpcmNsZSB7XG5cdFx0cmV0dXJuIHRoaXMuY2xvbmUoKTtcblx0fVxuXG5cdC8vIEBvdmVycmlkZVxuXHRvdmVybGFwcyhvdGhlcjogU2hhcGUpOiBib29sZWFuIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcblx0fVxuXG5cdC8vIEBvdmVycmlkZVxuXHRjbG9uZSgpOiBDaXJjbGUge1xuXHRcdHJldHVybiBuZXcgQ2lyY2xlKHRoaXMuX2NlbnRlci5jbG9uZSgpLCB0aGlzLnJhZGl1cyk7XG5cdH1cblxuXHR0b1N0cmluZygpOiBzdHJpbmcge1xuXHRcdHJldHVybiBcIihjZW50ZXI6IFwiICsgdGhpcy5jZW50ZXIudG9TdHJpbmcoKSArIFwiLCByYWRpdXM6IFwiICsgdGhpcy5yYWRpdXMgKyBcIilcIjtcblx0fVxufSIsImltcG9ydCBWZWMyIGZyb20gXCIuLi9WZWMyXCI7XG5pbXBvcnQgQUFCQiBmcm9tIFwiLi9BQUJCXCI7XG5pbXBvcnQgQ2lyY2xlIGZyb20gXCIuL0NpcmNsZVwiO1xuXG4vKipcbiAqIEFuIGFic3RyYWN0IFNoYXBlIGNsYXNzIHRoYXQgYWN0cyBhcyBhbiBpbnRlcmZhY2UgZm9yIGJldHRlciBpbnRlcmFjdGlvbnMgd2l0aCBzdWJjbGFzc2VzLlxuICovXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBTaGFwZSB7XG4gICAgYWJzdHJhY3QgZ2V0IGNlbnRlcigpOiBWZWMyO1xuXG4gICAgYWJzdHJhY3Qgc2V0IGNlbnRlcihjZW50ZXI6IFZlYzIpO1xuXG4gICAgYWJzdHJhY3QgZ2V0IGhhbGZTaXplKCk6IFZlYzI7XG5cbiAgICBnZXQgeCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5jZW50ZXIueDtcbiAgICB9XG5cbiAgICBnZXQgeSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5jZW50ZXIueTtcbiAgICB9XG5cbiAgICBnZXQgaHcoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFsZlNpemUueDtcbiAgICB9XG5cbiAgICBnZXQgaGgoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFsZlNpemUueTtcbiAgICB9XG5cbiAgICBnZXQgdG9wKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnkgLSB0aGlzLmhoO1xuICAgIH1cblxuICAgIGdldCBib3R0b20oKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueSArIHRoaXMuaGg7XG4gICAgfVxuXG4gICAgZ2V0IGxlZnQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueCAtIHRoaXMuaHc7XG4gICAgfVxuXG4gICAgZ2V0IHJpZ2h0KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnggKyB0aGlzLmh3O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYSBib3VuZGluZyByZWN0YW5nbGUgZm9yIHRoaXMgc2hhcGUuIFdhcm5pbmcgLSBtYXkgYmUgdGhlIHNhbWUgYXMgdGhpcyBTaGFwZS5cbiAgICAgKiBGb3IgaW5zdGFuY2UsIHRoZSBib3VuZGluZyBjaXJjbGUgb2YgYW4gQUFCQiBpcyBpdHNlbGYuIFVzZSBjbG9uZSgpIGlmIHlvdSBuZWVkIGEgbmV3IHNoYXBlLlxuICAgICAqIEByZXR1cm5zIEFuIEFBQkIgdGhhdCBib3VuZHMgdGhpcyBzaGFwZVxuICAgICAqL1xuICAgIGFic3RyYWN0IGdldEJvdW5kaW5nUmVjdCgpOiBBQUJCO1xuXG4gICAgLyoqXG4gICAgICogR2V0cyBhIGJvdW5kaW5nIGNpcmNsZSBmb3IgdGhpcyBzaGFwZS4gV2FybmluZyAtIG1heSBiZSB0aGUgc2FtZSBhcyB0aGlzIFNoYXBlLlxuICAgICAqIEZvciBpbnN0YW5jZSwgdGhlIGJvdW5kaW5nIGNpcmNsZSBvZiBhIENpcmNsZSBpcyBpdHNlbGYuIFVzZSBjbG9uZSgpIGlmIHlvdSBuZWVkIGEgbmV3IHNoYXBlLlxuICAgICAqIEByZXR1cm5zIEEgQ2lyY2xlIHRoYXQgYm91bmRzIHRoaXMgc2hhcGVcbiAgICAgKi9cbiAgICBhYnN0cmFjdCBnZXRCb3VuZGluZ0NpcmNsZSgpOiBDaXJjbGU7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGlzIFNoYXBlXG4gICAgICogQHJldHVybnMgQSBuZXcgY29weSBvZiB0aGlzIHNoYXBlXG4gICAgICovXG4gICAgYWJzdHJhY3QgY2xvbmUoKTogU2hhcGU7XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhpcyBzaGFwZSBvdmVybGFwcyBhbm90aGVyXG4gICAgICogQHBhcmFtIG90aGVyIFRoZSBvdGhlciBzaGFwZSB0byBjaGVjayBhZ2FpbnN0XG4gICAgICogQHJldHVybnMgYSBib29sZWFuIHRoYXQgcmVwcmVzZW50cyB3aGV0aGVyIHRoaXMgU2hhcGUgb3ZlcmxhcHMgdGhlIG90aGVyIG9uZVxuICAgICAqL1xuICAgIGFic3RyYWN0IG92ZXJsYXBzKG90aGVyOiBTaGFwZSk6IGJvb2xlYW47XG5cbiAgICAgLyoqXG4gICAgICogQSBzaW1wbGUgYm9vbGVhbiBjaGVjayBvZiB3aGV0aGVyIHRoaXMgU2hhcGUgY29udGFpbnMgYSBwb2ludFxuICAgICAqIEBwYXJhbSBwb2ludCBUaGUgcG9pbnQgdG8gY2hlY2tcbiAgICAgKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHdoZXRoZXIgdGhpcyBTaGFwZSBjb250YWlucyB0aGUgc3BlY2lmaWVkIHBvaW50XG4gICAgICovXG4gICAgYWJzdHJhY3QgY29udGFpbnNQb2ludChwb2ludDogVmVjMik6IGJvb2xlYW47XG5cbiAgICBzdGF0aWMgZ2V0VGltZU9mQ29sbGlzaW9uKEE6IFNoYXBlLCB2ZWxBOiBWZWMyLCBCOiBTaGFwZSwgdmVsQjogVmVjMik6IFtWZWMyLCBWZWMyLCBib29sZWFuLCBib29sZWFuXSB7XG5cdFx0aWYoQSBpbnN0YW5jZW9mIEFBQkIgJiYgQiBpbnN0YW5jZW9mIEFBQkIpe1xuXHRcdFx0cmV0dXJuIFNoYXBlLmdldFRpbWVPZkNvbGxpc2lvbl9BQUJCX0FBQkIoQSwgdmVsQSwgQiwgdmVsQik7XG5cdFx0fVxuICAgIH1cbiAgICBcbiAgICBwcml2YXRlIHN0YXRpYyBnZXRUaW1lT2ZDb2xsaXNpb25fQUFCQl9BQUJCKEE6IEFBQkIsIHZlbEE6IFZlYzIsIEI6IFNoYXBlLCB2ZWxCOiBWZWMyKTogW1ZlYzIsIFZlYzIsIGJvb2xlYW4sIGJvb2xlYW5dIHtcbiAgICAgICAgbGV0IHBvc1NtYWxsZXIgPSBBLmNlbnRlcjtcbiAgICAgICAgbGV0IHBvc0xhcmdlciA9IEIuY2VudGVyO1xuICAgICAgICBcbiAgICAgICAgbGV0IHNpemVTbWFsbGVyID0gQS5oYWxmU2l6ZTtcbiAgICAgICAgbGV0IHNpemVMYXJnZXIgPSBCLmhhbGZTaXplO1xuICAgIFxuICAgICAgICBsZXQgZmlyc3RDb250YWN0ID0gbmV3IFZlYzIoMCwgMCk7XG4gICAgICAgIGxldCBsYXN0Q29udGFjdCA9IG5ldyBWZWMyKDAsIDApO1xuICAgIFxuICAgICAgICBsZXQgY29sbGlkaW5nWCA9IGZhbHNlO1xuICAgICAgICBsZXQgY29sbGlkaW5nWSA9IGZhbHNlO1xuICAgIFxuICAgICAgICAvLyBTb3J0IGJ5IHBvc2l0aW9uXG4gICAgICAgIGlmKHBvc0xhcmdlci54IDwgcG9zU21hbGxlci54KXtcbiAgICAgICAgICAgIC8vIFN3YXAsIGJlY2F1c2Ugc21hbGxlciBpcyBmdXJ0aGVyIHJpZ2h0IHRoYW4gbGFyZ2VyXG4gICAgICAgICAgICBsZXQgdGVtcDogVmVjMjtcbiAgICAgICAgICAgIHRlbXAgPSBzaXplU21hbGxlcjtcbiAgICAgICAgICAgIHNpemVTbWFsbGVyID0gc2l6ZUxhcmdlcjtcbiAgICAgICAgICAgIHNpemVMYXJnZXIgPSB0ZW1wO1xuICAgIFxuICAgICAgICAgICAgdGVtcCA9IHBvc1NtYWxsZXI7XG4gICAgICAgICAgICBwb3NTbWFsbGVyID0gcG9zTGFyZ2VyO1xuICAgICAgICAgICAgcG9zTGFyZ2VyID0gdGVtcDtcbiAgICBcbiAgICAgICAgICAgIHRlbXAgPSB2ZWxBO1xuICAgICAgICAgICAgdmVsQSA9IHZlbEI7XG4gICAgICAgICAgICB2ZWxCID0gdGVtcDtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBBIGlzIGxlZnQsIEIgaXMgcmlnaHRcbiAgICAgICAgZmlyc3RDb250YWN0LnggPSBJbmZpbml0eTtcbiAgICAgICAgbGFzdENvbnRhY3QueCA9IEluZmluaXR5O1xuICAgIFxuICAgICAgICBpZiAocG9zTGFyZ2VyLnggLSBzaXplTGFyZ2VyLnggPj0gcG9zU21hbGxlci54ICsgc2l6ZVNtYWxsZXIueCl7XG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmVuJ3QgY3VycmVudGx5IGNvbGxpZGluZ1xuICAgICAgICAgICAgbGV0IHJlbFZlbCA9IHZlbEEueCAtIHZlbEIueDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYocmVsVmVsID4gMCl7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhleSBhcmUgbW92aW5nIHRvd2FyZHMgZWFjaCBvdGhlclxuICAgICAgICAgICAgICAgIGZpcnN0Q29udGFjdC54ID0gKChwb3NMYXJnZXIueCAtIHNpemVMYXJnZXIueCkgLSAocG9zU21hbGxlci54ICsgc2l6ZVNtYWxsZXIueCkpLyhyZWxWZWwpO1xuICAgICAgICAgICAgICAgIGxhc3RDb250YWN0LnggPSAoKHBvc0xhcmdlci54ICsgc2l6ZUxhcmdlci54KSAtIChwb3NTbWFsbGVyLnggLSBzaXplU21hbGxlci54KSkvKHJlbFZlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb2xsaWRpbmdYID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBpZihwb3NMYXJnZXIueSA8IHBvc1NtYWxsZXIueSl7XG4gICAgICAgICAgICAvLyBTd2FwLCBiZWNhdXNlIHNtYWxsZXIgaXMgZnVydGhlciB1cCB0aGFuIGxhcmdlclxuICAgICAgICAgICAgbGV0IHRlbXA6IFZlYzI7XG4gICAgICAgICAgICB0ZW1wID0gc2l6ZVNtYWxsZXI7XG4gICAgICAgICAgICBzaXplU21hbGxlciA9IHNpemVMYXJnZXI7XG4gICAgICAgICAgICBzaXplTGFyZ2VyID0gdGVtcDtcbiAgICBcbiAgICAgICAgICAgIHRlbXAgPSBwb3NTbWFsbGVyO1xuICAgICAgICAgICAgcG9zU21hbGxlciA9IHBvc0xhcmdlcjtcbiAgICAgICAgICAgIHBvc0xhcmdlciA9IHRlbXA7XG4gICAgXG4gICAgICAgICAgICB0ZW1wID0gdmVsQTtcbiAgICAgICAgICAgIHZlbEEgPSB2ZWxCO1xuICAgICAgICAgICAgdmVsQiA9IHRlbXA7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gQSBpcyB0b3AsIEIgaXMgYm90dG9tXG4gICAgICAgIGZpcnN0Q29udGFjdC55ID0gSW5maW5pdHk7XG4gICAgICAgIGxhc3RDb250YWN0LnkgPSBJbmZpbml0eTtcbiAgICBcbiAgICAgICAgaWYgKHBvc0xhcmdlci55IC0gc2l6ZUxhcmdlci55ID49IHBvc1NtYWxsZXIueSArIHNpemVTbWFsbGVyLnkpe1xuICAgICAgICAgICAgLy8gSWYgd2UgYXJlbid0IGN1cnJlbnRseSBjb2xsaWRpbmdcbiAgICAgICAgICAgIGxldCByZWxWZWwgPSB2ZWxBLnkgLSB2ZWxCLnk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKHJlbFZlbCA+IDApe1xuICAgICAgICAgICAgICAgIC8vIElmIHRoZXkgYXJlIG1vdmluZyB0b3dhcmRzIGVhY2ggb3RoZXJcbiAgICAgICAgICAgICAgICBmaXJzdENvbnRhY3QueSA9ICgocG9zTGFyZ2VyLnkgLSBzaXplTGFyZ2VyLnkpIC0gKHBvc1NtYWxsZXIueSArIHNpemVTbWFsbGVyLnkpKS8ocmVsVmVsKTtcbiAgICAgICAgICAgICAgICBsYXN0Q29udGFjdC55ID0gKChwb3NMYXJnZXIueSArIHNpemVMYXJnZXIueSkgLSAocG9zU21hbGxlci55IC0gc2l6ZVNtYWxsZXIueSkpLyhyZWxWZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29sbGlkaW5nWSA9IHRydWU7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcmV0dXJuIFtmaXJzdENvbnRhY3QsIGxhc3RDb250YWN0LCBjb2xsaWRpbmdYLCBjb2xsaWRpbmdZXTtcbiAgICB9XG59IiwiaW1wb3J0IEVtaXR0ZXIgZnJvbSBcIi4uLy4uL0V2ZW50cy9FbWl0dGVyXCI7XG5pbXBvcnQgR2FtZUV2ZW50IGZyb20gXCIuLi8uLi9FdmVudHMvR2FtZUV2ZW50XCI7XG5pbXBvcnQgVXBkYXRlYWJsZSBmcm9tIFwiLi4vSW50ZXJmYWNlcy9VcGRhdGVhYmxlXCI7XG5pbXBvcnQgU3RhdGVNYWNoaW5lIGZyb20gXCIuL1N0YXRlTWFjaGluZVwiO1xuXG4vKipcbiAqIEFuIGFic3RyYWN0IGltcGxlbWVudGF0aW9uIG9mIGEgc3RhdGUgZm9yIGEgQHJlZmVyZW5jZVtTdGF0ZU1hY2hpbmVdLlxuICogVGhpcyBjbGFzcyBzaG91bGQgYmUgZXh0ZW5kZWQgdG8gYWxsb3cgZm9yIGN1c3RvbSBzdGF0ZSBiZWhhdmlvcnMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFN0YXRlIGltcGxlbWVudHMgVXBkYXRlYWJsZSB7XG4gICAgLyoqIFRoZSBTdGF0ZU1hY2hpbmUgdGhhdCB1c2VzIHRoaXMgU3RhdGUgKi9cbiAgICBwcm90ZWN0ZWQgcGFyZW50OiBTdGF0ZU1hY2hpbmU7XG5cbiAgICAvKiogQW4gZXZlbnQgZW1pdHRlciAqL1xuICAgIHByb3RlY3RlZCBlbWl0dGVyOiBFbWl0dGVyO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIG5ldyBTdGF0ZVxuICAgICAqIEBwYXJhbSBwYXJlbnQgVGhlIHBhcmVudCBTdGF0ZU1hY2hpbmUgb2YgdGhpcyBzdGF0ZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudDogU3RhdGVNYWNoaW5lKSB7XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLmVtaXR0ZXIgPSBuZXcgRW1pdHRlcigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgbWV0aG9kIHRoYXQgaXMgY2FsbGVkIHdoZW4gdGhpcyBzdGF0ZSBpcyBlbnRlcmVkLiBVc2UgdGhpcyB0byBpbml0aWFsaXplIGFueSB2YXJpYWJsZXMgYmVmb3JlIHVwZGF0ZXMgb2NjdXIuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgSW5mb3JtYXRpb24gdG8gcGFzcyB0byB0aGlzIHN0YXRlXG4gICAgICovXG4gICAgYWJzdHJhY3Qgb25FbnRlcihvcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIEEgbGlmZWN5Y2xlIG1ldGhvZCB0aGF0IGhhbmRsZXMgYW4gaW5wdXQgZXZlbnQsIHN1Y2ggYXMgdGFraW5nIGRhbWFnZS5cbiAgICAgKiBAcGFyYW0gZXZlbnQgVGhlIEdhbWVFdmVudCB0byBwcm9jZXNzXG4gICAgICovXG4gICAgYWJzdHJhY3QgaGFuZGxlSW5wdXQoZXZlbnQ6IEdhbWVFdmVudCk6IHZvaWQ7XG5cbiAgICAvLyBAaW1wbGVtZW50ZWRcbiAgICBhYnN0cmFjdCB1cGRhdGUoZGVsdGFUOiBudW1iZXIpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogVGVsbHMgdGhlIHN0YXRlIG1hY2hpbmUgdGhhdCB0aGlzIHN0YXRlIGhhcyBlbmRlZCwgYW5kIG1ha2VzIGl0IHRyYW5zaXRpb24gdG8gdGhlIG5ldyBzdGF0ZSBzcGVjaWZpZWRcbiAgICAgKiBAcGFyYW0gc3RhdGVOYW1lIFRoZSBuYW1lIG9mIHRoZSBzdGF0ZSB0byB0cmFuc2l0aW9uIHRvXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGZpbmlzaGVkKHN0YXRlTmFtZTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMucGFyZW50LmNoYW5nZVN0YXRlKHN0YXRlTmFtZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBsaWZlY3ljbGUgbWV0aG9kIGlzIGNhbGxlZCB3aGVuIHRoZSBzdGF0ZSBpcyBlbmRpbmcuXG4gICAgICogQHJldHVybnMgaW5mbyB0byBwYXNzIHRvIHRoZSBuZXh0IHN0YXRlXG4gICAgICovXG4gICAgYWJzdHJhY3Qgb25FeGl0KCk6IFJlY29yZDxzdHJpbmcsIGFueT47XG59IiwiaW1wb3J0IFN0YWNrIGZyb20gXCIuLi9Db2xsZWN0aW9ucy9TdGFja1wiO1xuaW1wb3J0IFN0YXRlIGZyb20gXCIuL1N0YXRlXCI7XG5pbXBvcnQgTWFwIGZyb20gXCIuLi9Db2xsZWN0aW9ucy9NYXBcIjtcbmltcG9ydCBHYW1lRXZlbnQgZnJvbSBcIi4uLy4uL0V2ZW50cy9HYW1lRXZlbnRcIjtcbmltcG9ydCBSZWNlaXZlciBmcm9tIFwiLi4vLi4vRXZlbnRzL1JlY2VpdmVyXCI7XG5pbXBvcnQgRW1pdHRlciBmcm9tIFwiLi4vLi4vRXZlbnRzL0VtaXR0ZXJcIjtcbmltcG9ydCBVcGRhdGVhYmxlIGZyb20gXCIuLi9JbnRlcmZhY2VzL1VwZGF0ZWFibGVcIjtcblxuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBhIFB1c2ggRG93biBBdXRvbWF0YSBTdGF0ZSBtYWNoaW5lLiBTdGF0ZXMgY2FuIGFsc28gYmUgaGllcmFyY2hpY2FsXG4gKiBmb3IgbW9yZSBmbGV4aWJpbGl0eSwgYXMgZGVzY3JpYmVkIGluIEBsaW5rKEdhbWUgUHJvZ3JhbW1pbmcgUGF0dGVybnMpKGh0dHBzOi8vZ2FtZXByb2dyYW1taW5ncGF0dGVybnMuY29tL3N0YXRlLmh0bWwpLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdGF0ZU1hY2hpbmUgaW1wbGVtZW50cyBVcGRhdGVhYmxlIHtcbiAgICAvKiogQSBzdGFjayBvZiB0aGUgY3VycmVudCBzdGF0ZXMgKi9cbiAgICBwcm90ZWN0ZWQgc3RhY2s6IFN0YWNrPFN0YXRlPjtcbiAgICAvKiogQSBtYXBlIG9mIHN0YXRlIGtleXMgdG8gYWN0dWFsIHN0YXRlIGluc3RhbmNlcyAqL1xuICAgIHByb3RlY3RlZCBzdGF0ZU1hcDogTWFwPFN0YXRlPjtcbiAgICAvKiogVGhlIGN1cnJlbnQgc3RhdGUgKi9cbiAgICBwcm90ZWN0ZWQgY3VycmVudFN0YXRlOiBTdGF0ZTtcbiAgICAvKiogQW4gZXZlbnQgcmVjZWl2ZXIgKi9cbiAgICBwcm90ZWN0ZWQgcmVjZWl2ZXI6IFJlY2VpdmVyO1xuICAgIC8qKiBBbiBldmVudCBlbWl0dGVyICovXG4gICAgcHJvdGVjdGVkIGVtaXR0ZXI6IEVtaXR0ZXI7XG4gICAgLyoqIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgd2hldGhlciBvciBub3QgdGhpcyBTdGF0ZU1hY2hpbmUgaXMgY3VycmVudGx5IGFjdGl2ZSAqL1xuICAgIHByb3RlY3RlZCBhY3RpdmU6IGJvb2xlYW47XG4gICAgLyoqIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgd2hldGhlciBvciBub3QgdGhpcyBTdGF0ZU1hY2hpbmUgc2hvdWxkIGVtaXQgYW4gZXZlbnQgb24gc3RhdGUgY2hhbmdlICovXG4gICAgcHJvdGVjdGVkIGVtaXRFdmVudE9uU3RhdGVDaGFuZ2U6IGJvb2xlYW47XG4gICAgLyoqIFRoZSBuYW1lIG9mIHRoZSBldmVudCB0byBiZSBlbWl0dGVkIG9uIHN0YXRlIGNoYW5nZSAqL1xuICAgIHByb3RlY3RlZCBzdGF0ZUNoYW5nZUV2ZW50TmFtZTogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBTdGF0ZU1hY2hpbmVcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICB0aGlzLnN0YWNrID0gbmV3IFN0YWNrKCk7XG4gICAgICAgIHRoaXMuc3RhdGVNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIgPSBuZXcgUmVjZWl2ZXIoKTtcbiAgICAgICAgdGhpcy5lbWl0dGVyID0gbmV3IEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5lbWl0RXZlbnRPblN0YXRlQ2hhbmdlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgYWN0aXZpdHkgc3RhdGUgb2YgdGhpcyBzdGF0ZSBtYWNoaW5lXG4gICAgICogQHBhcmFtIGZsYWcgVHJ1ZSBpZiB5b3Ugd2FudCB0byBzZXQgdGhpcyBtYWNoaW5lIHJ1bm5pbmcsIGZhbHNlIG90aGVyd2lzZVxuICAgICAqL1xuICAgIHNldEFjdGl2ZShmbGFnOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmxhZztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlcyB0aGlzIHN0YXRlIG1hY2hpbmUgZW1pdCBhbiBldmVudCBhbnkgdGltZSBpdHMgc3RhdGUgY2hhbmdlc1xuICAgICAqIEBwYXJhbSBzdGF0ZUNoYW5nZUV2ZW50TmFtZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQgdG8gZW1pdFxuICAgICAqL1xuICAgIHNldEVtaXRFdmVudE9uU3RhdGVDaGFuZ2Uoc3RhdGVDaGFuZ2VFdmVudE5hbWU6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmVtaXRFdmVudE9uU3RhdGVDaGFuZ2UgPSB0cnVlO1xuICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlRXZlbnROYW1lID0gc3RhdGVDaGFuZ2VFdmVudE5hbWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RvcHMgdGhpcyBzdGF0ZSBtYWNoaW5lIGZyb20gZW1pdHRpbmcgZXZlbnRzIG9uIHN0YXRlIGNoYW5nZS5cbiAgICAgKi9cbiAgICBjYW5jZWxFbWl0RXZlbnRPblN0YXRlQ2hhbmdlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmVtaXRFdmVudE9uU3RhdGVDaGFuZ2UgPSBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgdGhpcyBzdGF0ZSBtYWNoaW5lIHdpdGggYW4gaW5pdGlhbCBzdGF0ZSBhbmQgc2V0cyBpdCBydW5uaW5nXG4gICAgICogQHBhcmFtIGluaXRpYWxTdGF0ZSBUaGUgbmFtZSBvZiBpbml0aWFsIHN0YXRlIG9mIHRoZSBzdGF0ZSBtYWNoaW5lXG4gICAgICovXG4gICAgaW5pdGlhbGl6ZShpbml0aWFsU3RhdGU6IHN0cmluZywgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIGFueT4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zdGFjay5wdXNoKHRoaXMuc3RhdGVNYXAuZ2V0KGluaXRpYWxTdGF0ZSkpO1xuICAgICAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IHRoaXMuc3RhY2sucGVlaygpO1xuICAgICAgICB0aGlzLmN1cnJlbnRTdGF0ZS5vbkVudGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLnNldEFjdGl2ZSh0cnVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgc3RhdGUgdG8gdGhpcyBzdGF0ZSBtYWNoaW5lXG4gICAgICogQHBhcmFtIHN0YXRlTmFtZSBUaGUgbmFtZSBvZiB0aGUgc3RhdGUgdG8gYWRkXG4gICAgICogQHBhcmFtIHN0YXRlIFRoZSBzdGF0ZSB0byBhZGRcbiAgICAgKi9cbiAgICBhZGRTdGF0ZShzdGF0ZU5hbWU6IHN0cmluZywgc3RhdGU6IFN0YXRlKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RhdGVNYXAuYWRkKHN0YXRlTmFtZSwgc3RhdGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIHN0YXRlIG9mIHRoaXMgc3RhdGUgbWFjaGluZSB0byB0aGUgcHJvdmlkZWQgc3RyaW5nXG4gICAgICogQHBhcmFtIHN0YXRlIFRoZSBzdHJpbmcgbmFtZSBvZiB0aGUgc3RhdGUgdG8gY2hhbmdlIHRvXG4gICAgICovXG4gICAgY2hhbmdlU3RhdGUoc3RhdGU6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICAvLyBFeGl0IHRoZSBjdXJyZW50IHN0YXRlXG4gICAgICAgIGxldCBvcHRpb25zID0gdGhpcy5jdXJyZW50U3RhdGUub25FeGl0KCk7XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBjb3JyZWN0IHN0YXRlIGlzIGF0IHRoZSB0b3Agb2YgdGhlIHN0YWNrXG4gICAgICAgIGlmKHN0YXRlID09PSBcInByZXZpb3VzXCIpe1xuICAgICAgICAgICAgLy8gUG9wIHRoZSBjdXJyZW50IHN0YXRlIG9mZiB0aGUgc3RhY2tcbiAgICAgICAgICAgIHRoaXMuc3RhY2sucG9wKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBSZXRyaWV2ZSB0aGUgbmV3IHN0YXRlIGZyb20gdGhlIHN0YXRlbWFwIGFuZCBwdXQgaXQgYXQgdGhlIHRvcCBvZiB0aGUgc3RhY2tcbiAgICAgICAgICAgIHRoaXMuc3RhY2sucG9wKCk7XG4gICAgICAgICAgICB0aGlzLnN0YWNrLnB1c2godGhpcy5zdGF0ZU1hcC5nZXQoc3RhdGUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJldHJlaXZlIHRoZSBuZXcgc3RhdGUgZnJvbSB0aGUgc3RhY2tcbiAgICAgICAgdGhpcy5jdXJyZW50U3RhdGUgPSB0aGlzLnN0YWNrLnBlZWsoKTtcblxuICAgICAgICAvLyBFbWl0IGFuIGV2ZW50IGlmIHR1cm5lZCBvblxuICAgICAgICBpZih0aGlzLmVtaXRFdmVudE9uU3RhdGVDaGFuZ2Upe1xuICAgICAgICAgICAgdGhpcy5lbWl0dGVyLmZpcmVFdmVudCh0aGlzLnN0YXRlQ2hhbmdlRXZlbnROYW1lLCB7c3RhdGU6IHRoaXMuY3VycmVudFN0YXRlfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFbnRlciB0aGUgbmV3IHN0YXRlXG4gICAgICAgIHRoaXMuY3VycmVudFN0YXRlLm9uRW50ZXIob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlcyBpbnB1dC4gVGhpcyBoYXBwZW5zIGF0IHRoZSB2ZXJ5IGJlZ2lubmluZyBvZiB0aGlzIHN0YXRlIG1hY2hpbmUncyB1cGRhdGUgY3ljbGUuXG4gICAgICogQHBhcmFtIGV2ZW50IFRoZSBnYW1lIGV2ZW50IHRvIHByb2Nlc3NcbiAgICAgKi9cbiAgICBoYW5kbGVFdmVudChldmVudDogR2FtZUV2ZW50KTogdm9pZCB7XG4gICAgICAgIGlmKHRoaXMuYWN0aXZlKXtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFN0YXRlLmhhbmRsZUlucHV0KGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEBpbXBsZW1lbnRlZFxuICAgIHVwZGF0ZShkZWx0YVQ6IG51bWJlcik6IHZvaWQge1xuICAgICAgICAvLyBEaXN0cmlidXRlIGV2ZW50c1xuICAgICAgICB3aGlsZSh0aGlzLnJlY2VpdmVyLmhhc05leHRFdmVudCgpKXtcbiAgICAgICAgICAgIGxldCBldmVudCA9IHRoaXMucmVjZWl2ZXIuZ2V0TmV4dEV2ZW50KCk7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUV2ZW50KGV2ZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERlbGVnYXRlIHRoZSB1cGRhdGUgdG8gdGhlIGN1cnJlbnQgc3RhdGVcbiAgICAgICAgdGhpcy5jdXJyZW50U3RhdGUudXBkYXRlKGRlbHRhVCk7XG4gICAgfVxufSIsImltcG9ydCBSZXNvdXJjZU1hbmFnZXIgZnJvbSBcIi4uLy4uL1Jlc291cmNlTWFuYWdlci9SZXNvdXJjZU1hbmFnZXJcIjtcbmltcG9ydCBWZWMyIGZyb20gXCIuLi9WZWMyXCI7XG5pbXBvcnQgeyBUaWxlZFRpbGVzZXREYXRhIH0gZnJvbSBcIi4vVGlsZWREYXRhXCI7XG5cbi8qKlxuICogVGhlIGRhdGEgcmVwcmVzZW50YXRpb24gb2YgYSBUaWxlc2V0IGZvciB0aGUgZ2FtZSBlbmdpbmUuIFRoaXMgcmVwcmVzZW50cyBvbmUgaW1hZ2UsXG4gKiB3aXRoIGEgc3RhcnRJbmRleCBpZiByZXF1aXJlZCAoYXMgaXQgaXMgd2l0aCBUaWxlZCB1c2luZyB0d28gaW1hZ2VzIGluIG9uZSB0aWxzZXQpLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUaWxlc2V0IHtcbiAgICAvKiogVGhlIGtleSBvZiB0aGUgaW1hZ2UgdXNlZCBieSB0aGlzIHRpbGVzZXQgKi9cbiAgICBwcm90ZWN0ZWQgaW1hZ2VLZXk6IHN0cmluZztcbiAgICAvKiogVGhlIHNpemUgb2YgdGhlIHRpbGVzZXQgaW1hZ2UgKi9cbiAgICBwcm90ZWN0ZWQgaW1hZ2VTaXplOiBWZWMyO1xuICAgIC8qKiBUaGUgaW5kZXggb2YgMHRoIGltYWdlIG9mIHRoaXMgdGlsZXNldCAqL1xuICAgIHByb3RlY3RlZCBzdGFydEluZGV4OiBudW1iZXI7XG4gICAgLyoqIFRoZSBpbmRleCBvZiB0aGUgbGFzdCBpbWFnZSBvZiB0aGlzIHRpbHNldCAqL1xuICAgIHByb3RlY3RlZCBlbmRJbmRleDogbnVtYmVyO1xuICAgIC8qKiBUaGUgc2l6ZSBvZiB0aGUgdGlsZXMgaW4gdGhpcyB0aWxlc2V0ICovXG4gICAgcHJvdGVjdGVkIHRpbGVTaXplOiBWZWMyO1xuICAgIC8qKiBUaGUgbnVtYmVyIG9mIHJvd3MgaW4gdGhpcyB0aWxlc2V0ICovXG4gICAgcHJvdGVjdGVkIG51bVJvd3M6IG51bWJlcjtcbiAgICAvKiogVGhlIG51bWJlciBvZiBjb2x1bW5zIGluIHRoaXMgdGlsZXNldCAqL1xuICAgIHByb3RlY3RlZCBudW1Db2xzOiBudW1iZXI7XG5cbiAgICAvLyBUT0RPOiBDaGFuZ2UgdGhpcyB0byBiZSBtb3JlIGdlbmVyYWwgYW5kIHdvcmsgd2l0aCBvdGhlciB0aWxlc2V0IGZvcm1hdHNcbiAgICBjb25zdHJ1Y3Rvcih0aWxlc2V0RGF0YTogVGlsZWRUaWxlc2V0RGF0YSl7XG4gICAgICAgIC8vIERlZmVyIGhhbmRsaW5nIG9mIHRoZSBkYXRhIHRvIGEgaGVscGVyIGNsYXNzXG4gICAgICAgIHRoaXMuaW5pdEZyb21UaWxlZERhdGEodGlsZXNldERhdGEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgdGhlIHRpbGVzZXQgZnJvbSB0aGUgZGF0YSBmcm9tIGEgVGlsZWQganNvbiBmaWxlXG4gICAgICogQHBhcmFtIHRpbGVkRGF0YSBUaGUgcGFyc2VkIG9iamVjdCBmcm9tIGEgVGlsZWQganNvbiBmaWxlXG4gICAgICovXG4gICAgaW5pdEZyb21UaWxlZERhdGEodGlsZWREYXRhOiBUaWxlZFRpbGVzZXREYXRhKTogdm9pZCB7XG4gICAgICAgIHRoaXMubnVtUm93cyA9IHRpbGVkRGF0YS50aWxlY291bnQvdGlsZWREYXRhLmNvbHVtbnM7XG4gICAgICAgIHRoaXMubnVtQ29scyA9IHRpbGVkRGF0YS5jb2x1bW5zO1xuICAgICAgICB0aGlzLnN0YXJ0SW5kZXggPSB0aWxlZERhdGEuZmlyc3RnaWQ7XG4gICAgICAgIHRoaXMuZW5kSW5kZXggPSB0aGlzLnN0YXJ0SW5kZXggKyB0aWxlZERhdGEudGlsZWNvdW50IC0gMTtcbiAgICAgICAgdGhpcy50aWxlU2l6ZSA9IG5ldyBWZWMyKHRpbGVkRGF0YS50aWxld2lkdGgsIHRpbGVkRGF0YS50aWxld2lkdGgpO1xuICAgICAgICB0aGlzLmltYWdlS2V5ID0gdGlsZWREYXRhLmltYWdlO1xuICAgICAgICB0aGlzLmltYWdlU2l6ZSA9IG5ldyBWZWMyKHRpbGVkRGF0YS5pbWFnZXdpZHRoLCB0aWxlZERhdGEuaW1hZ2VoZWlnaHQpO1xuICAgIH1cblxuICAgIC8qKiBcbiAgICAgKiBHZXRzIHRoZSBpbWFnZSBrZXkgYXNzb2NpYXRlZCB3aXRoIHRoaXMgdGlsZW1hcFxuICAgICAqIEByZXR1cm5zIFRoZSBpbWFnZSBrZXkgb2YgdGhpcyB0aWxlbWFwXG4gICAgICovXG4gICAgZ2V0SW1hZ2VLZXkoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW1hZ2VLZXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFZlYzIgY29udGFpbmluZyB0aGUgbGVmdCBhbmQgdG9wIG9mZnNldCBmcm9tIHRoZSBpbWFnZSBvcmlnaW4gZm9yIHRoaXMgdGlsZS5cbiAgICAgKiBAcGFyYW0gdGlsZUluZGV4IFRoZSBpbmRleCBvZiB0aGUgdGlsZSBmcm9tIHN0YXJ0SW5kZXggdG8gZW5kSW5kZXggb2YgdGhpcyB0aWxlc2V0XG4gICAgICogQHJldHVybnMgQSBWZWMyIGNvbnRhaW5pbmcgdGhlIG9mZnNldCBmb3IgdGhlIHNwZWNpZmllZCB0aWxlLlxuICAgICAqL1xuICAgIGdldEltYWdlT2Zmc2V0Rm9yVGlsZSh0aWxlSW5kZXg6IG51bWJlcik6IFZlYzIge1xuICAgICAgICAvLyBHZXQgdGhlIHRydWUgaW5kZXhcbiAgICAgICAgbGV0IGluZGV4ID0gdGlsZUluZGV4IC0gdGhpcy5zdGFydEluZGV4O1xuICAgICAgICBsZXQgcm93ID0gTWF0aC5mbG9vcihpbmRleCAvIHRoaXMubnVtQ29scyk7XG4gICAgICAgIGxldCBjb2wgPSBpbmRleCAlIHRoaXMubnVtQ29scztcbiAgICAgICAgbGV0IHdpZHRoID0gdGhpcy50aWxlU2l6ZS54O1xuICAgICAgICBsZXQgaGVpZ2h0ID0gdGhpcy50aWxlU2l6ZS55O1xuXG4gICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgcG9zaXRpb24gdG8gc3RhcnQgYSBjcm9wIGluIHRoZSB0aWxlc2V0IGltYWdlXG4gICAgICAgIGxldCBsZWZ0ID0gY29sICogd2lkdGg7XG4gICAgICAgIGxldCB0b3AgPSByb3cgKiBoZWlnaHQ7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBWZWMyKGxlZnQsIHRvcCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc3RhcnQgaW5kZXhcbiAgICAgKiBAcmV0dXJucyBUaGUgc3RhcnQgaW5kZXhcbiAgICAgKi9cbiAgICBnZXRTdGFydEluZGV4KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXJ0SW5kZXg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgdGlsZSBzZXRcbiAgICAgKiBAcmV0dXJucyBBIFZlYzIgY29udGFpbmluZyB0aGUgdGlsZSBzaXplXG4gICAgICovXG4gICAgZ2V0VGlsZVNpemUoKTogVmVjMiB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVTaXplO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG51bWJlciBvZiByb3dzIGluIHRoZSB0aWxlc2V0XG4gICAgICogQHJldHVybnMgVGhlIG51bWJlciBvZiByb3dzXG4gICAgICovXG4gICAgZ2V0TnVtUm93cygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5udW1Sb3dzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG51bWJlciBvZiBjb2x1bW5zIGluIHRoZSB0aWxzZXRcbiAgICAgKiBAcmV0dXJucyBUaGUgbnVtYmVyIG9mIGNvbHVtbnNcbiAgICAgKi9cbiAgICBnZXROdW1Db2xzKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLm51bUNvbHM7XG4gICAgfVxuXG4gICAgZ2V0VGlsZUNvdW50KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZEluZGV4IC0gdGhpcy5zdGFydEluZGV4ICsgMTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3Mgd2hldGhlciBvciBub3QgdGhpcyB0aWxzZXQgY29udGFpbnMgdGhlIHNwZWNpZmllZCB0aWxlIGluZGV4LiBUaGlzIGlzIHVzZWQgZm9yIHJlbmRlcmluZy5cbiAgICAgKiBAcGFyYW0gdGlsZUluZGV4IFRoZSBpbmRleCBvZiB0aGUgdGlsZSB0byBjaGVja1xuICAgICAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgd2hldGhlciBvciBub3QgdGhpcyB0aWxzZXQgdXNlcyB0aGUgc3BlY2lmaWVkIGluZGV4XG4gICAgICovXG4gICAgaGFzVGlsZSh0aWxlSW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGlsZUluZGV4ID49IHRoaXMuc3RhcnRJbmRleCAmJiB0aWxlSW5kZXggPD0gdGhpcy5lbmRJbmRleDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXIgYSBzaW5ndWxhciB0aWxlIHdpdGggaW5kZXggdGlsZUluZGV4IGZyb20gdGhlIHRpbGVzZXQgbG9jYXRlZCBhdCBwb3NpdGlvbiBkYXRhSW5kZXhcbiAgICAgKiBAcGFyYW0gY3R4IFRoZSByZW5kZXJpbmcgY29udGV4dFxuICAgICAqIEBwYXJhbSB0aWxlSW5kZXggVGhlIHZhbHVlIG9mIHRoZSB0aWxlIHRvIHJlbmRlclxuICAgICAqIEBwYXJhbSBkYXRhSW5kZXggVGhlIGluZGV4IG9mIHRoZSB0aWxlIGluIHRoZSBkYXRhIGFycmF5XG4gICAgICogQHBhcmFtIHdvcmxkU2l6ZSBUaGUgc2l6ZSBvZiB0aGUgd29ybGRcbiAgICAgKiBAcGFyYW0gb3JpZ2luIFRoZSB2aWV3cG9ydCBvcmlnaW4gaW4gdGhlIGN1cnJlbnQgbGF5ZXJcbiAgICAgKiBAcGFyYW0gc2NhbGUgVGhlIHNjYWxlIG9mIHRoZSB0aWxlbWFwXG4gICAgICovXG4gICAgcmVuZGVyVGlsZShjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgdGlsZUluZGV4OiBudW1iZXIsIGRhdGFJbmRleDogbnVtYmVyLCBtYXhDb2xzOiBudW1iZXIsIG9yaWdpbjogVmVjMiwgc2NhbGU6IFZlYzIsIHpvb206IG51bWJlcik6IHZvaWQge1xuICAgICAgICBsZXQgaW1hZ2UgPSBSZXNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXRJbWFnZSh0aGlzLmltYWdlS2V5KTtcblxuICAgICAgICAvLyBHZXQgdGhlIHRydWUgaW5kZXhcbiAgICAgICAgbGV0IGluZGV4ID0gdGlsZUluZGV4IC0gdGhpcy5zdGFydEluZGV4O1xuICAgICAgICBsZXQgcm93ID0gTWF0aC5mbG9vcihpbmRleCAvIHRoaXMubnVtQ29scyk7XG4gICAgICAgIGxldCBjb2wgPSBpbmRleCAlIHRoaXMubnVtQ29scztcbiAgICAgICAgbGV0IHdpZHRoID0gdGhpcy50aWxlU2l6ZS54O1xuICAgICAgICBsZXQgaGVpZ2h0ID0gdGhpcy50aWxlU2l6ZS55O1xuXG4gICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgcG9zaXRpb24gdG8gc3RhcnQgYSBjcm9wIGluIHRoZSB0aWxlc2V0IGltYWdlXG4gICAgICAgIGxldCBsZWZ0ID0gY29sICogd2lkdGg7XG4gICAgICAgIGxldCB0b3AgPSByb3cgKiBoZWlnaHQ7XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBwb3NpdGlvbiBpbiB0aGUgd29ybGQgdG8gcmVuZGVyIHRoZSB0aWxlXG4gICAgICAgIGxldCB4ID0gTWF0aC5mbG9vcigoZGF0YUluZGV4ICUgbWF4Q29scykgKiB3aWR0aCAqIHNjYWxlLngpO1xuICAgICAgICBsZXQgeSA9IE1hdGguZmxvb3IoTWF0aC5mbG9vcihkYXRhSW5kZXggLyBtYXhDb2xzKSAqIGhlaWdodCAqIHNjYWxlLnkpO1xuICAgICAgICBjdHguZHJhd0ltYWdlKGltYWdlLCBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQsIE1hdGguZmxvb3IoKHggLSBvcmlnaW4ueCkqem9vbSksIE1hdGguZmxvb3IoKHkgLSBvcmlnaW4ueSkqem9vbSksIE1hdGguY2VpbCh3aWR0aCAqIHNjYWxlLnggKiB6b29tKSwgTWF0aC5jZWlsKGhlaWdodCAqIHNjYWxlLnkgKiB6b29tKSk7XG4gICAgfVxufSIsImltcG9ydCBNYXRoVXRpbHMgZnJvbSBcIi4uL1V0aWxzL01hdGhVdGlsc1wiO1xuXG4vKipcbiAqIEEgdHdvLWRpbWVuc2lvbmFsIHZlY3RvciAoeCwgeSlcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmVjMiB7XG5cblx0Ly8gU3RvcmUgeCBhbmQgeSBpbiBhbiBhcnJheVxuXHQvKiogVGhlIGFycmF5IHRoYXQgc3RvcmVzIHRoZSBhY3R1YWwgdmVjdG9yIHZhbHVlcyB4IGFuZCB5ICovXG5cdHByaXZhdGUgdmVjOiBGbG9hdDMyQXJyYXk7XG5cblx0LyoqXHRcblx0ICogV2hlbiB0aGlzIHZlY3RvciBjaGFuZ2VzIGl0cyB2YWx1ZSwgZG8gc29tZXRoaW5nXG5cdCAqL1xuXHRwcml2YXRlIG9uQ2hhbmdlOiBGdW5jdGlvbiA9ICgpID0+IHt9O1xuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgbmV3IFZlYzJcblx0ICogQHBhcmFtIHggVGhlIHggdmFsdWUgb2YgdGhlIHZlY3RvclxuXHQgKiBAcGFyYW0geSBUaGUgeSB2YWx1ZSBvZiB0aGUgdmVjdG9yXG5cdCAqL1xuXHRjb25zdHJ1Y3Rvcih4OiBudW1iZXIgPSAwLCB5OiBudW1iZXIgPSAwKSB7XG5cdFx0dGhpcy52ZWMgPSBuZXcgRmxvYXQzMkFycmF5KDIpO1xuXHRcdHRoaXMudmVjWzBdID0geDtcblx0XHR0aGlzLnZlY1sxXSA9IHk7XG5cdH1cblxuXHQvLyBFeHBvc2UgeCBhbmQgeSB3aXRoIGdldHRlcnMgYW5kIHNldHRlcnNcblx0Z2V0IHgoKSB7XG5cdFx0cmV0dXJuIHRoaXMudmVjWzBdO1xuXHR9XG5cblx0c2V0IHgoeDogbnVtYmVyKSB7XG5cdFx0dGhpcy52ZWNbMF0gPSB4O1xuXG5cdFx0aWYodGhpcy5vbkNoYW5nZSl7XG5cdFx0XHR0aGlzLm9uQ2hhbmdlKCk7XG5cdFx0fVxuXHR9XG5cblx0Z2V0IHkoKSB7XG5cdFx0cmV0dXJuIHRoaXMudmVjWzFdO1xuXHR9XG5cblx0c2V0IHkoeTogbnVtYmVyKSB7XG5cdFx0dGhpcy52ZWNbMV0gPSB5O1xuXG5cdFx0aWYodGhpcy5vbkNoYW5nZSl7XG5cdFx0XHR0aGlzLm9uQ2hhbmdlKCk7XG5cdFx0fVxuXHR9XG5cblx0c3RhdGljIGdldCBaRVJPKCkge1xuXHRcdHJldHVybiBuZXcgVmVjMigwLCAwKTtcblx0fVxuXG5cdHN0YXRpYyByZWFkb25seSBaRVJPX1NUQVRJQyA9IG5ldyBWZWMyKDAsIDApO1xuXG5cdHN0YXRpYyBnZXQgSU5GKCkge1xuXHRcdHJldHVybiBuZXcgVmVjMihJbmZpbml0eSwgSW5maW5pdHkpO1xuXHR9XG5cblx0c3RhdGljIGdldCBVUCgpIHtcblx0XHRyZXR1cm4gbmV3IFZlYzIoMCwgLTEpO1xuXHR9XG5cblx0c3RhdGljIGdldCBET1dOKCkge1xuXHRcdHJldHVybiBuZXcgVmVjMigwLCAxKTtcblx0fVxuXG5cdHN0YXRpYyBnZXQgTEVGVCgpIHtcblx0XHRyZXR1cm4gbmV3IFZlYzIoLTEsIDApO1xuXHR9XG5cblx0c3RhdGljIGdldCBSSUdIVCgpIHtcblx0XHRyZXR1cm4gbmV3IFZlYzIoMSwgMCk7XG5cdH1cblxuXHQvKipcblx0ICogVGhlIHNxdWFyZWQgbWFnbml0dWRlIG9mIHRoZSB2ZWN0b3IuIFRoaXMgdGVuZHMgdG8gYmUgZmFzdGVyLCBzbyB1c2UgaXQgaW4gc2l0dWF0aW9ucyB3aGVyZSB0YWtpbmcgdGhlXG5cdCAqIHNxdWFyZSByb290IGRvZXNuJ3QgbWF0dGVyLCBsaWtlIGZvciBjb21wYXJpbmcgZGlzdGFuY2VzLlxuXHQgKiBAcmV0dXJucyBUaGUgc3F1YXJlZCBtYWduaXR1ZGUgb2YgdGhlIHZlY3RvclxuXHQgKi9cblx0bWFnU3EoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy54KnRoaXMueCArIHRoaXMueSp0aGlzLnk7XG5cdH1cblxuXHQvKipcblx0ICogVGhlIG1hZ25pdHVkZSBvZiB0aGUgdmVjdG9yLlxuXHQgKiBAcmV0dXJucyBUaGUgbWFnbml0dWRlIG9mIHRoZSB2ZWN0b3IuXG5cdCAqL1xuXHRtYWcoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gTWF0aC5zcXJ0KHRoaXMubWFnU3EoKSk7XG5cdH1cblxuXHQvKipcblx0ICogRGl2ZGVzIHggYW5kIHkgYnkgdGhlIG1hZ25pdHVkZSB0byBvYnRhaW4gdGhlIHVuaXQgdmVjdG9yIGluIHRoZSBkaXJlY3Rpb24gb2YgdGhpcyB2ZWN0b3IuXG5cdCAqIEByZXR1cm5zIFRoaXMgdmVjdG9yIGFzIGEgdW5pdCB2ZWN0b3IuXG5cdCAqL1xuXHRub3JtYWxpemUoKTogVmVjMiB7XG5cdFx0aWYodGhpcy54ID09PSAwICYmIHRoaXMueSA9PT0gMCkgcmV0dXJuIHRoaXM7XG5cdFx0bGV0IG1hZyA9IHRoaXMubWFnKCk7XG5cdFx0dGhpcy54IC89IG1hZztcblx0XHR0aGlzLnkgLz0gbWFnO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0LyoqXG5cdCAqIFdvcmtzIGxpa2Ugbm9ybWFsaXplKCksIGJ1dCByZXR1cm5zIGEgbmV3IFZlYzJcblx0ICogQHJldHVybnMgQSBuZXcgdmVjdG9yIHRoYXQgaXMgdGhlIHVuaXQgdmVjdG9yIGZvciB0aGlzIG9uZVxuXHQgKi9cblx0bm9ybWFsaXplZCgpOiBWZWMyIHtcblx0XHRpZih0aGlzLmlzWmVybygpKXtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0XHRcblx0XHRsZXQgbWFnID0gdGhpcy5tYWcoKTtcblx0XHRyZXR1cm4gbmV3IFZlYzIodGhpcy54L21hZywgdGhpcy55L21hZyk7XG5cdH1cblxuXHQvKipcblx0ICogU2V0cyB0aGUgeCBhbmQgeSBlbGVtZW50cyBvZiB0aGlzIHZlY3RvciB0byB6ZXJvLlxuXHQgKiBAcmV0dXJucyBUaGlzIHZlY3Rvciwgd2l0aCB4IGFuZCB5IHNldCB0byB6ZXJvLlxuXHQgKi9cblx0emVybygpOiBWZWMyIHtcblx0XHRyZXR1cm4gdGhpcy5zZXQoMCwgMCk7XG5cdH1cblxuXHQvKipcblx0ICogU2V0cyB0aGUgdmVjdG9yJ3MgeCBhbmQgeSBiYXNlZCBvbiB0aGUgYW5nbGUgcHJvdmlkZWQuIEdvZXMgY291bnRlciBjbG9ja3dpc2UuXG5cdCAqIEBwYXJhbSBhbmdsZSBUaGUgYW5nbGUgaW4gcmFkaWFuc1xuXHQgKiBAcGFyYW0gcmFkaXVzIFRoZSBtYWduaXR1ZGUgb2YgdGhlIHZlY3RvciBhdCB0aGUgc3BlY2lmaWVkIGFuZ2xlXG5cdCAqIEByZXR1cm5zIFRoaXMgdmVjdG9yLlxuXHQgKi9cblx0c2V0VG9BbmdsZShhbmdsZTogbnVtYmVyLCByYWRpdXM6IG51bWJlciA9IDEpOiBWZWMyIHtcblx0XHR0aGlzLnggPSBNYXRoVXRpbHMuZmxvb3JUb1BsYWNlKE1hdGguY29zKGFuZ2xlKSpyYWRpdXMsIDUpO1xuXHRcdHRoaXMueSA9IE1hdGhVdGlscy5mbG9vclRvUGxhY2UoLU1hdGguc2luKGFuZ2xlKSpyYWRpdXMsIDUpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgYSB2ZWN0b3IgdGhhdCBwb2ludCBmcm9tIHRoaXMgdmVjdG9yIHRvIGFub3RoZXIgb25lXG5cdCAqIEBwYXJhbSBvdGhlciBUaGUgdmVjdG9yIHRvIHBvaW50IHRvXG5cdCAqIEByZXR1cm5zIEEgbmV3IFZlYzIgdGhhdCBwb2ludHMgZnJvbSB0aGlzIHZlY3RvciB0byB0aGUgb25lIHByb3ZpZGVkXG5cdCAqL1xuXHR2ZWNUbyhvdGhlcjogVmVjMik6IFZlYzIge1xuXHRcdHJldHVybiBuZXcgVmVjMihvdGhlci54IC0gdGhpcy54LCBvdGhlci55IC0gdGhpcy55KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJldHVybnMgYSB2ZWN0b3IgY29udGFpbmluZyB0aGUgZGlyZWN0aW9uIGZyb20gdGhpcyB2ZWN0b3IgdG8gYW5vdGhlclxuXHQgKiBAcGFyYW0gb3RoZXIgVGhlIHZlY3RvciB0byBwb2ludCB0b1xuXHQgKiBAcmV0dXJucyBBIG5ldyBWZWMyIHRoYXQgcG9pbnRzIGZyb20gdGhpcyB2ZWN0b3IgdG8gdGhlIG9uZSBwcm92aWRlZC4gVGhpcyBuZXcgVmVjMiB3aWxsIGJlIGEgdW5pdCB2ZWN0b3IuXG5cdCAqL1xuXHRkaXJUbyhvdGhlcjogVmVjMik6IFZlYzIge1xuXHRcdHJldHVybiB0aGlzLnZlY1RvKG90aGVyKS5ub3JtYWxpemUoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBLZWVwcyB0aGUgdmVjdG9yJ3MgZGlyZWN0aW9uLCBidXQgc2V0cyBpdHMgbWFnbml0dWRlIHRvIGJlIHRoZSBwcm92aWRlZCBtYWduaXR1ZGVcblx0ICogQHBhcmFtIG1hZ25pdHVkZSBUaGUgbWFnbml0dWRlIHRoZSB2ZWN0b3Igc2hvdWxkIGJlXG5cdCAqIEByZXR1cm5zIFRoaXMgdmVjdG9yIHdpdGggaXRzIG1hZ25pdHVkZSBzZXQgdG8gdGhlIG5ldyBtYWduaXR1ZGVcblx0ICovXG5cdHNjYWxlVG8obWFnbml0dWRlOiBudW1iZXIpOiBWZWMyIHtcblx0XHRyZXR1cm4gdGhpcy5ub3JtYWxpemUoKS5zY2FsZShtYWduaXR1ZGUpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNjYWxlcyB4IGFuZCB5IGJ5IHRoZSBudW1iZXIgcHJvdmlkZWQsIG9yIGlmIHR3byBudW1iZXIgYXJlIHByb3ZpZGVkLCBzY2FsZXMgdGhlbSBpbmRpdmlkdWFsbHkuXG5cdCAqIEBwYXJhbSBmYWN0b3IgVGhlIHNjYWxpbmcgZmFjdG9yIGZvciB0aGUgdmVjdG9yLCBvciBmb3Igb25seSB0aGUgeC1jb21wb25lbnQgaWYgeUZhY3RvciBpcyBwcm92aWRlZFxuXHQgKiBAcGFyYW0geUZhY3RvciBUaGUgc2NhbGluZyBmYWN0b3IgZm9yIHRoZSB5LWNvbXBvbmVudCBvZiB0aGUgdmVjdG9yXG5cdCAqIEByZXR1cm5zIFRoaXMgdmVjdG9yIGFmdGVyIHNjYWxpbmdcblx0ICovXG5cdHNjYWxlKGZhY3RvcjogbnVtYmVyLCB5RmFjdG9yOiBudW1iZXIgPSBudWxsKTogVmVjMiB7XG5cdFx0aWYoeUZhY3RvciAhPT0gbnVsbCl7XG5cdFx0XHR0aGlzLnggKj0gZmFjdG9yO1xuXHRcdFx0dGhpcy55ICo9IHlGYWN0b3I7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cdFx0dGhpcy54ICo9IGZhY3Rvcjtcblx0XHR0aGlzLnkgKj0gZmFjdG9yO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgYSBzY2FsZWQgdmVyc2lvbiBvZiB0aGlzIHZlY3RvciB3aXRob3V0IG1vZGlmeWluZyBpdC5cblx0ICogQHBhcmFtIGZhY3RvciBUaGUgc2NhbGluZyBmYWN0b3IgZm9yIHRoZSB2ZWN0b3IsIG9yIGZvciBvbmx5IHRoZSB4LWNvbXBvbmVudCBpZiB5RmFjdG9yIGlzIHByb3ZpZGVkXG5cdCAqIEBwYXJhbSB5RmFjdG9yIFRoZSBzY2FsaW5nIGZhY3RvciBmb3IgdGhlIHktY29tcG9uZW50IG9mIHRoZSB2ZWN0b3Jcblx0ICogQHJldHVybnMgQSBuZXcgdmVjdG9yIHRoYXQgaGFzIHRoZSB2YWx1ZXMgb2YgdGhpcyB2ZWN0b3IgYWZ0ZXIgc2NhbGluZ1xuXHQgKi9cblx0c2NhbGVkKGZhY3RvcjogbnVtYmVyLCB5RmFjdG9yOiBudW1iZXIgPSBudWxsKTogVmVjMiB7XG5cdFx0cmV0dXJuIHRoaXMuY2xvbmUoKS5zY2FsZShmYWN0b3IsIHlGYWN0b3IpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJvdGF0ZXMgdGhlIHZlY3RvciBjb3VudGVyLWNsb2Nrd2lzZSBieSB0aGUgYW5nbGUgYW1vdW50IHNwZWNpZmllZFxuXHQgKiBAcGFyYW0gYW5nbGUgVGhlIGFuZ2xlIHRvIHJvdGF0ZSBieSBpbiByYWRpYW5zXG5cdCAqIEByZXR1cm5zIFRoaXMgdmVjdG9yIGFmdGVyIHJvdGF0aW9uLlxuXHQgKi9cblx0cm90YXRlQ0NXKGFuZ2xlOiBudW1iZXIpOiBWZWMyIHtcblx0XHRsZXQgY3MgPSBNYXRoLmNvcyhhbmdsZSk7XG5cdFx0bGV0IHNuID0gTWF0aC5zaW4oYW5nbGUpO1xuXHRcdGxldCB0ZW1wWCA9IHRoaXMueCpjcyAtIHRoaXMueSpzbjtcblx0XHRsZXQgdGVtcFkgPSB0aGlzLngqc24gKyB0aGlzLnkqY3M7XG5cdFx0dGhpcy54ID0gdGVtcFg7XG5cdFx0dGhpcy55ID0gdGVtcFk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHQvKipcblx0ICogU2V0cyB0aGUgdmVjdG9ycyBjb29yZGluYXRlcyB0byBiZSB0aGUgb25lcyBwcm92aWRlZFxuXHQgKiBAcGFyYW0geCBUaGUgbmV3IHggdmFsdWUgZm9yIHRoaXMgdmVjdG9yXG5cdCAqIEBwYXJhbSB5IFRoZSBuZXcgeSB2YWx1ZSBmb3IgdGhpcyB2ZWN0b3Jcblx0ICogQHJldHVybnMgVGhpcyB2ZWN0b3Jcblx0ICovXG5cdHNldCh4OiBudW1iZXIsIHk6IG51bWJlcik6IFZlYzIge1xuXHRcdHRoaXMueCA9IHg7XG5cdFx0dGhpcy55ID0geTtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdC8qKlxuXHQgKiBDb3BpZXMgdGhlIHZhbHVlcyBvZiB0aGUgb3RoZXIgVmVjMiBpbnRvIHRoaXMgb25lLlxuXHQgKiBAcGFyYW0gb3RoZXIgVGhlIFZlYzIgdG8gY29weVxuXHQgKiBAcmV0dXJucyBUaGlzIHZlY3RvciB3aXRoIGl0cyB2YWx1ZXMgc2V0IHRvIHRoZSB2ZWN0b3IgcHJvdmlkZWRcblx0ICovXG5cdGNvcHkob3RoZXI6IFZlYzIpOiBWZWMyIHtcblx0XHRyZXR1cm4gdGhpcy5zZXQob3RoZXIueCwgb3RoZXIueSk7XG5cdH1cblxuXHQvKipcblx0ICogQWRkcyB0aGlzIHZlY3RvciB0aGUgYW5vdGhlciB2ZWN0b3Jcblx0ICogQHBhcmFtIG90aGVyIFRoZSBWZWMyIHRvIGFkZCB0byB0aGlzIG9uZVxuXHQgKiBAcmV0dXJucyBUaGlzIHZlY3RvciBhZnRlciBhZGRpbmcgdGhlIG9uZSBwcm92aWRlZFxuXHQgKi9cblx0YWRkKG90aGVyOiBWZWMyKTogVmVjMiB7XG5cdFx0dGhpcy54ICs9IG90aGVyLng7XG5cdFx0dGhpcy55ICs9IG90aGVyLnk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHQvKipcblx0ICogSW5jcmVtZW50cyB0aGUgZmllbGRzIG9mIHRoaXMgdmVjdG9yLiBCb3RoIGFyZSBpbmNyZW1lbnRlZCB3aXRoIGEsIGlmIG9ubHkgYSBpcyBwcm92aWRlZC5cblx0ICogQHBhcmFtIGEgVGhlIGZpcnN0IG51bWJlciB0byBpbmNyZW1lbnQgYnlcblx0ICogQHBhcmFtIGIgVGhlIHNlY29uZCBudW1iZXIgdG8gaW5jcmVtZW50IGJ5XG5cdCAqIEByZXR1cm5zcyBUaGlzIHZlY3RvciBhZnRlciBpbmNyZW1lbnRpbmdcblx0ICovXG5cdGluYyhhOiBudW1iZXIsIGI/OiBudW1iZXIpOiBWZWMyIHtcblx0XHRpZihiID09PSB1bmRlZmluZWQpe1xuXHRcdFx0dGhpcy54ICs9IGE7XG5cdFx0XHR0aGlzLnkgKz0gYTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy54ICs9IGE7XG5cdFx0XHR0aGlzLnkgKz0gYjtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHQvKipcblx0ICogU3VidHJhY3RzIGFub3RoZXIgdmVjdG9yIGZyb20gdGhpcyB2ZWN0b3Jcblx0ICogQHBhcmFtIG90aGVyIFRoZSBWZWMyIHRvIHN1YnRyYWN0IGZyb20gdGhpcyBvbmVcblx0ICogQHJldHVybnMgVGhpcyB2ZWN0b3IgYWZ0ZXIgc3VidHJhY3RpbmcgdGhlIG9uZSBwcm92aWRlZFxuXHQgKi9cblx0c3ViKG90aGVyOiBWZWMyKTogVmVjMiB7XG5cdFx0dGhpcy54IC09IG90aGVyLng7XG5cdFx0dGhpcy55IC09IG90aGVyLnk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHQvKipcblx0ICogTXVsdGlwbGllcyB0aGlzIHZlY3RvciB3aXRoIGFub3RoZXIgdmVjdG9yIGVsZW1lbnQtd2lzZS4gSW4gb3RoZXIgd29yZHMsIHRoaXMueCAqPSBvdGhlci54IGFuZCB0aGlzLnkgKj0gb3RoZXIueVxuXHQgKiBAcGFyYW0gb3RoZXIgVGhlIFZlYzIgdG8gbXVsdGlwbHkgdGhpcyBvbmUgYnlcblx0ICogQHJldHVybnMgVGhpcyB2ZWN0b3IgYWZ0ZXIgbXVsdGlwbHlpbmcgaXRzIGNvbXBvbmVudHMgYnkgdGhpcyBvbmVcblx0ICovXG5cdG11bHQob3RoZXI6IFZlYzIpOiBWZWMyIHtcblx0XHR0aGlzLnggKj0gb3RoZXIueDtcblx0XHR0aGlzLnkgKj0gb3RoZXIueTtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdC8qKlxuXHQgKiBEaXZpZGVzIHRoaXMgdmVjdG9yIHdpdGggYW5vdGhlciB2ZWN0b3IgZWxlbWVudC13aXNlLiBJbiBvdGhlciB3b3JkcywgdGhpcy54IC89IG90aGVyLnggYW5kIHRoaXMueSAvPSBvdGhlci55XG5cdCAqIEBwYXJhbSBvdGhlciBUaGUgdmVjdG9yIHRvIGRpdmlkZSB0aGlzIG9uZSBieVxuXHQgKiBAcmV0dXJucyBUaGlzIHZlY3RvciBhZnRlciBkaXZpc2lvblxuXHQgKi9cblx0ZGl2KG90aGVyOiBWZWMyKTogVmVjMiB7XG5cdFx0aWYob3RoZXIueCA9PT0gMCB8fCBvdGhlci55ID09PSAwKSB0aHJvdyBcIkRpdmlkZSBieSB6ZXJvIGVycm9yXCI7XG5cdFx0dGhpcy54IC89IG90aGVyLng7XG5cdFx0dGhpcy55IC89IG90aGVyLnk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHQvKipcblx0ICogRG9lcyBhbiBlbGVtZW50IHdpc2UgcmVtYWluZGVyIG9wZXJhdGlvbiBvbiB0aGlzIHZlY3Rvci4gdGhpcy54ICU9IG90aGVyLnggYW5kIHRoaXMueSAlPSBvdGhlci55XG5cdCAqIEBwYXJhbSBvdGhlciBUaGUgb3RoZXIgdmVjdG9yXG5cdCAqIEByZXR1cm5zIHRoaXMgdmVjdG9yXG5cdCAqL1xuXHRyZW1haW5kZXIob3RoZXI6IFZlYzIpOiBWZWMyIHtcblx0XHR0aGlzLnggPSB0aGlzLnggJSBvdGhlci54O1xuXHRcdHRoaXMueSA9IHRoaXMueSAlIG90aGVyLnk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyB0aGUgc3F1YXJlZCBkaXN0YW5jZSBiZXR3ZWVuIHRoaXMgdmVjdG9yIGFuZCBhbm90aGVyIHZlY3RvclxuXHQgKiBAcGFyYW0gb3RoZXIgVGhlIHZlY3RvciB0byBjb21wdXRlIGRpc3RhbmNlIHNxdWFyZWQgdG9cblx0ICogQHJldHVybnMgVGhlIHNxdWFyZWQgZGlzdGFuY2UgYmV0d2VlbiB0aGlzIHZlY3RvciBhbmQgdGhlIG9uZSBwcm92aWRlZFxuXHQgKi9cblx0ZGlzdGFuY2VTcVRvKG90aGVyOiBWZWMyKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gKHRoaXMueCAtIG90aGVyLngpKih0aGlzLnggLSBvdGhlci54KSArICh0aGlzLnkgLSBvdGhlci55KSoodGhpcy55IC0gb3RoZXIueSk7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlciB2ZWN0b3Jcblx0ICogQHBhcmFtIG90aGVyIFRoZSB2ZWN0b3IgdG8gY29tcHV0ZSBkaXN0YW5jZSB0b1xuXHQgKiBAcmV0dXJucyBUaGUgZGlzdGFuY2UgYmV0d2VlbiB0aGlzIHZlY3RvciBhbmQgdGhlIG9uZSBwcm92aWRlZFxuXHQgKi9cblx0ZGlzdGFuY2VUbyhvdGhlcjogVmVjMik6IG51bWJlciB7XG5cdFx0cmV0dXJuIE1hdGguc3FydCh0aGlzLmRpc3RhbmNlU3FUbyhvdGhlcikpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIGRvdCBwcm9kdWN0IG9mIHRoaXMgdmVjdG9yIGFuZCBhbm90aGVyXG5cdCAqIEBwYXJhbSBvdGhlciBUaGUgdmVjdG9yIHRvIGNvbXB1dGUgdGhlIGRvdCBwcm9kdWN0IHdpdGhcblx0ICogQHJldHVybnMgVGhlIGRvdCBwcm9kdWN0IG9mIHRoaXMgdmVjdG9yIGFuZCB0aGUgb25lIHByb3ZpZGVkLlxuXHQgKi9cblx0ZG90KG90aGVyOiBWZWMyKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy54Km90aGVyLnggKyB0aGlzLnkqb3RoZXIueTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRoZSBhbmdsZSBjb3VudGVyLWNsb2Nrd2lzZSBpbiByYWRpYW5zIGZyb20gdGhpcyB2ZWN0b3IgdG8gYW5vdGhlciB2ZWN0b3Jcblx0ICogQHBhcmFtIG90aGVyIFRoZSB2ZWN0b3IgdG8gY29tcHV0ZSB0aGUgYW5nbGUgdG9cblx0ICogQHJldHVybnMgVGhlIGFuZ2xlLCByb3RhdGluZyBDQ1csIGZyb20gdGhpcyB2ZWN0b3IgdG8gdGhlIG90aGVyIHZlY3RvclxuXHQgKi9cblx0YW5nbGVUb0NDVyhvdGhlcjogVmVjMik6IG51bWJlciB7XG5cdFx0bGV0IGRvdCA9IHRoaXMuZG90KG90aGVyKTtcblx0XHRsZXQgZGV0ID0gdGhpcy54Km90aGVyLnkgLSB0aGlzLnkqb3RoZXIueDtcblx0XHRsZXQgYW5nbGUgPSAtTWF0aC5hdGFuMihkZXQsIGRvdCk7XG5cblx0XHRpZihhbmdsZSA8IDApe1xuXHRcdFx0YW5nbGUgKz0gMipNYXRoLlBJO1xuXHRcdH1cblxuXHRcdHJldHVybiBhbmdsZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgdmVjdG9yIHJvdW5kZWQgdG8gMSBkZWNpbWFsIHBvaW50XG5cdCAqIEByZXR1cm5zIFRoaXMgdmVjdG9yIGFzIGEgc3RyaW5nXG5cdCAqL1xuXHR0b1N0cmluZygpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLnRvRml4ZWQoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgdmVjdG9yIHJvdW5kZWQgdG8gdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgZGVjaW1hbCBwb2ludHNcblx0ICogQHBhcmFtIG51bURlY2ltYWxQb2ludHMgVGhlIG51bWJlciBvZiBkZWNpbWFsIHBvaW50cyB0byBjcmVhdGUgYSBzdHJpbmcgdG9cblx0ICogQHJldHVybnMgVGhpcyB2ZWN0b3IgYXMgYSBzdHJpbmdcblx0ICovXG5cdHRvRml4ZWQobnVtRGVjaW1hbFBvaW50czogbnVtYmVyID0gMSk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIFwiKFwiICsgdGhpcy54LnRvRml4ZWQobnVtRGVjaW1hbFBvaW50cykgKyBcIiwgXCIgKyB0aGlzLnkudG9GaXhlZChudW1EZWNpbWFsUG9pbnRzKSArIFwiKVwiO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgYSBuZXcgdmVjdG9yIHdpdGggdGhlIHNhbWUgY29vcmRpbmF0ZXMgYXMgdGhpcyBvbmUuXG5cdCAqIEByZXR1cm5zIEEgbmV3IFZlYzIgd2l0aCB0aGUgc2FtZSB2YWx1ZXMgYXMgdGhpcyBvbmVcblx0ICovXG5cdGNsb25lKCk6IFZlYzIge1xuXHRcdHJldHVybiBuZXcgVmVjMih0aGlzLngsIHRoaXMueSk7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyB0cnVlIGlmIHRoaXMgdmVjdG9yIGFuZCBvdGhlciBoYXZlIHRoZSBFWEFDVCBzYW1lIHggYW5kIHkgKG5vdCBhc3N1cmVkIHRvIGJlIHNhZmUgZm9yIGZsb2F0cylcblx0ICogQHBhcmFtIG90aGVyIFRoZSB2ZWN0b3IgdG8gY2hlY2sgYWdhaW5zdFxuXHQgKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSBlcXVhbGl0eSBvZiB0aGUgdHdvIHZlY3RvcnNcblx0ICovXG5cdHN0cmljdEVxdWFscyhvdGhlcjogVmVjMik6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLnggPT09IG90aGVyLnggJiYgdGhpcy55ID09PSBvdGhlci55O1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIHZlY3RvciBhbmQgb3RoZXIgaGF2ZSB0aGUgc2FtZSB4IGFuZCB5XG5cdCAqIEBwYXJhbSBvdGhlciBUaGUgdmVjdG9yIHRvIGNoZWNrIGFnYWluc3Rcblx0ICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgZXF1YWxpdHkgb2YgdGhlIHR3byB2ZWN0b3JzXG5cdCAqL1xuXHRlcXVhbHMob3RoZXI6IFZlYzIpOiBib29sZWFuIHtcblx0XHRsZXQgeEVxID0gTWF0aC5hYnModGhpcy54IC0gb3RoZXIueCkgPCAwLjAwMDAwMDE7XG5cdFx0bGV0IHlFcSA9IE1hdGguYWJzKHRoaXMueSAtIG90aGVyLnkpIDwgMC4wMDAwMDAxO1xuXG5cdFx0cmV0dXJuIHhFcSAmJiB5RXE7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyB0cnVlIGlmIHRoaXMgdmVjdG9yIGlzIHRoZSB6ZXJvIHZlY3RvciBleGFjdGx5IChub3QgYXNzdXJlZCB0byBiZSBzYWZlIGZvciBmbG9hdHMpLlxuXHQgKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSBlcXVhbGl0eSBvZiB0aGlzIHZlY3RvciBhbmQgdGhlIHplcm8gdmVjdG9yXG5cdCAqL1xuXHRzdHJpY3RJc1plcm8oKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMueCA9PT0gMCAmJiB0aGlzLnkgPT09IDA7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyB0cnVlIGlmIHRoaXMgeCBhbmQgeSBmb3IgdGhpcyB2ZWN0b3IgYXJlIGJvdGggemVyby5cblx0ICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgZXF1YWxpdHkgb2YgdGhpcyB2ZWN0b3IgYW5kIHRoZSB6ZXJvIHZlY3RvclxuXHQgKi9cblx0aXNaZXJvKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBNYXRoLmFicyh0aGlzLngpIDwgMC4wMDAwMDAxICYmIE1hdGguYWJzKHRoaXMueSkgPCAwLjAwMDAwMDE7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTZXRzIHRoZSBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuZXZlciB0aGlzIHZlY3RvciBpcyBjaGFuZ2VkLlxuXHQgKiBAcGFyYW0gZiBUaGUgZnVuY3Rpb24gdG8gYmUgY2FsbGVkXG5cdCAqL1xuXHRzZXRPbkNoYW5nZShmOiBGdW5jdGlvbik6IHZvaWQge1xuXHRcdHRoaXMub25DaGFuZ2UgPSBmO1xuXHR9XG5cblx0dG9BcnJheSgpOiBGbG9hdDMyQXJyYXkge1xuXHRcdHJldHVybiB0aGlzLnZlYztcblx0fVxuXG5cdC8qKlxuXHQgKiBQZXJmb3JtcyBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byB2ZWN0b3JzXG5cdCAqIEBwYXJhbSBhIFRoZSBmaXJzdCB2ZWN0b3Jcblx0ICogQHBhcmFtIGIgVGhlIHNlY29uZCB2ZWN0b3Jcblx0ICogQHBhcmFtIHQgVGhlIHRpbWUgb2YgdGhlIGxlcnAsIHdpdGggMCBiZWluZyB2ZWN0b3IgQSwgYW5kIDEgYmVpbmcgdmVjdG9yIEJcblx0ICogQHJldHVybnMgQSBuZXcgVmVjMiByZXByZXNlbnRpbmcgdGhlIGxlcnAgYmV0d2VlbiB2ZWN0b3IgYSBhbmQgYi5cblx0ICovXG5cdHN0YXRpYyBsZXJwKGE6IFZlYzIsIGI6IFZlYzIsIHQ6IG51bWJlcik6IFZlYzIge1xuXHRcdHJldHVybiBuZXcgVmVjMihNYXRoVXRpbHMubGVycChhLngsIGIueCwgdCksIE1hdGhVdGlscy5sZXJwKGEueSwgYi55LCB0KSk7XG5cdH1cbn0iLCJpbXBvcnQgTWFwIGZyb20gXCIuLi9EYXRhVHlwZXMvQ29sbGVjdGlvbnMvTWFwXCI7XG5pbXBvcnQgVmVjMiBmcm9tIFwiLi4vRGF0YVR5cGVzL1ZlYzJcIjtcbmltcG9ydCBHYW1lTm9kZSBmcm9tIFwiLi4vTm9kZXMvR2FtZU5vZGVcIjtcbmltcG9ydCBDb2xvciBmcm9tIFwiLi4vVXRpbHMvQ29sb3JcIjtcblxuLyoqXG4gKiBBIHV0aWwgY2xhc3MgZm9yIHJlbmRlcmluZyBEZWJ1ZyBtZXNzYWdlcyB0byB0aGUgY2FudmFzLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEZWJ1ZyB7XG5cblx0LyoqIEEgbWFwIG9mIGxvZyBtZXNzYWdlcyB0byBkaXNwbGF5IG9uIHRoZSBzY3JlZW4gKi8gXG5cdHByaXZhdGUgc3RhdGljIGxvZ01lc3NhZ2VzOiBNYXA8c3RyaW5nPiA9IG5ldyBNYXAoKTtcblxuXHQvKiogQW4gYXJyYXkgb2YgZ2FtZSBub2RlcyB0byByZW5kZXIgZGVidWcgaW5mbyBmb3IgKi9cblx0cHJpdmF0ZSBzdGF0aWMgbm9kZXM6IEFycmF5PEdhbWVOb2RlPjtcblxuXHQvKiogVGhlIHJlbmRlcmluZyBjb250ZXh0IGZvciBhbnkgZGVidWcgbWVzc2FnZXMgKi9cblx0cHJpdmF0ZSBzdGF0aWMgZGVidWdSZW5kZXJpbmdDb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG5cblx0LyoqXHRUaGUgc2l6ZSBvZiB0aGUgZGVidWcgY2FudmFzICovXG5cdHByaXZhdGUgc3RhdGljIGRlYnVnQ2FudmFzU2l6ZTogVmVjMjtcblxuXHQvKiogVGhlIHJlbmRlcmluZyBjb2xvciBmb3IgdGV4dCAqL1xuXHRwcml2YXRlIHN0YXRpYyBkZWZhdWx0VGV4dENvbG9yOiBDb2xvciA9IENvbG9yLldISVRFO1xuXG5cdC8qKlxuXHQgKiBBZGQgYSBtZXNzYWdlIHRvIGRpc3BsYXkgb24gdGhlIGRlYnVnIHNjcmVlblxuXHQgKiBAcGFyYW0gaWQgQSB1bmlxdWUgSUQgZm9yIHRoaXMgbWVzc2FnZVxuXHQgKiBAcGFyYW0gbWVzc2FnZXMgVGhlIG1lc3NhZ2VzIHRvIHByaW50IHRvIHRoZSBkZWJ1ZyBzY3JlZW5cblx0ICovXG5cdHN0YXRpYyBsb2coaWQ6IHN0cmluZywgLi4ubWVzc2FnZXM6IGFueSk6IHZvaWQge1xuXHRcdC8vIGxldCBtZXNzYWdlID0gXCJcIjtcblx0XHQvLyBmb3IobGV0IGkgPSAwOyBpIDwgbWVzc2FnZXMubGVuZ3RoOyBpKyspe1xuXHRcdC8vIFx0bWVzc2FnZSArPSBtZXNzYWdlc1tpXS50b1N0cmluZygpO1xuXHRcdC8vIH1cblx0XHQvLyBKb2luIGFsbCBtZXNzYWdlcyB3aXRoIHNwYWNlc1xuXHRcdGxldCBtZXNzYWdlID0gbWVzc2FnZXMubWFwKChtOiBhbnkpID0+IG0udG9TdHJpbmcoKSkuam9pbihcIiBcIik7XG5cdFx0dGhpcy5sb2dNZXNzYWdlcy5hZGQoaWQsIG1lc3NhZ2UpO1xuXHR9XG5cblx0LyoqXG5cdCAqIERlbGV0ZXMgYSBhIGtleSBmcm9tIHRoZSBsb2cgYW5kIHN0b3BzIGl0IGZyb20ga2VlcGluZyB1cCBzcGFjZSBvbiB0aGUgc2NyZWVuXG5cdCAqIEBwYXJhbSBpZCBUaGUgaWQgb2YgdGhlIGxvZyBpdGVtIHRvIGNsZWFyXG5cdCAqL1xuXHRzdGF0aWMgY2xlYXJMb2dJdGVtKGlkOiBzdHJpbmcpOiB2b2lkIHtcblx0XHR0aGlzLmxvZ01lc3NhZ2VzLmRlbGV0ZShpZCk7XG5cdH1cblxuXHQvKipcblx0ICogU2V0cyB0aGUgbGlzdCBvZiBub2RlcyB0byByZW5kZXIgd2l0aCB0aGUgZGVidWdnZXJcblx0ICogQHBhcmFtIG5vZGVzIFRoZSBuZXcgbGlzdCBvZiBub2Rlc1xuXHQgKi9cblx0c3RhdGljIHNldE5vZGVzKG5vZGVzOiBBcnJheTxHYW1lTm9kZT4pOiB2b2lkIHtcblx0XHR0aGlzLm5vZGVzID0gbm9kZXM7XG5cdH1cblxuXHQvKipcblx0ICogRHJhd3MgYSBib3ggYXQgdGhlIHNwZWNpZmllZCBwb3NpdGlvblxuXHQgKiBAcGFyYW0gY2VudGVyIFRoZSBjZW50ZXIgb2YgdGhlIGJveFxuXHQgKiBAcGFyYW0gaGFsZlNpemUgVGhlIGRpbWVuc2lvbnMgb2YgdGhlIGJveFxuXHQgKiBAcGFyYW0gZmlsbGVkIEEgYm9vbGVhbiBmb3Igd2hldGhlciBvciBub3QgdGhlIGJveCBpcyBmaWxsZWRcblx0ICogQHBhcmFtIGNvbG9yIFRoZSBjb2xvciBvZiB0aGUgYm94IHRvIGRyYXdcblx0ICovXG5cdHN0YXRpYyBkcmF3Qm94KGNlbnRlcjogVmVjMiwgaGFsZlNpemU6IFZlYzIsIGZpbGxlZDogYm9vbGVhbiwgY29sb3I6IENvbG9yKTogdm9pZCB7XG5cdFx0bGV0IGFscGhhID0gdGhpcy5kZWJ1Z1JlbmRlcmluZ0NvbnRleHQuZ2xvYmFsQWxwaGE7XG5cdFx0dGhpcy5kZWJ1Z1JlbmRlcmluZ0NvbnRleHQuZ2xvYmFsQWxwaGEgPSBjb2xvci5hO1xuXG5cdFx0aWYoZmlsbGVkKXtcblx0XHRcdHRoaXMuZGVidWdSZW5kZXJpbmdDb250ZXh0LmZpbGxTdHlsZSA9IGNvbG9yLnRvU3RyaW5nKCk7XG5cdFx0XHR0aGlzLmRlYnVnUmVuZGVyaW5nQ29udGV4dC5maWxsUmVjdChjZW50ZXIueCAtIGhhbGZTaXplLngsIGNlbnRlci55IC0gaGFsZlNpemUueSwgaGFsZlNpemUueCoyLCBoYWxmU2l6ZS55KjIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRsZXQgbGluZVdpZHRoID0gMjtcblx0XHRcdHRoaXMuZGVidWdSZW5kZXJpbmdDb250ZXh0LmxpbmVXaWR0aCA9IGxpbmVXaWR0aDtcblx0XHRcdHRoaXMuZGVidWdSZW5kZXJpbmdDb250ZXh0LnN0cm9rZVN0eWxlID0gY29sb3IudG9TdHJpbmcoKTtcblx0XHRcdHRoaXMuZGVidWdSZW5kZXJpbmdDb250ZXh0LnN0cm9rZVJlY3QoY2VudGVyLnggLSBoYWxmU2l6ZS54LCBjZW50ZXIueSAtIGhhbGZTaXplLnksIGhhbGZTaXplLngqMiwgaGFsZlNpemUueSoyKTtcblx0XHR9XG5cblx0XHR0aGlzLmRlYnVnUmVuZGVyaW5nQ29udGV4dC5nbG9iYWxBbHBoYSA9IGFscGhhO1xuXHR9XG5cblx0LyoqXG5cdCAqIERyYXdzIGEgY2lyY2xlIGF0IHRoZSBzcGVjaWZpZWQgcG9zaXRpb25cblx0ICogQHBhcmFtIGNlbnRlciBUaGUgY2VudGVyIG9mIHRoZSBjaXJjbGVcblx0ICogQHBhcmFtIHJhZGl1cyBUaGUgZGltZW5zaW9ucyBvZiB0aGUgYm94XG5cdCAqIEBwYXJhbSBmaWxsZWQgQSBib29sZWFuIGZvciB3aGV0aGVyIG9yIG5vdCB0aGUgY2lyY2xlIGlzIGZpbGxlZFxuXHQgKiBAcGFyYW0gY29sb3IgVGhlIGNvbG9yIG9mIHRoZSBjaXJjbGVcblx0ICovXG5cdHN0YXRpYyBkcmF3Q2lyY2xlKGNlbnRlcjogVmVjMiwgcmFkaXVzOiBudW1iZXIsIGZpbGxlZDogYm9vbGVhbiwgY29sb3I6IENvbG9yKTogdm9pZCB7XG5cdFx0bGV0IGFscGhhID0gdGhpcy5kZWJ1Z1JlbmRlcmluZ0NvbnRleHQuZ2xvYmFsQWxwaGE7XG5cdFx0dGhpcy5kZWJ1Z1JlbmRlcmluZ0NvbnRleHQuZ2xvYmFsQWxwaGEgPSBjb2xvci5hO1xuXG5cdFx0aWYoZmlsbGVkKXtcblx0XHRcdHRoaXMuZGVidWdSZW5kZXJpbmdDb250ZXh0LmZpbGxTdHlsZSA9IGNvbG9yLnRvU3RyaW5nKCk7XG5cdFx0XHR0aGlzLmRlYnVnUmVuZGVyaW5nQ29udGV4dC5iZWdpblBhdGgoKTtcblx0XHRcdHRoaXMuZGVidWdSZW5kZXJpbmdDb250ZXh0LmFyYyhjZW50ZXIueCwgY2VudGVyLnksIHJhZGl1cywgMCwgMiAqIE1hdGguUEkpO1xuXHRcdFx0dGhpcy5kZWJ1Z1JlbmRlcmluZ0NvbnRleHQuY2xvc2VQYXRoKCk7XG5cdFx0XHR0aGlzLmRlYnVnUmVuZGVyaW5nQ29udGV4dC5maWxsKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGxldCBsaW5lV2lkdGggPSAyO1xuXHRcdFx0dGhpcy5kZWJ1Z1JlbmRlcmluZ0NvbnRleHQubGluZVdpZHRoID0gbGluZVdpZHRoO1xuXHRcdFx0dGhpcy5kZWJ1Z1JlbmRlcmluZ0NvbnRleHQuc3Ryb2tlU3R5bGUgPSBjb2xvci50b1N0cmluZygpO1xuXHRcdFx0dGhpcy5kZWJ1Z1JlbmRlcmluZ0NvbnRleHQuYmVnaW5QYXRoKCk7XG5cdFx0XHR0aGlzLmRlYnVnUmVuZGVyaW5nQ29udGV4dC5hcmMoY2VudGVyLngsIGNlbnRlci55LCByYWRpdXMsIDAsIDIgKiBNYXRoLlBJKTtcblx0XHRcdHRoaXMuZGVidWdSZW5kZXJpbmdDb250ZXh0LmNsb3NlUGF0aCgpO1xuXHRcdFx0dGhpcy5kZWJ1Z1JlbmRlcmluZ0NvbnRleHQuc3Ryb2tlKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5kZWJ1Z1JlbmRlcmluZ0NvbnRleHQuZ2xvYmFsQWxwaGEgPSBhbHBoYTtcblx0fVxuXG5cdC8qKlxuXHQgKiBEcmF3cyBhIHJheSBhdCB0aGUgc3BlY2lmaWVkIHBvc2l0aW9uXG5cdCAqIEBwYXJhbSBmcm9tIFRoZSBzdGFydGluZyBwb3NpdGlvbiBvZiB0aGUgcmF5XG5cdCAqIEBwYXJhbSB0byBUaGUgZW5kaW5nIHBvc2l0aW9uIG9mIHRoZSByYXlcblx0ICogQHBhcmFtIGNvbG9yIFRoZSBjb2xvciBvZiB0aGUgcmF5XG5cdCAqL1xuXHRzdGF0aWMgZHJhd1JheShmcm9tOiBWZWMyLCB0bzogVmVjMiwgY29sb3I6IENvbG9yKTogdm9pZCB7XG5cdFx0dGhpcy5kZWJ1Z1JlbmRlcmluZ0NvbnRleHQubGluZVdpZHRoID0gMjtcblx0XHR0aGlzLmRlYnVnUmVuZGVyaW5nQ29udGV4dC5zdHJva2VTdHlsZSA9IGNvbG9yLnRvU3RyaW5nKCk7XG5cblx0XHR0aGlzLmRlYnVnUmVuZGVyaW5nQ29udGV4dC5iZWdpblBhdGgoKTtcblx0XHR0aGlzLmRlYnVnUmVuZGVyaW5nQ29udGV4dC5tb3ZlVG8oZnJvbS54LCBmcm9tLnkpO1xuXHRcdHRoaXMuZGVidWdSZW5kZXJpbmdDb250ZXh0LmxpbmVUbyh0by54LCB0by55KTtcblx0XHR0aGlzLmRlYnVnUmVuZGVyaW5nQ29udGV4dC5jbG9zZVBhdGgoKTtcblx0XHR0aGlzLmRlYnVnUmVuZGVyaW5nQ29udGV4dC5zdHJva2UoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBEcmF3cyBhIHBvaW50IGF0IHRoZSBzcGVjaWZpZWQgcG9zaXRpb25cblx0ICogQHBhcmFtIHBvcyBUaGUgcG9zaXRpb24gb2YgdGhlIHBvaW50XG5cdCAqIEBwYXJhbSBjb2xvciBUaGUgY29sb3Igb2YgdGhlIHBvaW50XG5cdCAqL1xuXHRzdGF0aWMgZHJhd1BvaW50KHBvczogVmVjMiwgY29sb3I6IENvbG9yKTogdm9pZCB7XG5cdFx0bGV0IHBvaW50U2l6ZSA9IDY7XG5cdFx0dGhpcy5kZWJ1Z1JlbmRlcmluZ0NvbnRleHQuZmlsbFN0eWxlID0gY29sb3IudG9TdHJpbmcoKTtcblx0XHR0aGlzLmRlYnVnUmVuZGVyaW5nQ29udGV4dC5maWxsUmVjdChwb3MueCAtIHBvaW50U2l6ZS8yLCBwb3MueSAtIHBvaW50U2l6ZS8yLCBwb2ludFNpemUsIHBvaW50U2l6ZSk7XG5cdH1cblxuXHQvKipcblx0ICogU2V0cyB0aGUgZGVmYXVsdCByZW5kZXJpbmcgY29sb3IgZm9yIHRleHQgZm9yIHRoZSBkZWJ1Z2dlclxuXHQgKiBAcGFyYW0gY29sb3IgVGhlIGNvbG9yIHRvIHJlbmRlciB0aGUgdGV4dFxuXHQgKi9cblx0c3RhdGljIHNldERlZmF1bHRUZXh0Q29sb3IoY29sb3I6IENvbG9yKTogdm9pZCB7XG5cdFx0dGhpcy5kZWZhdWx0VGV4dENvbG9yID0gY29sb3I7XG5cdH1cblxuXHQvKipcblx0ICogUGVyZm9ybXMgYW55IG5lY2Vzc2FyeSBzZXR1cCBvcGVyYXRpb25zIG9uIHRoZSBEZWJ1ZyBjYW52YXNcblx0ICogQHBhcmFtIGNhbnZhcyBUaGUgZGVidWcgY2FudmFzXG5cdCAqIEBwYXJhbSB3aWR0aCBUaGUgZGVzaXJlZCB3aWR0aCBvZiB0aGUgY2FudmFzXG5cdCAqIEBwYXJhbSBoZWlnaHQgVGhlIGRlc2lyZWQgaGVpZ2h0IG9mIHRoZSBjYW52YXNcblx0ICogQHJldHVybnMgVGhlIHJlbmRlcmluZyBjb250ZXh0IGV4dHJhY3RlZCBmcm9tIHRoZSBjYW52YXNcblx0ICovXG5cdHN0YXRpYyBpbml0aWFsaXplRGVidWdDYW52YXMoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQge1xuICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcblx0XHRjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXHRcdFxuXHRcdHRoaXMuZGVidWdDYW52YXNTaXplID0gbmV3IFZlYzIod2lkdGgsIGhlaWdodCk7XG5cbiAgICAgICAgdGhpcy5kZWJ1Z1JlbmRlcmluZ0NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmRlYnVnUmVuZGVyaW5nQ29udGV4dDtcblx0fVxuXG5cdC8qKiBDbGVhcnMgdGhlIGRlYnVnIGNhbnZhcyAqL1xuXHRzdGF0aWMgY2xlYXJDYW52YXMoKTogdm9pZCB7XG5cdFx0dGhpcy5kZWJ1Z1JlbmRlcmluZ0NvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMuZGVidWdDYW52YXNTaXplLngsIHRoaXMuZGVidWdDYW52YXNTaXplLnkpO1xuXHR9XG5cblx0LyoqIFJlbmRlcnMgdGhlIHRleHQgYW5kIG5vZGVzIHNlbnQgdG8gdGhlIERlYnVnIHN5c3RlbSAqL1xuXHRzdGF0aWMgcmVuZGVyKCk6IHZvaWQge1xuXHRcdHRoaXMucmVuZGVyVGV4dCgpO1xuXHRcdHRoaXMucmVuZGVyTm9kZXMoKTtcblx0fVxuXG5cdC8qKiBSZW5kZXJzIHRoZSB0ZXh0IHNlbnQgdG8gdGhlIERlYnVnIGNhbnZhcyAqL1xuXHRzdGF0aWMgcmVuZGVyVGV4dCgpOiB2b2lkIHtcblx0XHRsZXQgeSA9IDIwO1xuXHRcdHRoaXMuZGVidWdSZW5kZXJpbmdDb250ZXh0LmZvbnQgPSBcIjIwcHggQXJpYWxcIjtcblx0XHR0aGlzLmRlYnVnUmVuZGVyaW5nQ29udGV4dC5maWxsU3R5bGUgPSB0aGlzLmRlZmF1bHRUZXh0Q29sb3IudG9TdHJpbmcoKTtcblxuXHRcdC8vIERyYXcgYWxsIG9mIHRoZSB0ZXh0XG5cdFx0dGhpcy5sb2dNZXNzYWdlcy5mb3JFYWNoKChrZXk6IHN0cmluZykgPT4ge1xuXHRcdFx0dGhpcy5kZWJ1Z1JlbmRlcmluZ0NvbnRleHQuZmlsbFRleHQodGhpcy5sb2dNZXNzYWdlcy5nZXQoa2V5KSwgMTAsIHkpXG5cdFx0XHR5ICs9IDMwO1x0XG5cdFx0fSk7XG5cdH1cblxuXHQvKiogUmVuZGVycyB0aGUgbm9kZXMgcmVnaXN0ZXJlZCB3aXRoIHRoZSBkZWJ1ZyBjYW52YXMgKi9cblx0c3RhdGljIHJlbmRlck5vZGVzKCk6IHZvaWQge1xuXHRcdGlmKHRoaXMubm9kZXMpe1xuXHRcdFx0dGhpcy5ub2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xuXHRcdFx0XHRub2RlLmRlYnVnUmVuZGVyKCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cbn0iLCJpbXBvcnQgQ29sb3IgZnJvbSBcIi4uL1V0aWxzL0NvbG9yXCI7XG5cbi8vIEBpZ25vcmVQYWdlXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdGF0cyBleHRlbmRzIE9iamVjdCB7XG4gICAgLy8gVGhlIGZwcyBvZiB0aGUgZ2FtZS5cbiAgICBwcml2YXRlIHN0YXRpYyBwcmV2ZnBzOiBBcnJheTxudW1iZXI+O1xuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IE5VTV9QT0lOVFM6IG51bWJlciA9IDYwO1xuICAgIHByaXZhdGUgc3RhdGljIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuICAgIHByaXZhdGUgc3RhdGljIENBTlZBU19XSURUSDogbnVtYmVyID0gMzAwO1xuICAgIHByaXZhdGUgc3RhdGljIENBTlZBU19IRUlHSFQ6IG51bWJlciA9IDMwMDtcbiAgICBwcml2YXRlIHN0YXRpYyBzdGF0c0RpdjogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZ3JhcGhDaG9pY2VzOiBIVE1MU2VsZWN0RWxlbWVudDtcblxuICAgIC8vIFF1YWR0cmVlIHN0YXRzXG4gICAgcHJpdmF0ZSBzdGF0aWMgcHJldkNsZWFyVGltZXM6IEFycmF5PG51bWJlcj47XG4gICAgcHJpdmF0ZSBzdGF0aWMgU0dDbGVhclRpbWVzOiBBcnJheTxudW1iZXI+O1xuICAgIHByaXZhdGUgc3RhdGljIGF2Z1NHQ2xlYXJUaW1lOiBudW1iZXI7XG5cbiAgICBwcml2YXRlIHN0YXRpYyBwcmV2RmlsbFRpbWVzOiBBcnJheTxudW1iZXI+O1xuICAgIHByaXZhdGUgc3RhdGljIFNHRmlsbFRpbWVzOiBBcnJheTxudW1iZXI+O1xuICAgIHByaXZhdGUgc3RhdGljIGF2Z1NHRmlsbFRpbWU6IG51bWJlcjtcblxuICAgIHByaXZhdGUgc3RhdGljIHByZXZVcGRhdGVUaW1lczogQXJyYXk8bnVtYmVyPjtcbiAgICBwcml2YXRlIHN0YXRpYyBTR1VwZGF0ZVRpbWVzOiBBcnJheTxudW1iZXI+O1xuICAgIHByaXZhdGUgc3RhdGljIGF2Z1NHVXBkYXRlVGltZTogbnVtYmVyO1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgcHJldlF1ZXJ5VGltZXM6IEFycmF5PG51bWJlcj47XG4gICAgcHJpdmF0ZSBzdGF0aWMgU0dRdWVyeVRpbWVzOiBBcnJheTxudW1iZXI+O1xuICAgIHByaXZhdGUgc3RhdGljIGF2Z1NHUXVlcnlUaW1lOiBudW1iZXI7XG5cbiAgICBzdGF0aWMgaW5pdFN0YXRzKCk6IHZvaWQge1xuICAgICAgICBsZXQgY2FudmFzID0gPEhUTUxDYW52YXNFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RhdHMtY2FudmFzXCIpO1xuICAgICAgICBjYW52YXMud2lkdGggPSB0aGlzLkNBTlZBU19XSURUSDtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHRoaXMuQ0FOVkFTX0hFSUdIVDtcbiAgICAgICAgdGhpcy5jdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgICAgIHRoaXMuc3RhdHNEaXYgPSA8SFRNTERpdkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdGF0cy1kaXNwbGF5XCIpO1xuXG4gICAgICAgIHRoaXMucHJldmZwcyA9IG5ldyBBcnJheSgpO1xuXG4gICAgICAgIHRoaXMucHJldkNsZWFyVGltZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdGhpcy5TR0NsZWFyVGltZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdGhpcy5hdmdTR0NsZWFyVGltZSA9IDA7XG5cbiAgICAgICAgdGhpcy5wcmV2RmlsbFRpbWVzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIHRoaXMuU0dGaWxsVGltZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdGhpcy5hdmdTR0ZpbGxUaW1lID0gMDtcblxuICAgICAgICB0aGlzLnByZXZVcGRhdGVUaW1lcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB0aGlzLlNHVXBkYXRlVGltZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdGhpcy5hdmdTR1VwZGF0ZVRpbWUgPSAwO1xuXG4gICAgICAgIHRoaXMucHJldlF1ZXJ5VGltZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdGhpcy5TR1F1ZXJ5VGltZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdGhpcy5hdmdTR1F1ZXJ5VGltZSA9IDA7XG5cbiAgICAgICAgbGV0IGNsZWFyVGltZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICBjbGVhclRpbWUuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJzZ2NsZWFyXCIpO1xuICAgICAgICBsZXQgZmlsbFRpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgZmlsbFRpbWUuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJzZ2ZpbGxcIik7XG4gICAgICAgIGxldCB1cGRhdGVUaW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIHVwZGF0ZVRpbWUuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJzZ3VwZGF0ZVwiKTtcbiAgICAgICAgbGV0IHF1ZXJ5VGltZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICBxdWVyeVRpbWUuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJzZ3F1ZXJ5XCIpO1xuICAgICAgICBsZXQgYnIxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpO1xuICAgICAgICBsZXQgYnIyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpO1xuICAgICAgICBsZXQgYnIzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpO1xuXG4gICAgICAgIHRoaXMuc3RhdHNEaXYuYXBwZW5kKGNsZWFyVGltZSwgYnIxLCBmaWxsVGltZSwgYnIyLCB1cGRhdGVUaW1lLCBicjMsIHF1ZXJ5VGltZSk7XG5cbiAgICAgICAgdGhpcy5ncmFwaENob2ljZXMgPSA8SFRNTFNlbGVjdEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGFydC1vcHRpb25cIik7XG4gICAgICAgIGxldCBvcHRpb24xID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgICAgb3B0aW9uMS52YWx1ZSA9IFwicHJldmZwc1wiO1xuICAgICAgICBvcHRpb24xLmxhYmVsID0gXCJGUFNcIjtcbiAgICAgICAgbGV0IG9wdGlvbjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgICAgICBvcHRpb24yLnZhbHVlID0gXCJwcmV2Q2xlYXJUaW1lc1wiO1xuICAgICAgICBvcHRpb24yLmxhYmVsID0gXCJDbGVhciBUaW1lXCI7XG4gICAgICAgIGxldCBvcHRpb24zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgICAgb3B0aW9uMy52YWx1ZSA9IFwicHJldkZpbGxUaW1lc1wiO1xuICAgICAgICBvcHRpb24zLmxhYmVsID0gXCJGaWxsIHRpbWVcIjtcbiAgICAgICAgbGV0IG9wdGlvbjQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgICAgICBvcHRpb240LnZhbHVlID0gXCJwcmV2VXBkYXRlVGltZXNcIjtcbiAgICAgICAgb3B0aW9uNC5sYWJlbCA9IFwiVXBkYXRlIHRpbWVcIjtcbiAgICAgICAgbGV0IG9wdGlvbjUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgICAgICBvcHRpb241LnZhbHVlID0gXCJwcmV2UXVlcnlUaW1lc1wiO1xuICAgICAgICBvcHRpb241LmxhYmVsID0gXCJRdWVyeSBUaW1lXCI7XG4gICAgICAgIGxldCBvcHRpb25BbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgICAgICBvcHRpb25BbGwudmFsdWUgPSBcImFsbFwiO1xuICAgICAgICBvcHRpb25BbGwubGFiZWwgPSBcIkFsbFwiO1xuICAgICAgICB0aGlzLmdyYXBoQ2hvaWNlcy5hcHBlbmQob3B0aW9uMSwgb3B0aW9uMiwgb3B0aW9uMywgb3B0aW9uNCwgb3B0aW9uNSwgb3B0aW9uQWxsKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgdXBkYXRlRlBTKGZwczogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMucHJldmZwcy5wdXNoKGZwcyk7XG4gICAgICAgIGlmKHRoaXMucHJldmZwcy5sZW5ndGggPiBTdGF0cy5OVU1fUE9JTlRTKXtcbiAgICAgICAgICAgIHRoaXMucHJldmZwcy5zaGlmdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodGhpcy5TR0NsZWFyVGltZXMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICB0aGlzLnByZXZDbGVhclRpbWVzLnB1c2godGhpcy5hdmdTR0NsZWFyVGltZSk7XG4gICAgICAgICAgICBpZih0aGlzLnByZXZDbGVhclRpbWVzLmxlbmd0aCA+IHRoaXMuTlVNX1BPSU5UUyl7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2Q2xlYXJUaW1lcy5zaGlmdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuU0dGaWxsVGltZXMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICB0aGlzLnByZXZGaWxsVGltZXMucHVzaCh0aGlzLmF2Z1NHRmlsbFRpbWUpO1xuICAgICAgICAgICAgaWYodGhpcy5wcmV2RmlsbFRpbWVzLmxlbmd0aCA+IHRoaXMuTlVNX1BPSU5UUyl7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2RmlsbFRpbWVzLnNoaWZ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5TR1VwZGF0ZVRpbWVzLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgdGhpcy5wcmV2VXBkYXRlVGltZXMucHVzaCh0aGlzLmF2Z1NHVXBkYXRlVGltZSk7XG4gICAgICAgICAgICBpZih0aGlzLnByZXZVcGRhdGVUaW1lcy5sZW5ndGggPiB0aGlzLk5VTV9QT0lOVFMpe1xuICAgICAgICAgICAgICAgIHRoaXMucHJldlVwZGF0ZVRpbWVzLnNoaWZ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5TR1F1ZXJ5VGltZXMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICB0aGlzLnByZXZRdWVyeVRpbWVzLnB1c2godGhpcy5hdmdTR1F1ZXJ5VGltZSk7XG4gICAgICAgICAgICBpZih0aGlzLnByZXZRdWVyeVRpbWVzLmxlbmd0aCA+IHRoaXMuTlVNX1BPSU5UUyl7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2UXVlcnlUaW1lcy5zaGlmdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy51cGRhdGVTR1N0YXRzKCk7XG4gICAgfVxuXG4gICAgc3RhdGljIGxvZyhrZXk6IHN0cmluZywgZGF0YTogYW55KTogdm9pZCB7XG4gICAgICAgIGlmKGtleSA9PT0gXCJzZ2NsZWFyXCIpe1xuICAgICAgICAgICAgdGhpcy5TR0NsZWFyVGltZXMucHVzaChkYXRhKTtcbiAgICAgICAgICAgIGlmKHRoaXMuU0dDbGVhclRpbWVzLmxlbmd0aCA+IDEwMCl7XG4gICAgICAgICAgICAgICAgdGhpcy5TR0NsZWFyVGltZXMuc2hpZnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmKGtleSA9PT0gXCJzZ2ZpbGxcIil7XG4gICAgICAgICAgICB0aGlzLlNHRmlsbFRpbWVzLnB1c2goZGF0YSk7XG4gICAgICAgICAgICBpZih0aGlzLlNHRmlsbFRpbWVzLmxlbmd0aCA+IDEwMCl7XG4gICAgICAgICAgICAgICAgdGhpcy5TR0ZpbGxUaW1lcy5zaGlmdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYoa2V5ID09PSBcInNndXBkYXRlXCIpe1xuICAgICAgICAgICAgdGhpcy5TR1VwZGF0ZVRpbWVzLnB1c2goZGF0YSk7XG4gICAgICAgICAgICBpZih0aGlzLlNHVXBkYXRlVGltZXMubGVuZ3RoID4gMTAwKXtcbiAgICAgICAgICAgICAgICB0aGlzLlNHVXBkYXRlVGltZXMuc2hpZnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmKGtleSA9PT0gXCJzZ3F1ZXJ5XCIpe1xuICAgICAgICAgICAgdGhpcy5TR1F1ZXJ5VGltZXMucHVzaChkYXRhKTtcbiAgICAgICAgICAgIGlmKHRoaXMuU0dRdWVyeVRpbWVzLmxlbmd0aCA+IDEwMDApe1xuICAgICAgICAgICAgICAgIHRoaXMuU0dRdWVyeVRpbWVzLnNoaWZ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHN0YXRpYyByZW5kZXIoKTogdm9pZCB7XG4gICAgICAgIC8vIERpc3BsYXkgc3RhdHNcbiAgICAgICAgdGhpcy5kcmF3Q2hhcnRzKCk7XG4gICAgfVxuXG4gICAgc3RhdGljIGRyYXdDaGFydHMoKXtcbiAgICAgICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuQ0FOVkFTX1dJRFRILCB0aGlzLkNBTlZBU19IRUlHSFQpO1xuXG4gICAgICAgIGxldCBwYXJhbVN0cmluZyA9IHRoaXMuZ3JhcGhDaG9pY2VzLnZhbHVlO1xuXG4gICAgICAgIGlmKHBhcmFtU3RyaW5nID09PSBcInByZXZmcHNcIiB8fCBwYXJhbVN0cmluZyA9PT0gXCJhbGxcIil7XG4gICAgICAgICAgICBsZXQgcGFyYW0gPSB0aGlzLnByZXZmcHM7XG4gICAgICAgICAgICBsZXQgY29sb3IgPSBDb2xvci5CTFVFLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdDaGFydChwYXJhbSwgY29sb3IpO1xuICAgICAgICB9XG4gICAgICAgIGlmKHBhcmFtU3RyaW5nID09PSBcInByZXZDbGVhclRpbWVzXCIgfHwgcGFyYW1TdHJpbmcgPT09IFwiYWxsXCIpe1xuICAgICAgICAgICAgbGV0IHBhcmFtID0gdGhpcy5wcmV2Q2xlYXJUaW1lcztcbiAgICAgICAgICAgIGxldCBjb2xvciA9IENvbG9yLlJFRC50b1N0cmluZygpO1xuICAgICAgICAgICAgdGhpcy5kcmF3Q2hhcnQocGFyYW0sIGNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZihwYXJhbVN0cmluZyA9PT0gXCJwcmV2RmlsbFRpbWVzXCIgfHwgcGFyYW1TdHJpbmcgPT09IFwiYWxsXCIpe1xuICAgICAgICAgICAgbGV0IHBhcmFtID0gdGhpcy5wcmV2RmlsbFRpbWVzO1xuICAgICAgICAgICAgbGV0IGNvbG9yID0gQ29sb3IuR1JFRU4udG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd0NoYXJ0KHBhcmFtLCBjb2xvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYocGFyYW1TdHJpbmcgPT09IFwicHJldlVwZGF0ZVRpbWVzXCIgfHwgcGFyYW1TdHJpbmcgPT09IFwiYWxsXCIpe1xuICAgICAgICAgICAgbGV0IHBhcmFtID0gdGhpcy5wcmV2VXBkYXRlVGltZXM7XG4gICAgICAgICAgICBsZXQgY29sb3IgPSBDb2xvci5DWUFOLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdDaGFydChwYXJhbSwgY29sb3IpO1xuICAgICAgICB9XG4gICAgICAgIGlmKHBhcmFtU3RyaW5nID09PSBcInByZXZRdWVyeVRpbWVzXCIgfHwgcGFyYW1TdHJpbmcgPT09IFwiYWxsXCIpe1xuICAgICAgICAgICAgbGV0IHBhcmFtID0gdGhpcy5wcmV2UXVlcnlUaW1lcztcbiAgICAgICAgICAgIGxldCBjb2xvciA9IENvbG9yLk9SQU5HRS50b1N0cmluZygpO1xuICAgICAgICAgICAgdGhpcy5kcmF3Q2hhcnQocGFyYW0sIGNvbG9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBkcmF3Q2hhcnQocGFyYW06IEFycmF5PG51bWJlcj4sIGNvbG9yOiBzdHJpbmcpe1xuICAgICAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IENvbG9yLkJMQUNLLnRvU3RyaW5nKCk7XG4gICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICB0aGlzLmN0eC5tb3ZlVG8oMTAsIDEwKTtcbiAgICAgICAgdGhpcy5jdHgubGluZVRvKDEwLCB0aGlzLkNBTlZBU19IRUlHSFQgLSAxMCk7XG4gICAgICAgIHRoaXMuY3R4LmNsb3NlUGF0aCgpO1xuICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTtcbiAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIHRoaXMuY3R4Lm1vdmVUbygxMCwgdGhpcy5DQU5WQVNfSEVJR0hUIC0gMTApO1xuICAgICAgICB0aGlzLmN0eC5saW5lVG8odGhpcy5DQU5WQVNfV0lEVEggLSAxMCwgdGhpcy5DQU5WQVNfSEVJR0hUIC0gMTApO1xuICAgICAgICB0aGlzLmN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlKCk7XG5cbiAgICAgICAgbGV0IG1heCA9IE1hdGgubWF4KC4uLnBhcmFtKTtcbiAgICAgICAgbGV0IHByZXZYID0gMTA7XG4gICAgICAgIGxldCBwcmV2WSA9IHRoaXMuQ0FOVkFTX0hFSUdIVCAtIDEwIC0gcGFyYW1bMF0vbWF4Kih0aGlzLkNBTlZBU19IRUlHSFQtMjApO1xuICAgICAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IGNvbG9yO1xuXG4gICAgICAgIGZvcihsZXQgaSA9IDE7IGkgPCBwYXJhbS5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBsZXQgZnBzID0gcGFyYW1baV07XG4gICAgICAgICAgICBsZXQgeCA9IDEwICsgaSoodGhpcy5DQU5WQVNfV0lEVEggLSAyMCkvdGhpcy5OVU1fUE9JTlRTO1xuICAgICAgICAgICAgbGV0IHkgPSB0aGlzLkNBTlZBU19IRUlHSFQgLSAxMCAtIGZwcy9tYXgqKHRoaXMuQ0FOVkFTX0hFSUdIVC0yMClcbiAgICAgICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgdGhpcy5jdHgubW92ZVRvKHByZXZYLCBwcmV2WSk7XG4gICAgICAgICAgICB0aGlzLmN0eC5saW5lVG8oeCwgeSk7XG4gICAgICAgICAgICB0aGlzLmN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuXG4gICAgICAgICAgICBwcmV2WCA9IHg7XG4gICAgICAgICAgICBwcmV2WSA9IHk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgdXBkYXRlU0dTdGF0cygpe1xuICAgICAgICBpZih0aGlzLlNHQ2xlYXJUaW1lcy5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgIHRoaXMuYXZnU0dDbGVhclRpbWUgPSB0aGlzLlNHQ2xlYXJUaW1lcy5yZWR1Y2UoKGFjYywgdmFsKSA9PiBhY2MgKyB2YWwpL3RoaXMuU0dDbGVhclRpbWVzLmxlbmd0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHRoaXMuU0dGaWxsVGltZXMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICB0aGlzLmF2Z1NHRmlsbFRpbWUgPSB0aGlzLlNHRmlsbFRpbWVzLnJlZHVjZSgoYWNjLCB2YWwpID0+IGFjYyArIHZhbCkvdGhpcy5TR0ZpbGxUaW1lcy5sZW5ndGg7XG4gICAgICAgIH1cblxuICAgICAgICBpZih0aGlzLlNHVXBkYXRlVGltZXMubGVuZ3RoID4gMCl7XG4gICAgICAgIHRoaXMuYXZnU0dVcGRhdGVUaW1lID0gdGhpcy5TR1VwZGF0ZVRpbWVzLnJlZHVjZSgoYWNjLCB2YWwpID0+IGFjYyArIHZhbCkvdGhpcy5TR1VwZGF0ZVRpbWVzLmxlbmd0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHRoaXMuU0dRdWVyeVRpbWVzLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgdGhpcy5hdmdTR1F1ZXJ5VGltZSA9IHRoaXMuU0dRdWVyeVRpbWVzLnJlZHVjZSgoYWNjLCB2YWwpID0+IGFjYyArIHZhbCkvdGhpcy5TR1F1ZXJ5VGltZXMubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZ2NsZWFyXCIpLmlubmVySFRNTCA9IFwiQXZnIFNHIGNsZWFyIHRpbWU6IFwiICsgdGhpcy5hdmdTR0NsZWFyVGltZTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZ2ZpbGxcIikuaW5uZXJIVE1MID0gXCJBdmcgU0cgZmlsbCB0aW1lOiBcIiArIHRoaXMuYXZnU0dGaWxsVGltZTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZ3VwZGF0ZVwiKS5pbm5lckhUTUwgPSBcIkF2ZyBTRyB1cGRhdGUgdGltZTogXCIgKyB0aGlzLmF2Z1NHVXBkYXRlVGltZTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZ3F1ZXJ5XCIpLmlubmVySFRNTCA9IFwiQXZnIFNHIHF1ZXJ5IHRpbWU6IFwiICsgdGhpcy5hdmdTR1F1ZXJ5VGltZTtcbiAgICB9XG59IiwiaW1wb3J0IE1hcCBmcm9tIFwiLi4vRGF0YVR5cGVzL0NvbGxlY3Rpb25zL01hcFwiO1xuaW1wb3J0IEV2ZW50UXVldWUgZnJvbSBcIi4vRXZlbnRRdWV1ZVwiO1xuaW1wb3J0IEdhbWVFdmVudCBmcm9tIFwiLi9HYW1lRXZlbnRcIjtcblxuLyoqXG4gKiBBbiBldmVudCBlbWl0dGVyIG9iamVjdCBvdGhlciBzeXN0ZW1zIGNhbiB1c2UgdG8gaG9vayBpbnRvIHRoZSBFdmVudFF1ZXVlLlxuICogUHJvdmlkZXMgYW4gZWFzeSBpbnRlcmZhY2UgZm9yIGZpcmluZyBvZmYgZXZlbnRzLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbWl0dGVyIHtcblx0LyoqIEEgcmVmZXJlbmNlIHRvIHRoZSBFdmVudFF1ZXVlICovXG5cdHByaXZhdGUgZXZlbnRRdWV1ZTogRXZlbnRRdWV1ZTtcblxuXHQvKiogQ3JlYXRlcyBhIG5ldyBFbWl0dGVyICovXG5cdGNvbnN0cnVjdG9yKCl7XG5cdFx0dGhpcy5ldmVudFF1ZXVlID0gRXZlbnRRdWV1ZS5nZXRJbnN0YW5jZSgpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEVtaXQgYW5kIGV2ZW50IG9mIHR5cGUgZXZlbnRUeXBlIHdpdGggdGhlIGRhdGEgcGFja2V0IGRhdGFcblx0ICogQHBhcmFtIGV2ZW50VHlwZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQgdG8gZmlyZSBvZmZcblx0ICogQHBhcmFtIGRhdGEgQSBAcmVmZXJlbmNlW01hcF0gb3IgcmVjb3JkIGNvbnRhaW5pbmcgYW55IGRhdGEgYWJvdXQgdGhlIGV2ZW50XG5cdCAqL1xuXHRmaXJlRXZlbnQoZXZlbnRUeXBlOiBzdHJpbmcsIGRhdGE6IE1hcDxhbnk+IHwgUmVjb3JkPHN0cmluZywgYW55PiA9IG51bGwpOiB2b2lkIHtcblx0XHR0aGlzLmV2ZW50UXVldWUuYWRkRXZlbnQobmV3IEdhbWVFdmVudChldmVudFR5cGUsIGRhdGEpKTtcblx0fVxufSIsImltcG9ydCBRdWV1ZSBmcm9tIFwiLi4vRGF0YVR5cGVzL0NvbGxlY3Rpb25zL1F1ZXVlXCI7XG5pbXBvcnQgTWFwIGZyb20gXCIuLi9EYXRhVHlwZXMvQ29sbGVjdGlvbnMvTWFwXCI7XG5pbXBvcnQgR2FtZUV2ZW50IGZyb20gXCIuL0dhbWVFdmVudFwiO1xuaW1wb3J0IFJlY2VpdmVyIGZyb20gXCIuL1JlY2VpdmVyXCI7XG5pbXBvcnQgeyBHYW1lRXZlbnRUeXBlIH0gZnJvbSBcIi4vR2FtZUV2ZW50VHlwZVwiO1xuXG4vKipcbiAqIFRoZSBtYWluIGV2ZW50IHN5c3RlbSBvZiB0aGUgZ2FtZSBlbmdpbmUuXG4gKiBFdmVudHMgYXJlIHNlbnQgdG8gdGhlIEV2ZW50UXVldWUsIHdoaWNoIGhhbmRsZXMgZGlzdHJpYnV0aW9uIHRvIGFueSBzeXN0ZW1zIHRoYXQgYXJlIGxpc3RlbmluZyBmb3IgdGhvc2UgZXZlbnRzLlxuICogVGhpcyBhbGxvd3MgZm9yIGhhbmRsaW5nIG9mIGlucHV0IHdpdGhvdXQgaGF2aW5nIGNsYXNzZXMgZGlyZWN0bHkgaG9vayBpbnRvIGphdmFzY3JpcHQgZXZlbnQgaGFuZGxlcywgXG4gKiBhbmQgYWxsb3dzIG90aGVyd2lzZSBzZXBhcmF0ZSBjbGFzc2VzIHRvIGNvbW11bmljYXRlIHdpdGggZWFjaCBvdGhlciBjbGVhbmx5LCBzdWNoIGFzIGEgUGxheWVyIG9iamVjdCBcbiAqIHJlcXVlc3RpbmcgYSBzb3VuZCBiZSBwbGF5ZWQgYnkgdGhlIGF1ZGlvIHN5c3RlbS5cbiAqIFxuICogVGhlIGRpc3RyaWJ1dGlvbiBvZiBAcmVmZXJlbmNlW0dhbWVFdmVudF1zIGhhcHBlbnMgYXMgZm9sbG93czpcbiAqIFxuICogRXZlbnRzIGFyZSByZWNpZXZlZCB0aHJvdWdob3V0IGEgZnJhbWUgYW5kIGFyZSBxdWV1ZWQgdXAgYnkgdGhlIEV2ZW50UXVldWUuXG4gKiBBdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBuZXh0IGZyYW1lLCBldmVudHMgYXJlIHNlbnQgb3V0IHRvIGFueSByZWNlaXZlcnMgdGhhdCBhcmUgaG9va2VkIGludG8gdGhlIGV2ZW50IHR5cGUuXG4gKiBAcmVmZXJlbmNlW1JlY2VpdmVyXXMgYXJlIHRoZW4gZnJlZSB0byBwcm9jZXNzIGV2ZW50cyBhcyB0aGV5IHNlZSBmaXQuXG4gKiBcbiAqIE92ZXJhbGwsIHRoZSBFdmVudFF1ZXVlIGNhbiBiZSBjb25zaWRlcmVkIGFzIHNvbWV0aGluZyBzaW1pbGFyIHRvIGFuIGVtYWlsIHNlcnZlcixcbiAqIGFuZCB0aGUgQHJlZmVyZW5jZVtSZWNlaXZlcl1zIGNhbiBiZSBjb25zaWRlcmVkIGFzIHRoZSBjbGllbnQgaW5ib3hlcy5cbiAqIFxuICogU2VlIEBsaW5rKEdhbWUgUHJvZ3JhbW1pbmcgUGF0dGVybnMpKGh0dHBzOi8vZ2FtZXByb2dyYW1taW5ncGF0dGVybnMuY29tL2V2ZW50LXF1ZXVlLmh0bWwpIGZvciBtb3JlIGRpc2N1c3Npb24gb24gRXZlbnRRdWV1ZXNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXZlbnRRdWV1ZSB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IEV2ZW50UXVldWUgPSBudWxsO1xuICAgIFxuICAgIC8qKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgZXZlbnRzIHZpc2libGUgKi9cbiAgICBwcml2YXRlIHJlYWRvbmx5IE1BWF9TSVpFOiBudW1iZXI7XG4gICAgXG4gICAgLyoqIFRoZSBhY3R1YWwgcXVldWUgb2YgZXZlbnRzICovXG4gICAgcHJpdmF0ZSBxOiBRdWV1ZTxHYW1lRXZlbnQ+O1xuICAgIFxuICAgIC8qKiBUaGUgbWFwIG9mIHJlY2VpdmVycyByZWdpc3RlcmVkIGZvciBhbiBldmVudCBuYW1lICovXG5cdHByaXZhdGUgcmVjZWl2ZXJzOiBNYXA8QXJyYXk8UmVjZWl2ZXI+PjtcblxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKXtcbiAgICAgICAgdGhpcy5NQVhfU0laRSA9IDIwMDtcbiAgICAgICAgdGhpcy5xID0gbmV3IFF1ZXVlPEdhbWVFdmVudD4odGhpcy5NQVhfU0laRSk7XG4gICAgICAgIHRoaXMucmVjZWl2ZXJzID0gbmV3IE1hcDxBcnJheTxSZWNlaXZlcj4+KCk7XG5cdH1cbiAgICBcbiAgICAvKiogUmV0cmlldmVzIHRoZSBpbnN0YW5jZSBvZiB0aGUgU2luZ2xldG9uIEV2ZW50UXVldWUgKi9cblx0c3RhdGljIGdldEluc3RhbmNlKCk6IEV2ZW50UXVldWUge1xuXHRcdGlmKHRoaXMuaW5zdGFuY2UgPT09IG51bGwpe1xuXHRcdFx0dGhpcy5pbnN0YW5jZSA9IG5ldyBFdmVudFF1ZXVlKCk7XG5cdFx0fVxuXHRcdFxuXHRcdHJldHVybiB0aGlzLmluc3RhbmNlO1xuXHR9XG5cbiAgICAvKiogQWRkcyBhbiBldmVudCB0byB0aGUgRXZlbnRRdWV1ZS5cbiAgICAgKiBUaGlzIGlzIGV4cG9zZWQgdG8gdGhlIHJlc3Qgb2YgdGhlIGdhbWUgZW5naW5lIHRocm91Z2ggdGhlIEByZWZlcmVuY2VbRW1pdHRlcl0gY2xhc3MgKi9cbiAgICBhZGRFdmVudChldmVudDogR2FtZUV2ZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMucS5lbnF1ZXVlKGV2ZW50KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBc3NvY2lhdGVzIGEgcmVjZWl2ZXIgd2l0aCBhIHR5cGUgb2YgZXZlbnQuIEV2ZXJ5IHRpbWUgdGhpcyBldmVudCBhcHBlYXJzIGluIHRoZSBmdXR1cmUsXG4gICAgICogaXQgd2lsbCBiZSBnaXZlbiB0byB0aGUgcmVjZWl2ZXIgKGFuZCBhbnkgb3RoZXJzIHdhdGNoaW5nIHRoYXQgdHlwZSkuXG4gICAgICogVGhpcyBpcyBleHBvc2VkIHRvIHRoZSByZXN0IG9mIHRoZSBnYW1lIGVuZ2luZSB0aHJvdWdoIHRoZSBAcmVmZXJlbmNlW1JlY2VpdmVyXSBjbGFzc1xuICAgICAqIEBwYXJhbSByZWNlaXZlciBUaGUgZXZlbnQgcmVjZWl2ZXJcbiAgICAgKiBAcGFyYW0gdHlwZSBUaGUgdHlwZSBvciB0eXBlcyBvZiBldmVudHMgdG8gc3Vic2NyaWJlIHRvXG4gICAgICovXG4gICAgc3Vic2NyaWJlKHJlY2VpdmVyOiBSZWNlaXZlciwgdHlwZTogc3RyaW5nIHwgQXJyYXk8c3RyaW5nPik6IHZvaWQge1xuICAgICAgICBpZih0eXBlIGluc3RhbmNlb2YgQXJyYXkpe1xuICAgICAgICAgICAgLy8gSWYgaXQgaXMgYW4gYXJyYXksIHN1YnNjcmliZSB0byBhbGwgZXZlbnQgdHlwZXNcbiAgICAgICAgICAgIGZvcihsZXQgdCBvZiB0eXBlKXtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZExpc3RlbmVyKHJlY2VpdmVyLCB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWRkTGlzdGVuZXIocmVjZWl2ZXIsIHR5cGUpO1xuICAgICAgICB9XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFVuc3Vic2NyaWJlcyB0aGUgc3BlY2lmaWVkIHJlY2VpdmVyIGZyb20gYWxsIGV2ZW50cywgb3IgZnJvbSB3aGF0ZXZlciBldmVudHMgYXJlIHByb3ZpZGVkXG4gICAgICogQHBhcmFtIHJlY2VpdmVyIFRoZSByZWNlaXZlciB0byB1bnN1YnNjcmliZVxuICAgICAqIEBwYXJhbSBrZXlzIFRoZSBldmVudHMgdG8gdW5zdWJzY3JpYmUgZnJvbS4gSWYgbm9uZSBhcmUgcHJvdmlkZWQsIHVuc3Vic2NyaWJlIGZyb20gYWxsXG4gICAgICovXG4gICAgdW5zdWJzY3JpYmUocmVjZWl2ZXI6IFJlY2VpdmVyLCAuLi5ldmVudHM6IEFycmF5PHN0cmluZz4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZWNlaXZlcnMuZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgICAgICAgICAgLy8gSWYga2V5cyB3ZXJlIHByb3ZpZGVkLCBvbmx5IGNvbnRpbnVlIGlmIHRoaXMga2V5IGlzIG9uZSBvZiB0aGVtXG4gICAgICAgICAgICBpZihldmVudHMubGVuZ3RoID4gMCAmJiBldmVudHMuaW5kZXhPZihldmVudE5hbWUpID09PSAtMSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAvLyBGaW5kIHRoZSBpbmRleCBvZiBvdXIgcmVjZWl2ZXIgZm9yIHRoaXMga2V5XG4gICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnJlY2VpdmVycy5nZXQoZXZlbnROYW1lKS5pbmRleE9mKHJlY2VpdmVyKTtcblxuICAgICAgICAgICAgLy8gSWYgYW4gaW5kZXggd2FzIGZvdW5kLCByZW1vdmUgdGhlIHJlY2VpdmVyXG4gICAgICAgICAgICBpZihpbmRleCAhPT0gLTEpe1xuICAgICAgICAgICAgICAgIHRoaXMucmVjZWl2ZXJzLmdldChldmVudE5hbWUpLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEFzc29jaWF0ZSB0aGUgcmVjZWl2ZXIgYW5kIHRoZSB0eXBlXG5cdHByaXZhdGUgYWRkTGlzdGVuZXIocmVjZWl2ZXI6IFJlY2VpdmVyLCB0eXBlOiBzdHJpbmcpOiB2b2lkIHtcblx0XHRpZih0aGlzLnJlY2VpdmVycy5oYXModHlwZSkpe1xuXHRcdFx0dGhpcy5yZWNlaXZlcnMuZ2V0KHR5cGUpLnB1c2gocmVjZWl2ZXIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnJlY2VpdmVycy5hZGQodHlwZSwgW3JlY2VpdmVyXSk7XG5cdFx0fVxuXHR9XG4gICAgXG4gICAgdXBkYXRlKGRlbHRhVDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHdoaWxlKHRoaXMucS5oYXNJdGVtcygpKXtcbiAgICAgICAgICAgIC8vIFJldHJpZXZlIGVhY2ggZXZlbnRcblx0XHRcdGxldCBldmVudCA9IHRoaXMucS5kZXF1ZXVlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIElmIGEgcmVjZWl2ZXIgaGFzIHRoaXMgZXZlbnQgdHlwZSwgc2VuZCBpdCB0aGUgZXZlbnRcbiAgICAgICAgICAgIGlmKHRoaXMucmVjZWl2ZXJzLmhhcyhldmVudC50eXBlKSl7XG4gICAgICAgICAgICAgICAgZm9yKGxldCByZWNlaXZlciBvZiB0aGlzLnJlY2VpdmVycy5nZXQoZXZlbnQudHlwZSkpe1xuICAgICAgICAgICAgICAgICAgICByZWNlaXZlci5yZWNlaXZlKGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG5cdFx0XHR9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIElmIGEgcmVjZWl2ZXIgaXMgc3Vic2NyaWJlZCB0byBhbGwgZXZlbnRzLCBzZW5kIGl0IHRoZSBldmVudFxuICAgICAgICAgICAgaWYodGhpcy5yZWNlaXZlcnMuaGFzKEdhbWVFdmVudFR5cGUuQUxMKSl7XG4gICAgICAgICAgICAgICAgZm9yKGxldCByZWNlaXZlciBvZiB0aGlzLnJlY2VpdmVycy5nZXQoR2FtZUV2ZW50VHlwZS5BTEwpKXtcbiAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXIucmVjZWl2ZShldmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCBNYXAgZnJvbSBcIi4uL0RhdGFUeXBlcy9Db2xsZWN0aW9ucy9NYXBcIlxuXG4vKipcbiAqIEEgcmVwcmVzZW50YXRpb24gb2YgYW4gaW4tZ2FtZSBldmVudCB0aGF0IGlzIHBhc3NlZCB0aHJvdWdoIHRoZSBAcmVmZXJlbmNlW0V2ZW50UXVldWVdXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVFdmVudCB7XG4gICAgLyoqIFRoZSB0eXBlIG9mIHRoZSBldmVudCAqL1xuICAgIHB1YmxpYyB0eXBlOiBzdHJpbmc7XG4gICAgLyoqIFRoZSBkYXRhIGNvbnRhaW5lZCBieSB0aGUgZXZlbnQgKi9cbiAgICBwdWJsaWMgZGF0YTogTWFwPGFueT47XG4gICAgLyoqIFRoZSB0aW1lIG9mIHRoZSBldmVudCBpbiBtcyAqL1xuXHRwdWJsaWMgdGltZTogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBHYW1lRXZlbnQuXG4gICAgICogVGhpcyBpcyBoYW5kbGVkIGltcGxpY2l0bHkgdGhyb3VnaCB0aGUgQHJlZmVyZW5jZVtFbWl0dGVyXSBjbGFzc1xuICAgICAqIEBwYXJhbSB0eXBlIFRoZSB0eXBlIG9mIHRoZSBHYW1lRXZlbnRcbiAgICAgKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSBjb250YWluZWQgYnkgdGhlIEdhbWVFdmVudFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHR5cGU6IHN0cmluZywgZGF0YTogTWFwPGFueT4gfCBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0gbnVsbCkge1xuICAgICAgICAvLyBQYXJzZSB0aGUgZ2FtZSBldmVudCBkYXRhXG4gICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBuZXcgTWFwPGFueT4oKTtcbiAgICAgICAgfSBlbHNlIGlmICghKGRhdGEgaW5zdGFuY2VvZiBNYXApKXtcbiAgICAgICAgICAgIC8vIGRhdGEgaXMgYSByYXcgb2JqZWN0LCB1bnBhY2tcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IG5ldyBNYXA8YW55PigpO1xuICAgICAgICAgICAgZm9yKGxldCBrZXkgaW4gZGF0YSl7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhLmFkZChrZXksIGRhdGFba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy50aW1lID0gRGF0ZS5ub3coKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdGhlIHR5cGUgb2YgdGhlIEdhbWVFdmVudFxuICAgICAqIEBwYXJhbSB0eXBlIFRoZSB0eXBlIHRvIGNoZWNrXG4gICAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgR2FtZUV2ZW50IGlzIHRoZSBzcGVjaWZpZWQgdHlwZSwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIGlzVHlwZSh0eXBlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gdHlwZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoaXMgR2FtZUV2ZW50IGFzIGEgc3RyaW5nXG4gICAgICogQHJldHVybnMgVGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgR2FtZUV2ZW50XG4gICAgICovXG4gICAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZSArIFwiOiBAXCIgKyB0aGlzLnRpbWU7XG4gICAgfVxufSIsIi8vIEBpZ25vcmVQYWdlXG5cbmV4cG9ydCBlbnVtIEdhbWVFdmVudFR5cGUge1xuXHQvKipcblx0ICogTW91c2UgRG93biBldmVudC4gSGFzIGRhdGE6IHtwb3NpdGlvbjogVmVjMiAtIE1vdXNlIFBvc2l0aW9ufVxuXHQgKi9cblx0TU9VU0VfRE9XTiA9IFwibW91c2VfZG93blwiLFxuXHQvKipcblx0ICogTW91c2UgVXAgZXZlbnQuIEhhcyBkYXRhOiB7cG9zaXRpb246IFZlYzIgLSBNb3VzZSBQb3NpdGlvbn1cblx0ICovXG5cdE1PVVNFX1VQID0gXCJtb3VzZV91cFwiLFxuXHQvKipcblx0ICogTW91c2UgTW92ZSBldmVudC4gSGFzIGRhdGE6IHtwb3NpdGlvbjogVmVjMiAtIE1vdXNlIFBvc2l0aW9ufVxuXHQgKi9cblx0TU9VU0VfTU9WRSA9IFwibW91c2VfbW92ZVwiLFxuXG5cdC8qKlxuXHQgKiBLZXkgRG93biBldmVudC4gSGFzIGRhdGE6IHtrZXk6IHN0cmluZyAtIFRoZSBrZXkgdGhhdCBpcyBkb3dufVxuXHQgKi9cblx0S0VZX0RPV04gPSBcImtleV9kb3duXCIsXG5cblx0LyoqXG5cdCAqIEtleSBVcCBldmVudC4gSGFzIGRhdGE6IHtrZXk6IHN0cmluZyAtIFRoZSBrZXkgdGhhdCBpcyB1cH1cblx0ICovXG5cdEtFWV9VUCA9IFwia2V5X3VwXCIsXG5cblx0LyoqXG5cdCAqIENhbnZhcyBCbHVyIGV2ZW50LiBIYXMgZGF0YToge31cblx0ICovXG5cdENBTlZBU19CTFVSID0gXCJjYW52YXNfYmx1clwiLFxuXG5cdC8qKlxuXHQgKiBNb3VzZSB3aGVlbCB1cCBldmVudC4gSGFzIGRhdGE6IHt9XG5cdCAqL1xuXHRXSEVFTF9VUCA9IFwid2hlZWxfdXBcIixcblxuXHQvKipcblx0ICogTW91c2Ugd2hlZWwgZG93biBldmVudC4gSGFzIGRhdGE6IHt9XG5cdCAqL1xuXHRXSEVFTF9ET1dOID0gXCJ3aGVlbF9kb3duXCIsXG5cblx0LyoqXG5cdCAqIFN0YXJ0IFJlY29yZGluZyBldmVudC4gSGFzIGRhdGE6IHtyZWNvcmRpbmc6IEFic3RyYWN0UmVjb3JkaW5nfVxuXHQgKi9cblx0U1RBUlRfUkVDT1JESU5HID0gXCJzdGFydF9yZWNvcmRpbmdcIixcblxuXHQvKipcblx0ICogU3RvcCBSZWNvcmRpbmcgZXZlbnQuIEhhcyBkYXRhOiB7fVxuXHQgKi9cblx0U1RPUF9SRUNPUkRJTkcgPSBcInN0b3BfcmVjb3JkaW5nXCIsXG5cdFxuXHQvKipcblx0ICogUGxheSBSZWNvcmRpbmcgZXZlbnQuIEhhcyBkYXRhOiB7fVxuXHQgKi9cblx0UExBWV9SRUNPUkRJTkcgPSBcInBsYXlfcmVjb3JkaW5nXCIsXG5cblx0LyoqXG5cdCAqIFBsYXkgU291bmQgZXZlbnQuIEhhcyBkYXRhOiB7a2V5OiBzdHJpbmcsIGxvb3A6IGJvb2xlYW4sIGhvbGRSZWZlcmVuY2U6IGJvb2xlYW4gfVxuXHQgKi9cblx0UExBWV9TT1VORCA9IFwicGxheV9zb3VuZFwiLFxuXG5cdC8qKlxuXHQgKiBQbGF5IFNvdW5kIGV2ZW50LiBIYXMgZGF0YToge2tleTogc3RyaW5nfVxuXHQgKi9cblx0U1RPUF9TT1VORCA9IFwic3RvcF9zb3VuZFwiLFxuXG5cdC8qKlxuXHQgKiBQbGF5IFNvdW5kIGV2ZW50LiBIYXMgZGF0YToge2tleTogc3RyaW5nLCBsb29wOiBib29sZWFuLCBob2xkUmVmZXJlbmNlOiBib29sZWFuLCBjaGFubmVsOiBBdWRpb0NoYW5uZWxUeXBlIH1cblx0ICovXG4gXHRQTEFZX1NGWCA9IFwicGxheV9zZnhcIixcblxuIFx0LyoqXG5cdCAqIFBsYXkgU291bmQgZXZlbnQuIEhhcyBkYXRhOiB7a2V5OiBzdHJpbmcsIGxvb3A6IGJvb2xlYW4sIGhvbGRSZWZlcmVuY2U6IGJvb2xlYW4gfVxuXHQgKi9cbiAgXHRQTEFZX01VU0lDID0gXCJwbGF5X211c2ljXCIsXG5cblx0LyoqXG5cdCAqIE11dGUgYXVkaW8gY2hhbm5lbCBldmVudC4gSGFzIGRhdGE6IHtjaGFubmVsOiBBdWRpb0NoYW5uZWxUeXBlfVxuXHQgKi9cblx0TVVURV9DSEFOTkVMID0gXCJtdXRlX2NoYW5uZWxcIixcblxuXHQvKipcblx0ICogVW5tdXRlIGF1ZGlvIGNoYW5uZWwgZXZlbnQuIEhhcyBkYXRhOiB7Y2hhbm5lbDogQXVkaW9DaGFubmVsVHlwZX1cblx0ICovXG5cdFVOTVVURV9DSEFOTkVMID0gXCJ1bm11dGVfY2hhbm5lbFwiLFxuXG5cdC8qKlxuXHQgKiBFbmNvbXBhc3NlcyBhbGwgZXZlbnQgdHlwZXMuIFVzZWQgZm9yIHJlY2VpdmVycyBvbmx5LlxuXHQgKi9cblx0QUxMID0gXCJhbGxcIixcblxuXHQvKiogXG5cdCAqIERpc2FibGVzIHJldmVpdmluZyBpbnB1dCBmcm9tIHRoZSB1c2VyIGZvciB0aGUgc3BlY2lmaWVkIGlucHV0cy4gSGFzIGRhdGE6IHtpbnB1dHM6IElucHV0SGFubGRlcnNbXX1cblx0ICovXG5cdERJU0FCTEVfVVNFUl9JTlBVVCA9IFwiZGlzYWJsZV91c2VyX2lucHV0XCIsXG5cblx0LyoqIFxuXHQgKiBFbmFibGVzIHJlY2VpdmluZyBpbnB1dCBmcm9tIHRoZSB1c2VyIGZvciB0aGUgc3BlY2lmaWVkIGlucHV0cy4gSGFzIGRhdGE6IHtpbnB1dHM6IElucHV0SGFuZGxlcnNbXX1cblx0ICovXG5cdEVOQUJMRV9VU0VSX0lOUFVUID0gXCJlbmFibGVfdXNlcl9pbnB1dFwiLFxuXG5cdC8qKlxuXHQgKiBUcmlnZ2VycyBhIHNjZW5lIGNoYW5nZS4gSGFzIGRhdGE6IHtzY2VuZTogbmV3ICguLi5hcmdzOiBhbnkpID0+IFQgZXh0ZW5kcyBTY2VuZSwgaW5pdDogUmVjb3JkPHN0cmluZywgYW55Pn1cblx0ICovXG5cdENIQU5HRV9TQ0VORSA9IFwiY2hhbmdlX3NjZW5lXCJcbn0iLCJpbXBvcnQgUXVldWUgZnJvbSBcIi4uL0RhdGFUeXBlcy9Db2xsZWN0aW9ucy9RdWV1ZVwiO1xuaW1wb3J0IEV2ZW50UXVldWUgZnJvbSBcIi4vRXZlbnRRdWV1ZVwiO1xuaW1wb3J0IEdhbWVFdmVudCBmcm9tIFwiLi9HYW1lRXZlbnRcIjtcblxuLyoqXG4gKiBSZWNlaXZlcyBzdWJzY3JpYmVkIGV2ZW50cyBmcm9tIHRoZSBFdmVudFF1ZXVlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZWNlaXZlciB7XG5cdC8qKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgZXZlbnRzIHRoaXMgUmVjZWl2ZXIgY2FuIGhvbGQgYXQgb25lIHRpbWUgKi9cblx0cmVhZG9ubHkgTUFYX1NJWkU6IG51bWJlcjtcblxuXHQvKiogVGhlIGluYm94IG9mIHRoZSBSZWNlaXZlciAqL1xuXHRwcml2YXRlIHE6IFF1ZXVlPEdhbWVFdmVudD47XG5cblx0LyoqIENyZWF0ZXMgYSBuZXcgUmVjZWl2ZXIgKi9cblx0Y29uc3RydWN0b3IoKXtcblx0XHR0aGlzLk1BWF9TSVpFID0gMjAwO1xuICAgICAgICB0aGlzLnEgPSBuZXcgUXVldWUodGhpcy5NQVhfU0laRSk7XG5cdH1cblxuXHRkZXN0cm95KCl7XG5cdFx0RXZlbnRRdWV1ZS5nZXRJbnN0YW5jZSgpLnVuc3Vic2NyaWJlKHRoaXMpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQWRkcyB0aGVzZSB0eXBlcyBvZiBldmVudHMgdG8gdGhpcyByZWNlaXZlcidzIHF1ZXVlIGV2ZXJ5IHVwZGF0ZS5cblx0ICogQHBhcmFtIGV2ZW50VHlwZXMgVGhlIHR5cGVzIG9mIGV2ZW50cyB0aGlzIHJlY2VpdmVyIHdpbGwgYmUgc3Vic2NyaWJlZCB0b1xuXHQgKi9cblx0c3Vic2NyaWJlKGV2ZW50VHlwZXM6IHN0cmluZyB8IEFycmF5PHN0cmluZz4pOiB2b2lkIHtcblx0XHRFdmVudFF1ZXVlLmdldEluc3RhbmNlKCkuc3Vic2NyaWJlKHRoaXMsIGV2ZW50VHlwZXMpO1xuXHRcdHRoaXMucS5jbGVhcigpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFkZHMgYW4gZXZlbnQgdG8gdGhlIHF1ZXVlIG9mIHRoaXMgcmVjaWV2ZXIuIFRoaXMgaXMgdXNlZCBieSB0aGUgQHJlZmVyZW5jZVtFdmVudFF1ZXVlXSB0byBkaXN0cmlidXRlIGV2ZW50c1xuXHQgKiBAcGFyYW0gZXZlbnQgVGhlIGV2ZW50IHRvIHJlY2VpdmVcblx0ICovXG5cdHJlY2VpdmUoZXZlbnQ6IEdhbWVFdmVudCk6IHZvaWQge1xuXHRcdHRyeXtcblx0XHR0aGlzLnEuZW5xdWV1ZShldmVudCk7XG5cdFx0fSBjYXRjaChlKXtcblx0XHRcdGNvbnNvbGUud2FybihcIlJlY2VpdmVyIG92ZXJmbG93IGZvciBldmVudCBcIiArIGV2ZW50LnRvU3RyaW5nKCkpO1xuXHRcdFx0dGhyb3cgZTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogUmV0cmlldmVzIHRoZSBuZXh0IGV2ZW50IGZyb20gdGhlIHJlY2VpdmVyJ3MgcXVldWVcblx0ICogQHJldHVybnMgVGhlIG5leHQgR2FtZUV2ZW50XG5cdCAqL1xuXHRnZXROZXh0RXZlbnQoKTogR2FtZUV2ZW50IHtcblx0XHRyZXR1cm4gdGhpcy5xLmRlcXVldWUoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBMb29rcyBhdCB0aGUgbmV4dCBldmVudCBpbiB0aGUgcmVjZWl2ZXIncyBxdWV1ZSwgYnV0IGRvZXNuJ3QgcmVtb3ZlIGl0IGZyb20gdGhlIHF1ZXVlXG5cdCAqIEByZXR1cm5zIFRoZSBuZXh0IEdhbWVFdmVudFxuXHQgKi9cblx0cGVla05leHRFdmVudCgpOiBHYW1lRXZlbnQge1xuXHRcdHJldHVybiB0aGlzLnEucGVla05leHQoKVxuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcmVjZWl2ZXIgaGFzIGFueSBldmVudHMgaW4gaXRzIHF1ZXVlXG5cdCAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHJlY2VpdmVyIGhhcyBhbm90aGVyIGV2ZW50LCBmYWxzZSBvdGhlcndpc2Vcblx0ICovXG5cdGhhc05leHRFdmVudCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy5xLmhhc0l0ZW1zKCk7XG5cdH1cblxuXHQvKipcblx0ICogSWdub3JlIGFsbCBldmVudHMgdGhpcyBmcmFtZVxuXHQgKi9cblx0aWdub3JlRXZlbnRzKCk6IHZvaWQge1xuXHRcdHRoaXMucS5jbGVhcigpO1xuXHR9XG59IiwiaW1wb3J0IFJlY2VpdmVyIGZyb20gXCIuLi9FdmVudHMvUmVjZWl2ZXJcIjtcbmltcG9ydCBNYXAgZnJvbSBcIi4uL0RhdGFUeXBlcy9Db2xsZWN0aW9ucy9NYXBcIjtcbmltcG9ydCBWZWMyIGZyb20gXCIuLi9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IEV2ZW50UXVldWUgZnJvbSBcIi4uL0V2ZW50cy9FdmVudFF1ZXVlXCI7XG5pbXBvcnQgVmlld3BvcnQgZnJvbSBcIi4uL1NjZW5lR3JhcGgvVmlld3BvcnRcIjtcbmltcG9ydCBHYW1lRXZlbnQgZnJvbSBcIi4uL0V2ZW50cy9HYW1lRXZlbnRcIjtcbmltcG9ydCB7IEdhbWVFdmVudFR5cGUgfSBmcm9tIFwiLi4vRXZlbnRzL0dhbWVFdmVudFR5cGVcIjtcblxuLyoqXG4gKiBSZWNlaXZlcyBpbnB1dCBldmVudHMgZnJvbSB0aGUgQHJlZmVyZW5jZVtFdmVudFF1ZXVlXSBhbmQgYWxsb3dzIGZvciBlYXN5IGFjY2VzcyBvZiBpbmZvcm1hdGlvbiBhYm91dCBpbnB1dCBieSBvdGhlciBzeXN0ZW1zXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIElucHV0IHtcblx0cHJpdmF0ZSBzdGF0aWMgbW91c2VQcmVzc2VkOiBib29sZWFuO1xuXHRwcml2YXRlIHN0YXRpYyBtb3VzZUp1c3RQcmVzc2VkOiBib29sZWFuO1xuXHRwcml2YXRlIHN0YXRpYyBtb3VzZUJ1dHRvblByZXNzZWQ6IG51bWJlcjtcblxuXHRwcml2YXRlIHN0YXRpYyBrZXlKdXN0UHJlc3NlZDogTWFwPGJvb2xlYW4+O1xuXHRwcml2YXRlIHN0YXRpYyBrZXlQcmVzc2VkOiBNYXA8Ym9vbGVhbj47XG5cblx0cHJpdmF0ZSBzdGF0aWMgbW91c2VQb3NpdGlvbjogVmVjMjtcblx0cHJpdmF0ZSBzdGF0aWMgbW91c2VQcmVzc1Bvc2l0aW9uOiBWZWMyO1xuXG5cdHByaXZhdGUgc3RhdGljIHNjcm9sbERpcmVjdGlvbjogbnVtYmVyO1xuXHRwcml2YXRlIHN0YXRpYyBqdXN0U2Nyb2xsZWQ6IGJvb2xlYW47XG5cblx0cHJpdmF0ZSBzdGF0aWMgZXZlbnRRdWV1ZTogRXZlbnRRdWV1ZTtcblx0cHJpdmF0ZSBzdGF0aWMgcmVjZWl2ZXI6IFJlY2VpdmVyO1xuXHRwcml2YXRlIHN0YXRpYyB2aWV3cG9ydDogVmlld3BvcnQ7XG5cblx0cHJpdmF0ZSBzdGF0aWMga2V5TWFwOiBNYXA8QXJyYXk8c3RyaW5nPj47XG5cblx0cHJpdmF0ZSBzdGF0aWMga2V5c0Rpc2FibGVkOiBib29sZWFuO1xuXHRwcml2YXRlIHN0YXRpYyBtb3VzZURpc2FibGVkOiBib29sZWFuO1xuXG5cdC8qKlxuXHQgKiBJbml0aWFsaXplcyB0aGUgSW5wdXQgb2JqZWN0XG5cdCAqIEBwYXJhbSB2aWV3cG9ydCBBIHJlZmVyZW5jZSB0byB0aGUgdmlld3BvcnQgb2YgdGhlIGdhbWVcblx0ICovXG5cdHN0YXRpYyBpbml0aWFsaXplKHZpZXdwb3J0OiBWaWV3cG9ydCwga2V5TWFwOiBBcnJheTxSZWNvcmQ8c3RyaW5nLCBhbnk+Pikge1xuXHRcdElucHV0LnZpZXdwb3J0ID0gdmlld3BvcnQ7XG5cdFx0SW5wdXQubW91c2VQcmVzc2VkID0gZmFsc2U7XG5cdFx0SW5wdXQubW91c2VKdXN0UHJlc3NlZCA9IGZhbHNlO1xuXHRcdElucHV0LnJlY2VpdmVyID0gbmV3IFJlY2VpdmVyKCk7XG5cdFx0SW5wdXQua2V5SnVzdFByZXNzZWQgPSBuZXcgTWFwPGJvb2xlYW4+KCk7XG5cdFx0SW5wdXQua2V5UHJlc3NlZCA9IG5ldyBNYXA8Ym9vbGVhbj4oKTtcblx0XHRJbnB1dC5tb3VzZVBvc2l0aW9uID0gbmV3IFZlYzIoMCwgMCk7XG5cdFx0SW5wdXQubW91c2VQcmVzc1Bvc2l0aW9uID0gbmV3IFZlYzIoMCwgMCk7XG5cdFx0SW5wdXQuc2Nyb2xsRGlyZWN0aW9uID0gMDtcblx0XHRJbnB1dC5qdXN0U2Nyb2xsZWQgPSBmYWxzZTtcblx0XHRJbnB1dC5rZXlzRGlzYWJsZWQgPSBmYWxzZTtcblx0XHRJbnB1dC5tb3VzZURpc2FibGVkID0gZmFsc2U7XG5cblx0XHQvLyBJbml0aWFsaXplIHRoZSBrZXltYXBcblx0XHRJbnB1dC5rZXlNYXAgPSBuZXcgTWFwKCk7XG5cblx0XHQvLyBBZGQgYWxsIGtleXMgdG8gdGhlIGtleW1hcFxuXHRcdGZvciAobGV0IGVudHJ5IGluIGtleU1hcCkge1xuXHRcdFx0bGV0IG5hbWUgPSBrZXlNYXBbZW50cnldLm5hbWU7XG5cdFx0XHRsZXQga2V5cyA9IGtleU1hcFtlbnRyeV0ua2V5cztcblx0XHRcdElucHV0LmtleU1hcC5hZGQobmFtZSwga2V5cyk7XG5cdFx0fVxuXG5cdFx0SW5wdXQuZXZlbnRRdWV1ZSA9IEV2ZW50UXVldWUuZ2V0SW5zdGFuY2UoKTtcblx0XHQvLyBTdWJzY3JpYmUgdG8gYWxsIGlucHV0IGV2ZW50c1xuXHRcdElucHV0LmV2ZW50UXVldWUuc3Vic2NyaWJlKElucHV0LnJlY2VpdmVyLCBbR2FtZUV2ZW50VHlwZS5NT1VTRV9ET1dOLCBHYW1lRXZlbnRUeXBlLk1PVVNFX1VQLCBHYW1lRXZlbnRUeXBlLk1PVVNFX01PVkUsXG5cdFx0R2FtZUV2ZW50VHlwZS5LRVlfRE9XTiwgR2FtZUV2ZW50VHlwZS5LRVlfVVAsIEdhbWVFdmVudFR5cGUuQ0FOVkFTX0JMVVIsIEdhbWVFdmVudFR5cGUuV0hFRUxfVVAsIEdhbWVFdmVudFR5cGUuV0hFRUxfRE9XTl0pO1xuXHR9XG5cblx0c3RhdGljIHVwZGF0ZShkZWx0YVQ6IG51bWJlcik6IHZvaWQge1xuXHRcdC8vIFJlc2V0IHRoZSBqdXN0UHJlc3NlZCB2YWx1ZXMgdG8gZmFsc2Vcblx0XHRJbnB1dC5tb3VzZUp1c3RQcmVzc2VkID0gZmFsc2U7XG5cdFx0SW5wdXQua2V5SnVzdFByZXNzZWQuZm9yRWFjaCgoa2V5OiBzdHJpbmcpID0+IElucHV0LmtleUp1c3RQcmVzc2VkLnNldChrZXksIGZhbHNlKSk7XG5cdFx0SW5wdXQuanVzdFNjcm9sbGVkID0gZmFsc2U7XG5cdFx0SW5wdXQuc2Nyb2xsRGlyZWN0aW9uID0gMDtcblxuXHRcdHdoaWxlIChJbnB1dC5yZWNlaXZlci5oYXNOZXh0RXZlbnQoKSkge1xuXHRcdFx0bGV0IGV2ZW50ID0gSW5wdXQucmVjZWl2ZXIuZ2V0TmV4dEV2ZW50KCk7XG5cblx0XHRcdC8vIEhhbmRsZSBlYWNoIGV2ZW50IHR5cGVcblx0XHRcdGlmIChldmVudC50eXBlID09PSBHYW1lRXZlbnRUeXBlLk1PVVNFX0RPV04pIHtcblx0XHRcdFx0SW5wdXQubW91c2VKdXN0UHJlc3NlZCA9IHRydWU7XG5cdFx0XHRcdElucHV0Lm1vdXNlUHJlc3NlZCA9IHRydWU7XG5cdFx0XHRcdElucHV0Lm1vdXNlUHJlc3NQb3NpdGlvbiA9IGV2ZW50LmRhdGEuZ2V0KFwicG9zaXRpb25cIik7XG5cdFx0XHRcdElucHV0Lm1vdXNlQnV0dG9uUHJlc3NlZCA9IGV2ZW50LmRhdGEuZ2V0KFwiYnV0dG9uXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZXZlbnQudHlwZSA9PT0gR2FtZUV2ZW50VHlwZS5NT1VTRV9VUCkge1xuXHRcdFx0XHRJbnB1dC5tb3VzZVByZXNzZWQgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGV2ZW50LnR5cGUgPT09IEdhbWVFdmVudFR5cGUuTU9VU0VfTU9WRSkge1xuXHRcdFx0XHRJbnB1dC5tb3VzZVBvc2l0aW9uID0gZXZlbnQuZGF0YS5nZXQoXCJwb3NpdGlvblwiKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGV2ZW50LnR5cGUgPT09IEdhbWVFdmVudFR5cGUuS0VZX0RPV04pIHtcblx0XHRcdFx0bGV0IGtleSA9IGV2ZW50LmRhdGEuZ2V0KFwia2V5XCIpO1xuXHRcdFx0XHQvLyBIYW5kbGUgc3BhY2UgYmFyXG5cdFx0XHRcdGlmIChrZXkgPT09IFwiIFwiKSB7XG5cdFx0XHRcdFx0a2V5ID0gXCJzcGFjZVwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICghSW5wdXQua2V5UHJlc3NlZC5nZXQoa2V5KSkge1xuXHRcdFx0XHRcdElucHV0LmtleUp1c3RQcmVzc2VkLnNldChrZXksIHRydWUpO1xuXHRcdFx0XHRcdElucHV0LmtleVByZXNzZWQuc2V0KGtleSwgdHJ1ZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKGV2ZW50LnR5cGUgPT09IEdhbWVFdmVudFR5cGUuS0VZX1VQKSB7XG5cdFx0XHRcdGxldCBrZXkgPSBldmVudC5kYXRhLmdldChcImtleVwiKTtcblx0XHRcdFx0Ly8gSGFuZGxlIHNwYWNlIGJhclxuXHRcdFx0XHRpZiAoa2V5ID09PSBcIiBcIikge1xuXHRcdFx0XHRcdGtleSA9IFwic3BhY2VcIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRJbnB1dC5rZXlQcmVzc2VkLnNldChrZXksIGZhbHNlKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGV2ZW50LnR5cGUgPT09IEdhbWVFdmVudFR5cGUuQ0FOVkFTX0JMVVIpIHtcblx0XHRcdFx0SW5wdXQuY2xlYXJLZXlQcmVzc2VzKClcblx0XHRcdH1cblxuXHRcdFx0aWYgKGV2ZW50LnR5cGUgPT09IEdhbWVFdmVudFR5cGUuV0hFRUxfVVApIHtcblx0XHRcdFx0SW5wdXQuc2Nyb2xsRGlyZWN0aW9uID0gLTE7XG5cdFx0XHRcdElucHV0Lmp1c3RTY3JvbGxlZCA9IHRydWU7XG5cdFx0XHR9IGVsc2UgaWYgKGV2ZW50LnR5cGUgPT09IEdhbWVFdmVudFR5cGUuV0hFRUxfRE9XTikge1xuXHRcdFx0XHRJbnB1dC5zY3JvbGxEaXJlY3Rpb24gPSAxO1xuXHRcdFx0XHRJbnB1dC5qdXN0U2Nyb2xsZWQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgc3RhdGljIGNsZWFyS2V5UHJlc3NlcygpOiB2b2lkIHtcblx0XHRJbnB1dC5rZXlKdXN0UHJlc3NlZC5mb3JFYWNoKChrZXk6IHN0cmluZykgPT4gSW5wdXQua2V5SnVzdFByZXNzZWQuc2V0KGtleSwgZmFsc2UpKTtcblx0XHRJbnB1dC5rZXlQcmVzc2VkLmZvckVhY2goKGtleTogc3RyaW5nKSA9PiBJbnB1dC5rZXlQcmVzc2VkLnNldChrZXksIGZhbHNlKSk7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCBhIGtleSB3YXMgbmV3bHkgcHJlc3NlZCBJbnB1dCBmcmFtZS5cblx0ICogSWYgdGhlIGtleSBpcyBzdGlsbCBwcmVzc2VkIGZyb20gbGFzdCBmcmFtZSBhbmQgd2Fzbid0IHJlLXByZXNzZWQsIElucHV0IHdpbGwgcmV0dXJuIGZhbHNlLlxuXHQgKiBAcGFyYW0ga2V5IFRoZSBrZXlcblx0ICogQHJldHVybnMgVHJ1ZSBpZiB0aGUga2V5IHdhcyBqdXN0IHByZXNzZWQsIGZhbHNlIG90aGVyd2lzZVxuXHQgKi9cblx0c3RhdGljIGlzS2V5SnVzdFByZXNzZWQoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcblx0XHRpZiAoSW5wdXQua2V5c0Rpc2FibGVkKSByZXR1cm4gZmFsc2U7XG5cblx0XHRpZiAoSW5wdXQua2V5SnVzdFByZXNzZWQuaGFzKGtleSkpIHtcblx0XHRcdHJldHVybiBJbnB1dC5rZXlKdXN0UHJlc3NlZC5nZXQoa2V5KVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgYW4gYXJyYXkgb2YgYWxsIG9mIHRoZSBrZXlzIHRoYXQgYXJlIG5ld2x5IHByZXNzZWQgSW5wdXQgZnJhbWUuXG5cdCAqIElmIGEga2V5IGlzIHN0aWxsIHByZXNzZWQgZnJvbSBsYXN0IGZyYW1lIGFuZCB3YXNuJ3QgcmUtcHJlc3NlZCwgaXQgd2lsbCBub3QgYmUgaW4gSW5wdXQgbGlzdC5cblx0ICogQHJldHVybnMgQW4gYXJyYXkgb2YgYWxsIG9mIHRoZSBuZXdseSBwcmVzc2VkIGtleXMuXG5cdCAqL1xuXHRzdGF0aWMgZ2V0S2V5c0p1c3RQcmVzc2VkKCk6IEFycmF5PHN0cmluZz4ge1xuXHRcdGlmIChJbnB1dC5rZXlzRGlzYWJsZWQpIHJldHVybiBbXTtcblxuXHRcdGxldCBrZXlzID0gQXJyYXk8c3RyaW5nPigpO1xuXHRcdElucHV0LmtleUp1c3RQcmVzc2VkLmZvckVhY2goa2V5ID0+IHtcblx0XHRcdGlmIChJbnB1dC5rZXlKdXN0UHJlc3NlZC5nZXQoa2V5KSkge1xuXHRcdFx0XHRrZXlzLnB1c2goa2V5KTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRyZXR1cm4ga2V5cztcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IGEga2V5IGlzIGJlaW5nIHByZXNzZWQuXG5cdCAqIEBwYXJhbSBrZXkgVGhlIGtleVxuXHQgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBrZXkgaXMgY3VycmVudGx5IHByZXNzZWQsIGZhbHNlIG90aGVyd2lzZVxuXHQgKi9cblx0c3RhdGljIGlzS2V5UHJlc3NlZChrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHRcdGlmIChJbnB1dC5rZXlzRGlzYWJsZWQpIHJldHVybiBmYWxzZTtcblxuXHRcdGlmIChJbnB1dC5rZXlQcmVzc2VkLmhhcyhrZXkpKSB7XG5cdFx0XHRyZXR1cm4gSW5wdXQua2V5UHJlc3NlZC5nZXQoa2V5KVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIENoYW5nZXMgdGhlIGJpbmRpbmcgb2YgYW4gaW5wdXQgbmFtZSB0byBrZXlzXG5cdCAqIEBwYXJhbSBpbnB1dE5hbWUgVGhlIG5hbWUgb2YgdGhlIGlucHV0XG5cdCAqIEBwYXJhbSBrZXlzIFRoZSBjb3JyZXNwb25kaW5nIGtleXNcblx0ICovXG5cdHN0YXRpYyBjaGFuZ2VLZXlCaW5kaW5nKGlucHV0TmFtZTogc3RyaW5nLCBrZXlzOiBBcnJheTxzdHJpbmc+KTogdm9pZCB7XG5cdFx0SW5wdXQua2V5TWFwLnNldChpbnB1dE5hbWUsIGtleXMpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENsZWFycyBhbGwga2V5IGJpbmRpbmdzXG5cdCAqL1xuXHRzdGF0aWMgY2xlYXJBbGxLZXlCaW5kaW5ncygpOiB2b2lkIHtcblx0XHRJbnB1dC5rZXlNYXAuY2xlYXIoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IGFuIGlucHV0IHdhcyBqdXN0IHByZXNzZWQgdGhpcyBmcmFtZVxuXHQgKiBAcGFyYW0gaW5wdXROYW1lIFRoZSBuYW1lIG9mIHRoZSBpbnB1dFxuXHQgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBpbnB1dCB3YXMganVzdCBwcmVzc2VkLCBmYWxzZSBvdGhlcndpc2Vcblx0ICovXG5cdHN0YXRpYyBpc0p1c3RQcmVzc2VkKGlucHV0TmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG5cdFx0aWYgKElucHV0LmtleXNEaXNhYmxlZCkgcmV0dXJuIGZhbHNlO1xuXG5cdFx0aWYgKElucHV0LmtleU1hcC5oYXMoaW5wdXROYW1lKSkge1xuXHRcdFx0Y29uc3Qga2V5cyA9IElucHV0LmtleU1hcC5nZXQoaW5wdXROYW1lKTtcblx0XHRcdGxldCBqdXN0UHJlc3NlZCA9IGZhbHNlO1xuXG5cdFx0XHRmb3IgKGxldCBrZXkgb2Yga2V5cykge1xuXHRcdFx0XHRqdXN0UHJlc3NlZCA9IGp1c3RQcmVzc2VkIHx8IElucHV0LmlzS2V5SnVzdFByZXNzZWQoa2V5KTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGp1c3RQcmVzc2VkO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgd2hldGhlciBvciBub3QgYW4gaW5wdXQgaXMgY3VycmVudGx5IHByZXNzZWRcblx0ICogQHBhcmFtIGlucHV0TmFtZSBUaGUgbmFtZSBvZiB0aGUgaW5wdXRcblx0ICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgaW5wdXQgaXMgcHJlc3NlZCwgZmFsc2Ugb3RoZXJ3aXNlXG5cdCAqL1xuXHRzdGF0aWMgaXNQcmVzc2VkKGlucHV0TmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG5cdFx0aWYgKElucHV0LmtleXNEaXNhYmxlZCkgcmV0dXJuIGZhbHNlO1xuXG5cdFx0aWYgKElucHV0LmtleU1hcC5oYXMoaW5wdXROYW1lKSkge1xuXHRcdFx0Y29uc3Qga2V5cyA9IElucHV0LmtleU1hcC5nZXQoaW5wdXROYW1lKTtcblx0XHRcdGxldCBwcmVzc2VkID0gZmFsc2U7XG5cblx0XHRcdGZvciAobGV0IGtleSBvZiBrZXlzKSB7XG5cdFx0XHRcdHByZXNzZWQgPSBwcmVzc2VkIHx8IElucHV0LmlzS2V5UHJlc3NlZChrZXkpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gcHJlc3NlZDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fVxuXHQvKipcblx0ICogXG5cdCAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIG1vdXNlIHdhcyBuZXdseSBwcmVzc2VkIElucHV0IGZyYW1lLlxuXHQgKiBAcGFyYW0gbW91c2VCdXR0b24gT3B0aW9uYWxseSBzcGVjaWZ5IHdoaWNoIG1vdXNlIGNsaWNrIHlvdSB3YW50IHRvIGtub3cgd2FzIHByZXNzZWQuIFxuXHQgKiAwIGZvciBsZWZ0IGNsaWNrLCAxIGZvciBtaWRkbGUgY2xpY2ssIDIgZm9yIHJpZ2h0IGNsaWNrLlxuXHQgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBtb3VzZSB3YXMganVzdCBwcmVzc2VkLCBmYWxzZSBvdGhlcndpc2Vcblx0ICovXG5cdHN0YXRpYyBpc01vdXNlSnVzdFByZXNzZWQobW91c2VCdXR0b24/OiBudW1iZXIpOiBib29sZWFuIHtcblx0XHRpZiAobW91c2VCdXR0b24gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0cmV0dXJuIElucHV0Lm1vdXNlSnVzdFByZXNzZWQgJiYgIUlucHV0Lm1vdXNlRGlzYWJsZWQgJiYgbW91c2VCdXR0b24gPT0gdGhpcy5tb3VzZUJ1dHRvblByZXNzZWQ7XG5cdFx0fVxuXHRcdHJldHVybiBJbnB1dC5tb3VzZUp1c3RQcmVzc2VkICYmICFJbnB1dC5tb3VzZURpc2FibGVkO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIG1vdXNlIGlzIGN1cnJlbnRseSBwcmVzc2VkXG5cdCAqIEBwYXJhbSBtb3VzZUJ1dHRvbiBPcHRpb25hbGx5IHNwZWNpZnkgd2hpY2ggbW91c2UgY2xpY2sgeW91IHdhbnQgdG8ga25vdyB3YXMgcHJlc3NlZC4gXG5cdCAqIDAgZm9yIGxlZnQgY2xpY2ssIDEgZm9yIG1pZGRsZSBjbGljaywgMiBmb3IgcmlnaHQgY2xpY2suXG5cdCAqIEByZXR1cm5zIFRydWUgaWYgdGhlIG1vdXNlIGlzIGN1cnJlbnRseSBwcmVzc2VkLCBmYWxzZSBvdGhlcndpc2Vcblx0ICovXG5cdHN0YXRpYyBpc01vdXNlUHJlc3NlZChtb3VzZUJ1dHRvbj86IG51bWJlcik6IGJvb2xlYW4ge1xuXHRcdGlmIChtb3VzZUJ1dHRvbiAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZXR1cm4gSW5wdXQubW91c2VQcmVzc2VkICYmICFJbnB1dC5tb3VzZURpc2FibGVkICYmIG1vdXNlQnV0dG9uID09IHRoaXMubW91c2VCdXR0b25QcmVzc2VkO1xuXHRcdH1cblx0XHRyZXR1cm4gSW5wdXQubW91c2VQcmVzc2VkICYmICFJbnB1dC5tb3VzZURpc2FibGVkO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgd2hldGhlciB0aGUgdXNlciBzY3JvbGxlZCBvciBub3Rcblx0ICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgdXNlciBqdXN0IHNjcm9sbGVkIElucHV0IGZyYW1lLCBmYWxzZSBvdGhlcndpc2Vcblx0ICovXG5cdHN0YXRpYyBkaWRKdXN0U2Nyb2xsKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBJbnB1dC5qdXN0U2Nyb2xsZWQgJiYgIUlucHV0Lm1vdXNlRGlzYWJsZWQ7XG5cdH1cblxuXHQvKipcblx0ICogR2V0cyB0aGUgZGlyZWN0aW9uIG9mIHRoZSBzY3JvbGxcblx0ICogQHJldHVybnMgLTEgaWYgdGhlIHVzZXIgc2Nyb2xsZWQgdXAsIDEgaWYgdGhleSBzY3JvbGxlZCBkb3duXG5cdCAqL1xuXHRzdGF0aWMgZ2V0U2Nyb2xsRGlyZWN0aW9uKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIElucHV0LnNjcm9sbERpcmVjdGlvbjtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBwb3NpdGlvbiBvZiB0aGUgcGxheWVyJ3MgbW91c2Vcblx0ICogQHJldHVybnMgVGhlIG1vdXNlIHBvc2l0aW9uIHN0b3JlZCBhcyBhIFZlYzJcblx0ICovXG5cdHN0YXRpYyBnZXRNb3VzZVBvc2l0aW9uKCk6IFZlYzIge1xuXHRcdHJldHVybiBJbnB1dC5tb3VzZVBvc2l0aW9uLnNjYWxlZCgxIC8gdGhpcy52aWV3cG9ydC5nZXRab29tTGV2ZWwoKSk7XG5cdH1cblxuXHQvKipcblx0ICogR2V0cyB0aGUgcG9zaXRpb24gb2YgdGhlIHBsYXllcidzIG1vdXNlIGluIHRoZSBnYW1lIHdvcmxkLFxuXHQgKiB0YWtpbmcgaW50byBjb25zaWRlcmF0aW9uIHRoZSBzY3JvbGxpbmcgb2YgdGhlIHZpZXdwb3J0XG5cdCAqIEByZXR1cm5zIFRoZSBtb3VzZSBwb3NpdGlvbiBzdG9yZWQgYXMgYSBWZWMyXG5cdCAqL1xuXHRzdGF0aWMgZ2V0R2xvYmFsTW91c2VQb3NpdGlvbigpOiBWZWMyIHtcblx0XHRyZXR1cm4gSW5wdXQubW91c2VQb3NpdGlvbi5jbG9uZSgpLnNjYWxlKDEgLyB0aGlzLnZpZXdwb3J0LmdldFpvb21MZXZlbCgpKS5hZGQoSW5wdXQudmlld3BvcnQuZ2V0T3JpZ2luKCkpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldHMgdGhlIHBvc2l0aW9uIG9mIHRoZSBsYXN0IG1vdXNlIHByZXNzXG5cdCAqIEByZXR1cm5zIFRoZSBtb3VzZSBwb3NpdGlvbiBzdG9yZWQgYXMgYSBWZWMyXG5cdCAqL1xuXHRzdGF0aWMgZ2V0TW91c2VQcmVzc1Bvc2l0aW9uKCk6IFZlYzIge1xuXHRcdHJldHVybiBJbnB1dC5nZXRNb3VzZVBvc2l0aW9uKCk7XG5cdH1cblxuXHQvKipcblx0ICogR2V0cyB0aGUgcG9zaXRpb24gb2YgdGhlIGxhc3QgbW91c2UgcHJlc3MgaW4gdGhlIGdhbWUgd29ybGQsXG5cdCAqIHRha2luZyBpbnRvIGNvbnNpZGVyYXRpb24gdGhlIHNjcm9sbGluZyBvZiB0aGUgdmlld3BvcnRcblx0ICogQHJldHVybnMgVGhlIG1vdXNlIHBvc2l0aW9uIHN0b3JlZCBhcyBhIFZlYzJcblx0ICovXG5cdHN0YXRpYyBnZXRHbG9iYWxNb3VzZVByZXNzUG9zaXRpb24oKTogVmVjMiB7XG5cdFx0cmV0dXJuIElucHV0Lm1vdXNlUHJlc3NQb3NpdGlvbi5jbG9uZSgpLmFkZChJbnB1dC52aWV3cG9ydC5nZXRPcmlnaW4oKSk7XG5cdH1cblxuXHQvKipcblx0ICogRGlzYWJsZXMgYWxsIGtleXByZXNzIGFuZCBtb3VzZSBjbGljayBpbnB1dHNcblx0ICovXG5cdHN0YXRpYyBkaXNhYmxlSW5wdXQoKTogdm9pZCB7XG5cdFx0SW5wdXQua2V5c0Rpc2FibGVkID0gdHJ1ZTtcblx0XHRJbnB1dC5tb3VzZURpc2FibGVkID0gdHJ1ZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBFbmFibGVzIGFsbCBrZXlwcmVzcyBhbmQgbW91c2UgY2xpY2sgaW5wdXRzXG5cdCAqL1xuXHRzdGF0aWMgZW5hYmxlSW5wdXQoKTogdm9pZCB7XG5cdFx0SW5wdXQua2V5c0Rpc2FibGVkID0gZmFsc2U7XG5cdFx0SW5wdXQubW91c2VEaXNhYmxlZCA9IGZhbHNlO1xuXHR9XG59IiwiaW1wb3J0IEV2ZW50UXVldWUgZnJvbSBcIi4uL0V2ZW50cy9FdmVudFF1ZXVlXCI7XG5pbXBvcnQgVmVjMiBmcm9tIFwiLi4vRGF0YVR5cGVzL1ZlYzJcIjtcbmltcG9ydCBHYW1lRXZlbnQgZnJvbSBcIi4uL0V2ZW50cy9HYW1lRXZlbnRcIjtcbmltcG9ydCB7IEdhbWVFdmVudFR5cGUgfSBmcm9tIFwiLi4vRXZlbnRzL0dhbWVFdmVudFR5cGVcIjtcbmltcG9ydCBVcGRhdGVhYmxlIGZyb20gXCIuLi9EYXRhVHlwZXMvSW50ZXJmYWNlcy9VcGRhdGVhYmxlXCI7XG5pbXBvcnQgUmVjZWl2ZXIgZnJvbSBcIi4uL0V2ZW50cy9SZWNlaXZlclwiO1xuXG5leHBvcnQgZW51bSBJbnB1dEhhbmRsZXJzIHtcbiAgICBNT1VTRV9ET1dOID0gMCxcbiAgICBNT1VTRV9VUCA9IDEsXG4gICAgQ09OVEVYVF9NRU5VID0gMixcbiAgICBNT1VTRV9NT1ZFID0gMyxcbiAgICBLRVlfRE9XTiA9IDQsXG4gICAgS0VZX1VQID0gNSwgXG4gICAgT05fQkxVUiA9IDYsXG4gICAgT05fV0hFRUwgPSA3XG59XG5cbi8qKlxuICogSGFuZGxlcyBjb21tdW5pY2F0aW9uIHdpdGggdGhlIHdlYiBicm93c2VyIHRvIHJlY2VpdmUgYXN5bmNocm9ub3VzIGV2ZW50cyBhbmQgc2VuZCB0aGVtIHRvIHRoZSBAcmVmZXJlbmNlW0V2ZW50UXVldWVdXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIElucHV0SGFuZGxlciBpbXBsZW1lbnRzIFVwZGF0ZWFibGUge1xuXHRwcml2YXRlIGV2ZW50UXVldWU6IEV2ZW50UXVldWU7XG4gICAgcHJpdmF0ZSBlbmFibGVkOiBib29sZWFuW107XG4gICAgcHJpdmF0ZSByZWNlaXZlcjogUmVjZWl2ZXI7XG4gICAgIFxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgSW5wdXRIYW5kbGVyXG4gICAgICogQHBhcmFtIGNhbnZhcyBUaGUgZ2FtZSBjYW52YXNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KXtcblx0XHR0aGlzLmV2ZW50UXVldWUgPSBFdmVudFF1ZXVlLmdldEluc3RhbmNlKCk7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IG5ldyBBcnJheTxib29sZWFuPiguLi5bdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZV0pO1xuXHRcdFxuICAgICAgICBjYW52YXMub25tb3VzZWRvd24gPSAoZXZlbnQpID0+IHRoaXMuaGFuZGxlTW91c2VEb3duKGV2ZW50LCBjYW52YXMpO1xuICAgICAgICBjYW52YXMub25tb3VzZXVwID0gKGV2ZW50KSA9PiB0aGlzLmhhbmRsZU1vdXNlVXAoZXZlbnQsIGNhbnZhcyk7XG4gICAgICAgIGNhbnZhcy5vbmNvbnRleHRtZW51ID0gdGhpcy5oYW5kbGVDb250ZXh0TWVudTtcbiAgICAgICAgY2FudmFzLm9ubW91c2Vtb3ZlID0gKGV2ZW50KSA9PiB0aGlzLmhhbmRsZU1vdXNlTW92ZShldmVudCwgY2FudmFzKTtcbiAgICAgICAgZG9jdW1lbnQub25rZXlkb3duID0gdGhpcy5oYW5kbGVLZXlEb3duO1xuICAgICAgICBkb2N1bWVudC5vbmtleXVwID0gdGhpcy5oYW5kbGVLZXlVcDtcbiAgICAgICAgZG9jdW1lbnQub25ibHVyID0gdGhpcy5oYW5kbGVCbHVyO1xuICAgICAgICBkb2N1bWVudC5vbmNvbnRleHRtZW51ID0gdGhpcy5oYW5kbGVCbHVyO1xuICAgICAgICBkb2N1bWVudC5vbndoZWVsID0gdGhpcy5oYW5kbGVXaGVlbDtcblxuICAgICAgICB0aGlzLnJlY2VpdmVyID0gbmV3IFJlY2VpdmVyKCk7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKEdhbWVFdmVudFR5cGUuRElTQUJMRV9VU0VSX0lOUFVUKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoR2FtZUV2ZW50VHlwZS5FTkFCTEVfVVNFUl9JTlBVVCk7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZShkZWx0YVQ6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB3aGlsZSh0aGlzLnJlY2VpdmVyLmhhc05leHRFdmVudCgpKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUV2ZW50KHRoaXMucmVjZWl2ZXIuZ2V0TmV4dEV2ZW50KCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByb3RlY3RlZCBoYW5kbGVFdmVudChldmVudDogR2FtZUV2ZW50KTogdm9pZCB7XG4gICAgICAgIHN3aXRjaChldmVudC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIEdhbWVFdmVudFR5cGUuRElTQUJMRV9VU0VSX0lOUFVUOiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlSGFuZGxlcnMoZXZlbnQuZGF0YS5nZXQoXCJpbnB1dHNcIikpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBHYW1lRXZlbnRUeXBlLkVOQUJMRV9VU0VSX0lOUFVUOiB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmFibGVIYW5kbGVycyhldmVudC5kYXRhLmdldChcImlucHV0c1wiKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmhhbmRsZWQgZXZlbnQgd2l0aCB0eXBlOiAke2V2ZW50LnR5cGV9IGNhdWdodCBpbiBJbnB1dEhhbmRsZXIudHNgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBlbmFibGVIYW5kbGVycyhoYW5kbGVyczogSW5wdXRIYW5kbGVyc1tdKTogdm9pZCB7XG4gICAgICAgIGhhbmRsZXJzLmZvckVhY2goaGFuZGxlciA9PiB0aGlzLmVuYWJsZWRbaGFuZGxlcl0gPSB0cnVlKTtcbiAgICB9XG4gICAgcHVibGljIGRpc2FibGVIYW5kbGVycyhoYW5kbGVyczogSW5wdXRIYW5kbGVyc1tdKTogdm9pZCB7XG4gICAgICAgIGhhbmRsZXJzLmZvckVhY2goaGFuZGxlciA9PiB0aGlzLmVuYWJsZWRbaGFuZGxlcl0gPSBmYWxzZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVNb3VzZURvd24gPSAoZXZlbnQ6IE1vdXNlRXZlbnQsIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpOiB2b2lkID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWRbSW5wdXRIYW5kbGVycy5NT1VTRV9ET1dOXSkgcmV0dXJuO1xuXHRcdGxldCBwb3MgPSB0aGlzLmdldE1vdXNlUG9zaXRpb24oZXZlbnQsIGNhbnZhcyk7XG4gICAgICAgIGxldCBidXR0b24gPSBldmVudC5idXR0b247XG4gICAgICAgIGxldCBnYW1lRXZlbnQgPSBuZXcgR2FtZUV2ZW50KEdhbWVFdmVudFR5cGUuTU9VU0VfRE9XTiwge3Bvc2l0aW9uOiBwb3MsIGJ1dHRvbjogYnV0dG9ufSk7XG4gICAgICAgIHRoaXMuZXZlbnRRdWV1ZS5hZGRFdmVudChnYW1lRXZlbnQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlTW91c2VVcCA9IChldmVudDogTW91c2VFdmVudCwgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCk6IHZvaWQgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZFtJbnB1dEhhbmRsZXJzLk1PVVNFX0RPV05dKSByZXR1cm47XG4gICAgICAgIGxldCBwb3MgPSB0aGlzLmdldE1vdXNlUG9zaXRpb24oZXZlbnQsIGNhbnZhcyk7XG4gICAgICAgIGxldCBnYW1lRXZlbnQgPSBuZXcgR2FtZUV2ZW50KEdhbWVFdmVudFR5cGUuTU9VU0VfVVAsIHtwb3NpdGlvbjogcG9zfSk7XG4gICAgICAgIHRoaXMuZXZlbnRRdWV1ZS5hZGRFdmVudChnYW1lRXZlbnQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlTW91c2VNb3ZlID0gKGV2ZW50OiBNb3VzZUV2ZW50LCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KTogdm9pZCA9PiB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkW0lucHV0SGFuZGxlcnMuTU9VU0VfTU9WRV0pIHJldHVybjtcbiAgICAgICAgbGV0IHBvcyA9IHRoaXMuZ2V0TW91c2VQb3NpdGlvbihldmVudCwgY2FudmFzKTtcbiAgICAgICAgbGV0IGdhbWVFdmVudCA9IG5ldyBHYW1lRXZlbnQoR2FtZUV2ZW50VHlwZS5NT1VTRV9NT1ZFLCB7cG9zaXRpb246IHBvc30pO1xuICAgICAgICB0aGlzLmV2ZW50UXVldWUuYWRkRXZlbnQoZ2FtZUV2ZW50KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUtleURvd24gPSAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWRbSW5wdXRIYW5kbGVycy5LRVlfRE9XTl0pIHJldHVybjtcbiAgICAgICAgbGV0IGtleSA9IHRoaXMuZ2V0S2V5KGV2ZW50KTtcbiAgICAgICAgbGV0IGdhbWVFdmVudCA9IG5ldyBHYW1lRXZlbnQoR2FtZUV2ZW50VHlwZS5LRVlfRE9XTiwge2tleToga2V5fSk7XG4gICAgICAgIHRoaXMuZXZlbnRRdWV1ZS5hZGRFdmVudChnYW1lRXZlbnQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlS2V5VXAgPSAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWRbSW5wdXRIYW5kbGVycy5LRVlfVVBdKSByZXR1cm47XG4gICAgICAgIGxldCBrZXkgPSB0aGlzLmdldEtleShldmVudCk7XG4gICAgICAgIGxldCBnYW1lRXZlbnQgPSBuZXcgR2FtZUV2ZW50KEdhbWVFdmVudFR5cGUuS0VZX1VQLCB7a2V5OiBrZXl9KTtcbiAgICAgICAgdGhpcy5ldmVudFF1ZXVlLmFkZEV2ZW50KGdhbWVFdmVudCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVCbHVyID0gKGV2ZW50OiBFdmVudCk6IHZvaWQgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZFtJbnB1dEhhbmRsZXJzLk9OX0JMVVJdKSByZXR1cm47XG4gICAgICAgIGxldCBnYW1lRXZlbnQgPSBuZXcgR2FtZUV2ZW50KEdhbWVFdmVudFR5cGUuQ0FOVkFTX0JMVVIsIHt9KTtcbiAgICAgICAgdGhpcy5ldmVudFF1ZXVlLmFkZEV2ZW50KGdhbWVFdmVudCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVDb250ZXh0TWVudSA9IChldmVudDogRXZlbnQpOiB2b2lkID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVXaGVlbCA9IChldmVudDogV2hlZWxFdmVudCk6IHZvaWQgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZFtJbnB1dEhhbmRsZXJzLk9OX1dIRUVMXSkgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgbGV0IGdhbWVFdmVudDogR2FtZUV2ZW50O1xuICAgICAgICBpZihldmVudC5kZWx0YVkgPCAwKXtcbiAgICAgICAgICAgIGdhbWVFdmVudCA9IG5ldyBHYW1lRXZlbnQoR2FtZUV2ZW50VHlwZS5XSEVFTF9VUCwge30pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2FtZUV2ZW50ID0gbmV3IEdhbWVFdmVudChHYW1lRXZlbnRUeXBlLldIRUVMX0RPV04sIHt9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZXZlbnRRdWV1ZS5hZGRFdmVudChnYW1lRXZlbnQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0S2V5KGtleUV2ZW50OiBLZXlib2FyZEV2ZW50KXtcbiAgICAgICAgcmV0dXJuIGtleUV2ZW50LmtleS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0TW91c2VQb3NpdGlvbihtb3VzZUV2ZW50OiBNb3VzZUV2ZW50LCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KTogVmVjMiB7XG4gICAgICAgIGxldCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBsZXQgeCA9IG1vdXNlRXZlbnQuY2xpZW50WCAtIHJlY3QubGVmdDtcbiAgICAgICAgbGV0IHkgPSBtb3VzZUV2ZW50LmNsaWVudFkgLSByZWN0LnRvcDtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMyKHgsIHkpO1xuICAgIH1cbn0iLCJpbXBvcnQge30gZnJvbSBcIi4uLy4uL2luZGV4XCI7ICAvLyBUaGlzIGltcG9ydCBhbGxvd3MgdXMgdG8gbW9kaWZ5IHRoZSBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgdG8gYWRkIGV4dHJhIGZ1bmN0aW9uYWxpdHlcbi8vIEBpZ25vcmVQYWdlXG5cbi8qKlxuICogU2V0cyB1cCB0aGUgZW52aXJvbm1lbnQgb2YgdGhlIGdhbWUgZW5naW5lXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVudmlyb25tZW50SW5pdGlhbGl6ZXIge1xuICAgIHN0YXRpYyBzZXR1cCgpe1xuICAgICAgICBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQucHJvdG90eXBlLnJvdW5kZWRSZWN0ID0gZnVuY3Rpb24oeDogbnVtYmVyLCB5OiBudW1iZXIsIHc6IG51bWJlciwgaDogbnVtYmVyLCByOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgICAgIC8vIENsYW1wIHRoZSByYWRpdXMgYmV0d2VlbiAwIGFuZCB0aGUgbWluIG9mIHRoZSB3aWR0aCBvciBoZWlnaHRcbiAgICAgICAgICAgIGlmKHIgPCAwKSByID0gMDtcbiAgICAgICAgICAgIGlmKHIgPiBNYXRoLm1pbih3LCBoKSkgciA9IE1hdGgubWluKHcsIGgpO1xuICAgICAgICBcbiAgICAgICAgICAgIC8vIERyYXcgdGhlIHJvdW5kZWQgcmVjdFxuICAgICAgICAgICAgdGhpcy5iZWdpblBhdGgoKTtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBUb3BcbiAgICAgICAgICAgIHRoaXMubW92ZVRvKHggKyByLCB5KTtcbiAgICAgICAgICAgIHRoaXMubGluZVRvKHggKyB3IC0gciwgeSk7XG4gICAgICAgICAgICB0aGlzLmFyY1RvKHggKyB3LCB5LCB4ICsgdywgeSArIHIsIHIpO1xuICAgICAgICBcbiAgICAgICAgICAgIC8vIFJpZ2h0XG4gICAgICAgICAgICB0aGlzLmxpbmVUbyh4ICsgdywgeSArIGggLSByKTtcbiAgICAgICAgICAgIHRoaXMuYXJjVG8oeCArIHcsIHkgKyBoLCB4ICsgdyAtIHIsIHkgKyBoLCByKTtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBCb3R0b21cbiAgICAgICAgICAgIHRoaXMubGluZVRvKHggKyByLCB5ICsgaCk7XG4gICAgICAgICAgICB0aGlzLmFyY1RvKHgsIHkgKyBoLCB4LCB5ICsgaCAtIHIsIHIpO1xuICAgICAgICBcbiAgICAgICAgICAgIC8vIExlZnRcbiAgICAgICAgICAgIHRoaXMubGluZVRvKHgsIHkgKyByKTtcbiAgICAgICAgICAgIHRoaXMuYXJjVG8oeCwgeSwgeCArIHIsIHksIHIpXG4gICAgICAgIFxuICAgICAgICAgICAgdGhpcy5jbG9zZVBhdGgoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELnByb3RvdHlwZS5zdHJva2VSb3VuZGVkUmVjdCA9IGZ1bmN0aW9uKHgsIHksIHcsIGgsIHIpe1xuICAgICAgICAgICAgdGhpcy5yb3VuZGVkUmVjdCh4LCB5LCB3LCBoLCByKTtcbiAgICAgICAgICAgIHRoaXMuc3Ryb2tlKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5wcm90b3R5cGUuZmlsbFJvdW5kZWRSZWN0ID0gZnVuY3Rpb24oeCwgeSwgdywgaCwgcil7XG4gICAgICAgICAgICB0aGlzLnJvdW5kZWRSZWN0KHgsIHksIHcsIGgsIHIpO1xuICAgICAgICAgICAgdGhpcy5maWxsKCk7XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IEdhbWVMb29wIGZyb20gXCIuL0dhbWVMb29wXCI7XG5pbXBvcnQgRGVidWcgZnJvbSBcIi4uL0RlYnVnL0RlYnVnXCI7XG5pbXBvcnQgU3RhdHMgZnJvbSBcIi4uL0RlYnVnL1N0YXRzXCI7XG5cbi8qKlxuICogQSBnYW1lIGxvb3Agd2l0aCBhIGZpeGVkIHVwZGF0ZSB0aW1lIGFuZCBhIHZhcmlhYmxlIHJlbmRlciB0aW1lLlxuICogRXZlcnkgZnJhbWUsIHRoZSBnYW1lIHVwZGF0ZXMgdW50aWwgYWxsIHRpbWUgc2luY2UgdGhlIGxhc3QgZnJhbWUgaGFzIGJlZW4gcHJvY2Vzc2VkLlxuICogSWYgdG9vIG11Y2ggdGltZSBoYXMgcGFzc2VkLCBzdWNoIGFzIGlmIHRoZSBsYXN0IHVwZGF0ZSB3YXMgdG9vIHNsb3csIFxuICogb3IgaWYgdGhlIGJyb3dzZXIgd2FzIHB1dCBpbnRvIHRoZSBiYWNrZ3JvdW5kLCB0aGUgbG9vcCB3aWxsIHBhbmljIGFuZCBkaXNjYXJkIHRpbWUuXG4gKiBBIHJlbmRlciBoYXBwZW5zIGF0IHRoZSBlbmQgb2YgZXZlcnkgZnJhbWUuIFRoaXMgaGFwcGVucyBhcyBmYXN0IGFzIHBvc3NpYmxlIHVubGVzcyBzcGVjaWZpZWQuXG4gKiBBIGxvb3Agb2YgdGhpcyB0eXBlIGFsbG93cyBmb3IgZGV0ZXJtaW5pc3RpYyBiZWhhdmlvciAtIE5vIG1hdHRlciB3aGF0IHRoZSBmcmFtZSByYXRlIGlzLCB0aGUgdXBkYXRlIHNob3VsZCBiZWhhdmUgdGhlIHNhbWUsIFxuICogYXMgaXQgaXMgb2NjdXJpbmcgaW4gYSBmaXhlZCBpbnRlcnZhbC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRml4ZWRVcGRhdGVHYW1lTG9vcCBleHRlbmRzIEdhbWVMb29wIHtcblxuXHQvKiogVGhlIG1heCBhbGxvd2VkIHVwZGF0ZSBmcHMuKi9cbiAgICBwcml2YXRlIG1heFVwZGF0ZUZQUzogbnVtYmVyO1xuICAgIFxuICAgIC8qKiBUaGUgdGltZXN0ZXAgZm9yIGVhY2ggdXBkYXRlLiBUaGlzIGlzIHRoZSBkZWx0YVQgcGFzc2VkIHRvIHVwZGF0ZSBjYWxscy4gKi9cblx0cHJpdmF0ZSB1cGRhdGVUaW1lc3RlcDogbnVtYmVyO1xuXG4gICAgLyoqIFRoZSBhbW91bnQgb2YgdGltZSB3ZSBhcmUgeWV0IHRvIHNpbXVsYXRlLiAqL1xuICAgIHByaXZhdGUgZnJhbWVEZWx0YTogbnVtYmVyO1xuXG4gICAgLyoqIFRoZSB0aW1lIHdoZW4gdGhlIGxhc3QgZnJhbWUgd2FzIGRyYXduLiAqL1xuICAgIHByaXZhdGUgbGFzdEZyYW1lVGltZTogbnVtYmVyO1xuICAgIFxuICAgIC8qKiBUaGUgbWluaW11bSB0aW1lIHdlIHdhbnQgdG8gd2FpdCBiZXR3ZWVuIGdhbWUgZnJhbWVzLiAqL1xuICAgIHByaXZhdGUgbWluRnJhbWVEZWxheTogbnVtYmVyO1xuXG5cdC8qKiBUaGUgY3VycmVudCBmcmFtZSBvZiB0aGUgZ2FtZS4gKi9cblx0cHJpdmF0ZSBmcmFtZTogbnVtYmVyO1xuXG5cdC8qKiBUaGUgYWN0dWFsIGZwcyBvZiB0aGUgZ2FtZS4gKi9cbiAgICBwcml2YXRlIGZwczogbnVtYmVyO1xuICAgIFxuICAgIC8qKiBUaGUgdGltZSBiZXR3ZWVuIGZwcyBtZWFzdXJlbWVudCB1cGRhdGVzLiAqL1xuICAgIHByaXZhdGUgZnBzVXBkYXRlSW50ZXJ2YWw6IG51bWJlcjtcblxuICAgIC8qKiBUaGUgdGltZSBvZiB0aGUgbGFzdCBmcHMgdXBkYXRlLiAqL1xuICAgIHByaXZhdGUgbGFzdEZwc1VwZGF0ZTogbnVtYmVyO1xuXG4gICAgLyoqIFRoZSBudW1iZXIgb2YgZnJhbWVzIHNpbmNlIHRoZSBsYXN0IGZwcyB1cGRhdGUgd2FzIGRvbmUuICovXG4gICAgcHJpdmF0ZSBmcmFtZXNTaW5jZUxhc3RGcHNVcGRhdGU6IG51bWJlcjtcblxuICAgIC8qKiBUaGUgc3RhdHVzIG9mIHdoZXRoZXIgb3Igbm90IHRoZSBnYW1lIGxvb3AgaGFzIHN0YXJ0ZWQuICovXG4gICAgcHJpdmF0ZSBzdGFydGVkOiBib29sZWFuO1xuXG4gICAgLyoqIFRoZSBzdGF0dXMgb2Ygd2hldGhlciBvciBub3QgdGhlIGdhbWUgbG9vcCBpcyBwYXVzZWQgKi9cbiAgICBwcml2YXRlIHBhdXNlZDogYm9vbGVhbjtcbiAgICBcbiAgICAvKiogVGhlIHN0YXR1cyBvZiB3aGV0aGVyIG9yIG5vdCB0aGUgZ2FtZSBsb29wIGlzIGN1cnJlbnRseSBydW5uaW5nLiAqL1xuICAgIHByaXZhdGUgcnVubmluZzogYm9vbGVhbjtcblxuICAgIC8qKiBUaGUgbnVtYmVyIG9mIHVwZGF0ZSBzdGVwcyB0aGlzIGl0ZXJhdGlvbiBvZiB0aGUgZ2FtZSBsb29wLiAqL1xuICAgIHByaXZhdGUgbnVtVXBkYXRlU3RlcHM6IG51bWJlcjtcblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHRzdXBlcigpO1xuICAgICAgICB0aGlzLm1heFVwZGF0ZUZQUyA9IDYwO1xuICAgICAgICB0aGlzLnVwZGF0ZVRpbWVzdGVwID0gTWF0aC5mbG9vcigxMDAwL3RoaXMubWF4VXBkYXRlRlBTKTtcbiAgICAgICAgdGhpcy5mcmFtZURlbHRhID0gMDtcbiAgICAgICAgdGhpcy5sYXN0RnJhbWVUaW1lID0gMDtcbiAgICAgICAgdGhpcy5taW5GcmFtZURlbGF5ID0gMDtcbiAgICAgICAgdGhpcy5mcmFtZSA9IDA7XG4gICAgICAgIHRoaXMuZnBzID0gdGhpcy5tYXhVcGRhdGVGUFM7ICAgLy8gSW5pdGlhbGl6ZSB0aGUgZnBzIHRvIHRoZSBtYXggYWxsb3dlZCBmcHNcbiAgICAgICAgdGhpcy5mcHNVcGRhdGVJbnRlcnZhbCA9IDEwMDA7XG4gICAgICAgIHRoaXMubGFzdEZwc1VwZGF0ZSA9IDA7XG4gICAgICAgIHRoaXMuZnJhbWVzU2luY2VMYXN0RnBzVXBkYXRlID0gMDtcbiAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGF1c2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLm51bVVwZGF0ZVN0ZXBzID0gMDtcblx0fVxuXG5cdGdldEZQUygpOiBudW1iZXIge1xuXHRcdHJldHVybiAwO1xuXHR9XG5cblx0LyoqXG4gICAgICogVXBkYXRlcyB0aGUgZnJhbWUgY291bnQgYW5kIHN1bSBvZiB0aW1lIGZvciB0aGUgZnJhbWVyYXRlIG9mIHRoZSBnYW1lXG4gICAgICogQHBhcmFtIHRpbWVzdGVwIFRoZSBjdXJyZW50IHRpbWUgaW4gbXNcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgdXBkYXRlRlBTKHRpbWVzdGFtcDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZnBzID0gMC45ICogdGhpcy5mcmFtZXNTaW5jZUxhc3RGcHNVcGRhdGUgKiAxMDAwIC8gKHRpbWVzdGFtcCAtIHRoaXMubGFzdEZwc1VwZGF0ZSkgKygxIC0gMC45KSAqIHRoaXMuZnBzO1xuICAgICAgICB0aGlzLmxhc3RGcHNVcGRhdGUgPSB0aW1lc3RhbXA7XG4gICAgICAgIHRoaXMuZnJhbWVzU2luY2VMYXN0RnBzVXBkYXRlID0gMDtcblxuICAgICAgICBEZWJ1Zy5sb2coXCJmcHNcIiwgXCJGUFM6IFwiICsgdGhpcy5mcHMudG9GaXhlZCgxKSk7XG4gICAgICAgIFN0YXRzLnVwZGF0ZUZQUyh0aGlzLmZwcyk7XG4gICAgfVxuXG5cdCAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBtYXhpbXVtIGFsbG93ZWQgcGh5c2ljcyBmcmFtZXJhdGUgb2YgdGhlIGdhbWVcbiAgICAgKiBAcGFyYW0gaW5pdE1heCBUaGUgbWF4IGZyYW1lcmF0ZVxuICAgICAqL1xuICAgIHNldE1heFVwZGF0ZUZQUyhpbml0TWF4OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5tYXhVcGRhdGVGUFMgPSBpbml0TWF4O1xuICAgICAgICB0aGlzLnVwZGF0ZVRpbWVzdGVwID0gTWF0aC5mbG9vcigxMDAwL3RoaXMubWF4VXBkYXRlRlBTKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBtYXhpbXVtIHJlbmRlcmluZyBmcmFtZXJhdGVcbiAgICAgKiBAcGFyYW0gbWF4RlBTIFRoZSBtYXggZnJhbWVyYXRlXG4gICAgICovXG4gICAgc2V0TWF4RlBTKG1heEZQUzogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMubWluRnJhbWVEZWxheSA9IDEwMDAvbWF4RlBTO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2hlbiB0aGUgZ2FtZSBsb29wIHBhbmljcywgaS5lLiBpdCB0cmllcyB0byBwcm9jZXNzIHRvbyBtdWNoIHRpbWUgaW4gYW4gZW50aXJlIGZyYW1lLlxuXHQgKiBUaGlzIHdpbGwgcmVzZXQgdGhlIGFtb3VudCBvZiB0aW1lIGJhY2sgdG8gemVyby5cblx0ICogQHJldHVybnMgVGhlIGFtb3VudCBvZiB0aW1lIHdlIGFyZSBkaXNjYXJkaW5nIGZyb20gcHJvY2Vzc2luZy5cblx0ICovXG5cdHJlc2V0RnJhbWVEZWx0YSgpIDogbnVtYmVyIHtcbiAgICAgICAgbGV0IG9sZEZyYW1lRGVsdGEgPSB0aGlzLmZyYW1lRGVsdGE7XG4gICAgICAgIHRoaXMuZnJhbWVEZWx0YSA9IDA7XG4gICAgICAgIHJldHVybiBvbGRGcmFtZURlbHRhO1xuICAgIH1cblxuXHQvKipcbiAgICAgKiBTdGFydHMgdXAgdGhlIGdhbWUgbG9vcCBhbmQgY2FsbHMgdGhlIGZpcnN0IHJlcXVlc3RBbmltYXRpb25GcmFtZVxuICAgICAqL1xuXHRzdGFydCgpOiB2b2lkIHtcbiAgICAgICAgaWYoIXRoaXMuc3RhcnRlZCl7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCh0aW1lc3RhbXApID0+IHRoaXMuZG9GaXJzdEZyYW1lKHRpbWVzdGFtcCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcGF1c2UoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucGF1c2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXN1bWUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucGF1c2VkID0gZmFsc2U7XG4gICAgfVxuXG5cdC8qKlxuICAgICAqIFRoZSBmaXJzdCBnYW1lIGZyYW1lIC0gaW5pdGlhbGl6ZXMgdGhlIGZpcnN0IGZyYW1lIHRpbWUgYW5kIGJlZ2lucyB0aGUgcmVuZGVyXG4gICAgICogQHBhcmFtIHRpbWVzdGFtcCBUaGUgY3VycmVudCB0aW1lIGluIG1zXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGRvRmlyc3RGcmFtZSh0aW1lc3RhbXA6IG51bWJlcik6IHZvaWQgIHtcbiAgICAgICAgdGhpcy5ydW5uaW5nID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLl9kb1JlbmRlcigpO1xuXG4gICAgICAgIHRoaXMubGFzdEZyYW1lVGltZSA9IHRpbWVzdGFtcDtcbiAgICAgICAgdGhpcy5sYXN0RnBzVXBkYXRlID0gdGltZXN0YW1wO1xuICAgICAgICB0aGlzLmZyYW1lc1NpbmNlTGFzdEZwc1VwZGF0ZSA9IDA7XG5cbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgodCkgPT4gdGhpcy5kb0ZyYW1lKHQpKTtcbiAgICB9XG5cblx0LyoqXG5cdCAqIEhhbmRsZXMgYW55IHByb2Nlc3NpbmcgdGhhdCBuZWVkcyB0byBiZSBkb25lIGF0IHRoZSBzdGFydCBvZiB0aGUgZnJhbWVcblx0ICogQHBhcmFtIHRpbWVzdGFtcCBUaGUgdGltZSBvZiB0aGUgZnJhbWUgaW4gbXNcblx0ICovXG5cdHByb3RlY3RlZCBzdGFydEZyYW1lKHRpbWVzdGFtcDogbnVtYmVyKTogdm9pZCB7XG5cdFx0Ly8gVXBkYXRlIHRoZSBhbW91bnQgb2YgdGltZSB3ZSBuZWVkIG91ciB1cGRhdGUgdG8gcHJvY2Vzc1xuXHRcdHRoaXMuZnJhbWVEZWx0YSArPSB0aW1lc3RhbXAgLSB0aGlzLmxhc3RGcmFtZVRpbWU7XG5cblx0XHQvLyBTZXQgdGhlIG5ldyB0aW1lIG9mIHRoZSBsYXN0IGZyYW1lXG4gICAgICAgIHRoaXMubGFzdEZyYW1lVGltZSA9IHRpbWVzdGFtcDtcblxuICAgICAgICAvLyBVcGRhdGUgdGhlIGVzdGltYXRlIG9mIHRoZSBmcmFtZXJhdGVcbiAgICAgICAgaWYodGltZXN0YW1wID4gdGhpcy5sYXN0RnBzVXBkYXRlICsgdGhpcy5mcHNVcGRhdGVJbnRlcnZhbCl7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZQUyh0aW1lc3RhbXApO1xuICAgICAgICB9XG5cblx0XHQvLyBJbmNyZW1lbnQgdGhlIG51bWJlciBvZiBmcmFtZXNcbiAgICAgICAgdGhpcy5mcmFtZSsrO1xuICAgICAgICB0aGlzLmZyYW1lc1NpbmNlTGFzdEZwc1VwZGF0ZSsrO1xuXHR9XG5cblx0LyoqXG4gICAgICogVGhlIG1haW4gbG9vcCBvZiB0aGUgZ2FtZS4gVXBkYXRlcyB1bnRpbCB0aGUgY3VycmVudCB0aW1lIGlzIHJlYWNoZWQuIFJlbmRlcnMgb25jZVxuICAgICAqIEBwYXJhbSB0aW1lc3RhbXAgVGhlIGN1cnJlbnQgdGltZSBpbiBtc1xuICAgICAqL1xuICAgIHByb3RlY3RlZCBkb0ZyYW1lID0gKHRpbWVzdGFtcDogbnVtYmVyKTogdm9pZCA9PiB7XG4gICAgICAgIC8vIElmIGEgcGF1c2Ugd2FzIGV4ZWN1dGVkLCBzdG9wIGRvaW5nIHRoZSBsb29wLlxuICAgICAgICBpZih0aGlzLnBhdXNlZCl7IFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVxdWVzdCBhbmltYXRpb24gZnJhbWUgdG8gcHJlcGFyZSBmb3IgYW5vdGhlciB1cGRhdGUgb3IgcmVuZGVyXG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKHQpID0+IHRoaXMuZG9GcmFtZSh0KSk7XG5cbiAgICAgICAgLy8gSWYgd2UgYXJlIHRyeWluZyB0byByZW5kZXIgdG9vIHNvb24sIGRvIG5vdGhpbmcuXG4gICAgICAgIGlmKHRpbWVzdGFtcCA8IHRoaXMubGFzdEZyYW1lVGltZSArIHRoaXMubWluRnJhbWVEZWxheSl7XG4gICAgICAgICAgICByZXR1cm47XG5cdFx0fVxuXHRcdFxuXHRcdC8vIEEgZnJhbWUgaXMgYWN0dWFsbHkgaGFwcGVuaW5nXG5cdFx0dGhpcy5zdGFydEZyYW1lKHRpbWVzdGFtcCk7XG5cblx0XHQvLyBVcGRhdGUgd2hpbGUgdGhlcmUgaXMgc3RpbGwgdGltZSB0byBtYWtlIHVwLiBJZiB3ZSBkbyB0b28gbWFueSB1cGRhdGUgc3RlcHMsIHBhbmljIGFuZCBleGl0IHRoZSBsb29wLlxuXHRcdHRoaXMubnVtVXBkYXRlU3RlcHMgPSAwO1xuXHRcdGxldCBwYW5pYyA9IGZhbHNlO1xuXG4gICAgICAgIHdoaWxlKHRoaXMuZnJhbWVEZWx0YSA+PSB0aGlzLnVwZGF0ZVRpbWVzdGVwKXtcblx0XHRcdC8vIERvIGFuIHVwZGF0ZVxuXHRcdFx0dGhpcy5fZG9VcGRhdGUodGhpcy51cGRhdGVUaW1lc3RlcC8xMDAwKTtcblx0XHRcdFxuXHRcdFx0Ly8gUmVtb3ZlIHRoZSB1cGRhdGUgc3RlcCB0aW1lIGZyb20gdGhlIHRpbWUgd2UgaGF2ZSB0byBwcm9jZXNzXG4gICAgICAgICAgICB0aGlzLmZyYW1lRGVsdGEgLT0gdGhpcy51cGRhdGVUaW1lc3RlcDtcblxuXHRcdFx0Ly8gSW5jcmVtZW50IHN0ZXBzIGFuZCBjaGVjayBpZiB3ZSd2ZSBkb25lIHRvbyBtYW55XG4gICAgICAgICAgICB0aGlzLm51bVVwZGF0ZVN0ZXBzKys7XG4gICAgICAgICAgICBpZih0aGlzLm51bVVwZGF0ZVN0ZXBzID4gMTAwKXtcbiAgICAgICAgICAgICAgICBwYW5pYyA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGVzIGFyZSBkb25lLCByZW5kZXJcbiAgICAgICAgdGhpcy5fZG9SZW5kZXIoKTtcblxuICAgICAgICAvLyBXcmFwIHVwIHRoZSBmcmFtZVxuICAgICAgICB0aGlzLmZpbmlzaEZyYW1lKHBhbmljKTtcbiAgICB9XG5cblx0LyoqXG5cdCAqIFdyYXBzIHVwIHRoZSBmcmFtZSBhbmQgaGFuZGxlcyB0aGUgcGFuaWMgc3RhdGUgaWYgdGhlcmUgaXMgb25lXG5cdCAqIEBwYXJhbSBwYW5pYyBXaGV0aGVyIG9yIG5vdCB0aGUgbG9vcCBwYW5pY2tlZFxuXHQgKi9cblx0cHJvdGVjdGVkIGZpbmlzaEZyYW1lKHBhbmljOiBib29sZWFuKTogdm9pZCB7XG5cdFx0aWYocGFuaWMpIHtcbiAgICAgICAgICAgIHZhciBkaXNjYXJkZWRUaW1lID0gTWF0aC5yb3VuZCh0aGlzLnJlc2V0RnJhbWVEZWx0YSgpKTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignTWFpbiBsb29wIHBhbmlja2VkLCBwcm9iYWJseSBiZWNhdXNlIHRoZSBicm93c2VyIHRhYiB3YXMgcHV0IGluIHRoZSBiYWNrZ3JvdW5kLiBEaXNjYXJkaW5nICcgKyBkaXNjYXJkZWRUaW1lICsgJ21zJyk7XG4gICAgICAgIH1cblx0fVxuXG59IiwiaW1wb3J0IEV2ZW50UXVldWUgZnJvbSBcIi4uL0V2ZW50cy9FdmVudFF1ZXVlXCI7XG5pbXBvcnQgSW5wdXQgZnJvbSBcIi4uL0lucHV0L0lucHV0XCI7XG5pbXBvcnQgSW5wdXRIYW5kbGVyIGZyb20gXCIuLi9JbnB1dC9JbnB1dEhhbmRsZXJcIjtcbmltcG9ydCBSZWNvcmRlciBmcm9tIFwiLi4vUGxheWJhY2svRXZlbnRSZWNvcmRlclwiO1xuaW1wb3J0IERlYnVnIGZyb20gXCIuLi9EZWJ1Zy9EZWJ1Z1wiO1xuaW1wb3J0IFJlc291cmNlTWFuYWdlciBmcm9tIFwiLi4vUmVzb3VyY2VNYW5hZ2VyL1Jlc291cmNlTWFuYWdlclwiO1xuaW1wb3J0IFZpZXdwb3J0IGZyb20gXCIuLi9TY2VuZUdyYXBoL1ZpZXdwb3J0XCI7XG5pbXBvcnQgU2NlbmVNYW5hZ2VyIGZyb20gXCIuLi9TY2VuZS9TY2VuZU1hbmFnZXJcIjtcbmltcG9ydCBBdWRpb01hbmFnZXIgZnJvbSBcIi4uL1NvdW5kL0F1ZGlvTWFuYWdlclwiO1xuaW1wb3J0IFN0YXRzIGZyb20gXCIuLi9EZWJ1Zy9TdGF0c1wiO1xuaW1wb3J0IFJlbmRlcmluZ01hbmFnZXIgZnJvbSBcIi4uL1JlbmRlcmluZy9SZW5kZXJpbmdNYW5hZ2VyXCI7XG5pbXBvcnQgQ2FudmFzUmVuZGVyZXIgZnJvbSBcIi4uL1JlbmRlcmluZy9DYW52YXNSZW5kZXJlclwiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi9VdGlscy9Db2xvclwiO1xuaW1wb3J0IEdhbWVPcHRpb25zIGZyb20gXCIuL0dhbWVPcHRpb25zXCI7XG5pbXBvcnQgR2FtZUxvb3AgZnJvbSBcIi4vR2FtZUxvb3BcIjtcbmltcG9ydCBGaXhlZFVwZGF0ZUdhbWVMb29wIGZyb20gXCIuL0ZpeGVkVXBkYXRlR2FtZUxvb3BcIjtcbmltcG9ydCBFbnZpcm9ubWVudEluaXRpYWxpemVyIGZyb20gXCIuL0Vudmlyb25tZW50SW5pdGlhbGl6ZXJcIjtcbmltcG9ydCBWZWMyIGZyb20gXCIuLi9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IFJlZ2lzdHJ5TWFuYWdlciBmcm9tIFwiLi4vUmVnaXN0cnkvUmVnaXN0cnlNYW5hZ2VyXCI7XG5pbXBvcnQgV2ViR0xSZW5kZXJlciBmcm9tIFwiLi4vUmVuZGVyaW5nL1dlYkdMUmVuZGVyZXJcIjtcbmltcG9ydCBTY2VuZSBmcm9tIFwiLi4vU2NlbmUvU2NlbmVcIjtcbmltcG9ydCBSZWNvcmRpbmdNYW5hZ2VyIGZyb20gXCIuLi9QbGF5YmFjay9QbGF5YmFja01hbmFnZXJcIjtcbmltcG9ydCBJbnB1dFJlcGxheWVyIGZyb20gXCIuLi9QbGF5YmFjay9FdmVudFJlcGxheWVyXCI7XG5pbXBvcnQgeyBUaW1lclN0YXRlIH0gZnJvbSBcIi4uL1RpbWluZy9UaW1lclwiO1xuaW1wb3J0IFBsYXliYWNrTWFuYWdlciBmcm9tIFwiLi4vUGxheWJhY2svUGxheWJhY2tNYW5hZ2VyXCI7XG5cbi8qKlxuICogVGhlIG1haW4gbG9vcCBvZiB0aGUgZ2FtZSBlbmdpbmUuXG4gKiBIYW5kbGVzIHRoZSB1cGRhdGUgb3JkZXIsIGFuZCBpbml0aWFsaXplcyBhbGwgc3Vic3lzdGVtcy5cbiAqIFRoZSBHYW1lIG1hbmFnZXMgdGhlIHVwZGF0ZSBjeWNsZSwgYW5kIHJlcXVlc3RzIGFuaW1hdGlvbiBmcmFtZXMgdG8gcmVuZGVyIHRvIHRoZSBicm93c2VyLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lIHtcbiAgICBnYW1lT3B0aW9uczogR2FtZU9wdGlvbnM7XG4gICAgcHJpdmF0ZSBzaG93RGVidWc6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBzaG93U3RhdHM6IGJvb2xlYW47XG5cbiAgICAvLyBUaGUgZ2FtZSBsb29wXG4gICAgcHJpdmF0ZSBsb29wOiBHYW1lTG9vcDtcblxuICAgIC8vIEdhbWUgY2FudmFzIGFuZCBpdHMgd2lkdGggYW5kIGhlaWdodFxuICAgIHJlYWRvbmx5IEdBTUVfQ0FOVkFTOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICByZWFkb25seSBERUJVR19DQU5WQVM6IEhUTUxDYW52YXNFbGVtZW50O1xuXHRyZWFkb25seSBXSURUSDogbnVtYmVyO1xuICAgIHJlYWRvbmx5IEhFSUdIVDogbnVtYmVyO1xuICAgIHByaXZhdGUgdmlld3BvcnQ6IFZpZXdwb3J0O1xuICAgIHByaXZhdGUgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgfCBXZWJHTFJlbmRlcmluZ0NvbnRleHQ7XG4gICAgcHJpdmF0ZSBjbGVhckNvbG9yOiBDb2xvcjtcbiAgICBcbiAgICAvLyBBbGwgb2YgdGhlIG5lY2Vzc2FyeSBzdWJzeXN0ZW1zIHRoYXQgbmVlZCB0byBydW4gaGVyZVxuXHRwcml2YXRlIGV2ZW50UXVldWU6IEV2ZW50UXVldWU7XG5cdHByaXZhdGUgaW5wdXRIYW5kbGVyOiBJbnB1dEhhbmRsZXI7XG5cdHByaXZhdGUgcGxheWJhY2tNYW5hZ2VyOiBQbGF5YmFja01hbmFnZXI7XG4gICAgcHJpdmF0ZSByZXNvdXJjZU1hbmFnZXI6IFJlc291cmNlTWFuYWdlcjtcbiAgICBwcml2YXRlIHNjZW5lTWFuYWdlcjogU2NlbmVNYW5hZ2VyO1xuICAgIHByaXZhdGUgYXVkaW9NYW5hZ2VyOiBBdWRpb01hbmFnZXI7XG4gICAgcHJpdmF0ZSByZW5kZXJpbmdNYW5hZ2VyOiBSZW5kZXJpbmdNYW5hZ2VyO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBHYW1lXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIG9wdGlvbnMgZm9yIEdhbWUgaW5pdGlhbGl6YXRpb25cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zPzogUmVjb3JkPHN0cmluZywgYW55Pil7XG4gICAgICAgIC8vIEJlZm9yZSBhbnl0aGluZyBlbHNlLCBidWlsZCB0aGUgZW52aXJvbm1lbnRcbiAgICAgICAgRW52aXJvbm1lbnRJbml0aWFsaXplci5zZXR1cCgpO1xuXG4gICAgICAgIC8vIFR5cGVjYXN0IHRoZSBjb25maWcgb2JqZWN0IHRvIGEgR2FtZUNvbmZpZyBvYmplY3RcbiAgICAgICAgdGhpcy5nYW1lT3B0aW9ucyA9IEdhbWVPcHRpb25zLnBhcnNlKG9wdGlvbnMpO1xuXG4gICAgICAgIHRoaXMuc2hvd0RlYnVnID0gdGhpcy5nYW1lT3B0aW9ucy5zaG93RGVidWc7XG4gICAgICAgIHRoaXMuc2hvd1N0YXRzID0gdGhpcy5nYW1lT3B0aW9ucy5zaG93U3RhdHM7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGFuIGluc3RhbmNlIG9mIGEgZ2FtZSBsb29wXG4gICAgICAgIHRoaXMubG9vcCA9IG5ldyBGaXhlZFVwZGF0ZUdhbWVMb29wKCk7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBnYW1lIGNhbnZhcyBhbmQgZ2l2ZSBpdCBhIGJhY2tncm91bmQgY29sb3JcbiAgICAgICAgdGhpcy5HQU1FX0NBTlZBUyA9IDxIVE1MQ2FudmFzRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbWUtY2FudmFzXCIpO1xuICAgICAgICB0aGlzLkRFQlVHX0NBTlZBUyA9IDxIVE1MQ2FudmFzRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlYnVnLWNhbnZhc1wiKTtcbiAgICBcbiAgICAgICAgLy8gR2l2ZSB0aGUgY2FudmFzIGEgc2l6ZSBhbmQgZ2V0IHRoZSByZW5kZXJpbmcgY29udGV4dFxuICAgICAgICB0aGlzLldJRFRIID0gdGhpcy5nYW1lT3B0aW9ucy5jYW52YXNTaXplLng7XG4gICAgICAgIHRoaXMuSEVJR0hUID0gdGhpcy5nYW1lT3B0aW9ucy5jYW52YXNTaXplLnk7XG5cbiAgICAgICAgLy8gVGhpcyBzdGVwIE1VU1QgaGFwcGVuIGJlZm9yZSB0aGUgcmVzb3VyY2UgbWFuYWdlciBkb2VzIGFueXRoaW5nXG4gICAgICAgIGlmKHRoaXMuZ2FtZU9wdGlvbnMudXNlV2ViR0wpe1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJpbmdNYW5hZ2VyID0gbmV3IFdlYkdMUmVuZGVyZXIoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyaW5nTWFuYWdlciA9IG5ldyBDYW52YXNSZW5kZXJlcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZUdhbWVXaW5kb3coKTtcbiAgICAgICAgdGhpcy5jdHggPSB0aGlzLnJlbmRlcmluZ01hbmFnZXIuaW5pdGlhbGl6ZUNhbnZhcyh0aGlzLkdBTUVfQ0FOVkFTLCB0aGlzLldJRFRILCB0aGlzLkhFSUdIVCk7XG4gICAgICAgIHRoaXMuY2xlYXJDb2xvciA9IG5ldyBDb2xvcih0aGlzLmdhbWVPcHRpb25zLmNsZWFyQ29sb3IuciwgdGhpcy5nYW1lT3B0aW9ucy5jbGVhckNvbG9yLmcsIHRoaXMuZ2FtZU9wdGlvbnMuY2xlYXJDb2xvci5iKTtcblxuICAgICAgICAvLyBJbml0aWFsaXplIGRlYnVnZ2luZyBhbmQgc3RhdHNcbiAgICAgICAgRGVidWcuaW5pdGlhbGl6ZURlYnVnQ2FudmFzKHRoaXMuREVCVUdfQ0FOVkFTLCB0aGlzLldJRFRILCB0aGlzLkhFSUdIVCk7XG4gICAgICAgIFN0YXRzLmluaXRTdGF0cygpO1xuXG4gICAgICAgIGlmKHRoaXMuZ2FtZU9wdGlvbnMuc2hvd1N0YXRzKSB7XG4gICAgICAgICAgICAvLyBGaW5kIHRoZSBzdGF0cyBvdXRwdXQgYW5kIG1ha2UgaXQgbm8gbG9uZ2VyIGhpZGRlblxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdGF0c1wiKS5oaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNpemUgdGhlIHZpZXdwb3J0IHRvIHRoZSBnYW1lIGNhbnZhc1xuICAgICAgICBjb25zdCBjYW52YXNTaXplID0gbmV3IFZlYzIodGhpcy5XSURUSCwgdGhpcy5IRUlHSFQpO1xuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gbmV3IFZpZXdwb3J0KGNhbnZhc1NpemUsIHRoaXMuZ2FtZU9wdGlvbnMuem9vbUxldmVsKTtcblxuICAgICAgICAvLyBJbml0aWFsaXplIGFsbCBuZWNlc3NhcnkgZ2FtZSBzdWJzeXN0ZW1zXG4gICAgICAgIHRoaXMuZXZlbnRRdWV1ZSA9IEV2ZW50UXVldWUuZ2V0SW5zdGFuY2UoKTtcbiAgICAgICAgdGhpcy5pbnB1dEhhbmRsZXIgPSBuZXcgSW5wdXRIYW5kbGVyKHRoaXMuR0FNRV9DQU5WQVMpO1xuICAgICAgICBJbnB1dC5pbml0aWFsaXplKHRoaXMudmlld3BvcnQsIHRoaXMuZ2FtZU9wdGlvbnMuaW5wdXRzKTtcbiAgICAgICAgdGhpcy5yZXNvdXJjZU1hbmFnZXIgPSBSZXNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcbiAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIgPSBuZXcgU2NlbmVNYW5hZ2VyKHRoaXMudmlld3BvcnQsIHRoaXMucmVuZGVyaW5nTWFuYWdlcik7XG4gICAgICAgIHRoaXMuYXVkaW9NYW5hZ2VyID0gQXVkaW9NYW5hZ2VyLmdldEluc3RhbmNlKCk7XG4gICAgICAgIHRoaXMucGxheWJhY2tNYW5hZ2VyID0gbmV3IFBsYXliYWNrTWFuYWdlcigpO1xuICAgICAgICBcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdXAgdGhlIGdhbWUgd2luZG93IHRoYXQgaG9sZHMgdGhlIGNhbnZhc2VzXG4gICAgICovXG4gICAgcHJpdmF0ZSBpbml0aWFsaXplR2FtZVdpbmRvdygpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZ2FtZVdpbmRvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZS13aW5kb3dcIik7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXQgdGhlIGhlaWdodCBvZiB0aGUgZ2FtZSB3aW5kb3dcbiAgICAgICAgZ2FtZVdpbmRvdy5zdHlsZS53aWR0aCA9IHRoaXMuV0lEVEggKyBcInB4XCI7XG4gICAgICAgIGdhbWVXaW5kb3cuc3R5bGUuaGVpZ2h0ID0gdGhpcy5IRUlHSFQgKyBcInB4XCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmVpdmVzIHRoZSBTY2VuZU1hbmFnZXIgZnJvbSB0aGUgR2FtZVxuICAgICAqIEByZXR1cm5zIFRoZSBTY2VuZU1hbmFnZXJcbiAgICAgKi9cbiAgICBnZXRTY2VuZU1hbmFnZXIoKTogU2NlbmVNYW5hZ2VyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NlbmVNYW5hZ2VyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgZ2FtZVxuICAgICAqL1xuICAgIHN0YXJ0KEluaXRpYWxTY2VuZTogbmV3ICguLi5hcmdzOiBhbnkpID0+IFNjZW5lLCBvcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogdm9pZCB7XG4gICAgICAgIC8vIFNldCB0aGUgdXBkYXRlIGZ1bmN0aW9uIG9mIHRoZSBsb29wXG4gICAgICAgIHRoaXMubG9vcC5kb1VwZGF0ZSA9IChkZWx0YVQ6IG51bWJlcikgPT4gdGhpcy51cGRhdGUoZGVsdGFUKTtcblxuICAgICAgICAvLyBTZXQgdGhlIHJlbmRlciBmdW5jdGlvbiBvZiB0aGUgbG9vcFxuICAgICAgICB0aGlzLmxvb3AuZG9SZW5kZXIgPSAoKSA9PiB0aGlzLnJlbmRlcigpO1xuXG4gICAgICAgIC8vIFByZWxvYWQgcmVnaXN0cnkgaXRlbXNcbiAgICAgICAgUmVnaXN0cnlNYW5hZ2VyLnByZWxvYWQoKTtcblxuICAgICAgICAvLyBMb2FkIHRoZSBpdGVtcyB3aXRoIHRoZSByZXNvdXJjZSBtYW5hZ2VyXG4gICAgICAgIHRoaXMucmVzb3VyY2VNYW5hZ2VyLmxvYWRSZXNvdXJjZXNGcm9tUXVldWUoKCkgPT4ge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSdyZSBkb25lIGxvYWRpbmcsIHN0YXJ0IHRoZSBsb29wXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZpbmlzaGVkIFByZWxvYWQgLSBsb2FkaW5nIGZpcnN0IHNjZW5lXCIpO1xuICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShJbml0aWFsU2NlbmUsIHt9LCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMubG9vcC5zdGFydCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGFsbCBuZWNlc3Nhcnkgc3Vic3lzdGVtcyBvZiB0aGUgZ2FtZS4gRGVmZXJzIHNjZW5lIHVwZGF0ZXMgdG8gdGhlIHNjZW5lTWFuYWdlclxuICAgICAqIEBwYXJhbSBkZWx0YVQgVGhlIHRpbWUgc2luZSB0aGUgbGFzdCB1cGRhdGVcbiAgICAgKi9cbiAgICB1cGRhdGUoZGVsdGFUOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdHJ5e1xuICAgICAgICAgICAgLy8gSGFuZGxlIGFsbCBldmVudHMgdGhhdCBoYXBwZW5lZCBzaW5jZSB0aGUgc3RhcnQgb2YgdGhlIGxhc3QgbG9vcFxuICAgICAgICAgICAgdGhpcy5ldmVudFF1ZXVlLnVwZGF0ZShkZWx0YVQpO1xuXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGlucHV0IGhhbmRsZXIgLSBkaXNhYmxpbmcvZW5hYmxpbmcgdXNlciBpbnB1dFxuICAgICAgICAgICAgdGhpcy5pbnB1dEhhbmRsZXIudXBkYXRlKGRlbHRhVCk7XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgaW5wdXQgZGF0YSBzdHJ1Y3R1cmVzIHNvIGdhbWUgb2JqZWN0cyBjYW4gc2VlIHRoZSBpbnB1dFxuICAgICAgICAgICAgSW5wdXQudXBkYXRlKGRlbHRhVCk7XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgcmVjb3JkaW5nIG9mIHRoZSBnYW1lXG4gICAgICAgICAgICB0aGlzLnBsYXliYWNrTWFuYWdlci51cGRhdGUoZGVsdGFUKTtcblxuICAgICAgICAgICAgLy8gVXBkYXRlIGFsbCBzY2VuZXNcbiAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLnVwZGF0ZShkZWx0YVQpO1xuXG4gICAgICAgICAgICAvLyBVcGRhdGUgYWxsIHNvdW5kc1xuICAgICAgICAgICAgdGhpcy5hdWRpb01hbmFnZXIudXBkYXRlKGRlbHRhVCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIExvYWQgb3IgdW5sb2FkIGFueSByZXNvdXJjZXMgaWYgbmVlZGVkXG4gICAgICAgICAgICB0aGlzLnJlc291cmNlTWFuYWdlci51cGRhdGUoZGVsdGFUKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIHRoaXMubG9vcC5wYXVzZSgpO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiVW5jYXVnaHQgRXJyb3IgaW4gVXBkYXRlIC0gQ3Jhc2hpbmcgZ3JhY2VmdWxseVwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgdGhlIGNhbnZhcyBhbmQgZGVmZXJzIHNjZW5lIHJlbmRlcmluZyB0byB0aGUgc2NlbmVNYW5hZ2VyLiBSZW5kZXJzIHRoZSBkZWJ1ZyBjYW52YXNcbiAgICAgKi9cbiAgICByZW5kZXIoKTogdm9pZCB7XG4gICAgICAgIHRyeXtcbiAgICAgICAgICAgIC8vIENsZWFyIHRoZSBjYW52YXNlc1xuICAgICAgICAgICAgRGVidWcuY2xlYXJDYW52YXMoKTtcblxuICAgICAgICAgICAgdGhpcy5yZW5kZXJpbmdNYW5hZ2VyLmNsZWFyKHRoaXMuY2xlYXJDb2xvcik7XG5cbiAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLnJlbmRlcigpO1xuXG4gICAgICAgICAgICAvLyBIYWNreSBkZWJ1ZyBtb2RlXG4gICAgICAgICAgICBpZihJbnB1dC5pc0tleUp1c3RQcmVzc2VkKFwiZ1wiKSl7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RGVidWcgPSAhdGhpcy5zaG93RGVidWc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIERlYnVnIHJlbmRlclxuICAgICAgICAgICAgaWYodGhpcy5zaG93RGVidWcpe1xuICAgICAgICAgICAgICAgIERlYnVnLnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZih0aGlzLnNob3dTdGF0cyl7XG4gICAgICAgICAgICAgICAgU3RhdHMucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICB0aGlzLmxvb3AucGF1c2UoKTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlVuY2F1Z2h0IEVycm9yIGluIFJlbmRlciAtIENyYXNoaW5nIGdyYWNlZnVsbHlcIik7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCBOdWxsRnVuYyBmcm9tIFwiLi4vRGF0YVR5cGVzL0Z1bmN0aW9ucy9OdWxsRnVuY1wiO1xuXG4vKipcbiAqIFRoZSBtYWluIGdhbWUgbG9vcCBvZiB0aGUgZ2FtZS4gS2VlcHMgdHJhY2sgb2YgZnBzIGFuZCBoYW5kbGVzIHNjaGVkdWxpbmcgb2YgdXBkYXRlcyBhbmQgcmVuZGVyaW5nLlxuICogVGhpcyBjbGFzcyBpcyBsZWZ0IGFic3RyYWN0LCBzbyB0aGF0IGEgc3ViY2xhc3MgY2FuIGhhbmRsZSBleGFjdGx5IGhvdyB0aGUgbG9vcCBpcyBzY2hlZHVsZWQuXG4gKiBGb3IgYW4gZXhhbXBsZSBvZiBkaWZmZXJlbnQgdHlwZXMgb2YgZ2FtZSBsb29wIHNjaGVkdWxpbmcsIGNoZWNrIG91dCBAbGluayhHYW1lIFByb2dyYW1taW5nIFBhdHRlcm5zKShodHRwczovL2dhbWVwcm9ncmFtbWluZ3BhdHRlcm5zLmNvbS9nYW1lLWxvb3AuaHRtbClcbiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgR2FtZUxvb3Age1xuXG5cdC8qKiBUaGUgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIGFuIHVwZGF0ZSBvY2N1cnMgKi9cblx0cHJvdGVjdGVkIF9kb1VwZGF0ZTogRnVuY3Rpb24gPSBOdWxsRnVuYztcblxuXHRzZXQgZG9VcGRhdGUodXBkYXRlOiBGdW5jdGlvbil7XG5cdFx0dGhpcy5fZG9VcGRhdGUgPSB1cGRhdGU7XG5cdH1cblxuXHQvKiogVGhlIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiBhIHJlbmRlciBvY2N1cnMgKi9cblx0cHJvdGVjdGVkIF9kb1JlbmRlcjogRnVuY3Rpb24gPSBOdWxsRnVuYztcblxuXG5cdHNldCBkb1JlbmRlcihyZW5kZXI6IEZ1bmN0aW9uKXtcblx0XHR0aGlzLl9kb1JlbmRlciA9IHJlbmRlcjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJldHJpZXZlcyB0aGUgY3VycmVudCBGUFMgb2YgdGhlIGdhbWVcblx0ICovXG5cdGFic3RyYWN0IGdldEZQUygpOiBudW1iZXI7XG5cblx0LyoqXG4gICAgICogU3RhcnRzIHVwIHRoZSBnYW1lIGxvb3BcbiAgICAgKi9cblx0YWJzdHJhY3Qgc3RhcnQoKTogdm9pZDtcblxuXHQvKipcblx0ICogUGF1c2VzIHRoZSBnYW1lIGxvb3AsIHVzdWFsbHkgZm9yIGFuIGVycm9yIGNvbmRpdGlvbi5cblx0ICovXG5cdGFic3RyYWN0IHBhdXNlKCk6IHZvaWQ7XG5cblx0LyoqXG5cdCAqIFJlc3VtZXMgdGhlIGdhbWUgbG9vcC5cblx0ICovXG5cdGFic3RyYWN0IHJlc3VtZSgpOiB2b2lkO1xuXG5cdC8qKlxuXHQgKiBSdW5zIHRoZSBmaXJzdCBmcmFtZSBvZiB0aGUgZ2FtZS4gTm8gdXBkYXRlIG9jY3VycyBoZXJlLCBvbmx5IGEgcmVuZGVyLlxuXHQgKiBUaGlzIGlzIG5lZWRlZCB0byBpbml0aWFsaXplIGRlbHRhIHRpbWUgdmFsdWVzXG5cdCAqIEBwYXJhbSB0aW1lc3RhbXAgVGhlIHRpbWVzdGFtcCBvZiB0aGUgZnJhbWUuIFRoaXMgaXMgcmVjZWl2ZWQgZnJvbSB0aGUgYnJvd3NlclxuXHQgKi9cblx0cHJvdGVjdGVkIGFic3RyYWN0IGRvRmlyc3RGcmFtZSh0aW1lc3RhbXA6IG51bWJlcik6IHZvaWQ7XG5cblx0LyoqXG5cdCAqIFJ1biBiZWZvcmUgYW55IHVwZGF0ZXMgb3IgdGhlIHJlbmRlciBvZiBhIGZyYW1lLlxuXHQgKiBAcGFyYW0gdGltZXN0YW1wIFRoZSB0aW1lc3RhbXAgb2YgdGhlIGZyYW1lLiBUaGlzIGlzIHJlY2VpdmVkIGZyb20gdGhlIGJyb3dzZXJcblx0ICovXG5cdHByb3RlY3RlZCBhYnN0cmFjdCBzdGFydEZyYW1lKHRpbWVzdGFtcDogbnVtYmVyKTogdm9pZDtcblxuXHQvKipcblx0ICogVGhlIGNvcmUgb2YgdGhlIGZyYW1lLCB3aGVyZSBhbnkgbmVjZXNzYXJ5IHVwZGF0ZXMgb2NjdXIsIGFuZCB3aGVyZSBhIHJlbmRlciBoYXBwZW5zXG5cdCAqIEBwYXJhbSB0aW1lc3RhbXAgVGhlIHRpbWVzdGFtcCBvZiB0aGUgZnJhbWUuIFRoaXMgaXMgcmVjZWl2ZWQgZnJvbSB0aGUgYnJvd3NlclxuXHQgKi9cblx0cHJvdGVjdGVkIGFic3RyYWN0IGRvRnJhbWUodGltZXN0YW1wOiBudW1iZXIpOiB2b2lkO1xuXG5cdC8qKlxuXHQgKiBXcmFwcyB1cCB0aGUgZnJhbWVcblx0ICogQHBhcmFtIHBhbmljIFdoZXRoZXIgb3Igbm90IHRoZSB1cGRhdGUgY3ljbGUgcGFuaWNrZWQuIFRoaXMgaGFwcGVucyB3aGVuIHRvbyBtYW55IHVwZGF0ZXMgdHJ5IHRvIGhhcHBlbiBpbiBhIHNpbmdsZSBmcmFtZVxuXHQgKi9cblx0cHJvdGVjdGVkIGFic3RyYWN0IGZpbmlzaEZyYW1lKHBhbmljOiBib29sZWFuKTogdm9pZDtcbn0iLCIvLyBAaWdub3JlUGFnZVxuXG4vKiogVGhlIG9wdGlvbnMgZm9yIGluaXRpYWxpemluZyB0aGUgQHJlZmVyZW5jZVtHYW1lTG9vcF0gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVPcHRpb25zIHtcbiAgICAvKiogVGhlIHNpemUgb2YgdGhlIHZpZXdwb3J0ICovXG4gICAgY2FudmFzU2l6ZToge3g6IG51bWJlciwgeTogbnVtYmVyfTtcblxuICAgIC8qIFRoZSBkZWZhdWx0IGxldmVsIG9mIHpvb20gKi9cbiAgICB6b29tTGV2ZWw6IG51bWJlcjtcblxuICAgIC8qKiBUaGUgY29sb3IgdG8gY2xlYXIgdGhlIGNhbnZhcyB0byBlYWNoIGZyYW1lICovXG4gICAgY2xlYXJDb2xvcjoge3I6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXJ9XG5cbiAgICAvKiBBIGxpc3Qgb2YgaW5wdXQgYmluZGluZ3MgKi9cbiAgICBpbnB1dHM6IEFycmF5PHtuYW1lOiBzdHJpbmcsIGtleXM6IEFycmF5PHN0cmluZz59PjtcblxuICAgIC8qIFdoZXRoZXIgb3Igbm90IHRoZSBkZWJ1ZyByZW5kZXJpbmcgc2hvdWxkIG9jY3VyICovXG4gICAgc2hvd0RlYnVnOiBib29sZWFuO1xuXG4gICAgLyogV2hldGhlciBvciBub3QgdGhlIHN0YXRzIHJlbmRlcmluZyBzaG91bGQgb2NjdXIgKi9cbiAgICBzaG93U3RhdHM6IGJvb2xlYW47XG5cbiAgICAvKiBXaGV0aGVyIG9yIG5vdCB0byB1c2Ugd2ViR0wgKi9cbiAgICB1c2VXZWJHTDogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIFBhcnNlcyB0aGUgZGF0YSBpbiB0aGUgcmF3IG9wdGlvbnMgb2JqZWN0XG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIGdhbWUgb3B0aW9ucyBhcyBhIFJlY29yZFxuICAgICAqIEByZXR1cm5zIEEgdmVyc2lvbiBvZiB0aGUgb3B0aW9ucyBjb252ZXJ0ZWQgdG8gYSBHYW1lT3B0aW9ucyBvYmplY3RcbiAgICAgKi9cbiAgICBzdGF0aWMgcGFyc2Uob3B0aW9uczogUmVjb3JkPHN0cmluZywgYW55Pik6IEdhbWVPcHRpb25zIHtcbiAgICAgICAgbGV0IGdPcHQgPSBuZXcgR2FtZU9wdGlvbnMoKTtcblxuICAgICAgICBnT3B0LmNhbnZhc1NpemUgPSBvcHRpb25zLmNhbnZhc1NpemUgPyBvcHRpb25zLmNhbnZhc1NpemUgOiB7eDogODAwLCB5OiA2MDB9O1xuICAgICAgICBnT3B0Lnpvb21MZXZlbCA9IG9wdGlvbnMuem9vbUxldmVsID8gb3B0aW9ucy56b29tTGV2ZWwgOiAxO1xuICAgICAgICBnT3B0LmNsZWFyQ29sb3IgPSBvcHRpb25zLmNsZWFyQ29sb3IgPyBvcHRpb25zLmNsZWFyQ29sb3IgOiB7cjogMjU1LCBnOiAyNTUsIGI6IDI1NX07XG4gICAgICAgIGdPcHQuaW5wdXRzID0gb3B0aW9ucy5pbnB1dHMgPyBvcHRpb25zLmlucHV0cyA6IFtdO1xuICAgICAgICBnT3B0LnNob3dEZWJ1ZyA9ICEhb3B0aW9ucy5zaG93RGVidWc7XG4gICAgICAgIGdPcHQuc2hvd1N0YXRzID0gISFvcHRpb25zLnNob3dTdGF0cztcbiAgICAgICAgZ09wdC51c2VXZWJHTCA9ICEhb3B0aW9ucy51c2VXZWJHTDtcblxuICAgICAgICByZXR1cm4gZ09wdDtcbiAgICB9XG59IiwiaW1wb3J0IEdhbWVOb2RlIGZyb20gXCIuL0dhbWVOb2RlXCI7XG5pbXBvcnQgVmVjMiBmcm9tIFwiLi4vRGF0YVR5cGVzL1ZlYzJcIjtcbmltcG9ydCBSZWdpb24gZnJvbSBcIi4uL0RhdGFUeXBlcy9JbnRlcmZhY2VzL1JlZ2lvblwiO1xuaW1wb3J0IEFBQkIgZnJvbSBcIi4uL0RhdGFUeXBlcy9TaGFwZXMvQUFCQlwiO1xuaW1wb3J0IERlYnVnIGZyb20gXCIuLi9EZWJ1Zy9EZWJ1Z1wiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi9VdGlscy9Db2xvclwiO1xuXG4vKipcbiAqIFRoZSByZXByZXNlbnRhdGlvbiBvZiBhbiBvYmplY3QgaW4gdGhlIGdhbWUgd29ybGQgdGhhdCBjYW4gYmUgZHJhd24gdG8gdGhlIHNjcmVlblxuICovXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBDYW52YXNOb2RlIGV4dGVuZHMgR2FtZU5vZGUgaW1wbGVtZW50cyBSZWdpb24ge1xuXHRwcml2YXRlIF9zaXplOiBWZWMyO1xuXHRwcml2YXRlIF9zY2FsZTogVmVjMjtcblx0cHJpdmF0ZSBfYm91bmRhcnk6IEFBQkI7XG5cdHByaXZhdGUgX2hhc0N1c3RvbVNoYWRlcjogYm9vbGVhbjtcblx0cHJpdmF0ZSBfY3VzdG9tU2hhZGVyS2V5OiBzdHJpbmc7XG5cdHByaXZhdGUgX2FscGhhOiBudW1iZXI7XG5cblx0LyoqIEEgZmxhZyBmb3Igd2hldGhlciBvciBub3QgdGhlIENhbnZhc05vZGUgaXMgdmlzaWJsZSAqL1xuXHR2aXNpYmxlOiBib29sZWFuID0gdHJ1ZTtcblx0XG5cdGNvbnN0cnVjdG9yKCl7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLl9zaXplID0gbmV3IFZlYzIoMCwgMCk7XG5cdFx0dGhpcy5fc2l6ZS5zZXRPbkNoYW5nZSgoKSA9PiB0aGlzLnNpemVDaGFuZ2VkKCkpO1xuXHRcdHRoaXMuX3NjYWxlID0gbmV3IFZlYzIoMSwgMSk7XG5cdFx0dGhpcy5fc2NhbGUuc2V0T25DaGFuZ2UoKCkgPT4gdGhpcy5zY2FsZUNoYW5nZWQoKSk7XG5cdFx0dGhpcy5fYm91bmRhcnkgPSBuZXcgQUFCQigpO1xuXHRcdHRoaXMudXBkYXRlQm91bmRhcnkoKTtcblxuXHRcdHRoaXMuX2hhc0N1c3RvbVNoYWRlciA9IGZhbHNlO1xuXHR9XG5cblx0Z2V0IGFscGhhKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2FscGhhO1xuXHR9XG5cblx0c2V0IGFscGhhKGE6IG51bWJlcikge1xuXHRcdHRoaXMuX2FscGhhID0gYTtcblx0fVxuXG5cdGdldCBzaXplKCk6IFZlYzIge1xuXHRcdHJldHVybiB0aGlzLl9zaXplO1xuXHR9XG5cblx0c2V0IHNpemUoc2l6ZTogVmVjMil7XG5cdFx0dGhpcy5fc2l6ZSA9IHNpemU7XG5cdFx0Ly8gRW50ZXIgYXMgYSBsYW1iZGEgdG8gYmluZCBcInRoaXNcIlxuXHRcdHRoaXMuX3NpemUuc2V0T25DaGFuZ2UoKCkgPT4gdGhpcy5zaXplQ2hhbmdlZCgpKTtcblx0XHR0aGlzLnNpemVDaGFuZ2VkKCk7XG5cdH1cblxuXHRnZXQgc2NhbGUoKTogVmVjMiB7XG5cdFx0cmV0dXJuIHRoaXMuX3NjYWxlO1xuXHR9XG5cblx0c2V0IHNjYWxlKHNjYWxlOiBWZWMyKXtcblx0XHR0aGlzLl9zY2FsZSA9IHNjYWxlO1xuXHRcdC8vIEVudGVyIGFzIGEgbGFtYmRhIHRvIGJpbmQgXCJ0aGlzXCJcblx0XHR0aGlzLl9zY2FsZS5zZXRPbkNoYW5nZSgoKSA9PiB0aGlzLnNjYWxlQ2hhbmdlZCgpKTtcblx0XHR0aGlzLnNjYWxlQ2hhbmdlZCgpO1xuXHR9XG5cblx0c2V0IHNjYWxlWCh2YWx1ZTogbnVtYmVyKSB7XG5cdFx0dGhpcy5zY2FsZS54ID0gdmFsdWU7XG5cdH1cblxuXHRzZXQgc2NhbGVZKHZhbHVlOiBudW1iZXIpIHtcblx0XHR0aGlzLnNjYWxlLnkgPSB2YWx1ZTtcblx0fVxuXG5cdGdldCBoYXNDdXN0b21TaGFkZXIoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuX2hhc0N1c3RvbVNoYWRlcjtcblx0fVxuXG5cdGdldCBjdXN0b21TaGFkZXJLZXkoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fY3VzdG9tU2hhZGVyS2V5O1xuXHR9XG5cblx0Ly8gQG92ZXJyaWRlXG5cdHByb3RlY3RlZCBwb3NpdGlvbkNoYW5nZWQoKTogdm9pZCB7XG5cdFx0c3VwZXIucG9zaXRpb25DaGFuZ2VkKCk7XG5cdFx0dGhpcy51cGRhdGVCb3VuZGFyeSgpO1xuXHR9XG5cblx0LyoqIENhbGxlZCBpZiB0aGUgc2l6ZSB2ZWN0b3IgaXMgY2hhbmdlZCBvciByZXBsYWNlZC4gKi9cblx0cHJvdGVjdGVkIHNpemVDaGFuZ2VkKCk6IHZvaWQge1xuXHRcdHRoaXMudXBkYXRlQm91bmRhcnkoKTtcblx0fVxuXG5cdC8qKiBDYWxsZWQgaWYgdGhlIHNjYWxlIHZlY3RvciBpcyBjaGFuZ2VkIG9yIHJlcGxhY2VkICovXG5cdHByb3RlY3RlZCBzY2FsZUNoYW5nZWQoKTogdm9pZCB7XG5cdFx0dGhpcy51cGRhdGVCb3VuZGFyeSgpO1xuXHR9XG5cblx0Ly8gQGRvY0lnbm9yZVxuXHQvKiogQ2FsbGVkIGlmIHRoZSBwb3NpdGlvbiwgc2l6ZSwgb3Igc2NhbGUgb2YgdGhlIENhbnZhc05vZGUgaXMgY2hhbmdlZC4gVXBkYXRlcyB0aGUgYm91bmRhcnkuICovXG5cdHByaXZhdGUgdXBkYXRlQm91bmRhcnkoKTogdm9pZCB7XG5cdFx0dGhpcy5fYm91bmRhcnkuY2VudGVyLnNldCh0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSk7XG5cdFx0dGhpcy5fYm91bmRhcnkuaGFsZlNpemUuc2V0KHRoaXMuc2l6ZS54KnRoaXMuc2NhbGUueC8yLCB0aGlzLnNpemUueSp0aGlzLnNjYWxlLnkvMik7XG5cdH1cblxuXHRnZXQgYm91bmRhcnkoKTogQUFCQiB7XG5cdFx0cmV0dXJuIHRoaXMuX2JvdW5kYXJ5O1xuXHR9XG5cblx0Z2V0IHNpemVXaXRoWm9vbSgpOiBWZWMyIHtcblx0XHRsZXQgem9vbSA9IHRoaXMuc2NlbmUuZ2V0Vmlld1NjYWxlKCk7XG5cblx0XHRyZXR1cm4gdGhpcy5ib3VuZGFyeS5oYWxmU2l6ZS5jbG9uZSgpLnNjYWxlZCh6b29tLCB6b29tKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBZGRzIGEgY3VzdG9tIHNoYWRlciB0byB0aGlzIENhbnZhc05vZGVcblx0ICogQHBhcmFtIGtleSBUaGUgcmVnaXN0cnkga2V5IG9mIHRoZSBTaGFkZXJUeXBlXG5cdCAqL1xuXHR1c2VDdXN0b21TaGFkZXIoa2V5OiBzdHJpbmcpOiB2b2lkIHtcblx0XHR0aGlzLl9oYXNDdXN0b21TaGFkZXIgPSB0cnVlO1xuXHRcdHRoaXMuX2N1c3RvbVNoYWRlcktleSA9IGtleTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHBvaW50ICh4LCB5KSBpcyBpbnNpZGUgb2YgdGhpcyBjYW52YXMgb2JqZWN0XG5cdCAqIEBwYXJhbSB4IFRoZSB4IHBvc2l0aW9uIG9mIHRoZSBwb2ludFxuXHQgKiBAcGFyYW0geSBUaGUgeSBwb3NpdGlvbiBvZiB0aGUgcG9pbnRcblx0ICogQHJldHVybnMgQSBmbGFnIHJlcHJlc2VudGluZyB3aGV0aGVyIG9yIG5vdCB0aGlzIG5vZGUgY29udGFpbnMgdGhlIHBvaW50LlxuXHQgKi9cblx0Y29udGFpbnMoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy5fYm91bmRhcnkuY29udGFpbnNQb2ludChuZXcgVmVjMih4LCB5KSk7XG5cdH1cblxuXHQvLyBAaW1wbGVtZW50ZWRcblx0ZGVidWdSZW5kZXIoKTogdm9pZCB7XG5cdFx0RGVidWcuZHJhd0JveCh0aGlzLnJlbGF0aXZlUG9zaXRpb24sIHRoaXMuc2l6ZVdpdGhab29tLCBmYWxzZSwgQ29sb3IuQkxVRSk7XG5cdFx0c3VwZXIuZGVidWdSZW5kZXIoKTtcblx0fVxufSIsImltcG9ydCBWZWMyIGZyb20gXCIuLi9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IFJlY2VpdmVyIGZyb20gXCIuLi9FdmVudHMvUmVjZWl2ZXJcIjtcbmltcG9ydCBFbWl0dGVyIGZyb20gXCIuLi9FdmVudHMvRW1pdHRlclwiO1xuaW1wb3J0IFNjZW5lIGZyb20gXCIuLi9TY2VuZS9TY2VuZVwiO1xuaW1wb3J0IExheWVyIGZyb20gXCIuLi9TY2VuZS9MYXllclwiO1xuaW1wb3J0IEFJIGZyb20gXCIuLi9EYXRhVHlwZXMvSW50ZXJmYWNlcy9BSVwiO1xuaW1wb3J0IFBoeXNpY2FsIGZyb20gXCIuLi9EYXRhVHlwZXMvSW50ZXJmYWNlcy9QaHlzaWNhbFwiO1xuaW1wb3J0IFBvc2l0aW9uZWQgZnJvbSBcIi4uL0RhdGFUeXBlcy9JbnRlcmZhY2VzL1Bvc2l0aW9uZWRcIjtcbmltcG9ydCB7IGlzUmVnaW9uIH0gZnJvbSBcIi4uL0RhdGFUeXBlcy9JbnRlcmZhY2VzL1JlZ2lvblwiO1xuaW1wb3J0IFVuaXF1ZSBmcm9tIFwiLi4vRGF0YVR5cGVzL0ludGVyZmFjZXMvVW5pcXVlXCI7XG5pbXBvcnQgVXBkYXRlYWJsZSBmcm9tIFwiLi4vRGF0YVR5cGVzL0ludGVyZmFjZXMvVXBkYXRlYWJsZVwiO1xuaW1wb3J0IERlYnVnUmVuZGVyYWJsZSBmcm9tIFwiLi4vRGF0YVR5cGVzL0ludGVyZmFjZXMvRGVidWdSZW5kZXJhYmxlXCI7XG5pbXBvcnQgQWN0b3IgZnJvbSBcIi4uL0RhdGFUeXBlcy9JbnRlcmZhY2VzL0FjdG9yXCI7XG5pbXBvcnQgU2hhcGUgZnJvbSBcIi4uL0RhdGFUeXBlcy9TaGFwZXMvU2hhcGVcIjtcbmltcG9ydCBBQUJCIGZyb20gXCIuLi9EYXRhVHlwZXMvU2hhcGVzL0FBQkJcIjtcbmltcG9ydCBOYXZpZ2F0aW9uUGF0aCBmcm9tIFwiLi4vUGF0aGZpbmRpbmcvTmF2aWdhdGlvblBhdGhcIjtcbmltcG9ydCBUd2VlbkNvbnRyb2xsZXIgZnJvbSBcIi4uL1JlbmRlcmluZy9BbmltYXRpb25zL1R3ZWVuQ29udHJvbGxlclwiO1xuaW1wb3J0IERlYnVnIGZyb20gXCIuLi9EZWJ1Zy9EZWJ1Z1wiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi9VdGlscy9Db2xvclwiO1xuaW1wb3J0IENpcmNsZSBmcm9tIFwiLi4vRGF0YVR5cGVzL1NoYXBlcy9DaXJjbGVcIjtcbmltcG9ydCBHb2FwQUkgZnJvbSBcIi4uL0RhdGFUeXBlcy9Hb2FwL0dvYXBBSVwiO1xuXG4vKipcbiAqIFRoZSByZXByZXNlbnRhdGlvbiBvZiBhbiBvYmplY3QgaW4gdGhlIGdhbWUgd29ybGQuXG4gKiBUbyBjb25zdHJ1Y3QgR2FtZU5vZGVzLCBzZWUgdGhlIEByZWZlcmVuY2VbU2NlbmVdIGRvY3VtZW50YXRpb24uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIEdhbWVOb2RlIGltcGxlbWVudHMgUG9zaXRpb25lZCwgVW5pcXVlLCBVcGRhdGVhYmxlLCBQaHlzaWNhbCwgQWN0b3IsIERlYnVnUmVuZGVyYWJsZSB7XG5cdC8qLS0tLS0tLS0tLSBQT1NJVElPTkVEIC0tLS0tLS0tLS0qL1xuXHRwcml2YXRlIF9wb3NpdGlvbjogVmVjMjtcblxuXHQvKi0tLS0tLS0tLS0gVU5JUVVFIC0tLS0tLS0tLS0qL1xuXHRwcml2YXRlIF9pZDogbnVtYmVyO1xuXG5cdC8qLS0tLS0tLS0tLSBQSFlTSUNBTCAtLS0tLS0tLS0tKi9cblx0aGFzUGh5c2ljczogYm9vbGVhbiA9IGZhbHNlO1xuXHRtb3Zpbmc6IGJvb2xlYW4gPSBmYWxzZTtcblx0ZnJvemVuOiBib29sZWFuID0gZmFsc2U7XG5cdG9uR3JvdW5kOiBib29sZWFuID0gZmFsc2U7XG5cdG9uV2FsbDogYm9vbGVhbiA9IGZhbHNlO1xuXHRvbkNlaWxpbmc6IGJvb2xlYW4gPSBmYWxzZTtcblx0YWN0aXZlOiBib29sZWFuID0gZmFsc2U7XG5cdGNvbGxpc2lvblNoYXBlOiBTaGFwZTtcblx0Y29sbGlkZXJPZmZzZXQ6IFZlYzI7XG5cdGlzU3RhdGljOiBib29sZWFuO1xuXHRpc0NvbGxpZGFibGU6IGJvb2xlYW47XG5cdGlzVHJpZ2dlcjogYm9vbGVhbjtcblx0dHJpZ2dlck1hc2s6IG51bWJlcjtcblx0dHJpZ2dlckVudGVyczogQXJyYXk8c3RyaW5nPjtcblx0dHJpZ2dlckV4aXRzOiBBcnJheTxzdHJpbmc+O1xuXHRfdmVsb2NpdHk6IFZlYzI7XG5cdHN3ZXB0UmVjdDogQUFCQjtcblx0Y29sbGlkZWRXaXRoVGlsZW1hcDogYm9vbGVhbjtcblx0Z3JvdXA6IG51bWJlcjtcblx0aXNQbGF5ZXI6IGJvb2xlYW47XG5cdGlzQ29sbGlkaW5nOiBib29sZWFuID0gZmFsc2U7XG5cblx0LyotLS0tLS0tLS0tIEFDVE9SIC0tLS0tLS0tLS0qL1xuXHRfYWk6IEFJIHwgR29hcEFJO1xuXHRhaUFjdGl2ZTogYm9vbGVhbjtcblx0cGF0aDogTmF2aWdhdGlvblBhdGg7XG5cdHBhdGhmaW5kaW5nOiBib29sZWFuID0gZmFsc2U7XG5cblx0LyotLS0tLS0tLS0tIEdFTkVSQUwgLS0tLS0tLS0tLSovXG5cdC8qKiBBbiBldmVudCByZWNlaXZlci4gKi9cblx0cHJvdGVjdGVkIHJlY2VpdmVyOiBSZWNlaXZlcjtcblx0LyoqIEFuIGV2ZW50IGVtaXR0ZXIuICovXG5cdHByb3RlY3RlZCBlbWl0dGVyOiBFbWl0dGVyO1xuXHQvKiogQSByZWZlcmVuY2UgdG8gdGhlIHNjZW5lIHRoaXMgR2FtZU5vZGUgaXMgYSBwYXJ0IG9mLiAqL1xuXHRwcm90ZWN0ZWQgc2NlbmU6IFNjZW5lO1xuXHQvKiogVGhlIHZpc3VhbCBsYXllciB0aGlzIEdhbWVOb2RlIHJlc2lkZXMgaW4uICovXG5cdHByb3RlY3RlZCBsYXllcjogTGF5ZXI7XG5cdC8qKiBBIHV0aWxpdHkgdGhhdCBhbGxvd3MgdGhlIHVzZSBvZiB0d2VlbnMgb24gdGhpcyBHYW1lTm9kZSAqL1xuXHR0d2VlbnM6IFR3ZWVuQ29udHJvbGxlcjtcblx0LyoqIEEgdHdlZW5hYmxlIHByb3BlcnR5IGZvciByb3RhdGlvbi4gRG9lcyBub3QgYWZmZWN0IHRoZSBib3VuZGluZyBib3ggb2YgdGhpcyBHYW1lTm9kZSAtIE9ubHkgcmVuZGVyaW5nLiAqL1xuXHRyb3RhdGlvbjogbnVtYmVyO1xuXHQvKiogVGhlIG9wYWNpdHkgdmFsdWUgb2YgdGhpcyBHYW1lTm9kZSAqL1xuXHRhYnN0cmFjdCBzZXQgYWxwaGEoYTogbnVtYmVyKTtcblxuXHRhYnN0cmFjdCBnZXQgYWxwaGEoKTogbnVtYmVyO1xuXG5cdC8vIENvbnN0cnVjdG9yIGRvY3MgYXJlIGlnbm9yZWQsIGFzIHRoZSB1c2VyIHNob3VsZCBOT1QgY3JlYXRlIG5ldyBHYW1lTm9kZXMgd2l0aCBhIHJhdyBjb25zdHJ1Y3RvclxuXHRjb25zdHJ1Y3Rvcigpe1xuXHRcdHRoaXMuX3Bvc2l0aW9uID0gbmV3IFZlYzIoMCwgMCk7XG5cdFx0dGhpcy5fcG9zaXRpb24uc2V0T25DaGFuZ2UoKCkgPT4gdGhpcy5wb3NpdGlvbkNoYW5nZWQoKSk7XG5cdFx0dGhpcy5yZWNlaXZlciA9IG5ldyBSZWNlaXZlcigpO1xuXHRcdHRoaXMuZW1pdHRlciA9IG5ldyBFbWl0dGVyKCk7XG5cdFx0dGhpcy50d2VlbnMgPSBuZXcgVHdlZW5Db250cm9sbGVyKHRoaXMpO1xuXHRcdHRoaXMucm90YXRpb24gPSAwO1xuXHR9XG5cblx0ZGVzdHJveSgpe1xuXHRcdHRoaXMudHdlZW5zLmRlc3Ryb3koKTtcblx0XHR0aGlzLnJlY2VpdmVyLmRlc3Ryb3koKTtcblxuXHRcdGlmKHRoaXMuaGFzUGh5c2ljcyl7XG5cdFx0XHR0aGlzLnJlbW92ZVBoeXNpY3MoKTtcblx0XHR9XG5cblx0XHRpZih0aGlzLl9haSl7XG5cdFx0XHR0aGlzLl9haS5kZXN0cm95KCk7XG5cdFx0XHRkZWxldGUgdGhpcy5fYWk7XG5cdFx0XHR0aGlzLnNjZW5lLmdldEFJTWFuYWdlcigpLnJlbW92ZUFjdG9yKHRoaXMpO1xuXHRcdH1cblxuXHRcdHRoaXMuc2NlbmUucmVtb3ZlKHRoaXMpO1xuXG5cdFx0dGhpcy5sYXllci5yZW1vdmVOb2RlKHRoaXMpO1xuXHR9XG5cblx0LyotLS0tLS0tLS0tIFBPU0lUSU9ORUQgLS0tLS0tLS0tLSovXG5cdGdldCBwb3NpdGlvbigpOiBWZWMyIHtcblx0XHRyZXR1cm4gdGhpcy5fcG9zaXRpb247XG5cdH1cblxuXHRzZXQgcG9zaXRpb24ocG9zOiBWZWMyKSB7XG5cdFx0dGhpcy5fcG9zaXRpb24gPSBwb3M7XG5cdFx0dGhpcy5fcG9zaXRpb24uc2V0T25DaGFuZ2UoKCkgPT4gdGhpcy5wb3NpdGlvbkNoYW5nZWQoKSk7XG5cdFx0dGhpcy5wb3NpdGlvbkNoYW5nZWQoKTtcblx0fVxuXG5cdGdldCByZWxhdGl2ZVBvc2l0aW9uKCk6IFZlYzIge1xuXHRcdHJldHVybiB0aGlzLmluUmVsYXRpdmVDb29yZGluYXRlcyh0aGlzLnBvc2l0aW9uKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIHBvaW50IHRvIGNvb3JkaW5hdGVzIHJlbGF0aXZlIHRvIHRoZSB6b29tIGFuZCBvcmlnaW4gb2YgdGhpcyBub2RlXG5cdCAqIEBwYXJhbSBwb2ludCBUaGUgcG9pbnQgdG8gY29udmVyXG5cdCAqIEByZXR1cm5zIEEgbmV3IFZlYzIgcmVwcmVzZW50aW5nIHRoZSBwb2ludCBpbiByZWxhdGl2ZSBjb29yZGluYXRlc1xuXHQgKi9cblx0aW5SZWxhdGl2ZUNvb3JkaW5hdGVzKHBvaW50OiBWZWMyKTogVmVjMiB7XG5cdFx0bGV0IG9yaWdpbiA9IHRoaXMuc2NlbmUuZ2V0Vmlld1RyYW5zbGF0aW9uKHRoaXMpO1xuXHRcdGxldCB6b29tID0gdGhpcy5zY2VuZS5nZXRWaWV3U2NhbGUoKTtcblx0XHRyZXR1cm4gcG9pbnQuY2xvbmUoKS5zdWIob3JpZ2luKS5zY2FsZSh6b29tKTtcblx0fVxuXG5cdC8qLS0tLS0tLS0tLSBVTklRVUUgLS0tLS0tLS0tLSovXG5cdGdldCBpZCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9pZDtcblx0fVxuXG5cdHNldCBpZChpZDogbnVtYmVyKSB7XG5cdFx0Ly8gaWQgY2FuIG9ubHkgYmUgc2V0IG9uY2Vcblx0XHRpZih0aGlzLl9pZCA9PT0gdW5kZWZpbmVkKXtcblx0XHRcdHRoaXMuX2lkID0gaWQ7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRocm93IFwiQXR0ZW1wdGVkIHRvIGFzc2lnbiBpZCB0byBvYmplY3QgdGhhdCBhbHJlYWR5IGhhcyBpZC5cIlxuXHRcdH1cblx0fVxuXG5cdC8qLS0tLS0tLS0tLSBQSFlTSUNBTCAtLS0tLS0tLS0tKi9cblx0Ly8gQGltcGxlbWVudGVkXG5cdC8qKlxuICAgICAqIEBwYXJhbSB2ZWxvY2l0eSBUaGUgdmVsb2NpdHkgd2l0aCB3aGljaCB0byBtb3ZlIHRoZSBvYmplY3QuXG4gICAgICovXG5cdG1vdmUodmVsb2NpdHk6IFZlYzIpOiB2b2lkIHtcblx0XHRpZih0aGlzLmZyb3plbikgcmV0dXJuO1xuXHRcdHRoaXMubW92aW5nID0gdHJ1ZTtcblx0XHR0aGlzLl92ZWxvY2l0eSA9IHZlbG9jaXR5O1xuXHR9O1xuXG5cdG1vdmVPblBhdGgoc3BlZWQ6IG51bWJlciwgcGF0aDogTmF2aWdhdGlvblBhdGgpOiB2b2lkIHtcblx0XHRpZih0aGlzLmZyb3plbiB8fCBwYXRoLmlzRG9uZSgpKSByZXR1cm47XG5cdFx0dGhpcy5wYXRoID0gcGF0aDtcblx0XHRsZXQgZGlyID0gcGF0aC5nZXRNb3ZlRGlyZWN0aW9uKHRoaXMpO1xuXHRcdHRoaXMubW92aW5nID0gdHJ1ZTtcblx0XHR0aGlzLnBhdGhmaW5kaW5nID0gdHJ1ZTtcblx0XHR0aGlzLl92ZWxvY2l0eSA9IGRpci5zY2FsZShzcGVlZCk7XG5cdH1cblxuXHQvLyBAaW1wbGVtZW50ZWRcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gdmVsb2NpdHkgVGhlIHZlbG9jaXR5IHdpdGggd2hpY2ggdGhlIG9iamVjdCB3aWxsIG1vdmUuXG4gICAgICovXG5cdGZpbmlzaE1vdmUoKTogdm9pZCB7XG5cdFx0dGhpcy5tb3ZpbmcgPSBmYWxzZTtcblx0XHR0aGlzLnBvc2l0aW9uLmFkZCh0aGlzLl92ZWxvY2l0eSk7XG5cdFx0aWYodGhpcy5wYXRoZmluZGluZyl7XG5cdFx0XHR0aGlzLnBhdGguaGFuZGxlUGF0aFByb2dyZXNzKHRoaXMpO1xuXHRcdFx0dGhpcy5wYXRoID0gbnVsbDtcblx0XHRcdHRoaXMucGF0aGZpbmRpbmcgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHQvLyBAaW1wbGVtZW50ZWRcblx0LyoqXG5cdCAqIEBwYXJhbSBjb2xsaXNpb25TaGFwZSBUaGUgY29sbGlkZXIgZm9yIHRoaXMgb2JqZWN0LiBJZiB0aGlzIGhhcyBhIHJlZ2lvbiAoaW1wbGVtZW50cyBSZWdpb24pLFxuXHQgKiBpdCB3aWxsIGJlIHVzZWQgd2hlbiBubyBjb2xsaXNpb24gc2hhcGUgaXMgc3BlY2lmaWVkIChvciBpZiBjb2xsaXNpb24gc2hhcGUgaXMgbnVsbCkuXG5cdCAqIEBwYXJhbSBpc0NvbGxpZGFibGUgV2hldGhlciB0aGlzIGlzIGNvbGxpZGFibGUgb3Igbm90LiBUcnVlIGJ5IGRlZmF1bHQuXG5cdCAqIEBwYXJhbSBpc1N0YXRpYyBXaGV0aGVyIHRoaXMgaXMgc3RhdGljIG9yIG5vdC4gRmFsc2UgYnkgZGVmYXVsdFxuXHQgKi9cblx0YWRkUGh5c2ljcyhjb2xsaXNpb25TaGFwZT86IFNoYXBlLCBjb2xsaWRlck9mZnNldD86IFZlYzIsIGlzQ29sbGlkYWJsZTogYm9vbGVhbiA9IHRydWUsIGlzU3RhdGljOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcblx0XHQvLyBJbml0aWFsaXplIHRoZSBwaHlzaWNzIHZhcmlhYmxlc1xuXHRcdHRoaXMuaGFzUGh5c2ljcyA9IHRydWU7XG5cdFx0dGhpcy5tb3ZpbmcgPSBmYWxzZTtcblx0XHR0aGlzLm9uR3JvdW5kID0gZmFsc2U7XG5cdFx0dGhpcy5vbldhbGwgPSBmYWxzZTtcblx0XHR0aGlzLm9uQ2VpbGluZyA9IGZhbHNlO1xuXHRcdHRoaXMuYWN0aXZlID0gdHJ1ZTtcblx0XHR0aGlzLmlzQ29sbGlkYWJsZSA9IGlzQ29sbGlkYWJsZTtcblx0XHR0aGlzLmlzU3RhdGljID0gaXNTdGF0aWM7XG5cdFx0dGhpcy5pc1RyaWdnZXIgPSBmYWxzZTtcblx0XHR0aGlzLnRyaWdnZXJNYXNrID0gMDtcblx0XHR0aGlzLnRyaWdnZXJFbnRlcnMgPSBuZXcgQXJyYXkoMzIpO1xuXHRcdHRoaXMudHJpZ2dlckV4aXRzID0gbmV3IEFycmF5KDMyKTtcblx0XHR0aGlzLl92ZWxvY2l0eSA9IFZlYzIuWkVSTztcblx0XHR0aGlzLnN3ZXB0UmVjdCA9IG5ldyBBQUJCKCk7XG5cdFx0dGhpcy5jb2xsaWRlZFdpdGhUaWxlbWFwID0gZmFsc2U7XG5cdFx0dGhpcy5ncm91cCA9IC0xO1x0XHRcdFx0XHQvLyBUaGUgZGVmYXVsdCBncm91cCwgY29sbGlkZXMgd2l0aCBldmVyeXRoaW5nXG5cblx0XHQvLyBTZXQgdGhlIGNvbGxpc2lvbiBzaGFwZSBpZiBwcm92aWRlZCwgb3Igc2ltcGx5IHVzZSB0aGUgdGhlIHJlZ2lvbiBpZiB0aGVyZSBpcyBvbmUuXG5cdFx0aWYoY29sbGlzaW9uU2hhcGUpe1xuXHRcdFx0dGhpcy5jb2xsaXNpb25TaGFwZSA9IGNvbGxpc2lvblNoYXBlO1xuXHRcdFx0dGhpcy5jb2xsaXNpb25TaGFwZS5jZW50ZXIgPSB0aGlzLnBvc2l0aW9uO1xuXHRcdH0gZWxzZSBpZiAoaXNSZWdpb24odGhpcykpIHtcblx0XHRcdC8vIElmIHRoZSBnYW1lbm9kZSBoYXMgYSByZWdpb24gYW5kIG5vIG90aGVyIGlzIHNwZWNpZmllZCwgdXNlIHRoYXRcblx0XHRcdHRoaXMuY29sbGlzaW9uU2hhcGUgPSAoPGFueT50aGlzKS5ib3VuZGFyeS5jbG9uZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBcIk5vIGNvbGxpc2lvbiBzaGFwZSBzcGVjaWZpZWQgZm9yIHBoeXNpY3Mgb2JqZWN0LlwiXG5cdFx0fVxuXG5cdFx0Ly8gSWYgd2Ugd2VyZSBwcm92aWRlZCB3aXRoIGEgY29sbGlkZXIgb2Zmc2V0LCBzZXQgaXQuIE90aGVyd2lzZSB0aGVyZSBpcyBubyBvZmZzZXQsIHNvIHVzZSB0aGUgemVybyB2ZWN0b3Jcblx0XHRpZihjb2xsaWRlck9mZnNldCl7XG5cdFx0XHR0aGlzLmNvbGxpZGVyT2Zmc2V0ID0gY29sbGlkZXJPZmZzZXQ7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuY29sbGlkZXJPZmZzZXQgPSBWZWMyLlpFUk87XG5cdFx0fVxuXG5cdFx0Ly8gSW5pdGlhbGl6ZSB0aGUgc3dlcHQgcmVjdFxuXHRcdHRoaXMuc3dlcHRSZWN0ID0gdGhpcy5jb2xsaXNpb25TaGFwZS5nZXRCb3VuZGluZ1JlY3QoKTtcblxuXHRcdC8vIFJlZ2lzdGVyIHRoZSBvYmplY3Qgd2l0aCBwaHlzaWNzXG5cdFx0dGhpcy5zY2VuZS5nZXRQaHlzaWNzTWFuYWdlcigpLnJlZ2lzdGVyT2JqZWN0KHRoaXMpO1xuXHR9XG5cblx0LyoqIFJlbW92ZXMgdGhpcyBvYmplY3QgZnJvbSB0aGUgcGh5c2ljcyBzeXN0ZW0gKi9cbiAgICByZW1vdmVQaHlzaWNzKCk6IHZvaWQge1xuXHRcdC8vIFJlbW92ZSB0aGlzIGZyb20gdGhlIHBoeXNpY3MgbWFuYWdlclxuXHRcdHRoaXMuc2NlbmUuZ2V0UGh5c2ljc01hbmFnZXIoKS5kZXJlZ2lzdGVyT2JqZWN0KHRoaXMpO1xuXG5cdFx0Ly8gTnVsbGlmeSBhbGwgcGh5c2ljcyBmaWVsZHNcblx0XHR0aGlzLmhhc1BoeXNpY3MgPSBmYWxzZTtcblx0XHR0aGlzLm1vdmluZyA9IGZhbHNlO1xuXHRcdHRoaXMub25Hcm91bmQgPSBmYWxzZTtcblx0XHR0aGlzLm9uV2FsbCA9IGZhbHNlO1xuXHRcdHRoaXMub25DZWlsaW5nID0gZmFsc2U7XG5cdFx0dGhpcy5hY3RpdmUgPSBmYWxzZTtcblx0XHR0aGlzLmlzQ29sbGlkYWJsZSA9IGZhbHNlO1xuXHRcdHRoaXMuaXNTdGF0aWMgPSBmYWxzZTtcblx0XHR0aGlzLmlzVHJpZ2dlciA9IGZhbHNlO1xuXHRcdHRoaXMudHJpZ2dlck1hc2sgPSAwO1xuXHRcdHRoaXMudHJpZ2dlckVudGVycyA9IG51bGw7XG5cdFx0dGhpcy50cmlnZ2VyRXhpdHMgPSBudWxsO1xuXHRcdHRoaXMuX3ZlbG9jaXR5ID0gVmVjMi5aRVJPO1xuXHRcdHRoaXMuc3dlcHRSZWN0ID0gbnVsbDtcblx0XHR0aGlzLmNvbGxpZGVkV2l0aFRpbGVtYXAgPSBmYWxzZTtcblx0XHR0aGlzLmdyb3VwID0gLTE7XG5cdFx0dGhpcy5jb2xsaXNpb25TaGFwZSA9IG51bGw7XG5cdFx0dGhpcy5jb2xsaWRlck9mZnNldCA9IFZlYzIuWkVSTztcblx0XHR0aGlzLnN3ZXB0UmVjdCA9IG51bGw7XG5cdH1cblxuXHQvKiogRGlzYWJsZXMgcGh5c2ljcyBtb3ZlbWVudCBmb3IgdGhpcyBub2RlICovXG5cdGZyZWV6ZSgpOiB2b2lkIHtcblx0XHR0aGlzLmZyb3plbiA9IHRydWU7XG5cdH1cblxuXHQvKiogUmVlbmFibGVzIHBoeXNpY3MgbW92ZW1lbnQgZm9yIHRoaXMgbm9kZSAqL1xuXHR1bmZyZWV6ZSgpOiB2b2lkIHtcblx0XHR0aGlzLmZyb3plbiA9IGZhbHNlO1xuXHR9XG5cbiAgICAvKiogUHJldmVudHMgdGhpcyBvYmplY3QgZnJvbSBwYXJ0aWNpcGF0aW5nIGluIGFsbCBjb2xsaXNpb25zIGFuZCB0cmlnZ2Vycy4gSXQgY2FuIHN0aWxsIG1vdmUuICovXG4gICAgZGlzYWJsZVBoeXNpY3MoKTogdm9pZCB7XG5cdFx0dGhpcy5hY3RpdmUgPSBmYWxzZTtcblx0fVxuXG4gICAgLyoqIEVuYWJsZXMgdGhpcyBvYmplY3QgdG8gcGFydGljaXBhdGUgaW4gY29sbGlzaW9ucyBhbmQgdHJpZ2dlcnMuIFRoaXMgaXMgb25seSBuZWNlc3NhcnkgaWYgZGlzYWJsZVBoeXNpY3Mgd2FzIGNhbGxlZCAqL1xuICAgIGVuYWJsZVBoeXNpY3MoKTogdm9pZCB7XG5cdFx0dGhpcy5hY3RpdmUgPSB0cnVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNldHMgdGhlIGNvbGxpZGVyIGZvciB0aGlzIEdhbWVOb2RlXG5cdCAqIEBwYXJhbSBjb2xsaWRlciBUaGUgbmV3IGNvbGxpZGVyIHRvIHVzZVxuXHQgKi9cblx0c2V0Q29sbGlzaW9uU2hhcGUoY29sbGlkZXI6IFNoYXBlKTogdm9pZCB7XG5cdFx0dGhpcy5jb2xsaXNpb25TaGFwZSA9IGNvbGxpZGVyO1xuXHRcdHRoaXMuY29sbGlzaW9uU2hhcGUuY2VudGVyLmNvcHkodGhpcy5wb3NpdGlvbik7XG5cdH1cblxuXHQvLyBAaW1wbGVtZW50ZWRcblx0LyoqXG4gICAgICogU2V0cyB0aGlzIG9iamVjdCB0byBiZSBhIHRyaWdnZXIgZm9yIGEgc3BlY2lmaWMgZ3JvdXBcbiAgICAgKiBAcGFyYW0gZ3JvdXAgVGhlIG5hbWUgb2YgdGhlIGdyb3VwIHRoYXQgYWN0aXZhdGVzIHRoZSB0cmlnZ2VyXG4gICAgICogQHBhcmFtIG9uRW50ZXIgVGhlIG5hbWUgb2YgdGhlIGV2ZW50IHRvIHNlbmQgd2hlbiB0aGlzIHRyaWdnZXIgaXMgYWN0aXZhdGVkXG4gICAgICogQHBhcmFtIG9uRXhpdCBUaGUgbmFtZSBvZiB0aGUgZXZlbnQgdG8gc2VuZCB3aGVuIHRoaXMgdHJpZ2dlciBzdG9wcyBiZWluZyBhY3RpdmF0ZWRcbiAgICAgKi9cbiAgICBzZXRUcmlnZ2VyKGdyb3VwOiBzdHJpbmcsIG9uRW50ZXI6IHN0cmluZywgb25FeGl0OiBzdHJpbmcpOiB2b2lkIHtcblx0XHQvLyBNYWtlIHRoaXMgb2JqZWN0IGEgdHJpZ2dlclxuXHRcdHRoaXMuaXNUcmlnZ2VyID0gdHJ1ZTtcblxuXHRcdC8vIEdldCB0aGUgbnVtYmVyIG9mIHRoZSBwaHlzaWNzIGxheWVyXG5cdFx0bGV0IGxheWVyTnVtYmVyID0gdGhpcy5zY2VuZS5nZXRQaHlzaWNzTWFuYWdlcigpLmdldEdyb3VwTnVtYmVyKGdyb3VwKTtcblxuXHRcdGlmKGxheWVyTnVtYmVyID09PSAwKXtcblx0XHRcdGNvbnNvbGUud2FybihgVHJpZ2dlciBmb3IgR2FtZU5vZGUgJHt0aGlzLmlkfSBub3Qgc2V0IC0gZ3JvdXAgXCIke2dyb3VwfVwiIHdhcyBub3QgcmVjb2duaXplZCBieSB0aGUgcGh5c2ljcyBtYW5hZ2VyLmApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEFkZCB0aGlzIHRvIHRoZSB0cmlnZ2VyIG1hc2tcblx0XHR0aGlzLnRyaWdnZXJNYXNrIHw9IGxheWVyTnVtYmVyO1xuXG5cdFx0Ly8gTGF5ZXIgbnVtYmVycyBhcmUgYml0cywgc28gZ2V0IHdoaWNoIGJpdCBpdCBpc1xuXHRcdGxldCBpbmRleCA9IE1hdGgubG9nMihsYXllck51bWJlcik7XG5cblx0XHQvLyBTZXQgdGhlIGV2ZW50IG5hbWVzXG5cdFx0dGhpcy50cmlnZ2VyRW50ZXJzW2luZGV4XSA9IG9uRW50ZXI7XG5cdFx0dGhpcy50cmlnZ2VyRXhpdHNbaW5kZXhdID0gb25FeGl0O1xuXHR9O1xuXG5cdC8vIEBpbXBsZW1lbnRlZFxuXHQvKipcblx0ICogQHBhcmFtIGdyb3VwIFRoZSBwaHlzaWNzIGdyb3VwIHRoaXMgbm9kZSBzaG91bGQgYmVsb25nIHRvXG5cdCAqL1xuXHRzZXRHcm91cChncm91cDogc3RyaW5nKTogdm9pZCB7XG5cdFx0dGhpcy5zY2VuZS5nZXRQaHlzaWNzTWFuYWdlcigpLnNldEdyb3VwKHRoaXMsIGdyb3VwKTtcblx0fVxuXG5cdC8vIEBpbXBsZW1lbmVkXG5cdGdldExhc3RWZWxvY2l0eSgpOiBWZWMyIHtcblx0XHRyZXR1cm4gdGhpcy5fdmVsb2NpdHk7XG5cdH1cblxuXHQvKi0tLS0tLS0tLS0gQUNUT1IgLS0tLS0tLS0tLSovXG5cdGdldCBhaSgpOiBBSSB8IEdvYXBBSSB7XG5cdFx0cmV0dXJuIHRoaXMuX2FpO1xuXHR9XG5cblx0c2V0IGFpKGFpOiBBSSB8IEdvYXBBSSkge1xuXHRcdGlmKCF0aGlzLl9haSl7XG5cdFx0XHQvLyBJZiB3ZSBoYXZlbid0IGJlZW4gcHJldmlvdXNseSBoYWQgYW4gYWksIHJlZ2lzdGVyIHVzIHdpdGggdGhlIGFpIG1hbmFnZXJcblx0XHRcdHRoaXMuc2NlbmUuZ2V0QUlNYW5hZ2VyKCkucmVnaXN0ZXJBY3Rvcih0aGlzKTtcblx0XHR9XG5cblx0XHR0aGlzLl9haSA9IGFpO1xuXHRcdHRoaXMuYWlBY3RpdmUgPSB0cnVlO1xuXHR9XG5cblx0Ly8gQGltcGxlbWVudGVkXG5cdGFkZEFJPFQgZXh0ZW5kcyBBSSB8IEdvYXBBST4oYWk6IHN0cmluZyB8IChuZXcgKCkgPT4gVCksIG9wdGlvbnM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCB0eXBlPzogbnVtYmVyKTogdm9pZCB7XG5cdFx0aWYoIXRoaXMuX2FpKXtcblx0XHRcdHRoaXMuc2NlbmUuZ2V0QUlNYW5hZ2VyKCkucmVnaXN0ZXJBY3Rvcih0aGlzKTtcblx0XHR9XG5cblx0XHRpZih0eXBlb2YgYWkgPT09IFwic3RyaW5nXCIpe1xuXHRcdFx0dGhpcy5fYWkgPSB0aGlzLnNjZW5lLmdldEFJTWFuYWdlcigpLmdlbmVyYXRlQUkoYWkpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLl9haSA9IG5ldyBhaSgpO1xuXHRcdH1cblxuXHRcdC8vIFF1ZXN0aW9uLCBob3cgbXVjaCBkbyB3ZSB3YW50IGRpZmZlcmVudCB0eXBlIG9mIEFJIHRvIGJlIGhhbmRsZWQgdGhlIHNhbWUsIGkuZS4gc2hvdWxkIEdvYXBBSSBhbmQgQUkgc2ltaWxhciBtZXRob2RzIGFuZCBzaWduYXR1cmVzIGZvciB0aGUgc2FrZSBvZiB1bml0eVxuXHRcdHRoaXMuX2FpLmluaXRpYWxpemVBSSh0aGlzLCBvcHRpb25zKTtcblxuXHRcdHRoaXMuYWlBY3RpdmUgPSB0cnVlO1xuXHR9XG5cblx0Ly8gQGltcGxlbWVudGVkXG5cdHNldEFJQWN0aXZlKGFjdGl2ZTogYm9vbGVhbiwgb3B0aW9uczogUmVjb3JkPHN0cmluZywgYW55Pik6IHZvaWQge1xuXHRcdHRoaXMuYWlBY3RpdmUgPSBhY3RpdmU7XG5cdFx0aWYodGhpcy5haUFjdGl2ZSl7XG5cdFx0XHR0aGlzLmFpLmFjdGl2YXRlKG9wdGlvbnMpO1xuXHRcdH1cblx0fVxuXG5cdC8qLS0tLS0tLS0tLSBUV0VFTkFCTEUgUFJPUEVSVElFUyAtLS0tLS0tLS0tKi9cblx0c2V0IHBvc2l0aW9uWCh2YWx1ZTogbnVtYmVyKSB7XG5cdFx0dGhpcy5wb3NpdGlvbi54ID0gdmFsdWU7XG5cdH1cblxuXHRzZXQgcG9zaXRpb25ZKHZhbHVlOiBudW1iZXIpIHtcblx0XHR0aGlzLnBvc2l0aW9uLnkgPSB2YWx1ZTtcblx0fVxuXG5cdGFic3RyYWN0IHNldCBzY2FsZVgodmFsdWU6IG51bWJlcik7XG5cblx0YWJzdHJhY3Qgc2V0IHNjYWxlWSh2YWx1ZTogbnVtYmVyKTtcblxuXHQvKi0tLS0tLS0tLS0gR0FNRSBOT0RFIC0tLS0tLS0tLS0qL1xuXHQvKipcblx0ICogU2V0cyB0aGUgc2NlbmUgZm9yIHRoaXMgb2JqZWN0LlxuXHQgKiBAcGFyYW0gc2NlbmUgVGhlIHNjZW5lIHRoaXMgb2JqZWN0IGJlbG9uZ3MgdG8uXG5cdCAqL1xuXHRzZXRTY2VuZShzY2VuZTogU2NlbmUpOiB2b2lkIHtcblx0XHR0aGlzLnNjZW5lID0gc2NlbmU7XG5cdH1cblxuXHQvKipcblx0ICogR2V0cyB0aGUgc2NlbmUgdGhpcyBvYmplY3QgaXMgaW4uIFxuXHQgKiBAcmV0dXJucyBUaGUgc2NlbmUgdGhpcyBvYmplY3QgYmVsb25ncyB0b1xuXHQqL1xuXHRnZXRTY2VuZSgpOiBTY2VuZSB7XG5cdFx0cmV0dXJuIHRoaXMuc2NlbmU7XG5cdH1cblxuXHQvKipcblx0ICogU2V0cyB0aGUgbGF5ZXIgb2YgdGhpcyBvYmplY3QuXG5cdCAqIEBwYXJhbSBsYXllciBUaGUgbGF5ZXIgdGhpcyBvYmplY3Qgd2lsbCBiZSBvbi5cblx0ICovXG5cdHNldExheWVyKGxheWVyOiBMYXllcik6IHZvaWQge1xuXHRcdHRoaXMubGF5ZXIgPSBsYXllcjtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRoZSBsYXllciB0aGlzIG9iamVjdCBpcyBvbi5cblx0ICogQHJldHVybnMgVGhpcyBsYXllciB0aGlzIG9iamVjdCBpcyBvbi5cblx0Ki9cblx0Z2V0TGF5ZXIoKTogTGF5ZXIge1xuXHRcdHJldHVybiB0aGlzLmxheWVyO1xuXHR9XG5cblx0LyoqIENhbGxlZCBpZiB0aGUgcG9zaXRpb24gdmVjdG9yIGlzIG1vZGlmaWVkIG9yIHJlcGxhY2VkICovXG5cdHByb3RlY3RlZCBwb3NpdGlvbkNoYW5nZWQoKTogdm9pZCB7XG5cdFx0aWYodGhpcy5jb2xsaXNpb25TaGFwZSl7XG5cdFx0XHRpZih0aGlzLmNvbGxpZGVyT2Zmc2V0KXtcblx0XHRcdFx0dGhpcy5jb2xsaXNpb25TaGFwZS5jZW50ZXIgPSB0aGlzLnBvc2l0aW9uLmNsb25lKCkuYWRkKHRoaXMuY29sbGlkZXJPZmZzZXQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5jb2xsaXNpb25TaGFwZS5jZW50ZXIgPSB0aGlzLnBvc2l0aW9uLmNsb25lKCk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHR9XG5cdH07XG5cblx0LyoqXG5cdCAqIFVwZGF0ZXMgdGhpcyBHYW1lTm9kZVxuXHQgKiBAcGFyYW0gZGVsdGFUIFRoZSB0aW1lc3RlcCBvZiB0aGUgdXBkYXRlLlxuXHQgKi9cblx0dXBkYXRlKGRlbHRhVDogbnVtYmVyKTogdm9pZCB7XG5cdFx0Ly8gRGVmZXIgZXZlbnQgaGFuZGxpbmcgdG8gQUkuXG5cdFx0d2hpbGUodGhpcy5yZWNlaXZlci5oYXNOZXh0RXZlbnQoKSl7XG5cdFx0XHR0aGlzLl9haS5oYW5kbGVFdmVudCh0aGlzLnJlY2VpdmVyLmdldE5leHRFdmVudCgpKTtcblx0XHR9XG5cdH1cblxuXHQvLyBAaW1wbGVtZW50ZWRcblx0ZGVidWdSZW5kZXIoKTogdm9pZCB7XG5cdFx0Ly8gRHJhdyB0aGUgcG9zaXRpb24gb2YgdGhpcyBHYW1lTm9kZVxuXHRcdERlYnVnLmRyYXdQb2ludCh0aGlzLnJlbGF0aXZlUG9zaXRpb24sIENvbG9yLkJMVUUpO1xuXG5cdFx0Ly8gSWYgdmVsb2NpdHkgaXMgbm90IHplcm8sIGRyYXcgYSB2ZWN0b3IgZm9yIGl0XG5cdFx0aWYodGhpcy5fdmVsb2NpdHkgJiYgIXRoaXMuX3ZlbG9jaXR5LmlzWmVybygpKXtcblx0XHRcdERlYnVnLmRyYXdSYXkodGhpcy5yZWxhdGl2ZVBvc2l0aW9uLCB0aGlzLl92ZWxvY2l0eS5jbG9uZSgpLnNjYWxlVG8oMjApLmFkZCh0aGlzLnJlbGF0aXZlUG9zaXRpb24pLCBDb2xvci5CTFVFKTtcblx0XHR9XG5cblx0XHQvLyBJZiB0aGlzIGhhcyBhIGNvbGxpZGVyLCBkcmF3IGl0XG5cdFx0aWYodGhpcy5jb2xsaXNpb25TaGFwZSl7XG5cdFx0XHRsZXQgY29sb3IgPSB0aGlzLmlzQ29sbGlkaW5nID8gQ29sb3IuUkVEIDogQ29sb3IuR1JFRU47XG5cblx0XHRcdGlmKHRoaXMuaXNUcmlnZ2VyKXtcblx0XHRcdFx0Y29sb3IgPSBDb2xvci5NQUdFTlRBO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRjb2xvci5hID0gMC4yO1xuXG5cdFx0XHRpZih0aGlzLmNvbGxpc2lvblNoYXBlIGluc3RhbmNlb2YgQUFCQil7XG5cdFx0XHRcdERlYnVnLmRyYXdCb3godGhpcy5pblJlbGF0aXZlQ29vcmRpbmF0ZXModGhpcy5jb2xsaXNpb25TaGFwZS5jZW50ZXIpLCB0aGlzLmNvbGxpc2lvblNoYXBlLmhhbGZTaXplLnNjYWxlZCh0aGlzLnNjZW5lLmdldFZpZXdTY2FsZSgpKSwgdHJ1ZSwgY29sb3IpO1xuXHRcdFx0fSBlbHNlIGlmKHRoaXMuY29sbGlzaW9uU2hhcGUgaW5zdGFuY2VvZiBDaXJjbGUpe1xuXHRcdFx0XHREZWJ1Zy5kcmF3Q2lyY2xlKHRoaXMuaW5SZWxhdGl2ZUNvb3JkaW5hdGVzKHRoaXMuY29sbGlzaW9uU2hhcGUuY2VudGVyKSwgdGhpcy5jb2xsaXNpb25TaGFwZS5odyp0aGlzLnNjZW5lLmdldFZpZXdTY2FsZSgpLCB0cnVlLCBjb2xvcik7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBlbnVtIFR3ZWVuYWJsZVByb3BlcnRpZXN7XG5cdHBvc1ggPSBcInBvc2l0aW9uWFwiLFxuXHRwb3NZID0gXCJwb3NpdGlvbllcIixcblx0c2NhbGVYID0gXCJzY2FsZVhcIixcblx0c2NhbGVZID0gXCJzY2FsZVlcIixcblx0cm90YXRpb24gPSBcInJvdGF0aW9uXCIsXG5cdGFscGhhID0gXCJhbHBoYVwiXG59IiwiaW1wb3J0IENhbnZhc05vZGUgZnJvbSBcIi4vQ2FudmFzTm9kZVwiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi9VdGlscy9Db2xvclwiO1xuXG4vKipcbiAqIFRoZSByZXByZXNlbnRhdGlvbiBvZiBhIGdhbWUgb2JqZWN0IHRoYXQgZG9lc24ndCByZWx5IG9uIGFueSByZXNvdXJjZXMgdG8gcmVuZGVyIC0gaXQgaXMgZHJhd24gdG8gdGhlIHNjcmVlbiBieSB0aGUgY2FudmFzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIEdyYXBoaWMgZXh0ZW5kcyBDYW52YXNOb2RlIHtcbiAgICAvKiogVGhlIGNvbG9yIG9mIHRoZSBHcmFwaGljICovXG4gICAgY29sb3I6IENvbG9yO1xuXG4gICAgY29uc3RydWN0b3IoKXtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jb2xvciA9IENvbG9yLlJFRDtcbiAgICB9XG5cbiAgICBnZXQgYWxwaGEoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5jb2xvci5hO1xuXHR9XG5cblx0c2V0IGFscGhhKGE6IG51bWJlcikge1xuXHRcdHRoaXMuY29sb3IuYSA9IGE7XG5cdH1cblxuICAgIC8vIEBkZXByZWNhdGVkXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgY29sb3Igb2YgdGhlIEdyYXBoaWMuIERFUFJFQ0FURURcbiAgICAgKiBAcGFyYW0gY29sb3IgVGhlIG5ldyBjb2xvciBvZiB0aGUgR3JhcGhpYy5cbiAgICAgKi9cbiAgICBzZXRDb2xvcihjb2xvcjogQ29sb3Ipe1xuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgfVxuXG4gICAgc2V0IGNvbG9yUihyOiBudW1iZXIpe1xuICAgICAgICB0aGlzLmNvbG9yLnIgPSByO1xuICAgIH1cblxuICAgIGdldCBjb2xvclIoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sb3IucjtcbiAgICB9XG5cbiAgICBzZXQgY29sb3JHKGc6IG51bWJlcil7XG4gICAgICAgIHRoaXMuY29sb3IuZyA9IGc7XG4gICAgfVxuXG4gICAgZ2V0IGNvbG9yRygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xvci5nO1xuICAgIH1cblxuICAgIHNldCBjb2xvckIoYjogbnVtYmVyKXtcbiAgICAgICAgdGhpcy5jb2xvci5iID0gYjtcbiAgICB9XG5cbiAgICBnZXQgY29sb3JCKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbG9yLmI7XG4gICAgfVxufSIsImV4cG9ydCBlbnVtIEdyYXBoaWNUeXBlIHtcblx0UE9JTlQgPSBcIlBPSU5UXCIsXG5cdFJFQ1QgPSBcIlJFQ1RcIixcblx0TElORSA9IFwiTElORVwiLFxuXHRQQVJUSUNMRSA9IFwiUEFSVElDTEVcIlxufSIsImltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IEdyYXBoaWMgZnJvbSBcIi4uL0dyYXBoaWNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGluZSBleHRlbmRzIEdyYXBoaWMge1xuICAgIHByb3RlY3RlZCBfZW5kOiBWZWMyO1xuICAgIHRoaWNrbmVzczogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3Ioc3RhcnQ6IFZlYzIsIGVuZDogVmVjMil7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc3RhcnQgPSBzdGFydDtcbiAgICAgICAgdGhpcy5lbmQgPSBlbmQ7XG4gICAgICAgIHRoaXMudGhpY2tuZXNzID0gMjtcblxuICAgICAgICAvLyBEb2VzIHRoaXMgcmVhbGx5IGhhdmUgYSBtZWFuaW5nIGZvciBsaW5lcz9cbiAgICAgICAgdGhpcy5zaXplLnNldCg1LCA1KTtcbiAgICB9XG5cbiAgICBzZXQgc3RhcnQocG9zOiBWZWMyKXtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvcztcbiAgICB9XG5cbiAgICBnZXQgc3RhcnQoKTogVmVjMiB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uO1xuICAgIH1cblxuICAgIHNldCBlbmQocG9zOiBWZWMyKXtcbiAgICAgICAgdGhpcy5fZW5kID0gcG9zO1xuICAgIH1cblxuICAgIGdldCBlbmQoKTogVmVjMiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmQ7XG4gICAgfVxufSIsImltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IFBvaW50IGZyb20gXCIuL1BvaW50XCI7XG5cbi8qKlxuICogLSBQb3NpdGlvbiBYXG4tIFZlbG9jaXR5IChzcGVlZCBhbmQgZGlyZWN0aW9uKSBYXG4tIENvbG9yIFhcbi0gTGlmZXRpbWUgXG4tIEFnZSBjYW4gYmUgaGFuZGxlZCBhcyBsaWZldGltZVxuLSBTaGFwZSBYXG4tIFNpemUgWFxuLSBUcmFuc3BhcmVuY3kgWFxuICovXG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFydGljbGUgZXh0ZW5kcyBQb2ludCB7XG4gICAgYWdlOiBudW1iZXI7XG5cbiAgICBpblVzZTogYm9vbGVhbjtcblxuICAgIHZlbDogVmVjMjtcblxuICAgIG1hc3M6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKHBvc2l0aW9uOiBWZWMyLCBzaXplOiBWZWMyLCBtYXNzOiBudW1iZXIpIHtcbiAgICAgICAgLy8gQXJlIHdlIG1ha2luZyB0aGlzIGEgY2lyY2xlP1xuICAgICAgICBzdXBlcihwb3NpdGlvbik7XG4gICAgICAgIHRoaXMuaW5Vc2UgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tYXNzID0gbWFzcztcbiAgICB9XG5cbiAgICBzZXRQYXJ0aWNsZUFjdGl2ZShsaWZldGltZTogbnVtYmVyLCBwb3NpdGlvbjogVmVjMikge1xuICAgICAgICB0aGlzLmFnZSA9IGxpZmV0aW1lO1xuICAgICAgICB0aGlzLmluVXNlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgIH1cblxuICAgIGRlY3JlbWVudEFnZShkZWNheTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuYWdlIC09IGRlY2F5O1xuICAgIH1cblxuICAgIHNldFBhcnRpY2xlSW5hY3RpdmUoKXtcbiAgICAgICAgdGhpcy5pblVzZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBzZXQgdmVsWSh5OiBudW1iZXIpe1xuICAgICAgICB0aGlzLnZlbC55ID0geTtcbiAgICB9XG5cbiAgICBnZXQgdmVsWSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy52ZWwueTtcbiAgICB9XG5cblxufSIsImltcG9ydCBHcmFwaGljIGZyb20gXCIuLi9HcmFwaGljXCI7XG5pbXBvcnQgVmVjMiBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL1ZlYzJcIjtcblxuLyoqIEEgYmFzaWMgcG9pbnQgdG8gYmUgZHJhd24gb24gdGhlIHNjcmVlbi4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvaW50IGV4dGVuZHMgR3JhcGhpYyB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwb3NpdGlvbjogVmVjMikge1xuICAgICAgICAvLyBBcmUgd2UgbWFraW5nIHRoaXMgYSBjaXJjbGU/XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgdGhpcy5zaXplLnNldCg1LCA1KTtcbiAgICB9XG59IiwiaW1wb3J0IEdyYXBoaWMgZnJvbSBcIi4uL0dyYXBoaWNcIjtcbmltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi8uLi9VdGlscy9Db2xvclwiO1xuXG4vKiogQSBiYXNpYyByZWN0YW5nbGUgdG8gYmUgZHJhd24gb24gdGhlIHNjcmVlbi4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlY3QgZXh0ZW5kcyBHcmFwaGljIHtcblxuICAgIC8qKiBUaGUgYm9yZGVyIGNvbG9yIG9mIHRoZSBSZWN0ICovXG4gICAgYm9yZGVyQ29sb3I6IENvbG9yO1xuXG4gICAgLyoqIFRoZSB3aWR0aCBvZiB0aGUgYm9yZGVyICovXG4gICAgYm9yZGVyV2lkdGg6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKHBvc2l0aW9uOiBWZWMyLCBzaXplOiBWZWMyKXtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgICB0aGlzLnNpemUgPSBzaXplO1xuICAgICAgICB0aGlzLmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIHRoaXMuYm9yZGVyV2lkdGggPSAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGJvcmRlciBjb2xvciBvZiB0aGlzIHJlY3RhbmdsZVxuICAgICAqIEBwYXJhbSBjb2xvciBUaGUgYm9yZGVyIGNvbG9yXG4gICAgICovXG4gICAgc2V0Qm9yZGVyQ29sb3IoY29sb3I6IENvbG9yKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYm9yZGVyQ29sb3IgPSBjb2xvcjtcbiAgICB9XG5cbiAgICAvLyBAZGVwcmVjYXRlZFxuICAgIGdldEJvcmRlckNvbG9yKCk6IENvbG9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9yZGVyQ29sb3I7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgYm9yZGVyIHdpZHRoIG9mIHRoaXMgcmVjdGFuZ2xlXG4gICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIGluIHBpeGVsc1xuICAgICAqL1xuICAgIHNldEJvcmRlcldpZHRoKHdpZHRoOiBudW1iZXIpe1xuICAgICAgICB0aGlzLmJvcmRlcldpZHRoID0gd2lkdGg7XG4gICAgfVxuXG4gICAgZ2V0Qm9yZGVyV2lkdGgoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9yZGVyV2lkdGg7XG4gICAgfVxufSIsImltcG9ydCBTcHJpdGUgZnJvbSBcIi4vU3ByaXRlXCI7XG5pbXBvcnQgQW5pbWF0aW9uTWFuYWdlciBmcm9tIFwiLi4vLi4vUmVuZGVyaW5nL0FuaW1hdGlvbnMvQW5pbWF0aW9uTWFuYWdlclwiO1xuaW1wb3J0IFNwcml0ZXNoZWV0IGZyb20gXCIuLi8uLi9EYXRhVHlwZXMvU3ByaXRlc2hlZXRcIjtcbmltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi9EYXRhVHlwZXMvVmVjMlwiO1xuXG4vKiogQW4gc3ByaXRlIHdpdGggc3BlY2lmaWVkIGFuaW1hdGlvbiBmcmFtZXMuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbmltYXRlZFNwcml0ZSBleHRlbmRzIFNwcml0ZSB7XG4gICAgLyoqIFRoZSBudW1iZXIgb2YgY29sdW1ucyBpbiB0aGlzIHNwcml0ZSBzaGVldCAqL1xuICAgIHByb3RlY3RlZCBudW1Db2xzOiBudW1iZXI7XG5cbiAgICBnZXQgY29scygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5udW1Db2xzO1xuICAgIH1cblxuICAgIC8qKiBUaGUgbnVtYmVyIG9mIHJvd3MgaW4gdGhpcyBzcHJpdGUgc2hlZXQgKi9cbiAgICBwcm90ZWN0ZWQgbnVtUm93czogbnVtYmVyO1xuXG4gICAgZ2V0IHJvd3MoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubnVtUm93cztcbiAgICB9XG5cbiAgICAvKiogVGhlIGFuaW1hdGlvbk1hbmFnZXIgZm9yIHRoaXMgc3ByaXRlICovXG4gICAgYW5pbWF0aW9uOiBBbmltYXRpb25NYW5hZ2VyO1xuXG4gICAgY29uc3RydWN0b3Ioc3ByaXRlc2hlZXQ6IFNwcml0ZXNoZWV0KXtcbiAgICAgICAgc3VwZXIoc3ByaXRlc2hlZXQubmFtZSk7XG4gICAgICAgIHRoaXMubnVtQ29scyA9IHNwcml0ZXNoZWV0LmNvbHVtbnM7XG4gICAgICAgIHRoaXMubnVtUm93cyA9IHNwcml0ZXNoZWV0LnJvd3M7XG5cbiAgICAgICAgLy8gU2V0IHRoZSBzaXplIG9mIHRoZSBzcHJpdGUgdG8gdGhlIHNwcml0ZSBzaXplIHNwZWNpZmllZCBieSB0aGUgc3ByaXRlc2hlZXRcbiAgICAgICAgdGhpcy5zaXplLnNldChzcHJpdGVzaGVldC5zcHJpdGVXaWR0aCwgc3ByaXRlc2hlZXQuc3ByaXRlSGVpZ2h0KTtcblxuICAgICAgICB0aGlzLmFuaW1hdGlvbiA9IG5ldyBBbmltYXRpb25NYW5hZ2VyKHRoaXMpO1xuXG4gICAgICAgIC8vIEFkZCB0aGUgYW5pbWF0aW9ucyB0byB0aGUgYW5pbWF0ZWQgc3ByaXRlXG4gICAgICAgIGZvcihsZXQgYW5pbWF0aW9uIG9mIHNwcml0ZXNoZWV0LmFuaW1hdGlvbnMpe1xuICAgICAgICAgICAgdGhpcy5hbmltYXRpb24uYWRkKGFuaW1hdGlvbi5uYW1lLCBhbmltYXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgaW1hZ2Ugb2Zmc2V0IGZvciB0aGUgY3VycmVudCBpbmRleCBvZiBhbmltYXRpb25cbiAgICAgKiBAcGFyYW0gaW5kZXggVGhlIGluZGV4IHdlJ3JlIGF0IGluIHRoZSBhbmltYXRpb25cbiAgICAgKiBAcmV0dXJucyBBIFZlYzIgY29udGFpbmluZyB0aGUgaW1hZ2Ugb2Zmc2V0XG4gICAgICovXG4gICAgZ2V0QW5pbWF0aW9uT2Zmc2V0KGluZGV4OiBudW1iZXIpOiBWZWMyIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMyKChpbmRleCAlIHRoaXMubnVtQ29scykgKiB0aGlzLnNpemUueCwgTWF0aC5mbG9vcihpbmRleCAvIHRoaXMubnVtQ29scykgKiB0aGlzLnNpemUueSk7XG4gICAgfVxufSIsImltcG9ydCBDYW52YXNOb2RlIGZyb20gXCIuLi9DYW52YXNOb2RlXCI7XG5pbXBvcnQgUmVzb3VyY2VNYW5hZ2VyIGZyb20gXCIuLi8uLi9SZXNvdXJjZU1hbmFnZXIvUmVzb3VyY2VNYW5hZ2VyXCI7XG5pbXBvcnQgVmVjMiBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL1ZlYzJcIjtcblxuLyoqXG4gKiBUaGUgcmVwcmVzZW50YXRpb24gb2YgYSBzcHJpdGUgLSBhbiBpbi1nYW1lIGltYWdlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNwcml0ZSBleHRlbmRzIENhbnZhc05vZGUge1xuICAgIC8qKiBUaGUgaWQgb2YgdGhlIGltYWdlIGZyb20gdGhlIHJlc291cmNlTWFuYWdlciAqL1xuICAgIGltYWdlSWQ6IHN0cmluZztcbiAgICAvKiogVGhlIG9mZnNldCBvZiB0aGUgc3ByaXRlIGluIGFuIGF0bGFzIGltYWdlICovXG4gICAgaW1hZ2VPZmZzZXQ6IFZlYzI7XG4gICAgLyoqIFdoZXRoZXIgb3Igbm90IHRoZSB4LWF4aXMgc2hvdWxkIGJlIGludmVydGVkIG9uIHJlbmRlciAqL1xuICAgIGludmVydFg6IGJvb2xlYW47XG4gICAgLyoqIFdoZXRoZXIgb3Igbm90IHRoZSB5LWF4aXMgc2hvdWxkIGJlIGludmVydGVkIG9uIHJlbmRlciAqL1xuICAgIGludmVydFk6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcihpbWFnZUlkOiBzdHJpbmcpe1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmltYWdlSWQgPSBpbWFnZUlkO1xuICAgICAgICBsZXQgaW1hZ2UgPSBSZXNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXRJbWFnZSh0aGlzLmltYWdlSWQpO1xuICAgICAgICB0aGlzLnNpemUgPSBuZXcgVmVjMihpbWFnZS53aWR0aCwgaW1hZ2UuaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5pbWFnZU9mZnNldCA9IFZlYzIuWkVSTztcbiAgICAgICAgdGhpcy5pbnZlcnRYID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaW52ZXJ0WSA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIG9mZnNldCBvZiB0aGUgc3ByaXRlIGZyb20gKDAsIDApIGluIHRoZSBpbWFnZSdzIGNvb3JkaW5hdGVzXG4gICAgICogQHBhcmFtIG9mZnNldCBUaGUgb2Zmc2V0IG9mIHRoZSBzcHJpdGUgZnJvbSAoMCwgMCkgaW4gaW1hZ2UgY29vcmRpbmF0ZXNcbiAgICAgKi9cbiAgICBzZXRJbWFnZU9mZnNldChvZmZzZXQ6IFZlYzIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pbWFnZU9mZnNldCA9IG9mZnNldDtcbiAgICB9XG59IiwiaW1wb3J0IFZlYzIgZnJvbSBcIi4uL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgVGlsZXNldCBmcm9tIFwiLi4vRGF0YVR5cGVzL1RpbGVzZXRzL1RpbGVzZXRcIjtcbmltcG9ydCB7IFRpbGVkVGlsZW1hcERhdGEsIFRpbGVkTGF5ZXJEYXRhIH0gZnJvbSBcIi4uL0RhdGFUeXBlcy9UaWxlc2V0cy9UaWxlZERhdGFcIlxuaW1wb3J0IENhbnZhc05vZGUgZnJvbSBcIi4vQ2FudmFzTm9kZVwiO1xuaW1wb3J0IFBoeXNpY3NNYW5hZ2VyIGZyb20gXCIuLi9QaHlzaWNzL1BoeXNpY3NNYW5hZ2VyXCI7XG5pbXBvcnQgU2hhcGUgZnJvbSBcIi4uL0RhdGFUeXBlcy9TaGFwZXMvU2hhcGVcIjtcbmltcG9ydCBBQUJCIGZyb20gXCIuLi9EYXRhVHlwZXMvU2hhcGVzL0FBQkJcIjtcblxuLyoqXG4gKiBUaGUgcmVwcmVzZW50YXRpb24gb2YgYSB0aWxlbWFwIC0gdGhpcyBjYW4gY29uc2lzdCBvZiBhIGNvbWJpbmF0aW9uIG9mIHRpbGVzZXRzIGluIG9uZSBsYXllclxuICovXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBUaWxlbWFwIGV4dGVuZHMgQ2FudmFzTm9kZSB7XG5cbiAgICAvKiogQW4gYXJyYXkgb2YgdGhlIHRpbGVzZXRzIHRoYXQgdGhpcyB0aWxlbWFwIHVzZXMgKi9cbiAgICBwcm90ZWN0ZWQgdGlsZXNldHM6IEFycmF5PFRpbGVzZXQ+O1xuICAgIC8qKiBUaGUgc2l6ZSBvZiBhIHRpbGUgaW4gdGhpcyB0aWxlbWFwICovXG4gICAgcHJvdGVjdGVkIHRpbGVTaXplOiBWZWMyO1xuICAgIC8qKiBBbiBhcnJheSBvZiB0aWxlIGRhdGEgKi9cbiAgICBwcm90ZWN0ZWQgZGF0YTogQXJyYXk8bnVtYmVyPjtcbiAgICAvKiogQW4gYXJyYXkgb2YgdGlsZSBjb2xsaXNpb24gZGF0YSAqL1xuICAgIHByb3RlY3RlZCBjb2xsaXNpb25NYXA6IEFycmF5PGJvb2xlYW4+O1xuICAgIC8qKiBUaGUgbmFtZSBvZiB0aGUgdGlsZW1hcCAqL1xuICAgIHByb3RlY3RlZCBfbmFtZTogc3RyaW5nO1xuICAgIC8qKiBUaGUgbnVtYmVyIG9mIGNvbHVtbnMgaW4gdGhlIHRpbGVtYXAgKi9cbiAgICBwcm90ZWN0ZWQgbnVtQ29sczogbnVtYmVyO1xuICAgIC8qKiBUaGUgbnVtYmVyIG9mIHJvd3MgaW4gdGhlIHRpbGVtYXAgKi9cbiAgICBwcm90ZWN0ZWQgbnVtUm93czogbnVtYmVyO1xuICAgIFxuXG4gICAgLy8gVE9ETzogTWFrZSB0aGlzIG5vIGxvbmdlciBiZSBzcGVjaWZpYyB0byBUaWxlZFxuICAgIGNvbnN0cnVjdG9yKHRpbGVtYXBEYXRhOiBUaWxlZFRpbGVtYXBEYXRhLCBsYXllcjogVGlsZWRMYXllckRhdGEsIHRpbGVzZXRzOiBBcnJheTxUaWxlc2V0Piwgc2NhbGU6IFZlYzIpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLnRpbGVzZXRzID0gdGlsZXNldHM7XG4gICAgICAgIHRoaXMudGlsZVNpemUgPSBuZXcgVmVjMigwLCAwKTtcbiAgICAgICAgdGhpcy5uYW1lID0gbGF5ZXIubmFtZTtcbiAgICAgICAgdGhpcy5udW1Db2xzID0gdGlsZW1hcERhdGEud2lkdGg7XG4gICAgICAgIHRoaXMubnVtUm93cyA9IHRpbGVtYXBEYXRhLmhlaWdodDtcblxuICAgICAgICBsZXQgdGlsZWNvdW50ID0gMDtcbiAgICAgICAgZm9yKGxldCB0aWxlc2V0IG9mIHRpbGVzZXRzKXtcbiAgICAgICAgICAgIHRpbGVjb3VudCArPSB0aWxlc2V0LmdldFRpbGVDb3VudCgpICsgMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY29sbGlzaW9uTWFwID0gbmV3IEFycmF5KHRpbGVjb3VudCk7XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbGxpc2lvbk1hcC5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICB0aGlzLmNvbGxpc2lvbk1hcFtpXSA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGVmZXIgcGFyc2luZyBvZiB0aGUgZGF0YSB0byBjaGlsZCBjbGFzc2VzIC0gdGhpcyBhbGxvd3MgZm9yIGlzb21ldHJpYyB2cy4gb3J0aG9ncmFwaGljIHRpbGVtYXBzIGFuZCBoYW5kbGluZyBvZiBUaWxlZCBkYXRhIG9yIG90aGVyIGRhdGFcbiAgICAgICAgdGhpcy5wYXJzZVRpbGVtYXBEYXRhKHRpbGVtYXBEYXRhLCBsYXllcik7XG4gICAgICAgIHRoaXMuc2NhbGUuc2V0KHNjYWxlLngsIHNjYWxlLnkpO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgZ2V0IG5hbWUoKTogc3RyaW5nIHsgcmV0dXJuIHRoaXMuX25hbWU7IH1cbiAgICBwdWJsaWMgc2V0IG5hbWUobmFtZTogc3RyaW5nKSB7IHRoaXMuX25hbWUgPSBuYW1lOyB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBkYXRhIHZhbHVlIG9mIHRoZSB0aWxlIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXhcbiAgICAgKiBAcGFyYW0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSB0aWxlXG4gICAgICogQHJldHVybnMgVGhlIGRhdGEgdmFsdWUgb2YgdGhlIHRpbGVcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0VGlsZShjb2w6IG51bWJlciwgcm93OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmdldFRpbGVJbmRleChjb2wsIHJvdyk7XG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHsgcmV0dXJuIC0xOyB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVtpbmRleF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGluZGV4IG9mIHRoZSB0aWxlIGluIHRoZSB0aWxlbWFwcyBiYWNraW5nIGFycmF5LlxuICAgICAqIEBwYXJhbSBwb3NpdGlvbiB0aGUgcG9zaXRpb24gaW4gcm93LWNvbHVtbiBmb3JtYXQgaW4gdGhlIGJhY2tpbmcgYXJyYXkgb2YgdGhlIHRpbGVtYXBcbiAgICAgKiBAcmV0dXJucyB0aGUgaW5kZXggb2YgcG9zaXRpb24gaW4gdGhlIHRpbGVtYXBcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0VGlsZUluZGV4KGNvbDogbnVtYmVyLCByb3c6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIGlmIChjb2wgPCAwIHx8IGNvbCA+PSB0aGlzLm51bUNvbHMgfHwgcm93IDwgMCB8fCByb3cgPj0gdGhpcy5udW1Sb3dzKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJvdyAqIHRoaXMubnVtQ29scyArIGNvbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgY29sdW1uIGFuZCByb3cgb2YgYSB0aWxlIGluIHRoZSB0aWxlbWFwIGZyb20gdGhlIGluZGV4IG9mIHRoZSB0aWxlXG4gICAgICogaW4gdGhlIGJhY2tpbmcgYXJyYXkuXG4gICAgICogQHBhcmFtIGluZGV4IHRoZSBpbmRleCBvZiB0aGUgdGlsZSBpbiB0aGUgYmFja2luZyBhcnJheVxuICAgICAqIEByZXR1cm4gYSBWZWMyIGNvbnRhaW5pbmcgdGhlIGNvbHVtbiBhbmQgcm93IGluZGljZXMgb2YgdGhlIHRpbGVcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0VGlsZUNvbFJvdyhpbmRleDogbnVtYmVyKTogVmVjMiB7XG4gICAgICAgIGxldCBjb2wgPSBpbmRleCAlIHRoaXMubnVtQ29scztcbiAgICAgICAgbGV0IHJvdyA9IE1hdGguZmxvb3IoaW5kZXggLyB0aGlzLm51bUNvbHMpO1xuICAgICAgICByZXR1cm4gbmV3IFZlYzIoY29sLCByb3cpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHRpbGUgYXQgdGhlIHNwZWNpZmllZCBwb3NpdGlvbiB0byB0aGUgZ2l2ZW4gdGlsZS5cbiAgICAgKiBAcGFyYW0gcG9zaXRpb24gdGhlIHJvdyBhbmQgY29sdW1uIG9mIHRoZSB0aWxlIGluIHRoZSBiYWNraW5nIGFycmF5XG4gICAgICogQHBhcmFtIHRpbGUgdGhlIG51bWJlciBvZiB0aGUgdGlsZSB0byBzZXRcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0VGlsZShjb2w6IG51bWJlciwgcm93OiBudW1iZXIsIHRpbGU6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmdldFRpbGVJbmRleChjb2wsIHJvdyk7XG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsgXG4gICAgICAgICAgICB0aGlzLmRhdGFbaW5kZXhdID0gdGlsZTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSB0aWxlc2V0cyBhc3NvY2lhdGVkIHdpdGggdGhpcyB0aWxlbWFwXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2YgYWxsIG9mIHRoZSB0aWxlc2V0cyBhc3NvY2FpdGVkIHdpdGggdGhpcyB0aWxlbWFwLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRUaWxlc2V0cygpOiBUaWxlc2V0W10ge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlc2V0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZGltZW5zaW9ucyBvZiB0aGUgdGlsZW1hcFxuICAgICAqIEByZXR1cm5zIEEgVmVjMiBjb250YWluaW5nIHRoZSBudW1iZXIgb2YgY29sdW1ucyBhbmQgdGhlIG51bWJlciBvZiByb3dzIGluIHRoZSB0aWxlbWFwLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXREaW1lbnNpb25zKCk6IFZlYzIge1xuICAgICAgICByZXR1cm4gbmV3IFZlYzIodGhpcy5udW1Db2xzLCB0aGlzLm51bVJvd3MpO1xuICAgIH1cblxuICAgIC8vIE1ldGhvZHMgZm9yIGdldHRpbmcgdGhlIHNpemUgb2YgYSB0aWxlXG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSByYXcgc2l6ZSBvZiB0aGUgdGlsZXMsIHdpdGhvdXQgYW55IHNjYWxpbmcgb3Igem9vbWluZy5cbiAgICAgKiBAcmV0dXJucyB0aGUgc2l6ZSBvZiB0aGUgdGlsZXMgaW4gdGhpcyB0aWxlbWFwXG4gICAgICovXG4gICAgcHVibGljIGdldFRpbGVTaXplKCk6IFZlYzIge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlU2l6ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgc2l6ZSBvZiB0aWxlcyBpbiB0aGlzIHRpbGVtYXAgYXMgdGhleSBhcHBlYXIgaW4gdGhlIGdhbWUgd29ybGQgYWZ0ZXIgc2NhbGluZ1xuICAgICAqIEByZXR1cm5zIEEgdmVjdG9yIGNvbnRhaW5pbmcgdGhlIHNpemUgb2YgdGlsZXMgaW4gdGhpcyB0aWxlbWFwIGFzIHRoZXkgYXBwZWFyIGluIHRoZSBnYW1lIHdvcmxkIGFmdGVyIHNjYWxpbmcuXG4gICAgICovXG4gICAgcHVibGljIGdldFNjYWxlZFRpbGVTaXplKCk6IFZlYzIge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRUaWxlU2l6ZSgpLnNjYWxlZCh0aGlzLnNjYWxlLngsIHRoaXMuc2NhbGUueSk7XG4gICAgfVxuICAgXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHRpbGUgYXQgdGhlIHNwZWNpZmllZCByb3cgYW5kIGNvbHVtbiBvZiB0aGUgdGlsZW1hcCBpcyBjb2xsaWRhYmxlXG4gICAgICogQHBhcmFtIGNvbCB0aGUgc3BlY2lmaWVkIGNvbHVtblxuICAgICAqIEBwYXJhbSByb3cgdGhlIHNwZWNpZmllZCByb3dcbiAgICAgKiBAcmV0dXJucyBBIGZsYWcgcmVwcmVzZW50aW5nIHdoZXRoZXIgb3Igbm90IHRoZSB0aWxlIGlzIGNvbGxpZGFibGUuXG4gICAgICovXG4gICAgcHVibGljIGlzVGlsZUNvbGxpZGFibGUoY29sOiBudW1iZXIsIHJvdzogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChjb2wgPCAwIHx8IGNvbCA+PSB0aGlzLm51bUNvbHMgfHwgcm93IDwgMCB8fCByb3cgPj0gdGhpcy5udW1Sb3dzKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY29sbGlzaW9uTWFwW3RoaXMuZ2V0VGlsZShjb2wsIHJvdyldO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhpcyB0aWxlbWFwIHRvIHRoZSBwaHlzaWNzIHN5c3RlbVxuICAgICAqL1xuICAgIHB1YmxpYyBhZGRQaHlzaWNzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmhhc1BoeXNpY3MgPSB0cnVlO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuZ3JvdXAgPSAtMTtcbiAgICAgICAgdGhpcy5zY2VuZS5nZXRQaHlzaWNzTWFuYWdlcigpLnJlZ2lzdGVyVGlsZW1hcCh0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSB4L3kgY29vcmRpbmF0ZXMgb2YgYSB0aWxlIG9uIHRoZSBzY3JlZW4gZnJvbSB0aGUgcG9zaXRpb24gb2YgdGhlIHRpbGUgaW4gdGhlIFxuICAgICAqIGJhY2tpbmcgYXJyYXkgb2YgdGhlIHRpbGVtYXAuXG4gICAgICogQHBhcmFtIHJvdyB0aGUgcm93IHBvc2l0aW9uIG9mIHRoZSB0aWxlIGluIHRoZSBiYWNraW5nIGFycmF5XG4gICAgICogQHBhcmFtIGNvbCB0aGUgY29sdW1uIHBvc2l0aW9uIG9mIHRoZSB0aWxlIGluIHRoZSBiYWNraW5nIGFycmF5XG4gICAgICogQHJldHVybnMgYSBWZWMyIGNvbnRhaW5pbmcgdGhlIHdvcmxkIHBvc2l0aW9uIG9mIHRoZSB0aWxlXG4gICAgICovXG4gICAgcHVibGljIGFic3RyYWN0IGdldFdvcmxkUG9zaXRpb24oY29sOiBudW1iZXIsIHJvdzogbnVtYmVyKTogVmVjMjtcbiAgICBcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSByb3cvY29sdW1uIHBvc2l0aW9uIG9mIGEgdGlsZSBpbiB0aGUgdGlsZW1hcCBmcm9tIHRoZSBzY3JlZW4gY29vcmRpbmF0ZXMgb2YgdGhlIHRpbGUuXG4gICAgICogQHBhcmFtIHggdGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgdGlsZSBvbiB0aGUgc2NyZWVuXG4gICAgICogQHBhcmFtIHkgdGhlIHktY29vcmRpbmF0ZSBvZiB0aGUgdGlsZSBvbiB0aGUgc2NyZWVuXG4gICAgICogQHJldHVybnMgYSBWZWMyIGNvbnRhaW5pbmcgdGhlIGNvbHVtbiBhbmQgcm93IHBvc2l0aW9uIG9mIHRoZSB0aWxlIGluIHRoZSB0aWxlbWFwXG4gICAgICovXG4gICAgcHVibGljIGFic3RyYWN0IGdldFRpbGVtYXBQb3NpdGlvbih4OiBudW1iZXIsIHk6IG51bWJlcik6IFZlYzI7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBjb2xsaXNpb24gc2hhcGUgZm9yIHRoZSBzcGVjaWZpZWQgdGlsZSBhdCB0aGUgc3BlY2lmaWVkIGNvbHVtbi9yb3cgaW4gdGhlIHRpbGVtYXBcbiAgICAgKiBAcGFyYW0gcm93IHRoZSByb3dcbiAgICAgKiBAcGFyYW0gY29sIHRoZSBjb2x1bW5cbiAgICAgKiBAcmV0dXJuIGEgbmV3IFNoYXBlIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGNvbGxpc2lvbiBzaGFwZSBvZiB0aGUgdGlsZVxuICAgICAqL1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRUaWxlQ29sbGlkZXIoY29sOiBudW1iZXIsIHJvdzogbnVtYmVyKTogU2hhcGU7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBjb2x1bW4gYW5kIHJvdyBwb3NpdGlvbiBvZiBmaXJzdCB0aWxlIGluIHRoZSByZWdpb24uIFRoaXMgbWV0aG9kIGdldHMgY2FsbGVkXG4gICAgICogd2hlbiByZW5kZXJpbmcgaXMgZG9uZSB0byBkZXRlcm1pbmUgd2hpY2ggdGlsZXMgc2hvdWxkIGJlIHJlbmRlcmVkIGluIHRoZSB2aWV3cG9ydC5cbiAgICAgKiBAcGFyYW0gdXBwZXJMZWZ0IHRoZSB1cHBlciBsZWZ0IGNvcm5lciBvZiB0aGUgcmVnaW9uXG4gICAgICogQHBhcmFtIGJvdHRvbVJpZ2h0IHRoZSBib3R0b20gcmlnaHQgY29ybmVyIG9mIHRoZSByZWdpb25cbiAgICAgKi9cbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0TWluQ29sUm93KHJlZ2lvbjogQUFCQik6IFZlYzI7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBjb2x1bW4gYW5kIHJvdyBwb3NpdGlvbiBvZiB0aGUgbGFzdCB0aWxlIGluIHRoZSByZWdpb24uIFRoaXMgbWV0aG9kIGdldHMgY2FsbGVkIFxuICAgICAqIHdoZW4gcmVuZGVyaW5nIGlzIGRvbmUgdG8gZGV0ZXJtaW5lIHdoaWNoIHRpbGVzIHNob3VsZCBiZSByZW5kZXJlZCBpbiB0aGUgdmlld3BvcnQuXG4gICAgICogQHBhcmFtIHVwcGVyTGVmdCB0aGUgdXBwZXIgbGVmdCBjb3JuZXIgb2YgdGhlIHJlZ2lvblxuICAgICAqIEBwYXJhbSBib3R0b21SaWdodCB0aGUgYm90dG9tIHJpZ2h0IGNvcm5lciBvZiB0aGUgcmVnaW9uXG4gICAgICovXG4gICAgcHVibGljIGFic3RyYWN0IGdldE1heENvbFJvdyhyZWdpb246IEFBQkIpOiBWZWMyO1xuXG4gICAgLyoqXG4gICAgICogU2V0cyB1cCB0aGUgdGlsZXNldCB1c2luZyB0aGUgZGF0YSBsb2FkZWQgZnJvbSBmaWxlXG4gICAgICogQHBhcmFtIHRpbGVtYXBEYXRhIFRoZSB0aWxlbWFwIGRhdGEgZnJvbSBmaWxlXG4gICAgICogQHBhcmFtIGxheWVyIFRoZSBsYXllciBkYXRhIGZyb20gZmlsZVxuICAgICAqL1xuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBwYXJzZVRpbGVtYXBEYXRhKHRpbGVtYXBEYXRhOiBUaWxlZFRpbGVtYXBEYXRhLCBsYXllcjogVGlsZWRMYXllckRhdGEpOiB2b2lkO1xufSIsImltcG9ydCBBQUJCIGZyb20gXCIuLi8uLi9EYXRhVHlwZXMvU2hhcGVzL0FBQkJcIjtcbmltcG9ydCBTaGFwZSBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL1NoYXBlcy9TaGFwZVwiO1xuaW1wb3J0IHsgVGlsZWRUaWxlbWFwRGF0YSwgVGlsZWRMYXllckRhdGEgfSBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL1RpbGVzZXRzL1RpbGVkRGF0YVwiO1xuaW1wb3J0IFZlYzIgZnJvbSBcIi4uLy4uL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgRGVidWcgZnJvbSBcIi4uLy4uL0RlYnVnL0RlYnVnXCI7XG5pbXBvcnQgQ29sb3IgZnJvbSBcIi4uLy4uL1V0aWxzL0NvbG9yXCI7XG5pbXBvcnQgVGlsZW1hcCBmcm9tIFwiLi4vVGlsZW1hcFwiO1xuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIElzb21ldHJpY1RpbGVtYXAgZXh0ZW5kcyBUaWxlbWFwIHtcbiAgICBwdWJsaWMgZ2V0TWluQ29sUm93KHJlZ2lvbjogQUFCQik6IFZlYzIge1xuICAgICAgICByZXR1cm4gbmV3IFZlYzIoMCwgMCk7XG4gICAgfVxuICAgIHB1YmxpYyBnZXRNYXhDb2xSb3cocmVnaW9uOiBBQUJCKTogVmVjMiB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjMih0aGlzLm51bUNvbHMsIHRoaXMubnVtUm93cyk7XG4gICAgfVxuXG4gICAgcHVibGljIG92ZXJyaWRlIGdldFdvcmxkUG9zaXRpb24oY29sOiBudW1iZXIsIHJvdzogbnVtYmVyKTogVmVjMiB8IG51bGwge1xuICAgICAgICBpZiAoY29sIDwgMCB8fCBjb2wgPiB0aGlzLm51bUNvbHMgfHwgcm93IDwgMCB8fCByb3cgPiB0aGlzLm51bVJvd3MpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGxldCB2cHggPSB0aGlzLnNjZW5lLmdldFZpZXdwb3J0KCkuZ2V0SGFsZlNpemUoKS54O1xuICAgICAgICBsZXQgeCA9IE1hdGguZmxvb3IodGhpcy5zY2FsZS54ICogdGhpcy50aWxlU2l6ZS54IC8gMiAqIChjb2wgLSByb3cpICsgdnB4KTtcbiAgICAgICAgbGV0IHkgPSBNYXRoLmZsb29yKHRoaXMuc2NhbGUueSAqIHRoaXMudGlsZVNpemUueSAvIDIgKiAoY29sICsgcm93KSk7XG4gICAgICAgIHJldHVybiBuZXcgVmVjMih4LCB5KTtcbiAgICB9XG4gICAgcHVibGljIG92ZXJyaWRlIGdldFRpbGVtYXBQb3NpdGlvbih4OiBudW1iZXIsIHk6IG51bWJlcik6IFZlYzIgfCBudWxsIHtcbiAgICAgICAgbGV0IHZweCA9IHRoaXMuc2NlbmUuZ2V0Vmlld3BvcnQoKS5nZXRIYWxmU2l6ZSgpLng7XG4gICAgICAgIGxldCBjb2wgPSBNYXRoLmZsb29yKCh4IC0gdnB4KSAvIHRoaXMuc2NhbGUueCAvIHRoaXMudGlsZVNpemUueCArIHkgLyB0aGlzLnNjYWxlLnkgLyB0aGlzLnRpbGVTaXplLnkpO1xuICAgICAgICBsZXQgcm93ID0gTWF0aC5mbG9vcih5IC8gdGhpcy5zY2FsZS55IC8gdGhpcy50aWxlU2l6ZS55IC0gKHggLSB2cHgpIC8gdGhpcy5zY2FsZS54IC8gdGhpcy50aWxlU2l6ZS54KTtcbiAgICAgICAgaWYgKGNvbCA8IDAgfHwgY29sID4gdGhpcy5udW1Db2xzIHx8IHJvdyA8IDAgfHwgcm93ID4gdGhpcy5udW1Sb3dzKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFZlYzIoY29sLCByb3cpO1xuICAgIH1cblxuXG4gICAgcHVibGljIG92ZXJyaWRlIGdldFRpbGVDb2xsaWRlcihjb2w6IG51bWJlciwgcm93OiBudW1iZXIpOiBTaGFwZSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgcGFyc2VUaWxlbWFwRGF0YSh0aWxlbWFwRGF0YTogVGlsZWRUaWxlbWFwRGF0YSwgbGF5ZXI6IFRpbGVkTGF5ZXJEYXRhKTogdm9pZCB7XG4gICAgICAgIC8vIFRoZSBzaXplIG9mIHRoZSB0aWxlbWFwIGluIGxvY2FsIHNwYWNlXG4gICAgICAgIHRoaXMubnVtQ29scyA9IHRpbGVtYXBEYXRhLndpZHRoO1xuICAgICAgICB0aGlzLm51bVJvd3MgPSB0aWxlbWFwRGF0YS5oZWlnaHQ7XG5cbiAgICAgICAgLy8gVGhlIHNpemUgb2YgdGlsZXNcbiAgICAgICAgdGhpcy50aWxlU2l6ZS5zZXQodGlsZW1hcERhdGEudGlsZXdpZHRoLCB0aWxlbWFwRGF0YS50aWxlaGVpZ2h0KTtcblxuICAgICAgICAvLyBUaGUgc2l6ZSBvZiB0aGUgdGlsZW1hcCBvbiB0aGUgY2FudmFzXG4gICAgICAgIHRoaXMuc2l6ZS5zZXQodGhpcy5udW1Db2xzICogdGhpcy50aWxlU2l6ZS54LCB0aGlzLm51bVJvd3MgKiB0aGlzLnRpbGVTaXplLnkpO1xuICAgICAgICB0aGlzLnBvc2l0aW9uLmNvcHkodGhpcy5zaXplLnNjYWxlZCgwLjUpKTtcbiAgICAgICAgdGhpcy5kYXRhID0gbGF5ZXIuZGF0YTtcbiAgICAgICAgdGhpcy52aXNpYmxlID0gbGF5ZXIudmlzaWJsZTtcblxuICAgICAgICAvLyBXaGV0aGVyIHRoZSB0aWxlbWFwIGlzIGNvbGxpZGFibGUgb3Igbm90XG4gICAgICAgIHRoaXMuaXNDb2xsaWRhYmxlID0gZmFsc2U7XG4gICAgICAgIGlmKGxheWVyLnByb3BlcnRpZXMpe1xuICAgICAgICAgICAgZm9yKGxldCBpdGVtIG9mIGxheWVyLnByb3BlcnRpZXMpe1xuICAgICAgICAgICAgICAgIGlmKGl0ZW0ubmFtZSA9PT0gXCJDb2xsaWRhYmxlXCIpe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ29sbGlkYWJsZSA9IGl0ZW0udmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IGFsbCB0aWxlcyBiZXNpZGVzIFwiZW1wdHk6IDBcIiB0byBiZSBjb2xsaWRhYmxlXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDE7IGkgPCB0aGlzLmNvbGxpc2lvbk1hcC5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxpc2lvbk1hcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcHVibGljIG92ZXJyaWRlIGRlYnVnUmVuZGVyKCk6IHZvaWQge1xuICAgICAgICBmb3IgKGxldCB0aWxlID0gMDsgdGlsZSA8IHRoaXMuZGF0YS5sZW5ndGg7IHRpbGUrKykge1xuICAgICAgICAgICAgbGV0IHBvcyA9IHRoaXMuZ2V0VGlsZUNvbFJvdyh0aWxlKTtcbiAgICAgICAgICAgIERlYnVnLmRyYXdQb2ludCh0aGlzLmdldFdvcmxkUG9zaXRpb24ocG9zLngsIHBvcy55KSwgQ29sb3IuQkxVRSk7XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IFRpbGVtYXAgZnJvbSBcIi4uL1RpbGVtYXBcIjtcbmltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IHsgVGlsZWRUaWxlbWFwRGF0YSwgVGlsZWRMYXllckRhdGEgfSBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL1RpbGVzZXRzL1RpbGVkRGF0YVwiO1xuaW1wb3J0IERlYnVnIGZyb20gXCIuLi8uLi9EZWJ1Zy9EZWJ1Z1wiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi8uLi9VdGlscy9Db2xvclwiO1xuaW1wb3J0IEFBQkIgZnJvbSBcIi4uLy4uL0RhdGFUeXBlcy9TaGFwZXMvQUFCQlwiO1xuXG4vKipcbiAqIFRoZSByZXByZXNlbnRhdGlvbiBvZiBhbiBvcnRob2dvbmFsIHRpbGVtYXAgLSBpLmUuIGEgdG9wIGRvd24gb3IgcGxhdGZvcm1lciB0aWxlbWFwXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9ydGhvZ29uYWxUaWxlbWFwIGV4dGVuZHMgVGlsZW1hcCB7XG5cbiAgICBwdWJsaWMgb3ZlcnJpZGUgZ2V0TWluQ29sUm93KHJlZ2lvbjogQUFCQik6IFZlYzIge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRUaWxlbWFwUG9zaXRpb24ocmVnaW9uLnRvcExlZnQueCwgcmVnaW9uLnRvcExlZnQueSk7XG4gICAgfVxuICAgIHB1YmxpYyBvdmVycmlkZSBnZXRNYXhDb2xSb3cocmVnaW9uOiBBQUJCKTogVmVjMiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFRpbGVtYXBQb3NpdGlvbihyZWdpb24uYm90dG9tUmlnaHQueCwgcmVnaW9uLmJvdHRvbVJpZ2h0LnkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvdmVycmlkZSBnZXRUaWxlbWFwUG9zaXRpb24oeDogbnVtYmVyLCB5OiBudW1iZXIpOiBWZWMyIHtcbiAgICAgICAgbGV0IGNvbCA9IE1hdGguZmxvb3IoeCAvIHRoaXMudGlsZVNpemUueCAvIHRoaXMuc2NhbGUueCk7XG4gICAgICAgIGxldCByb3cgPSBNYXRoLmZsb29yKHkgLyB0aGlzLnRpbGVTaXplLnkgLyB0aGlzLnNjYWxlLnkpO1xuICAgICAgICByZXR1cm4gbmV3IFZlYzIoY29sLCByb3cpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvdmVycmlkZSBnZXRXb3JsZFBvc2l0aW9uKGNvbDogbnVtYmVyLCByb3c6IG51bWJlcik6IFZlYzIge1xuICAgICAgICBsZXQgeCA9IGNvbCAqIHRoaXMudGlsZVNpemUueCAqIHRoaXMuc2NhbGUueDtcbiAgICAgICAgbGV0IHkgPSByb3cgKiB0aGlzLnRpbGVTaXplLnkgKiB0aGlzLnNjYWxlLnk7XG4gICAgICAgIHJldHVybiBuZXcgVmVjMih4LCB5KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb3ZlcnJpZGUgZ2V0VGlsZUNvbGxpZGVyKGNvbDogbnVtYmVyLCByb3c6IG51bWJlcik6IEFBQkIge1xuICAgICAgICBsZXQgdGlsZVNpemUgPSB0aGlzLmdldFNjYWxlZFRpbGVTaXplKCk7XG5cbiAgICAgICAgbGV0IGNlbnRlclggPSBjb2wgKiB0aWxlU2l6ZS54ICsgdGlsZVNpemUueCAvIDI7XG4gICAgICAgIGxldCBjZW50ZXJZID0gcm93ICogdGlsZVNpemUueSArIHRpbGVTaXplLnkgLyAyO1xuXG4gICAgICAgIGxldCBjZW50ZXIgPSBuZXcgVmVjMihjZW50ZXJYLCBjZW50ZXJZKTtcbiAgICAgICAgbGV0IGhhbGZTaXplID0gdGlsZVNpemUuc2NhbGVkKDAuNSk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBBQUJCKGNlbnRlciwgaGFsZlNpemUpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBwYXJzZVRpbGVtYXBEYXRhKHRpbGVtYXBEYXRhOiBUaWxlZFRpbGVtYXBEYXRhLCBsYXllcjogVGlsZWRMYXllckRhdGEpOiB2b2lkIHtcbiAgICAgICAgLy8gVGhlIHNpemUgb2YgdGhlIHRpbGVtYXAgaW4gbG9jYWwgc3BhY2VcbiAgICAgICAgdGhpcy5udW1Db2xzID0gdGlsZW1hcERhdGEud2lkdGg7XG4gICAgICAgIHRoaXMubnVtUm93cyA9IHRpbGVtYXBEYXRhLmhlaWdodDtcblxuICAgICAgICAvLyBUaGUgc2l6ZSBvZiB0aWxlc1xuICAgICAgICB0aGlzLnRpbGVTaXplLnNldCh0aWxlbWFwRGF0YS50aWxld2lkdGgsIHRpbGVtYXBEYXRhLnRpbGVoZWlnaHQpO1xuXG4gICAgICAgIC8vIFRoZSBzaXplIG9mIHRoZSB0aWxlbWFwIG9uIHRoZSBjYW52YXNcbiAgICAgICAgdGhpcy5zaXplLnNldCh0aGlzLm51bUNvbHMgKiB0aGlzLnRpbGVTaXplLngsIHRoaXMubnVtUm93cyAqIHRoaXMudGlsZVNpemUueSk7XG4gICAgICAgIHRoaXMucG9zaXRpb24uY29weSh0aGlzLnNpemUuc2NhbGVkKDAuNSkpO1xuICAgICAgICB0aGlzLmRhdGEgPSBsYXllci5kYXRhO1xuICAgICAgICB0aGlzLnZpc2libGUgPSBsYXllci52aXNpYmxlO1xuXG4gICAgICAgIC8vIFdoZXRoZXIgdGhlIHRpbGVtYXAgaXMgY29sbGlkYWJsZSBvciBub3RcbiAgICAgICAgdGhpcy5pc0NvbGxpZGFibGUgPSBmYWxzZTtcbiAgICAgICAgaWYobGF5ZXIucHJvcGVydGllcyl7XG4gICAgICAgICAgICBmb3IobGV0IGl0ZW0gb2YgbGF5ZXIucHJvcGVydGllcyl7XG4gICAgICAgICAgICAgICAgaWYoaXRlbS5uYW1lID09PSBcIkNvbGxpZGFibGVcIil7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDb2xsaWRhYmxlID0gaXRlbS52YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBTZXQgYWxsIHRpbGVzIGJlc2lkZXMgXCJlbXB0eTogMFwiIHRvIGJlIGNvbGxpZGFibGVcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMTsgaSA8IHRoaXMuY29sbGlzaW9uTWFwLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGlzaW9uTWFwW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEBvdmVycmlkZVxuICAgIHVwZGF0ZShkZWx0YVQ6IG51bWJlcik6IHZvaWQge31cblxuICAgIC8vIEBvdmVycmlkZVxuICAgIHB1YmxpYyBvdmVycmlkZSBkZWJ1Z1JlbmRlcigpe1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNyID0gdGhpcy5nZXRUaWxlQ29sUm93KGkpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDb2xsaWRhYmxlICYmIHRoaXMuaXNUaWxlQ29sbGlkYWJsZShjci54LCBjci55KSkge1xuICAgICAgICAgICAgICAgIGxldCBib3ggPSB0aGlzLmdldFRpbGVDb2xsaWRlcihjci54LCBjci55KTtcbiAgICAgICAgICAgICAgICBEZWJ1Zy5kcmF3Qm94KHRoaXMuaW5SZWxhdGl2ZUNvb3JkaW5hdGVzKGJveC5jZW50ZXIpLCBib3guaGFsZlNpemUuc2NhbGUodGhpcy5zY2VuZS5nZXRWaWV3U2NhbGUoKSksIGZhbHNlLCBDb2xvci5CTFVFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgQUFCQiBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL1NoYXBlcy9BQUJCXCI7XG5pbXBvcnQgU2hhcGUgZnJvbSBcIi4uLy4uL0RhdGFUeXBlcy9TaGFwZXMvU2hhcGVcIjtcbmltcG9ydCB7IFRpbGVkVGlsZW1hcERhdGEsIFRpbGVkTGF5ZXJEYXRhIH0gZnJvbSBcIi4uLy4uL0RhdGFUeXBlcy9UaWxlc2V0cy9UaWxlZERhdGFcIjtcbmltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IERlYnVnIGZyb20gXCIuLi8uLi9EZWJ1Zy9EZWJ1Z1wiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi8uLi9VdGlscy9Db2xvclwiO1xuaW1wb3J0IE1hdGhVdGlscyBmcm9tIFwiLi4vLi4vVXRpbHMvTWF0aFV0aWxzXCI7XG5pbXBvcnQgeyBHcmFwaGljVHlwZSB9IGZyb20gXCIuLi9HcmFwaGljcy9HcmFwaGljVHlwZXNcIjtcbmltcG9ydCBUaWxlbWFwIGZyb20gXCIuLi9UaWxlbWFwXCI7XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RhZ2dlcmVkSXNvbWV0cmljVGlsZW1hcCBleHRlbmRzIFRpbGVtYXAge1xuXG4gICAgcHVibGljIG92ZXJyaWRlIGdldFRpbGVtYXBQb3NpdGlvbih4OiBudW1iZXIsIHk6IG51bWJlcik6IFZlYzIge1xuICAgICAgICBsZXQgY29sID0geCAvIHRoaXMudGlsZVNpemUueCAvIHRoaXMuc2NhbGUueDtcbiAgICAgICAgbGV0IHJvdyA9IE1hdGguZmxvb3IoeSAvIHRoaXMudGlsZVNpemUueSAvIHRoaXMuc2NhbGUueSAqIDIpO1xuICAgICAgICBpZiAocm93ICUgMiAhPT0gMCkge1xuICAgICAgICAgICAgY29sID0gKHggLSB0aGlzLnRpbGVTaXplLnggLyB0aGlzLnNjYWxlLnggLyAyKSAvIHRoaXMudGlsZVNpemUueCAvIHRoaXMuc2NhbGUueDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFZlYzIoTWF0aC5mbG9vcihjb2wpLCByb3cpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvdmVycmlkZSBnZXRXb3JsZFBvc2l0aW9uKGNvbDogbnVtYmVyLCByb3c6IG51bWJlcik6IFZlYzIge1xuICAgICAgICBsZXQgeCA9IGNvbCAqIHRoaXMudGlsZVNpemUueCAqIHRoaXMuc2NhbGUueDtcbiAgICAgICAgbGV0IHkgPSByb3cgKiB0aGlzLnRpbGVTaXplLnkgLyAyICogdGhpcy5zY2FsZS55O1xuICAgICAgICBpZiAocm93ICUgMiAhPT0gMCkge1xuICAgICAgICAgICAgeCArPSB0aGlzLnRpbGVTaXplLnggKiB0aGlzLnNjYWxlLnggLyAyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgVmVjMihNYXRoLmZsb29yKHgpLCBNYXRoLmZsb29yKHkpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb3ZlcnJpZGUgZ2V0VGlsZUNvbGxpZGVyKGNvbDogbnVtYmVyLCByb3c6IG51bWJlcik6IEFBQkIge1xuICAgICAgICBcbiAgICAgICAgbGV0IHRpbGVTaXplID0gdGhpcy5nZXRTY2FsZWRUaWxlU2l6ZSgpO1xuXG4gICAgICAgIGxldCBjZW50ZXJYID0gY29sICogdGlsZVNpemUueCArIHRpbGVTaXplLnggLyAyXG4gICAgICAgIGxldCBjZW50ZXJZID0gcm93ICogdGlsZVNpemUueSAvIDIgKyB0aWxlU2l6ZS55ICsgdGlsZVNpemUueSAvIDI7XG4gICAgICAgIGlmIChyb3cgJSAyICE9PSAwKSB7XG4gICAgICAgICAgICBjZW50ZXJYICs9IHRpbGVTaXplLnggLyAyO1xuICAgICAgICB9IFxuXG4gICAgICAgIGxldCBjZW50ZXIgPSBuZXcgVmVjMihjZW50ZXJYLCBjZW50ZXJZKTtcbiAgICAgICAgbGV0IGhhbGZTaXplID0gdGlsZVNpemUuc2NhbGVkKDAuNSk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBBQUJCKGNlbnRlciwgaGFsZlNpemUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvdmVycmlkZSBnZXRNaW5Db2xSb3cocmVnaW9uOiBBQUJCKTogVmVjMiB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjMigwLCAwKTtcbiAgICB9ICAgXG5cbiAgICBwdWJsaWMgb3ZlcnJpZGUgZ2V0TWF4Q29sUm93KHJlZ2lvbjogQUFCQik6IFZlYzIge1xuICAgICAgICByZXR1cm4gbmV3IFZlYzIodGhpcy5udW1Db2xzLCB0aGlzLm51bVJvd3MpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBwYXJzZVRpbGVtYXBEYXRhKHRpbGVtYXBEYXRhOiBUaWxlZFRpbGVtYXBEYXRhLCBsYXllcjogVGlsZWRMYXllckRhdGEpOiB2b2lkIHtcbiAgICAgICAgLy8gVGhlIHNpemUgb2YgdGhlIHRpbGVtYXAgaW4gbG9jYWwgc3BhY2VcbiAgICAgICAgdGhpcy5udW1Db2xzID0gdGlsZW1hcERhdGEud2lkdGg7XG4gICAgICAgIHRoaXMubnVtUm93cyA9IHRpbGVtYXBEYXRhLmhlaWdodDtcblxuICAgICAgICAvLyBUaGUgc2l6ZSBvZiB0aWxlc1xuICAgICAgICB0aGlzLnRpbGVTaXplLnNldCh0aWxlbWFwRGF0YS50aWxld2lkdGgsIHRpbGVtYXBEYXRhLnRpbGVoZWlnaHQpO1xuXG4gICAgICAgIC8vIFRoZSBzaXplIG9mIHRoZSB0aWxlbWFwIG9uIHRoZSBjYW52YXNcbiAgICAgICAgdGhpcy5zaXplLnNldCh0aGlzLm51bUNvbHMgKiB0aGlzLnRpbGVTaXplLngsIHRoaXMubnVtUm93cyAqIHRoaXMudGlsZVNpemUueSk7XG4gICAgICAgIHRoaXMucG9zaXRpb24uY29weSh0aGlzLnNpemUuc2NhbGVkKDAuNSkpO1xuICAgICAgICB0aGlzLmRhdGEgPSBsYXllci5kYXRhO1xuICAgICAgICB0aGlzLnZpc2libGUgPSBsYXllci52aXNpYmxlO1xuXG4gICAgICAgIC8vIFdoZXRoZXIgdGhlIHRpbGVtYXAgaXMgY29sbGlkYWJsZSBvciBub3RcbiAgICAgICAgdGhpcy5pc0NvbGxpZGFibGUgPSBmYWxzZTtcbiAgICAgICAgaWYobGF5ZXIucHJvcGVydGllcyl7XG4gICAgICAgICAgICBmb3IobGV0IGl0ZW0gb2YgbGF5ZXIucHJvcGVydGllcyl7XG4gICAgICAgICAgICAgICAgaWYoaXRlbS5uYW1lID09PSBcIkNvbGxpZGFibGVcIil7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDb2xsaWRhYmxlID0gaXRlbS52YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBTZXQgYWxsIHRpbGVzIGJlc2lkZXMgXCJlbXB0eTogMFwiIHRvIGJlIGNvbGxpZGFibGVcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMTsgaSA8IHRoaXMuY29sbGlzaW9uTWFwLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGlzaW9uTWFwW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgb3ZlcnJpZGUgZGVidWdSZW5kZXIoKTogdm9pZCB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcmMgPSB0aGlzLmdldFRpbGVDb2xSb3coaSk7XG4gICAgICAgICAgICBsZXQgYm94ID0gdGhpcy5nZXRUaWxlQ29sbGlkZXIocmMueCwgcmMueSk7XG4gICAgICAgICAgICBEZWJ1Zy5kcmF3Qm94KHRoaXMuaW5SZWxhdGl2ZUNvb3JkaW5hdGVzKGJveC5jZW50ZXIpLCBib3guaGFsZlNpemUuc2NhbGUodGhpcy5zY2VuZS5nZXRWaWV3U2NhbGUoKSksIGZhbHNlLCBDb2xvci5CTFVFKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgQ2FudmFzTm9kZSBmcm9tIFwiLi9DYW52YXNOb2RlXCI7XG5pbXBvcnQgQ29sb3IgZnJvbSBcIi4uL1V0aWxzL0NvbG9yXCI7XG5pbXBvcnQgVmVjMiBmcm9tIFwiLi4vRGF0YVR5cGVzL1ZlYzJcIjtcbmltcG9ydCBJbnB1dCBmcm9tIFwiLi4vSW5wdXQvSW5wdXRcIjtcblxuLyoqXG4gKiBUaGUgcmVwcmVzZW50YXRpb24gb2YgYSBVSUVsZW1lbnQgLSB0aGUgcGFyZW50IGNsYXNzIG9mIHRoaW5ncyBsaWtlIGJ1dHRvbnNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgVUlFbGVtZW50IGV4dGVuZHMgQ2FudmFzTm9kZSB7XG5cdC8vIFN0eWxlIGF0dHJpYnV0ZXMgLSBUT0RPIC0gYWJzdHJhY3QgdGhpcyBpbnRvIGEgc3R5bGUgb2JqZWN0L2ludGVyZmFjZVxuXHQvKiogVGhlIGJhY2tnb3VuZCBjb2xvciAqL1xuXHRiYWNrZ3JvdW5kQ29sb3I6IENvbG9yO1xuXHQvKiogVGhlIGJvcmRlciBjb2xvciAqL1xuXHRib3JkZXJDb2xvcjogQ29sb3I7XG5cdC8qKiBUaGUgYm9yZGVyIHJhZGl1cyAqL1xuXHRib3JkZXJSYWRpdXM6IG51bWJlcjtcblx0LyoqIFRoZSBib3JkZXIgd2lkdGggKi9cblx0Ym9yZGVyV2lkdGg6IG51bWJlcjtcblx0LyoqIFRoZSBwYWRkaW5nICovXG5cdHBhZGRpbmc6IFZlYzI7XG5cblx0Ly8gRXZlbnRBdHRyaWJ1dGVzXG5cdC8qKiBUaGUgcmVhY3Rpb24gb2YgdGhpcyBVSUVsZW1lbnQgb24gYSBjbGljayAqL1xuXHRvbkNsaWNrOiBGdW5jdGlvbjtcblx0LyoqIFRoZSBldmVudCBwcm9wYWdhdGVkIG9uIGNsaWNrICovXG5cdG9uQ2xpY2tFdmVudElkOiBzdHJpbmc7XG5cdC8qKiBUaGUgcmVhY3Rpb24gdG8gdGhlIHJlbGVhc2Ugb2YgYSBjbGljayAqL1xuXHRvblJlbGVhc2U6IEZ1bmN0aW9uO1xuXHQvKiogVGhlIGV2ZW50IHByb3BhZ2F0ZWQgb24gdGhlIHJlbGVhc2Ugb2YgYSBjbGljayAqL1xuXHRvblJlbGVhc2VFdmVudElkOiBzdHJpbmc7XG5cdC8qKiBUaGUgcmVhY3Rpb24gd2hlbiBhIG1vdXNlIGVudGVycyB0aGlzIFVJRWxlbWVudCAqL1xuXHRvbkVudGVyOiBGdW5jdGlvbjtcblx0LyoqIFRoZSBldmVudCBwcm9wYWdhdGVkIHdoZW4gYSBtb3VzZSBlbnRlcnMgdGhpcyBVSUVsZW1lbnQgKi9cblx0b25FbnRlckV2ZW50SWQ6IHN0cmluZztcblx0LyoqIFRoZSByZWFjdGlvbiB3aGVuIGEgbW91c2UgbGVhdmVzIHRoaXMgVUlFbGVtZW50ICovXG5cdG9uTGVhdmU6IEZ1bmN0aW9uO1xuXHQvKiogVGhlIGV2ZW50IHByb3BvZ2F0ZWQgd2hlbiBhIG1vdXNlIGxlYXZlcyB0aGlzIFVJRWxlbWVudCAqL1xuXHRvbkxlYXZlRXZlbnRJZDogc3RyaW5nO1xuXG5cdC8qKiBXaGV0aGVyIG9yIG5vdCB0aGlzIFVJRWxlbWVudCBpcyBjdXJyZW50bHkgY2xpY2tlZCBvbiAqL1xuXHRwcm90ZWN0ZWQgaXNDbGlja2VkOiBib29sZWFuO1xuXHQvKiogV2hldGhlciBvciBub3QgdGhpcyBVSUVsZW1lbnQgaXMgY3VycmVudGx5IGhvdmVyZWQgb3ZlciAqL1xuXHRwcm90ZWN0ZWQgaXNFbnRlcmVkOiBib29sZWFuO1xuXG5cdGNvbnN0cnVjdG9yKHBvc2l0aW9uOiBWZWMyKXtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcblx0XHRcblx0XHR0aGlzLmJhY2tncm91bmRDb2xvciA9IG5ldyBDb2xvcigwLCAwLCAwLCAwKTtcblx0XHR0aGlzLmJvcmRlckNvbG9yID0gbmV3IENvbG9yKDAsIDAsIDAsIDApO1xuXHRcdHRoaXMuYm9yZGVyUmFkaXVzID0gNTtcblx0XHR0aGlzLmJvcmRlcldpZHRoID0gMTtcblx0XHR0aGlzLnBhZGRpbmcgPSBWZWMyLlpFUk87XG5cblx0XHR0aGlzLm9uQ2xpY2sgPSBudWxsO1xuXHRcdHRoaXMub25DbGlja0V2ZW50SWQgPSBudWxsO1xuXHRcdHRoaXMub25SZWxlYXNlID0gbnVsbDtcblx0XHR0aGlzLm9uUmVsZWFzZUV2ZW50SWQgPSBudWxsO1xuXG5cdFx0dGhpcy5vbkVudGVyID0gbnVsbDtcblx0XHR0aGlzLm9uRW50ZXJFdmVudElkID0gbnVsbDtcblx0XHR0aGlzLm9uTGVhdmUgPSBudWxsO1xuXHRcdHRoaXMub25MZWF2ZUV2ZW50SWQgPSBudWxsO1xuXG5cdFx0dGhpcy5pc0NsaWNrZWQgPSBmYWxzZTtcblx0XHR0aGlzLmlzRW50ZXJlZCA9IGZhbHNlO1xuXHR9XG5cblx0Ly8gQGRlcHJlY2F0ZWRcblx0c2V0QmFja2dyb3VuZENvbG9yKGNvbG9yOiBDb2xvcik6IHZvaWQge1xuXHRcdHRoaXMuYmFja2dyb3VuZENvbG9yID0gY29sb3I7XG5cdH1cblxuXHQvLyBAZGVwcmVjYXRlZFxuXHRzZXRQYWRkaW5nKHBhZGRpbmc6IFZlYzIpOiB2b2lkIHtcblx0XHR0aGlzLnBhZGRpbmcuY29weShwYWRkaW5nKTtcblx0fVxuXG5cdHVwZGF0ZShkZWx0YVQ6IG51bWJlcik6IHZvaWQge1xuXHRcdHN1cGVyLnVwZGF0ZShkZWx0YVQpO1xuXG5cdFx0Ly8gU2VlIG9mIHRoaXMgb2JqZWN0IHdhcyBqdXN0IGNsaWNrZWRcblx0XHRpZihJbnB1dC5pc01vdXNlSnVzdFByZXNzZWQoKSl7XG5cdFx0XHRsZXQgY2xpY2tQb3MgPSBJbnB1dC5nZXRNb3VzZVByZXNzUG9zaXRpb24oKTtcblx0XHRcdGlmKHRoaXMuY29udGFpbnMoY2xpY2tQb3MueCwgY2xpY2tQb3MueSkgJiYgdGhpcy52aXNpYmxlICYmICF0aGlzLmxheWVyLmlzSGlkZGVuKCkpe1xuXHRcdFx0XHR0aGlzLmlzQ2xpY2tlZCA9IHRydWU7XG5cblx0XHRcdFx0aWYodGhpcy5vbkNsaWNrICE9PSBudWxsKXtcblx0XHRcdFx0XHR0aGlzLm9uQ2xpY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZih0aGlzLm9uQ2xpY2tFdmVudElkICE9PSBudWxsKXtcblx0XHRcdFx0XHRsZXQgZGF0YSA9IHt9O1xuXHRcdFx0XHRcdHRoaXMuZW1pdHRlci5maXJlRXZlbnQodGhpcy5vbkNsaWNrRXZlbnRJZCwgZGF0YSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBJZiB0aGUgbW91c2Ugd2Fzbid0IGp1c3QgcHJlc3NlZCwgdGhlbiB3ZSBkZWZpbml0ZWx5IHdlcmVuJ3QgY2xpY2tlZFxuXHRcdGlmKCFJbnB1dC5pc01vdXNlUHJlc3NlZCgpKXtcblx0XHRcdGlmKHRoaXMuaXNDbGlja2VkKXtcblx0XHRcdFx0dGhpcy5pc0NsaWNrZWQgPSBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDaGVjayBpZiB0aGUgbW91c2UgaXMgaG92ZXJpbmcgb3ZlciB0aGlzIGVsZW1lbnRcblx0XHRsZXQgbW91c2VQb3MgPSBJbnB1dC5nZXRNb3VzZVBvc2l0aW9uKCk7XG5cdFx0aWYobW91c2VQb3MgJiYgdGhpcy5jb250YWlucyhtb3VzZVBvcy54LCBtb3VzZVBvcy55KSl7XG5cdFx0XHR0aGlzLmlzRW50ZXJlZCA9IHRydWU7XG5cblx0XHRcdGlmKHRoaXMub25FbnRlciAhPT0gbnVsbCl7XG5cdFx0XHRcdHRoaXMub25FbnRlcigpO1xuXHRcdFx0fVxuXHRcdFx0aWYodGhpcy5vbkVudGVyRXZlbnRJZCAhPT0gbnVsbCl7XG5cdFx0XHRcdGxldCBkYXRhID0ge307XG5cdFx0XHRcdHRoaXMuZW1pdHRlci5maXJlRXZlbnQodGhpcy5vbkVudGVyRXZlbnRJZCwgZGF0YSk7XG5cdFx0XHR9XG5cblx0XHR9IGVsc2UgaWYodGhpcy5pc0VudGVyZWQpIHtcblx0XHRcdHRoaXMuaXNFbnRlcmVkID0gZmFsc2U7XG5cblx0XHRcdGlmKHRoaXMub25MZWF2ZSAhPT0gbnVsbCl7XG5cdFx0XHRcdHRoaXMub25MZWF2ZSgpO1xuXHRcdFx0fVxuXHRcdFx0aWYodGhpcy5vbkxlYXZlRXZlbnRJZCAhPT0gbnVsbCl7XG5cdFx0XHRcdGxldCBkYXRhID0ge307XG5cdFx0XHRcdHRoaXMuZW1pdHRlci5maXJlRXZlbnQodGhpcy5vbkxlYXZlRXZlbnRJZCwgZGF0YSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmKHRoaXMuaXNDbGlja2VkKSB7XG5cdFx0XHQvLyBJZiBtb3VzZSBpcyBkcmFnZ2VkIG9mZiBvZiBlbGVtZW50IHdoaWxlIGRvd24sIGl0IGlzIG5vdCBjbGlja2VkIGFueW1vcmVcblx0XHRcdHRoaXMuaXNDbGlja2VkID0gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIE92ZXJyaWRhYmxlIG1ldGhvZCBmb3IgY2FsY3VsYXRpbmcgYmFja2dyb3VuZCBjb2xvciAtIHVzZWZ1bCBmb3IgZWxlbWVudHMgdGhhdCB3YW50IHRvIGJlIGNvbG9yZWQgb24gZGlmZmVyZW50IGFmdGVyIGNlcnRhaW4gZXZlbnRzXG5cdCAqIEByZXR1cm5zIFRoZSBiYWNrZ3JvdW5kIGNvbG9yIG9mIHRoZSBVSUVsZW1lbnRcblx0ICovXG5cdGNhbGN1bGF0ZUJhY2tncm91bmRDb2xvcigpOiBDb2xvciB7XG5cdFx0cmV0dXJuIHRoaXMuYmFja2dyb3VuZENvbG9yO1xuXHR9XG5cblx0LyoqXG5cdCAqIE92ZXJyaWRhYmxlIG1ldGhvZCBmb3IgY2FsY3VsYXRpbmcgYm9yZGVyIGNvbG9yIC0gdXNlZnVsIGZvciBlbGVtZW50cyB0aGF0IHdhbnQgdG8gYmUgY29sb3JlZCBvbiBkaWZmZXJlbnQgYWZ0ZXIgY2VydGFpbiBldmVudHNcblx0ICogQHJldHVybnMgVGhlIGJvcmRlciBjb2xvciBvZiB0aGUgVUlFbGVtZW50XG5cdCAqL1xuXHRjYWxjdWxhdGVCb3JkZXJDb2xvcigpOiBDb2xvciB7XG5cdFx0cmV0dXJuIHRoaXMuYm9yZGVyQ29sb3I7XG5cdH1cbn0iLCJpbXBvcnQgTGFiZWwgZnJvbSBcIi4vTGFiZWxcIjtcbmltcG9ydCBDb2xvciBmcm9tIFwiLi4vLi4vVXRpbHMvQ29sb3JcIjtcbmltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi9EYXRhVHlwZXMvVmVjMlwiO1xuXG4vKiogQSBjbGlja2FibGUgYnV0dG9uIFVJRWxlbWVudCAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnV0dG9uIGV4dGVuZHMgTGFiZWwge1xuXG5cdGNvbnN0cnVjdG9yKHBvc2l0aW9uOiBWZWMyLCB0ZXh0OiBzdHJpbmcpe1xuXHRcdHN1cGVyKHBvc2l0aW9uLCB0ZXh0KTtcblx0XHRcblx0XHR0aGlzLmJhY2tncm91bmRDb2xvciA9IG5ldyBDb2xvcigxNTAsIDc1LCAyMDMpO1xuXHRcdHRoaXMuYm9yZGVyQ29sb3IgPSBuZXcgQ29sb3IoNDEsIDQ2LCAzMCk7XG5cdFx0dGhpcy50ZXh0Q29sb3IgPSBuZXcgQ29sb3IoMjU1LCAyNTUsIDI1NSk7XG5cdH1cblxuXHQvLyBAb3ZlcnJpZGVcblx0Y2FsY3VsYXRlQmFja2dyb3VuZENvbG9yKCk6IENvbG9yIHtcblx0XHQvLyBDaGFuZ2UgdGhlIGJhY2tncm91bmQgY29sb3IgaWYgY2xpY2tlZCBvciBob3ZlcmVkXG5cdFx0aWYodGhpcy5pc0VudGVyZWQgJiYgIXRoaXMuaXNDbGlja2VkKXtcblx0XHRcdHJldHVybiB0aGlzLmJhY2tncm91bmRDb2xvci5saWdodGVuKCk7XG5cdFx0fSBlbHNlIGlmKHRoaXMuaXNDbGlja2VkKXtcblx0XHRcdHJldHVybiB0aGlzLmJhY2tncm91bmRDb2xvci5kYXJrZW4oKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIHRoaXMuYmFja2dyb3VuZENvbG9yO1xuXHRcdH1cblx0fVxufSIsImltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi8uLi9VdGlscy9Db2xvclwiO1xuaW1wb3J0IFVJRWxlbWVudCBmcm9tIFwiLi4vVUlFbGVtZW50XCI7XG5cbi8qKiBBIGJhc2ljIHRleHQtY29udGFpbmluZyBsYWJlbCAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGFiZWwgZXh0ZW5kcyBVSUVsZW1lbnR7XG5cdC8qKiBUaGUgY29sb3Igb2YgdGhlIHRleHQgb2YgdGhpcyBVSUVsZW1lbnQgKi9cblx0dGV4dENvbG9yOiBDb2xvcjtcblx0LyoqIFRoZSB2YWx1ZSBvZiB0aGUgdGV4dCBvZiB0aGlzIFVJRWxlbWVudCAqL1xuXHR0ZXh0OiBzdHJpbmc7XG5cdC8qKiBUaGUgbmFtZSBvZiB0aGUgZm9udCAqL1xuXHRmb250OiBzdHJpbmc7XG5cdC8qKiBUaGUgc2l6ZSBvZiB0aGUgZm9udCAqL1xuXHRmb250U2l6ZTogbnVtYmVyO1xuXHQvKiogVGhlIGhvcml6b250YWwgYWxpZ25tZW50IG9mIHRoZSB0ZXh0IHdpdGhpbiB0aGUgbGFiZWwgKi9cblx0cHJvdGVjdGVkIGhBbGlnbjogc3RyaW5nO1xuXHQvKiogVGhlIHZlcnRpY2FsIGFsaWdubWVudCBvZiB0ZXh0IHdpdGhpbiB0aGUgbGFiZWwgKi9cblx0cHJvdGVjdGVkIHZBbGlnbjogc3RyaW5nO1xuXG5cdC8qKiBBIGZsYWcgZm9yIGlmIHRoZSB3aWR0aCBvZiB0aGUgdGV4dCBoYXMgYmVlbiBtZWFzdXJlZCBvbiB0aGUgY2FudmFzIGZvciBhdXRvIHdpZHRoIGFzc2lnbm1lbnQgKi9cblx0cHJvdGVjdGVkIHNpemVBc3NpZ25lZDogYm9vbGVhbjtcblxuXHRjb25zdHJ1Y3Rvcihwb3NpdGlvbjogVmVjMiwgdGV4dDogc3RyaW5nKXtcblx0XHRzdXBlcihwb3NpdGlvbik7XG5cdFx0dGhpcy50ZXh0ID0gdGV4dDtcblx0XHR0aGlzLnRleHRDb2xvciA9IG5ldyBDb2xvcigwLCAwLCAwLCAxKTtcblx0XHR0aGlzLmZvbnQgPSBcIkFyaWFsXCI7XG5cdFx0dGhpcy5mb250U2l6ZSA9IDMwO1xuXHRcdHRoaXMuaEFsaWduID0gXCJjZW50ZXJcIjtcblx0XHR0aGlzLnZBbGlnbiA9IFwiY2VudGVyXCI7XG5cblx0XHR0aGlzLnNpemVBc3NpZ25lZCA9IGZhbHNlO1xuXHR9XG5cblx0Ly8gQGRlcHJlY2F0ZWRcblx0c2V0VGV4dCh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcblx0XHR0aGlzLnRleHQgPSB0ZXh0O1xuXHR9XG5cblx0Ly8gQGRlcHJlY2F0ZWRcblx0c2V0VGV4dENvbG9yKGNvbG9yOiBDb2xvcik6IHZvaWQge1xuXHRcdHRoaXMudGV4dENvbG9yID0gY29sb3I7XG5cdH1cblxuXHQvKipcblx0ICogR2V0cyBhIHN0cmluZyBjb250YWluZyB0aGUgZm9udCBkZXRhaWxzIGZvciByZW5kZXJpbmdcblx0ICogQHJldHVybnMgQSBzdHJpbmcgY29udGFpbmluZyB0aGUgZm9udCBkZXRhaWxzXG5cdCAqL1xuXHRnZXRGb250U3RyaW5nKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuZm9udFNpemUgKyBcInB4IFwiICsgdGhpcy5mb250O1xuXHR9XG5cblx0LyoqXG5cdCAqIE92ZXJyaWRhYmxlIG1ldGhvZCBmb3IgY2FsY3VsYXRpbmcgdGV4dCBjb2xvciAtIHVzZWZ1bCBmb3IgZWxlbWVudHMgdGhhdCB3YW50IHRvIGJlIGNvbG9yZWQgb24gZGlmZmVyZW50IGFmdGVyIGNlcnRhaW4gZXZlbnRzXG5cdCAqIEByZXR1cm5zIGEgc3RyaW5nIGNvbnRhaW5nIHRoZSB0ZXh0IGNvbG9yXG5cdCAqL1xuXHRjYWxjdWxhdGVUZXh0Q29sb3IoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy50ZXh0Q29sb3IudG9TdHJpbmdSR0JBKCk7XG5cdH1cblxuXHQvKipcblx0ICogVXNlcyB0aGUgY2FudmFzIHRvIGNhbGN1bGF0ZSB0aGUgd2lkdGggb2YgdGhlIHRleHRcblx0ICogQHBhcmFtIGN0eCBUaGUgcmVuZGVyaW5nIGNvbnRleHRcblx0ICogQHJldHVybnMgQSBudW1iZXIgcmVwcmVzZW50aW5nIHRoZSByZW5kZXJlZCB0ZXh0IHdpZHRoXG5cdCAqL1xuXHRwcm90ZWN0ZWQgY2FsY3VsYXRlVGV4dFdpZHRoKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTogbnVtYmVyIHtcblx0XHRjdHguZm9udCA9IHRoaXMuZm9udFNpemUgKyBcInB4IFwiICsgdGhpcy5mb250O1xuXHRcdHJldHVybiBjdHgubWVhc3VyZVRleHQodGhpcy50ZXh0KS53aWR0aDtcblx0fVxuXG5cdHNldEhBbGlnbihhbGlnbjogc3RyaW5nKTogdm9pZCB7XG5cdFx0dGhpcy5oQWxpZ24gPSBhbGlnbjtcblx0fVxuXG5cdHNldFZBbGlnbihhbGlnbjogc3RyaW5nKTogdm9pZCB7XG5cdFx0dGhpcy52QWxpZ24gPSBhbGlnbjtcblx0fVxuXG5cdC8qKlxuXHQgKiBDYWxjdWxhdGUgdGhlIG9mZnNldCBvZiB0aGUgdGV4dCAtIHRoaXMgaXMgdXNlZCBmb3IgcmVuZGVyaW5nIHRleHQgd2l0aCBkaWZmZXJlbnQgYWxpZ25tZW50c1xuXHQgKiBAcGFyYW0gY3R4IFRoZSByZW5kZXJpbmcgY29udGV4dFxuXHQgKiBAcmV0dXJucyBUaGUgb2Zmc2V0IG9mIHRoZSB0ZXh0IGluIGEgVmVjMlxuXHQgKi9cblx0Y2FsY3VsYXRlVGV4dE9mZnNldChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IFZlYzIge1xuXHRcdGxldCB0ZXh0V2lkdGggPSB0aGlzLmNhbGN1bGF0ZVRleHRXaWR0aChjdHgpO1xuXG5cdFx0bGV0IG9mZnNldCA9IG5ldyBWZWMyKDAsIDApO1xuXG5cdFx0bGV0IGhEaWZmID0gdGhpcy5zaXplLnggLSB0ZXh0V2lkdGg7XG5cdFx0aWYodGhpcy5oQWxpZ24gPT09IEhBbGlnbi5DRU5URVIpe1xuXHRcdFx0b2Zmc2V0LnggPSBoRGlmZi8yO1xuXHRcdH0gZWxzZSBpZiAodGhpcy5oQWxpZ24gPT09IEhBbGlnbi5SSUdIVCl7XG5cdFx0XHRvZmZzZXQueCA9IGhEaWZmO1xuXHRcdH1cblxuXHRcdGlmKHRoaXMudkFsaWduID09PSBWQWxpZ24uVE9QKXtcblx0XHRcdGN0eC50ZXh0QmFzZWxpbmUgPSBcInRvcFwiO1xuXHRcdFx0b2Zmc2V0LnkgPSAwO1xuXHRcdH0gZWxzZSBpZiAodGhpcy52QWxpZ24gPT09IFZBbGlnbi5CT1RUT00pe1xuXHRcdFx0Y3R4LnRleHRCYXNlbGluZSA9IFwiYm90dG9tXCI7XG5cdFx0XHRvZmZzZXQueSA9IHRoaXMuc2l6ZS55O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjdHgudGV4dEJhc2VsaW5lID0gXCJtaWRkbGVcIjtcblx0XHRcdG9mZnNldC55ID0gdGhpcy5zaXplLnkvMjtcblx0XHR9XG5cblx0XHRyZXR1cm4gb2Zmc2V0O1xuXHR9XG5cblx0cHJvdGVjdGVkIHNpemVDaGFuZ2VkKCk6IHZvaWQge1xuXHRcdHN1cGVyLnNpemVDaGFuZ2VkKCk7XG5cdFx0dGhpcy5zaXplQXNzaWduZWQgPSB0cnVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIEF1dG9tYXRpY2FsbHkgc2l6ZXMgdGhlIGVsZW1lbnQgdG8gdGhlIHRleHQgd2l0aGluIGl0XG5cdCAqIEBwYXJhbSBjdHggVGhlIHJlbmRlcmluZyBjb250ZXh0XG5cdCAqL1xuXHRwcm90ZWN0ZWQgYXV0b1NpemUoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOiB2b2lkIHtcblx0XHRsZXQgd2lkdGggPSB0aGlzLmNhbGN1bGF0ZVRleHRXaWR0aChjdHgpO1xuXHRcdGxldCBoZWlnaHQgPSB0aGlzLmZvbnRTaXplO1xuXHRcdHRoaXMuc2l6ZS5zZXQod2lkdGggKyB0aGlzLnBhZGRpbmcueCoyLCBoZWlnaHQgKyB0aGlzLnBhZGRpbmcueSoyKTtcblx0XHR0aGlzLnNpemVBc3NpZ25lZCA9IHRydWU7XG5cdH1cblxuXHQvKipcblx0ICogSW5pdGlhbGx5IGFzc2lnbnMgYSBzaXplIHRvIHRoZSBVSUVsZW1lbnQgaWYgbm9uZSBpcyBwcm92aWRlZFxuXHQgKiBAcGFyYW0gY3R4IFRoZSByZW5kZXJpbmcgY29udGV4dFxuXHQgKi9cblx0aGFuZGxlSW5pdGlhbFNpemluZyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xuXHRcdGlmKCF0aGlzLnNpemVBc3NpZ25lZCl7XG5cdFx0XHR0aGlzLmF1dG9TaXplKGN0eCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqIE9uIHRoZSBuZXh0IHJlbmRlciwgc2l6ZSB0aGlzIGVsZW1lbnQgdG8gaXQncyBjdXJyZW50IHRleHQgdXNpbmcgaXRzIGN1cnJlbnQgZm9udCBzaXplICovXG5cdHNpemVUb1RleHQoKTogdm9pZCB7XG5cdFx0dGhpcy5zaXplQXNzaWduZWQgPSBmYWxzZTtcblx0fVxufVxuXG5leHBvcnQgZW51bSBWQWxpZ24ge1xuXHRUT1AgPSBcInRvcFwiLFxuXHRDRU5URVIgPSBcImNlbnRlclwiLFxuXHRCT1RUT00gPSBcImJvdHRvbVwiXG59XG5cbmV4cG9ydCBlbnVtIEhBbGlnbiB7XG5cdExFRlQgPSBcImxlZnRcIixcblx0Q0VOVEVSID0gXCJjZW50ZXJcIixcblx0UklHSFQgPSBcInJpZ2h0XCJcbn0iLCJpbXBvcnQgVmVjMiBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL1ZlYzJcIjtcbmltcG9ydCBJbnB1dCBmcm9tIFwiLi4vLi4vSW5wdXQvSW5wdXRcIjtcbmltcG9ydCBDb2xvciBmcm9tIFwiLi4vLi4vVXRpbHMvQ29sb3JcIjtcbmltcG9ydCBNYXRoVXRpbHMgZnJvbSBcIi4uLy4uL1V0aWxzL01hdGhVdGlsc1wiO1xuaW1wb3J0IFVJRWxlbWVudCBmcm9tIFwiLi4vVUlFbGVtZW50XCI7XG5cbi8qKiBBIHNsaWRlciBVSUVsZW1lbnQgKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNsaWRlciBleHRlbmRzIFVJRWxlbWVudCB7XG4gICAgLyoqIFRoZSB2YWx1ZSBvZiB0aGUgc2xpZGVyIGZyb20gWzAsIDFdICovXG4gICAgcHJvdGVjdGVkIHZhbHVlOiBudW1iZXI7XG4gICAgLyoqIFRoZSBjb2xvciBvZiB0aGUgc2xpZGVyIG5pYiAqL1xuICAgIHB1YmxpYyBuaWJDb2xvcjogQ29sb3I7XG4gICAgLyoqIFRoZSBzaXplIG9mIHRoZSBuaWIgKi9cbiAgICBwdWJsaWMgbmliU2l6ZTogVmVjMjtcbiAgICAvKiogVGhlIGNvbG9yIG9mIHRoZSBzbGlkZXIgdHJhY2sgKi9cbiAgICBwdWJsaWMgc2xpZGVyQ29sb3I6IENvbG9yO1xuICAgIC8qKiBUaGUgcmVhY3Rpb24gb2YgdGhpcyBVSUVsZW1lbnQgdG8gYSB2YWx1ZSBjaGFuZ2UgKi9cbiAgICBwdWJsaWMgb25WYWx1ZUNoYW5nZTogRnVuY3Rpb247XG4gICAgLyoqIFRoZSBldmVudCBwcm9wYWdhdGVkIGJ5IHRoaXMgVUlFbGVtZW50IHdoZW4gdmFsdWUgY2hhbmdlcyAqL1xuICAgIHB1YmxpYyBvblZhbHVlQ2hhbmdlRXZlbnRJZDogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IocG9zaXRpb246IFZlYzIsIGluaXRWYWx1ZTogbnVtYmVyKXtcbiAgICAgICAgc3VwZXIocG9zaXRpb24pO1xuXG4gICAgICAgIHRoaXMudmFsdWUgPSBpbml0VmFsdWU7XG4gICAgICAgIHRoaXMubmliQ29sb3IgPSBDb2xvci5SRUQ7XG4gICAgICAgIHRoaXMuc2xpZGVyQ29sb3IgPSBDb2xvci5CTEFDSztcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgdGhpcy5ib3JkZXJDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICB0aGlzLm5pYlNpemUgPSBuZXcgVmVjMigxMCwgMjApO1xuXG4gICAgICAgIC8vIFNldCBhIGRlZmF1bHQgc2l6ZVxuICAgICAgICB0aGlzLnNpemUuc2V0KDIwMCwgMjApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgdmFsdWUgb2YgdGhlIHNsaWRlclxuICAgICAqIEByZXR1cm5zIFRoZSB2YWx1ZSBvZiB0aGUgc2xpZGVyXG4gICAgICovXG4gICAgZ2V0VmFsdWUoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgfVxuXG4gICAgLyoqIEEgbWV0aG9kIGNhbGxlZCBpbiByZXNwb25zZSB0byB0aGUgdmFsdWUgY2hhbmdpbmcgKi9cbiAgICBwcm90ZWN0ZWQgdmFsdWVDaGFuZ2VkKCk6IHZvaWQge1xuICAgICAgICBpZih0aGlzLm9uVmFsdWVDaGFuZ2Upe1xuICAgICAgICAgICAgdGhpcy5vblZhbHVlQ2hhbmdlKHRoaXMudmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodGhpcy5vblZhbHVlQ2hhbmdlRXZlbnRJZCl7XG4gICAgICAgICAgICB0aGlzLmVtaXR0ZXIuZmlyZUV2ZW50KHRoaXMub25WYWx1ZUNoYW5nZUV2ZW50SWQsIHt0YXJnZXQ6IHRoaXMsIHZhbHVlOiB0aGlzLnZhbHVlfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGUoZGVsdGFUOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgc3VwZXIudXBkYXRlKGRlbHRhVCk7XG5cbiAgICAgICAgaWYodGhpcy5pc0NsaWNrZWQpe1xuICAgICAgICAgICAgbGV0IHZhbCA9IE1hdGhVdGlscy5pbnZMZXJwKHRoaXMucG9zaXRpb24ueCAtIHRoaXMuc2l6ZS54LzIsIHRoaXMucG9zaXRpb24ueCArIHRoaXMuc2l6ZS54LzIsIElucHV0LmdldE1vdXNlUG9zaXRpb24oKS54KTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBNYXRoVXRpbHMuY2xhbXAwMSh2YWwpO1xuICAgICAgICAgICAgdGhpcy52YWx1ZUNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgVmVjMiBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL1ZlYzJcIjtcbmltcG9ydCBDb2xvciBmcm9tIFwiLi4vLi4vVXRpbHMvQ29sb3JcIjtcbmltcG9ydCBMYWJlbCBmcm9tIFwiLi9MYWJlbFwiO1xuaW1wb3J0IElucHV0IGZyb20gXCIuLi8uLi9JbnB1dC9JbnB1dFwiO1xuXG4vKiogQSB0ZXh0IGlucHV0IFVJRWxlbWVudCAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGV4dElucHV0IGV4dGVuZHMgTGFiZWwge1xuICAgIC8qKiBBIGZsYWcgdGhlIHJlcHJlc2VudHMgd2hldGhlciB0aGUgdXNlciBjYW4gdHlwZSBpbiB0aGlzIFRleHRJbnB1dCAqL1xuICAgIGZvY3VzZWQ6IGJvb2xlYW47XG4gICAgLyoqIFRoZSBwb3NpdGlvbiBvZiB0aGUgY3Vyc29yIGluIHRoaXMgVGV4dElucHV0ICovXG4gICAgY3Vyc29yQ291bnRlcjogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IocG9zaXRpb246IFZlYzIpe1xuICAgICAgICBzdXBlcihwb3NpdGlvbiwgXCJcIik7XG5cbiAgICAgICAgdGhpcy5mb2N1c2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY3Vyc29yQ291bnRlciA9IDA7XG5cbiAgICAgICAgLy8gR2l2ZSBhIGRlZmF1bHQgc2l6ZSB0byB0aGUgeCBvbmx5XG4gICAgICAgIHRoaXMuc2l6ZS5zZXQoMjAwLCB0aGlzLmZvbnRTaXplKTtcbiAgICAgICAgdGhpcy5oQWxpZ24gPSBcImxlZnRcIjtcblxuICAgICAgICB0aGlzLmJvcmRlckNvbG9yID0gQ29sb3IuQkxBQ0s7XG4gICAgICAgIHRoaXMuYmFja2dyb3VuZENvbG9yID0gQ29sb3IuV0hJVEU7XG4gICAgfVxuXG4gICAgdXBkYXRlKGRlbHRhVDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHN1cGVyLnVwZGF0ZShkZWx0YVQpO1xuXG4gICAgICAgIGlmKElucHV0LmlzTW91c2VKdXN0UHJlc3NlZCgpKXtcblx0XHRcdGxldCBjbGlja1BvcyA9IElucHV0LmdldE1vdXNlUHJlc3NQb3NpdGlvbigpO1xuXHRcdFx0aWYodGhpcy5jb250YWlucyhjbGlja1Bvcy54LCBjbGlja1Bvcy55KSl7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnNvckNvdW50ZXIgPSAzMDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1c2VkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZih0aGlzLmZvY3VzZWQpe1xuICAgICAgICAgICAgbGV0IGtleXMgPSBJbnB1dC5nZXRLZXlzSnVzdFByZXNzZWQoKTtcbiAgICAgICAgICAgIGxldCBudW1zID0gXCIxMjM0NTY3ODkwXCI7XG4gICAgICAgICAgICBsZXQgc3BlY2lhbENoYXJzID0gXCJgfiFAIyQlXiYqKCktXz0rW3tdfVxcXFx8OzonXFxcIiw8Lj4vP1wiO1xuICAgICAgICAgICAgbGV0IGxldHRlcnMgPSBcInF3ZXJ0eXVpb3Bhc2RmZ2hqa2x6eGN2Ym5tXCI7XG4gICAgICAgICAgICBsZXQgbWFzayA9IG51bXMgKyBzcGVjaWFsQ2hhcnMgKyBsZXR0ZXJzO1xuICAgICAgICAgICAga2V5cyA9IGtleXMuZmlsdGVyKGtleSA9PiBtYXNrLmluY2x1ZGVzKGtleSkpO1xuICAgICAgICAgICAgbGV0IHNoaWZ0UHJlc3NlZCA9IElucHV0LmlzS2V5UHJlc3NlZChcInNoaWZ0XCIpO1xuICAgICAgICAgICAgbGV0IGJhY2tzcGFjZVByZXNzZWQgPSBJbnB1dC5pc0tleUp1c3RQcmVzc2VkKFwiYmFja3NwYWNlXCIpO1xuICAgICAgICAgICAgbGV0IHNwYWNlUHJlc3NlZCA9IElucHV0LmlzS2V5SnVzdFByZXNzZWQoXCJzcGFjZVwiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoYmFja3NwYWNlUHJlc3NlZCl7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0ID0gdGhpcy50ZXh0LnN1YnN0cmluZygwLCB0aGlzLnRleHQubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYoc3BhY2VQcmVzc2VkKXtcbiAgICAgICAgICAgICAgICB0aGlzLnRleHQgKz0gXCIgXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYoa2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYoc2hpZnRQcmVzc2VkKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0ICs9IGtleXNbMF0udG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRleHQgKz0ga2V5c1swXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59IiwiZXhwb3J0IGVudW0gVUlFbGVtZW50VHlwZSB7XG5cdEJVVFRPTiA9IFwiQlVUVE9OXCIsXG5cdExBQkVMID0gXCJMQUJFTFwiLFxuXHRTTElERVIgPSBcIlNMSURFUlwiLFxuXHRURVhUX0lOUFVUID0gXCJURVhUSU5QVVRcIlxufSIsImltcG9ydCBOYXZpZ2FibGUgZnJvbSBcIi4uL0RhdGFUeXBlcy9QYXRoZmluZGluZy9OYXZpZ2FibGVcIjtcbmltcG9ydCBNYXAgZnJvbSBcIi4uL0RhdGFUeXBlcy9Db2xsZWN0aW9ucy9NYXBcIjtcbmltcG9ydCBWZWMyIGZyb20gXCIuLi9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IE5hdmlnYXRpb25QYXRoIGZyb20gXCIuL05hdmlnYXRpb25QYXRoXCI7XG5pbXBvcnQgTmF2bWVzaCBmcm9tIFwiLi9OYXZtZXNoXCI7XG5cbi8qKlxuICogVGhlIG1hbmFnZXIgY2xhc3MgZm9yIG5hdmlnYXRpb24uXG4gKiBIYW5kbGVzIGFsbCBuYXZpZ2FibGUgZW50aXRpZXMsIHN1Y2ggYW5kIGFsbG93cyB0aGVtIHRvIGJlIGFjY2Vzc2VkIGJ5IG91dHNpZGUgc3lzdGVtcyBieSByZXF1ZXN0aW5nIGEgcGF0aFxuICogZnJvbSBvbmUgcG9zaXRpb24gdG8gYW5vdGhlci5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTmF2aWdhdGlvbk1hbmFnZXIge1xuXHQvKiogVGhlIGxpc3Qgb2YgYWxsIG5hdmlnYWJsZSBlbnRpdGllcyAqL1xuXHRwcm90ZWN0ZWQgbmF2aWdhYmxlRW50aXRpZXM6IE1hcDxOYXZtZXNoPjtcblxuXHRjb25zdHJ1Y3Rvcigpe1xuXHRcdHRoaXMubmF2aWdhYmxlRW50aXRpZXMgPSBuZXcgTWFwKCk7XG5cdH1cblxuXHQvKipcblx0ICogQWRkcyBhIG5hdmlnYWJsZSBlbnRpdHkgdG8gdGhlIE5hdmlnYXRpb25NYW5hZ2VyXG5cdCAqIEBwYXJhbSBuYXZOYW1lIFRoZSBuYW1lIG9mIHRoZSBuYXZpZ2FibGUgZW50aXRyeVxuXHQgKiBAcGFyYW0gbmF2IFRoZSBhY3R1YWwgTmF2aWdhYmxlIGluc3RhbmNlXG5cdCAqL1xuXHRhZGROYXZpZ2FibGVFbnRpdHkobmF2TmFtZTogc3RyaW5nLCBuYXY6IE5hdm1lc2gpOiB2b2lkIHtcblx0XHR0aGlzLm5hdmlnYWJsZUVudGl0aWVzLmFkZChuYXZOYW1lLCBuYXYpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldHMgYSBwYXRoIGZyb21lIG9uZSBwb2ludCB0byBhbm90aGVyIHVzaW5nIGEgc3BlY2lmaWVkIE5hdmlnYWJsZSBvYmplY3Rcblx0ICogQHBhcmFtIG5hdk5hbWUgVGhlIG5hbWUgb2YgdGhlIHJlZ2lzdGVyZWQgTmF2aWdhYmxlIG9iamVjdFxuXHQgKiBAcGFyYW0gZnJvbVBvc2l0aW9uIFRoZSBzdGFydGluZyBwb3NpdGlvbiBvZiBuYXZpZ2F0aW9uXG5cdCAqIEBwYXJhbSB0b1Bvc2l0aW9uIFRoZSBlbmRpbmcgcG9zaXRpb24gb2YgTmF2aWdhdGlvblxuXHQgKiBAcGFyYW0gZGlyZWN0IElmIHRydWUsIGdvIGRpcmVjdCBmcm9tIGZyb21Qb3NpdGlvbiB0byB0b1Bvc2l0aW9uLCBkb24ndCB1c2UgTmF2TWVzaFxuXHQgKiBAcmV0dXJucyBBIE5hdmlnYXRpb25QYXRoIGNvbnRhaW5pbmcgdGhlIHJvdXRlIHRvIHRha2Ugb3ZlciB0aGUgTmF2aWdhYmxlIGVudGl0eSB0byBnZXQgYmV0d2VlbiB0aGUgcHJvdmlkZWQgcG9zaXRpb25zLlxuXHQgKi9cblx0Z2V0UGF0aChuYXZOYW1lOiBzdHJpbmcsIGZyb21Qb3NpdGlvbjogVmVjMiwgdG9Qb3NpdGlvbjogVmVjMik6IE5hdmlnYXRpb25QYXRoIHtcblx0XHRsZXQgbmF2ID0gdGhpcy5uYXZpZ2FibGVFbnRpdGllcy5nZXQobmF2TmFtZSk7XG5cdFx0cmV0dXJuIG5hdi5nZXROYXZpZ2F0aW9uUGF0aChmcm9tUG9zaXRpb24uY2xvbmUoKSwgdG9Qb3NpdGlvbi5jbG9uZSgpKTtcblx0fVxufSIsImltcG9ydCBTdGFjayBmcm9tIFwiLi4vRGF0YVR5cGVzL0NvbGxlY3Rpb25zL1N0YWNrXCI7XG5pbXBvcnQgUGF0aCBmcm9tIFwiLi4vRGF0YVR5cGVzL1BhdGhmaW5kaW5nL1BhdGhcIjtcbmltcG9ydCBWZWMyIGZyb20gXCIuLi9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IEdhbWVOb2RlIGZyb20gXCIuLi9Ob2Rlcy9HYW1lTm9kZVwiO1xuXG4vKipcbiAqIEEgcGF0aCB0aGF0IEFJcyBjYW4gZm9sbG93LiBVc2VzIGZpbmlzaE1vdmUoKSBpbiBQaHlzaWNhbCB0byBkZXRlcm1pbmUgcHJvZ3Jlc3Mgb24gdGhlIHJvdXRlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5hdmlnYXRpb25QYXRoIGltcGxlbWVudHMgUGF0aDxWZWMyPiB7XG5cdC8qKiBUaGUgbmF2aWdhdGlvbiBwYXRoLCBzdG9yZWQgYXMgYSBzdGFjayBvZiBuZXh0IHBvc2l0aW9ucyAqL1xuXHRwcm90ZWN0ZWQgcGF0aDogU3RhY2s8VmVjMj47XG5cdC8qKiBUaGUgY3VycmVudCBkaXJlY3Rpb24gb2YgbW92ZW1lbnQgKi9cblx0cHJvdGVjdGVkIGN1cnJlbnRNb3ZlRGlyZWN0aW9uOiBWZWMyO1xuXHQvKiogVGhlIGRpc3RhbmNlIGEgbm9kZSBtdXN0IGJlIHRvIGEgcG9pbnQgdG8gY29uc2lkZXIgaXQgYXMgaGF2aW5nIGFycml2ZWQgKi9cblx0cHJvdGVjdGVkIGRpc3RhbmNlVGhyZXNob2xkOiBudW1iZXI7XG5cblx0LyoqXG5cdCAqIENvbnN0cnVjdHMgYSBuZXcgTmF2aWdhdGlvblBhdGhcblx0ICogQHBhcmFtIHBhdGggVGhlIHBhdGggb2Ygbm9kZXMgdG8gdGFrZVxuXHQgKi9cblx0Y29uc3RydWN0b3IocGF0aDogU3RhY2s8VmVjMj4pe1xuXHRcdHRoaXMucGF0aCA9IHBhdGg7XG5cdFx0dGhpcy5jdXJyZW50TW92ZURpcmVjdGlvbiA9IFZlYzIuWkVSTztcblx0XHR0aGlzLmRpc3RhbmNlVGhyZXNob2xkID0gNDtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRoZSBzdGF0dXMgb2YgbmF2aWdhdGlvbiBhbG9uZyB0aGlzIE5hdmlnYXRpb25QYXRoXG5cdCAqIEByZXR1cm5zIFRydWUgaWYgdGhlIG5vZGUgaGFzIHJlYWNoZWQgdGhlIGVuZCBvZiB0aGUgcGF0aCwgZmFsc2Ugb3RoZXJ3aXNlXG5cdCAqL1xuXHRpc0RvbmUoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMucGF0aC5pc0VtcHR5KCk7XG5cdH1cblxuICAgIG5leHQoKTogVmVjMiB8IG51bGwgeyByZXR1cm4gdGhpcy5wYXRoLmlzRW1wdHkoKSA/IG51bGwgOiB0aGlzLnBhdGgucGVlaygpOyB9XG5cblx0LyoqXG5cdCAqIEdldHMgdGhlIG1vdmVtZW50IGRpcmVjdGlvbiBpbiB0aGUgY3VycmVudCBwb3NpdGlvbiBhbG9uZyB0aGUgcGF0aFxuXHQgKiBAcGFyYW0gbm9kZSBUaGUgbm9kZSB0byBtb3ZlIGFsb25nIHRoZSBwYXRoXG5cdCAqIEByZXR1cm5zIFRoZSBtb3ZlbWVudCBkaXJlY3Rpb24gYXMgYSBWZWMyXG5cdCAqL1xuXHRnZXRNb3ZlRGlyZWN0aW9uKG5vZGU6IEdhbWVOb2RlKTogVmVjMiB7XG5cdFx0Ly8gUmV0dXJuIGRpcmVjdGlvbiB0byBuZXh0IHBvaW50IGluIHRoZSBuYXZcblx0XHRyZXR1cm4gbm9kZS5wb3NpdGlvbi5kaXJUbyh0aGlzLnBhdGgucGVlaygpKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGVzIHRoaXMgTmF2aWdhdGlvblBhdGggdG8gdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIEdhbWVOb2RlXG5cdCAqIEBwYXJhbSBub2RlIFRoZSBub2RlIG1vdmluZyBhbG9uZyB0aGUgcGF0aFxuXHQgKi9cblx0aGFuZGxlUGF0aFByb2dyZXNzKG5vZGU6IEdhbWVOb2RlKTogdm9pZCB7XG5cdFx0aWYoIXRoaXMucGF0aC5pc0VtcHR5KCkgJiYgbm9kZS5wb3NpdGlvbi5kaXN0YW5jZVNxVG8odGhpcy5wYXRoLnBlZWsoKSkgPCB0aGlzLmRpc3RhbmNlVGhyZXNob2xkKnRoaXMuZGlzdGFuY2VUaHJlc2hvbGQpe1xuXHRcdFx0Ly8gV2UndmUgcmVhY2hlZCBvdXIgbm9kZSwgbW92ZSBvbiB0byB0aGUgbmV4dCBkZXN0aW5hdGlvblxuXHRcdFx0dGhpcy5wYXRoLnBvcCgpO1xuXHRcdH1cblx0fVxuXG5cdHRvU3RyaW5nKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMucGF0aC50b1N0cmluZygpXG5cdH1cbn0iLCJpbXBvcnQgUG9zaXRpb25HcmFwaCBmcm9tIFwiLi4vRGF0YVR5cGVzL0dyYXBocy9Qb3NpdGlvbkdyYXBoXCI7XG5pbXBvcnQgTmF2aWdhYmxlIGZyb20gXCIuLi9EYXRhVHlwZXMvUGF0aGZpbmRpbmcvTmF2aWdhYmxlXCI7XG5pbXBvcnQgVmVjMiBmcm9tIFwiLi4vRGF0YVR5cGVzL1ZlYzJcIjtcbmltcG9ydCBOYXZpZ2F0aW9uUGF0aCBmcm9tIFwiLi9OYXZpZ2F0aW9uUGF0aFwiO1xuaW1wb3J0IE5hdmlnYXRpb25TdHJhdGVneSBmcm9tIFwiLi9TdHJhdGVnaWVzL05hdmlnYXRpb25TdHJhdGVneVwiO1xuXG4vKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIGEgTmF2bWVzaC4gTmF2bWVzaGVzIGFyZSBncmFwaHMgaW4gdGhlIGdhbWUgd29ybGQgYWxvbmcgd2hpY2ggbm9kZXMgY2FuIG1vdmUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5hdm1lc2ggaW1wbGVtZW50cyBOYXZpZ2FibGU8VmVjMiwgTmF2aWdhdGlvblBhdGg+IHtcblx0LyoqIFRoZSBncmFwaCBvZiBwb2ludHMgaW4gdGhlIE5hdk1lc2ggKi9cblx0cHJvdGVjdGVkIF9ncmFwaDogUG9zaXRpb25HcmFwaDtcbiAgICAvKiogVGhlIHN0cmF0ZWd5IHVzZWQgdG8gZ2VuZXJhdGUgdGhlIE5hdmlnYXRpb25QYXRoICovXG4gICAgcHJvdGVjdGVkIF9zdHJhdGVnaWVzOiBNYXA8c3RyaW5nLCBOYXZpZ2F0aW9uU3RyYXRlZ3k+O1xuICAgIC8qKiBUaGUgc3RyYXRlZ3kgY3VycmVudGx5IGJlaW5nIHVzZWQgdG8gZ2VuZXJhdGUgcGF0aHMgb24gdGhpcyBOYXZtZXNoICovXG4gICAgcHJvdGVjdGVkIF9zdHJhdGVneTogTmF2aWdhdGlvblN0cmF0ZWd5IHwgdW5kZWZpbmVkO1xuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgbmV3IE5hdm1lc2ggZnJvbSB0aGUgcG9pbnRzIGluIHRoZSBzcGVlY2lmaWVkIGdyYXBoLiBOYXZpZ2F0aW9uIGlzIGRvbmUgdXNpbmcgdGhlIFxuICAgICAqIGdpdmVuIE5hdmlnYXRpb25TdHJhdGVneS4gXG5cdCAqIEBwYXJhbSBncmFwaCB0aGUgZ3JhcGggdG8gY29uc3RydWN0IGEgbmF2bWVzaCBmcm9tXG4gICAgICogQHBhcmFtIHN0cmF0ZWd5IGEgY29uc3RydWN0b3IgZm9yIHN0cmF0ZWd5IHRvIHVzZSB0byBidWlsZCBwYXRocyBmb3IgdGhpcyBuYXZtZXNoXG5cdCAqL1xuXHRwdWJsaWMgY29uc3RydWN0b3IoZ3JhcGg6IFBvc2l0aW9uR3JhcGgpe1xuXHRcdHRoaXMuX2dyYXBoID0gZ3JhcGg7XG4gICAgICAgIHRoaXMuX3N0cmF0ZWdpZXMgPSBuZXcgTWFwPHN0cmluZywgTmF2aWdhdGlvblN0cmF0ZWd5PigpO1xuICAgICAgICB0aGlzLl9zdHJhdGVneSA9IHVuZGVmaW5lZDtcblx0fVxuXG4gICAgcHVibGljIGdldCBncmFwaCgpOiBQb3NpdGlvbkdyYXBoIHsgcmV0dXJuIHRoaXMuX2dyYXBoOyB9XG5cbiAgICBwdWJsaWMgc2V0U3RyYXRlZ3koc3RyYXRlZ3k6IHN0cmluZykgeyB0aGlzLl9zdHJhdGVneSA9IHRoaXMuX3N0cmF0ZWdpZXMuZ2V0KHN0cmF0ZWd5KTsgfVxuXG5cdC8vIEBpbXBsZW1lbnRlZFxuXHRnZXROYXZpZ2F0aW9uUGF0aChmcm9tUG9zaXRpb246IFZlYzIsIHRvUG9zaXRpb246IFZlYzIpOiBOYXZpZ2F0aW9uUGF0aCB7XG4gICAgICAgIGlmICh0aGlzLl9zdHJhdGVneSA9PT0gdW5kZWZpbmVkKSB7IFxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IuTm8gcGF0aGZpbmRpbmcgc3RyYXRlZ3kgc2V0IGZvciB0aGlzIG5hdm1lc2guXCIpO1xuICAgICAgICB9XG5cdFx0cmV0dXJuIHRoaXMuX3N0cmF0ZWd5LmJ1aWxkUGF0aCh0b1Bvc2l0aW9uLCBmcm9tUG9zaXRpb24pO1xuXHR9XG5cbiAgICByZWdpc3RlclN0cmF0ZWd5KGtleTogc3RyaW5nLCBzdHJhdGVneTogTmF2aWdhdGlvblN0cmF0ZWd5KTogdm9pZCB7XG4gICAgICAgIHRoaXMuX3N0cmF0ZWdpZXMuc2V0KGtleSwgc3RyYXRlZ3kpO1xuICAgIH1cblxufSIsImltcG9ydCBTdGFjayBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL0NvbGxlY3Rpb25zL1N0YWNrXCI7XG5pbXBvcnQgVmVjMiBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL1ZlYzJcIjtcbmltcG9ydCBOYXZpZ2F0aW9uUGF0aCBmcm9tIFwiLi4vTmF2aWdhdGlvblBhdGhcIjtcbmltcG9ydCBOYXZQYXRoU3RyYXQgZnJvbSBcIi4vTmF2aWdhdGlvblN0cmF0ZWd5XCI7XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIG5hdmlnYXRpb24gcGF0aCB0aGF0IGdvZXMgZGlyZWN0bHkgZnJvbSBwb2ludCBBIHRvIHBvaW50IEIuIEluIHRoZSBcbiAqIG9yaWdpbmFsIGltcGxlbWVudGF0aW9uIG9mIHRoZSBOYXZpZ2F0aW9uUGF0aCwgeW91IGNvdWxkIHNldCBhIGZsYWcgdG8gdGVsbCBpdCB0b1xuICogY3JlYXRlIGEgZGlyZWN0IHBhdGguIEkndmUgYmFzaWNhbGx5IHJlbW92ZWQgdGhhdCBmbGFnIGFuZCBjcmVhdGVkIHRoaXMgY2xhc3MgaW4gXG4gKiBpdCdzIHBsYWNlLlxuICogQGF1dGhvciBQZXRleUx1bXBraW5zXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERpcmVjdFBhdGhTdHJhdCBleHRlbmRzIE5hdlBhdGhTdHJhdCB7XG5cbiAgICAvKipcbiAgICAgKiBAc2VlIE5hdlBhdGhTdHJhdC5idWlsZFBhdGgoKVxuICAgICAqL1xuICAgIHB1YmxpYyBidWlsZFBhdGgodG86IFZlYzIsIGZyb206IFZlYzIpOiBOYXZpZ2F0aW9uUGF0aCB7XG4gICAgICAgIGxldCBzdGFjayA9IG5ldyBTdGFjazxWZWMyPigpO1xuICAgICAgICBzdGFjay5wdXNoKHRvLmNsb25lKCkpO1xuICAgICAgICByZXR1cm4gbmV3IE5hdmlnYXRpb25QYXRoKHN0YWNrKTtcbiAgICB9XG4gICAgXG59IiwiaW1wb3J0IFBhdGhTdHJhdCBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL1BhdGhmaW5kaW5nL1BhdGhTdHJhdGVneVwiO1xuaW1wb3J0IFZlYzIgZnJvbSBcIi4uLy4uL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgTmF2aWdhdGlvblBhdGggZnJvbSBcIi4uL05hdmlnYXRpb25QYXRoXCI7XG5pbXBvcnQgTmF2bWVzaCBmcm9tIFwiLi4vTmF2bWVzaFwiO1xuXG4vKipcbiAqIEFuIGFic3RyYWN0IG5hdmlnYXRpb24gc3RyYXRlZ3kgZm9yIFdvbGZpZTJEcyBuYXZpZ2F0aW9uIHN5c3RlbS4gWW91IGNhbiBleHRlbmQgdGhpcyBjbGFzcyB0byBjcmVhdGVcbiAqIHlvdXIgb3duIHN0cmF0ZWd5IGZvciBjb25zdHJ1Y3RpbmcgYSBOYXZpZ2F0aW9uUGF0aCBmb3IgdGhlIG5hdmlnYXRpb24gc3lzdGVtLlxuICogQGF1dGhvciBQZXRleUx1bXBraW5zXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIE5hdmlnYXRpb25TdHJhdGVneSBpbXBsZW1lbnRzIFBhdGhTdHJhdDxWZWMyLCBOYXZpZ2F0aW9uUGF0aD4ge1xuXG4gICAgLyoqIFRoZSBOYXZtZXNoIHdlJ3JlIGNyZWF0aW5nIHBhdGhzIGZvciAqL1xuICAgIHByb3RlY3RlZCBfbWVzaDogTmF2bWVzaDtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihtZXNoOiBOYXZtZXNoKSB7XG4gICAgICAgIHRoaXMubWVzaCA9IG1lc2hcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IG1lc2goKTogTmF2bWVzaHsgcmV0dXJuIHRoaXMuX21lc2g7IH1cbiAgICBwcm90ZWN0ZWQgc2V0IG1lc2gobWVzaDogTmF2bWVzaCkgeyB0aGlzLl9tZXNoID0gbWVzaDsgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEJ1aWxkcyBhIG5ldyBOYXZpZ2F0aW9uUGF0aC4gSG93IHRoZSBwYXRoIGlzIGNvbnN0cnVjdGVkIGlzIGltcGxlbWVudGF0aW9uIHNwZWNpZmljLlxuICAgICAqIEBwYXJhbSB0byB0aGUgcG9zaXRpb24gdG8gbmF2aWdhdGUgdG9cbiAgICAgKiBAcGFyYW0gZnJvbSB0aGUgcG9zaXRpb24gdG8gbmF2aWdhdGUgZnJvbVxuICAgICAqL1xuICAgIHB1YmxpYyBhYnN0cmFjdCBidWlsZFBhdGgodG86IFZlYzIsIGZyb206IFZlYzIpOiBOYXZpZ2F0aW9uUGF0aDtcbiAgICBcbn0iLCJpbXBvcnQgR2FtZU5vZGUgZnJvbSBcIi4uL05vZGVzL0dhbWVOb2RlXCI7XG5pbXBvcnQgUGh5c2ljYWwgZnJvbSBcIi4uL0RhdGFUeXBlcy9JbnRlcmZhY2VzL1BoeXNpY2FsXCI7XG5pbXBvcnQgVGlsZW1hcCBmcm9tIFwiLi4vTm9kZXMvVGlsZW1hcFwiO1xuaW1wb3J0IFBoeXNpY3NNYW5hZ2VyIGZyb20gXCIuL1BoeXNpY3NNYW5hZ2VyXCI7XG5pbXBvcnQgVmVjMiBmcm9tIFwiLi4vRGF0YVR5cGVzL1ZlYzJcIjtcbmltcG9ydCBBQUJCIGZyb20gXCIuLi9EYXRhVHlwZXMvU2hhcGVzL0FBQkJcIjtcbmltcG9ydCBPcnRob2dvbmFsVGlsZW1hcCBmcm9tIFwiLi4vTm9kZXMvVGlsZW1hcHMvT3J0aG9nb25hbFRpbGVtYXBcIjtcbmltcG9ydCBBcmVhQ29sbGlzaW9uIGZyb20gXCIuLi9EYXRhVHlwZXMvUGh5c2ljcy9BcmVhQ29sbGlzaW9uXCI7XG5pbXBvcnQgVW5pcXVlIGZyb20gXCIuLi9EYXRhVHlwZXMvSW50ZXJmYWNlcy9VbmlxdWVcIjtcblxuLyoqXG4gKiBBTEdPUklUSE06XG4gKiBcdEluIGFuIGVmZm9ydCB0byBrZWVwIHRoaW5ncyBzaW1wbGUgYW5kIHdvcmtpbmcgZWZmZWN0aXZlbHksIGVhY2ggZHluYW1pYyBub2RlIHdpbGwgcmVzb2x2ZSBpdHNcbiAqIFx0Y29sbGlzaW9ucyBjb25zaWRlcmluZyB0aGUgcmVzdCBvZiB0aGUgd29ybGQgYXMgc3RhdGljLlxuICogXG4gKiBcdENvbGxpc2lvbiBkZXRlY3Rpbmcgd2lsbCBoYXBwZW4gZmlyc3QuIFRoaXMgY2FuIGJlIGNvbnNpZGVyZWQgYSBicm9hZCBwaGFzZSwgYnV0IGl0IGlzIG5vdCBlc3BlY2lhbGx5XG4gKiBcdGVmZmljaWVudCwgYXMgaXQgZG9lcyBub3QgbmVlZCB0byBiZSBmb3IgdGhpcyBnYW1lIGVuZ2luZS4gRXZlcnkgZHluYW1pYyBub2RlIGlzIGNoZWNrZWQgYWdhaW5zdCBldmVyeVxuICogXHRvdGhlciBub2RlIGZvciBjb2xsaXNpb24gYXJlYS4gSWYgY29sbGlzaW9uIGFyZWEgaXMgbm9uLXplcm8gKG1lYW5pbmcgdGhlIGN1cnJlbnQgbm9kZSBzd2VlcHMgaW50byBhbm90aGVyKSxcbiAqIFx0aXQgaXMgYWRkZWQgdG8gYSBsaXN0IG9mIGhpdHMuXG4gKiBcbiAqIFx0SU5JVElBTElaQVRJT046XG4gKiBcdFx0LSBQaHlzaWNzIGNvbnN0YW50cyBhcmUgcmVzZXRcbiAqIFx0XHQtIFN3ZXB0IHNoYXBlcyBhcmUgcmVjYWxjdWxhdGVkLiBJZiBhIG5vZGUgaXNuJ3QgbW92aW5nLCBpdCBpcyBza2lwcGVkLlxuICogXG4gKiBcdENPTExJU0lPTiBERVRFQ1RJT046XG4gKiBcdFx0LSBGb3IgYSBub2RlLCBjb2xsaXNpb24gYXJlYSB3aWxsIGJlIGNhbGN1bGF0ZWQgdXNpbmcgdGhlIHN3ZXB0IEFBQkIgb2YgdGhlIG5vZGUgYWdhaW5zdCBldmVyeSBvdGhlciBBQUJCIGluIGEgc3RhdGljIHN0YXRlXG4gKiBcdFx0LSBUaGVzZSBjb2xsaXNpb25zIHdpbGwgYmUgc29ydGVkIGJ5IGFyZWEgaW4gZGVzY2VuZGluZyBvcmRlclxuICogXHRcbiAqIFx0Q09MTElTSU9OIFJFU09MVVRJT046XG4gKiBcdFx0LSBGb3IgZWFjaCBoaXQsIHRpbWUgb2YgY29sbGlzaW9uIGlzIGNhbGN1bGF0ZWQgdXNpbmcgYSBzd2VwdCBsaW5lIHRocm91Z2ggdGhlIEFBQkIgb2YgdGhlIHN0YXRpYyBub2RlIGV4cGFuZGVkXG4gKiBcdFx0XHR3aXRoIG1pbmtvd3NraSBzdW1zIChkaXNjcmV0ZWx5LCBidXQgdGhlIGNvbmNlcHQgaXMgdGhlcmUpXG4gKiBcdFx0LSBUaGUgY29sbGlzaW9uIGlzIHJlc29sdmVkIGJhc2VkIG9uIHRoZSBuZWFyIHRpbWUgb2YgdGhlIGNvbGxpc2lvbiAoZnJvbSBtZXRob2Qgb2Ygc2VwYXJhdGVkIGF4ZXMpXG4gKiBcdFx0XHQtIFggaXMgcmVzb2x2ZWQgYnkgbmVhciB4LCBZIGJ5IG5lYXIgeS5cbiAqIFx0XHRcdC0gVGhlcmUgaXMgc29tZSBmdWRnaW5nIHRvIGFsbG93IGZvciBzbGlkaW5nIGFsb25nIHdhbGxzIG9mIHNlcGFyYXRlIGNvbGxpZGVycy4gU29ydGluZyBieSBhcmVhIGFsc28gaGVscHMgd2l0aCB0aGlzLlxuICogXHRcdFx0LSBDb3JuZXIgdG8gY29ybmVyIGNvbGxpc2lvbnMgYXJlIHJlc29sdmUgdG8gZmF2b3IgeC1tb3ZlbWVudC4gVGhpcyBpcyBpbiBjb25zaWRlcmF0aW9uIG9mIHBsYXRmb3JtZXJzLCB0byBnaXZlXG4gKiBcdFx0XHRcdHRoZSBwbGF5ZXIgc29tZSBoZWxwIHdpdGgganVtcHNcbiAqIFxuICogXHRQcm9zOlxuICogXHRcdC0gRXZlcnl0aGluZyBoYXBwZW5zIHdpdGggYSBjb25zaXN0ZW50IHRpbWUuIFRoZXJlIGlzIGEgZGlzdGluY3QgYmVmb3JlIGFuZCBhZnRlciBmb3IgZWFjaCByZXNvbHV0aW9uLlxuICogXHRcdC0gTm8gYmFjay10cmFja2luZyBuZWVkcyB0byBiZSBkb25lLiBPbmNlIHdlIHJlc29sdmUgYSBub2RlLCBpdCBpcyBkZWZpbml0aXZlbHkgcmVzb2x2ZWQuXG4gKiBcdFxuICogXHRDb25zOlxuICogXHRcdC0gTm9kZXMgdGhhdCBhcmUgcHJvY2Vzc2VkIGVhcmx5IGhhdmUgbW92ZW1lbnQgcHJpb3JpdHkgb3ZlciBvdGhlciBub2Rlcy4gVGhpcyBjYW4gbGVhZCB0byBzb21lIHVuZGVzaXJhYmxlIGludGVyYWN0aW9ucy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFzaWNQaHlzaWNzTWFuYWdlciBleHRlbmRzIFBoeXNpY3NNYW5hZ2VyIHtcblxuXHQvKiogVGhlIGFycmF5IG9mIHN0YXRpYyBub2RlcyAqL1xuXHRwcm90ZWN0ZWQgc3RhdGljTm9kZXM6IEFycmF5PFBoeXNpY2FsPjtcblxuXHQvKiogVGhlIGFycmF5IG9mIGR5bmFtaWMgbm9kZXMgKi9cblx0cHJvdGVjdGVkIGR5bmFtaWNOb2RlczogQXJyYXk8UGh5c2ljYWw+O1xuXG5cdC8qKiBUaGUgYXJyYXkgb2YgdGlsZW1hcHMgKi9cblx0cHJvdGVjdGVkIHRpbGVtYXBzOiBBcnJheTxUaWxlbWFwPjtcblxuXHQvKiogQW4gYXJyYXkgb2YgdGhlIGNvbGxpc2lvbiBtYXNrcyBmb3IgZWFjaCBncm91cCAqL1xuXHRwcm90ZWN0ZWQgY29sbGlzaW9uTWFza3M6IEFycmF5PG51bWJlcj47XG5cblx0Y29uc3RydWN0b3Iob3B0aW9uczogUmVjb3JkPHN0cmluZywgYW55Pil7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLnN0YXRpY05vZGVzID0gbmV3IEFycmF5KCk7XG5cdFx0dGhpcy5keW5hbWljTm9kZXMgPSBuZXcgQXJyYXkoKTtcblx0XHR0aGlzLnRpbGVtYXBzID0gbmV3IEFycmF5KCk7XG5cdFx0dGhpcy5jb2xsaXNpb25NYXNrcyA9IG5ldyBBcnJheSgzMik7XG5cblx0XHQvLyBQYXJzZSBvcHRpb25zXG5cdFx0dGhpcy5wYXJzZU9wdGlvbnMob3B0aW9ucyk7XG5cdH1cblxuXHQvKipcblx0ICogUGFyc2VzIHRoZSBvcHRpb25zIGZvciBjb25zdHJ1Y3RpbmcgdGhlIHBoeXNpY3MgbWFuYWdlclxuXHQgKiBAcGFyYW0gb3B0aW9ucyBBIHJlY29yZCBvZiBvcHRpb25zXG5cdCAqL1xuXHRwcm90ZWN0ZWQgcGFyc2VPcHRpb25zKG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIGFueT4pOiB2b2lkIHtcblx0XHRpZihvcHRpb25zLmdyb3VwTmFtZXMgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLmNvbGxpc2lvbnMgIT09IHVuZGVmaW5lZCl7XG5cdFx0XHRmb3IobGV0IGkgPSAwOyBpIDwgb3B0aW9ucy5ncm91cE5hbWVzLmxlbmd0aDsgaSsrKXtcblx0XHRcdFx0bGV0IGdyb3VwID0gb3B0aW9ucy5ncm91cE5hbWVzW2ldO1xuXG5cdFx0XHRcdC8vIFJlZ2lzdGVyIHRoZSBncm91cCBuYW1lIGFuZCBudW1iZXJcblx0XHRcdFx0dGhpcy5ncm91cE5hbWVzW2ldID0gZ3JvdXA7XG5cblx0XHRcdFx0dGhpcy5ncm91cE1hcC5zZXQoZ3JvdXAsIDEgPDwgaSk7XG5cblx0XHRcdFx0bGV0IGNvbGxpc2lvbk1hc2sgPSAwO1xuXG5cdFx0XHRcdGZvcihsZXQgaiA9IDA7IGogPCBvcHRpb25zLmNvbGxpc2lvbnNbaV0ubGVuZ3RoOyBqKyspe1xuXHRcdFx0XHRcdGlmKG9wdGlvbnMuY29sbGlzaW9uc1tpXVtqXSl7XG5cdFx0XHRcdFx0XHRjb2xsaXNpb25NYXNrIHw9IDEgPDwgajtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGlzLmNvbGxpc2lvbk1hc2tzW2ldID0gY29sbGlzaW9uTWFzaztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBAb3ZlcnJpZGVcblx0cmVnaXN0ZXJPYmplY3Qobm9kZTogUGh5c2ljYWwpOiB2b2lkIHtcblx0XHRpZihub2RlLmlzU3RhdGljKXtcblx0XHRcdC8vIFN0YXRpYyBhbmQgbm90IGNvbGxpZGFibGVcblx0XHRcdHRoaXMuc3RhdGljTm9kZXMucHVzaChub2RlKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gRHluYW1pYyBhbmQgbm90IGNvbGxpZGFibGVcblx0XHRcdHRoaXMuZHluYW1pY05vZGVzLnB1c2gobm9kZSk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gQG92ZXJyaWRlXG5cdGRlcmVnaXN0ZXJPYmplY3Qobm9kZTogUGh5c2ljYWwpOiB2b2lkIHtcblx0XHRpZihub2RlLmlzU3RhdGljKXtcblx0XHRcdC8vIFJlbW92ZSB0aGUgbm9kZSBmcm9tIHRoZSBzdGF0aWMgbGlzdFxuXHRcdFx0Y29uc3QgaW5kZXggPSB0aGlzLnN0YXRpY05vZGVzLmluZGV4T2Yobm9kZSk7XG5cdFx0XHR0aGlzLnN0YXRpY05vZGVzLnNwbGljZShpbmRleCwgMSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFJlbW92ZSB0aGUgbm9kZSBmcm9tIHRoZSBkeW5hbWljIGxpc3Rcblx0XHRcdGNvbnN0IGluZGV4ID0gdGhpcy5keW5hbWljTm9kZXMuaW5kZXhPZihub2RlKTtcblx0XHRcdHRoaXMuZHluYW1pY05vZGVzLnNwbGljZShpbmRleCwgMSk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gQG92ZXJyaWRlXG5cdHJlZ2lzdGVyVGlsZW1hcCh0aWxlbWFwOiBUaWxlbWFwKTogdm9pZCB7XG5cdFx0dGhpcy50aWxlbWFwcy5wdXNoKHRpbGVtYXApO1xuXHR9XG5cblx0Ly8gQG92ZXJyaWRlXG5cdGRlcmVnaXN0ZXJUaWxlbWFwKHRpbGVtYXA6IFRpbGVtYXApOiB2b2lkIHtcblx0XHRjb25zdCBpbmRleCA9IHRoaXMudGlsZW1hcHMuaW5kZXhPZih0aWxlbWFwKTtcblx0XHR0aGlzLnRpbGVtYXBzLnNwbGljZShpbmRleCwgMSk7XG5cdH1cblxuXHQvLyBAb3ZlcnJpZGVcblx0dXBkYXRlKGRlbHRhVDogbnVtYmVyKTogdm9pZCB7XG5cdFx0Zm9yKGxldCBub2RlIG9mIHRoaXMuZHluYW1pY05vZGVzKXtcblx0XHRcdC8qLS0tLS0tLS0tLSBJTklUSUFMSVpBVElPTiBQSEFTRSAtLS0tLS0tLS0tKi9cblx0XHRcdC8vIENsZWFyIGZyYW1lIGRlcGVuZGVudCBib29sZWFuIHZhbHVlcyBmb3IgZWFjaCBub2RlXG5cdFx0XHRub2RlLm9uR3JvdW5kID0gZmFsc2U7XG5cdFx0XHRub2RlLm9uQ2VpbGluZyA9IGZhbHNlO1xuXHRcdFx0bm9kZS5vbldhbGwgPSBmYWxzZTtcblx0XHRcdG5vZGUuY29sbGlkZWRXaXRoVGlsZW1hcCA9IGZhbHNlO1xuXHRcdFx0bm9kZS5pc0NvbGxpZGluZyA9IGZhbHNlO1xuXG5cdFx0XHQvLyBJZiB0aGlzIG5vZGUgaXMgbm90IGFjdGl2ZSwgZG9uJ3QgcHJvY2VzcyBpdFxuXHRcdFx0aWYoIW5vZGUuYWN0aXZlKXtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFVwZGF0ZSB0aGUgc3dlcHQgc2hhcGVzIG9mIGVhY2ggbm9kZVxuXHRcdFx0aWYobm9kZS5tb3Zpbmcpe1xuXHRcdFx0XHQvLyBJZiBtb3ZpbmcsIHJlZmxlY3QgdGhhdCBpbiB0aGUgc3dlcHQgc2hhcGVcblx0XHRcdFx0bm9kZS5zd2VwdFJlY3Quc3dlZXAobm9kZS5fdmVsb2NpdHksIG5vZGUuY29sbGlzaW9uU2hhcGUuY2VudGVyLCBub2RlLmNvbGxpc2lvblNoYXBlLmhhbGZTaXplKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIElmIG91ciBub2RlIGlzbid0IG1vdmluZywgZG9uJ3QgYm90aGVyIHRvIGNoZWNrIGl0IChvdGhlciBub2RlcyB3aWxsIGRldGVjdCBpZiB0aGV5IHJ1biBpbnRvIGl0KVxuXHRcdFx0XHRub2RlLl92ZWxvY2l0eS56ZXJvKCk7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvKi0tLS0tLS0tLS0gREVURUNUSU9OIFBIQVNFIC0tLS0tLS0tLS0qL1xuXHRcdFx0Ly8gR2F0aGVyIGEgc2V0IG9mIG92ZXJsYXBzXG5cdFx0XHRsZXQgb3ZlcmxhcHMgPSBuZXcgQXJyYXk8QXJlYUNvbGxpc2lvbj4oKTtcblxuXHRcdFx0bGV0IGdyb3VwSW5kZXggPSBub2RlLmdyb3VwID09PSAtMSA/IC0xIDogTWF0aC5sb2cyKG5vZGUuZ3JvdXApO1xuXG5cdFx0XHQvLyBGaXJzdCwgY2hlY2sgdGhpcyBub2RlIGFnYWluc3QgZXZlcnkgc3RhdGljIG5vZGUgKG9yZGVyIGRvZXNuJ3QgYWN0dWFsbHkgbWF0dGVyIGhlcmUsIHNpbmNlIHdlIHNvcnQgYW55d2F5cylcblx0XHRcdGZvcihsZXQgb3RoZXIgb2YgdGhpcy5zdGF0aWNOb2Rlcyl7XG5cdFx0XHRcdC8vIElnbm9yZSBpbmFjdGl2ZSBub2Rlc1xuXHRcdFx0XHRpZighb3RoZXIuYWN0aXZlKSBjb250aW51ZTtcblxuXHRcdFx0XHRsZXQgY29sbGlkZXIgPSBvdGhlci5jb2xsaXNpb25TaGFwZS5nZXRCb3VuZGluZ1JlY3QoKTtcblx0XHRcdFx0bGV0IGFyZWEgPSBub2RlLnN3ZXB0UmVjdC5vdmVybGFwQXJlYShjb2xsaWRlcik7XG5cdFx0XHRcdGlmKGFyZWEgPiAwKXtcblx0XHRcdFx0XHQvLyBXZSBoYWQgYSBjb2xsaXNpb25cblx0XHRcdFx0XHRvdmVybGFwcy5wdXNoKG5ldyBBcmVhQ29sbGlzaW9uKGFyZWEsIGNvbGxpZGVyLCBvdGhlciwgXCJHYW1lTm9kZVwiLCBudWxsKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gVGhlbiwgY2hlY2sgaXQgYWdhaW5zdCBldmVyeSBkeW5hbWljIG5vZGVcblx0XHRcdGZvcihsZXQgb3RoZXIgb2YgdGhpcy5keW5hbWljTm9kZXMpe1xuXHRcdFx0XHQvLyBJZ25vcmUgb3Vyc2VsdmVzXG5cdFx0XHRcdGlmKG5vZGUgPT09IG90aGVyKSBjb250aW51ZTtcblxuXHRcdFx0XHQvLyBJZ25vcmUgaW5hY3RpdmUgbm9kZXNcblx0XHRcdFx0aWYoIW90aGVyLmFjdGl2ZSkgY29udGludWU7XG5cblx0XHRcdFx0bGV0IGNvbGxpZGVyID0gb3RoZXIuY29sbGlzaW9uU2hhcGUuZ2V0Qm91bmRpbmdSZWN0KCk7XG5cdFx0XHRcdGxldCBhcmVhID0gbm9kZS5zd2VwdFJlY3Qub3ZlcmxhcEFyZWEoY29sbGlkZXIpO1xuXHRcdFx0XHRpZihhcmVhID4gMCl7XG5cdFx0XHRcdFx0Ly8gV2UgaGFkIGEgY29sbGlzaW9uXG5cdFx0XHRcdFx0b3ZlcmxhcHMucHVzaChuZXcgQXJlYUNvbGxpc2lvbihhcmVhLCBjb2xsaWRlciwgb3RoZXIsIFwiR2FtZU5vZGVcIiwgbnVsbCkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIExhc3RseSwgZ2F0aGVyIGEgc2V0IG9mIEFBQkJzIGZyb20gdGhlIHRpbGVtYXAuXG5cdFx0XHQvLyBUaGlzIHN0ZXAgaW52b2x2ZXMgdGhlIG1vc3QgZXh0cmEgd29yaywgc28gaXQgaXMgYWJzdHJhY3RlZCBpbnRvIGEgbWV0aG9kXG5cdFx0XHRmb3IobGV0IHRpbGVtYXAgb2YgdGhpcy50aWxlbWFwcyl7XG5cdFx0XHRcdC8vIElnbm9yZSBpbmFjdGl2ZSB0aWxlbWFwc1xuXHRcdFx0XHRpZighdGlsZW1hcC5hY3RpdmUpIGNvbnRpbnVlO1xuXG5cdFx0XHRcdGlmKHRpbGVtYXAgaW5zdGFuY2VvZiBPcnRob2dvbmFsVGlsZW1hcCl7XG5cdFx0XHRcdFx0dGhpcy5jb2xsaWRlV2l0aE9ydGhvZ29uYWxUaWxlbWFwKG5vZGUsIHRpbGVtYXAsIG92ZXJsYXBzKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBTb3J0IHRoZSBvdmVybGFwcyBieSBhcmVhXG5cdFx0XHRvdmVybGFwcyA9IG92ZXJsYXBzLnNvcnQoKGEsIGIpID0+IGIuYXJlYSAtIGEuYXJlYSk7XG5cblx0XHRcdC8vIEtlZXAgdHJhY2sgb2YgaGl0cyB0byB1c2UgbGF0ZXJcblx0XHRcdGxldCBoaXRzID0gW107XG5cblx0XHRcdC8qLS0tLS0tLS0tLSBSRVNPTFVUSU9OIFBIQVNFIC0tLS0tLS0tLS0qL1xuXHRcdFx0Ly8gRm9yIGV2ZXJ5IG92ZXJsYXAsIGRldGVybWluZSBpZiB3ZSBuZWVkIHRvIGNvbGxpZGUgd2l0aCBpdCBhbmQgd2hlblxuXHRcdFx0Zm9yKGxldCBvdmVybGFwIG9mIG92ZXJsYXBzKXtcblx0XHRcdFx0Ly8gSWdub3JlIG5vZGVzIHdlIGRvbid0IGludGVyYWN0IHdpdGhcblx0XHRcdFx0aWYoIGdyb3VwSW5kZXggIT09IC0xICYmIG92ZXJsYXAub3RoZXIuZ3JvdXAgIT09IC0xICYmICgodGhpcy5jb2xsaXNpb25NYXNrc1tncm91cEluZGV4XSAmIG92ZXJsYXAub3RoZXIuZ3JvdXApID09PSAwKSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdC8vIERvIGEgc3dlcHQgbGluZSB0ZXN0IG9uIHRoZSBzdGF0aWMgQUFCQiB3aXRoIHRoaXMgQUFCQiBzaXplIGFzIHBhZGRpbmcgKHRoaXMgaXMgYmFzaWNhbGx5IHVzaW5nIGEgbWlua293c2tpIHN1bSEpXG5cdFx0XHRcdC8vIFN0YXJ0IHRoZSBzd2VlcCBhdCB0aGUgcG9zaXRpb24gb2YgdGhpcyBub2RlIHdpdGggYSBkZWx0YSBvZiBfdmVsb2NpdHlcblx0XHRcdFx0Y29uc3QgcG9pbnQgPSBub2RlLmNvbGxpc2lvblNoYXBlLmNlbnRlcjtcblx0XHRcdFx0Y29uc3QgZGVsdGEgPSBub2RlLl92ZWxvY2l0eTtcblx0XHRcdFx0Y29uc3QgcGFkZGluZyA9IG5vZGUuY29sbGlzaW9uU2hhcGUuaGFsZlNpemU7XG5cdFx0XHRcdGNvbnN0IG90aGVyQUFCQiA9IG92ZXJsYXAuY29sbGlkZXI7XG5cblxuXHRcdFx0XHRjb25zdCBoaXQgPSBvdGhlckFBQkIuaW50ZXJzZWN0U2VnbWVudChub2RlLmNvbGxpc2lvblNoYXBlLmNlbnRlciwgbm9kZS5fdmVsb2NpdHksIG5vZGUuY29sbGlzaW9uU2hhcGUuaGFsZlNpemUpO1xuXG5cdFx0XHRcdG92ZXJsYXAuaGl0ID0gaGl0O1xuXG5cdFx0XHRcdGlmKGhpdCAhPT0gbnVsbCl7XG5cdFx0XHRcdFx0aGl0cy5wdXNoKGhpdCk7XG5cblx0XHRcdFx0XHQvLyBXZSBnb3QgYSBoaXQsIHJlc29sdmUgd2l0aCB0aGUgdGltZSBpbnNpZGUgb2YgdGhlIGhpdFxuXHRcdFx0XHRcdGxldCB0bmVhcnggPSBoaXQubmVhclRpbWVzLng7XG5cdFx0XHRcdFx0bGV0IHRuZWFyeSA9IGhpdC5uZWFyVGltZXMueTtcblxuXHRcdFx0XHRcdC8vIEFsbG93IGVkZ2UgY2xpcHBpbmcgKGVkZ2Ugb3ZlcmxhcHMgZG9uJ3QgY291bnQsIG9ubHkgYXJlYSBvdmVybGFwcylcblx0XHRcdFx0XHQvLyBJbXBvcnRhbnRseSBkb24ndCBhbGxvdyBib3RoIGNhc2VzIHRvIGJlIHRydWUuIFRoZW4gd2UgY2xpcCB0aHJvdWdoIGNvcm5lcnMuIEZhdm9yIHggdG8gaGVscCBwbGF5ZXJzIGxhbmQganVtcHNcblx0XHRcdFx0XHRpZih0bmVhcnggPCAxLjAgJiYgKHBvaW50LnkgPT09IG90aGVyQUFCQi50b3AgLSBwYWRkaW5nLnkgfHwgcG9pbnQueSA9PT0gb3RoZXJBQUJCLmJvdHRvbSArIHBhZGRpbmcueSkgJiYgZGVsdGEueCAhPT0gMCkge1xuXHRcdFx0XHRcdFx0dG5lYXJ4ID0gMS4wO1xuXHRcdFx0XHRcdH0gZWxzZSBpZih0bmVhcnkgPCAxLjAgJiYgKHBvaW50LnggPT09IG90aGVyQUFCQi5sZWZ0IC0gcGFkZGluZy54IHx8IHBvaW50LnggPT09IG90aGVyQUFCQi5yaWdodCArIHBhZGRpbmcueCkgJiYgZGVsdGEueSAhPT0gMCkge1xuXHRcdFx0XHRcdFx0dG5lYXJ5ID0gMS4wO1xuXHRcdFx0XHRcdH1cblxuXG5cdFx0XHRcdFx0aWYoaGl0Lm5lYXJUaW1lcy54ID49IDAgJiYgaGl0Lm5lYXJUaW1lcy54IDwgMSl7XG5cdFx0XHRcdFx0XHQvLyBBbnkgdGlsZW1hcCBvYmplY3RzIHRoYXQgbWFkZSBpdCBoZXJlIGFyZSBjb2xsaWRhYmxlXG5cdFx0XHRcdFx0XHRpZihvdmVybGFwLnR5cGUgPT09IFwiVGlsZW1hcFwiIHx8IG92ZXJsYXAub3RoZXIuaXNDb2xsaWRhYmxlKXtcblx0XHRcdFx0XHRcdFx0bm9kZS5fdmVsb2NpdHkueCA9IG5vZGUuX3ZlbG9jaXR5LnggKiB0bmVhcng7XG5cdFx0XHRcdFx0XHRcdG5vZGUuaXNDb2xsaWRpbmcgPSB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmKGhpdC5uZWFyVGltZXMueSA+PSAwICYmIGhpdC5uZWFyVGltZXMueSA8IDEpe1xuXHRcdFx0XHRcdFx0Ly8gQW55IHRpbGVtYXAgb2JqZWN0cyB0aGF0IG1hZGUgaXQgaGVyZSBhcmUgY29sbGlkYWJsZVxuXHRcdFx0XHRcdFx0aWYob3ZlcmxhcC50eXBlID09PSBcIlRpbGVtYXBcIiB8fCBvdmVybGFwLm90aGVyLmlzQ29sbGlkYWJsZSl7XG5cdFx0XHRcdFx0XHRcdG5vZGUuX3ZlbG9jaXR5LnkgPSBub2RlLl92ZWxvY2l0eS55ICogdG5lYXJ5O1xuXHRcdFx0XHRcdFx0XHRub2RlLmlzQ29sbGlkaW5nID0gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0LyotLS0tLS0tLS0tIElORk9STUFUSU9OL1RSSUdHRVIgUEhBU0UgLS0tLS0tLS0tLSovXG5cdFx0XHQvLyBDaGVjayBpZiB3ZSBlbmRlZCB1cCBvbiB0aGUgZ3JvdW5kLCBjZWlsaW5nIG9yIHdhbGxcblx0XHRcdC8vIEFsc28gY2hlY2sgZm9yIHRyaWdnZXJzXG5cdFx0XHRmb3IobGV0IG92ZXJsYXAgb2Ygb3ZlcmxhcHMpe1xuXHRcdFx0XHQvLyBDaGVjayBmb3IgYSB0cmlnZ2VyLiBJZiB3ZSBjYXJlIGFib3V0IHRoZSB0cmlnZ2VyLCByZWFjdFxuXHRcdFx0XHRpZihvdmVybGFwLm90aGVyLmlzVHJpZ2dlciAmJiAob3ZlcmxhcC5vdGhlci50cmlnZ2VyTWFzayAmIG5vZGUuZ3JvdXApICYmIG5vZGUuZ3JvdXAgIT0gLTEpe1xuXHRcdFx0XHRcdC8vIEdldCB0aGUgYml0IHRoYXQgdGhpcyBncm91cCBpcyByZXByZXNlbnRlZCBieVxuXHRcdFx0XHRcdGxldCBpbmRleCA9IE1hdGguZmxvb3IoTWF0aC5sb2cyKG5vZGUuZ3JvdXApKTtcblxuXHRcdFx0XHRcdC8vIEV4dHJhY3QgdGhlIHRyaWdnZXJFbnRlciBldmVudCBuYW1lXG5cdFx0XHRcdFx0dGhpcy5lbWl0dGVyLmZpcmVFdmVudChvdmVybGFwLm90aGVyLnRyaWdnZXJFbnRlcnNbaW5kZXhdLCB7XG5cdFx0XHRcdFx0XHRub2RlOiAoPEdhbWVOb2RlPm5vZGUpLmlkLFxuXHRcdFx0XHRcdFx0b3RoZXI6ICg8R2FtZU5vZGU+b3ZlcmxhcC5vdGhlcikuaWRcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIElnbm9yZSBjb2xsaXNpb24gc2lkZXMgZm9yIG5vZGVzIHdlIGRvbid0IGludGVyYWN0IHdpdGhcblx0XHRcdFx0aWYoIGdyb3VwSW5kZXggIT09IC0xICYmIG92ZXJsYXAub3RoZXIuZ3JvdXAgIT09IC0xICYmICgodGhpcy5jb2xsaXNpb25NYXNrc1tncm91cEluZGV4XSAmIG92ZXJsYXAub3RoZXIuZ3JvdXApID09PSAwKSkgY29udGludWU7XG5cblx0XHRcdFx0Ly8gT25seSBjaGVjayBmb3IgZGlyZWN0aW9uIGlmIHRoZSBvdmVybGFwIHdhcyBjb2xsaWRhYmxlXG5cdFx0XHRcdGlmKG92ZXJsYXAudHlwZSA9PT0gXCJUaWxlbWFwXCIgfHwgb3ZlcmxhcC5vdGhlci5pc0NvbGxpZGFibGUpe1xuXHRcdFx0XHRcdGxldCBjb2xsaXNpb25TaWRlID0gb3ZlcmxhcC5jb2xsaWRlci50b3VjaGVzQUFCQldpdGhvdXRDb3JuZXJzKG5vZGUuY29sbGlzaW9uU2hhcGUuZ2V0Qm91bmRpbmdSZWN0KCkpO1xuXHRcdFx0XHRcdGlmKGNvbGxpc2lvblNpZGUgIT09IG51bGwpe1xuXHRcdFx0XHRcdFx0Ly8gSWYgd2UgdG91Y2gsIG5vdCBpbmNsdWRpbmcgY29ybmVyIGNhc2VzLCBjaGVjayB0aGUgY29sbGlzaW9uIG5vcm1hbFxuXHRcdFx0XHRcdFx0aWYob3ZlcmxhcC5oaXQgIT09IG51bGwpe1xuXHRcdFx0XHRcdFx0XHQvLyBJZiB3ZSBoaXQgYSB0aWxlbWFwLCBrZWVwIHRyYWNrIG9mIGl0XG5cdFx0XHRcdFx0XHRcdGlmKG92ZXJsYXAudHlwZSA9PSBcIlRpbGVtYXBcIil7XG5cdFx0XHRcdFx0XHRcdFx0bm9kZS5jb2xsaWRlZFdpdGhUaWxlbWFwID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGlmKGNvbGxpc2lvblNpZGUueSA9PT0gLTEpe1xuXHRcdFx0XHRcdFx0XHRcdC8vIE5vZGUgaXMgb24gdG9wIG9mIG92ZXJsYXAsIHNvIG9uR3JvdW5kXG5cdFx0XHRcdFx0XHRcdFx0bm9kZS5vbkdyb3VuZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZihjb2xsaXNpb25TaWRlLnkgPT09IDEpe1xuXHRcdFx0XHRcdFx0XHRcdC8vIE5vZGUgaXMgb24gYm90dG9tIG9mIG92ZXJsYXAsIHNvIG9uQ2VpbGluZ1xuXHRcdFx0XHRcdFx0XHRcdG5vZGUub25DZWlsaW5nID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBOb2RlIHdhc24ndCB0b3VjaGluZyBvbiB5LCBzbyBpdCBpcyB0b3VjaGluZyBvbiB4XG5cdFx0XHRcdFx0XHRcdFx0bm9kZS5vbldhbGwgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJlc29sdmUgdGhlIGNvbGxpc2lvbiB3aXRoIHRoZSBub2RlLCBhbmQgbW92ZSBpdFxuXHRcdFx0bm9kZS5maW5pc2hNb3ZlKCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEhhbmRsZXMgYSBjb2xsaXNpb24gYmV0d2VlbiB0aGlzIG5vZGUgYW5kIGFuIG9ydGhvZ29uYWwgdGlsZW1hcFxuXHQgKiBAcGFyYW0gbm9kZSBUaGUgbm9kZVxuXHQgKiBAcGFyYW0gdGlsZW1hcCBUaGUgdGlsZW1hcCB0aGUgbm9kZSBtYXkgYmUgY29sbGlkaW5nIHdpdGhcblx0ICogQHBhcmFtIG92ZXJsYXBzIFRoZSBsaXN0IG9mIG92ZXJsYXBzXG5cdCAqL1xuXHRwcm90ZWN0ZWQgY29sbGlkZVdpdGhPcnRob2dvbmFsVGlsZW1hcChub2RlOiBQaHlzaWNhbCwgdGlsZW1hcDogT3J0aG9nb25hbFRpbGVtYXAsIG92ZXJsYXBzOiBBcnJheTxBcmVhQ29sbGlzaW9uPik6IHZvaWQge1xuXHRcdC8vIEdldCB0aGUgbWluIGFuZCBtYXggeCBhbmQgeSBjb29yZGluYXRlcyBvZiB0aGUgbW92aW5nIG5vZGVcblx0XHRsZXQgbWluID0gbmV3IFZlYzIobm9kZS5zd2VwdFJlY3QubGVmdCwgbm9kZS5zd2VwdFJlY3QudG9wKTtcblx0XHRsZXQgbWF4ID0gbmV3IFZlYzIobm9kZS5zd2VwdFJlY3QucmlnaHQsIG5vZGUuc3dlcHRSZWN0LmJvdHRvbSk7XG5cblx0XHQvLyBDb252ZXJ0IHRoZSBtaW4vbWF4IHgveSB0byB0aGUgbWluIGFuZCBtYXggcm93L2NvbCBpbiB0aGUgdGlsZW1hcCBhcnJheVxuXHRcdGxldCBtaW5JbmRleCA9IHRpbGVtYXAuZ2V0TWluQ29sUm93KG5vZGUuc3dlcHRSZWN0KTtcblx0XHRsZXQgbWF4SW5kZXggPSB0aWxlbWFwLmdldE1heENvbFJvdyhub2RlLnN3ZXB0UmVjdCk7XG5cblx0XHQvLyBMb29wIG92ZXIgYWxsIHBvc3NpYmxlIHRpbGVzICh3aGljaCBpc24ndCBtYW55IGluIHRoZSBzY29wZSBvZiB0aGUgdmVsb2NpdHkgcGVyIGZyYW1lKVxuXHRcdGZvcihsZXQgY29sID0gbWluSW5kZXgueDsgY29sIDw9IG1heEluZGV4Lng7IGNvbCsrKXtcblx0XHRcdGZvcihsZXQgcm93ID0gbWluSW5kZXgueTsgcm93IDw9IG1heEluZGV4Lnk7IHJvdysrKXtcblx0XHRcdFx0aWYodGlsZW1hcC5pc1RpbGVDb2xsaWRhYmxlKGNvbCwgcm93KSl7XG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIGEgbmV3IGNvbGxpZGVyIGZvciB0aGlzIHRpbGVcblx0XHRcdFx0XHRsZXQgY29sbGlkZXIgPSB0aWxlbWFwLmdldFRpbGVDb2xsaWRlcihjb2wsIHJvdyk7XG5cdFx0XHRcdFx0Ly8gQ2FsY3VsYXRlIGNvbGxpc2lvbiBhcmVhIGJldHdlZW4gdGhlIG5vZGUgYW5kIHRoZSB0aWxlXG5cdFx0XHRcdFx0bGV0IGFyZWEgPSBub2RlLnN3ZXB0UmVjdC5vdmVybGFwQXJlYShjb2xsaWRlcik7XG5cdFx0XHRcdFx0aWYoYXJlYSA+IDApe1xuXHRcdFx0XHRcdFx0Ly8gV2UgaGFkIGEgY29sbGlzaW9uXG5cdFx0XHRcdFx0XHRvdmVybGFwcy5wdXNoKG5ldyBBcmVhQ29sbGlzaW9uKGFyZWEsIGNvbGxpZGVyLCB0aWxlbWFwLCBcIlRpbGVtYXBcIiwgbmV3IFZlYzIoY29sLCByb3cpKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59IiwiaW1wb3J0IFVwZGF0ZWFibGUgZnJvbSBcIi4uL0RhdGFUeXBlcy9JbnRlcmZhY2VzL1VwZGF0ZWFibGVcIjtcbmltcG9ydCBUaWxlbWFwIGZyb20gXCIuLi9Ob2Rlcy9UaWxlbWFwXCI7XG5pbXBvcnQgUmVjZWl2ZXIgZnJvbSBcIi4uL0V2ZW50cy9SZWNlaXZlclwiO1xuaW1wb3J0IEVtaXR0ZXIgZnJvbSBcIi4uL0V2ZW50cy9FbWl0dGVyXCI7XG5pbXBvcnQgTWFwIGZyb20gXCIuLi9EYXRhVHlwZXMvQ29sbGVjdGlvbnMvTWFwXCI7XG5pbXBvcnQgUGh5c2ljYWwgZnJvbSBcIi4uL0RhdGFUeXBlcy9JbnRlcmZhY2VzL1BoeXNpY2FsXCI7XG5cbi8qKlxuICogQW4gYWJzdHJhY3QgcGh5c2ljcyBtYW5hZ2VyLlxuICogVGhpcyBjbGFzcyBleHBvc2VzIGZ1bmN0aW9ucyBmb3Igc3ViY2xhc3NlcyB0byBpbXBsZW1lbnQgdGhhdCBzaG91bGQgYWxsb3cgZm9yIGEgd29ya2luZyBwaHlzaWNzIHN5c3RlbSB0byBiZSBjcmVhdGVkLlxuICovXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBQaHlzaWNzTWFuYWdlciBpbXBsZW1lbnRzIFVwZGF0ZWFibGUge1xuXHQvKiogVGhlIGV2ZW50IHJlY2VpdmVyIGZvciB0aGUgcGh5c2ljcyBzeXN0ZW0gKi9cblx0cHJvdGVjdGVkIHJlY2VpdmVyOiBSZWNlaXZlcjtcblx0LyoqIFRoZSBldmVudCBlbWl0dGVyIGZvciB0aGUgcGh5c2ljcyBzeXN0ZW0gKi9cblx0cHJvdGVjdGVkIGVtaXR0ZXI6IEVtaXR0ZXI7XG5cblx0LyoqIE1hcHMgbGF5ZXIgbmFtZXMgdG8gbnVtYmVycyAqL1xuXHRwcm90ZWN0ZWQgZ3JvdXBNYXA6IE1hcDxudW1iZXI+O1xuXG5cdC8qKiBNYXBzIGxheWVyIG51bWJlcnMgdG8gbmFtZXMgKi9cblx0cHJvdGVjdGVkIGdyb3VwTmFtZXM6IEFycmF5PHN0cmluZz47XG5cblx0LyoqIFRoZSBkZWZhdWx0IGdyb3VwIG5hbWUgKi9cblx0cHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBERUZBVUxUX0dST1VQOiBzdHJpbmcgPSBcIkRlZmF1bHRcIjtcblxuXHRjb25zdHJ1Y3Rvcigpe1xuXHRcdHRoaXMucmVjZWl2ZXIgPSBuZXcgUmVjZWl2ZXIoKTtcblx0XHR0aGlzLmVtaXR0ZXIgPSBuZXcgRW1pdHRlcigpO1xuXG5cdFx0Ly8gVGhlIGNyZWF0aW9uIGFuZCBpbXBsZW1lbnRhdGlvbiBvZiBsYXllcnMgaXMgZGVmZXJyZWQgdG8gdGhlIHN1YmNsYXNzXG5cdFx0dGhpcy5ncm91cE1hcCA9IG5ldyBNYXAoKTtcblx0XHR0aGlzLmdyb3VwTmFtZXMgPSBuZXcgQXJyYXkoKTtcblx0fVxuXG5cdGRlc3Ryb3koKTogdm9pZCB7XG5cdFx0dGhpcy5yZWNlaXZlci5kZXN0cm95KCk7XG5cdH1cblxuXHQvKipcblx0ICogUmVnaXN0ZXJzIGEgZ2FtZW5vZGUgd2l0aCB0aGlzIHBoeXNpY3MgbWFuYWdlclxuXHQgKiBAcGFyYW0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcmVnaXN0ZXJcblx0ICovXG5cdGFic3RyYWN0IHJlZ2lzdGVyT2JqZWN0KG9iamVjdDogUGh5c2ljYWwpOiB2b2lkO1xuXG5cblx0LyoqXG5cdCAqIFJlbW92ZXMgcmVmZXJlbmNlcyB0byB0aGlzIG9iamVjdCBmcm9tIHRoZSBwaHlzaWNzIG1hbmFnZXJyXG5cdCAqIEBwYXJhbSBvYmplY3QgVGhlIG9iamVjdCB0byBkZXJlZ2lzdGVyXG5cdCAqL1xuXHRhYnN0cmFjdCBkZXJlZ2lzdGVyT2JqZWN0KG9iamVjdDogUGh5c2ljYWwpOiB2b2lkO1xuXG5cdC8qKlxuXHQgKiBSZWdpc3RlcnMgYSB0aWxlbWFwIHdpdGggdGhpcyBwaHlzaWNzIG1hbmFnZXJcblx0ICogQHBhcmFtIHRpbGVtYXAgVGhlIHRpbGVtYXAgdG8gcmVnaXN0ZXJcblx0ICovXG5cdGFic3RyYWN0IHJlZ2lzdGVyVGlsZW1hcCh0aWxlbWFwOiBUaWxlbWFwKTogdm9pZDtcblxuXHQvKipcblx0ICogUmVtb3ZlcyByZWZlcmVuY2VzIHRvIHRoaXMgdGlsZW1hcCBmcm9tIHRoZSBwaHlzaWNzIG1hbmFnZXJyXG5cdCAqIEBwYXJhbSB0aWxlbWFwIFRoZSBvYmplY3QgdG8gZGVyZWdpc3RlclxuXHQgKi9cblx0YWJzdHJhY3QgZGVyZWdpc3RlclRpbGVtYXAodGlsZW1hcDogVGlsZW1hcCk6IHZvaWQ7XG5cblx0YWJzdHJhY3QgdXBkYXRlKGRlbHRhVDogbnVtYmVyKTogdm9pZDtcblxuXHQvKipcblx0ICogU2V0cyB0aGUgcGh5c2ljcyBsYXllciBvZiB0aGUgR2FtZU5vZGVcblx0ICogQHBhcmFtIG5vZGUgVGhlIEdhbWVOb2RlXG5cdCAqIEBwYXJhbSBncm91cCBUaGUgZ3JvdXAgdGhhdCB0aGUgR2FtZU5vZGUgc2hvdWxkIGJlIG9uXG5cdCAqL1xuXHRzZXRHcm91cChub2RlOiBQaHlzaWNhbCwgZ3JvdXA6IHN0cmluZyk6IHZvaWQge1xuXHRcdG5vZGUuZ3JvdXAgPSB0aGlzLmdyb3VwTWFwLmdldChncm91cCk7XG5cdH1cblxuXHQvKipcblx0ICogUmV0cmlldmVzIHRoZSBsYXllciBudW1iZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBwcm92aWRlZCBuYW1lXG5cdCAqIEBwYXJhbSBsYXllciBUaGUgbmFtZSBvZiB0aGUgbGF5ZXJcblx0ICogQHJldHVybnMgVGhlIGxheWVyIG51bWJlciwgb3IgMCBpZiB0aGVyZSBpcyBub3QgYSBsYXllciB3aXRoIHRoYXQgbmFtZSByZWdpc3RlcmVkXG5cdCAqL1xuXHRnZXRHcm91cE51bWJlcihncm91cDogc3RyaW5nKTogbnVtYmVyIHtcblx0XHRpZih0aGlzLmdyb3VwTWFwLmhhcyhncm91cCkpe1xuXHRcdFx0cmV0dXJuIHRoaXMuZ3JvdXBNYXAuZ2V0KGdyb3VwKTtcblx0XHR9IGVsc2V7XG5cdFx0XHRyZXR1cm4gMDtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogR2V0cyBhbGwgZ3JvdXAgbmFtZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBudW1iZXIgcHJvdmlkZWRcblx0ICogQHBhcmFtIGdyb3VwcyBBIG1hc2sgb2YgZ3JvdXBzXG5cdCAqIEByZXR1cm5zIEFsbCBncm91cHMgY29udGFpbmVkIGluIHRoZSBtYXNrXG5cdCAqL1xuXHRnZXRHcm91cE5hbWVzKGdyb3VwczogbnVtYmVyKTogQXJyYXk8c3RyaW5nPiB7XG5cdFx0aWYoZ3JvdXBzID09PSAtMSl7XG5cdFx0XHRyZXR1cm4gW1BoeXNpY3NNYW5hZ2VyLkRFRkFVTFRfR1JPVVBdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRsZXQgZyA9IDE7XG5cdFx0XHRsZXQgbmFtZXMgPSBbXTtcblxuXHRcdFx0Zm9yKGxldCBpID0gMDsgaSA8IDMyOyBpKyspe1xuXHRcdFx0XHRpZihnICYgZ3JvdXBzKXtcblx0XHRcdFx0XHQvLyBUaGlzIGdyb3VwIGlzIGluIHRoZSBncm91cHMgbnVtYmVyXG5cdFx0XHRcdFx0bmFtZXMucHVzaCh0aGlzLmdyb3VwTmFtZXNbaV0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gU2hpZnQgdGhlIGJpdCBvdmVyXG5cdFx0XHRcdGcgPSBnIDw8IDE7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59IiwiaW1wb3J0IFVwZGF0ZWFibGUgZnJvbSBcIi4uL0RhdGFUeXBlcy9JbnRlcmZhY2VzL1VwZGF0ZWFibGVcIjtcbmltcG9ydCBHYW1lRXZlbnQgZnJvbSBcIi4uL0V2ZW50cy9HYW1lRXZlbnRcIjtcbmltcG9ydCB7IEdhbWVFdmVudFR5cGUgfSBmcm9tIFwiLi4vRXZlbnRzL0dhbWVFdmVudFR5cGVcIjtcbmltcG9ydCBSZWNlaXZlciBmcm9tIFwiLi4vRXZlbnRzL1JlY2VpdmVyXCI7XG5cbmltcG9ydCBBYnN0cmFjdFJlcGxheWVyIGZyb20gXCIuLi9EYXRhVHlwZXMvUGxheWJhY2svQWJzdHJhY3QvQWJzdHJhY3RSZXBsYXllclwiO1xuaW1wb3J0IEFic3RyYWN0TG9nSXRlbSBmcm9tIFwiLi4vRGF0YVR5cGVzL1BsYXliYWNrL0Fic3RyYWN0L0Fic3RyYWN0TG9nSXRlbVwiO1xuaW1wb3J0IEFic3RyYWN0UmVjb3JkaW5nIGZyb20gXCIuLi9EYXRhVHlwZXMvUGxheWJhY2svQWJzdHJhY3QvQWJzdHJhY3RSZWNvcmRpbmdcIjtcbmltcG9ydCBBYnN0cmFjdFJlY29yZGVyIGZyb20gXCIuLi9EYXRhVHlwZXMvUGxheWJhY2svQWJzdHJhY3QvQWJzdHJhY3RSZWNvcmRlclwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5YmFja01hbmFnZXIgaW1wbGVtZW50cyBVcGRhdGVhYmxlIHtcblxuICAgIHByb3RlY3RlZCByZWNvcmRlcjogQWJzdHJhY3RSZWNvcmRlcjxBYnN0cmFjdFJlY29yZGluZzxBYnN0cmFjdExvZ0l0ZW0+LCBBYnN0cmFjdExvZ0l0ZW0+O1xuICAgIHByb3RlY3RlZCByZWNvcmRpbmc6IGJvb2xlYW47XG5cbiAgICBwcm90ZWN0ZWQgcmVwbGF5ZXI6IEFic3RyYWN0UmVwbGF5ZXI8QWJzdHJhY3RSZWNvcmRpbmc8QWJzdHJhY3RMb2dJdGVtPiwgQWJzdHJhY3RMb2dJdGVtPjtcbiAgICBwcm90ZWN0ZWQgcGxheWluZzogYm9vbGVhbjtcblxuICAgIHByb3RlY3RlZCBsYXN0UmVjb3JkaW5nOiBBYnN0cmFjdFJlY29yZGluZzxBYnN0cmFjdExvZ0l0ZW0+O1xuXG4gICAgcHJvdGVjdGVkIHJlY2VpdmVyOiBSZWNlaXZlcjtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnJlY29yZGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBsYXlpbmcgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucmVjZWl2ZXIgPSBuZXcgUmVjZWl2ZXIoKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoW0dhbWVFdmVudFR5cGUuU1RBUlRfUkVDT1JESU5HLCBHYW1lRXZlbnRUeXBlLlNUT1BfUkVDT1JESU5HLCBHYW1lRXZlbnRUeXBlLlBMQVlfUkVDT1JESU5HXSk7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZShkZWx0YVQ6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB3aGlsZSAodGhpcy5yZWNlaXZlci5oYXNOZXh0RXZlbnQoKSkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFdmVudCh0aGlzLnJlY2VpdmVyLmdldE5leHRFdmVudCgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnJlY29yZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVjb3JkZXIudXBkYXRlKGRlbHRhVCk7XG4gICAgICAgICAgICB0aGlzLnJlY29yZGluZyA9IHRoaXMucmVjb3JkZXIuYWN0aXZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucmVwbGF5ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5yZXBsYXllci51cGRhdGUoZGVsdGFUKTtcbiAgICAgICAgICAgIHRoaXMucGxheWluZyA9IHRoaXMucmVwbGF5ZXIuYWN0aXZlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaGFuZGxlRXZlbnQoZXZlbnQ6IEdhbWVFdmVudCk6IHZvaWQge1xuICAgICAgICBzd2l0Y2goZXZlbnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBHYW1lRXZlbnRUeXBlLlNUQVJUX1JFQ09SRElORzoge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlU3RhcnRSZWNvcmRpbmdFdmVudChldmVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIEdhbWVFdmVudFR5cGUuU1RPUF9SRUNPUkRJTkc6IHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVN0b3BSZWNvcmRpbmdFdmVudCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBHYW1lRXZlbnRUeXBlLlBMQVlfUkVDT1JESU5HOiB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVQbGF5UmVjb3JkaW5nRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHByb3RlY3RlZCBoYW5kbGVTdGFydFJlY29yZGluZ0V2ZW50KGV2ZW50OiBHYW1lRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgbGV0IHJlY29yZGluZyA9IGV2ZW50LmRhdGEuZ2V0KFwicmVjb3JkaW5nXCIpO1xuICAgICAgICBpZiAoIXRoaXMucGxheWluZyAmJiAhdGhpcy5yZWNvcmRpbmcgJiYgcmVjb3JkaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFJlY29yZGluZyA9IHJlY29yZGluZztcbiAgICAgICAgICAgIGxldCBSZWNvcmRlcjogbmV3ICguLi5hcmdzOiBhbnlbXSkgPT4gQWJzdHJhY3RSZWNvcmRlcjxBYnN0cmFjdFJlY29yZGluZzxBYnN0cmFjdExvZ0l0ZW0+LCBBYnN0cmFjdExvZ0l0ZW0+ID0gdGhpcy5sYXN0UmVjb3JkaW5nLnJlY29yZGVyKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWNvcmRlciA9PT0gdW5kZWZpbmVkIHx8IHRoaXMucmVjb3JkZXIuY29uc3RydWN0b3IgIT09IFJlY29yZGVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWNvcmRlciA9IG5ldyBSZWNvcmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWNvcmRlci5zdGFydCh0aGlzLmxhc3RSZWNvcmRpbmcpO1xuICAgICAgICAgICAgdGhpcy5yZWNvcmRpbmcgPSB0aGlzLnJlY29yZGVyLmFjdGl2ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByb3RlY3RlZCBoYW5kbGVTdG9wUmVjb3JkaW5nRXZlbnQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVjb3JkZXIuc3RvcCgpO1xuICAgICAgICB0aGlzLnJlY29yZGluZyA9IHRoaXMucmVjb3JkZXIuYWN0aXZlKCk7XG4gICAgfVxuICAgIHByb3RlY3RlZCBoYW5kbGVQbGF5UmVjb3JkaW5nRXZlbnQoZXZlbnQ6IEdhbWVFdmVudCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMucmVjb3JkaW5nICYmIHRoaXMubGFzdFJlY29yZGluZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsZXQgUmVwbGF5ZXI6IG5ldyAoLi4uYXJnczogYW55W10pID0+IEFic3RyYWN0UmVwbGF5ZXI8QWJzdHJhY3RSZWNvcmRpbmc8QWJzdHJhY3RMb2dJdGVtPiwgQWJzdHJhY3RMb2dJdGVtPiA9IHRoaXMubGFzdFJlY29yZGluZy5yZXBsYXllcigpO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVwbGF5ZXIgPT09IHVuZGVmaW5lZCB8fCB0aGlzLnJlcGxheWVyLmNvbnN0cnVjdG9yICE9PSBSZXBsYXllcikge1xuICAgICAgICAgICAgICAgIHRoaXMucmVwbGF5ZXIgPSBuZXcgUmVwbGF5ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVwbGF5ZXIuc3RhcnQodGhpcy5sYXN0UmVjb3JkaW5nLCBldmVudC5kYXRhLmdldChcIm9uRW5kXCIpKTtcbiAgICAgICAgICAgIHRoaXMucGxheWluZyA9IHRoaXMucmVwbGF5ZXIuYWN0aXZlKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgTWFwIGZyb20gXCIuLi8uLi9EYXRhVHlwZXMvQ29sbGVjdGlvbnMvTWFwXCI7XG5cbi8qKiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgUmVnaXN0cnk8VD4gZXh0ZW5kcyBNYXA8VD57XG5cbiAgICAvKiogUHJlbG9hZHMgcmVnaXN0cnkgZGF0YSAqL1xuICAgIHB1YmxpYyBhYnN0cmFjdCBwcmVsb2FkKCk6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYW4gaXRlbSBhbmQgcHJlbG9hZHMgYW55IG5lY2Vzc2FyeSBmaWxlc1xuICAgICAqIEBwYXJhbSBrZXkgVGhlIGtleSB0byByZWdpc3RlciB0aGlzIGl0ZW0gd2l0aFxuICAgICAqIEBwYXJhbSBhcmdzIEFueSBhZGRpdGlvbmFsIGFyZ3VtZW50cyBuZWVkZWQgZm9yIHJlZ2lzdHJhdGlvblxuICAgICAqL1xuICAgIHB1YmxpYyBhYnN0cmFjdCByZWdpc3RlckFuZFByZWxvYWRJdGVtKGtleTogc3RyaW5nLCAuLi5hcmdzOiBhbnkpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGFuIGl0ZW0gYW5kIHByZWxvYWRzIGFueSBuZWNlc3NhcnkgZmlsZXNcbiAgICAgKiBAcGFyYW0ga2V5IFRoZSBrZXkgdG8gcmVnaXN0ZXIgdGhpcyBpdGVtIHdpdGhcbiAgICAgKiBAcGFyYW0gYXJncyBBbnkgYWRpdGlvbmFsIGFyZ3VtZW50cyBuZWVkZWQgZm9yIHJlZ2lzdHJhdGlvblxuICAgICAqL1xuICAgIHB1YmxpYyBhYnN0cmFjdCByZWdpc3Rlckl0ZW0oa2V5OiBzdHJpbmcsIC4uLmFyZ3M6IGFueSk6IHZvaWQ7XG59IiwiaW1wb3J0IE1hcCBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL0NvbGxlY3Rpb25zL01hcFwiO1xuaW1wb3J0IFNoYWRlclR5cGUgZnJvbSBcIi4uLy4uL1JlbmRlcmluZy9XZWJHTFJlbmRlcmluZy9TaGFkZXJUeXBlXCI7XG5pbXBvcnQgTGFiZWxTaGFkZXJUeXBlIGZyb20gXCIuLi8uLi9SZW5kZXJpbmcvV2ViR0xSZW5kZXJpbmcvU2hhZGVyVHlwZXMvTGFiZWxTaGFkZXJUeXBlXCI7XG5pbXBvcnQgUG9pbnRTaGFkZXJUeXBlIGZyb20gXCIuLi8uLi9SZW5kZXJpbmcvV2ViR0xSZW5kZXJpbmcvU2hhZGVyVHlwZXMvUG9pbnRTaGFkZXJUeXBlXCI7XG5pbXBvcnQgUmVjdFNoYWRlclR5cGUgZnJvbSBcIi4uLy4uL1JlbmRlcmluZy9XZWJHTFJlbmRlcmluZy9TaGFkZXJUeXBlcy9SZWN0U2hhZGVyVHlwZVwiO1xuaW1wb3J0IFNwcml0ZVNoYWRlclR5cGUgZnJvbSBcIi4uLy4uL1JlbmRlcmluZy9XZWJHTFJlbmRlcmluZy9TaGFkZXJUeXBlcy9TcHJpdGVTaGFkZXJUeXBlXCI7XG5pbXBvcnQgUmVzb3VyY2VNYW5hZ2VyIGZyb20gXCIuLi8uLi9SZXNvdXJjZU1hbmFnZXIvUmVzb3VyY2VNYW5hZ2VyXCI7XG5pbXBvcnQgUmVnaXN0cnkgZnJvbSBcIi4vUmVnaXN0cnlcIjtcblxuLyoqXG4gKiBBIHJlZ2lzdHJ5IHRoYXQgaGFuZGxlcyBzaGFkZXJzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNoYWRlclJlZ2lzdHJ5IGV4dGVuZHMgUmVnaXN0cnk8U2hhZGVyVHlwZT4ge1xuXG5cdC8vIFNoYWRlciBuYW1lc1xuXHRwdWJsaWMgc3RhdGljIFBPSU5UX1NIQURFUiA9IFwicG9pbnRcIjtcblx0cHVibGljIHN0YXRpYyBSRUNUX1NIQURFUiA9IFwicmVjdFwiO1xuXHRwdWJsaWMgc3RhdGljIFNQUklURV9TSEFERVIgPSBcInNwcml0ZVwiO1xuXHRwdWJsaWMgc3RhdGljIExBQkVMX1NIQURFUiA9IFwibGFiZWxcIjtcblxuXHRwcml2YXRlIHJlZ2lzdHJ5SXRlbXM6IEFycmF5PFNoYWRlclJlZ2lzdHJ5SXRlbT4gPSBuZXcgQXJyYXkoKTtcblxuXHQvKipcblx0ICogUHJlbG9hZHMgYWxsIGJ1aWx0LWluIHNoYWRlcnNcblx0ICovXG5cdHB1YmxpYyBwcmVsb2FkKCl7XG5cdFx0Ly8gR2V0IHRoZSByZXNvdXJjZU1hbmFnZXIgYW5kIHF1ZXVlIGFsbCBidWlsdC1pbiBzaGFkZXJzIGZvciBwcmVsb2FkaW5nXG5cdFx0Y29uc3Qgcm0gPSBSZXNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcblxuXHRcdC8vIFF1ZXVlIGEgbG9hZCBmb3IgdGhlIHBvaW50IHNoYWRlclxuXHRcdHRoaXMucmVnaXN0ZXJBbmRQcmVsb2FkSXRlbShTaGFkZXJSZWdpc3RyeS5QT0lOVF9TSEFERVIsIFBvaW50U2hhZGVyVHlwZSwgXCJidWlsdGluL3NoYWRlcnMvcG9pbnQudnNoYWRlclwiLCBcImJ1aWx0aW4vc2hhZGVycy9wb2ludC5mc2hhZGVyXCIpO1xuXG5cdFx0Ly8gUXVldWUgYSBsb2FkIGZvciB0aGUgcmVjdCBzaGFkZXJcblx0XHR0aGlzLnJlZ2lzdGVyQW5kUHJlbG9hZEl0ZW0oU2hhZGVyUmVnaXN0cnkuUkVDVF9TSEFERVIsIFJlY3RTaGFkZXJUeXBlLCBcImJ1aWx0aW4vc2hhZGVycy9yZWN0LnZzaGFkZXJcIiwgXCJidWlsdGluL3NoYWRlcnMvcmVjdC5mc2hhZGVyXCIpO1xuXG5cdFx0Ly8gUXVldWUgYSBsb2FkIGZvciB0aGUgc3ByaXRlIHNoYWRlclxuXHRcdHRoaXMucmVnaXN0ZXJBbmRQcmVsb2FkSXRlbShTaGFkZXJSZWdpc3RyeS5TUFJJVEVfU0hBREVSLCBTcHJpdGVTaGFkZXJUeXBlLCBcImJ1aWx0aW4vc2hhZGVycy9zcHJpdGUudnNoYWRlclwiLCBcImJ1aWx0aW4vc2hhZGVycy9zcHJpdGUuZnNoYWRlclwiKTtcblx0XG5cdFx0Ly8gUXVldWUgYSBsb2FkIGZvciB0aGUgbGFiZWwgc2hhZGVyXG5cdFx0dGhpcy5yZWdpc3RlckFuZFByZWxvYWRJdGVtKFNoYWRlclJlZ2lzdHJ5LkxBQkVMX1NIQURFUiwgTGFiZWxTaGFkZXJUeXBlLCBcImJ1aWx0aW4vc2hhZGVycy9sYWJlbC52c2hhZGVyXCIsIFwiYnVpbHRpbi9zaGFkZXJzL2xhYmVsLmZzaGFkZXJcIik7XG5cblx0XHQvLyBRdWV1ZSBhIGxvYWQgZm9yIGFueSBwcmVsb2FkZWQgaXRlbXNcblx0XHRmb3IobGV0IGl0ZW0gb2YgdGhpcy5yZWdpc3RyeUl0ZW1zKXtcblx0XHRcdGNvbnN0IHNoYWRlciA9IG5ldyBpdGVtLmNvbnN0cihpdGVtLmtleSk7XG5cdFx0XHRzaGFkZXIuaW5pdEJ1ZmZlck9iamVjdCgpO1xuXHRcdFx0dGhpcy5hZGQoaXRlbS5rZXksIHNoYWRlcik7XG5cblx0XHRcdC8vIExvYWQgaWYgZGVzaXJlZFxuXHRcdFx0aWYoaXRlbS5wcmVsb2FkICE9PSB1bmRlZmluZWQpe1xuXHRcdFx0XHRybS5zaGFkZXIoaXRlbS5rZXksIGl0ZW0ucHJlbG9hZC52c2hhZGVyTG9jYXRpb24sIGl0ZW0ucHJlbG9hZC5mc2hhZGVyTG9jYXRpb24pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBSZWdpc3RlcnMgYSBzaGFkZXIgaW4gdGhlIHJlZ2lzdHJ5IGFuZCBsb2FkcyBpdCBiZWZvcmUgdGhlIGdhbWUgYmVnaW5zXG5cdCAqIEBwYXJhbSBrZXkgVGhlIGtleSB5b3Ugd2lzaCB0byBhc3NpZ24gdG8gdGhlIHNoYWRlclxuXHQgKiBAcGFyYW0gY29uc3RyIFRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgU2hhZGVyVHlwZVxuXHQgKiBAcGFyYW0gdnNoYWRlckxvY2F0aW9uIFRoZSBsb2NhdGlvbiBvZiB0aGUgdmVydGV4IHNoYWRlclxuXHQgKiBAcGFyYW0gZnNoYWRlckxvY2F0aW9uIHRoZSBsb2NhdGlvbiBvZiB0aGUgZnJhZ21lbnQgc2hhZGVyXG5cdCAqL1xuXHRwdWJsaWMgcmVnaXN0ZXJBbmRQcmVsb2FkSXRlbShrZXk6IHN0cmluZywgY29uc3RyOiBuZXcgKHByb2dyYW1LZXk6IHN0cmluZykgPT4gU2hhZGVyVHlwZSwgdnNoYWRlckxvY2F0aW9uOiBzdHJpbmcsIGZzaGFkZXJMb2NhdGlvbjogc3RyaW5nKTogdm9pZCB7XG5cdFx0bGV0IHNoYWRlclByZWxvYWQgPSBuZXcgU2hhZGVyUHJlbG9hZCgpO1xuXHRcdHNoYWRlclByZWxvYWQudnNoYWRlckxvY2F0aW9uID0gdnNoYWRlckxvY2F0aW9uO1xuXHRcdHNoYWRlclByZWxvYWQuZnNoYWRlckxvY2F0aW9uID0gZnNoYWRlckxvY2F0aW9uO1xuXG5cdFx0bGV0IHJlZ2lzdHJ5SXRlbSA9IG5ldyBTaGFkZXJSZWdpc3RyeUl0ZW0oKTtcblx0XHRyZWdpc3RyeUl0ZW0ua2V5ID0ga2V5O1xuXHRcdHJlZ2lzdHJ5SXRlbS5jb25zdHIgPSBjb25zdHI7XG5cdFx0cmVnaXN0cnlJdGVtLnByZWxvYWQgPSBzaGFkZXJQcmVsb2FkO1xuXG5cdFx0dGhpcy5yZWdpc3RyeUl0ZW1zLnB1c2gocmVnaXN0cnlJdGVtKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZWdpc3RlcnMgYSBzaGFkZXIgaW4gdGhlIHJlZ2lzdHJ5LiBOT1RFOiBJZiB5b3UgdXNlIHRoaXMsIHlvdSBNVVNUIGxvYWQgdGhlIHNoYWRlciBiZWZvcmUgdXNlLlxuXHQgKiBJZiB5b3Ugd2lzaCB0byBwcmVsb2FkIHRoZSBzaGFkZXIsIHVzZSByZWdpc3RlckFuZFByZWxvYWRJdGVtKClcblx0ICogQHBhcmFtIGtleSBUaGUga2V5IHlvdSB3aXNoIHRvIGFzc2lnbiB0byB0aGUgc2hhZGVyXG5cdCAqIEBwYXJhbSBjb25zdHIgVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBTaGFkZXJUeXBlXG5cdCAqL1xuXHRwdWJsaWMgcmVnaXN0ZXJJdGVtKGtleTogc3RyaW5nLCBjb25zdHI6IG5ldyAocHJvZ3JhbUtleTogc3RyaW5nKSA9PiBTaGFkZXJUeXBlKTogdm9pZCB7XG5cdFx0bGV0IHJlZ2lzdHJ5SXRlbSA9IG5ldyBTaGFkZXJSZWdpc3RyeUl0ZW0oKTtcblx0XHRyZWdpc3RyeUl0ZW0ua2V5ID0ga2V5O1xuXHRcdHJlZ2lzdHJ5SXRlbS5jb25zdHIgPSBjb25zdHI7XG5cblx0XHR0aGlzLnJlZ2lzdHJ5SXRlbXMucHVzaChyZWdpc3RyeUl0ZW0pO1xuXHR9XG59XG5cbmNsYXNzIFNoYWRlclJlZ2lzdHJ5SXRlbSB7XG5cdGtleTogc3RyaW5nO1xuXHRjb25zdHI6IG5ldyAocHJvZ3JhbUtleTogc3RyaW5nKSA9PiBTaGFkZXJUeXBlO1xuXHRwcmVsb2FkOiBTaGFkZXJQcmVsb2FkO1xufVxuXG5jbGFzcyBTaGFkZXJQcmVsb2FkIHtcblx0dnNoYWRlckxvY2F0aW9uOiBzdHJpbmc7XG5cdGZzaGFkZXJMb2NhdGlvbjogc3RyaW5nO1xufSIsImltcG9ydCBNYXAgZnJvbSBcIi4uL0RhdGFUeXBlcy9Db2xsZWN0aW9ucy9NYXBcIjtcbmltcG9ydCBSZWdpc3RyeSBmcm9tIFwiLi9SZWdpc3RyaWVzL1JlZ2lzdHJ5XCI7XG5pbXBvcnQgU2hhZGVyUmVnaXN0cnkgZnJvbSBcIi4vUmVnaXN0cmllcy9TaGFkZXJSZWdpc3RyeVwiO1xuXG4vKipcbiAqIFRoZSBSZWdpc3RyeSBpcyB0aGUgc3lzdGVtJ3Mgd2F5IG9mIGNvbnZlcnRpbmcgY2xhc3NlcyBhbmQgdHlwZXMgaW50byBzdHJpbmdcbiAqIHJlcHJlc2VudGF0aW9ucyBmb3IgdXNlIGVsc2V3aGVyZSBpbiB0aGUgYXBwbGljYXRpb24uXG4gKiBJdCBhbGxvd3MgY2xhc3NlcyB0byBiZSBhY2Nlc3NlZCB3aXRob3V0IGV4cGxpY2l0bHkgdXNpbmcgY29uc3RydWN0b3JzIGluIGNvZGUsXG4gKiBhbmQgZm9yIHJlc291cmNlcyB0byBiZSBsb2FkZWQgYXQgR2FtZSBjcmVhdGlvbiB0aW1lLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZWdpc3RyeU1hbmFnZXIge1xuXG5cdHB1YmxpYyBzdGF0aWMgc2hhZGVycyA9IG5ldyBTaGFkZXJSZWdpc3RyeSgpO1xuXG5cdC8qKiBBZGRpdGlvbmFsIGN1c3RvbSByZWdpc3RyaWVzIHRvIGFkZCB0byB0aGUgcmVnaXN0cnkgbWFuYWdlciAqL1xuXHRwcm90ZWN0ZWQgc3RhdGljIHJlZ2lzdHJpZXM6IE1hcDxSZWdpc3RyeTxhbnk+PiA9IG5ldyBNYXAoKTtcblxuXHRzdGF0aWMgcHJlbG9hZCgpe1xuXHRcdHRoaXMuc2hhZGVycy5wcmVsb2FkKCk7XG5cblx0XHR0aGlzLnJlZ2lzdHJpZXMuZm9yRWFjaCgoa2V5OiBzdHJpbmcpID0+IHRoaXMucmVnaXN0cmllcy5nZXQoa2V5KS5wcmVsb2FkKCkpO1xuXHR9XG5cblx0c3RhdGljIGFkZEN1c3RvbVJlZ2lzdHJ5KG5hbWU6IHN0cmluZywgcmVnaXN0cnk6IFJlZ2lzdHJ5PGFueT4pe1xuXHRcdHRoaXMucmVnaXN0cmllcy5hZGQobmFtZSwgcmVnaXN0cnkpO1xuXHR9XG5cblx0c3RhdGljIGdldFJlZ2lzdHJ5KGtleTogc3RyaW5nKXtcblx0XHRyZXR1cm4gdGhpcy5yZWdpc3RyaWVzLmdldChrZXkpO1xuXHR9XG59IiwiaW1wb3J0IE1hcCBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL0NvbGxlY3Rpb25zL01hcFwiO1xuaW1wb3J0IEVtaXR0ZXIgZnJvbSBcIi4uLy4uL0V2ZW50cy9FbWl0dGVyXCI7XG5pbXBvcnQgQ2FudmFzTm9kZSBmcm9tIFwiLi4vLi4vTm9kZXMvQ2FudmFzTm9kZVwiO1xuaW1wb3J0IHsgQW5pbWF0aW9uRGF0YSwgQW5pbWF0aW9uU3RhdGUgfSBmcm9tIFwiLi9BbmltYXRpb25UeXBlc1wiO1xuXG4vKipcbiAqIEFuIGFuaW1hdGlvbiBtYW5hZ2VyIGNsYXNzIGZvciBhbiBhbmltYXRlZCBDYW52YXNOb2RlLlxuICogVGhpcyBjbGFzcyBrZWVwcyB0cmFjayBvZiB0aGUgcG9zc2libGUgYW5pbWF0aW9ucywgYXMgd2VsbCBhcyB0aGUgY3VycmVudCBhbmltYXRpb24gc3RhdGUsXG4gKiBhbmQgYWJzdHJhY3RzIGFsbCBpbnRlcmFjdGlvbnMgd2l0aCBwbGF5aW5nLCBwYXVzaW5nLCBhbmQgc3RvcHBpbmcgYW5pbWF0aW9ucyBhcyB3ZWxsIGFzIFxuICogY3JlYXRpbmcgbmV3IGFuaW1hdGlvbnMgZnJvbSB0aGUgQ2FudmFzTm9kZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW5pbWF0aW9uTWFuYWdlciB7XG4gICAgLyoqIFRoZSBvd25lciBvZiB0aGlzIGFuaW1hdGlvbiBtYW5hZ2VyICovXG4gICAgcHJvdGVjdGVkIG93bmVyOiBDYW52YXNOb2RlO1xuICAgIFxuICAgIC8qKiBUaGUgY3VycmVudCBhbmltYXRpb24gc3RhdGUgb2YgdGhpcyBzcHJpdGUgKi9cbiAgICBwcm90ZWN0ZWQgYW5pbWF0aW9uU3RhdGU6IEFuaW1hdGlvblN0YXRlO1xuXG4gICAgLyoqIFRoZSBuYW1lIG9mIHRoZSBjdXJyZW50IGFuaW1hdGlvbiBvZiB0aGlzIHNwcml0ZSAqL1xuICAgIHByb3RlY3RlZCBjdXJyZW50QW5pbWF0aW9uOiBzdHJpbmc7XG5cbiAgICAvKiogVGhlIGN1cnJlbnQgZnJhbWUgb2YgdGhpcyBhbmltYXRpb24gKi9cbiAgICBwcm90ZWN0ZWQgY3VycmVudEZyYW1lOiBudW1iZXI7XG5cbiAgICAvKiogVGhlIHByb2dyZXNzIG9mIHRoZSBjdXJyZW50IGFuaW1hdGlvbiB0aHJvdWdoIHRoZSBjdXJyZW50IGZyYW1lICovXG4gICAgcHJvdGVjdGVkIGZyYW1lUHJvZ3Jlc3M6IG51bWJlcjtcblxuICAgIC8qKiBXaGV0aGVyIHRoZSBjdXJyZW50IGFuaW1hdGlvbiBpcyBsb29waW5nIG9yIG5vdCAqL1xuICAgIHByb3RlY3RlZCBsb29wOiBib29sZWFuO1xuXG4gICAgLyoqIFRoZSBtYXAgb2YgYW5pbWF0aW9ucyAqL1xuICAgIHByb3RlY3RlZCBhbmltYXRpb25zOiBNYXA8QW5pbWF0aW9uRGF0YT47XG5cbiAgICAvKiogVGhlIG5hbWUgb2YgdGhlIGV2ZW50IChpZiBhbnkpIHRvIHNlbmQgd2hlbiB0aGUgY3VycmVudCBhbmltYXRpb24gc3RvcHMgcGxheWluZy4gKi9cbiAgICBwcm90ZWN0ZWQgb25FbmRFdmVudDogc3RyaW5nO1xuXG4gICAgLyoqIFRoZSBldmVudCBlbWl0dGVyIGZvciB0aGlzIGFuaW1hdGlvbiBtYW5hZ2VyICovXG4gICAgcHJvdGVjdGVkIGVtaXR0ZXI6IEVtaXR0ZXI7XG5cbiAgICAvKiogQSBxdWV1ZWQgYW5pbWF0aW9uICovXG4gICAgcHJvdGVjdGVkIHBlbmRpbmdBbmltYXRpb246IHN0cmluZztcblxuICAgIC8qKiBUaGUgbG9vcCBzdGF0dXMgb2YgYSBwZW5kaW5nIGFuaW1hdGlvbiAqL1xuICAgIHByb3RlY3RlZCBwZW5kaW5nTG9vcDogYm9vbGVhbjtcblxuICAgIC8qKiBUaGUgb25FbmQgZXZlbnQgb2YgYSBwZW5kaW5nIGFuaW1hdGlvbiAqL1xuICAgIHByb3RlY3RlZCBwZW5kaW5nT25FbmQ6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgQW5pbWF0aW9uTWFuYWdlclxuICAgICAqIEBwYXJhbSBvd25lciBUaGUgb3duZXIgb2YgdGhlIEFuaW1hdGlvbk1hbmFnZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihvd25lcjogQ2FudmFzTm9kZSl7XG4gICAgICAgIHRoaXMub3duZXIgPSBvd25lcjtcbiAgICAgICAgdGhpcy5hbmltYXRpb25TdGF0ZSA9IEFuaW1hdGlvblN0YXRlLlNUT1BQRUQ7XG4gICAgICAgIHRoaXMuY3VycmVudEFuaW1hdGlvbiA9IFwiXCI7XG4gICAgICAgIHRoaXMuY3VycmVudEZyYW1lID0gMDtcbiAgICAgICAgdGhpcy5mcmFtZVByb2dyZXNzID0gMDtcbiAgICAgICAgdGhpcy5sb29wID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5vbkVuZEV2ZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5lbWl0dGVyID0gbmV3IEVtaXR0ZXIoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gYW5pbWF0aW9uIHRvIHRoaXMgc3ByaXRlXG4gICAgICogQHBhcmFtIGtleSBUaGUgdW5pcXVlIGtleSBvZiB0aGUgYW5pbWF0aW9uXG4gICAgICogQHBhcmFtIGFuaW1hdGlvbiBUaGUgYW5pbWF0aW9uIGRhdGFcbiAgICAgKi9cbiAgICBhZGQoa2V5OiBzdHJpbmcsIGFuaW1hdGlvbjogQW5pbWF0aW9uRGF0YSk6IHZvaWQge1xuICAgICAgICB0aGlzLmFuaW1hdGlvbnMuYWRkKGtleSwgYW5pbWF0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBpbmRleCBzcGVjaWZpZWQgYnkgdGhlIGN1cnJlbnQgYW5pbWF0aW9uIGFuZCBjdXJyZW50IGZyYW1lXG4gICAgICogQHJldHVybnMgVGhlIGluZGV4IGluIHRoZSBjdXJyZW50IGFuaW1hdGlvblxuICAgICAqL1xuICAgIGdldEluZGV4KCk6IG51bWJlciB7XG4gICAgICAgIGlmKHRoaXMuYW5pbWF0aW9ucy5oYXModGhpcy5jdXJyZW50QW5pbWF0aW9uKSl7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hbmltYXRpb25zLmdldCh0aGlzLmN1cnJlbnRBbmltYXRpb24pLmZyYW1lc1t0aGlzLmN1cnJlbnRGcmFtZV0uaW5kZXg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBObyBjdXJyZW50IGFuaW1hdGlvbiwgd2FybiB0aGUgdXNlclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBBbmltYXRpb24gaW5kZXggd2FzIHJlcXVlc3RlZCwgYnV0IHRoZSBjdXJyZW50IGFuaW1hdGlvbjogJHt0aGlzLmN1cnJlbnRBbmltYXRpb259IHdhcyBpbnZhbGlkYCk7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgd2hldGhlciB0aGUgc3BlY2lmaWVkIGFuaW1hdGlvbiBpcyBjdXJyZW50bHkgcGxheWluZ1xuICAgICAqIEBwYXJhbSBrZXkgVGhlIGtleSBvZiB0aGUgYW5pbWF0aW9uIHRvIGNoZWNrXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIGFuaW1hdGlvbiBpcyBwbGF5aW5nLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBpc1BsYXlpbmcoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudEFuaW1hdGlvbiA9PT0ga2V5ICYmIHRoaXMuYW5pbWF0aW9uU3RhdGUgPT09IEFuaW1hdGlvblN0YXRlLlBMQVlJTkc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBjdXJyZW50IGFuaW1hdGlvbiBpbmRleCBhbmQgYWR2YW5jZXMgdGhlIGFuaW1hdGlvbiBmcmFtZVxuICAgICAqIEByZXR1cm5zIFRoZSBpbmRleCBvZiB0aGUgYW5pbWF0aW9uIGZyYW1lXG4gICAgICovXG4gICAgZ2V0SW5kZXhBbmRBZHZhbmNlQW5pbWF0aW9uKCk6IG51bWJlciB7XG4gICAgICAgIC8vIElmIHdlIGFyZW4ndCBwbGF5aW5nLCB3ZSB3b24ndCBiZSBhZHZhbmNpbmcgdGhlIGFuaW1hdGlvblxuICAgICAgICBpZighKHRoaXMuYW5pbWF0aW9uU3RhdGUgPT09IEFuaW1hdGlvblN0YXRlLlBMQVlJTkcpKXtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEluZGV4KCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZih0aGlzLmFuaW1hdGlvbnMuaGFzKHRoaXMuY3VycmVudEFuaW1hdGlvbikpe1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRBbmltYXRpb24gPSB0aGlzLmFuaW1hdGlvbnMuZ2V0KHRoaXMuY3VycmVudEFuaW1hdGlvbik7XG4gICAgICAgICAgICBsZXQgaW5kZXggPSBjdXJyZW50QW5pbWF0aW9uLmZyYW1lc1t0aGlzLmN1cnJlbnRGcmFtZV0uaW5kZXg7XG5cbiAgICAgICAgICAgIC8vIEFkdmFuY2UgdGhlIGFuaW1hdGlvblxuICAgICAgICAgICAgdGhpcy5mcmFtZVByb2dyZXNzICs9IDE7XG4gICAgICAgICAgICBpZih0aGlzLmZyYW1lUHJvZ3Jlc3MgPj0gY3VycmVudEFuaW1hdGlvbi5mcmFtZXNbdGhpcy5jdXJyZW50RnJhbWVdLmR1cmF0aW9uKXtcbiAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIGJlZW4gb24gdGhpcyBmcmFtZSBmb3IgaXRzIHdob2xlIGR1cmF0aW9uLCBnbyB0byB0aGUgbmV4dCBvbmVcbiAgICAgICAgICAgICAgICB0aGlzLmZyYW1lUHJvZ3Jlc3MgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEZyYW1lICs9IDE7XG5cbiAgICAgICAgICAgICAgICBpZih0aGlzLmN1cnJlbnRGcmFtZSA+PSBjdXJyZW50QW5pbWF0aW9uLmZyYW1lcy5sZW5ndGgpe1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHJlYWNoZWQgdGhlIGVuZCBvZiB0aGlzIGFuaW1hdGlvblxuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmxvb3Ape1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RnJhbWUgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mcmFtZVByb2dyZXNzID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kQ3VycmVudEFuaW1hdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBSZXR1cm4gdGhlIGN1cnJlbnQgaW5kZXhcbiAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5vIGN1cnJlbnQgYW5pbWF0aW9uLCBjYW4ndCBhZHZhbmNlLiBXYXJuIHRoZSB1c2VyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYEFuaW1hdGlvbiBpbmRleCBhbmQgYWR2YW5jZSB3YXMgcmVxdWVzdGVkLCBidXQgdGhlIGN1cnJlbnQgYW5pbWF0aW9uICgke3RoaXMuY3VycmVudEFuaW1hdGlvbn0pIGluIG5vZGUgd2l0aCBpZDogJHt0aGlzLm93bmVyLmlkfSB3YXMgaW52YWxpZGApO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogRW5kcyB0aGUgY3VycmVudCBhbmltYXRpb24gYW5kIGZpcmVzIGFueSBuZWNlc3NhcnkgZXZlbnRzLCBhcyB3ZWxsIGFzIHN0YXJ0aW5nIGFueSBuZXcgYW5pbWF0aW9ucyAqL1xuICAgIHByb3RlY3RlZCBlbmRDdXJyZW50QW5pbWF0aW9uKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmN1cnJlbnRGcmFtZSA9IDA7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uU3RhdGUgPSBBbmltYXRpb25TdGF0ZS5TVE9QUEVEO1xuXG4gICAgICAgIGlmKHRoaXMub25FbmRFdmVudCAhPT0gbnVsbCl7XG4gICAgICAgICAgICB0aGlzLmVtaXR0ZXIuZmlyZUV2ZW50KHRoaXMub25FbmRFdmVudCwge293bmVyOiB0aGlzLm93bmVyLmlkLCBhbmltYXRpb246IHRoaXMuY3VycmVudEFuaW1hdGlvbn0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSBwZW5kaW5nIGFuaW1hdGlvbiwgcGxheSBpdFxuICAgICAgICBpZih0aGlzLnBlbmRpbmdBbmltYXRpb24gIT09IG51bGwpe1xuICAgICAgICAgICAgdGhpcy5wbGF5KHRoaXMucGVuZGluZ0FuaW1hdGlvbiwgdGhpcy5wZW5kaW5nTG9vcCwgdGhpcy5wZW5kaW5nT25FbmQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGxheXMgdGhlIHNwZWNpZmllZCBhbmltYXRpb24uIERvZXMgbm90IHJlc3RhcnQgaXQgaWYgaXQgaXMgYWxyZWFkeSBwbGF5aW5nXG4gICAgICogQHBhcmFtIGFuaW1hdGlvbiBUaGUgbmFtZSBvZiB0aGUgYW5pbWF0aW9uIHRvIHBsYXlcbiAgICAgKiBAcGFyYW0gbG9vcCBXaGV0aGVyIG9yIG5vdCB0byBsb29wIHRoZSBhbmltYXRpb24uIEZhbHNlIGJ5IGRlZmF1bHRcbiAgICAgKiBAcGFyYW0gb25FbmQgVGhlIG5hbWUgb2YgYW4gZXZlbnQgdG8gc2VuZCB3aGVuIHRoaXMgYW5pbWF0aW9uIG5hdHVyYWxseSBzdG9wcyBwbGF5aW5nLiBUaGlzIG9ubHkgbWF0dGVycyBpZiBsb29wIGlzIGZhbHNlLlxuICAgICAqL1xuICAgIHBsYXlJZk5vdEFscmVhZHkoYW5pbWF0aW9uOiBzdHJpbmcsIGxvb3A/OiBib29sZWFuLCBvbkVuZD86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZih0aGlzLmN1cnJlbnRBbmltYXRpb24gIT09IGFuaW1hdGlvbil7XG4gICAgICAgICAgICB0aGlzLnBsYXkoYW5pbWF0aW9uLCBsb29wLCBvbkVuZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQbGF5cyB0aGUgc3BlY2lmaWVkIGFuaW1hdGlvblxuICAgICAqIEBwYXJhbSBhbmltYXRpb24gVGhlIG5hbWUgb2YgdGhlIGFuaW1hdGlvbiB0byBwbGF5XG4gICAgICogQHBhcmFtIGxvb3AgV2hldGhlciBvciBub3QgdG8gbG9vcCB0aGUgYW5pbWF0aW9uLiBGYWxzZSBieSBkZWZhdWx0XG4gICAgICogQHBhcmFtIG9uRW5kIFRoZSBuYW1lIG9mIGFuIGV2ZW50IHRvIHNlbmQgd2hlbiB0aGlzIGFuaW1hdGlvbiBuYXR1cmFsbHkgc3RvcHMgcGxheWluZy4gVGhpcyBvbmx5IG1hdHRlcnMgaWYgbG9vcCBpcyBmYWxzZS5cbiAgICAgKi9cbiAgICBwbGF5KGFuaW1hdGlvbjogc3RyaW5nLCBsb29wPzogYm9vbGVhbiwgb25FbmQ/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jdXJyZW50QW5pbWF0aW9uID0gYW5pbWF0aW9uO1xuICAgICAgICB0aGlzLmN1cnJlbnRGcmFtZSA9IDA7XG4gICAgICAgIHRoaXMuZnJhbWVQcm9ncmVzcyA9IDA7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uU3RhdGUgPSBBbmltYXRpb25TdGF0ZS5QTEFZSU5HO1xuXG4gICAgICAgIC8vIElmIGxvb3AgYXJnIHdhcyBwcm92aWRlZCwgdXNlIHRoYXRcbiAgICAgICAgaWYobG9vcCAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgIHRoaXMubG9vcCA9IGxvb3A7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBPdGhlcndpc2UsIHVzZSB3aGF0IHRoZSBqc29uIGZpbGUgc3BlY2lmaWVkXG4gICAgICAgICAgICB0aGlzLmxvb3AgPSB0aGlzLmFuaW1hdGlvbnMuZ2V0KGFuaW1hdGlvbikucmVwZWF0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYob25FbmQgIT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICB0aGlzLm9uRW5kRXZlbnQgPSBvbkVuZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub25FbmRFdmVudCA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXNldCBwZW5kaW5nIGFuaW1hdGlvblxuICAgICAgICB0aGlzLnBlbmRpbmdBbmltYXRpb24gPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFF1ZXVlcyBhIHNpbmdsZSBhbmltYXRpb24gdG8gYmUgcGxheWVkIGFmdGVyIHRoZSBjdXJyZW50IG9uZS4gRG9lcyBOT1Qgc3RhY2suXG4gICAgICogUXVldWVpbmcgYWRkaXRpb25hbCBhbmltYXRpb25zIHBhc3QgMSB3aWxsIGp1c3QgcmVwbGFjZSB0aGUgcXVldWVkIGFuaW1hdGlvblxuICAgICAqIEBwYXJhbSBhbmltYXRpb24gVGhlIGFuaW1hdGlvbiB0byBxdWV1ZVxuICAgICAqIEBwYXJhbSBsb29wIFdoZXRoZXIgb3Igbm90IHRoZSBsb29wIHRoZSBxdWV1ZWQgYW5pbWF0aW9uXG4gICAgICogQHBhcmFtIG9uRW5kIFRoZSBldmVudCB0byBmaXJlIHdoZW4gdGhlIHF1ZXVlZCBhbmltYXRpb24gZW5kc1xuICAgICAqL1xuICAgIHF1ZXVlKGFuaW1hdGlvbjogc3RyaW5nLCBsb29wOiBib29sZWFuID0gZmFsc2UsIG9uRW5kPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMucGVuZGluZ0FuaW1hdGlvbiA9IGFuaW1hdGlvbjtcbiAgICAgICAgdGhpcy5wZW5kaW5nTG9vcCA9IGxvb3A7XG4gICAgICAgIGlmKG9uRW5kICE9PSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgdGhpcy5wZW5kaW5nT25FbmQgPSBvbkVuZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ09uRW5kID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKiBQYXVzZXMgdGhlIGN1cnJlbnQgYW5pbWF0aW9uICovXG4gICAgcGF1c2UoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uU3RhdGUgPSBBbmltYXRpb25TdGF0ZS5QQVVTRUQ7XG4gICAgfVxuXG4gICAgLyoqIFJlc3VtZXMgdGhlIGN1cnJlbnQgYW5pbWF0aW9uIGlmIHBvc3NpYmxlICovXG4gICAgcmVzdW1lKCk6IHZvaWQge1xuICAgICAgICBpZih0aGlzLmFuaW1hdGlvblN0YXRlID09PSBBbmltYXRpb25TdGF0ZS5QQVVTRUQpe1xuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25TdGF0ZSA9IEFuaW1hdGlvblN0YXRlLlBMQVlJTkc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogU3RvcHMgdGhlIGN1cnJlbnQgYW5pbWF0aW9uLiBUaGUgYW5pbWF0aW9uIGNhbm5vdCBiZSByZXN1bWVkIGFmdGVyIHRoaXMuICovXG4gICAgc3RvcCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hbmltYXRpb25TdGF0ZSA9IEFuaW1hdGlvblN0YXRlLlNUT1BQRUQ7XG4gICAgfVxufSIsImltcG9ydCB7IFR3ZWVuYWJsZVByb3BlcnRpZXMgfSBmcm9tIFwiLi4vLi4vTm9kZXMvR2FtZU5vZGVcIjtcbmltcG9ydCB7IEVhc2VGdW5jdGlvblR5cGUgfSBmcm9tIFwiLi4vLi4vVXRpbHMvRWFzZUZ1bmN0aW9uc1wiO1xuXG4vLyBAaWdub3JlUGFnZVxuXG5leHBvcnQgZW51bSBBbmltYXRpb25TdGF0ZSB7XG4gICAgU1RPUFBFRCA9IDAsXG4gICAgUEFVU0VEID0gMSxcbiAgICBQTEFZSU5HID0gMixcbn1cblxuZXhwb3J0IGNsYXNzIEFuaW1hdGlvbkRhdGEge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBmcmFtZXM6IEFycmF5PHtpbmRleDogbnVtYmVyLCBkdXJhdGlvbjogbnVtYmVyfT47XG4gICAgcmVwZWF0OiBib29sZWFuID0gZmFsc2U7XG59XG5cbmV4cG9ydCBjbGFzcyBUd2VlbkVmZmVjdCB7XG4gICAgLyoqIFRoZSBwcm9wZXJ0eSB0byB0d2VlbiAqL1xuICAgIHByb3BlcnR5OiBUd2VlbmFibGVQcm9wZXJ0aWVzO1xuXG4gICAgLyoqIFdoZXRoZXIgb3Igbm90IHRoZSBUd2VlbiBzaG91bGQgcmVzZXQgdGhlIHByb3BlcnR5IHRvIGl0cyBvcmlnaW5hbCB2YWx1ZSBhZnRlciBwbGF5aW5nICovXG4gICAgcmVzZXRPbkNvbXBsZXRlOiBib29sZWFuO1xuXG4gICAgLyoqIFRoZSBzdGFydGluZyB2YWx1ZSBmb3IgdGhlIHR3ZWVuICovXG4gICAgc3RhcnQ6IGFueTtcblxuICAgIC8qKiBUaGUgZW5kaW5nIHZhbHVlIGZvciB0aGUgdHdlZW4gKi9cbiAgICBlbmQ6IGFueTtcblxuICAgIC8qKiBUaGUgZWFzZSBmdW5jdGlvbiB0byB1c2UgKi9cbiAgICBlYXNlOiBFYXNlRnVuY3Rpb25UeXBlO1xuXG4gICAgLyoqIERPIE5PVCBNT0RJRlkgLSBUaGUgb3JpZ2luYWwgdmFsdWUgb2YgdGhlIHByb3BlcnR5IC0gc2V0IGF1dG9tYXRpY2FsbHkgKi9cbiAgICBpbml0aWFsVmFsdWU6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIFR3ZWVuRGF0YSB7XG4gICAgLy8gTWVtYmVycyBmb3IgaW5pdGlhbGl6YXRpb24gYnkgdGhlIHVzZXJcbiAgICAvKiogVGhlIGFtb3VudCBvZiB0aW1lIGluIG1zIHRvIHdhaXQgYmVmb3JlIGV4ZWN1dGluZyB0aGUgdHdlZW4gKi9cbiAgICBzdGFydERlbGF5OiBudW1iZXI7XG4gICAgLyoqIFRoZSBkdXJhdGlvbiBvZiB0aW1lIG92ZXIgd2hpY2ggdGhlIHZhbHVlIHdpdGggY2hhbmdlIGZyb20gc3RhcnQgdG8gZW5kICovXG4gICAgZHVyYXRpb246IG51bWJlcjtcbiAgICAvKiogQW4gYXJyYXkgb2YgdGhlIGVmZmVjdHMgb24gdGhlIHByb3BlcnRpZXMgb2YgdGhlIG9iamVjdCAqL1xuICAgIGVmZmVjdHM6IEFycmF5PFR3ZWVuRWZmZWN0PjtcbiAgICAvKiogV2hldGhlciBvciBub3QgdGhpcyB0d2VlbiBzaG91bGQgcmV2ZXJzZSBmcm9tIGVuZCB0byBzdGFydCBmb3IgZWFjaCBwcm9wZXJ0eSB3aGVuIGl0IGZpbmlzaGVzICovXG4gICAgcmV2ZXJzZU9uQ29tcGxldGU6IGJvb2xlYW47XG4gICAgLyoqIFdoZXRoZXIgb3Igbm90IHRoaXMgdHdlZW4gc2hvdWxkIGxvb3Agd2hlbiBpdCBjb21wbGV0ZXMgKi9cbiAgICBsb29wOiBib29sZWFuO1xuICAgIC8qKiBUaGUgbmFtZSBvZiB0aGUgZXZlbnQgdG8gc2VuZCAoaWYgYW55KSB3aGVuIHRoZSB0d2VlbiBmaW5pc2hlcyBwbGF5aW5nICovXG4gICAgb25FbmQ6IHN0cmluZ1xuXG4gICAgLyoqIEV4dHJhIGRhdGEgdG8gYmUgc2VudCB3aGVuIHRoZSBvbkVuZCBldmVudCBpcyBmaXJlZC4gS2V5cyB3aXRoIHRoZSBuYW1lICdrZXknIG9yICdub2RlJyBhcmUgcmVzZXJ2ZWQgYW5kIGNhbid0IGJlIHVzZWQgYXMgbmFtZXMgZm9yIHlvdXIgZXh0cmEgZGF0YSAqL1xuICAgIG9uRW5kRGF0YTogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgICBcbiAgICAvLyBNZW1iZXJzIGZvciBtYW5hZ2VtZW50IGJ5IHRoZSB0d2VlbiBtYW5hZ2VyXG4gICAgLyoqIFRoZSBwcm9ncmVzcyBvZiB0aGlzIHR3ZWVuIHRocm91Z2ggaXRzIGVmZmVjdHMgKi9cbiAgICBwcm9ncmVzczogbnVtYmVyO1xuXG4gICAgLyoqIFRoZSBhbW91bnQgb2YgdGltZSBpbiBtcyB0aGF0IGhhcyBwYXNzZWQgZnJvbSB3aGVuIHRoaXMgdHdlZW4gc3RhcnRlZCBydW5uaW5nICovXG4gICAgZWxhcHNlZFRpbWU6IG51bWJlcjtcblxuICAgIC8qKiBUaGUgc3RhdGUgb2YgdGhpcyB0d2VlbiAqL1xuICAgIGFuaW1hdGlvblN0YXRlOiBBbmltYXRpb25TdGF0ZTtcblxuICAgIC8qKiBXaGV0aGVyIG9yIG5vdCB0aGlzIHR3ZWVuIGlzIGN1cnJlbnRseSByZXZlcnNpbmcgKi9cbiAgICByZXZlcnNpbmc6IGJvb2xlYW47XG59IiwiaW1wb3J0IFVwZGF0ZWFibGUgZnJvbSBcIi4uLy4uL0RhdGFUeXBlcy9JbnRlcmZhY2VzL1VwZGF0ZWFibGVcIjtcbmltcG9ydCBQYXJ0aWNsZVN5c3RlbSBmcm9tIFwiLi9QYXJ0aWNsZVN5c3RlbVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXJ0aWNsZVN5c3RlbU1hbmFnZXIgaW1wbGVtZW50cyBVcGRhdGVhYmxlIHtcblxuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBQYXJ0aWNsZVN5c3RlbU1hbmFnZXIgPSBudWxsO1xuICAgIFxuICAgIHByb3RlY3RlZCBwYXJ0aWNsZVN5c3RlbXM6IEFycmF5PFBhcnRpY2xlU3lzdGVtPjtcblxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKXtcbiAgICAgICAgdGhpcy5wYXJ0aWNsZVN5c3RlbXMgPSBuZXcgQXJyYXkoKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogUGFydGljbGVTeXN0ZW1NYW5hZ2VyIHtcbiAgICAgICAgaWYoUGFydGljbGVTeXN0ZW1NYW5hZ2VyLmluc3RhbmNlID09PSBudWxsKXtcbiAgICAgICAgICAgIFBhcnRpY2xlU3lzdGVtTWFuYWdlci5pbnN0YW5jZSA9IG5ldyBQYXJ0aWNsZVN5c3RlbU1hbmFnZXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQYXJ0aWNsZVN5c3RlbU1hbmFnZXIuaW5zdGFuY2U7XG4gICAgfVxuXG4gICAgcmVnaXN0ZXJQYXJ0aWNsZVN5c3RlbShzeXN0ZW06IFBhcnRpY2xlU3lzdGVtKXtcbiAgICAgICAgdGhpcy5wYXJ0aWNsZVN5c3RlbXMucHVzaChzeXN0ZW0pO1xuICAgIH1cblxuICAgIGRlcmVnaXN0ZXJQYXJ0aWNsZVN5c3RlbShzeXN0ZW06IFBhcnRpY2xlU3lzdGVtKXtcbiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5wYXJ0aWNsZVN5c3RlbXMuaW5kZXhPZihzeXN0ZW0pO1xuICAgICAgICB0aGlzLnBhcnRpY2xlU3lzdGVtcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cblxuICAgIGNsZWFyUGFydGljbGVTeXN0ZW1zKCl7XG4gICAgICAgIHRoaXMucGFydGljbGVTeXN0ZW1zID0gbmV3IEFycmF5KCk7XG4gICAgfVxuXG4gICAgdXBkYXRlKGRlbHRhVDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGZvcihsZXQgcGFydGljbGVTeXN0ZW0gb2YgdGhpcy5wYXJ0aWNsZVN5c3RlbXMpe1xuICAgICAgICAgICAgcGFydGljbGVTeXN0ZW0udXBkYXRlKGRlbHRhVCk7XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IE1hcCBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL0NvbGxlY3Rpb25zL01hcFwiO1xuaW1wb3J0IEdhbWVOb2RlIGZyb20gXCIuLi8uLi9Ob2Rlcy9HYW1lTm9kZVwiO1xuaW1wb3J0IHsgQW5pbWF0aW9uU3RhdGUsIFR3ZWVuRGF0YSB9IGZyb20gXCIuL0FuaW1hdGlvblR5cGVzXCI7XG5pbXBvcnQgRWFzZUZ1bmN0aW9ucyBmcm9tIFwiLi4vLi4vVXRpbHMvRWFzZUZ1bmN0aW9uc1wiO1xuaW1wb3J0IE1hdGhVdGlscyBmcm9tIFwiLi4vLi4vVXRpbHMvTWF0aFV0aWxzXCI7XG5pbXBvcnQgVHdlZW5NYW5hZ2VyIGZyb20gXCIuL1R3ZWVuTWFuYWdlclwiO1xuaW1wb3J0IEVtaXR0ZXIgZnJvbSBcIi4uLy4uL0V2ZW50cy9FbWl0dGVyXCI7XG5cbi8qKlxuICogQSBtYW5hZ2VyIGZvciB0aGUgdHdlZW5zIG9mIGEgR2FtZU5vZGUuXG4gKiBUd2VlbnMgYXJlIHNob3J0IGFuaW1hdGlvbnMgcGxheWVkIGJ5IGludGVycG9sYXRpbmcgYmV0d2VlbiB0d28gcHJvcGVydGllcyB1c2luZyBhbiBlYXNpbmcgZnVuY3Rpb24uXG4gKiBGb3IgYSBnb29kIHZpc3VhbCByZXByZXNlbnRhdGlvbiBvZiBlYXNpbmcgZnVuY3Rpb25zLCBjaGVjayBvdXQgQGxpbmsoaHR0cHM6Ly9lYXNpbmdzLm5ldC8pKGh0dHBzOi8vZWFzaW5ncy5uZXQvKS5cbiAqIE11bHRpcGxlIHR3ZWVuIGNhbiBiZSBwbGF5ZWQgYXQgdGhlIHNhbWUgdGltZSwgYXMgbG9uZyBhcyB0aGV5IGRvbid0IGNoYW5nZSB0aGUgc2FtZSBwcm9wZXJ0eS5cbiAqIFRoaXMgYWxsb3dzIGZvciBzb21lIGludGVyZXN0aW5nIHBvbGlzaGVzIG9yIGFuaW1hdGlvbnMgdGhhdCBtYXkgYmUgdmVyeSBkaWZmaWN1bHQgdG8gZG8gd2l0aCBzcHJpdGUgd29yayBhbG9uZVxuICogLSBlc3BlY2lhbGx5IHBpeGVsIGFydCAoc3VjaCBhcyByb3RhdGlvbnMgb3Igc2NhbGluZykuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFR3ZWVuQ29udHJvbGxlciB7XG4gICAgLyoqIFRoZSBHYW1lTm9kZSB0aGlzIFR3ZWVuQ29udHJvbGxlciBhY3RzIHVwb24gKi9cbiAgICBwcm90ZWN0ZWQgb3duZXI6IEdhbWVOb2RlO1xuICAgIC8qKiBUaGUgbGlzdCBvZiBjcmVhdGVkIHR3ZWVucyAqL1xuICAgIHByb3RlY3RlZCB0d2VlbnM6IE1hcDxUd2VlbkRhdGE+O1xuICAgIC8qKiBBbiBldmVudCBlbWl0dGVyICovXG4gICAgcHJvdGVjdGVkIGVtaXR0ZXI6IEVtaXR0ZXI7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFR3ZWVuQ29udHJvbGxlclxuICAgICAqIEBwYXJhbSBvd25lciBUaGUgb3duZXIgb2YgdGhlIFR3ZWVuQ29udHJvbGxlclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG93bmVyOiBHYW1lTm9kZSl7XG4gICAgICAgIHRoaXMub3duZXIgPSBvd25lcjtcbiAgICAgICAgdGhpcy50d2VlbnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuZW1pdHRlciA9IG5ldyBFbWl0dGVyKCk7XG5cbiAgICAgICAgLy8gR2l2ZSBvdXJzZWx2ZXMgdG8gdGhlIFR3ZWVuTWFuYWdlclxuICAgICAgICBUd2Vlbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5yZWdpc3RlclR3ZWVuQ29udHJvbGxlcih0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGlzIFR3ZWVuQ29udHJvbGxlclxuICAgICAqL1xuICAgIGRlc3Ryb3koKXtcbiAgICAgICAgLy8gT25seSB0aGUgZ2FtZW5vZGUgYW5kIHRoZSB0d2VlbiBtYW5hZ2VyIHNob3VsZCBoYXZlIGEgcmVmZXJlbmNlIHRvIHRoaXNcbiAgICAgICAgZGVsZXRlIHRoaXMub3duZXIudHdlZW5zO1xuICAgICAgICBUd2Vlbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5kZXJlZ2lzdGVyVHdlZW5Db250cm9sbGVyKHRoaXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIHR3ZWVuIHRvIHRoaXMgZ2FtZSBub2RlXG4gICAgICogQHBhcmFtIGtleSBUaGUgbmFtZSBvZiB0aGUgdHdlZW5cbiAgICAgKiBAcGFyYW0gdHdlZW4gVGhlIGRhdGEgb2YgdGhlIHR3ZWVuXG4gICAgICovXG4gICAgYWRkKGtleTogc3RyaW5nLCB0d2VlbjogUmVjb3JkPHN0cmluZywgYW55PiB8IFR3ZWVuRGF0YSk6IHZvaWQge1xuICAgICAgICBsZXQgdHlwZWRUd2VlbiA9IDxUd2VlbkRhdGE+dHdlZW47XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBtZW1iZXJzIHRoYXQgd2UgbmVlZCAoYW5kIHRoZSB1c2VyIGRpZG4ndCBwcm92aWRlKVxuICAgICAgICB0eXBlZFR3ZWVuLnByb2dyZXNzID0gMDtcbiAgICAgICAgdHlwZWRUd2Vlbi5lbGFwc2VkVGltZSA9IDA7XG4gICAgICAgIHR5cGVkVHdlZW4uYW5pbWF0aW9uU3RhdGUgPSBBbmltYXRpb25TdGF0ZS5TVE9QUEVEO1xuXG4gICAgICAgIHRoaXMudHdlZW5zLmFkZChrZXksIHR5cGVkVHdlZW4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBsYXkgYSB0d2VlbiB3aXRoIGEgY2VydGFpbiBuYW1lXG4gICAgICogQHBhcmFtIGtleSBUaGUgbmFtZSBvZiB0aGUgdHdlZW4gdG8gcGxheVxuICAgICAqIEBwYXJhbSBsb29wIFdoZXRoZXIgb3Igbm90IHRoZSB0d2VlbiBzaG91bGQgbG9vcFxuICAgICAqL1xuICAgIHBsYXkoa2V5OiBzdHJpbmcsIGxvb3A/OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmKHRoaXMudHdlZW5zLmhhcyhrZXkpKXtcbiAgICAgICAgICAgIGxldCB0d2VlbiA9IHRoaXMudHdlZW5zLmdldChrZXkpO1xuXG4gICAgICAgICAgICAvLyBTZXQgbG9vcCBpZiBuZWVkZWRcbiAgICAgICAgICAgIGlmKGxvb3AgIT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgICAgdHdlZW4ubG9vcCA9IGxvb3A7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNldCB0aGUgaW5pdGlhbCB2YWx1ZXNcbiAgICAgICAgICAgIGZvcihsZXQgZWZmZWN0IG9mIHR3ZWVuLmVmZmVjdHMpe1xuICAgICAgICAgICAgICAgIGlmKGVmZmVjdC5yZXNldE9uQ29tcGxldGUpe1xuICAgICAgICAgICAgICAgICAgICBlZmZlY3QuaW5pdGlhbFZhbHVlID0gdGhpcy5vd25lcltlZmZlY3QucHJvcGVydHldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU3RhcnQgdGhlIHR3ZWVuIHJ1bm5pbmdcbiAgICAgICAgICAgIHR3ZWVuLmFuaW1hdGlvblN0YXRlID0gQW5pbWF0aW9uU3RhdGUuUExBWUlORztcbiAgICAgICAgICAgIHR3ZWVuLmVsYXBzZWRUaW1lID0gMDtcbiAgICAgICAgICAgIHR3ZWVuLnByb2dyZXNzID0gMDtcbiAgICAgICAgICAgIHR3ZWVuLnJldmVyc2luZyA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBUcmllZCB0byBwbGF5IHR3ZWVuIFwiJHtrZXl9XCIgb24gbm9kZSB3aXRoIGlkICR7dGhpcy5vd25lci5pZH0sIGJ1dCBubyBzdWNoIHR3ZWVuIGV4aXN0c2ApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGF1c2VzIGEgcGxheWluZyB0d2Vlbi4gRG9lcyBub3QgYWZmZWN0IHR3ZWVucyB0aGF0IGFyZSBzdG9wcGVkLlxuICAgICAqIEBwYXJhbSBrZXkgVGhlIG5hbWUgb2YgdGhlIHR3ZWVuIHRvIHBhdXNlLlxuICAgICAqL1xuICAgIHBhdXNlKGtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmKHRoaXMudHdlZW5zLmhhcyhrZXkpKXtcbiAgICAgICAgICAgIHRoaXMudHdlZW5zLmdldChrZXkpLmFuaW1hdGlvblN0YXRlID0gQW5pbWF0aW9uU3RhdGUuUEFVU0VEO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzdW1lcyBhIHBhdXNlZCB0d2Vlbi5cbiAgICAgKiBAcGFyYW0ga2V5IFRoZSBuYW1lIG9mIHRoZSB0d2VlbiB0byByZXN1bWVcbiAgICAgKi9cbiAgICByZXN1bWUoa2V5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYodGhpcy50d2VlbnMuaGFzKGtleSkpe1xuICAgICAgICAgICAgbGV0IHR3ZWVuID0gdGhpcy50d2VlbnMuZ2V0KGtleSk7XG4gICAgICAgICAgICBpZih0d2Vlbi5hbmltYXRpb25TdGF0ZSA9PT0gQW5pbWF0aW9uU3RhdGUuUEFVU0VEKVxuICAgICAgICAgICAgICAgIHR3ZWVuLmFuaW1hdGlvblN0YXRlID0gQW5pbWF0aW9uU3RhdGUuUExBWUlORztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0b3BzIGEgY3VycmVudGx5IHBsYXlpbmcgdHdlZW5cbiAgICAgKiBAcGFyYW0ga2V5IFRoZSBrZXkgb2YgdGhlIHR3ZWVuXG4gICAgICovXG4gICAgc3RvcChrZXk6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZih0aGlzLnR3ZWVucy5oYXMoa2V5KSl7XG4gICAgICAgICAgICBsZXQgdHdlZW4gPSB0aGlzLnR3ZWVucy5nZXQoa2V5KTtcbiAgICAgICAgICAgIHR3ZWVuLmFuaW1hdGlvblN0YXRlID0gQW5pbWF0aW9uU3RhdGUuU1RPUFBFRDtcblxuICAgICAgICAgICAgLy8gUmV0dXJuIHRvIHRoZSBpbml0aWFsIHZhbHVlc1xuICAgICAgICAgICAgZm9yKGxldCBlZmZlY3Qgb2YgdHdlZW4uZWZmZWN0cyl7XG4gICAgICAgICAgICAgICAgaWYoZWZmZWN0LnJlc2V0T25Db21wbGV0ZSl7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3duZXJbZWZmZWN0LnByb3BlcnR5XSA9IGVmZmVjdC5pbml0aWFsVmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIG5hdHVyYWwgc3RvcCBvZiBhIGN1cnJlbnRseSBwbGF5aW5nIHR3ZWVuXG4gICAgICogQHBhcmFtIGtleSBUaGUga2V5IG9mIHRoZSB0d2VlblxuICAgICAqL1xuICAgIHByb3RlY3RlZCBlbmQoa2V5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zdG9wKGtleSk7XG4gICAgICAgIGlmKHRoaXMudHdlZW5zLmhhcyhrZXkpKXtcbiAgICAgICAgICAgIC8vIEdldCB0aGUgdHdlZW5cbiAgICAgICAgICAgIGxldCB0d2VlbiA9IHRoaXMudHdlZW5zLmdldChrZXkpO1xuXG4gICAgICAgICAgICAvLyBJZiBpdCBoYXMgYW4gb25FbmQsIHNlbmQgYW4gZXZlbnRcbiAgICAgICAgICAgIGlmKHR3ZWVuLm9uRW5kKXtcbiAgICAgICAgICAgICAgICBsZXQgZGF0YTogUmVjb3JkPHN0cmluZywgYW55PiA9IHtrZXk6IGtleSwgbm9kZTogdGhpcy5vd25lci5pZH1cbiAgICAgICAgICAgICAgICAvLyBJZiBpdCBoYXMgb25FbmQgZXZlbnQgZGF0YSwgYWRkIGVhY2ggZW50cnksIGFzIGxvbmcgYXMgdGhlIGtleSBpcyBub3QgbmFtZWQgJ2tleScgb3IgJ25vZGUnXG4gICAgICAgICAgICAgICAgaWYgKHR3ZWVuLm9uRW5kRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh0d2Vlbi5vbkVuZERhdGEpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgIT09IFwia2V5XCIgJiYga2V5ICE9PSBcIm5vZGVcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFba2V5XSA9IHR3ZWVuLm9uRW5kRGF0YVtrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmVtaXR0ZXIuZmlyZUV2ZW50KHR3ZWVuLm9uRW5kLCBkYXRhKTsgXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdG9wcyBhbGwgY3VycmVudGx5IHBsYXlpbmcgdHdlZW5zXG4gICAgICovXG4gICAgc3RvcEFsbCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy50d2VlbnMuZm9yRWFjaChrZXkgPT4gdGhpcy5zdG9wKGtleSkpO1xuICAgIH1cbiAgICBcbiAgICB1cGRhdGUoZGVsdGFUOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy50d2VlbnMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgbGV0IHR3ZWVuID0gdGhpcy50d2VlbnMuZ2V0KGtleSk7XG4gICAgICAgICAgICBpZih0d2Vlbi5hbmltYXRpb25TdGF0ZSA9PT0gQW5pbWF0aW9uU3RhdGUuUExBWUlORyl7XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBwcm9ncmVzcyBvZiB0aGUgdHdlZW5cbiAgICAgICAgICAgICAgICB0d2Vlbi5lbGFwc2VkVGltZSArPSBkZWx0YVQqMTAwMDtcblxuICAgICAgICAgICAgICAgIC8vIElmIHdlJ3JlIHBhc3QgdGhlIHN0YXJ0RGVsYXksIGRvIHRoZSB0d2VlblxuICAgICAgICAgICAgICAgIGlmKHR3ZWVuLmVsYXBzZWRUaW1lID49IHR3ZWVuLnN0YXJ0RGVsYXkpe1xuICAgICAgICAgICAgICAgICAgICBpZighdHdlZW4ucmV2ZXJzaW5nICYmIHR3ZWVuLmVsYXBzZWRUaW1lID49IHR3ZWVuLnN0YXJ0RGVsYXkgKyB0d2Vlbi5kdXJhdGlvbil7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSdyZSBvdmVyIHRpbWUsIHN0b3AgdGhlIHR3ZWVuLCBsb29wLCBvciByZXZlcnNlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0d2Vlbi5yZXZlcnNlT25Db21wbGV0ZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UncmUgb3ZlciB0aW1lIGFuZCBjYW4gcmV2ZXJzZSwgZG8gc29cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0d2Vlbi5yZXZlcnNpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKHR3ZWVuLmxvb3Ape1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGNhbid0IHJldmVyc2UgYW5kIGNhbiBsb29wLCBkbyBzb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWVuLmVsYXBzZWRUaW1lIC09IHR3ZWVuLmR1cmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBhcmVuJ3QgbG9vcGluZyBhbmQgY2FuJ3QgcmV2ZXJzZSwgc28gc3RvcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kKGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3IgdGhlIGVuZCBvZiByZXZlcnNpbmdcbiAgICAgICAgICAgICAgICAgICAgaWYodHdlZW4ucmV2ZXJzaW5nICYmIHR3ZWVuLmVsYXBzZWRUaW1lID49IHR3ZWVuLnN0YXJ0RGVsYXkgKyAyKnR3ZWVuLmR1cmF0aW9uKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR3ZWVuLmxvb3Ape1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWVuLnJldmVyc2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWVuLmVsYXBzZWRUaW1lIC09IDIqdHdlZW4uZHVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kKGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHByb2dyZXNzLCBtYWtlIHN1cmUgaXQgaXMgYmV0d2VlbiAwIGFuZCAxLiBFcnJvcnMgZnJvbSB0aGlzIHNob3VsZCBuZXZlciBiZSBsYXJnZVxuICAgICAgICAgICAgICAgICAgICBpZih0d2Vlbi5yZXZlcnNpbmcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHdlZW4ucHJvZ3Jlc3MgPSBNYXRoVXRpbHMuY2xhbXAwMSgoMip0d2Vlbi5kdXJhdGlvbiAtICh0d2Vlbi5lbGFwc2VkVGltZS0gdHdlZW4uc3RhcnREZWxheSkpL3R3ZWVuLmR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWVuLnByb2dyZXNzID0gTWF0aFV0aWxzLmNsYW1wMDEoKHR3ZWVuLmVsYXBzZWRUaW1lIC0gdHdlZW4uc3RhcnREZWxheSkvdHdlZW4uZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBlZmZlY3Qgb2YgdHdlZW4uZWZmZWN0cyl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgdmFsdWUgZnJvbSB0aGUgZWFzZSBmdW5jdGlvbiB0aGF0IGNvcnJlc3BvbmRzIHRvIG91ciBwcm9ncmVzc1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVhc2UgPSBFYXNlRnVuY3Rpb25zW2VmZmVjdC5lYXNlXSh0d2Vlbi5wcm9ncmVzcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgdmFsdWUgdG8gbGVycCB0aGUgcHJvcGVydHlcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IE1hdGhVdGlscy5sZXJwKGVmZmVjdC5zdGFydCwgZWZmZWN0LmVuZCwgZWFzZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFzc2lnbiB0aGUgdmFsdWUgb2YgdGhlIHByb3BlcnR5XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm93bmVyW2VmZmVjdC5wcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSIsImltcG9ydCBVcGRhdGVhYmxlIGZyb20gXCIuLi8uLi9EYXRhVHlwZXMvSW50ZXJmYWNlcy9VcGRhdGVhYmxlXCI7XG5pbXBvcnQgVHdlZW5Db250cm9sbGVyIGZyb20gXCIuL1R3ZWVuQ29udHJvbGxlclwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUd2Vlbk1hbmFnZXIgaW1wbGVtZW50cyBVcGRhdGVhYmxlIHtcblxuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBUd2Vlbk1hbmFnZXIgPSBudWxsO1xuICAgIFxuICAgIHByb3RlY3RlZCB0d2VlbkNvbnRyb2xsZXJzOiBBcnJheTxUd2VlbkNvbnRyb2xsZXI+O1xuXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICB0aGlzLnR3ZWVuQ29udHJvbGxlcnMgPSBuZXcgQXJyYXkoKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogVHdlZW5NYW5hZ2VyIHtcbiAgICAgICAgaWYoVHdlZW5NYW5hZ2VyLmluc3RhbmNlID09PSBudWxsKXtcbiAgICAgICAgICAgIFR3ZWVuTWFuYWdlci5pbnN0YW5jZSA9IG5ldyBUd2Vlbk1hbmFnZXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBUd2Vlbk1hbmFnZXIuaW5zdGFuY2U7XG4gICAgfVxuXG4gICAgcmVnaXN0ZXJUd2VlbkNvbnRyb2xsZXIoY29udHJvbGxlcjogVHdlZW5Db250cm9sbGVyKXtcbiAgICAgICAgdGhpcy50d2VlbkNvbnRyb2xsZXJzLnB1c2goY29udHJvbGxlcik7XG4gICAgfVxuXG4gICAgZGVyZWdpc3RlclR3ZWVuQ29udHJvbGxlcihjb250cm9sbGVyOiBUd2VlbkNvbnRyb2xsZXIpe1xuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnR3ZWVuQ29udHJvbGxlcnMuaW5kZXhPZihjb250cm9sbGVyKTtcbiAgICAgICAgdGhpcy50d2VlbkNvbnRyb2xsZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuXG4gICAgY2xlYXJUd2VlbkNvbnRyb2xsZXJzKCl7XG4gICAgICAgIHRoaXMudHdlZW5Db250cm9sbGVycyA9IG5ldyBBcnJheSgpO1xuICAgIH1cblxuICAgIHVwZGF0ZShkZWx0YVQ6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBmb3IobGV0IHR3ZWVuQ29udHJvbGxlciBvZiB0aGlzLnR3ZWVuQ29udHJvbGxlcnMpe1xuICAgICAgICAgICAgdHdlZW5Db250cm9sbGVyLnVwZGF0ZShkZWx0YVQpO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCBNYXAgZnJvbSBcIi4uL0RhdGFUeXBlcy9Db2xsZWN0aW9ucy9NYXBcIjtcbmltcG9ydCBDYW52YXNOb2RlIGZyb20gXCIuLi9Ob2Rlcy9DYW52YXNOb2RlXCI7XG5pbXBvcnQgR3JhcGhpYyBmcm9tIFwiLi4vTm9kZXMvR3JhcGhpY1wiO1xuaW1wb3J0IFBvaW50IGZyb20gXCIuLi9Ob2Rlcy9HcmFwaGljcy9Qb2ludFwiO1xuaW1wb3J0IFJlY3QgZnJvbSBcIi4uL05vZGVzL0dyYXBoaWNzL1JlY3RcIjtcbmltcG9ydCBTcHJpdGUgZnJvbSBcIi4uL05vZGVzL1Nwcml0ZXMvU3ByaXRlXCI7XG5pbXBvcnQgVGlsZW1hcCBmcm9tIFwiLi4vTm9kZXMvVGlsZW1hcFwiO1xuaW1wb3J0IE9ydGhvZ29uYWxUaWxlbWFwIGZyb20gXCIuLi9Ob2Rlcy9UaWxlbWFwcy9PcnRob2dvbmFsVGlsZW1hcFwiO1xuaW1wb3J0IFVJRWxlbWVudCBmcm9tIFwiLi4vTm9kZXMvVUlFbGVtZW50XCI7XG5pbXBvcnQgVUlMYXllciBmcm9tIFwiLi4vU2NlbmUvTGF5ZXJzL1VJTGF5ZXJcIjtcbmltcG9ydCBTY2VuZSBmcm9tIFwiLi4vU2NlbmUvU2NlbmVcIjtcbmltcG9ydCBHcmFwaGljUmVuZGVyZXIgZnJvbSBcIi4vQ2FudmFzUmVuZGVyaW5nL0dyYXBoaWNSZW5kZXJlclwiO1xuaW1wb3J0IFJlbmRlcmluZ01hbmFnZXIgZnJvbSBcIi4vUmVuZGVyaW5nTWFuYWdlclwiXG5pbXBvcnQgVGlsZW1hcFJlbmRlcmVyIGZyb20gXCIuL0NhbnZhc1JlbmRlcmluZy9UaWxlbWFwUmVuZGVyZXJcIjtcbmltcG9ydCBVSUVsZW1lbnRSZW5kZXJlciBmcm9tIFwiLi9DYW52YXNSZW5kZXJpbmcvVUlFbGVtZW50UmVuZGVyZXJcIjtcbmltcG9ydCBMYWJlbCBmcm9tIFwiLi4vTm9kZXMvVUlFbGVtZW50cy9MYWJlbFwiO1xuaW1wb3J0IEJ1dHRvbiBmcm9tIFwiLi4vTm9kZXMvVUlFbGVtZW50cy9CdXR0b25cIjtcbmltcG9ydCBTbGlkZXIgZnJvbSBcIi4uL05vZGVzL1VJRWxlbWVudHMvU2xpZGVyXCI7XG5pbXBvcnQgVGV4dElucHV0IGZyb20gXCIuLi9Ob2Rlcy9VSUVsZW1lbnRzL1RleHRJbnB1dFwiO1xuaW1wb3J0IEFuaW1hdGVkU3ByaXRlIGZyb20gXCIuLi9Ob2Rlcy9TcHJpdGVzL0FuaW1hdGVkU3ByaXRlXCI7XG5pbXBvcnQgVmVjMiBmcm9tIFwiLi4vRGF0YVR5cGVzL1ZlYzJcIjtcbmltcG9ydCBDb2xvciBmcm9tIFwiLi4vVXRpbHMvQ29sb3JcIjtcbmltcG9ydCBMaW5lIGZyb20gXCIuLi9Ob2Rlcy9HcmFwaGljcy9MaW5lXCI7XG5pbXBvcnQgRGVidWcgZnJvbSBcIi4uL0RlYnVnL0RlYnVnXCI7XG5pbXBvcnQgSXNvbWV0cmljVGlsZW1hcCBmcm9tIFwiLi4vTm9kZXMvVGlsZW1hcHMvSXNvbWV0cmljVGlsZW1hcFwiO1xuaW1wb3J0IFN0YWdnZXJlZElzb21ldHJpY1RpbGVtYXAgZnJvbSBcIi4uL05vZGVzL1RpbGVtYXBzL1N0YWdnZXJlZElzb21ldHJpY1RpbGVtYXBcIjtcblxuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgUmVuZGVyaW5nTWFuYWdlciBjbGFzcyB1c2luZyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbnZhc1JlbmRlcmVyIGV4dGVuZHMgUmVuZGVyaW5nTWFuYWdlciB7XG4gICAgcHJvdGVjdGVkIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuICAgIHByb3RlY3RlZCBncmFwaGljUmVuZGVyZXI6IEdyYXBoaWNSZW5kZXJlcjtcbiAgICBwcm90ZWN0ZWQgdGlsZW1hcFJlbmRlcmVyOiBUaWxlbWFwUmVuZGVyZXI7XG4gICAgcHJvdGVjdGVkIHVpRWxlbWVudFJlbmRlcmVyOiBVSUVsZW1lbnRSZW5kZXJlcjtcblxuICAgIHByb3RlY3RlZCBvcmlnaW46IFZlYzI7XG4gICAgcHJvdGVjdGVkIHpvb206IG51bWJlcjtcblxuICAgIHByb3RlY3RlZCB3b3JsZFNpemU6IFZlYzI7XG5cbiAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICBzdXBlcigpO1xuICAgIH1cblxuICAgIC8vIEBvdmVycmlkZVxuICAgIHNldFNjZW5lKHNjZW5lOiBTY2VuZSl7XG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcbiAgICAgICAgdGhpcy5ncmFwaGljUmVuZGVyZXIuc2V0U2NlbmUoc2NlbmUpO1xuICAgICAgICB0aGlzLnRpbGVtYXBSZW5kZXJlci5zZXRTY2VuZShzY2VuZSk7XG4gICAgICAgIHRoaXMudWlFbGVtZW50UmVuZGVyZXIuc2V0U2NlbmUoc2NlbmUpO1xuICAgIH1cblxuICAgIC8vIEBvdmVycmlkZVxuICAgIGluaXRpYWxpemVDYW52YXMoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQge1xuICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcblxuICAgICAgICB0aGlzLndvcmxkU2l6ZSA9IG5ldyBWZWMyKHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgICAgIHRoaXMuY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgICAgICB0aGlzLmdyYXBoaWNSZW5kZXJlciA9IG5ldyBHcmFwaGljUmVuZGVyZXIodGhpcy5jdHgpO1xuICAgICAgICB0aGlzLnRpbGVtYXBSZW5kZXJlciA9IG5ldyBUaWxlbWFwUmVuZGVyZXIodGhpcy5jdHgpO1xuICAgICAgICB0aGlzLnVpRWxlbWVudFJlbmRlcmVyID0gbmV3IFVJRWxlbWVudFJlbmRlcmVyKHRoaXMuY3R4KVxuXG4gICAgICAgIC8vIEZvciBjcmlzcCBwaXhlbCBhcnRcbiAgICAgICAgdGhpcy5jdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY3R4O1xuICAgIH1cblxuICAgIC8vIEBvdmVycmlkZVxuICAgIHJlbmRlcih2aXNpYmxlU2V0OiBDYW52YXNOb2RlW10sIHRpbGVtYXBzOiBUaWxlbWFwW10sIHVpTGF5ZXJzOiBNYXA8VUlMYXllcj4pOiB2b2lkIHtcbiAgICAgICAgLy8gU29ydCBieSBkZXB0aCwgdGhlbiBieSB2aXNpYmxlIHNldCBieSB5LXZhbHVlXG4gICAgICAgIHZpc2libGVTZXQuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgaWYoYS5nZXRMYXllcigpLmdldERlcHRoKCkgPT09IGIuZ2V0TGF5ZXIoKS5nZXREZXB0aCgpKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gKGEuYm91bmRhcnkuYm90dG9tKSAtIChiLmJvdW5kYXJ5LmJvdHRvbSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBhLmdldExheWVyKCkuZ2V0RGVwdGgoKSAtIGIuZ2V0TGF5ZXIoKS5nZXREZXB0aCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgdGlsZW1hcEluZGV4ID0gMDtcbiAgICAgICAgbGV0IHRpbGVtYXBMZW5ndGggPSB0aWxlbWFwcy5sZW5ndGg7XG5cbiAgICAgICAgbGV0IHZpc2libGVTZXRJbmRleCA9IDA7XG4gICAgICAgIGxldCB2aXNpYmxlU2V0TGVuZ3RoID0gdmlzaWJsZVNldC5sZW5ndGg7XG5cbiAgICAgICAgd2hpbGUodGlsZW1hcEluZGV4IDwgdGlsZW1hcExlbmd0aCB8fCB2aXNpYmxlU2V0SW5kZXggPCB2aXNpYmxlU2V0TGVuZ3RoKXtcbiAgICAgICAgICAgIC8vIENoZWNrIGNvbmRpdGlvbnMgd2hlcmUgd2UndmUgYWxyZWFkeSByZWFjaGVkIHRoZSBlZGdlIG9mIG9uZSBsaXN0XG4gICAgICAgICAgICBpZih0aWxlbWFwSW5kZXggPj0gdGlsZW1hcExlbmd0aCl7XG4gICAgICAgICAgICAgICAgLy8gT25seSByZW5kZXIgdGhlIHJlbWFpbmluZyB2aXNpYmxlIHNldFxuICAgICAgICAgICAgICAgIGxldCBub2RlID0gdmlzaWJsZVNldFt2aXNpYmxlU2V0SW5kZXgrK107XG4gICAgICAgICAgICAgICAgaWYobm9kZS52aXNpYmxlKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJOb2RlKG5vZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYodmlzaWJsZVNldEluZGV4ID49IHZpc2libGVTZXRMZW5ndGgpe1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgcmVuZGVyIHRpbGVtYXBzXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJUaWxlbWFwKHRpbGVtYXBzW3RpbGVtYXBJbmRleCsrXSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJlbmRlciB3aGljaGV2ZXIgaXMgZnVydGhlciBkb3duXG4gICAgICAgICAgICBpZih0aWxlbWFwc1t0aWxlbWFwSW5kZXhdLmdldExheWVyKCkuZ2V0RGVwdGgoKSA8PSB2aXNpYmxlU2V0W3Zpc2libGVTZXRJbmRleF0uZ2V0TGF5ZXIoKS5nZXREZXB0aCgpKXtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclRpbGVtYXAodGlsZW1hcHNbdGlsZW1hcEluZGV4KytdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IG5vZGUgPSB2aXNpYmxlU2V0W3Zpc2libGVTZXRJbmRleCsrXTtcbiAgICAgICAgICAgICAgICBpZihub2RlLnZpc2libGUpe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck5vZGUobm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVuZGVyIHRoZSB1aUxheWVycyBvbiB0b3Agb2YgZXZlcnl0aGluZyBlbHNlXG4gICAgICAgIGxldCBzb3J0ZWRVSUxheWVycyA9IG5ldyBBcnJheTxVSUxheWVyPigpO1xuXG4gICAgICAgIHVpTGF5ZXJzLmZvckVhY2goa2V5ID0+IHNvcnRlZFVJTGF5ZXJzLnB1c2godWlMYXllcnMuZ2V0KGtleSkpKTtcblxuICAgICAgICBzb3J0ZWRVSUxheWVycyA9IHNvcnRlZFVJTGF5ZXJzLnNvcnQoKHVpMSwgdWkyKSA9PiB1aTEuZ2V0RGVwdGgoKSAtIHVpMi5nZXREZXB0aCgpKTtcblxuICAgICAgICBzb3J0ZWRVSUxheWVycy5mb3JFYWNoKHVpTGF5ZXIgPT4ge1xuXHRcdFx0aWYoIXVpTGF5ZXIuaXNIaWRkZW4oKSlcblx0XHRcdFx0dWlMYXllci5nZXRJdGVtcygpLmZvckVhY2gobm9kZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCg8Q2FudmFzTm9kZT5ub2RlKS52aXNpYmxlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyTm9kZSg8Q2FudmFzTm9kZT5ub2RlKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcblx0XHR9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXJzIGEgc3BlY2lmaWVkIENhbnZhc05vZGVcbiAgICAgKiBAcGFyYW0gbm9kZSBUaGUgQ2FudmFzTm9kZSB0byByZW5kZXJcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgcmVuZGVyTm9kZShub2RlOiBDYW52YXNOb2RlKTogdm9pZCB7XG4gICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgb3JpZ2luIG9mIHRoZSB2aWV3cG9ydCBhY2NvcmRpbmcgdG8gdGhpcyBzcHJpdGVcbiAgICAgICAgdGhpcy5vcmlnaW4gPSB0aGlzLnNjZW5lLmdldFZpZXdUcmFuc2xhdGlvbihub2RlKTtcblxuICAgICAgICAvLyBHZXQgdGhlIHpvb20gbGV2ZWwgb2YgdGhlIHNjZW5lXG4gICAgICAgIHRoaXMuem9vbSA9IHRoaXMuc2NlbmUuZ2V0Vmlld1NjYWxlKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBNb3ZlIHRoZSBjYW52YXMgdG8gdGhlIHBvc2l0aW9uIG9mIHRoZSBub2RlIGFuZCByb3RhdGVcbiAgICAgICAgbGV0IHhTY2FsZSA9IDE7XG4gICAgICAgIGxldCB5U2NhbGUgPSAxO1xuICAgICAgICBcbiAgICAgICAgaWYobm9kZSBpbnN0YW5jZW9mIFNwcml0ZSl7XG4gICAgICAgICAgICB4U2NhbGUgPSBub2RlLmludmVydFggPyAtMSA6IDE7XG4gICAgICAgICAgICB5U2NhbGUgPSBub2RlLmludmVydFkgPyAtMSA6IDE7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmN0eC5zZXRUcmFuc2Zvcm0oeFNjYWxlLCAwLCAwLCB5U2NhbGUsIChub2RlLnBvc2l0aW9uLnggLSB0aGlzLm9yaWdpbi54KSp0aGlzLnpvb20sIChub2RlLnBvc2l0aW9uLnkgLSB0aGlzLm9yaWdpbi55KSp0aGlzLnpvb20pO1xuICAgICAgICB0aGlzLmN0eC5yb3RhdGUoLW5vZGUucm90YXRpb24pO1xuICAgICAgICBsZXQgZ2xvYmFsQWxwaGEgPSB0aGlzLmN0eC5nbG9iYWxBbHBoYTtcbiAgICAgICAgaWYobm9kZSBpbnN0YW5jZW9mIFJlY3Qpe1xuICAgICAgICAgICAgRGVidWcubG9nKFwibm9kZVwiICsgbm9kZS5pZCwgXCJOb2RlXCIgKyBub2RlLmlkICsgXCIgQWxwaGE6IFwiICsgbm9kZS5hbHBoYSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdHguZ2xvYmFsQWxwaGEgPSBub2RlLmFscGhhO1xuICAgICAgICBcbiAgICAgICAgaWYobm9kZSBpbnN0YW5jZW9mIEFuaW1hdGVkU3ByaXRlKXtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQW5pbWF0ZWRTcHJpdGUoPEFuaW1hdGVkU3ByaXRlPm5vZGUpO1xuICAgICAgICB9IGVsc2UgaWYobm9kZSBpbnN0YW5jZW9mIFNwcml0ZSl7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclNwcml0ZSg8U3ByaXRlPm5vZGUpO1xuICAgICAgICB9IGVsc2UgaWYobm9kZSBpbnN0YW5jZW9mIEdyYXBoaWMpe1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJHcmFwaGljKDxHcmFwaGljPm5vZGUpO1xuICAgICAgICB9IGVsc2UgaWYobm9kZSBpbnN0YW5jZW9mIFVJRWxlbWVudCl7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclVJRWxlbWVudCg8VUlFbGVtZW50Pm5vZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jdHguZ2xvYmFsQWxwaGEgPSBnbG9iYWxBbHBoYTtcbiAgICAgICAgdGhpcy5jdHguc2V0VHJhbnNmb3JtKDEsIDAsIDAsIDEsIDAsIDApO1xuICAgIH1cblxuICAgIC8vIEBvdmVycmlkZVxuICAgIHByb3RlY3RlZCByZW5kZXJTcHJpdGUoc3ByaXRlOiBTcHJpdGUpOiB2b2lkIHtcbiAgICAgICAgLy8gR2V0IHRoZSBpbWFnZSBmcm9tIHRoZSByZXNvdXJjZSBtYW5hZ2VyXG4gICAgICAgIGxldCBpbWFnZSA9IHRoaXMucmVzb3VyY2VNYW5hZ2VyLmdldEltYWdlKHNwcml0ZS5pbWFnZUlkKTtcblxuICAgICAgICAvKlxuICAgICAgICAgICAgQ29vcmRpbmF0ZXMgaW4gdGhlIHNwYWNlIG9mIHRoZSBpbWFnZTpcbiAgICAgICAgICAgICAgICBpbWFnZSBjcm9wIHN0YXJ0IC0+IHgsIHlcbiAgICAgICAgICAgICAgICBpbWFnZSBjcm9wIHNpemUgIC0+IHcsIGhcbiAgICAgICAgICAgIENvb3JkaW5hdGVzIGluIHRoZSBzcGFjZSBvZiB0aGUgd29ybGRcbiAgICAgICAgICAgICAgICBpbWFnZSBkcmF3IHN0YXJ0IC0+IHgsIHlcbiAgICAgICAgICAgICAgICBpbWFnZSBkcmF3IHNpemUgIC0+IHcsIGhcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jdHguZHJhd0ltYWdlKGltYWdlLFxuICAgICAgICAgICAgc3ByaXRlLmltYWdlT2Zmc2V0LngsIHNwcml0ZS5pbWFnZU9mZnNldC55LFxuICAgICAgICAgICAgc3ByaXRlLnNpemUueCwgc3ByaXRlLnNpemUueSxcbiAgICAgICAgICAgICgtc3ByaXRlLnNpemUueCpzcHJpdGUuc2NhbGUueC8yKSp0aGlzLnpvb20sICgtc3ByaXRlLnNpemUueSpzcHJpdGUuc2NhbGUueS8yKSp0aGlzLnpvb20sXG4gICAgICAgICAgICBzcHJpdGUuc2l6ZS54ICogc3ByaXRlLnNjYWxlLngqdGhpcy56b29tLCBzcHJpdGUuc2l6ZS55ICogc3ByaXRlLnNjYWxlLnkqdGhpcy56b29tKTtcbiAgICB9XG5cbiAgICAvLyBAb3ZlcnJpZGVcbiAgICBwcm90ZWN0ZWQgcmVuZGVyQW5pbWF0ZWRTcHJpdGUoc3ByaXRlOiBBbmltYXRlZFNwcml0ZSk6IHZvaWQge1xuICAgICAgICAvLyBHZXQgdGhlIGltYWdlIGZyb20gdGhlIHJlc291cmNlIG1hbmFnZXJcbiAgICAgICAgbGV0IGltYWdlID0gdGhpcy5yZXNvdXJjZU1hbmFnZXIuZ2V0SW1hZ2Uoc3ByaXRlLmltYWdlSWQpO1xuXG4gICAgICAgIGxldCBhbmltYXRpb25JbmRleCA9IHNwcml0ZS5hbmltYXRpb24uZ2V0SW5kZXhBbmRBZHZhbmNlQW5pbWF0aW9uKCk7XG5cbiAgICAgICAgbGV0IGFuaW1hdGlvbk9mZnNldCA9IHNwcml0ZS5nZXRBbmltYXRpb25PZmZzZXQoYW5pbWF0aW9uSW5kZXgpO1xuXG4gICAgICAgIC8qXG4gICAgICAgICAgICBDb29yZGluYXRlcyBpbiB0aGUgc3BhY2Ugb2YgdGhlIGltYWdlOlxuICAgICAgICAgICAgICAgIGltYWdlIGNyb3Agc3RhcnQgLT4geCwgeVxuICAgICAgICAgICAgICAgIGltYWdlIGNyb3Agc2l6ZSAgLT4gdywgaFxuICAgICAgICAgICAgQ29vcmRpbmF0ZXMgaW4gdGhlIHNwYWNlIG9mIHRoZSB3b3JsZCAoZ2l2ZW4gd2UgbW92ZWQpXG4gICAgICAgICAgICAgICAgaW1hZ2UgZHJhdyBzdGFydCAtPiAtdy8yLCAtaC8yXG4gICAgICAgICAgICAgICAgaW1hZ2UgZHJhdyBzaXplICAtPiB3LCBoXG4gICAgICAgICovXG4gICAgICAgIHRoaXMuY3R4LmRyYXdJbWFnZShpbWFnZSxcbiAgICAgICAgICAgIHNwcml0ZS5pbWFnZU9mZnNldC54ICsgYW5pbWF0aW9uT2Zmc2V0LngsIHNwcml0ZS5pbWFnZU9mZnNldC55ICsgYW5pbWF0aW9uT2Zmc2V0LnksXG4gICAgICAgICAgICBzcHJpdGUuc2l6ZS54LCBzcHJpdGUuc2l6ZS55LFxuICAgICAgICAgICAgKC1zcHJpdGUuc2l6ZS54KnNwcml0ZS5zY2FsZS54LzIpKnRoaXMuem9vbSwgKC1zcHJpdGUuc2l6ZS55KnNwcml0ZS5zY2FsZS55LzIpKnRoaXMuem9vbSxcbiAgICAgICAgICAgIHNwcml0ZS5zaXplLnggKiBzcHJpdGUuc2NhbGUueCp0aGlzLnpvb20sIHNwcml0ZS5zaXplLnkgKiBzcHJpdGUuc2NhbGUueSp0aGlzLnpvb20pO1xuICAgIH1cblxuICAgIC8vIEBvdmVycmlkZVxuICAgIHByb3RlY3RlZCByZW5kZXJHcmFwaGljKGdyYXBoaWM6IEdyYXBoaWMpOiB2b2lkIHtcbiAgICAgICAgaWYoZ3JhcGhpYyBpbnN0YW5jZW9mIFBvaW50KXtcbiAgICAgICAgICAgIHRoaXMuZ3JhcGhpY1JlbmRlcmVyLnJlbmRlclBvaW50KDxQb2ludD5ncmFwaGljLCB0aGlzLnpvb20pO1xuICAgICAgICB9IGVsc2UgaWYoZ3JhcGhpYyBpbnN0YW5jZW9mIExpbmUpe1xuICAgICAgICAgICAgdGhpcy5ncmFwaGljUmVuZGVyZXIucmVuZGVyTGluZSg8TGluZT5ncmFwaGljLCB0aGlzLm9yaWdpbiwgdGhpcy56b29tKTtcbiAgICAgICAgfSBlbHNlIGlmKGdyYXBoaWMgaW5zdGFuY2VvZiBSZWN0KXtcbiAgICAgICAgICAgIHRoaXMuZ3JhcGhpY1JlbmRlcmVyLnJlbmRlclJlY3QoPFJlY3Q+Z3JhcGhpYywgdGhpcy56b29tKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEBvdmVycmlkZVxuICAgIHByb3RlY3RlZCByZW5kZXJUaWxlbWFwKHRpbGVtYXA6IFRpbGVtYXApOiB2b2lkIHtcbiAgICAgICAgdGhpcy50aWxlbWFwUmVuZGVyZXIucmVuZGVyVGlsZW1hcCh0aWxlbWFwKTtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgLy8gQG92ZXJyaWRlXG4gICAgcHJvdGVjdGVkIHJlbmRlclVJRWxlbWVudCh1aUVsZW1lbnQ6IFVJRWxlbWVudCk6IHZvaWQge1xuICAgICAgICBpZih1aUVsZW1lbnQgaW5zdGFuY2VvZiBMYWJlbCl7XG4gICAgICAgICAgICB0aGlzLnVpRWxlbWVudFJlbmRlcmVyLnJlbmRlckxhYmVsKHVpRWxlbWVudCk7XG4gICAgICAgIH0gZWxzZSBpZih1aUVsZW1lbnQgaW5zdGFuY2VvZiBCdXR0b24pe1xuICAgICAgICAgICAgdGhpcy51aUVsZW1lbnRSZW5kZXJlci5yZW5kZXJCdXR0b24odWlFbGVtZW50KTtcbiAgICAgICAgfSBlbHNlIGlmKHVpRWxlbWVudCBpbnN0YW5jZW9mIFNsaWRlcil7XG4gICAgICAgICAgICB0aGlzLnVpRWxlbWVudFJlbmRlcmVyLnJlbmRlclNsaWRlcih1aUVsZW1lbnQpO1xuICAgICAgICB9IGVsc2UgaWYodWlFbGVtZW50IGluc3RhbmNlb2YgVGV4dElucHV0KXtcbiAgICAgICAgICAgIHRoaXMudWlFbGVtZW50UmVuZGVyZXIucmVuZGVyVGV4dElucHV0KHVpRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbGVhcihjbGVhckNvbG9yOiBDb2xvcik6IHZvaWQge1xuICAgICAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy53b3JsZFNpemUueCwgdGhpcy53b3JsZFNpemUueSk7XG4gICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IGNsZWFyQ29sb3IudG9TdHJpbmcoKTtcbiAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoMCwgMCwgdGhpcy53b3JsZFNpemUueCwgdGhpcy53b3JsZFNpemUueSk7XG4gICAgfVxufSIsImltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IExpbmUgZnJvbSBcIi4uLy4uL05vZGVzL0dyYXBoaWNzL0xpbmVcIjtcbmltcG9ydCBQb2ludCBmcm9tIFwiLi4vLi4vTm9kZXMvR3JhcGhpY3MvUG9pbnRcIjtcbmltcG9ydCBSZWN0IGZyb20gXCIuLi8uLi9Ob2Rlcy9HcmFwaGljcy9SZWN0XCI7XG5pbXBvcnQgUmVzb3VyY2VNYW5hZ2VyIGZyb20gXCIuLi8uLi9SZXNvdXJjZU1hbmFnZXIvUmVzb3VyY2VNYW5hZ2VyXCI7XG5pbXBvcnQgU2NlbmUgZnJvbSBcIi4uLy4uL1NjZW5lL1NjZW5lXCI7XG5cbi8qKlxuICogQSB1dGlsaXR5IGNsYXNzIHRvIGhlbHAgdGhlIEByZWZlcmVuY2VbQ2FudmFzUmVuZGVyZXJdIHJlbmRlciBAcmVmZXJlbmNlW0dyYXBoaWNdc1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHcmFwaGljUmVuZGVyZXIge1xuICAgIC8qKiBUaGUgcmVzb3VyY2UgbWFuYWdlciBvZiB0aGUgZ2FtZSBlbmdpbmUgKi9cbiAgICBwcm90ZWN0ZWQgcmVzb3VyY2VNYW5hZ2VyOiBSZXNvdXJjZU1hbmFnZXI7XG4gICAgLyoqIFRoZSBjdXJyZW50IHNjZW5lICovXG4gICAgcHJvdGVjdGVkIHNjZW5lOiBTY2VuZTtcbiAgICAvKiogVGhlIHJlbmRlcmluZyBjb250ZXh0ICovXG4gICAgcHJvdGVjdGVkIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuXG4gICAgY29uc3RydWN0b3IoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpe1xuICAgICAgICB0aGlzLnJlc291cmNlTWFuYWdlciA9IFJlc291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuICAgICAgICB0aGlzLmN0eCA9IGN0eDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzY2VuZSBvZiB0aGlzIEdyYXBoaWNSZW5kZXJlclxuICAgICAqIEBwYXJhbSBzY2VuZSBUaGUgY3VycmVudCBzY2VuZVxuICAgICAqL1xuICAgIHNldFNjZW5lKHNjZW5lOiBTY2VuZSk6IHZvaWQge1xuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyBhIHBvaW50XG4gICAgICogQHBhcmFtIHBvaW50IFRoZSBwb2ludCB0byByZW5kZXJcbiAgICAgKiBAcGFyYW0gem9vbSBUaGUgem9vbSBsZXZlbFxuICAgICAqL1xuICAgIHJlbmRlclBvaW50KHBvaW50OiBQb2ludCwgem9vbTogbnVtYmVyKTogdm9pZCB7XG5cdFx0dGhpcy5jdHguZmlsbFN0eWxlID0gcG9pbnQuY29sb3IudG9TdHJpbmdSR0JBKCk7XG4gICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KCgtcG9pbnQuc2l6ZS54LzIpKnpvb20sICgtcG9pbnQuc2l6ZS55LzIpKnpvb20sXG4gICAgICAgIHBvaW50LnNpemUueCp6b29tLCBwb2ludC5zaXplLnkqem9vbSk7XG4gICAgfVxuXG4gICAgcmVuZGVyTGluZShsaW5lOiBMaW5lLCBvcmlnaW46IFZlYzIsIHpvb206IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IGxpbmUuY29sb3IudG9TdHJpbmdSR0JBKCk7XG4gICAgICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IGxpbmUudGhpY2tuZXNzO1xuICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgdGhpcy5jdHgubW92ZVRvKDAsIDApO1xuICAgICAgICB0aGlzLmN0eC5saW5lVG8oKGxpbmUuZW5kLnggLSBsaW5lLnN0YXJ0LngpKnpvb20sIChsaW5lLmVuZC55IC0gbGluZS5zdGFydC55KSp6b29tKTtcbiAgICAgICAgdGhpcy5jdHguY2xvc2VQYXRoKCk7XG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbmRlcnMgYSByZWN0XG4gICAgICogQHBhcmFtIHJlY3QgVGhlIHJlY3QgdG8gcmVuZGVyXG4gICAgICogQHBhcmFtIHpvb20gVGhlIHpvb20gbGV2ZWxcbiAgICAgKi9cbiAgICByZW5kZXJSZWN0KHJlY3Q6IFJlY3QsIHpvb206IG51bWJlcik6IHZvaWQge1xuICAgICAgICAvLyBEcmF3IHRoZSBpbnRlcmlvciBvZiB0aGUgcmVjdFxuICAgICAgICBpZihyZWN0LmNvbG9yLmEgIT09IDApe1xuICAgICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gcmVjdC5jb2xvci50b1N0cmluZ1JHQigpO1xuICAgICAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoKC1yZWN0LnNpemUueC8yKSp6b29tLCAoLXJlY3Quc2l6ZS55LzIpKnpvb20sIHJlY3Quc2l6ZS54Knpvb20sIHJlY3Quc2l6ZS55Knpvb20pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRHJhdyB0aGUgYm9yZGVyIG9mIHRoZSByZWN0IGlmIGl0IGlzbid0IHRyYW5zcGFyZW50XG4gICAgICAgIGlmKHJlY3QuYm9yZGVyQ29sb3IuYSAhPT0gMCl7XG4gICAgICAgICAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IHJlY3QuZ2V0Qm9yZGVyQ29sb3IoKS50b1N0cmluZ1JHQigpO1xuICAgICAgICAgICAgdGhpcy5jdHgubGluZVdpZHRoID0gcmVjdC5nZXRCb3JkZXJXaWR0aCgpO1xuICAgICAgICAgICAgdGhpcy5jdHguc3Ryb2tlUmVjdCgoLXJlY3Quc2l6ZS54LzIpKnpvb20sICgtcmVjdC5zaXplLnkvMikqem9vbSwgcmVjdC5zaXplLngqem9vbSwgcmVjdC5zaXplLnkqem9vbSk7XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IFJlc291cmNlTWFuYWdlciBmcm9tIFwiLi4vLi4vUmVzb3VyY2VNYW5hZ2VyL1Jlc291cmNlTWFuYWdlclwiO1xuaW1wb3J0IFNjZW5lIGZyb20gXCIuLi8uLi9TY2VuZS9TY2VuZVwiO1xuaW1wb3J0IE9ydGhvZ29uYWxUaWxlbWFwIGZyb20gXCIuLi8uLi9Ob2Rlcy9UaWxlbWFwcy9PcnRob2dvbmFsVGlsZW1hcFwiO1xuaW1wb3J0IFZlYzIgZnJvbSBcIi4uLy4uL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgVGlsZXNldCBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL1RpbGVzZXRzL1RpbGVzZXRcIjtcbmltcG9ydCBUaWxlbWFwIGZyb20gXCIuLi8uLi9Ob2Rlcy9UaWxlbWFwXCI7XG5pbXBvcnQgSXNvbWV0cmljVGlsZW1hcCBmcm9tIFwiLi4vLi4vTm9kZXMvVGlsZW1hcHMvSXNvbWV0cmljVGlsZW1hcFwiO1xuaW1wb3J0IFN0YWdnZXJlZElzb21ldHJpY1RpbGVtYXAgZnJvbSBcIi4uLy4uL05vZGVzL1RpbGVtYXBzL1N0YWdnZXJlZElzb21ldHJpY1RpbGVtYXBcIjtcblxuLyoqXG4gKiBBIHV0aWxpdHkgY2xhc3MgZm9yIHRoZSBAcmVmZXJlbmNlW0NhbnZhc1JlbmRlcmVyXSB0byByZW5kZXIgQHJlZmVyZW5jZVtUaWxlbWFwXXNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGlsZW1hcFJlbmRlcmVyIHtcbiAgICBwcm90ZWN0ZWQgcmVzb3VyY2VNYW5hZ2VyOiBSZXNvdXJjZU1hbmFnZXI7XG4gICAgcHJvdGVjdGVkIHNjZW5lOiBTY2VuZTtcbiAgICBwcm90ZWN0ZWQgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG5cbiAgICBjb25zdHJ1Y3RvcihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCl7XG4gICAgICAgIHRoaXMucmVzb3VyY2VNYW5hZ2VyID0gUmVzb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG4gICAgICAgIHRoaXMuY3R4ID0gY3R4O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHNjZW5lIG9mIHRoaXMgVGlsZW1hcFJlbmRlcmVyXG4gICAgICogQHBhcmFtIHNjZW5lIFRoZSBjdXJyZW50IHNjZW5lXG4gICAgICovXG4gICAgc2V0U2NlbmUoc2NlbmU6IFNjZW5lKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXJzIGFuIG9ydGhvZ29uYWwgdGlsZW1hcFxuICAgICAqIEBwYXJhbSB0aWxlbWFwIFRoZSB0aWxlbWFwIHRvIHJlbmRlclxuICAgICAqL1xuICAgIHJlbmRlclRpbGVtYXAodGlsZW1hcDogVGlsZW1hcCk6IHZvaWQge1xuICAgICAgICBsZXQgcHJldmlvdXNBbHBoYSA9IHRoaXMuY3R4Lmdsb2JhbEFscGhhO1xuICAgICAgICB0aGlzLmN0eC5nbG9iYWxBbHBoYSA9IHRpbGVtYXAuZ2V0TGF5ZXIoKS5nZXRBbHBoYSgpO1xuICAgICAgICBcbiAgICAgICAgbGV0IG9yaWdpbiA9IHRoaXMuc2NlbmUuZ2V0Vmlld1RyYW5zbGF0aW9uKHRpbGVtYXApO1xuICAgICAgICBsZXQgc2l6ZSA9IHRoaXMuc2NlbmUuZ2V0Vmlld3BvcnQoKS5nZXRIYWxmU2l6ZSgpO1xuICAgICAgICBsZXQgem9vbSA9IHRoaXMuc2NlbmUuZ2V0Vmlld1NjYWxlKCk7XG4gICAgICAgIGxldCBib3R0b21SaWdodCA9IG9yaWdpbi5jbG9uZSgpLmFkZChzaXplLnNjYWxlZCgyKnpvb20pKTtcblxuICAgICAgICBpZih0aWxlbWFwLnZpc2libGUpe1xuICAgICAgICAgICAgbGV0IG1pbkNvbFJvdyA9IHRpbGVtYXAuZ2V0TWluQ29sUm93KHRoaXMuc2NlbmUuZ2V0Vmlld3BvcnQoKS5nZXRWaWV3KCkpO1xuICAgICAgICAgICAgbGV0IG1heENvbFJvdyA9IHRpbGVtYXAuZ2V0TWF4Q29sUm93KHRoaXMuc2NlbmUuZ2V0Vmlld3BvcnQoKS5nZXRWaWV3KCkpO1xuICAgICAgICAgICAgZm9yKGxldCByb3cgPSBtaW5Db2xSb3cueTsgcm93IDw9IG1heENvbFJvdy55OyByb3crKyl7XG4gICAgICAgICAgICAgICAgZm9yKGxldCBjb2wgPSBtaW5Db2xSb3cueDsgY29sIDw9IG1heENvbFJvdy54OyBjb2wrKyl7XG4gICAgICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgdGlsZSBhdCB0aGlzIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIGxldCB0aWxlID0gdGlsZW1hcC5nZXRUaWxlKGNvbCwgcm93KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IHRoZSByb3QvZmxpcCBwYXJhbWV0ZXJzIGlmIHRoZXJlIGFyZSBhbnlcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFzayA9ICgweEUgPDwgMjgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByb3RGbGlwID0gKChtYXNrICYgdGlsZSkgPj4gMjgpICYgMHhGO1xuICAgICAgICAgICAgICAgICAgICB0aWxlID0gdGlsZSAmIH5tYXNrO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRpbGVzZXQgdGhhdCBvd25zIHRoaXMgdGlsZSBpbmRleCBhbmQgcmVuZGVyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgdGlsZXNldCBvZiB0aWxlbWFwLmdldFRpbGVzZXRzKCkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYodGlsZXNldC5oYXNUaWxlKHRpbGUpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclRpbGUodGlsZW1hcCwgdGlsZXNldCwgdGlsZSwgY29sLCByb3csIG9yaWdpbiwgdGlsZW1hcC5zY2FsZSwgem9vbSwgcm90RmxpcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmN0eC5nbG9iYWxBbHBoYSA9IHByZXZpb3VzQWxwaGE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyBhIHRpbGVcbiAgICAgKiBAcGFyYW0gdGlsZXNldCBUaGUgdGlsZXNldCB0aGlzIHRpbGUgYmVsb25ncyB0byBcbiAgICAgKiBAcGFyYW0gdGlsZUluZGV4IFRoZSBpbmRleCBvZiB0aGUgdGlsZVxuICAgICAqIEBwYXJhbSB0aWxlbWFwUm93IFRoZSByb3cgb2YgdGhlIHRpbGUgaW4gdGhlIHRpbGVtYXBcbiAgICAgKiBAcGFyYW0gdGlsZW1hcENvbCBUaGUgY29sdW1uIG9mIHRoZSB0aWxlIGluIHRoZSB0aWxlbWFwXG4gICAgICogQHBhcmFtIG9yaWdpbiBUaGUgb3JpZ2luIG9mIHRoZSB2aWV3cG9ydFxuICAgICAqIEBwYXJhbSBzY2FsZSBUaGUgc2NhbGUgb2YgdGhlIHRpbGVtYXBcbiAgICAgKiBAcGFyYW0gem9vbSBUaGUgem9vbSBsZXZlbCBvZiB0aGUgdmlld3BvcnRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgcmVuZGVyVGlsZSh0aWxlbWFwOiBUaWxlbWFwLCB0aWxlc2V0OiBUaWxlc2V0LCB0aWxlSW5kZXg6IG51bWJlciwgdGlsZW1hcENvbDogbnVtYmVyLCB0aWxlbWFwUm93OiBudW1iZXIsIG9yaWdpbjogVmVjMiwgc2NhbGU6IFZlYzIsIHpvb206IG51bWJlciwgcm90RmxpcDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGxldCBpbWFnZSA9IHRoaXMucmVzb3VyY2VNYW5hZ2VyLmdldEltYWdlKHRpbGVzZXQuZ2V0SW1hZ2VLZXkoKSk7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBzaXplIG9mIHRoZSB0aWxlIHRvIHJlbmRlclxuICAgICAgICBsZXQgdGlsZVNpemUgPSB0aWxlc2V0LmdldFRpbGVTaXplKCk7XG4gICAgICAgIGxldCB3aWR0aCA9IHRpbGVTaXplLng7XG4gICAgICAgIGxldCBoZWlnaHQgPSB0aWxlU2l6ZS55O1xuXG4gICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgcG9zaXRpb24gdG8gc3RhcnQgYSBjcm9wIGluIHRoZSB0aWxlc2V0IGltYWdlXG4gICAgICAgIGxldCBpbWFnZVBvc2l0aW9uID0gdGlsZXNldC5nZXRJbWFnZU9mZnNldEZvclRpbGUodGlsZUluZGV4KTtcbiAgICAgICAgbGV0IGxlZnQgPSBpbWFnZVBvc2l0aW9uLnhcbiAgICAgICAgbGV0IHRvcCA9IGltYWdlUG9zaXRpb24ueTtcblxuICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIHBvc2l0aW9uIGluIHRoZSB3b3JsZCB0byByZW5kZXIgdGhlIHRpbGVcbiAgICAgICAgbGV0IHdvcmxkUG9zaXRpb24gPSB0aWxlbWFwLmdldFdvcmxkUG9zaXRpb24odGlsZW1hcENvbCwgdGlsZW1hcFJvdyk7XG5cbiAgICAgICAgbGV0IHdvcmxkWCA9IE1hdGguZmxvb3IoKHdvcmxkUG9zaXRpb24ueCAtIG9yaWdpbi54KSp6b29tKTtcbiAgICAgICAgbGV0IHdvcmxkWSA9IE1hdGguZmxvb3IoKHdvcmxkUG9zaXRpb24ueSAtIG9yaWdpbi55KSp6b29tKTtcblxuICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIHNpemUgb2YgdGhlIHdvcmxkIHRvIHJlbmRlciB0aGUgdGlsZSBpblxuICAgICAgICBsZXQgd29ybGRXaWR0aCA9IE1hdGguY2VpbCh3aWR0aCAqIHNjYWxlLnggKiB6b29tKTtcbiAgICAgICAgbGV0IHdvcmxkSGVpZ2h0ID0gTWF0aC5jZWlsKGhlaWdodCAqIHNjYWxlLnkgKiB6b29tKTtcblxuICAgICAgICBpZihyb3RGbGlwICE9PSAwKXtcbiAgICAgICAgICAgIGxldCBzY2FsZVggPSAxO1xuICAgICAgICAgICAgbGV0IHNjYWxlWSA9IDE7XG4gICAgICAgICAgICBsZXQgc2hlYXJYID0gMDtcbiAgICAgICAgICAgIGxldCBzaGVhclkgPSAwO1xuXG4gICAgICAgICAgICAvLyBGbGlwIG9uIHRoZSB4LWF4aXNcbiAgICAgICAgICAgIGlmKHJvdEZsaXAgJiA4KXtcbiAgICAgICAgICAgICAgICBzY2FsZVggPSAtMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRmxpcCBvbiB0aGUgeS1heGlzXG4gICAgICAgICAgICBpZihyb3RGbGlwICYgNCl7XG4gICAgICAgICAgICAgICAgc2NhbGVZID0gLTE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEZsaXAgb3ZlciB0aGUgbGluZSB5PXhcbiAgICAgICAgICAgIGlmKHJvdEZsaXAgJiAyKXtcbiAgICAgICAgICAgICAgICBzaGVhclggPSBzY2FsZVk7XG4gICAgICAgICAgICAgICAgc2hlYXJZID0gc2NhbGVYO1xuICAgICAgICAgICAgICAgIHNjYWxlWCA9IDA7XG4gICAgICAgICAgICAgICAgc2NhbGVZID0gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jdHguc2V0VHJhbnNmb3JtKHNjYWxlWCwgc2hlYXJYLCBzaGVhclksIHNjYWxlWSwgd29ybGRYICsgd29ybGRXaWR0aC8yLCB3b3JsZFkgKyB3b3JsZEhlaWdodC8yKTtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBSZW5kZXIgdGhlIHRpbGVcbiAgICAgICAgICAgIHRoaXMuY3R4LmRyYXdJbWFnZShpbWFnZSxcbiAgICAgICAgICAgICAgICBsZWZ0LCB0b3AsXG4gICAgICAgICAgICAgICAgd2lkdGgsIGhlaWdodCxcbiAgICAgICAgICAgICAgICAtd29ybGRXaWR0aC8yLCAtd29ybGRIZWlnaHQvMixcbiAgICAgICAgICAgICAgICB3b3JsZFdpZHRoLCB3b3JsZEhlaWdodCk7XG5cbiAgICAgICAgICAgIGlmKHJvdEZsaXAgIT09IDApe1xuICAgICAgICAgICAgICAgIHRoaXMuY3R4LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5vIHJvdGF0aW9ucywgZG9uJ3QgZG8gdGhlIGNhbGN1bGF0aW9ucywganVzdCByZW5kZXIgdGhlIHRpbGVcbiAgICAgICAgICAgIC8vIFJlbmRlciB0aGUgdGlsZVxuICAgICAgICAgICAgdGhpcy5jdHguZHJhd0ltYWdlKGltYWdlLFxuICAgICAgICAgICAgICAgIGxlZnQsIHRvcCxcbiAgICAgICAgICAgICAgICB3aWR0aCwgaGVpZ2h0LFxuICAgICAgICAgICAgICAgIHdvcmxkWCwgd29ybGRZLFxuICAgICAgICAgICAgICAgIHdvcmxkV2lkdGgsIHdvcmxkSGVpZ2h0KTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgcHJvdGVjdGVkIGdldE9ydGhvZ29uYWxUaWxlRHJhd1BvcyhtYXA6IE9ydGhvZ29uYWxUaWxlbWFwLCBzZXQ6IFRpbGVzZXQsIGNvbDogbnVtYmVyLCByb3c6IG51bWJlcik6IFZlYzIge1xuICAgICAgICBsZXQgaW1nc2l6ZTogVmVjMiA9IHNldC5nZXRUaWxlU2l6ZSgpLm11bHQobWFwLnNjYWxlKTtcbiAgICAgICAgbGV0IG1hcHNpemU6IFZlYzIgPSBtYXAuZ2V0U2NhbGVkVGlsZVNpemUoKTtcbiAgICAgICAgcmV0dXJuIG1hcC5nZXRXb3JsZFBvc2l0aW9uKGNvbCwgcm93KS5zdWIoaW1nc2l6ZS5zdWIobWFwc2l6ZSkpO1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgZ2V0SXNvbWV0cmljVGlsZURyYXdQb3MobWFwOiBUaWxlbWFwLCBzZXQ6IFRpbGVzZXQsIGNvbDogbnVtYmVyLCByb3c6IG51bWJlcik6IFZlYzIge1xuICAgICAgICBsZXQgc2l6ZTogVmVjMiA9IHNldC5nZXRUaWxlU2l6ZSgpO1xuICAgICAgICBsZXQgZHJhd1BvczogVmVjMiA9IG1hcC5nZXRTY2FsZWRUaWxlU2l6ZSgpLnN1YihuZXcgVmVjMihzaXplLngqbWFwLnNjYWxlLngsIHNpemUueSptYXAuc2NhbGUueSkpO1xuICAgICAgICBkcmF3UG9zLmluYygtc2l6ZS54Km1hcC5zY2FsZS54LzIsIDApO1xuICAgICAgICBkcmF3UG9zLmFkZChtYXAuZ2V0V29ybGRQb3NpdGlvbihjb2wsIHJvdykpO1xuICAgICAgICByZXR1cm4gZHJhd1BvcztcbiAgICB9XG59IiwiaW1wb3J0IFZlYzIgZnJvbSBcIi4uLy4uL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgQnV0dG9uIGZyb20gXCIuLi8uLi9Ob2Rlcy9VSUVsZW1lbnRzL0J1dHRvblwiO1xuaW1wb3J0IExhYmVsIGZyb20gXCIuLi8uLi9Ob2Rlcy9VSUVsZW1lbnRzL0xhYmVsXCI7XG5pbXBvcnQgU2xpZGVyIGZyb20gXCIuLi8uLi9Ob2Rlcy9VSUVsZW1lbnRzL1NsaWRlclwiO1xuaW1wb3J0IFRleHRJbnB1dCBmcm9tIFwiLi4vLi4vTm9kZXMvVUlFbGVtZW50cy9UZXh0SW5wdXRcIjtcbmltcG9ydCBSZXNvdXJjZU1hbmFnZXIgZnJvbSBcIi4uLy4uL1Jlc291cmNlTWFuYWdlci9SZXNvdXJjZU1hbmFnZXJcIjtcbmltcG9ydCBTY2VuZSBmcm9tIFwiLi4vLi4vU2NlbmUvU2NlbmVcIjtcbmltcG9ydCBNYXRoVXRpbHMgZnJvbSBcIi4uLy4uL1V0aWxzL01hdGhVdGlsc1wiO1xuXG4vKipcbiAqIEEgdXRpbGl0eSBjbGFzcyB0byBoZWxwIHRoZSBAcmVmZXJlbmNlW0NhbnZhc1JlbmRlcmVyXSByZW5kZXIgQHJlZmVyZW5jZVtVSUVsZW1lbnRdc1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVSUVsZW1lbnRSZW5kZXJlciB7XG4gICAgcHJvdGVjdGVkIHJlc291cmNlTWFuYWdlcjogUmVzb3VyY2VNYW5hZ2VyO1xuICAgIHByb3RlY3RlZCBzY2VuZTogU2NlbmU7XG4gICAgcHJvdGVjdGVkIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuXG4gICAgY29uc3RydWN0b3IoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpe1xuICAgICAgICB0aGlzLnJlc291cmNlTWFuYWdlciA9IFJlc291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuICAgICAgICB0aGlzLmN0eCA9IGN0eDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzY2VuZSBvZiB0aGlzIFVJRWxlbWVudFJlbmRlcmVyXG4gICAgICogQHBhcmFtIHNjZW5lIFRoZSBjdXJyZW50IHNjZW5lXG4gICAgICovXG4gICAgc2V0U2NlbmUoc2NlbmU6IFNjZW5lKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXJzIGEgbGFiZWxcbiAgICAgKiBAcGFyYW0gbGFiZWwgVGhlIGxhYmVsIHRvIHJlbmRlclxuICAgICAqL1xuICAgIHJlbmRlckxhYmVsKGxhYmVsOiBMYWJlbCk6IHZvaWQge1xuICAgICAgICAvLyBJZiB0aGUgc2l6ZSBpcyB1bmFzc2lnbmVkIChieSB0aGUgdXNlciBvciBhdXRvbWF0aWNhbGx5KSBhc3NpZ24gaXRcbiAgICAgICAgbGFiZWwuaGFuZGxlSW5pdGlhbFNpemluZyh0aGlzLmN0eCk7XG5cdFx0XG5cdFx0Ly8gR3JhYiB0aGUgZ2xvYmFsIGFscGhhIHNvIHdlIGNhbiBhZGp1c3QgaXQgZm9yIHRoaXMgcmVuZGVyXG5cdFx0bGV0IHByZXZpb3VzQWxwaGEgPSB0aGlzLmN0eC5nbG9iYWxBbHBoYTtcblxuICAgICAgICAvLyBHZXQgdGhlIGZvbnQgYW5kIHRleHQgcG9zaXRpb24gaW4gbGFiZWxcblx0XHR0aGlzLmN0eC5mb250ID0gbGFiZWwuZ2V0Rm9udFN0cmluZygpO1xuXHRcdGxldCBvZmZzZXQgPSBsYWJlbC5jYWxjdWxhdGVUZXh0T2Zmc2V0KHRoaXMuY3R4KTtcblxuXHRcdC8vIFN0cm9rZSBhbmQgZmlsbCBhIHJvdW5kZWQgcmVjdCBhbmQgZ2l2ZSBpdCB0ZXh0XG5cdFx0dGhpcy5jdHguZ2xvYmFsQWxwaGEgPSBsYWJlbC5iYWNrZ3JvdW5kQ29sb3IuYTtcblx0XHR0aGlzLmN0eC5maWxsU3R5bGUgPSBsYWJlbC5jYWxjdWxhdGVCYWNrZ3JvdW5kQ29sb3IoKS50b1N0cmluZ1JHQkEoKTtcblx0XHR0aGlzLmN0eC5maWxsUm91bmRlZFJlY3QoLWxhYmVsLnNpemUueC8yLCAtbGFiZWwuc2l6ZS55LzIsXG5cdFx0XHRsYWJlbC5zaXplLngsIGxhYmVsLnNpemUueSwgbGFiZWwuYm9yZGVyUmFkaXVzKTtcblx0XHRcblx0XHR0aGlzLmN0eC5zdHJva2VTdHlsZSA9IGxhYmVsLmNhbGN1bGF0ZUJvcmRlckNvbG9yKCkudG9TdHJpbmdSR0JBKCk7XG5cdFx0dGhpcy5jdHguZ2xvYmFsQWxwaGEgPSBsYWJlbC5ib3JkZXJDb2xvci5hO1xuXHRcdHRoaXMuY3R4LmxpbmVXaWR0aCA9IGxhYmVsLmJvcmRlcldpZHRoO1xuXHRcdHRoaXMuY3R4LnN0cm9rZVJvdW5kZWRSZWN0KC1sYWJlbC5zaXplLngvMiwgLWxhYmVsLnNpemUueS8yLFxuXHRcdFx0bGFiZWwuc2l6ZS54LCBsYWJlbC5zaXplLnksIGxhYmVsLmJvcmRlclJhZGl1cyk7XG5cblx0XHR0aGlzLmN0eC5maWxsU3R5bGUgPSBsYWJlbC5jYWxjdWxhdGVUZXh0Q29sb3IoKTtcblx0XHR0aGlzLmN0eC5nbG9iYWxBbHBoYSA9IGxhYmVsLnRleHRDb2xvci5hO1xuXHRcdHRoaXMuY3R4LmZpbGxUZXh0KGxhYmVsLnRleHQsIG9mZnNldC54IC0gbGFiZWwuc2l6ZS54LzIsIG9mZnNldC55IC0gbGFiZWwuc2l6ZS55LzIpO1xuXHRcblx0XHR0aGlzLmN0eC5nbG9iYWxBbHBoYSA9IHByZXZpb3VzQWxwaGE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyBhIGJ1dHRvblxuICAgICAqIEBwYXJhbSBidXR0b24gVGhlIGJ1dHRvbiB0byByZW5kZXJcbiAgICAgKi9cbiAgICByZW5kZXJCdXR0b24oYnV0dG9uOiBCdXR0b24pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZW5kZXJMYWJlbChidXR0b24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbmRlcnMgYSBzbGlkZXJcbiAgICAgKiBAcGFyYW0gc2xpZGVyIFRoZSBzbGlkZXIgdG8gcmVuZGVyXG4gICAgICovXG4gICAgcmVuZGVyU2xpZGVyKHNsaWRlcjogU2xpZGVyKTogdm9pZCB7XG5cdFx0Ly8gR3JhYiB0aGUgZ2xvYmFsIGFscGhhIHNvIHdlIGNhbiBhZGp1c3QgaXQgZm9yIHRoaXMgcmVuZGVyXG5cdFx0bGV0IHByZXZpb3VzQWxwaGEgPSB0aGlzLmN0eC5nbG9iYWxBbHBoYTtcblx0XHR0aGlzLmN0eC5nbG9iYWxBbHBoYSA9IHNsaWRlci5nZXRMYXllcigpLmdldEFscGhhKCk7XG5cbiAgICAgICAgLy8gQ2FsY3VhbGF0ZSB0aGUgc2xpZGVyIHNpemVcbiAgICAgICAgbGV0IHNsaWRlclNpemUgPSBuZXcgVmVjMihzbGlkZXIuc2l6ZS54LCAyKTtcblxuICAgICAgICAvLyBEcmF3IHRoZSBzbGlkZXJcblx0XHR0aGlzLmN0eC5maWxsU3R5bGUgPSBzbGlkZXIuc2xpZGVyQ29sb3IudG9TdHJpbmcoKTtcblx0XHR0aGlzLmN0eC5maWxsUm91bmRlZFJlY3QoLXNsaWRlclNpemUueC8yLCAtc2xpZGVyU2l6ZS55LzIsXG4gICAgICAgICAgICBzbGlkZXJTaXplLngsIHNsaWRlclNpemUueSwgc2xpZGVyLmJvcmRlclJhZGl1cyk7XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBuaWIgc2l6ZSBhbmQgcG9zaXRpb25cbiAgICAgICAgbGV0IHggPSBNYXRoVXRpbHMubGVycCgtc2xpZGVyLnNpemUueC8yLCBzbGlkZXIuc2l6ZS54LzIsIHNsaWRlci5nZXRWYWx1ZSgpKTtcblxuICAgICAgICAvLyBEcmF3IHRoZSBuaWJcblx0XHR0aGlzLmN0eC5maWxsU3R5bGUgPSBzbGlkZXIubmliQ29sb3IudG9TdHJpbmcoKTtcblx0XHR0aGlzLmN0eC5maWxsUm91bmRlZFJlY3QoeC1zbGlkZXIubmliU2l6ZS54LzIsIC1zbGlkZXIubmliU2l6ZS55LzIsXG4gICAgICAgICAgICBzbGlkZXIubmliU2l6ZS54LCBzbGlkZXIubmliU2l6ZS55LCBzbGlkZXIuYm9yZGVyUmFkaXVzKTtcblxuICAgICAgICAvLyBSZXNldCB0aGUgYWxwaGFcbiAgICAgICAgdGhpcy5jdHguZ2xvYmFsQWxwaGEgPSBwcmV2aW91c0FscGhhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbmRlcnMgYSB0ZXh0SW5wdXRcbiAgICAgKiBAcGFyYW0gdGV4dElucHV0IFRoZSB0ZXh0SW5wdXQgdG8gcmVuZGVyXG4gICAgICovXG4gICAgcmVuZGVyVGV4dElucHV0KHRleHRJbnB1dDogVGV4dElucHV0KTogdm9pZCB7XG4gICAgICAgIC8vIFNob3cgYSBjdXJzb3Igc29tZXRpbWVzXG4gICAgICAgIGlmKHRleHRJbnB1dC5mb2N1c2VkICYmIHRleHRJbnB1dC5jdXJzb3JDb3VudGVyICUgNjAgPiAzMCl7XG4gICAgICAgICAgICB0ZXh0SW5wdXQudGV4dCArPSBcInxcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVuZGVyTGFiZWwodGV4dElucHV0KTtcblxuICAgICAgICBpZih0ZXh0SW5wdXQuZm9jdXNlZCl7XG4gICAgICAgICAgICBpZih0ZXh0SW5wdXQuY3Vyc29yQ291bnRlciAlIDYwID4gMzApe1xuICAgICAgICAgICAgICAgIHRleHRJbnB1dC50ZXh0ID0gdGV4dElucHV0LnRleHQuc3Vic3RyaW5nKDAsIHRleHRJbnB1dC50ZXh0Lmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0ZXh0SW5wdXQuY3Vyc29yQ291bnRlciArPSAxO1xuICAgICAgICAgICAgaWYodGV4dElucHV0LmN1cnNvckNvdW50ZXIgPj0gNjApe1xuICAgICAgICAgICAgICAgIHRleHRJbnB1dC5jdXJzb3JDb3VudGVyID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxufSIsImltcG9ydCBNYXAgZnJvbSBcIi4uL0RhdGFUeXBlcy9Db2xsZWN0aW9ucy9NYXBcIjtcbmltcG9ydCBDYW52YXNOb2RlIGZyb20gXCIuLi9Ob2Rlcy9DYW52YXNOb2RlXCI7XG5pbXBvcnQgR3JhcGhpYyBmcm9tIFwiLi4vTm9kZXMvR3JhcGhpY1wiO1xuaW1wb3J0IEFuaW1hdGVkU3ByaXRlIGZyb20gXCIuLi9Ob2Rlcy9TcHJpdGVzL0FuaW1hdGVkU3ByaXRlXCI7XG5pbXBvcnQgU3ByaXRlIGZyb20gXCIuLi9Ob2Rlcy9TcHJpdGVzL1Nwcml0ZVwiO1xuaW1wb3J0IFRpbGVtYXAgZnJvbSBcIi4uL05vZGVzL1RpbGVtYXBcIjtcbmltcG9ydCBVSUVsZW1lbnQgZnJvbSBcIi4uL05vZGVzL1VJRWxlbWVudFwiO1xuaW1wb3J0IFJlc291cmNlTWFuYWdlciBmcm9tIFwiLi4vUmVzb3VyY2VNYW5hZ2VyL1Jlc291cmNlTWFuYWdlclwiO1xuaW1wb3J0IFVJTGF5ZXIgZnJvbSBcIi4uL1NjZW5lL0xheWVycy9VSUxheWVyXCI7XG5pbXBvcnQgU2NlbmUgZnJvbSBcIi4uL1NjZW5lL1NjZW5lXCI7XG5pbXBvcnQgQ29sb3IgZnJvbSBcIi4uL1V0aWxzL0NvbG9yXCI7XG5cbi8qKlxuICogQW4gYWJzdHJhY3QgZnJhbWV3b3JrIHRvIHB1dCBhbGwgcmVuZGVyaW5nIGluIG9uY2UgcGxhY2UgaW4gdGhlIGFwcGxpY2F0aW9uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFJlbmRlcmluZ01hbmFnZXIge1xuICAgIC8qKiBUaGUgUmVzb3VyY2VNYW5hZ2VyICovXG4gICAgcHJvdGVjdGVkIHJlc291cmNlTWFuYWdlcjogUmVzb3VyY2VNYW5hZ2VyO1xuXG4gICAgLyoqIFRoZSBzY2VuZSBjdXJyZW50bHkgYmVpbmcgcmVuZGVyZWQgKi9cbiAgICBwcm90ZWN0ZWQgc2NlbmU6IFNjZW5lO1xuXG4gICAgY29uc3RydWN0b3IoKXtcbiAgICAgICAgdGhpcy5yZXNvdXJjZU1hbmFnZXIgPSBSZXNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzY2VuZSBjdXJyZW50bHkgYmVpbmcgcmVuZGVyZWRcbiAgICAgKiBAcGFyYW0gc2NlbmUgVGhlIGN1cnJlbnQgU2NlbmVcbiAgICAgKi9cbiAgICBzZXRTY2VuZShzY2VuZTogU2NlbmUpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgdGhlIGNhbnZhcyBmb3IgdGhlIGdhbWVcbiAgICAgKiBAcGFyYW0gY2FudmFzIFRoZSBjYW52YXMgZWxlbWVudFxuICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgZGVzaXJlZCB3aWR0aCBvZiB0aGUgY2FudmFzXG4gICAgICogQHBhcmFtIGhlaWdodCBUaGUgZGVzaXJlZCBoZWlnaHQgb2YgdGhlIGNhbnZhc1xuICAgICAqIEByZXR1cm5zIFRoZSByZW5kZXJpbmcgY29udGV4dCBvZiB0aGUgY2FudmFzXG4gICAgICovXG4gICAgYWJzdHJhY3QgaW5pdGlhbGl6ZUNhbnZhcyhjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IGFueTtcblxuICAgIC8qKlxuICAgICAqIFJlbmRlcnMgdGhlIHZpc2libGUgc2V0IG9mIENhbnZhc05vZGVzIGFuZCB2aXNpYmxlIHBvcnRpb25zIG9mIHRpbGVtYXBzLCBhcyB3ZWxsIGFzIGFueSBVSUVsZW1lbnQgaW4gVUlMYXllcnNcbiAgICAgKiBAcGFyYW0gdmlzaWJsZVNldCBUaGUgdmlzaWJsZSBzZXQgb2YgQ2FudmFzTm9kZXNcbiAgICAgKiBAcGFyYW0gdGlsZW1hcHMgVGhlIHRpbGVtYXBzIHVzZWQgaW4gdGhlIGFwcGxpY2F0aW9uXG4gICAgICogQHBhcmFtIHVpTGF5ZXJzIFRoZSB1c2VyIGludGVyZmFjZSBsYXllcnNcbiAgICAgKi9cbiAgICBhYnN0cmFjdCByZW5kZXIodmlzaWJsZVNldDogQXJyYXk8Q2FudmFzTm9kZT4sIHRpbGVtYXBzOiBBcnJheTxUaWxlbWFwPiwgdWlMYXllcnM6IE1hcDxVSUxheWVyPik6IHZvaWQ7XG5cbiAgICAvKiogQ2xlYXJzIHRoZSBjYW52YXMgKi9cbiAgICBhYnN0cmFjdCBjbGVhcihjb2xvcjogQ29sb3IpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyBhIHNwcml0ZVxuICAgICAqIEBwYXJhbSBzcHJpdGUgVGhlIHNwcml0ZSB0byByZW5kZXJcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgcmVuZGVyU3ByaXRlKHNwcml0ZTogU3ByaXRlKTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIFJlbmRlcnMgYW4gYW5pbWF0ZWQgc3ByaXRlXG4gICAgICogQHBhcmFtIHNwcml0ZSBUaGUgYW5pbWF0ZWQgc3ByaXRlIHRvIHJlbmRlclxuICAgICAqL1xuICAgIHByb3RlY3RlZCBhYnN0cmFjdCByZW5kZXJBbmltYXRlZFNwcml0ZShzcHJpdGU6IEFuaW1hdGVkU3ByaXRlKTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIFJlbmRlcnMgYSBncmFwaGljXG4gICAgICogQHBhcmFtIGdyYXBoaWMgVGhlIGdyYXBoaWMgdG8gcmVuZGVyXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IHJlbmRlckdyYXBoaWMoZ3JhcGhpYzogR3JhcGhpYyk6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXJzIGEgdGlsZW1hcFxuICAgICAqIEBwYXJhbSB0aWxlbWFwIFRoZSB0aWxlbWFwIHRvIHJlbmRlclxuICAgICAqL1xuICAgIHByb3RlY3RlZCBhYnN0cmFjdCByZW5kZXJUaWxlbWFwKHRpbGVtYXA6IFRpbGVtYXApOiB2b2lkO1xuXG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXJzIGEgVUlFbGVtZW50XG4gICAgICogQHBhcmFtIHVpRWxlbWVudCBUaGUgVUlFbGVtZW50IHRvIHJlbmRlclxuICAgICAqL1xuICAgIHByb3RlY3RlZCBhYnN0cmFjdCByZW5kZXJVSUVsZW1lbnQodWlFbGVtZW50OiBVSUVsZW1lbnQpOiB2b2lkO1xufSIsImltcG9ydCBHcmFwaCBmcm9tIFwiLi4vRGF0YVR5cGVzL0dyYXBocy9HcmFwaFwiO1xuaW1wb3J0IE1hcCBmcm9tIFwiLi4vRGF0YVR5cGVzL0NvbGxlY3Rpb25zL01hcFwiO1xuaW1wb3J0IFZlYzIgZnJvbSBcIi4uL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgRGVidWcgZnJvbSBcIi4uL0RlYnVnL0RlYnVnXCI7XG5pbXBvcnQgQ2FudmFzTm9kZSBmcm9tIFwiLi4vTm9kZXMvQ2FudmFzTm9kZVwiO1xuaW1wb3J0IEdyYXBoaWMgZnJvbSBcIi4uL05vZGVzL0dyYXBoaWNcIjtcbmltcG9ydCB7IEdyYXBoaWNUeXBlIH0gZnJvbSBcIi4uL05vZGVzL0dyYXBoaWNzL0dyYXBoaWNUeXBlc1wiO1xuaW1wb3J0IFBvaW50IGZyb20gXCIuLi9Ob2Rlcy9HcmFwaGljcy9Qb2ludFwiO1xuaW1wb3J0IFJlY3QgZnJvbSBcIi4uL05vZGVzL0dyYXBoaWNzL1JlY3RcIjtcbmltcG9ydCBBbmltYXRlZFNwcml0ZSBmcm9tIFwiLi4vTm9kZXMvU3ByaXRlcy9BbmltYXRlZFNwcml0ZVwiO1xuaW1wb3J0IFNwcml0ZSBmcm9tIFwiLi4vTm9kZXMvU3ByaXRlcy9TcHJpdGVcIjtcbmltcG9ydCBUaWxlbWFwIGZyb20gXCIuLi9Ob2Rlcy9UaWxlbWFwXCI7XG5pbXBvcnQgVUlFbGVtZW50IGZyb20gXCIuLi9Ob2Rlcy9VSUVsZW1lbnRcIjtcbmltcG9ydCBMYWJlbCBmcm9tIFwiLi4vTm9kZXMvVUlFbGVtZW50cy9MYWJlbFwiO1xuaW1wb3J0IFNoYWRlclJlZ2lzdHJ5IGZyb20gXCIuLi9SZWdpc3RyeS9SZWdpc3RyaWVzL1NoYWRlclJlZ2lzdHJ5XCI7XG5pbXBvcnQgUmVnaXN0cnlNYW5hZ2VyIGZyb20gXCIuLi9SZWdpc3RyeS9SZWdpc3RyeU1hbmFnZXJcIjtcbmltcG9ydCBSZXNvdXJjZU1hbmFnZXIgZnJvbSBcIi4uL1Jlc291cmNlTWFuYWdlci9SZXNvdXJjZU1hbmFnZXJcIjtcbmltcG9ydCBQYXJhbGxheExheWVyIGZyb20gXCIuLi9TY2VuZS9MYXllcnMvUGFyYWxsYXhMYXllclwiO1xuaW1wb3J0IFVJTGF5ZXIgZnJvbSBcIi4uL1NjZW5lL0xheWVycy9VSUxheWVyXCI7XG5pbXBvcnQgQ29sb3IgZnJvbSBcIi4uL1V0aWxzL0NvbG9yXCI7XG5pbXBvcnQgUmVuZGVyaW5nVXRpbHMgZnJvbSBcIi4uL1V0aWxzL1JlbmRlcmluZ1V0aWxzXCI7XG5pbXBvcnQgUmVuZGVyaW5nTWFuYWdlciBmcm9tIFwiLi9SZW5kZXJpbmdNYW5hZ2VyXCI7XG5pbXBvcnQgU2hhZGVyVHlwZSBmcm9tIFwiLi9XZWJHTFJlbmRlcmluZy9TaGFkZXJUeXBlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYkdMUmVuZGVyZXIgZXh0ZW5kcyBSZW5kZXJpbmdNYW5hZ2VyIHtcblxuXHRwcm90ZWN0ZWQgb3JpZ2luOiBWZWMyO1xuXHRwcm90ZWN0ZWQgem9vbTogbnVtYmVyO1xuXHRwcm90ZWN0ZWQgd29ybGRTaXplOiBWZWMyO1xuXG5cdHByb3RlY3RlZCBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0O1xuXHRwcm90ZWN0ZWQgdGV4dEN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuXG5cdGluaXRpYWxpemVDYW52YXMoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQge1xuXHRcdGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG5cdFx0dGhpcy53b3JsZFNpemUgPSBWZWMyLlpFUk87XG5cdFx0dGhpcy53b3JsZFNpemUueCA9IHdpZHRoO1xuXHRcdHRoaXMud29ybGRTaXplLnkgPSBoZWlnaHQ7XG5cblx0XHQvLyBHZXQgdGhlIFdlYkdMIGNvbnRleHRcbiAgICAgICAgdGhpcy5nbCA9IGNhbnZhcy5nZXRDb250ZXh0KFwid2ViZ2xcIik7XG5cblx0XHR0aGlzLmdsLnZpZXdwb3J0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cblx0XHR0aGlzLmdsLmRpc2FibGUodGhpcy5nbC5ERVBUSF9URVNUKTtcbiAgICAgICAgdGhpcy5nbC5lbmFibGUodGhpcy5nbC5CTEVORCk7XG4gICAgICAgIHRoaXMuZ2wuYmxlbmRGdW5jKHRoaXMuZ2wuU1JDX0FMUEhBLCB0aGlzLmdsLk9ORV9NSU5VU19TUkNfQUxQSEEpO1xuICAgICAgICB0aGlzLmdsLmVuYWJsZSh0aGlzLmdsLkNVTExfRkFDRSk7XG5cblx0XHQvLyBUZWxsIHRoZSByZXNvdXJjZSBtYW5hZ2VyIHdlJ3JlIHVzaW5nIFdlYkdMXG5cdFx0UmVzb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkudXNlV2ViR0wodHJ1ZSwgdGhpcy5nbCk7XG5cblx0XHQvLyBTaG93IHRoZSB0ZXh0IGNhbnZhcyBhbmQgZ2V0IGl0cyBjb250ZXh0XG5cdFx0bGV0IHRleHRDYW52YXMgPSA8SFRNTENhbnZhc0VsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0ZXh0LWNhbnZhc1wiKTtcblx0XHR0ZXh0Q2FudmFzLmhpZGRlbiA9IGZhbHNlO1xuXHRcdHRoaXMudGV4dEN0eCA9IHRleHRDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG5cdFx0Ly8gU2l6ZSB0aGUgdGV4dCBjYW52YXMgdG8gYmUgdGhlIHNhbWUgYXMgdGhlIGdhbWUgY2FudmFzXG5cdFx0dGV4dENhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG5cdFx0dGV4dENhbnZhcy53aWR0aCA9IHdpZHRoO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmdsO1xuXHR9XG5cblx0cmVuZGVyKHZpc2libGVTZXQ6IENhbnZhc05vZGVbXSwgdGlsZW1hcHM6IFRpbGVtYXBbXSwgdWlMYXllcnM6IE1hcDxVSUxheWVyPik6IHZvaWQge1xuXHRcdGZvcihsZXQgbm9kZSBvZiB2aXNpYmxlU2V0KXtcblx0XHRcdHRoaXMucmVuZGVyTm9kZShub2RlKTtcblx0XHR9XG5cblx0XHR1aUxheWVycy5mb3JFYWNoKGtleSA9PiB7XG5cdFx0XHRpZighdWlMYXllcnMuZ2V0KGtleSkuaXNIaWRkZW4oKSlcblx0XHRcdFx0dWlMYXllcnMuZ2V0KGtleSkuZ2V0SXRlbXMoKS5mb3JFYWNoKG5vZGUgPT4gdGhpcy5yZW5kZXJOb2RlKDxDYW52YXNOb2RlPm5vZGUpKVxuXHRcdH0pO1xuXHR9XG5cblx0Y2xlYXIoY29sb3I6IENvbG9yKTogdm9pZCB7XG5cdFx0dGhpcy5nbC5jbGVhckNvbG9yKGNvbG9yLnIsIGNvbG9yLmcsIGNvbG9yLmIsIGNvbG9yLmEpO1xuXHRcdHRoaXMuZ2wuY2xlYXIodGhpcy5nbC5DT0xPUl9CVUZGRVJfQklUIHwgdGhpcy5nbC5ERVBUSF9CVUZGRVJfQklUKTtcblxuXHRcdHRoaXMudGV4dEN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy53b3JsZFNpemUueCwgdGhpcy53b3JsZFNpemUueSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgcmVuZGVyTm9kZShub2RlOiBDYW52YXNOb2RlKTogdm9pZCB7XG5cdFx0Ly8gQ2FsY3VsYXRlIHRoZSBvcmlnaW4gb2YgdGhlIHZpZXdwb3J0IGFjY29yZGluZyB0byB0aGlzIHNwcml0ZVxuICAgICAgICB0aGlzLm9yaWdpbiA9IHRoaXMuc2NlbmUuZ2V0Vmlld1RyYW5zbGF0aW9uKG5vZGUpO1xuXG4gICAgICAgIC8vIEdldCB0aGUgem9vbSBsZXZlbCBvZiB0aGUgc2NlbmVcbiAgICAgICAgdGhpcy56b29tID0gdGhpcy5zY2VuZS5nZXRWaWV3U2NhbGUoKTtcblx0XHRcblx0XHRpZihub2RlLmhhc0N1c3RvbVNoYWRlcil7XG5cdFx0XHQvLyBJZiB0aGUgbm9kZSBoYXMgYSBjdXN0b20gc2hhZGVyLCByZW5kZXIgdXNpbmcgdGhhdFxuXHRcdFx0dGhpcy5yZW5kZXJDdXN0b20obm9kZSk7XG5cdFx0fSBlbHNlIGlmKG5vZGUgaW5zdGFuY2VvZiBHcmFwaGljKXtcblx0XHRcdHRoaXMucmVuZGVyR3JhcGhpYyhub2RlKTtcblx0XHR9IGVsc2UgaWYobm9kZSBpbnN0YW5jZW9mIFNwcml0ZSl7XG5cdFx0XHRpZihub2RlIGluc3RhbmNlb2YgQW5pbWF0ZWRTcHJpdGUpe1xuXHRcdFx0XHR0aGlzLnJlbmRlckFuaW1hdGVkU3ByaXRlKG5vZGUpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5yZW5kZXJTcHJpdGUobm9kZSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmKG5vZGUgaW5zdGFuY2VvZiBVSUVsZW1lbnQpe1xuXHRcdFx0dGhpcy5yZW5kZXJVSUVsZW1lbnQobm9kZSk7XG5cdFx0fVxuXHR9XG5cblx0cHJvdGVjdGVkIHJlbmRlclNwcml0ZShzcHJpdGU6IFNwcml0ZSk6IHZvaWQge1xuXHRcdGxldCBzaGFkZXIgPSBSZWdpc3RyeU1hbmFnZXIuc2hhZGVycy5nZXQoU2hhZGVyUmVnaXN0cnkuU1BSSVRFX1NIQURFUik7XG5cdFx0bGV0IG9wdGlvbnMgPSB0aGlzLmFkZE9wdGlvbnMoc2hhZGVyLmdldE9wdGlvbnMoc3ByaXRlKSwgc3ByaXRlKTtcblx0XHRzaGFkZXIucmVuZGVyKHRoaXMuZ2wsIG9wdGlvbnMpO1xuXHR9XG5cblx0cHJvdGVjdGVkIHJlbmRlckFuaW1hdGVkU3ByaXRlKHNwcml0ZTogQW5pbWF0ZWRTcHJpdGUpOiB2b2lkIHtcblx0XHRsZXQgc2hhZGVyID0gUmVnaXN0cnlNYW5hZ2VyLnNoYWRlcnMuZ2V0KFNoYWRlclJlZ2lzdHJ5LlNQUklURV9TSEFERVIpO1xuXHRcdGxldCBvcHRpb25zID0gdGhpcy5hZGRPcHRpb25zKHNoYWRlci5nZXRPcHRpb25zKHNwcml0ZSksIHNwcml0ZSk7XG5cdFx0c2hhZGVyLnJlbmRlcih0aGlzLmdsLCBvcHRpb25zKTtcblx0fVxuXG5cdHByb3RlY3RlZCByZW5kZXJHcmFwaGljKGdyYXBoaWM6IEdyYXBoaWMpOiB2b2lkIHtcblxuXHRcdGlmKGdyYXBoaWMgaW5zdGFuY2VvZiBQb2ludCl7XG5cdFx0XHRsZXQgc2hhZGVyID0gUmVnaXN0cnlNYW5hZ2VyLnNoYWRlcnMuZ2V0KFNoYWRlclJlZ2lzdHJ5LlBPSU5UX1NIQURFUik7XG5cdFx0XHRsZXQgb3B0aW9ucyA9IHRoaXMuYWRkT3B0aW9ucyhzaGFkZXIuZ2V0T3B0aW9ucyhncmFwaGljKSwgZ3JhcGhpYyk7XG5cdFx0XHRzaGFkZXIucmVuZGVyKHRoaXMuZ2wsIG9wdGlvbnMpO1xuXHRcdH0gZWxzZSBpZihncmFwaGljIGluc3RhbmNlb2YgUmVjdCkge1xuXHRcdFx0bGV0IHNoYWRlciA9IFJlZ2lzdHJ5TWFuYWdlci5zaGFkZXJzLmdldChTaGFkZXJSZWdpc3RyeS5SRUNUX1NIQURFUik7XG5cdFx0XHRsZXQgb3B0aW9ucyA9IHRoaXMuYWRkT3B0aW9ucyhzaGFkZXIuZ2V0T3B0aW9ucyhncmFwaGljKSwgZ3JhcGhpYyk7XG5cdFx0XHRzaGFkZXIucmVuZGVyKHRoaXMuZ2wsIG9wdGlvbnMpO1xuXHRcdH0gXG5cdH1cblxuXHRwcm90ZWN0ZWQgcmVuZGVyVGlsZW1hcCh0aWxlbWFwOiBUaWxlbWFwKTogdm9pZCB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XG5cdH1cblxuXHRwcm90ZWN0ZWQgcmVuZGVyVUlFbGVtZW50KHVpRWxlbWVudDogVUlFbGVtZW50KTogdm9pZCB7XG5cdFx0aWYodWlFbGVtZW50IGluc3RhbmNlb2YgTGFiZWwpe1xuXHRcdFx0bGV0IHNoYWRlciA9IFJlZ2lzdHJ5TWFuYWdlci5zaGFkZXJzLmdldChTaGFkZXJSZWdpc3RyeS5MQUJFTF9TSEFERVIpO1xuXHRcdFx0bGV0IG9wdGlvbnMgPSB0aGlzLmFkZE9wdGlvbnMoc2hhZGVyLmdldE9wdGlvbnModWlFbGVtZW50KSwgdWlFbGVtZW50KTtcblx0XHRcdHNoYWRlci5yZW5kZXIodGhpcy5nbCwgb3B0aW9ucyk7XG5cblx0XHRcdHRoaXMudGV4dEN0eC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgKHVpRWxlbWVudC5wb3NpdGlvbi54IC0gdGhpcy5vcmlnaW4ueCkqdGhpcy56b29tLCAodWlFbGVtZW50LnBvc2l0aW9uLnkgLSB0aGlzLm9yaWdpbi55KSp0aGlzLnpvb20pO1xuXHRcdFx0dGhpcy50ZXh0Q3R4LnJvdGF0ZSgtdWlFbGVtZW50LnJvdGF0aW9uKTtcblx0XHRcdGxldCBnbG9iYWxBbHBoYSA9IHRoaXMudGV4dEN0eC5nbG9iYWxBbHBoYTtcblx0XHRcdHRoaXMudGV4dEN0eC5nbG9iYWxBbHBoYSA9IHVpRWxlbWVudC5hbHBoYTtcblxuXHRcdFx0Ly8gUmVuZGVyIHRleHRcblx0XHRcdHRoaXMudGV4dEN0eC5mb250ID0gdWlFbGVtZW50LmdldEZvbnRTdHJpbmcoKTtcblx0XHRcdGxldCBvZmZzZXQgPSB1aUVsZW1lbnQuY2FsY3VsYXRlVGV4dE9mZnNldCh0aGlzLnRleHRDdHgpO1xuXHRcdFx0dGhpcy50ZXh0Q3R4LmZpbGxTdHlsZSA9IHVpRWxlbWVudC5jYWxjdWxhdGVUZXh0Q29sb3IoKTtcblx0XHRcdHRoaXMudGV4dEN0eC5nbG9iYWxBbHBoYSA9IHVpRWxlbWVudC50ZXh0Q29sb3IuYTtcblx0XHRcdHRoaXMudGV4dEN0eC5maWxsVGV4dCh1aUVsZW1lbnQudGV4dCwgb2Zmc2V0LnggLSB1aUVsZW1lbnQuc2l6ZS54LzIsIG9mZnNldC55IC0gdWlFbGVtZW50LnNpemUueS8yKTtcblxuXHRcdFx0dGhpcy50ZXh0Q3R4Lmdsb2JhbEFscGhhID0gZ2xvYmFsQWxwaGE7XG4gICAgICAgIFx0dGhpcy50ZXh0Q3R4LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTtcblx0XHR9XG5cdH1cblxuXHRwcm90ZWN0ZWQgcmVuZGVyQ3VzdG9tKG5vZGU6IENhbnZhc05vZGUpOiB2b2lkIHtcblx0XHRsZXQgc2hhZGVyID0gUmVnaXN0cnlNYW5hZ2VyLnNoYWRlcnMuZ2V0KG5vZGUuY3VzdG9tU2hhZGVyS2V5KTtcblx0XHRsZXQgb3B0aW9ucyA9IHRoaXMuYWRkT3B0aW9ucyhzaGFkZXIuZ2V0T3B0aW9ucyhub2RlKSwgbm9kZSk7XG5cdFx0c2hhZGVyLnJlbmRlcih0aGlzLmdsLCBvcHRpb25zKTtcblx0fVxuXG5cdHByb3RlY3RlZCBhZGRPcHRpb25zKG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIGFueT4sIG5vZGU6IENhbnZhc05vZGUpOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcblx0XHQvLyBHaXZlIHRoZSBzaGFkZXIgYWNjZXNzIHRvIHRoZSB3b3JsZCBzaXplXG5cdFx0b3B0aW9ucy53b3JsZFNpemUgPSB0aGlzLndvcmxkU2l6ZTtcblxuXHRcdC8vIEFkanVzdCB0aGUgb3JpZ2luIHBvc2l0aW9uIHRvIHRoZSBwYXJhbGxheFxuXHRcdGxldCBsYXllciA9IG5vZGUuZ2V0TGF5ZXIoKTtcblx0XHRsZXQgcGFyYWxsYXggPSBuZXcgVmVjMigxLCAxKTtcblx0XHRpZihsYXllciBpbnN0YW5jZW9mIFBhcmFsbGF4TGF5ZXIpe1xuXHRcdFx0cGFyYWxsYXggPSAoPFBhcmFsbGF4TGF5ZXI+bGF5ZXIpLnBhcmFsbGF4O1xuXHRcdH1cblxuXHRcdG9wdGlvbnMub3JpZ2luID0gdGhpcy5vcmlnaW4uY2xvbmUoKS5tdWx0KHBhcmFsbGF4KTtcblxuXHRcdHJldHVybiBvcHRpb25zO1xuXHR9XG5cbn0iLCJpbXBvcnQgTWFwIGZyb20gXCIuLi8uLi9EYXRhVHlwZXMvQ29sbGVjdGlvbnMvTWFwXCI7XG5pbXBvcnQgQ2FudmFzTm9kZSBmcm9tIFwiLi4vLi4vTm9kZXMvQ2FudmFzTm9kZVwiO1xuaW1wb3J0IFJlc291cmNlTWFuYWdlciBmcm9tIFwiLi4vLi4vUmVzb3VyY2VNYW5hZ2VyL1Jlc291cmNlTWFuYWdlclwiO1xuXG4vKipcbiAqIEEgd3JhcHBlciBjbGFzcyBmb3IgV2ViR0wgc2hhZGVycy5cbiAqIFRoaXMgY2xhc3MgaXMgYSBzaW5nbGV0b24sIGFuZCB0aGVyZSBpcyBvbmx5IG9uZSBmb3IgZWFjaCBzaGFkZXIgdHlwZS5cbiAqIEFsbCBvYmplY3RzIHRoYXQgdXNlIHRoaXMgc2hhZGVyIHR5cGUgd2lsbCByZWZlciB0byBhbmQgbW9kaWZ5IHRoaXMgc2FtZSB0eXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBTaGFkZXJUeXBlIHtcblx0LyoqIFRoZSBuYW1lIG9mIHRoaXMgc2hhZGVyICovXG5cdHByb3RlY3RlZCBuYW1lOiBzdHJpbmc7XG5cblx0LyoqIFRoZSBrZXkgdG8gdGhlIFdlYkdMUHJvZ3JhbSBpbiB0aGUgUmVzb3VyY2VNYW5hZ2VyICovXG5cdHByb3RlY3RlZCBwcm9ncmFtS2V5OiBzdHJpbmc7XG5cblx0LyoqIEEgcmVmZXJlbmNlIHRvIHRoZSByZXNvdXJjZSBtYW5hZ2VyICovXG5cdHByb3RlY3RlZCByZXNvdXJjZU1hbmFnZXI6IFJlc291cmNlTWFuYWdlcjtcblxuXHRjb25zdHJ1Y3Rvcihwcm9ncmFtS2V5OiBzdHJpbmcpe1xuXHRcdHRoaXMucHJvZ3JhbUtleSA9IHByb2dyYW1LZXk7XG5cdFx0dGhpcy5yZXNvdXJjZU1hbmFnZXIgPSBSZXNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBJbml0aWFsaXplcyBhbnkgYnVmZmVyIG9iamVjdHMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgc2hhZGVyIHR5cGUuXG5cdCAqIEBwYXJhbSBnbCBUaGUgV2ViR0wgcmVuZGVyaW5nIGNvbnRleHRcblx0ICovXG5cdGFic3RyYWN0IGluaXRCdWZmZXJPYmplY3QoKTogdm9pZDtcblxuXHQvKipcblx0ICogTG9hZHMgYW55IHVuaWZvcm1zXG5cdCAqIEBwYXJhbSBnbCBUaGUgV2ViR0wgcmVuZGVyaW5nIGNvbnRleHRcblx0ICogQHBhcmFtIG9wdGlvbnMgSW5mb3JtYXRpb24gYWJvdXQgdGhlIG9iamVjdCB3ZSdyZSBjdXJyZW50bHkgcmVuZGVyaW5nXG5cdCAqL1xuXHRhYnN0cmFjdCByZW5kZXIoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgb3B0aW9uczogUmVjb3JkPHN0cmluZywgYW55Pik6IHZvaWQ7XG5cblx0LyoqXG5cdCAqIEV4dHJhY3RzIHRoZSBvcHRpb25zIGZyb20gdGhlIENhbnZhc05vZGUgYW5kIGdpdmVzIHRoZW0gdG8gdGhlIHJlbmRlciBmdW5jdGlvblxuXHQgKiBAcGFyYW0gbm9kZSBUaGUgbm9kZSB0byBnZXQgb3B0aW9ucyBmcm9tXG5cdCAqIEByZXR1cm5zIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBvcHRpb25zIHRoYXQgc2hvdWxkIGJlIHBhc3NlZCB0byB0aGUgcmVuZGVyIGZ1bmN0aW9uXG5cdCAqL1xuXHRnZXRPcHRpb25zKG5vZGU6IENhbnZhc05vZGUpOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtyZXR1cm4ge307fVxufSIsImltcG9ydCBNYXQ0eDQgZnJvbSBcIi4uLy4uLy4uL0RhdGFUeXBlcy9NYXQ0eDRcIjtcbmltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi8uLi9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IERlYnVnIGZyb20gXCIuLi8uLi8uLi9EZWJ1Zy9EZWJ1Z1wiO1xuaW1wb3J0IFJlY3QgZnJvbSBcIi4uLy4uLy4uL05vZGVzL0dyYXBoaWNzL1JlY3RcIjtcbmltcG9ydCBMYWJlbCBmcm9tIFwiLi4vLi4vLi4vTm9kZXMvVUlFbGVtZW50cy9MYWJlbFwiO1xuaW1wb3J0IFJlc291cmNlTWFuYWdlciBmcm9tIFwiLi4vLi4vLi4vUmVzb3VyY2VNYW5hZ2VyL1Jlc291cmNlTWFuYWdlclwiO1xuaW1wb3J0IFF1YWRTaGFkZXJUeXBlIGZyb20gXCIuL1F1YWRTaGFkZXJUeXBlXCI7XG5cbi8qKiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGFiZWxTaGFkZXJUeXBlIGV4dGVuZHMgUXVhZFNoYWRlclR5cGUge1xuXG5cdGNvbnN0cnVjdG9yKHByb2dyYW1LZXk6IHN0cmluZyl7XG5cdFx0c3VwZXIocHJvZ3JhbUtleSk7XG5cdFx0dGhpcy5yZXNvdXJjZU1hbmFnZXIgPSBSZXNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcblx0fVxuXG5cdGluaXRCdWZmZXJPYmplY3QoKTogdm9pZCB7XG5cdFx0dGhpcy5idWZmZXJPYmplY3RLZXkgPSBcImxhYmVsXCI7XG5cdFx0dGhpcy5yZXNvdXJjZU1hbmFnZXIuY3JlYXRlQnVmZmVyKHRoaXMuYnVmZmVyT2JqZWN0S2V5KTtcblx0fVxuXG5cdHJlbmRlcihnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBvcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogdm9pZCB7XG5cdFx0Y29uc3QgYmFja2dyb3VuZENvbG9yID0gb3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3IudG9XZWJHTCgpO1xuXHRcdGNvbnN0IGJvcmRlckNvbG9yID0gb3B0aW9ucy5ib3JkZXJDb2xvci50b1dlYkdMKCk7XG5cblx0XHRjb25zdCBwcm9ncmFtID0gdGhpcy5yZXNvdXJjZU1hbmFnZXIuZ2V0U2hhZGVyUHJvZ3JhbSh0aGlzLnByb2dyYW1LZXkpO1xuXHRcdGNvbnN0IGJ1ZmZlciA9IHRoaXMucmVzb3VyY2VNYW5hZ2VyLmdldEJ1ZmZlcih0aGlzLmJ1ZmZlck9iamVjdEtleSk7XG5cblx0XHRnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuXG5cdFx0Y29uc3QgdmVydGV4RGF0YSA9IHRoaXMuZ2V0VmVydGljZXMob3B0aW9ucy5zaXplLngsIG9wdGlvbnMuc2l6ZS55KTtcblxuXHRcdGNvbnN0IEZTSVpFID0gdmVydGV4RGF0YS5CWVRFU19QRVJfRUxFTUVOVDtcblxuXHRcdC8vIEJpbmQgdGhlIGJ1ZmZlclxuXHRcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXIpO1xuXHRcdGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB2ZXJ0ZXhEYXRhLCBnbC5TVEFUSUNfRFJBVyk7XG5cblx0XHQvLyBBdHRyaWJ1dGVzXG5cdFx0Y29uc3QgYV9Qb3NpdGlvbiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIFwiYV9Qb3NpdGlvblwiKTtcblx0XHRnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGFfUG9zaXRpb24sIDIsIGdsLkZMT0FULCBmYWxzZSwgMiAqIEZTSVpFLCAwICogRlNJWkUpO1xuXHRcdGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGFfUG9zaXRpb24pO1xuXG5cdFx0Ly8gVW5pZm9ybXNcblx0XHRjb25zdCB1X0JhY2tncm91bmRDb2xvciA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcInVfQmFja2dyb3VuZENvbG9yXCIpO1xuXHRcdGdsLnVuaWZvcm00ZnYodV9CYWNrZ3JvdW5kQ29sb3IsIGJhY2tncm91bmRDb2xvcik7XG5cbiAgICAgICAgY29uc3QgdV9Cb3JkZXJDb2xvciA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcInVfQm9yZGVyQ29sb3JcIik7XG5cdFx0Z2wudW5pZm9ybTRmdih1X0JvcmRlckNvbG9yLCBib3JkZXJDb2xvcik7XG5cbiAgICAgICAgY29uc3QgdV9NYXhTaXplID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIFwidV9NYXhTaXplXCIpO1xuICAgICAgICBnbC51bmlmb3JtMmYodV9NYXhTaXplLCAtdmVydGV4RGF0YVswXSwgdmVydGV4RGF0YVsxXSk7XG5cblx0XHQvLyBHZXQgdHJhbnNmb3JtYXRpb24gbWF0cml4XG5cdFx0Ly8gV2Ugd2FudCBhIHNxdWFyZSBmb3Igb3VyIHJlbmRlcmluZyBzcGFjZSwgc28gZ2V0IHRoZSBtYXhpbXVtIGRpbWVuc2lvbiBvZiBvdXIgcXVhZFxuXHRcdGxldCBtYXhEaW1lbnNpb24gPSBNYXRoLm1heChvcHRpb25zLnNpemUueCwgb3B0aW9ucy5zaXplLnkpO1xuXG4gICAgICAgIGNvbnN0IHVfQm9yZGVyV2lkdGggPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJ1X0JvcmRlcldpZHRoXCIpO1xuXHRcdGdsLnVuaWZvcm0xZih1X0JvcmRlcldpZHRoLCBvcHRpb25zLmJvcmRlcldpZHRoL21heERpbWVuc2lvbik7XG5cbiAgICAgICAgY29uc3QgdV9Cb3JkZXJSYWRpdXMgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJ1X0JvcmRlclJhZGl1c1wiKTtcblx0XHRnbC51bmlmb3JtMWYodV9Cb3JkZXJSYWRpdXMsIG9wdGlvbnMuYm9yZGVyUmFkaXVzL21heERpbWVuc2lvbik7XG5cblx0XHQvLyBUaGUgc2l6ZSBvZiB0aGUgcmVuZGVyaW5nIHNwYWNlIHdpbGwgYmUgYSBzcXVhcmUgd2l0aCB0aGlzIG1heGltdW0gZGltZW5zaW9uXG5cdFx0bGV0IHNpemUgPSBuZXcgVmVjMihtYXhEaW1lbnNpb24sIG1heERpbWVuc2lvbikuc2NhbGUoMi9vcHRpb25zLndvcmxkU2l6ZS54LCAyL29wdGlvbnMud29ybGRTaXplLnkpO1xuXG5cdFx0Ly8gQ2VudGVyIG91ciB0cmFuc2xhdGlvbnMgYXJvdW5kICgwLCAwKVxuXHRcdGNvbnN0IHRyYW5zbGF0ZVggPSAob3B0aW9ucy5wb3NpdGlvbi54IC0gb3B0aW9ucy5vcmlnaW4ueCAtIG9wdGlvbnMud29ybGRTaXplLngvMikvbWF4RGltZW5zaW9uO1xuXHRcdGNvbnN0IHRyYW5zbGF0ZVkgPSAtKG9wdGlvbnMucG9zaXRpb24ueSAtIG9wdGlvbnMub3JpZ2luLnkgLSBvcHRpb25zLndvcmxkU2l6ZS55LzIpL21heERpbWVuc2lvbjtcblxuXHRcdC8vIENyZWF0ZSBvdXIgdHJhbnNmb3JtYXRpb24gbWF0cml4XG5cdFx0dGhpcy50cmFuc2xhdGlvbi50cmFuc2xhdGUobmV3IEZsb2F0MzJBcnJheShbdHJhbnNsYXRlWCwgdHJhbnNsYXRlWV0pKTtcblx0XHR0aGlzLnNjYWxlLnNjYWxlKHNpemUpO1xuXHRcdHRoaXMucm90YXRpb24ucm90YXRlKG9wdGlvbnMucm90YXRpb24pO1xuXHRcdGxldCB0cmFuc2Zvcm1hdGlvbiA9IE1hdDR4NC5NVUxUKHRoaXMudHJhbnNsYXRpb24sIHRoaXMuc2NhbGUsIHRoaXMucm90YXRpb24pO1xuXG5cdFx0Ly8gUGFzcyB0aGUgdHJhbnNsYXRpb24gbWF0cml4IHRvIG91ciBzaGFkZXJcblx0XHRjb25zdCB1X1RyYW5zZm9ybSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcInVfVHJhbnNmb3JtXCIpO1xuXHRcdGdsLnVuaWZvcm1NYXRyaXg0ZnYodV9UcmFuc2Zvcm0sIGZhbHNlLCB0cmFuc2Zvcm1hdGlvbi50b0FycmF5KCkpO1xuXG5cdFx0Ly8gRHJhdyB0aGUgcXVhZFxuXHRcdGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVfU1RSSVAsIDAsIDQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSByZW5kZXJpbmcgc3BhY2UgYWx3YXlzIGhhcyB0byBiZSBhIHNxdWFyZSwgc28gbWFrZSBzdXJlIGl0cyBzcXVhcmUgdy5yLnQgdG8gdGhlIGxhcmdlc3QgZGltZW5zaW9uXG5cdCAqIEBwYXJhbSB3IFRoZSB3aWR0aCBvZiB0aGUgcXVhZCBpbiBwaXhlbHNcblx0ICogQHBhcmFtIGggVGhlIGhlaWdodCBvZiB0aGUgcXVhZCBpbiBwaXhlbHNcblx0ICogQHJldHVybnMgQW4gYXJyYXkgb2YgdGhlIHZlcnRpY2VzIG9mIHRoZSBxdWFkXG5cdCAqL1xuXHRnZXRWZXJ0aWNlcyh3OiBudW1iZXIsIGg6IG51bWJlcik6IEZsb2F0MzJBcnJheSB7XG5cdFx0bGV0IHgsIHk7XG5cblx0XHRpZihoID4gdyl7XG5cdFx0XHR5ID0gMC41O1xuXHRcdFx0eCA9IHcvKDIqaCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHggPSAwLjU7XG5cdFx0XHR5ID0gaC8oMip3KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbmV3IEZsb2F0MzJBcnJheShbXG5cdFx0XHQteCwgIHksXG5cdFx0XHQteCwgLXksXG5cdFx0XHQgeCwgIHksXG5cdFx0XHQgeCwgLXlcblx0XHRdKTtcblx0fVxuXG5cdGdldE9wdGlvbnMocmVjdDogTGFiZWwpOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcblx0XHRsZXQgb3B0aW9uczogUmVjb3JkPHN0cmluZywgYW55PiA9IHtcblx0XHRcdHBvc2l0aW9uOiByZWN0LnBvc2l0aW9uLFxuXHRcdFx0YmFja2dyb3VuZENvbG9yOiByZWN0LmNhbGN1bGF0ZUJhY2tncm91bmRDb2xvcigpLFxuICAgICAgICAgICAgYm9yZGVyQ29sb3I6IHJlY3QuY2FsY3VsYXRlQm9yZGVyQ29sb3IoKSxcbiAgICAgICAgICAgIGJvcmRlcldpZHRoOiByZWN0LmJvcmRlcldpZHRoLFxuICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiByZWN0LmJvcmRlclJhZGl1cyxcblx0XHRcdHNpemU6IHJlY3Quc2l6ZSxcblx0XHRcdHJvdGF0aW9uOiByZWN0LnJvdGF0aW9uXG5cdFx0fVxuXG5cdFx0cmV0dXJuIG9wdGlvbnM7XG5cdH1cbn0iLCJpbXBvcnQgRGVidWcgZnJvbSBcIi4uLy4uLy4uL0RlYnVnL0RlYnVnXCI7XG5pbXBvcnQgUG9pbnQgZnJvbSBcIi4uLy4uLy4uL05vZGVzL0dyYXBoaWNzL1BvaW50XCI7XG5pbXBvcnQgUmVzb3VyY2VNYW5hZ2VyIGZyb20gXCIuLi8uLi8uLi9SZXNvdXJjZU1hbmFnZXIvUmVzb3VyY2VNYW5hZ2VyXCI7XG5pbXBvcnQgUmVuZGVyaW5nVXRpbHMgZnJvbSBcIi4uLy4uLy4uL1V0aWxzL1JlbmRlcmluZ1V0aWxzXCI7XG5pbXBvcnQgU2hhZGVyVHlwZSBmcm9tIFwiLi4vU2hhZGVyVHlwZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb2ludFNoYWRlclR5cGUgZXh0ZW5kcyBTaGFkZXJUeXBlIHtcblxuXHRwcm90ZWN0ZWQgYnVmZmVyT2JqZWN0S2V5OiBzdHJpbmc7XG5cblx0Y29uc3RydWN0b3IocHJvZ3JhbUtleTogc3RyaW5nKXtcblx0XHRzdXBlcihwcm9ncmFtS2V5KTtcblx0fVxuXG5cdGluaXRCdWZmZXJPYmplY3QoKTogdm9pZCB7XG5cdFx0dGhpcy5idWZmZXJPYmplY3RLZXkgPSBcInBvaW50XCI7XG5cdFx0dGhpcy5yZXNvdXJjZU1hbmFnZXIuY3JlYXRlQnVmZmVyKHRoaXMuYnVmZmVyT2JqZWN0S2V5KTtcblx0fVxuXG5cdHJlbmRlcihnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBvcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogdm9pZCB7XG5cdFx0bGV0IHBvc2l0aW9uID0gUmVuZGVyaW5nVXRpbHMudG9XZWJHTENvb3JkcyhvcHRpb25zLnBvc2l0aW9uLCBvcHRpb25zLm9yaWdpbiwgb3B0aW9ucy53b3JsZFNpemUpO1xuXHRcdGxldCBjb2xvciA9IFJlbmRlcmluZ1V0aWxzLnRvV2ViR0xDb2xvcihvcHRpb25zLmNvbG9yKTtcblxuXHRcdGNvbnN0IHByb2dyYW0gPSB0aGlzLnJlc291cmNlTWFuYWdlci5nZXRTaGFkZXJQcm9ncmFtKHRoaXMucHJvZ3JhbUtleSk7XG5cdFx0Y29uc3QgYnVmZmVyID0gdGhpcy5yZXNvdXJjZU1hbmFnZXIuZ2V0QnVmZmVyKHRoaXMuYnVmZmVyT2JqZWN0S2V5KTtcblxuXHRcdGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XG5cblx0XHRjb25zdCB2ZXJ0ZXhEYXRhID0gcG9zaXRpb247XG5cblx0XHRjb25zdCBGU0laRSA9IHZlcnRleERhdGEuQllURVNfUEVSX0VMRU1FTlQ7XG5cblx0XHQvLyBCaW5kIHRoZSBidWZmZXJcblx0XHRnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgYnVmZmVyKTtcblx0XHRnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdmVydGV4RGF0YSwgZ2wuU1RBVElDX0RSQVcpO1xuXG5cdFx0Ly8gQXR0cmlidXRlc1xuXHRcdGNvbnN0IGFfUG9zaXRpb24gPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBcImFfUG9zaXRpb25cIik7XG5cdFx0Z2wudmVydGV4QXR0cmliUG9pbnRlcihhX1Bvc2l0aW9uLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDIgKiBGU0laRSwgMCAqIEZTSVpFKTtcblx0XHRnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhX1Bvc2l0aW9uKTtcblxuXHRcdC8vIFVuaWZvcm1zXG5cdFx0Y29uc3QgdV9Db2xvciA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcInVfQ29sb3JcIik7XG5cdFx0Z2wudW5pZm9ybTRmdih1X0NvbG9yLCBjb2xvcik7XG5cblx0XHRjb25zdCB1X1BvaW50U2l6ZSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcInVfUG9pbnRTaXplXCIpO1xuXHRcdGdsLnVuaWZvcm0xZih1X1BvaW50U2l6ZSwgb3B0aW9ucy5wb2ludFNpemUpO1xuXG5cdFx0Z2wuZHJhd0FycmF5cyhnbC5QT0lOVFMsIDAsIDEpO1xuXHR9XG5cblx0Z2V0T3B0aW9ucyhwb2ludDogUG9pbnQpOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcblx0XHRsZXQgb3B0aW9uczogUmVjb3JkPHN0cmluZywgYW55PiA9IHtcblx0XHRcdHBvc2l0aW9uOiBwb2ludC5wb3NpdGlvbixcblx0XHRcdGNvbG9yOiBwb2ludC5jb2xvcixcblx0XHRcdHBvaW50U2l6ZTogcG9pbnQuc2l6ZSxcblx0XHR9XG5cblx0XHRyZXR1cm4gb3B0aW9ucztcblx0fVxufSIsImltcG9ydCBNYXQ0eDQgZnJvbSBcIi4uLy4uLy4uL0RhdGFUeXBlcy9NYXQ0eDRcIjtcbmltcG9ydCBTaGFkZXJUeXBlIGZyb20gXCIuLi9TaGFkZXJUeXBlXCI7XG5cbi8qKiBSZXByZXNlbnRzIGFueSBXZWJHTCBvYmplY3RzIHRoYXQgaGF2ZSBhIHF1YWQgbWVzaCAoaS5lLiBhIHJlY3Rhbmd1bGFyIGdhbWUgb2JqZWN0IGNvbXBvc2VkIG9mIG9ubHkgdHdvIHRyaWFuZ2xlcykgKi9cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFF1YWRTaGFkZXJUeXBlIGV4dGVuZHMgU2hhZGVyVHlwZSB7XG5cdC8qKiBUaGUga2V5IHRvIHRoZSBidWZmZXIgb2JqZWN0IGZvciB0aGlzIHNoYWRlciAqL1xuXHRwcm90ZWN0ZWQgYnVmZmVyT2JqZWN0S2V5OiBzdHJpbmc7XG5cblx0LyoqIFRoZSBzY2FsZSBtYXRyaWMgKi9cblx0cHJvdGVjdGVkIHNjYWxlOiBNYXQ0eDQ7XG5cblx0LyoqIFRoZSByb3RhdGlvbiBtYXRyaXggKi9cblx0cHJvdGVjdGVkIHJvdGF0aW9uOiBNYXQ0eDQ7XG5cblx0LyoqIFRoZSB0cmFuc2xhdGlvbiBtYXRyaXggKi9cblx0cHJvdGVjdGVkIHRyYW5zbGF0aW9uOiBNYXQ0eDQ7XG5cblx0Y29uc3RydWN0b3IocHJvZ3JhbUtleTogc3RyaW5nKXtcblx0XHRzdXBlcihwcm9ncmFtS2V5KTtcblxuXHRcdHRoaXMuc2NhbGUgPSBNYXQ0eDQuSURFTlRJVFk7XG5cdFx0dGhpcy5yb3RhdGlvbiA9IE1hdDR4NC5JREVOVElUWTtcblx0XHR0aGlzLnRyYW5zbGF0aW9uID0gTWF0NHg0LklERU5USVRZO1xuXHR9XG59IiwiaW1wb3J0IE1hdDR4NCBmcm9tIFwiLi4vLi4vLi4vRGF0YVR5cGVzL01hdDR4NFwiO1xuaW1wb3J0IFZlYzIgZnJvbSBcIi4uLy4uLy4uL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgUmVjdCBmcm9tIFwiLi4vLi4vLi4vTm9kZXMvR3JhcGhpY3MvUmVjdFwiO1xuaW1wb3J0IFJlc291cmNlTWFuYWdlciBmcm9tIFwiLi4vLi4vLi4vUmVzb3VyY2VNYW5hZ2VyL1Jlc291cmNlTWFuYWdlclwiO1xuaW1wb3J0IFF1YWRTaGFkZXJUeXBlIGZyb20gXCIuL1F1YWRTaGFkZXJUeXBlXCI7XG5cbi8qKiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVjdFNoYWRlclR5cGUgZXh0ZW5kcyBRdWFkU2hhZGVyVHlwZSB7XG5cblx0Y29uc3RydWN0b3IocHJvZ3JhbUtleTogc3RyaW5nKXtcblx0XHRzdXBlcihwcm9ncmFtS2V5KTtcblx0XHR0aGlzLnJlc291cmNlTWFuYWdlciA9IFJlc291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuXHR9XG5cblx0aW5pdEJ1ZmZlck9iamVjdCgpOiB2b2lkIHtcblx0XHR0aGlzLmJ1ZmZlck9iamVjdEtleSA9IFwicmVjdFwiO1xuXHRcdHRoaXMucmVzb3VyY2VNYW5hZ2VyLmNyZWF0ZUJ1ZmZlcih0aGlzLmJ1ZmZlck9iamVjdEtleSk7XG5cdH1cblxuXHRyZW5kZXIoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgb3B0aW9uczogUmVjb3JkPHN0cmluZywgYW55Pik6IHZvaWQge1xuXHRcdGNvbnN0IGNvbG9yID0gb3B0aW9ucy5jb2xvci50b1dlYkdMKCk7XG5cblx0XHRjb25zdCBwcm9ncmFtID0gdGhpcy5yZXNvdXJjZU1hbmFnZXIuZ2V0U2hhZGVyUHJvZ3JhbSh0aGlzLnByb2dyYW1LZXkpO1xuXHRcdGNvbnN0IGJ1ZmZlciA9IHRoaXMucmVzb3VyY2VNYW5hZ2VyLmdldEJ1ZmZlcih0aGlzLmJ1ZmZlck9iamVjdEtleSk7XG5cblx0XHRnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuXG5cdFx0Y29uc3QgdmVydGV4RGF0YSA9IHRoaXMuZ2V0VmVydGljZXMob3B0aW9ucy5zaXplLngsIG9wdGlvbnMuc2l6ZS55KTtcblxuXHRcdGNvbnN0IEZTSVpFID0gdmVydGV4RGF0YS5CWVRFU19QRVJfRUxFTUVOVDtcblxuXHRcdC8vIEJpbmQgdGhlIGJ1ZmZlclxuXHRcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXIpO1xuXHRcdGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB2ZXJ0ZXhEYXRhLCBnbC5TVEFUSUNfRFJBVyk7XG5cblx0XHQvLyBBdHRyaWJ1dGVzXG5cdFx0Y29uc3QgYV9Qb3NpdGlvbiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIFwiYV9Qb3NpdGlvblwiKTtcblx0XHRnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGFfUG9zaXRpb24sIDIsIGdsLkZMT0FULCBmYWxzZSwgMiAqIEZTSVpFLCAwICogRlNJWkUpO1xuXHRcdGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGFfUG9zaXRpb24pO1xuXG5cdFx0Ly8gVW5pZm9ybXNcblx0XHRjb25zdCB1X0NvbG9yID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIFwidV9Db2xvclwiKTtcblx0XHRnbC51bmlmb3JtNGZ2KHVfQ29sb3IsIGNvbG9yKTtcblxuXHRcdC8vIEdldCB0cmFuc2Zvcm1hdGlvbiBtYXRyaXhcblx0XHQvLyBXZSB3YW50IGEgc3F1YXJlIGZvciBvdXIgcmVuZGVyaW5nIHNwYWNlLCBzbyBnZXQgdGhlIG1heGltdW0gZGltZW5zaW9uIG9mIG91ciBxdWFkXG5cdFx0bGV0IG1heERpbWVuc2lvbiA9IE1hdGgubWF4KG9wdGlvbnMuc2l6ZS54LCBvcHRpb25zLnNpemUueSk7XG5cblx0XHQvLyBUaGUgc2l6ZSBvZiB0aGUgcmVuZGVyaW5nIHNwYWNlIHdpbGwgYmUgYSBzcXVhcmUgd2l0aCB0aGlzIG1heGltdW0gZGltZW5zaW9uXG5cdFx0bGV0IHNpemUgPSBuZXcgVmVjMihtYXhEaW1lbnNpb24sIG1heERpbWVuc2lvbikuc2NhbGUoMi9vcHRpb25zLndvcmxkU2l6ZS54LCAyL29wdGlvbnMud29ybGRTaXplLnkpO1xuXG5cdFx0Ly8gQ2VudGVyIG91ciB0cmFuc2xhdGlvbnMgYXJvdW5kICgwLCAwKVxuXHRcdGNvbnN0IHRyYW5zbGF0ZVggPSAob3B0aW9ucy5wb3NpdGlvbi54IC0gb3B0aW9ucy5vcmlnaW4ueCAtIG9wdGlvbnMud29ybGRTaXplLngvMikvbWF4RGltZW5zaW9uO1xuXHRcdGNvbnN0IHRyYW5zbGF0ZVkgPSAtKG9wdGlvbnMucG9zaXRpb24ueSAtIG9wdGlvbnMub3JpZ2luLnkgLSBvcHRpb25zLndvcmxkU2l6ZS55LzIpL21heERpbWVuc2lvbjtcblxuXHRcdC8vIENyZWF0ZSBvdXIgdHJhbnNmb3JtYXRpb24gbWF0cml4XG5cdFx0dGhpcy50cmFuc2xhdGlvbi50cmFuc2xhdGUobmV3IEZsb2F0MzJBcnJheShbdHJhbnNsYXRlWCwgdHJhbnNsYXRlWV0pKTtcblx0XHR0aGlzLnNjYWxlLnNjYWxlKHNpemUpO1xuXHRcdHRoaXMucm90YXRpb24ucm90YXRlKG9wdGlvbnMucm90YXRpb24pO1xuXHRcdGxldCB0cmFuc2Zvcm1hdGlvbiA9IE1hdDR4NC5NVUxUKHRoaXMudHJhbnNsYXRpb24sIHRoaXMuc2NhbGUsIHRoaXMucm90YXRpb24pO1xuXG5cdFx0Ly8gUGFzcyB0aGUgdHJhbnNsYXRpb24gbWF0cml4IHRvIG91ciBzaGFkZXJcblx0XHRjb25zdCB1X1RyYW5zZm9ybSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcInVfVHJhbnNmb3JtXCIpO1xuXHRcdGdsLnVuaWZvcm1NYXRyaXg0ZnYodV9UcmFuc2Zvcm0sIGZhbHNlLCB0cmFuc2Zvcm1hdGlvbi50b0FycmF5KCkpO1xuXG5cdFx0Ly8gRHJhdyB0aGUgcXVhZFxuXHRcdGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVfU1RSSVAsIDAsIDQpO1xuXHR9XG5cblxuXHQvKlxuXHRcdFNvIGFzIGl0IHR1cm5zIG91dCwgV2ViR0wgaGFzIGFuIGlzc3VlIHdpdGggbm9uLXNxdWFyZSBxdWFkcy5cblx0XHRJdCBkb2Vzbid0IGxpa2Ugd2hlbiB5b3UgZG9uJ3QgaGF2ZSBhIDEtMSBzY2FsZSwgYW5kIHJvdGF0aW9ucyBhcmUgZW50aXJlbHkgbWVzc2VkIHVwIGlmIHRoaXMgaXMgbm90IHRoZSBjYXNlLlxuXHRcdFRvIHNvbHZlIHRoaXMsIEkgdXNlZCB0aGUgc2NhbGUgb2YgdGhlIExBUkdFU1QgZGltZW5zaW9uIG9mIHRoZSBxdWFkIHRvIG1ha2UgYSBzcXVhcmUsIHRoZW4gYWRqdXN0ZWQgdGhlIHZlcnRleCBjb29yZGluYXRlcyBpbnNpZGUgb2YgdGhhdC5cblx0XHRBIGRpYWdyYW0gb2YgdGhlIHNvbHV0aW9uIGZvbGxvd3MuXG5cblx0XHRUaGVyZSBpcyBhIGJvdW5kaW5nIHNxdWFyZSBmb3IgdGhlIHF1YWQgd2l0aCBkaW1lbnNpb25zIGh4aCAoaW4gdGhpcyBjYXNlLCBzaW5jZSBoZWlnaHQgaXMgdGhlIGxhcmdlc3QgZGltZW5zaW9uKS5cblx0XHRUaGUgb2Zmc2V0IGluIHRoZSB2ZXJ0aWNhbCBkaXJlY3Rpb24gaXMgdGhlcmVmb3JlIDAuNSwgYXMgaXQgaXMgbm9ybWFsbHkuXG5cdFx0SG93ZXZlciwgdGhlIG9mZnNldCBpbiB0aGUgaG9yaXpvbnRhbCBkaXJlY3Rpb24gaXMgbm90IHNvIHN0cmFpZ2h0Zm9yd2FyZCwgYnV0IGlzbid0IGNvbmNlcHR1YWxseSBoYXJkLlxuXHRcdEFsbCB3ZSByZWFsbHkgaGF2ZSB0byBkbyBpcyBhIHJhbmdlIGNoYW5nZSBmcm9tIFswLCBoZWlnaHQvMl0gdG8gWzAsIDAuNV0sIHdoZXJlIG91ciB2YWx1ZSBpcyB0ID0gd2lkdGgvMiwgYW5kIDAgPD0gdCA8PSBoZWlnaHQvMi5cblxuXHRcdFNvIG5vdyB3ZSBoYXZlIG91ciByZWN0LCBpbiBhIHNwYWNlIHNjYWxlZCB3aXRoIHJlc3BlY3QgdG8gdGhlIGxhcmdlc3QgZGltZW5zaW9uLlxuXHRcdFJvdGF0aW9ucyB3b3JrIGFzIHlvdSB3b3VsZCBleHBlY3QsIGV2ZW4gZm9yIGxvbmcgcmVjdGFuZ2xlcy5cblxuXHRcdFx0XHRcdDAuNVxuXHRcdFx0X18gX18gX18gX18gX18gX18gX19cblx0XHRcdHxcdHw4ODg4ODg4ODg4OHxcdHxcblx0XHRcdHxcdHw4ODg4ODg4ODg4OHxcdHxcblx0XHRcdHxcdHw4ODg4ODg4ODg4OHxcdHxcblx0XHQtMC41fF8gX3w4ODg4ODg4ODg4OHxfIF98MC41XG5cdFx0XHR8XHR8ODg4ODg4ODg4ODh8XHR8XG5cdFx0XHR8XHR8ODg4ODg4ODg4ODh8XHR8XG5cdFx0XHR8XHR8ODg4ODg4ODg4ODh8XHR8XG5cdCAgXHRcdHxfX198ODg4ODg4ODg4ODh8X19ffFxuXHRcdFx0ICBcdFx0LTAuNVxuXG5cdFx0VGhlIGdldFZlcnRpY2VzIGZ1bmN0aW9uIGJlbG93IGRvZXMgYXMgZGVzY3JpYmVkLCBhbmQgY29udmVydHMgdGhlIHJhbmdlXG5cdCovXG5cdC8qKlxuXHQgKiBUaGUgcmVuZGVyaW5nIHNwYWNlIGFsd2F5cyBoYXMgdG8gYmUgYSBzcXVhcmUsIHNvIG1ha2Ugc3VyZSBpdHMgc3F1YXJlIHcuci50IHRvIHRoZSBsYXJnZXN0IGRpbWVuc2lvblxuXHQgKiBAcGFyYW0gdyBUaGUgd2lkdGggb2YgdGhlIHF1YWQgaW4gcGl4ZWxzXG5cdCAqIEBwYXJhbSBoIFRoZSBoZWlnaHQgb2YgdGhlIHF1YWQgaW4gcGl4ZWxzXG5cdCAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHRoZSB2ZXJ0aWNlcyBvZiB0aGUgcXVhZFxuXHQgKi9cblx0Z2V0VmVydGljZXModzogbnVtYmVyLCBoOiBudW1iZXIpOiBGbG9hdDMyQXJyYXkge1xuXHRcdGxldCB4LCB5O1xuXG5cdFx0aWYoaCA+IHcpe1xuXHRcdFx0eSA9IDAuNTtcblx0XHRcdHggPSB3LygyKmgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR4ID0gMC41O1xuXHRcdFx0eSA9IGgvKDIqdyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoW1xuXHRcdFx0LXgsICB5LFxuXHRcdFx0LXgsIC15LFxuXHRcdFx0IHgsICB5LFxuXHRcdFx0IHgsIC15XG5cdFx0XSk7XG5cdH1cblxuXHRnZXRPcHRpb25zKHJlY3Q6IFJlY3QpOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcblx0XHRsZXQgb3B0aW9uczogUmVjb3JkPHN0cmluZywgYW55PiA9IHtcblx0XHRcdHBvc2l0aW9uOiByZWN0LnBvc2l0aW9uLFxuXHRcdFx0Y29sb3I6IHJlY3QuY29sb3IsXG5cdFx0XHRzaXplOiByZWN0LnNpemUsXG5cdFx0XHRyb3RhdGlvbjogcmVjdC5yb3RhdGlvblxuXHRcdH1cblxuXHRcdHJldHVybiBvcHRpb25zO1xuXHR9XG59IiwiaW1wb3J0IE1hdDR4NCBmcm9tIFwiLi4vLi4vLi4vRGF0YVR5cGVzL01hdDR4NFwiO1xuaW1wb3J0IFZlYzIgZnJvbSBcIi4uLy4uLy4uL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgRGVidWcgZnJvbSBcIi4uLy4uLy4uL0RlYnVnL0RlYnVnXCI7XG5pbXBvcnQgQW5pbWF0ZWRTcHJpdGUgZnJvbSBcIi4uLy4uLy4uL05vZGVzL1Nwcml0ZXMvQW5pbWF0ZWRTcHJpdGVcIjtcbmltcG9ydCBTcHJpdGUgZnJvbSBcIi4uLy4uLy4uL05vZGVzL1Nwcml0ZXMvU3ByaXRlXCI7XG5pbXBvcnQgUmVzb3VyY2VNYW5hZ2VyIGZyb20gXCIuLi8uLi8uLi9SZXNvdXJjZU1hbmFnZXIvUmVzb3VyY2VNYW5hZ2VyXCI7XG5pbXBvcnQgUXVhZFNoYWRlclR5cGUgZnJvbSBcIi4vUXVhZFNoYWRlclR5cGVcIjtcblxuLyoqIEEgc2hhZGVyIGZvciBzcHJpdGVzIGFuZCBhbmltYXRlZCBzcHJpdGVzICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTcHJpdGVTaGFkZXJUeXBlIGV4dGVuZHMgUXVhZFNoYWRlclR5cGUge1xuXHRjb25zdHJ1Y3Rvcihwcm9ncmFtS2V5OiBzdHJpbmcpe1xuXHRcdHN1cGVyKHByb2dyYW1LZXkpO1xuXHRcdHRoaXMucmVzb3VyY2VNYW5hZ2VyID0gUmVzb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG5cdH1cblxuXHRpbml0QnVmZmVyT2JqZWN0KCk6IHZvaWQge1xuXHRcdHRoaXMuYnVmZmVyT2JqZWN0S2V5ID0gXCJzcHJpdGVcIjtcblx0XHR0aGlzLnJlc291cmNlTWFuYWdlci5jcmVhdGVCdWZmZXIodGhpcy5idWZmZXJPYmplY3RLZXkpO1xuXHR9XG5cblx0cmVuZGVyKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIGFueT4pOiB2b2lkIHtcblx0XHRjb25zdCBwcm9ncmFtID0gdGhpcy5yZXNvdXJjZU1hbmFnZXIuZ2V0U2hhZGVyUHJvZ3JhbSh0aGlzLnByb2dyYW1LZXkpO1xuXHRcdGNvbnN0IGJ1ZmZlciA9IHRoaXMucmVzb3VyY2VNYW5hZ2VyLmdldEJ1ZmZlcih0aGlzLmJ1ZmZlck9iamVjdEtleSk7XG5cdFx0Y29uc3QgdGV4dHVyZSA9IHRoaXMucmVzb3VyY2VNYW5hZ2VyLmdldFRleHR1cmUob3B0aW9ucy5pbWFnZUtleSk7XG5cblx0XHRnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuXG5cdFx0Y29uc3QgdmVydGV4RGF0YSA9IHRoaXMuZ2V0VmVydGljZXMob3B0aW9ucy5zaXplLngsIG9wdGlvbnMuc2l6ZS55LCBvcHRpb25zLnNjYWxlKTtcblxuXHRcdGNvbnN0IEZTSVpFID0gdmVydGV4RGF0YS5CWVRFU19QRVJfRUxFTUVOVDtcblxuXHRcdC8vIEJpbmQgdGhlIGJ1ZmZlclxuXHRcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXIpO1xuXHRcdGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB2ZXJ0ZXhEYXRhLCBnbC5TVEFUSUNfRFJBVyk7XG5cblx0XHQvLyBBdHRyaWJ1dGVzXG5cdFx0Y29uc3QgYV9Qb3NpdGlvbiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIFwiYV9Qb3NpdGlvblwiKTtcblx0XHRnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGFfUG9zaXRpb24sIDIsIGdsLkZMT0FULCBmYWxzZSwgNCAqIEZTSVpFLCAwICogRlNJWkUpO1xuXHRcdGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGFfUG9zaXRpb24pO1xuXG5cdFx0Y29uc3QgYV9UZXhDb29yZCA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIFwiYV9UZXhDb29yZFwiKTtcblx0XHRnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGFfVGV4Q29vcmQsIDIsIGdsLkZMT0FULCBmYWxzZSwgNCAqIEZTSVpFLCAyKkZTSVpFKTtcblx0XHRnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhX1RleENvb3JkKTtcblxuXHRcdC8vIFVuaWZvcm1zXG5cdFx0Ly8gR2V0IHRyYW5zZm9ybWF0aW9uIG1hdHJpeFxuXHRcdC8vIFdlIHdhbnQgYSBzcXVhcmUgZm9yIG91ciByZW5kZXJpbmcgc3BhY2UsIHNvIGdldCB0aGUgbWF4aW11bSBkaW1lbnNpb24gb2Ygb3VyIHF1YWRcblx0XHRsZXQgbWF4RGltZW5zaW9uID0gTWF0aC5tYXgob3B0aW9ucy5zaXplLngsIG9wdGlvbnMuc2l6ZS55KTtcblxuXHRcdC8vIFRoZSBzaXplIG9mIHRoZSByZW5kZXJpbmcgc3BhY2Ugd2lsbCBiZSBhIHNxdWFyZSB3aXRoIHRoaXMgbWF4aW11bSBkaW1lbnNpb25cblx0XHRsZXQgc2l6ZSA9IG5ldyBWZWMyKG1heERpbWVuc2lvbiwgbWF4RGltZW5zaW9uKS5zY2FsZSgyL29wdGlvbnMud29ybGRTaXplLngsIDIvb3B0aW9ucy53b3JsZFNpemUueSk7XG5cblx0XHQvLyBDZW50ZXIgb3VyIHRyYW5zbGF0aW9ucyBhcm91bmQgKDAsIDApXG5cdFx0Y29uc3QgdHJhbnNsYXRlWCA9IChvcHRpb25zLnBvc2l0aW9uLnggLSBvcHRpb25zLm9yaWdpbi54IC0gb3B0aW9ucy53b3JsZFNpemUueC8yKS9tYXhEaW1lbnNpb247XG5cdFx0Y29uc3QgdHJhbnNsYXRlWSA9IC0ob3B0aW9ucy5wb3NpdGlvbi55IC0gb3B0aW9ucy5vcmlnaW4ueSAtIG9wdGlvbnMud29ybGRTaXplLnkvMikvbWF4RGltZW5zaW9uO1xuXG5cdFx0Ly8gQ3JlYXRlIG91ciB0cmFuc2Zvcm1hdGlvbiBtYXRyaXhcblx0XHR0aGlzLnRyYW5zbGF0aW9uLnRyYW5zbGF0ZShuZXcgRmxvYXQzMkFycmF5KFt0cmFuc2xhdGVYLCB0cmFuc2xhdGVZXSkpO1xuXHRcdHRoaXMuc2NhbGUuc2NhbGUoc2l6ZSk7XG5cdFx0dGhpcy5yb3RhdGlvbi5yb3RhdGUob3B0aW9ucy5yb3RhdGlvbik7XG5cdFx0bGV0IHRyYW5zZm9ybWF0aW9uID0gTWF0NHg0Lk1VTFQodGhpcy50cmFuc2xhdGlvbiwgdGhpcy5zY2FsZSwgdGhpcy5yb3RhdGlvbik7XG5cblx0XHQvLyBQYXNzIHRoZSB0cmFuc2xhdGlvbiBtYXRyaXggdG8gb3VyIHNoYWRlclxuXHRcdGNvbnN0IHVfVHJhbnNmb3JtID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIFwidV9UcmFuc2Zvcm1cIik7XG5cdFx0Z2wudW5pZm9ybU1hdHJpeDRmdih1X1RyYW5zZm9ybSwgZmFsc2UsIHRyYW5zZm9ybWF0aW9uLnRvQXJyYXkoKSk7XG5cblx0XHQvLyBTZXQgdXAgb3VyIHNhbXBsZXIgd2l0aCBvdXIgYXNzaWduZWQgdGV4dHVyZSB1bml0XG5cdFx0Y29uc3QgdV9TYW1wbGVyID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIFwidV9TYW1wbGVyXCIpO1xuXHRcdGdsLnVuaWZvcm0xaSh1X1NhbXBsZXIsIHRleHR1cmUpO1xuXG5cdFx0Ly8gUGFzcyBpbiB0ZXhTaGlmdFxuXHRcdGNvbnN0IHVfdGV4U2hpZnQgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJ1X3RleFNoaWZ0XCIpO1xuXHRcdGdsLnVuaWZvcm0yZnYodV90ZXhTaGlmdCwgb3B0aW9ucy50ZXhTaGlmdCk7XG5cblx0XHQvLyBQYXNzIGluIHRleFNjYWxlXG5cdFx0Y29uc3QgdV90ZXhTY2FsZSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcInVfdGV4U2NhbGVcIik7XG5cdFx0Z2wudW5pZm9ybTJmdih1X3RleFNjYWxlLCBvcHRpb25zLnRleFNjYWxlKTtcblxuXHRcdC8vIERyYXcgdGhlIHF1YWRcblx0XHRnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFX1NUUklQLCAwLCA0KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBUaGUgcmVuZGVyaW5nIHNwYWNlIGFsd2F5cyBoYXMgdG8gYmUgYSBzcXVhcmUsIHNvIG1ha2Ugc3VyZSBpdHMgc3F1YXJlIHcuci50IHRvIHRoZSBsYXJnZXN0IGRpbWVuc2lvblxuXHQgKiBAcGFyYW0gdyBUaGUgd2lkdGggb2YgdGhlIHF1YWQgaW4gcGl4ZWxzXG5cdCAqIEBwYXJhbSBoIFRoZSBoZWlnaHQgb2YgdGhlIHF1YWQgaW4gcGl4ZWxzXG5cdCAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHRoZSB2ZXJ0aWNlcyBvZiB0aGUgcXVhZFxuXHQgKi9cblx0Z2V0VmVydGljZXModzogbnVtYmVyLCBoOiBudW1iZXIsIHNjYWxlOiBGbG9hdDMyQXJyYXkpOiBGbG9hdDMyQXJyYXkge1xuXHRcdGxldCB4LCB5O1xuXG5cdFx0aWYoaCA+IHcpe1xuXHRcdFx0eSA9IDAuNTtcblx0XHRcdHggPSB3LygyKmgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR4ID0gMC41O1xuXHRcdFx0eSA9IGgvKDIqdyk7XG5cdFx0fVxuXG5cdFx0Ly8gU2NhbGUgdGhlIHJlbmRlcmluZyBzcGFjZSBpZiBuZWVkZWRcblx0XHR4ICo9IHNjYWxlWzBdO1xuXHRcdHkgKj0gc2NhbGVbMV07XG5cblx0XHRyZXR1cm4gbmV3IEZsb2F0MzJBcnJheShbXG5cdFx0XHQteCwgIHksIDAuMCwgMC4wLFxuXHRcdFx0LXgsIC15LCAwLjAsIDEuMCxcblx0XHRcdCB4LCAgeSwgMS4wLCAwLjAsXG5cdFx0XHQgeCwgLXksIDEuMCwgMS4wXG5cdFx0XSk7XG5cdH1cblxuXHRnZXRPcHRpb25zKHNwcml0ZTogU3ByaXRlKTogUmVjb3JkPHN0cmluZywgYW55PiB7XG5cdFx0bGV0IHRleFNoaWZ0O1xuXHRcdGxldCB0ZXhTY2FsZTtcblxuXHRcdGlmKHNwcml0ZSBpbnN0YW5jZW9mIEFuaW1hdGVkU3ByaXRlKXtcblx0XHRcdGxldCBhbmltYXRpb25JbmRleCA9IHNwcml0ZS5hbmltYXRpb24uZ2V0SW5kZXhBbmRBZHZhbmNlQW5pbWF0aW9uKCk7XG5cdFx0XHRsZXQgb2Zmc2V0ID0gc3ByaXRlLmdldEFuaW1hdGlvbk9mZnNldChhbmltYXRpb25JbmRleCk7XG5cdFx0XHR0ZXhTaGlmdCA9IG5ldyBGbG9hdDMyQXJyYXkoW29mZnNldC54IC8gKHNwcml0ZS5jb2xzICogc3ByaXRlLnNpemUueCksIG9mZnNldC55IC8gKHNwcml0ZS5yb3dzICogc3ByaXRlLnNpemUueSldKTtcblx0XHRcdHRleFNjYWxlID0gbmV3IEZsb2F0MzJBcnJheShbMS8oc3ByaXRlLmNvbHMpLCAxLyhzcHJpdGUucm93cyldKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGV4U2hpZnQgPSBuZXcgRmxvYXQzMkFycmF5KFswLCAwXSk7XG5cdFx0XHR0ZXhTY2FsZSA9IG5ldyBGbG9hdDMyQXJyYXkoWzEsIDFdKTtcblx0XHR9XG5cblx0XHRsZXQgb3B0aW9uczogUmVjb3JkPHN0cmluZywgYW55PiA9IHtcblx0XHRcdHBvc2l0aW9uOiBzcHJpdGUucG9zaXRpb24sXG5cdFx0XHRyb3RhdGlvbjogc3ByaXRlLnJvdGF0aW9uLFxuXHRcdFx0c2l6ZTogc3ByaXRlLnNpemUsXG5cdFx0XHRzY2FsZTogc3ByaXRlLnNjYWxlLnRvQXJyYXkoKSxcblx0XHRcdGltYWdlS2V5OiBzcHJpdGUuaW1hZ2VJZCxcblx0XHRcdHRleFNoaWZ0LFxuXHRcdFx0dGV4U2NhbGVcblx0XHR9XG5cblx0XHRyZXR1cm4gb3B0aW9ucztcblx0fVxufSIsImltcG9ydCBNYXAgZnJvbSBcIi4uL0RhdGFUeXBlcy9Db2xsZWN0aW9ucy9NYXBcIjtcbmltcG9ydCBRdWV1ZSBmcm9tIFwiLi4vRGF0YVR5cGVzL0NvbGxlY3Rpb25zL1F1ZXVlXCI7XG5pbXBvcnQgeyBUaWxlZFRpbGVtYXBEYXRhIH0gZnJvbSBcIi4uL0RhdGFUeXBlcy9UaWxlc2V0cy9UaWxlZERhdGFcIjtcbmltcG9ydCBTdHJpbmdVdGlscyBmcm9tIFwiLi4vVXRpbHMvU3RyaW5nVXRpbHNcIjtcbmltcG9ydCBBdWRpb01hbmFnZXIgZnJvbSBcIi4uL1NvdW5kL0F1ZGlvTWFuYWdlclwiO1xuaW1wb3J0IFNwcml0ZXNoZWV0IGZyb20gXCIuLi9EYXRhVHlwZXMvU3ByaXRlc2hlZXRcIjtcbmltcG9ydCBXZWJHTFByb2dyYW1UeXBlIGZyb20gXCIuLi9EYXRhVHlwZXMvUmVuZGVyaW5nL1dlYkdMUHJvZ3JhbVR5cGVcIjtcblxuLyoqXG4gKiBUaGUgcmVzb3VyY2UgbWFuYWdlciBmb3IgdGhlIGdhbWUgZW5naW5lLlxuICogVGhlIHJlc291cmNlIG1hbmFnZXIgaW50ZXJmYWNlcyB3aXRoIHRoZSBsb2FkYWJsZSBhc3NldHMgb2YgYSBnYW1lIHN1Y2ggYXMgaW1hZ2VzLCBkYXRhIGZpbGVzLFxuICogYW5kIHNvdW5kcywgd2hpY2ggYXJlIGFsbCBmb3VuZCBpbiB0aGUgZGlzdCBmb2xkZXIuXG4gKiBUaGlzIGNsYXNzIGNvbnRyb2xzIGxvYWRpbmcgYW5kIHVwZGF0ZXMgdGhlIEByZWZlcmVuY2VbU2NlbmVdIHdpdGggdGhlIGxvYWRpbmcgcHJvZ3Jlc3MsIHNvIHRoYXQgdGhlIHNjZW5lIGRvZXMgXG4gKiBub3Qgc3RhcnQgYmVmb3JlIGFsbCBuZWNlc3NhcnkgYXNzZXRzIGFyZSBsb2FkZWQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlc291cmNlTWFuYWdlciB7XG4gICAgLy8gSW5zdGFuY2UgZm9yIHRoZSBzaW5nbGV0b24gY2xhc3NcbiAgICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogUmVzb3VyY2VNYW5hZ2VyO1xuICAgIFxuICAgIC8vIEJvb2xlYW5zIHRvIGtlZXAgdHJhY2sgb2Ygd2hldGhlciBvciBub3QgdGhlIFJlc291cmNlTWFuYWdlciBpcyBjdXJyZW50bHkgbG9hZGluZyBzb21ldGhpbmdcbiAgICAvKiogV2hldGhlciBvciBub3QgYW55IHJlc291cmNlcyBhcmUgbG9hZGluZyAqL1xuICAgIHByaXZhdGUgbG9hZGluZzogYm9vbGVhbjtcbiAgICAvKiogQSBib29sZWFuIHRvIGluZGljYXRlIHRoYXQgdGhlIGFzc2V0cyBqdXN0IGZpbmlzaGVkIGxvYWRpbmcgKi9cbiAgICBwcml2YXRlIGp1c3RMb2FkZWQ6IGJvb2xlYW47XG5cbiAgICAvLyBGdW5jdGlvbnMgdG8gZG8gc29tZXRoaW5nIHdoZW4gbG9hZGluZyBwcm9ncmVzc2VzIG9yIGlzIGNvbXBsZXRlZCBzdWNoIGFzIHJlbmRlciBhIGxvYWRpbmcgc2NyZWVuXG4gICAgLyoqIEEgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiBsb2FkaW5nIHByb2dyZXNzZXMgKi9cbiAgICBwdWJsaWMgb25Mb2FkUHJvZ3Jlc3M6IEZ1bmN0aW9uO1xuICAgIC8qKiBBIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdoZW4gbG9hZGluZyBjb21wbGV0ZXMgKi9cbiAgICBwdWJsaWMgb25Mb2FkQ29tcGxldGU6IEZ1bmN0aW9uO1xuXG5cbiAgICAvKiogTnVtYmVyIHRvIGtlZXAgdHJhY2sgb2YgaG93IG1hbnkgaW1hZ2VzIG5lZWQgdG8gYmUgbG9hZGVkKi9cbiAgICBwcml2YXRlIGxvYWRvbmx5X2ltYWdlc0xvYWRlZDogbnVtYmVyO1xuICAgIC8qKiBOdW1iZXIgdG8ga2VlcCB0cmFjayBvZiBob3cgbWFueSBpbWFnZXMgYXJlIGxvYWRlZCAqL1xuICAgIHByaXZhdGUgbG9hZG9ubHlfaW1hZ2VzVG9Mb2FkOiBudW1iZXI7XG4gICAgLyoqIFRoZSBxdWV1ZSBvZiBpbWFnZXMgd2UgbXVzdCBsb2FkICovXG4gICAgcHJpdmF0ZSBsb2Fkb25seV9pbWFnZUxvYWRpbmdRdWV1ZTogUXVldWU8S2V5UGF0aFBhaXI+O1xuICAgIC8qKiBBIG1hcCBvZiB0aGUgaW1hZ2VzIHRoYXQgYXJlIGN1cnJlbnRseSBsb2FkZWQgYW5kIGJlaW5nIHVzZWQgYnkgdGhlIHNjZW5lLiBUaGUgcmVmZXJlbmNlIHRvIHRoZXNlIGltYWdlcyBvbmx5IGV4aXN0IGhlcmUgZm9yIGVhc3kgY2xlYW51cC4gKi9cbiAgICBwcml2YXRlIGltYWdlczogTWFwPEhUTUxJbWFnZUVsZW1lbnQ+O1xuXG4gICAgLyoqIE51bWJlciB0byBrZWVwIHRyYWNrIG9mIGhvdyBtYW55IHRpbGVtYXBzIG5lZWQgdG8gYmUgbG9hZGVkICovXG4gICAgcHJpdmF0ZSBsb2Fkb25seV9zcHJpdGVzaGVldHNMb2FkZWQ6IG51bWJlcjtcbiAgICAvKiogTnVtYmVyIHRvIGtlZXAgdHJhY2sgb2YgaG93IG1hbnkgdGlsZW1hcHMgYXJlIGxvYWRlZCAqL1xuICAgIHByaXZhdGUgbG9hZG9ubHlfc3ByaXRlc2hlZXRzVG9Mb2FkOiBudW1iZXI7XG4gICAgLyoqIFRoZSBxdWV1ZSBvZiB0aWxlbWFwcyB3ZSBtdXN0IGxvYWQgKi9cbiAgICBwcml2YXRlIGxvYWRvbmx5X3Nwcml0ZXNoZWV0TG9hZGluZ1F1ZXVlOiBRdWV1ZTxLZXlQYXRoUGFpcj47XG4gICAgLyoqIEEgbWFwIG9mIHRoZSB0aWxlbWFwcyB0aGF0IGFyZSBjdXJyZW50bHkgbG9hZGVkIGFuZCAocHJlc3VtYWJseSkgYmVpbmcgdXNlZCBieSB0aGUgc2NlbmUgKi9cbiAgICBwcml2YXRlIHNwcml0ZXNoZWV0czogTWFwPFNwcml0ZXNoZWV0PjtcblxuICAgIC8qKiBOdW1iZXIgdG8ga2VlcCB0cmFjayBvZiBob3cgbWFueSB0aWxlbWFwcyBuZWVkIHRvIGJlIGxvYWRlZCAqL1xuICAgIHByaXZhdGUgbG9hZG9ubHlfdGlsZW1hcHNMb2FkZWQ6IG51bWJlcjtcbiAgICAvKiogTnVtYmVyIHRvIGtlZXAgdHJhY2sgb2YgaG93IG1hbnkgdGlsZW1hcHMgYXJlIGxvYWRlZCAqL1xuICAgIHByaXZhdGUgbG9hZG9ubHlfdGlsZW1hcHNUb0xvYWQ6IG51bWJlcjtcbiAgICAvKiogVGhlIHF1ZXVlIG9mIHRpbGVtYXBzIHdlIG11c3QgbG9hZCAqL1xuICAgIHByaXZhdGUgbG9hZG9ubHlfdGlsZW1hcExvYWRpbmdRdWV1ZTogUXVldWU8S2V5UGF0aFBhaXI+O1xuICAgIC8qKiBBIG1hcCBvZiB0aGUgdGlsZW1hcHMgdGhhdCBhcmUgY3VycmVudGx5IGxvYWRlZCBhbmQgKHByZXN1bWFibHkpIGJlaW5nIHVzZWQgYnkgdGhlIHNjZW5lICovXG4gICAgcHJpdmF0ZSB0aWxlbWFwczogTWFwPFRpbGVkVGlsZW1hcERhdGE+O1xuXG4gICAgLyoqIE51bWJlciB0byBrZWVwIHRyYWNrIG9mIGhvdyBtYW55IHNvdW5kcyBuZWVkIHRvIGJlIGxvYWRlZCAqL1xuICAgIHByaXZhdGUgbG9hZG9ubHlfYXVkaW9Mb2FkZWQ6IG51bWJlcjtcbiAgICAvKiogTnVtYmVyIHRvIGtlZXAgdHJhY2sgb2YgaG93IG1hbnkgc291bmRzIGFyZSBsb2FkZWQgKi9cbiAgICBwcml2YXRlIGxvYWRvbmx5X2F1ZGlvVG9Mb2FkOiBudW1iZXI7XG4gICAgLyoqIFRoZSBxdWV1ZSBvZiBzb3VuZHMgd2UgbXVzdCBsb2FkICovXG4gICAgcHJpdmF0ZSBsb2Fkb25seV9hdWRpb0xvYWRpbmdRdWV1ZTogUXVldWU8S2V5UGF0aFBhaXI+O1xuICAgIC8qKiBBIG1hcCBvZiB0aGUgc291bmRzIHRoYXQgYXJlIGN1cnJlbnRseSBsb2FkZWQgYW5kIChwcmVzdW1hYmx5KSBiZWluZyB1c2VkIGJ5IHRoZSBzY2VuZSAqL1xuICAgIHByaXZhdGUgYXVkaW9CdWZmZXJzOiBNYXA8QXVkaW9CdWZmZXI+O1xuXG4gICAgLyoqIFRoZSB0b3RhbCBudW1iZXIgb2YgXCJ0eXBlc1wiIG9mIHRoaW5ncyB0aGF0IG5lZWQgdG8gYmUgbG9hZGVkIChpLmUuIGltYWdlcyBhbmQgdGlsZW1hcHMpICovXG4gICAgcHJpdmF0ZSBsb2Fkb25seV90eXBlc1RvTG9hZDogbnVtYmVyO1xuXG4gICAgcHJpdmF0ZSBsb2Fkb25seV9qc29uTG9hZGVkOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBsb2Fkb25seV9qc29uVG9Mb2FkOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBsb2Fkb25seV9qc29uTG9hZGluZ1F1ZXVlOiBRdWV1ZTxLZXlQYXRoUGFpcj47XG4gICAgcHJpdmF0ZSBqc29uT2JqZWN0czogTWFwPFJlY29yZDxzdHJpbmcsIGFueT4+O1xuXG4gICAgLyogIyMjIyMjIyMjIyBJTkZPUk1BVElPTiBTUEVDSUFMIFRPIFdFQkdMICMjIyMjIyMjIyMgKi9cbiAgICBwcml2YXRlIGdsX1dlYkdMQWN0aXZlOiBib29sZWFuO1xuXG4gICAgcHJpdmF0ZSBsb2Fkb25seV9nbF9TaGFkZXJQcm9ncmFtc0xvYWRlZDogbnVtYmVyO1xuICAgIHByaXZhdGUgbG9hZG9ubHlfZ2xfU2hhZGVyUHJvZ3JhbXNUb0xvYWQ6IG51bWJlcjtcbiAgICBwcml2YXRlIGxvYWRvbmx5X2dsX1NoYWRlckxvYWRpbmdRdWV1ZTogUXVldWU8S2V5UGF0aF9TaGFkZXI+O1xuXG4gICAgcHJpdmF0ZSBnbF9TaGFkZXJQcm9ncmFtczogTWFwPFdlYkdMUHJvZ3JhbVR5cGU+O1xuXG4gICAgcHJpdmF0ZSBnbF9UZXh0dXJlczogTWFwPG51bWJlcj47XG4gICAgcHJpdmF0ZSBnbF9OZXh0VGV4dHVyZUlEOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBnbF9CdWZmZXJzOiBNYXA8V2ViR0xCdWZmZXI+OyBcblxuICAgIHByaXZhdGUgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dDtcblxuICAgIC8qICMjIyMjIyMjIyMgVU5MT0FESU5HIEFORCBFWENMVVNJT04gTElTVCAjIyMjIyMjIyMjICovXG4gICAgLyoqIEEgbGlzdCBvZiByZXNvdXJjZXMgdGhhdCB3aWxsIGJlIHVubG9hZGVkIGF0IHRoZSBlbmQgb2YgdGhlIGN1cnJlbnQgc2NlbmUgKi9cbiAgICBwcml2YXRlIHJlc291cmNlc1RvVW5sb2FkOiBBcnJheTxSZXNvdXJjZVJlZmVyZW5jZT47XG5cbiAgICAvKiogQSBsaXN0IG9mIHJlc291cmNlcyB0byBrZWVwIHVudGlsIGZ1cnRoZXIgbm90aWNlICovXG4gICAgcHJpdmF0ZSByZXNvdXJjZXNUb0tlZXA6IEFycmF5PFJlc291cmNlUmVmZXJlbmNlPjtcblxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKXtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuanVzdExvYWRlZCA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMubG9hZG9ubHlfaW1hZ2VzTG9hZGVkID0gMDtcbiAgICAgICAgdGhpcy5sb2Fkb25seV9pbWFnZXNUb0xvYWQgPSAwO1xuICAgICAgICB0aGlzLmxvYWRvbmx5X2ltYWdlTG9hZGluZ1F1ZXVlID0gbmV3IFF1ZXVlKCk7XG4gICAgICAgIHRoaXMuaW1hZ2VzID0gbmV3IE1hcCgpO1xuXG4gICAgICAgIHRoaXMubG9hZG9ubHlfc3ByaXRlc2hlZXRzTG9hZGVkID0gMDtcbiAgICAgICAgdGhpcy5sb2Fkb25seV9zcHJpdGVzaGVldHNUb0xvYWQgPSAwO1xuICAgICAgICB0aGlzLmxvYWRvbmx5X3Nwcml0ZXNoZWV0TG9hZGluZ1F1ZXVlID0gbmV3IFF1ZXVlKCk7XG4gICAgICAgIHRoaXMuc3ByaXRlc2hlZXRzID0gbmV3IE1hcCgpO1xuXG4gICAgICAgIHRoaXMubG9hZG9ubHlfdGlsZW1hcHNMb2FkZWQgPSAwO1xuICAgICAgICB0aGlzLmxvYWRvbmx5X3RpbGVtYXBzVG9Mb2FkID0gMDtcbiAgICAgICAgdGhpcy5sb2Fkb25seV90aWxlbWFwTG9hZGluZ1F1ZXVlID0gbmV3IFF1ZXVlKCk7XG4gICAgICAgIHRoaXMudGlsZW1hcHMgPSBuZXcgTWFwKCk7XG5cbiAgICAgICAgdGhpcy5sb2Fkb25seV9hdWRpb0xvYWRlZCA9IDA7XG4gICAgICAgIHRoaXMubG9hZG9ubHlfYXVkaW9Ub0xvYWQgPSAwO1xuICAgICAgICB0aGlzLmxvYWRvbmx5X2F1ZGlvTG9hZGluZ1F1ZXVlID0gbmV3IFF1ZXVlKCk7XG4gICAgICAgIHRoaXMuYXVkaW9CdWZmZXJzID0gbmV3IE1hcCgpO1xuXG4gICAgICAgIHRoaXMubG9hZG9ubHlfanNvbkxvYWRlZCA9IDA7XG4gICAgICAgIHRoaXMubG9hZG9ubHlfanNvblRvTG9hZCA9IDA7XG4gICAgICAgIHRoaXMubG9hZG9ubHlfanNvbkxvYWRpbmdRdWV1ZSA9IG5ldyBRdWV1ZSgpO1xuICAgICAgICB0aGlzLmpzb25PYmplY3RzID0gbmV3IE1hcCgpO1xuXG4gICAgICAgIHRoaXMubG9hZG9ubHlfZ2xfU2hhZGVyUHJvZ3JhbXNMb2FkZWQgPSAwO1xuICAgICAgICB0aGlzLmxvYWRvbmx5X2dsX1NoYWRlclByb2dyYW1zVG9Mb2FkID0gMDtcbiAgICAgICAgdGhpcy5sb2Fkb25seV9nbF9TaGFkZXJMb2FkaW5nUXVldWUgPSBuZXcgUXVldWUoKTtcblxuICAgICAgICB0aGlzLmdsX1NoYWRlclByb2dyYW1zID0gbmV3IE1hcCgpO1xuXG4gICAgICAgIHRoaXMuZ2xfVGV4dHVyZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuZ2xfTmV4dFRleHR1cmVJRCA9IDA7XG4gICAgICAgIHRoaXMuZ2xfQnVmZmVycyA9IG5ldyBNYXAoKTtcblxuICAgICAgICB0aGlzLnJlc291cmNlc1RvVW5sb2FkID0gbmV3IEFycmF5KCk7XG4gICAgICAgIHRoaXMucmVzb3VyY2VzVG9LZWVwID0gbmV3IEFycmF5KCk7XG4gICAgfTtcblxuICAgIC8qICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgU0lOR0xFVE9OICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMqL1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBvciBhIG5ldyBpbnN0YW5jZSBpZiBub25lIGV4aXN0XG4gICAgICogQHJldHVybnMgVGhlIHJlc291cmNlIG1hbmFnZXJcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogUmVzb3VyY2VNYW5hZ2VyIHtcbiAgICAgICAgaWYoIXRoaXMuaW5zdGFuY2Upe1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZSA9IG5ldyBSZXNvdXJjZU1hbmFnZXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlO1xuICAgIH1cblxuICAgIC8qICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgUFVCTElDIEZVTkNUSU9OICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMqL1xuICAgIC8qKlxuICAgICAqIEFjdGl2YXRlcyBvciBkZWFjdGl2YXRlcyB0aGUgdXNlIG9mIFdlYkdMXG4gICAgICogQHBhcmFtIGZsYWcgVHJ1ZSBpZiBXZWJHTCBzaG91bGQgYmUgdXNlZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICogQHBhcmFtIGdsIFRoZSBpbnN0YW5jZSBvZiB0aGUgZ3JhcGhpY3MgY29udGV4dCwgaWYgYXBwbGljYWJsZVxuICAgICAqL1xuICAgIHB1YmxpYyB1c2VXZWJHTChmbGFnOiBib29sZWFuLCBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2xfV2ViR0xBY3RpdmUgPSBmbGFnO1xuXG4gICAgICAgIGlmKHRoaXMuZ2xfV2ViR0xBY3RpdmUpe1xuICAgICAgICAgICAgdGhpcy5nbCA9IGdsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZHMgYW4gaW1hZ2UgZnJvbSBmaWxlXG4gICAgICogQHBhcmFtIGtleSBUaGUga2V5IHRvIGFzc29jaWF0ZSB0aGUgbG9hZGVkIGltYWdlIHdpdGhcbiAgICAgKiBAcGFyYW0gcGF0aCBUaGUgcGF0aCB0byB0aGUgaW1hZ2UgdG8gbG9hZFxuICAgICAqL1xuICAgIHB1YmxpYyBpbWFnZShrZXk6IHN0cmluZywgcGF0aDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9hZG9ubHlfaW1hZ2VMb2FkaW5nUXVldWUuZW5xdWV1ZSh7a2V5OiBrZXksIHBhdGg6IHBhdGh9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZWxscyB0aGUgcmVzb3VyY2UgbWFuYWdlciB0byBrZWVwIHRoaXMgcmVzb3VyY2VcbiAgICAgKiBAcGFyYW0ga2V5IFRoZSBrZXkgb2YgdGhlIHJlc291cmNlXG4gICAgICovXG4gICAgcHVibGljIGtlZXBJbWFnZShrZXk6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmtlZXBSZXNvdXJjZShrZXksIFJlc291cmNlVHlwZS5JTUFHRSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGEgbG9hZGVkIGltYWdlXG4gICAgICogQHBhcmFtIGtleSBUaGUga2V5IG9mIHRoZSBsb2FkZWQgaW1hZ2VcbiAgICAgKiBAcmV0dXJucyBUaGUgaW1hZ2UgZWxlbWVudCBhc3NvY2lhdGVkIHdpdGggdGhpcyBrZXlcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0SW1hZ2Uoa2V5OiBzdHJpbmcpOiBIVE1MSW1hZ2VFbGVtZW50IHtcbiAgICAgICAgbGV0IGltYWdlID0gdGhpcy5pbWFnZXMuZ2V0KGtleSk7XG4gICAgICAgIGlmKGltYWdlID09PSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgdGhyb3cgYFRoZXJlIGlzIG5vIGltYWdlIGFzc29jaWF0ZWQgd2l0aCBrZXkgXCIke2tleX1cImBcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW1hZ2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZHMgYSBzcHJpdGVzaGVldCBmcm9tIGZpbGVcbiAgICAgKiBAcGFyYW0ga2V5IFRoZSBrZXkgdG8gYXNzb2NpYXRlIHRoZSBsb2FkZWQgc3ByaXRlc2hlZXQgd2l0aFxuICAgICAqIEBwYXJhbSBwYXRoIFRoZSBwYXRoIHRvIHRoZSBzcHJpdGVzaGVldCB0byBsb2FkXG4gICAgICovXG4gICAgcHVibGljIHNwcml0ZXNoZWV0KGtleTogc3RyaW5nLCBwYXRoOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sb2Fkb25seV9zcHJpdGVzaGVldExvYWRpbmdRdWV1ZS5lbnF1ZXVlKHtrZXk6IGtleSwgcGF0aDogcGF0aH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRlbGxzIHRoZSByZXNvdXJjZSBtYW5hZ2VyIHRvIGtlZXAgdGhpcyByZXNvdXJjZVxuICAgICAqIEBwYXJhbSBrZXkgVGhlIGtleSBvZiB0aGUgcmVzb3VyY2VcbiAgICAgKi9cbiAgICBwdWJsaWMga2VlcFNwcml0ZXNoZWV0KGtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMua2VlcFJlc291cmNlKGtleSwgUmVzb3VyY2VUeXBlLlNQUklURVNIRUVUKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYSBsb2FkZWQgc3ByaXRlc2hlZXRcbiAgICAgKiBAcGFyYW0ga2V5IFRoZSBrZXkgb2YgdGhlIHNwcml0ZXNoZWV0IHRvIGxvYWRcbiAgICAgKiBAcmV0dXJucyBUaGUgbG9hZGVkIFNwcml0ZXNoZWV0XG4gICAgICovXG4gICAgcHVibGljIGdldFNwcml0ZXNoZWV0KGtleTogc3RyaW5nKTogU3ByaXRlc2hlZXQge1xuICAgICAgICByZXR1cm4gdGhpcy5zcHJpdGVzaGVldHMuZ2V0KGtleSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZHMgYW4gYXVkaW8gZmlsZVxuICAgICAqIEBwYXJhbSBrZXkgVGhlIGtleSB0byBhc3NvY2lhdGUgd2l0aCB0aGUgbG9hZGVkIGF1ZGlvIGZpbGVcbiAgICAgKiBAcGFyYW0gcGF0aCBUaGUgcGF0aCB0byB0aGUgYXVkaW8gZmlsZSB0byBsb2FkXG4gICAgICovXG4gICAgcHVibGljIGF1ZGlvKGtleTogc3RyaW5nLCBwYXRoOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sb2Fkb25seV9hdWRpb0xvYWRpbmdRdWV1ZS5lbnF1ZXVlKHtrZXk6IGtleSwgcGF0aDogcGF0aH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRlbGxzIHRoZSByZXNvdXJjZSBtYW5hZ2VyIHRvIGtlZXAgdGhpcyByZXNvdXJjZVxuICAgICAqIEBwYXJhbSBrZXkgVGhlIGtleSBvZiB0aGUgcmVzb3VyY2VcbiAgICAgKi9cbiAgICAgcHVibGljIGtlZXBBdWRpbyhrZXk6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmtlZXBSZXNvdXJjZShrZXksIFJlc291cmNlVHlwZS5BVURJTyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGEgbG9hZGVkIGF1ZGlvIGZpbGVcbiAgICAgKiBAcGFyYW0ga2V5IFRoZSBrZXkgb2YgdGhlIGF1ZGlvIGZpbGUgdG8gbG9hZFxuICAgICAqIEByZXR1cm5zIFRoZSBBdWRpb0J1ZmZlciBjcmVhdGVkIGZyb20gdGhlIGxvYWRlZCBhdWRpbyBmbGVcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QXVkaW8oa2V5OiBzdHJpbmcpOiBBdWRpb0J1ZmZlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmF1ZGlvQnVmZmVycy5nZXQoa2V5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2FkIGEgdGlsZW1hcCBmcm9tIGEganNvbiBmaWxlLiBBdXRvbWF0aWNhbGx5IGxvYWRzIHJlbGF0ZWQgaW1hZ2VzXG4gICAgICogQHBhcmFtIGtleSBUaGUga2V5IHRvIGFzc29jaWF0ZSB3aXRoIHRoZSBsb2FkZWQgdGlsZW1hcFxuICAgICAqIEBwYXJhbSBwYXRoIFRoZSBwYXRoIHRvIHRoZSB0aWxlbWFwIHRvIGxvYWRcbiAgICAgKi9cbiAgICBwdWJsaWMgdGlsZW1hcChrZXk6IHN0cmluZywgcGF0aDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9hZG9ubHlfdGlsZW1hcExvYWRpbmdRdWV1ZS5lbnF1ZXVlKHtrZXk6IGtleSwgcGF0aDogcGF0aH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRlbGxzIHRoZSByZXNvdXJjZSBtYW5hZ2VyIHRvIGtlZXAgdGhpcyByZXNvdXJjZVxuICAgICAqIEBwYXJhbSBrZXkgVGhlIGtleSBvZiB0aGUgcmVzb3VyY2VcbiAgICAgKi9cbiAgICAgcHVibGljIGtlZXBUaWxlbWFwKGtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMua2VlcFJlc291cmNlKGtleSwgUmVzb3VyY2VUeXBlLlRJTEVNQVApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJlaXZlcyBhIGxvYWRlZCB0aWxlbWFwXG4gICAgICogQHBhcmFtIGtleSBUaGUga2V5IG9mIHRoZSBsb2FkZWQgdGlsZW1hcFxuICAgICAqIEByZXR1cm5zIFRoZSB0aWxlbWFwIGRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoZSBrZXlcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0VGlsZW1hcChrZXk6IHN0cmluZyk6IFRpbGVkVGlsZW1hcERhdGEge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlbWFwcy5nZXQoa2V5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2FkcyBhbiBvYmplY3QgZnJvbSBhIGpzb24gZmlsZS5cbiAgICAgKiBAcGFyYW0ga2V5IFRoZSBrZXkgdG8gYXNzb2NpYXRlIHdpdGggdGhlIGxvYWRlZCBvYmplY3RcbiAgICAgKiBAcGFyYW0gcGF0aCBUaGUgcGF0aCB0byB0aGUganNvbiBmaWxlIHRvIGxvYWRcbiAgICAgKi9cbiAgICBwdWJsaWMgb2JqZWN0KGtleTogc3RyaW5nLCBwYXRoOiBzdHJpbmcpe1xuICAgICAgICB0aGlzLmxvYWRvbmx5X2pzb25Mb2FkaW5nUXVldWUuZW5xdWV1ZSh7a2V5OiBrZXksIHBhdGg6IHBhdGh9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZWxscyB0aGUgcmVzb3VyY2UgbWFuYWdlciB0byBrZWVwIHRoaXMgcmVzb3VyY2VcbiAgICAgKiBAcGFyYW0ga2V5IFRoZSBrZXkgb2YgdGhlIHJlc291cmNlXG4gICAgICovXG4gICAgIHB1YmxpYyBrZWVwT2JqZWN0KGtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMua2VlcFJlc291cmNlKGtleSwgUmVzb3VyY2VUeXBlLkpTT04pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJlaXZlcyBhIGxvYWRlZCBvYmplY3RcbiAgICAgKiBAcGFyYW0ga2V5IFRoZSBrZXkgb2YgdGhlIGxvYWRlZCBvYmplY3RcbiAgICAgKiBAcmV0dXJucyBUaGUgb2JqZWN0IGRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoZSBrZXlcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0T2JqZWN0KGtleTogc3RyaW5nKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuanNvbk9iamVjdHMuZ2V0KGtleSk7XG4gICAgfVxuXG4gICAgLyogIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBMT0FEIEZVTkNUSU9OICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMqL1xuICAgIC8qKlxuICAgICAqIExvYWRzIGFsbCByZXNvdXJjZXMgY3VycmVudGx5IGluIHRoZSBxdWV1ZVxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdG8gY2FsIHdoZW4gdGhlIHJlc291cmNlcyBhcmUgZmluaXNoZWQgbG9hZGluZ1xuICAgICAqL1xuICAgIGxvYWRSZXNvdXJjZXNGcm9tUXVldWUoY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9hZG9ubHlfdHlwZXNUb0xvYWQgPSA1O1xuXG4gICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7XG5cbiAgICAgICAgLy8gTG9hZCBldmVyeXRoaW5nIGluIHRoZSBxdWV1ZXMuIFRpbGVtYXBzIGhhdmUgdG8gY29tZSBiZWZvcmUgaW1hZ2VzIGJlY2F1c2UgdGhleSB3aWxsIGFkZCBuZXcgaW1hZ2VzIHRvIHRoZSBxdWV1ZVxuICAgICAgICB0aGlzLmxvYWRUaWxlbWFwc0Zyb21RdWV1ZSgoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkxvYWRlZCBUaWxlbWFwc1wiKTtcbiAgICAgICAgICAgIHRoaXMubG9hZFNwcml0ZXNoZWV0c0Zyb21RdWV1ZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJMb2FkZWQgU3ByaXRlc2hlZXRzXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZEltYWdlc0Zyb21RdWV1ZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTG9hZGVkIEltYWdlc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkQXVkaW9Gcm9tUXVldWUoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJMb2FkZWQgQXVkaW9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRPYmplY3RzRnJvbVF1ZXVlKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkxvYWRlZCBPYmplY3RzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuZ2xfV2ViR0xBY3RpdmUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdsX0xvYWRTaGFkZXJzRnJvbVF1ZXVlKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTG9hZGVkIFNoYWRlcnNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmlzaExvYWRpbmcoY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmlzaExvYWRpbmcoY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgZmluaXNoTG9hZGluZyhjYWxsYmFjazogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgLy8gRG9uZSBsb2FkaW5nXG4gICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmp1c3RMb2FkZWQgPSB0cnVlO1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgIH1cblxuICAgIC8qICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgVU5MT0FEIEZVTkNUSU9OICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMqL1xuICAgIFxuICAgIHByaXZhdGUga2VlcFJlc291cmNlKGtleTogc3RyaW5nLCB0eXBlOiBSZXNvdXJjZVR5cGUpOiB2b2lkIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJLZWVwIHJlc291cmNlLi4uXCIpO1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5yZXNvdXJjZXNUb1VubG9hZC5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBsZXQgcmVzb3VyY2UgPSB0aGlzLnJlc291cmNlc1RvVW5sb2FkW2ldO1xuICAgICAgICAgICAgaWYocmVzb3VyY2Uua2V5ID09PSBrZXkgJiYgcmVzb3VyY2UucmVzb3VyY2VUeXBlID09PSB0eXBlKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZvdW5kIHJlc291cmNlIFwiICsga2V5ICsgXCIgb2YgdHlwZSBcIiArIHR5cGUgKyBcIi4gS2VlcGluZy5cIik7XG4gICAgICAgICAgICAgICAgbGV0IHJlc291cmNlVG9Nb3ZlID0gdGhpcy5yZXNvdXJjZXNUb1VubG9hZC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvdXJjZXNUb0tlZXAucHVzaCguLi5yZXNvdXJjZVRvTW92ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgcmVmZXJlbmNlcyB0byBhbGwgcmVzb3VyY2VzIGluIHRoZSByZXNvdXJjZSBtYW5hZ2VyXG4gICAgICovXG4gICAgdW5sb2FkQWxsUmVzb3VyY2VzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5qdXN0TG9hZGVkID0gZmFsc2U7XG5cbiAgICAgICAgZm9yKGxldCByZXNvdXJjZSBvZiB0aGlzLnJlc291cmNlc1RvVW5sb2FkKXtcbiAgICAgICAgICAgIC8vIFVubG9hZCB0aGUgcmVzb3VyY2VcbiAgICAgICAgICAgIHRoaXMudW5sb2FkUmVzb3VyY2UocmVzb3VyY2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1bmxvYWRSZXNvdXJjZShyZXNvdXJjZTogUmVzb3VyY2VSZWZlcmVuY2UpOiB2b2lkIHtcbiAgICAgICAgLy8gRGVsZXRlIHRoZSByZXNvdXJjZSBpdHNlbGZcbiAgICAgICAgc3dpdGNoKHJlc291cmNlLnJlc291cmNlVHlwZSl7XG4gICAgICAgICAgICBjYXNlIFJlc291cmNlVHlwZS5JTUFHRTpcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlcy5kZWxldGUocmVzb3VyY2Uua2V5KTtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmdsX1dlYkdMQWN0aXZlKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nbF9UZXh0dXJlcy5kZWxldGUocmVzb3VyY2Uua2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlc291cmNlVHlwZS5USUxFTUFQOlxuICAgICAgICAgICAgICAgIHRoaXMudGlsZW1hcHMuZGVsZXRlKHJlc291cmNlLmtleSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlc291cmNlVHlwZS5TUFJJVEVTSEVFVDpcbiAgICAgICAgICAgICAgICB0aGlzLnNwcml0ZXNoZWV0cy5kZWxldGUocmVzb3VyY2Uua2V5KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVzb3VyY2VUeXBlLkFVRElPOlxuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9CdWZmZXJzLmRlbGV0ZShyZXNvdXJjZS5rZXkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZXNvdXJjZVR5cGUuSlNPTjpcbiAgICAgICAgICAgICAgICB0aGlzLmpzb25PYmplY3RzLmRlbGV0ZShyZXNvdXJjZS5rZXkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgLypjYXNlIFJlc291cmNlVHlwZS5TSEFERVI6XG4gICAgICAgICAgICAgICAgdGhpcy5nbF9TaGFkZXJQcm9ncmFtcy5nZXQocmVzb3VyY2Uua2V5KS5kZWxldGUodGhpcy5nbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5nbF9TaGFkZXJQcm9ncmFtcy5kZWxldGUocmVzb3VyY2Uua2V5KTtcbiAgICAgICAgICAgICAgICBicmVhazsqL1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGVsZXRlIGFueSBkZXBlbmRlbmNpZXNcbiAgICAgICAgZm9yKGxldCBkZXBlbmRlbmN5IG9mIHJlc291cmNlLmRlcGVuZGVuY2llcyl7XG4gICAgICAgICAgICB0aGlzLnVubG9hZFJlc291cmNlKGRlcGVuZGVuY3kpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyogIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBXT1JLIEZVTkNUSU9OUyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjKi9cbiAgICAvKipcbiAgICAgKiBMb2FkcyBhbGwgdGlsZW1hcHMgY3VycmVudGx5IGluIHRoZSB0aWxlbWFwIGxvYWRpbmcgcXVldWVcbiAgICAgKiBAcGFyYW0gb25GaW5pc2hMb2FkaW5nIFRoZSBmdW5jdGlvbiB0byBjYWxsIHdoZW4gbG9hZGluZyBpcyBjb21wbGV0ZVxuICAgICAqL1xuICAgIHByaXZhdGUgbG9hZFRpbGVtYXBzRnJvbVF1ZXVlKG9uRmluaXNoTG9hZGluZzogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sb2Fkb25seV90aWxlbWFwc1RvTG9hZCA9IHRoaXMubG9hZG9ubHlfdGlsZW1hcExvYWRpbmdRdWV1ZS5nZXRTaXplKCk7XG4gICAgICAgIHRoaXMubG9hZG9ubHlfdGlsZW1hcHNMb2FkZWQgPSAwO1xuXG4gICAgICAgIC8vIElmIG5vIGl0ZW1zIHRvIGxvYWQsIHdlJ3JlIGZpbmlzaGVkXG4gICAgICAgIGlmKHRoaXMubG9hZG9ubHlfdGlsZW1hcHNUb0xvYWQgPT09IDApe1xuICAgICAgICAgICAgb25GaW5pc2hMb2FkaW5nKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB3aGlsZSh0aGlzLmxvYWRvbmx5X3RpbGVtYXBMb2FkaW5nUXVldWUuaGFzSXRlbXMoKSl7XG4gICAgICAgICAgICBsZXQgdGlsZW1hcCA9IHRoaXMubG9hZG9ubHlfdGlsZW1hcExvYWRpbmdRdWV1ZS5kZXF1ZXVlKCk7XG4gICAgICAgICAgICB0aGlzLmxvYWRUaWxlbWFwKHRpbGVtYXAua2V5LCB0aWxlbWFwLnBhdGgsIG9uRmluaXNoTG9hZGluZyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2FkcyBhIHNpbmd1bGFyIHRpbGVtYXAgXG4gICAgICogQHBhcmFtIGtleSBUaGUga2V5IG9mIHRoZSB0aWxlbWFwXG4gICAgICogQHBhcmFtIHBhdGhUb1RpbGVtYXBKU09OIFRoZSBwYXRoIHRvIHRoZSB0aWxlbWFwIEpTT04gZmlsZVxuICAgICAqIEBwYXJhbSBjYWxsYmFja0lmTGFzdCBUaGUgZnVuY3Rpb24gdG8gY2FsbCBpZiB0aGlzIGlzIHRoZSBsYXN0IHRpbGVtYXAgdG8gbG9hZFxuICAgICAqL1xuICAgIHByaXZhdGUgbG9hZFRpbGVtYXAoa2V5OiBzdHJpbmcsIHBhdGhUb1RpbGVtYXBKU09OOiBzdHJpbmcsIGNhbGxiYWNrSWZMYXN0OiBGdW5jdGlvbik6IHZvaWQge1xuICAgICAgICB0aGlzLmxvYWRUZXh0RmlsZShwYXRoVG9UaWxlbWFwSlNPTiwgKGZpbGVUZXh0OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGxldCB0aWxlbWFwT2JqZWN0ID0gPFRpbGVkVGlsZW1hcERhdGE+SlNPTi5wYXJzZShmaWxlVGV4dCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFdlIGNhbiBwYXJzZSB0aGUgb2JqZWN0IGxhdGVyIC0gaXQncyBtdWNoIGZhc3RlciB0aGFuIGxvYWRpbmdcbiAgICAgICAgICAgIHRoaXMudGlsZW1hcHMuYWRkKGtleSwgdGlsZW1hcE9iamVjdCk7XG4gICAgICAgICAgICBsZXQgcmVzb3VyY2UgPSBuZXcgUmVzb3VyY2VSZWZlcmVuY2Uoa2V5LCBSZXNvdXJjZVR5cGUuVElMRU1BUCk7XG5cbiAgICAgICAgICAgIC8vIEdyYWIgdGhlIHRpbGVzZXQgaW1hZ2VzIHdlIG5lZWQgdG8gbG9hZCBhbmQgYWRkIHRoZW0gdG8gdGhlIGltYWdlbG9hZGluZyBxdWV1ZVxuICAgICAgICAgICAgZm9yKGxldCB0aWxlc2V0IG9mIHRpbGVtYXBPYmplY3QudGlsZXNldHMpe1xuICAgICAgICAgICAgICAgIGlmKHRpbGVzZXQuaW1hZ2Upe1xuICAgICAgICAgICAgICAgICAgICBsZXQga2V5ID0gdGlsZXNldC5pbWFnZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhdGggPSBTdHJpbmdVdGlscy5nZXRQYXRoRnJvbUZpbGVQYXRoKHBhdGhUb1RpbGVtYXBKU09OKSArIGtleTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2Fkb25seV9pbWFnZUxvYWRpbmdRdWV1ZS5lbnF1ZXVlKHtrZXk6IGtleSwgcGF0aDogcGF0aCwgaXNEZXBlbmRlbmN5OiB0cnVlfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoaXMgaW1hZ2UgYXMgYSBkZXBlbmRlbmN5IHRvIHRoZSB0aWxlbWFwXG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlLmFkZERlcGVuZGVuY3kobmV3IFJlc291cmNlUmVmZXJlbmNlKGtleSwgUmVzb3VyY2VUeXBlLklNQUdFKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKHRpbGVzZXQudGlsZXMpe1xuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHRpbGUgb2YgdGlsZXNldC50aWxlcyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQga2V5ID0gdGlsZS5pbWFnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXRoID0gU3RyaW5nVXRpbHMuZ2V0UGF0aEZyb21GaWxlUGF0aChwYXRoVG9UaWxlbWFwSlNPTikgKyBrZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRvbmx5X2ltYWdlTG9hZGluZ1F1ZXVlLmVucXVldWUoe2tleToga2V5LCBwYXRoOiBwYXRoLCBpc0RlcGVuZGVuY3k6IHRydWV9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoaXMgaW1hZ2UgYXMgYSBkZXBlbmRlbmN5IHRvIHRoZSB0aWxlbWFwXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZS5hZGREZXBlbmRlbmN5KG5ldyBSZXNvdXJjZVJlZmVyZW5jZShrZXksIFJlc291cmNlVHlwZS5JTUFHRSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgdGhlIHJlc291cmNlIHJlZmVyZW5jZSB0byB0aGUgbGlzdCBvZiByZXNvdXJjZSB0byB1bmxvYWRcbiAgICAgICAgICAgIHRoaXMucmVzb3VyY2VzVG9VbmxvYWQucHVzaChyZXNvdXJjZSk7XG5cbiAgICAgICAgICAgIC8vIEZpbmlzaCBsb2FkaW5nXG4gICAgICAgICAgICB0aGlzLmZpbmlzaExvYWRpbmdUaWxlbWFwKGNhbGxiYWNrSWZMYXN0KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluaXNoIGxvYWRpbmcgYSB0aWxlbWFwLiBDYWxscyB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gaWYgdGhpcyBpcyB0aGUgbGFzdCB0aWxlbWFwIGJlaW5nIGxvYWRlZFxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdG8gY2FsbCBpZiB0aGlzIGlzIHRoZSBsYXN0IHRpbGVtYXAgdG8gbG9hZFxuICAgICAqL1xuICAgIHByaXZhdGUgZmluaXNoTG9hZGluZ1RpbGVtYXAoY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9hZG9ubHlfdGlsZW1hcHNMb2FkZWQgKz0gMTtcblxuICAgICAgICBpZih0aGlzLmxvYWRvbmx5X3RpbGVtYXBzTG9hZGVkID09PSB0aGlzLmxvYWRvbmx5X3RpbGVtYXBzVG9Mb2FkKXtcbiAgICAgICAgICAgIC8vIFdlJ3JlIGRvbmUgbG9hZGluZyB0aWxlbWFwc1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWRzIGFsbCBzcHJpdGVzaGVldHMgY3VycmVudGx5IGluIHRoZSBzcHJpdGVzaGVldCBsb2FkaW5nIHF1ZXVlXG4gICAgICogQHBhcmFtIG9uRmluaXNoTG9hZGluZyBUaGUgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZSBzcHJpdGVzaGVldHMgYXJlIGRvbmUgbG9hZGluZ1xuICAgICAqL1xuICAgIHByaXZhdGUgbG9hZFNwcml0ZXNoZWV0c0Zyb21RdWV1ZShvbkZpbmlzaExvYWRpbmc6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9hZG9ubHlfc3ByaXRlc2hlZXRzVG9Mb2FkID0gdGhpcy5sb2Fkb25seV9zcHJpdGVzaGVldExvYWRpbmdRdWV1ZS5nZXRTaXplKCk7XG4gICAgICAgIHRoaXMubG9hZG9ubHlfc3ByaXRlc2hlZXRzTG9hZGVkID0gMDtcblxuICAgICAgICAvLyBJZiBubyBpdGVtcyB0byBsb2FkLCB3ZSdyZSBmaW5pc2hlZFxuICAgICAgICBpZih0aGlzLmxvYWRvbmx5X3Nwcml0ZXNoZWV0c1RvTG9hZCA9PT0gMCl7XG4gICAgICAgICAgICBvbkZpbmlzaExvYWRpbmcoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHdoaWxlKHRoaXMubG9hZG9ubHlfc3ByaXRlc2hlZXRMb2FkaW5nUXVldWUuaGFzSXRlbXMoKSl7XG4gICAgICAgICAgICBsZXQgc3ByaXRlc2hlZXQgPSB0aGlzLmxvYWRvbmx5X3Nwcml0ZXNoZWV0TG9hZGluZ1F1ZXVlLmRlcXVldWUoKTtcbiAgICAgICAgICAgIHRoaXMubG9hZFNwcml0ZXNoZWV0KHNwcml0ZXNoZWV0LmtleSwgc3ByaXRlc2hlZXQucGF0aCwgb25GaW5pc2hMb2FkaW5nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWRzIGEgc2luZ3VsYXIgc3ByaXRlc2hlZXQgXG4gICAgICogQHBhcmFtIGtleSBUaGUga2V5IG9mIHRoZSBzcHJpdGVzaGVldCB0byBsb2FkXG4gICAgICogQHBhcmFtIHBhdGhUb1Nwcml0ZXNoZWV0SlNPTiBUaGUgcGF0aCB0byB0aGUgc3ByaXRlc2hlZXQgSlNPTiBmaWxlXG4gICAgICogQHBhcmFtIGNhbGxiYWNrSWZMYXN0IFRoZSBmdW5jdGlvbiB0byBjYWxsIGlmIHRoaXMgaXMgdGhlIGxhc3Qgc3ByaXRlc2hlZXRcbiAgICAgKi9cbiAgICBwcml2YXRlIGxvYWRTcHJpdGVzaGVldChrZXk6IHN0cmluZywgcGF0aFRvU3ByaXRlc2hlZXRKU09OOiBzdHJpbmcsIGNhbGxiYWNrSWZMYXN0OiBGdW5jdGlvbik6IHZvaWQge1xuICAgICAgICB0aGlzLmxvYWRUZXh0RmlsZShwYXRoVG9TcHJpdGVzaGVldEpTT04sIChmaWxlVGV4dDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBsZXQgc3ByaXRlc2hlZXQgPSA8U3ByaXRlc2hlZXQ+SlNPTi5wYXJzZShmaWxlVGV4dCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFdlIGNhbiBwYXJzZSB0aGUgb2JqZWN0IGxhdGVyIC0gaXQncyBtdWNoIGZhc3RlciB0aGFuIGxvYWRpbmdcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlc2hlZXRzLmFkZChrZXksIHNwcml0ZXNoZWV0KTtcblxuICAgICAgICAgICAgbGV0IHJlc291cmNlID0gbmV3IFJlc291cmNlUmVmZXJlbmNlKGtleSwgUmVzb3VyY2VUeXBlLlNQUklURVNIRUVUKTtcblxuICAgICAgICAgICAgLy8gR3JhYiB0aGUgaW1hZ2Ugd2UgbmVlZCB0byBsb2FkIGFuZCBhZGQgaXQgdG8gdGhlIGltYWdlbG9hZGluZyBxdWV1ZVxuICAgICAgICAgICAgbGV0IHBhdGggPSBTdHJpbmdVdGlscy5nZXRQYXRoRnJvbUZpbGVQYXRoKHBhdGhUb1Nwcml0ZXNoZWV0SlNPTikgKyBzcHJpdGVzaGVldC5zcHJpdGVTaGVldEltYWdlO1xuICAgICAgICAgICAgdGhpcy5sb2Fkb25seV9pbWFnZUxvYWRpbmdRdWV1ZS5lbnF1ZXVlKHtrZXk6IHNwcml0ZXNoZWV0Lm5hbWUsIHBhdGg6IHBhdGgsIGlzRGVwZW5kZW5jeTogdHJ1ZX0pO1xuXG4gICAgICAgICAgICByZXNvdXJjZS5hZGREZXBlbmRlbmN5KG5ldyBSZXNvdXJjZVJlZmVyZW5jZShzcHJpdGVzaGVldC5uYW1lLCBSZXNvdXJjZVR5cGUuSU1BR0UpKTtcbiAgICAgICAgICAgIHRoaXMucmVzb3VyY2VzVG9VbmxvYWQucHVzaChyZXNvdXJjZSk7XG5cbiAgICAgICAgICAgIC8vIEZpbmlzaCBsb2FkaW5nXG4gICAgICAgICAgICB0aGlzLmZpbmlzaExvYWRpbmdTcHJpdGVzaGVldChjYWxsYmFja0lmTGFzdCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbmlzaCBsb2FkaW5nIGEgc3ByaXRlc2hlZXQuIENhbGxzIHRoZSBjYWxsYmFjayBmdW5jdGlvbiBpZiB0aGlzIGlzIHRoZSBsYXN0IHNwcml0ZXNoZWV0IGJlaW5nIGxvYWRlZFxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdG8gY2FsbCBpZiB0aGlzIGlzIHRoZSBsYXN0IHNwcml0ZXNoZWV0IHRvIGxvYWRcbiAgICAgKi9cbiAgICBwcml2YXRlIGZpbmlzaExvYWRpbmdTcHJpdGVzaGVldChjYWxsYmFjazogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sb2Fkb25seV9zcHJpdGVzaGVldHNMb2FkZWQgKz0gMTtcblxuICAgICAgICBpZih0aGlzLmxvYWRvbmx5X3Nwcml0ZXNoZWV0c0xvYWRlZCA9PT0gdGhpcy5sb2Fkb25seV9zcHJpdGVzaGVldHNUb0xvYWQpe1xuICAgICAgICAgICAgLy8gV2UncmUgZG9uZSBsb2FkaW5nIHNwcml0ZXNoZWV0c1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWRzIGFsbCBpbWFnZXMgY3VycmVudGx5IGluIHRoZSBpbWFnZSBsb2FkaW5nIHF1ZXVlXG4gICAgICogQHBhcmFtIG9uRmluaXNoTG9hZGluZyBUaGUgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZXJlIGFyZSBubyBtb3JlIGltYWdlcyB0byBsb2FkXG4gICAgICovXG4gICAgcHJpdmF0ZSBsb2FkSW1hZ2VzRnJvbVF1ZXVlKG9uRmluaXNoTG9hZGluZzogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sb2Fkb25seV9pbWFnZXNUb0xvYWQgPSB0aGlzLmxvYWRvbmx5X2ltYWdlTG9hZGluZ1F1ZXVlLmdldFNpemUoKTtcbiAgICAgICAgdGhpcy5sb2Fkb25seV9pbWFnZXNMb2FkZWQgPSAwO1xuXG4gICAgICAgIC8vIElmIG5vIGl0ZW1zIHRvIGxvYWQsIHdlJ3JlIGZpbmlzaGVkXG4gICAgICAgIGlmKHRoaXMubG9hZG9ubHlfaW1hZ2VzVG9Mb2FkID09PSAwKXtcbiAgICAgICAgICAgIG9uRmluaXNoTG9hZGluZygpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUodGhpcy5sb2Fkb25seV9pbWFnZUxvYWRpbmdRdWV1ZS5oYXNJdGVtcygpKXtcbiAgICAgICAgICAgIGxldCBpbWFnZSA9IHRoaXMubG9hZG9ubHlfaW1hZ2VMb2FkaW5nUXVldWUuZGVxdWV1ZSgpO1xuICAgICAgICAgICAgdGhpcy5sb2FkSW1hZ2UoaW1hZ2Uua2V5LCBpbWFnZS5wYXRoLCBpbWFnZS5pc0RlcGVuZGVuY3ksIG9uRmluaXNoTG9hZGluZyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2FkcyBhIHNpbmd1bGFyIGltYWdlXG4gICAgICogQHBhcmFtIGtleSBUaGUga2V5IG9mIHRoZSBpbWFnZSB0byBsb2FkXG4gICAgICogQHBhcmFtIHBhdGggVGhlIHBhdGggdG8gdGhlIGltYWdlIHRvIGxvYWRcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tJZkxhc3QgVGhlIGZ1bmN0aW9uIHRvIGNhbGwgaWYgdGhpcyBpcyB0aGUgbGFzdCBpbWFnZVxuICAgICAqL1xuICAgIHB1YmxpYyBsb2FkSW1hZ2Uoa2V5OiBzdHJpbmcsIHBhdGg6IHN0cmluZywgaXNEZXBlbmRlbmN5OiBib29sZWFuLCBjYWxsYmFja0lmTGFzdDogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7XG5cbiAgICAgICAgaW1hZ2Uub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgLy8gQWRkIHRvIGxvYWRlZCBpbWFnZXNcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VzLmFkZChrZXksIGltYWdlKTtcblxuICAgICAgICAgICAgLy8gSWYgbm90IGEgZGVwZW5kZW5jeSwgcHVzaCBpdCB0byB0aGUgdW5sb2FkIGxpc3QuIE90aGVyd2lzZSBpdCdzIG1hbmFnZWQgYnkgc29tZXRoaW5nIGVsc2VcbiAgICAgICAgICAgIGlmKCFpc0RlcGVuZGVuY3kpe1xuICAgICAgICAgICAgICAgIHRoaXMucmVzb3VyY2VzVG9VbmxvYWQucHVzaChuZXcgUmVzb3VyY2VSZWZlcmVuY2Uoa2V5LCBSZXNvdXJjZVR5cGUuSU1BR0UpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgV2ViR0wgaXMgYWN0aXZlLCBjcmVhdGUgYSB0ZXh0dXJlXG4gICAgICAgICAgICBpZih0aGlzLmdsX1dlYkdMQWN0aXZlKXtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVdlYkdMVGV4dHVyZShrZXksIGltYWdlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRmluaXNoIGltYWdlIGxvYWRcbiAgICAgICAgICAgIHRoaXMuZmluaXNoTG9hZGluZ0ltYWdlKGNhbGxiYWNrSWZMYXN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGltYWdlLnNyYyA9IHBhdGg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluaXNoIGxvYWRpbmcgYW4gaW1hZ2UuIElmIHRoaXMgaXMgdGhlIGxhc3QgaW1hZ2UsIGl0IGNhbGxzIHRoZSBjYWxsYmFjayBmdW5jdGlvblxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdG8gY2FsbCBpZiB0aGlzIGlzIHRoZSBsYXN0IGltYWdlXG4gICAgICovXG4gICAgcHJpdmF0ZSBmaW5pc2hMb2FkaW5nSW1hZ2UoY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9hZG9ubHlfaW1hZ2VzTG9hZGVkICs9IDE7XG5cbiAgICAgICAgaWYodGhpcy5sb2Fkb25seV9pbWFnZXNMb2FkZWQgPT09IHRoaXMubG9hZG9ubHlfaW1hZ2VzVG9Mb2FkICl7XG4gICAgICAgICAgICAvLyBXZSdyZSBkb25lIGxvYWRpbmcgaW1hZ2VzXG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZHMgYWxsIGF1ZGlvIGN1cnJlbnRseSBpbiB0aGUgdGlsZW1hcCBsb2FkaW5nIHF1ZXVlXG4gICAgICogQHBhcmFtIG9uRmluaXNoTG9hZGluZyBUaGUgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRpbGVtYXBzIGFyZSBkb25lIGxvYWRpbmdcbiAgICAgKi9cbiAgICBwcml2YXRlIGxvYWRBdWRpb0Zyb21RdWV1ZShvbkZpbmlzaExvYWRpbmc6IEZ1bmN0aW9uKXtcbiAgICAgICAgdGhpcy5sb2Fkb25seV9hdWRpb1RvTG9hZCA9IHRoaXMubG9hZG9ubHlfYXVkaW9Mb2FkaW5nUXVldWUuZ2V0U2l6ZSgpO1xuICAgICAgICB0aGlzLmxvYWRvbmx5X2F1ZGlvTG9hZGVkID0gMDtcblxuICAgICAgICAvLyBJZiBubyBpdGVtcyB0byBsb2FkLCB3ZSdyZSBmaW5pc2hlZFxuICAgICAgICBpZih0aGlzLmxvYWRvbmx5X2F1ZGlvVG9Mb2FkID09PSAwKXtcbiAgICAgICAgICAgIG9uRmluaXNoTG9hZGluZygpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUodGhpcy5sb2Fkb25seV9hdWRpb0xvYWRpbmdRdWV1ZS5oYXNJdGVtcygpKXtcbiAgICAgICAgICAgIGxldCBhdWRpbyA9IHRoaXMubG9hZG9ubHlfYXVkaW9Mb2FkaW5nUXVldWUuZGVxdWV1ZSgpO1xuICAgICAgICAgICAgdGhpcy5sb2FkQXVkaW8oYXVkaW8ua2V5LCBhdWRpby5wYXRoLCBvbkZpbmlzaExvYWRpbmcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZCBhIHNpbmd1bGFyIGF1ZGlvIGZpbGVcbiAgICAgKiBAcGFyYW0ga2V5IFRoZSBrZXkgdG8gdGhlIGF1ZGlvIGZpbGUgdG8gbG9hZFxuICAgICAqIEBwYXJhbSBwYXRoIFRoZSBwYXRoIHRvIHRoZSBhdWRpbyBmaWxlIHRvIGxvYWRcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tJZkxhc3QgVGhlIGZ1bmN0aW9uIHRvIGNhbGwgaWYgdGhpcyBpcyB0aGUgbGFzdCBhdWRpbyBmaWxlIHRvIGxvYWRcbiAgICAgKi9cbiAgICBwcml2YXRlIGxvYWRBdWRpbyhrZXk6IHN0cmluZywgcGF0aDogc3RyaW5nLCBjYWxsYmFja0lmTGFzdDogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgbGV0IGF1ZGlvQ3R4ID0gQXVkaW9NYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0QXVkaW9Db250ZXh0KCk7XG5cbiAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgcmVxdWVzdC5vcGVuKCdHRVQnLCBwYXRoLCB0cnVlKTtcbiAgICAgICAgcmVxdWVzdC5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xuXG4gICAgICAgIHJlcXVlc3Qub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgYXVkaW9DdHguZGVjb2RlQXVkaW9EYXRhKHJlcXVlc3QucmVzcG9uc2UsIChidWZmZXIpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgdG8gbGlzdCBvZiBhdWRpbyBidWZmZXJzXG4gICAgICAgICAgICAgICAgdGhpcy5hdWRpb0J1ZmZlcnMuYWRkKGtleSwgYnVmZmVyKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc291cmNlc1RvVW5sb2FkLnB1c2gobmV3IFJlc291cmNlUmVmZXJlbmNlKGtleSwgUmVzb3VyY2VUeXBlLkFVRElPKSk7XG5cbiAgICAgICAgICAgICAgICAvLyBGaW5pc2ggbG9hZGluZyBzb3VuZFxuICAgICAgICAgICAgICAgIHRoaXMuZmluaXNoTG9hZGluZ0F1ZGlvKGNhbGxiYWNrSWZMYXN0KTtcbiAgICAgICAgICAgIH0sIChlcnJvcikgPT57XG4gICAgICAgICAgICAgICAgdGhyb3cgXCJFcnJvciBsb2FkaW5nIHNvdW5kXCI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXF1ZXN0LnNlbmQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaW5pc2ggbG9hZGluZyBhbiBhdWRpbyBmaWxlLiBDYWxscyB0aGUgY2FsbGJhY2sgZnVuY3RvbiBpZiB0aGlzIGlzIHRoZSBsYXN0IGF1ZGlvIHNhbXBsZSBiZWluZyBsb2FkZWQuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBmdW5jdGlvbiB0byBjYWxsIGlmIHRoaXMgaXMgdGhlIGxhc3QgYXVkaW8gZmlsZSB0byBsb2FkXG4gICAgICovXG4gICAgcHJpdmF0ZSBmaW5pc2hMb2FkaW5nQXVkaW8oY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9hZG9ubHlfYXVkaW9Mb2FkZWQgKz0gMTtcblxuICAgICAgICBpZih0aGlzLmxvYWRvbmx5X2F1ZGlvTG9hZGVkID09PSB0aGlzLmxvYWRvbmx5X2F1ZGlvVG9Mb2FkKXtcbiAgICAgICAgICAgIC8vIFdlJ3JlIGRvbmUgbG9hZGluZyBhdWRpb1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWRzIGFsbCBvYmplY3RzIGN1cnJlbnRseSBpbiB0aGUgb2JqZWN0IGxvYWRpbmcgcXVldWVcbiAgICAgKiBAcGFyYW0gb25GaW5pc2hMb2FkaW5nIFRoZSBmdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhlcmUgYXJlIG5vIG1vcmUgb2JqZWN0cyB0byBsb2FkXG4gICAgICovXG4gICAgcHJpdmF0ZSBsb2FkT2JqZWN0c0Zyb21RdWV1ZShvbkZpbmlzaExvYWRpbmc6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9hZG9ubHlfanNvblRvTG9hZCA9IHRoaXMubG9hZG9ubHlfanNvbkxvYWRpbmdRdWV1ZS5nZXRTaXplKCk7XG4gICAgICAgIHRoaXMubG9hZG9ubHlfanNvbkxvYWRlZCA9IDA7XG5cbiAgICAgICAgLy8gSWYgbm8gaXRlbXMgdG8gbG9hZCwgd2UncmUgZmluaXNoZWRcbiAgICAgICAgaWYodGhpcy5sb2Fkb25seV9qc29uVG9Mb2FkID09PSAwKXtcbiAgICAgICAgICAgIG9uRmluaXNoTG9hZGluZygpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUodGhpcy5sb2Fkb25seV9qc29uTG9hZGluZ1F1ZXVlLmhhc0l0ZW1zKCkpe1xuICAgICAgICAgICAgbGV0IG9iaiA9IHRoaXMubG9hZG9ubHlfanNvbkxvYWRpbmdRdWV1ZS5kZXF1ZXVlKCk7XG4gICAgICAgICAgICB0aGlzLmxvYWRPYmplY3Qob2JqLmtleSwgb2JqLnBhdGgsIG9uRmluaXNoTG9hZGluZyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2FkcyBhIHNpbmd1bGFyIG9iamVjdFxuICAgICAqIEBwYXJhbSBrZXkgVGhlIGtleSBvZiB0aGUgb2JqZWN0IHRvIGxvYWRcbiAgICAgKiBAcGFyYW0gcGF0aCBUaGUgcGF0aCB0byB0aGUgb2JqZWN0IHRvIGxvYWRcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tJZkxhc3QgVGhlIGZ1bmN0aW9uIHRvIGNhbGwgaWYgdGhpcyBpcyB0aGUgbGFzdCBvYmplY3RcbiAgICAgKi9cbiAgICBwdWJsaWMgbG9hZE9iamVjdChrZXk6IHN0cmluZywgcGF0aDogc3RyaW5nLCBjYWxsYmFja0lmTGFzdDogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sb2FkVGV4dEZpbGUocGF0aCwgKGZpbGVUZXh0OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGxldCBvYmogPSBKU09OLnBhcnNlKGZpbGVUZXh0KTtcbiAgICAgICAgICAgIHRoaXMuanNvbk9iamVjdHMuYWRkKGtleSwgb2JqKTtcblxuICAgICAgICAgICAgdGhpcy5yZXNvdXJjZXNUb1VubG9hZC5wdXNoKG5ldyBSZXNvdXJjZVJlZmVyZW5jZShrZXksIFJlc291cmNlVHlwZS5KU09OKSk7XG5cbiAgICAgICAgICAgIHRoaXMuZmluaXNoTG9hZGluZ09iamVjdChjYWxsYmFja0lmTGFzdCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbmlzaCBsb2FkaW5nIGFuIG9iamVjdC4gSWYgdGhpcyBpcyB0aGUgbGFzdCBvYmplY3QsIGl0IGNhbGxzIHRoZSBjYWxsYmFjayBmdW5jdGlvblxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdG8gY2FsbCBpZiB0aGlzIGlzIHRoZSBsYXN0IG9iamVjdFxuICAgICAqL1xuICAgIHByaXZhdGUgZmluaXNoTG9hZGluZ09iamVjdChjYWxsYmFjazogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sb2Fkb25seV9qc29uTG9hZGVkICs9IDE7XG5cbiAgICAgICAgaWYodGhpcy5sb2Fkb25seV9qc29uTG9hZGVkID09PSB0aGlzLmxvYWRvbmx5X2pzb25Ub0xvYWQpe1xuICAgICAgICAgICAgLy8gV2UncmUgZG9uZSBsb2FkaW5nIG9iamVjdHNcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiAjIyMjIyMjIyMjIFdFQkdMIFNQRUNJRklDIEZVTkNUSU9OUyAjIyMjIyMjIyMjICovXG5cbiAgICBwdWJsaWMgZ2V0VGV4dHVyZShrZXk6IHN0cmluZyk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmdsX1RleHR1cmVzLmdldChrZXkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTaGFkZXJQcm9ncmFtKGtleTogc3RyaW5nKTogV2ViR0xQcm9ncmFtIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2xfU2hhZGVyUHJvZ3JhbXMuZ2V0KGtleSkucHJvZ3JhbTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0QnVmZmVyKGtleTogc3RyaW5nKTogV2ViR0xCdWZmZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5nbF9CdWZmZXJzLmdldChrZXkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlV2ViR0xUZXh0dXJlKGltYWdlS2V5OiBzdHJpbmcsIGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50KTogdm9pZCB7XG4gICAgICAgIC8vIEdldCB0aGUgdGV4dHVyZSBJRFxuICAgICAgICBjb25zdCB0ZXh0dXJlSUQgPSB0aGlzLmdldFRleHR1cmVJRCh0aGlzLmdsX05leHRUZXh0dXJlSUQpO1xuXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgdGV4dHVyZVxuICAgICAgICBjb25zdCB0ZXh0dXJlID0gdGhpcy5nbC5jcmVhdGVUZXh0dXJlKCk7XG5cbiAgICAgICAgLy8gU2V0IHVwIHRoZSB0ZXh0dXJlXG4gICAgICAgIC8vIEVuYWJsZSB0ZXh0dXJlMFxuICAgICAgICB0aGlzLmdsLmFjdGl2ZVRleHR1cmUodGV4dHVyZUlEKTtcblxuICAgICAgICAvLyBCaW5kIG91ciB0ZXh0dXJlIHRvIHRleHR1cmUgMFxuICAgICAgICB0aGlzLmdsLmJpbmRUZXh0dXJlKHRoaXMuZ2wuVEVYVFVSRV8yRCwgdGV4dHVyZSk7XG5cbiAgICAgICAgLy8gU2V0IHRoZSB0ZXh0dXJlIHBhcmFtZXRlcnNcbiAgICAgICAgdGhpcy5nbC50ZXhQYXJhbWV0ZXJpKHRoaXMuZ2wuVEVYVFVSRV8yRCwgdGhpcy5nbC5URVhUVVJFX01JTl9GSUxURVIsIHRoaXMuZ2wuTElORUFSKTtcbiAgICAgICAgdGhpcy5nbC50ZXhQYXJhbWV0ZXJpKHRoaXMuZ2wuVEVYVFVSRV8yRCwgdGhpcy5nbC5URVhUVVJFX1dSQVBfUywgdGhpcy5nbC5DTEFNUF9UT19FREdFKTtcbiAgICAgICAgdGhpcy5nbC50ZXhQYXJhbWV0ZXJpKHRoaXMuZ2wuVEVYVFVSRV8yRCwgdGhpcy5nbC5URVhUVVJFX1dSQVBfVCwgdGhpcy5nbC5DTEFNUF9UT19FREdFKTtcblxuICAgICAgICAvLyBTZXQgdGhlIHRleHR1cmUgaW1hZ2VcbiAgICAgICAgdGhpcy5nbC50ZXhJbWFnZTJEKHRoaXMuZ2wuVEVYVFVSRV8yRCwgMCwgdGhpcy5nbC5SR0JBLCB0aGlzLmdsLlJHQkEsIHRoaXMuZ2wuVU5TSUdORURfQllURSwgaW1hZ2UpO1xuXG4gICAgICAgIC8vIEFkZCB0aGUgdGV4dHVyZSB0byBvdXIgbWFwIHdpdGggdGhlIHNhbWUga2V5IGFzIHRoZSBpbWFnZVxuICAgICAgICB0aGlzLmdsX1RleHR1cmVzLmFkZChpbWFnZUtleSwgdGhpcy5nbF9OZXh0VGV4dHVyZUlEKTtcblxuICAgICAgICAvLyBJbmNyZW1lbnQgdGhlIGtleVxuICAgICAgICB0aGlzLmdsX05leHRUZXh0dXJlSUQgKz0gMTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFRleHR1cmVJRChpZDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgLy8gU3RhcnQgd2l0aCA5IGNhc2VzIC0gdGhpcyBjYW4gYmUgZXhwYW5kZWQgaWYgbmVlZGVkLCBidXQgZm9yIHRoZSBiZXN0IHBlcmZvcm1hbmNlLFxuICAgICAgICAvLyBUZXh0dXJlcyBzaG91bGQgYmUgc3RpdGNoZWQgaW50byBhbiBhdGxhc1xuICAgICAgICBzd2l0Y2goaWQpe1xuICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gdGhpcy5nbC5URVhUVVJFMDtcbiAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIHRoaXMuZ2wuVEVYVFVSRTE7XG4gICAgICAgICAgICBjYXNlIDI6IHJldHVybiB0aGlzLmdsLlRFWFRVUkUyO1xuICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gdGhpcy5nbC5URVhUVVJFMztcbiAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIHRoaXMuZ2wuVEVYVFVSRTQ7XG4gICAgICAgICAgICBjYXNlIDU6IHJldHVybiB0aGlzLmdsLlRFWFRVUkU1O1xuICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gdGhpcy5nbC5URVhUVVJFNjtcbiAgICAgICAgICAgIGNhc2UgNzogcmV0dXJuIHRoaXMuZ2wuVEVYVFVSRTc7XG4gICAgICAgICAgICBjYXNlIDg6IHJldHVybiB0aGlzLmdsLlRFWFRVUkU4O1xuICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuIHRoaXMuZ2wuVEVYVFVSRTk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgY3JlYXRlQnVmZmVyKGtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmKHRoaXMuZ2xfV2ViR0xBY3RpdmUpe1xuICAgICAgICAgICAgbGV0IGJ1ZmZlciA9IHRoaXMuZ2wuY3JlYXRlQnVmZmVyKCk7XG5cbiAgICAgICAgICAgIHRoaXMuZ2xfQnVmZmVycy5hZGQoa2V5LCBidWZmZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5xdWV1ZXMgbG9hZGluZyBvZiBhIG5ldyBzaGFkZXIgcHJvZ3JhbVxuICAgICAqIEBwYXJhbSBrZXkgVGhlIGtleSBvZiB0aGUgc2hhZGVyIHByb2dyYW1cbiAgICAgKiBAcGFyYW0gdlNoYWRlckZpbGVwYXRoIFxuICAgICAqIEBwYXJhbSBmU2hhZGVyRmlsZXBhdGggXG4gICAgICovXG4gICAgcHVibGljIHNoYWRlcihrZXk6IHN0cmluZywgdlNoYWRlckZpbGVwYXRoOiBzdHJpbmcsIGZTaGFkZXJGaWxlcGF0aDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGxldCBzcGxpdFBhdGggPSB2U2hhZGVyRmlsZXBhdGguc3BsaXQoXCIuXCIpO1xuICAgICAgICBsZXQgZW5kID0gc3BsaXRQYXRoW3NwbGl0UGF0aC5sZW5ndGggLSAxXTtcblxuICAgICAgICBpZihlbmQgIT09IFwidnNoYWRlclwiKXtcbiAgICAgICAgICAgIHRocm93IGAke3ZTaGFkZXJGaWxlcGF0aH0gaXMgbm90IGEgdmFsaWQgdmVydGV4IHNoYWRlciAtIG11c3QgZW5kIGluIFwiLnZzaGFkZXJgO1xuICAgICAgICB9XG5cbiAgICAgICAgc3BsaXRQYXRoID0gZlNoYWRlckZpbGVwYXRoLnNwbGl0KFwiLlwiKTtcbiAgICAgICAgZW5kID0gc3BsaXRQYXRoW3NwbGl0UGF0aC5sZW5ndGggLSAxXTtcblxuICAgICAgICBpZihlbmQgIT09IFwiZnNoYWRlclwiKXtcbiAgICAgICAgICAgIHRocm93IGAke2ZTaGFkZXJGaWxlcGF0aH0gaXMgbm90IGEgdmFsaWQgdmVydGV4IHNoYWRlciAtIG11c3QgZW5kIGluIFwiLmZzaGFkZXJgO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHBhdGhzID0gbmV3IEtleVBhdGhfU2hhZGVyKCk7XG4gICAgICAgIHBhdGhzLmtleSA9IGtleTtcbiAgICAgICAgcGF0aHMudnBhdGggPSB2U2hhZGVyRmlsZXBhdGg7XG4gICAgICAgIHBhdGhzLmZwYXRoID0gZlNoYWRlckZpbGVwYXRoO1xuXG4gICAgICAgIHRoaXMubG9hZG9ubHlfZ2xfU2hhZGVyTG9hZGluZ1F1ZXVlLmVucXVldWUocGF0aHMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRlbGxzIHRoZSByZXNvdXJjZSBtYW5hZ2VyIHRvIGtlZXAgdGhpcyByZXNvdXJjZVxuICAgICAqIEBwYXJhbSBrZXkgVGhlIGtleSBvZiB0aGUgcmVzb3VyY2VcbiAgICAgKi9cbiAgICAgcHVibGljIGtlZXBTaGFkZXIoa2V5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5rZWVwUmVzb3VyY2Uoa2V5LCBSZXNvdXJjZVR5cGUuSU1BR0UpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2xfTG9hZFNoYWRlcnNGcm9tUXVldWUob25GaW5pc2hMb2FkaW5nOiBGdW5jdGlvbik6IHZvaWQge1xuICAgICAgICB0aGlzLmxvYWRvbmx5X2dsX1NoYWRlclByb2dyYW1zVG9Mb2FkID0gdGhpcy5sb2Fkb25seV9nbF9TaGFkZXJMb2FkaW5nUXVldWUuZ2V0U2l6ZSgpO1xuICAgICAgICB0aGlzLmxvYWRvbmx5X2dsX1NoYWRlclByb2dyYW1zTG9hZGVkID0gMDtcblxuICAgICAgICAvLyBJZiB3ZWJHTCBpc24nYWN0aXZlIG9yIHRoZXJlIGFyZSBubyBpdGVtcyB0byBsb2FkLCB3ZSdyZSBmaW5pc2hlZFxuICAgICAgICBpZighdGhpcy5nbF9XZWJHTEFjdGl2ZSB8fCB0aGlzLmxvYWRvbmx5X2dsX1NoYWRlclByb2dyYW1zVG9Mb2FkID09PSAwKXtcbiAgICAgICAgICAgIG9uRmluaXNoTG9hZGluZygpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUodGhpcy5sb2Fkb25seV9nbF9TaGFkZXJMb2FkaW5nUXVldWUuaGFzSXRlbXMoKSl7XG4gICAgICAgICAgICBsZXQgc2hhZGVyID0gdGhpcy5sb2Fkb25seV9nbF9TaGFkZXJMb2FkaW5nUXVldWUuZGVxdWV1ZSgpO1xuICAgICAgICAgICAgdGhpcy5nbF9Mb2FkU2hhZGVyKHNoYWRlci5rZXksIHNoYWRlci52cGF0aCwgc2hhZGVyLmZwYXRoLCBvbkZpbmlzaExvYWRpbmcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnbF9Mb2FkU2hhZGVyKGtleTogc3RyaW5nLCB2cGF0aDogc3RyaW5nLCBmcGF0aDogc3RyaW5nLCBjYWxsYmFja0lmTGFzdDogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sb2FkVGV4dEZpbGUodnBhdGgsICh2RmlsZVRleHQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgdlNoYWRlciA9IHZGaWxlVGV4dDtcblxuICAgICAgICAgICAgdGhpcy5sb2FkVGV4dEZpbGUoZnBhdGgsIChmRmlsZVRleHQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZTaGFkZXIgPSBmRmlsZVRleHRcblxuICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgdGhlIHByb2dyYW0gYW5kIHNoYWRlcnNcbiAgICAgICAgICAgICAgICBjb25zdCBbc2hhZGVyUHJvZ3JhbSwgdmVydGV4U2hhZGVyLCBmcmFnbWVudFNoYWRlcl0gPSB0aGlzLmNyZWF0ZVNoYWRlclByb2dyYW0odlNoYWRlciwgZlNoYWRlcik7XG5cbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSB3cmFwcGVyIHR5cGVcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmFtV3JhcHBlciA9IG5ldyBXZWJHTFByb2dyYW1UeXBlKCk7XG4gICAgICAgICAgICAgICAgcHJvZ3JhbVdyYXBwZXIucHJvZ3JhbSA9IHNoYWRlclByb2dyYW07XG4gICAgICAgICAgICAgICAgcHJvZ3JhbVdyYXBwZXIudmVydGV4U2hhZGVyID0gdmVydGV4U2hhZGVyO1xuICAgICAgICAgICAgICAgIHByb2dyYW1XcmFwcGVyLmZyYWdtZW50U2hhZGVyID0gZnJhZ21lbnRTaGFkZXI7XG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgdG8gb3VyIG1hcFxuICAgICAgICAgICAgICAgIHRoaXMuZ2xfU2hhZGVyUHJvZ3JhbXMuYWRkKGtleSwgcHJvZ3JhbVdyYXBwZXIpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvdXJjZXNUb1VubG9hZC5wdXNoKG5ldyBSZXNvdXJjZVJlZmVyZW5jZShrZXksIFJlc291cmNlVHlwZS5TSEFERVIpKTtcblxuICAgICAgICAgICAgICAgIC8vIEZpbmlzaCBsb2FkaW5nXG4gICAgICAgICAgICAgICAgdGhpcy5nbF9GaW5pc2hMb2FkaW5nU2hhZGVyKGNhbGxiYWNrSWZMYXN0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdsX0ZpbmlzaExvYWRpbmdTaGFkZXIoY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9hZG9ubHlfZ2xfU2hhZGVyUHJvZ3JhbXNMb2FkZWQgKz0gMTtcblxuICAgICAgICBpZih0aGlzLmxvYWRvbmx5X2dsX1NoYWRlclByb2dyYW1zTG9hZGVkID09PSB0aGlzLmxvYWRvbmx5X2dsX1NoYWRlclByb2dyYW1zVG9Mb2FkKXtcbiAgICAgICAgICAgIC8vIFdlJ3JlIGRvbmUgbG9hZGluZyBzaGFkZXJzXG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVTaGFkZXJQcm9ncmFtKHZTaGFkZXJTb3VyY2U6IHN0cmluZywgZlNoYWRlclNvdXJjZTogc3RyaW5nKXtcbiAgICAgICAgY29uc3QgdmVydGV4U2hhZGVyID0gdGhpcy5sb2FkVmVydGV4U2hhZGVyKHZTaGFkZXJTb3VyY2UpO1xuICAgICAgICBjb25zdCBmcmFnbWVudFNoYWRlciA9IHRoaXMubG9hZEZyYWdtZW50U2hhZGVyKGZTaGFkZXJTb3VyY2UpO1xuICAgIFxuICAgICAgICBpZih2ZXJ0ZXhTaGFkZXIgPT09IG51bGwgfHwgZnJhZ21lbnRTaGFkZXIgPT09IG51bGwpe1xuICAgICAgICAgICAgLy8gV2UgaGFkIGEgcHJvYmxlbSBpbnRpYWxpemluZyAtIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBDcmVhdGUgYSBzaGFkZXIgcHJvZ3JhbVxuICAgICAgICBjb25zdCBwcm9ncmFtID0gdGhpcy5nbC5jcmVhdGVQcm9ncmFtKCk7XG4gICAgICAgIGlmKCFwcm9ncmFtKSB7XG4gICAgICAgICAgICAvLyBFcnJvciBjcmVhdGluZ1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGNyZWF0ZSBwcm9ncmFtXCIpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gQXR0YWNoIG91ciB2ZXJ0ZXggYW5kIGZyYWdtZW50IHNoYWRlclxuICAgICAgICB0aGlzLmdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2ZXJ0ZXhTaGFkZXIpO1xuICAgICAgICB0aGlzLmdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBmcmFnbWVudFNoYWRlcik7XG4gICAgXG4gICAgICAgIC8vIExpbmtcbiAgICAgICAgdGhpcy5nbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcbiAgICAgICAgaWYoIXRoaXMuZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCB0aGlzLmdsLkxJTktfU1RBVFVTKSl7XG4gICAgICAgICAgICAvLyBFcnJvciBsaW5raW5nXG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IHRoaXMuZ2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSk7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gbGluayBwcm9ncmFtOiBcIiArIGVycm9yKTtcbiAgICBcbiAgICAgICAgICAgIC8vIENsZWFuIHVwXG4gICAgICAgICAgICB0aGlzLmdsLmRlbGV0ZVByb2dyYW0ocHJvZ3JhbSk7XG4gICAgICAgICAgICB0aGlzLmdsLmRlbGV0ZVNoYWRlcih2ZXJ0ZXhTaGFkZXIpO1xuICAgICAgICAgICAgdGhpcy5nbC5kZWxldGVTaGFkZXIoZnJhZ21lbnRTaGFkZXIpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gV2Ugc3VjY2Vzc2Z1bGx5IGNyZWF0ZSBhIHByb2dyYW1cbiAgICAgICAgcmV0dXJuIFtwcm9ncmFtLCB2ZXJ0ZXhTaGFkZXIsIGZyYWdtZW50U2hhZGVyXTtcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSBsb2FkVmVydGV4U2hhZGVyKHNoYWRlclNvdXJjZTogc3RyaW5nKTogV2ViR0xTaGFkZXJ7XG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyB2ZXJ0ZXggc2hhZGVyXG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRTaGFkZXIodGhpcy5nbC5WRVJURVhfU0hBREVSLCBzaGFkZXJTb3VyY2UpO1xuICAgIH1cbiAgICBcbiAgICBwcml2YXRlIGxvYWRGcmFnbWVudFNoYWRlcihzaGFkZXJTb3VyY2U6IHN0cmluZyk6IFdlYkdMU2hhZGVye1xuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgZnJhZ21lbnQgc2hhZGVyXG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRTaGFkZXIodGhpcy5nbC5GUkFHTUVOVF9TSEFERVIsIHNoYWRlclNvdXJjZSk7XHRcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSBsb2FkU2hhZGVyKHR5cGU6IG51bWJlciwgc2hhZGVyU291cmNlOiBzdHJpbmcpOiBXZWJHTFNoYWRlcntcbiAgICAgICAgY29uc3Qgc2hhZGVyID0gdGhpcy5nbC5jcmVhdGVTaGFkZXIodHlwZSk7XG4gICAgXG4gICAgICAgIC8vIElmIHdlIGNvdWxkbid0IGNyZWF0ZSB0aGUgc2hhZGVyLCBlcnJvclxuICAgICAgICBpZihzaGFkZXIgPT09IG51bGwpe1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiVW5hYmxlIHRvIGNyZWF0ZSBzaGFkZXJcIik7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBBZGQgdGhlIHNvdXJjZSB0byB0aGUgc2hhZGVyIGFuZCBjb21waWxlXG4gICAgICAgIHRoaXMuZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc2hhZGVyU291cmNlKTtcbiAgICAgICAgdGhpcy5nbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XG4gICAgXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGVyZSB3ZXJlIG5vIGVycm9ycyBkdXJpbmcgdGhpcyBwcm9jZXNzXG4gICAgICAgIGlmKCF0aGlzLmdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIHRoaXMuZ2wuQ09NUElMRV9TVEFUVVMpKXtcbiAgICAgICAgICAgIC8vIE5vdCBjb21waWxlZCAtIGVycm9yXG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IHRoaXMuZ2wuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGNvbXBpbGUgc2hhZGVyOiBcIiArIGVycm9yKTtcbiAgICBcbiAgICAgICAgICAgIC8vIENsZWFuIHVwXG4gICAgICAgICAgICB0aGlzLmdsLmRlbGV0ZVNoYWRlcihzaGFkZXIpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gU3VjZXNzLCBzbyByZXR1cm4gdGhlIHNoYWRlclxuICAgICAgICByZXR1cm4gc2hhZGVyO1xuICAgIH1cblxuICAgIC8qICMjIyMjIyMjIyMgR0VORVJBTCBMT0FESU5HIEZVTkNUSU9OUyAjIyMjIyMjIyMjICovXG5cbiAgICBwcml2YXRlIGxvYWRUZXh0RmlsZSh0ZXh0RmlsZVBhdGg6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIGxldCB4b2JqOiBYTUxIdHRwUmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICB4b2JqLm92ZXJyaWRlTWltZVR5cGUoXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgICAgICB4b2JqLm9wZW4oJ0dFVCcsIHRleHRGaWxlUGF0aCwgdHJ1ZSk7XG4gICAgICAgIHhvYmoub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCh4b2JqLnJlYWR5U3RhdGUgPT0gNCkgJiYgKHhvYmouc3RhdHVzID09IDIwMCkpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh4b2JqLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHhvYmouc2VuZChudWxsKTtcbiAgICB9XG5cbiAgICAvKiAjIyMjIyMjIyMjIExPQURJTkcgQkFSIElORk8gIyMjIyMjIyMjIyAqL1xuXG4gICAgcHJpdmF0ZSBnZXRMb2FkUGVyY2VudCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gKHRoaXMubG9hZG9ubHlfdGlsZW1hcHNMb2FkZWQvdGhpcy5sb2Fkb25seV90aWxlbWFwc1RvTG9hZFxuICAgICAgICAgICAgKyB0aGlzLmxvYWRvbmx5X3Nwcml0ZXNoZWV0c0xvYWRlZC90aGlzLmxvYWRvbmx5X3Nwcml0ZXNoZWV0c1RvTG9hZFxuICAgICAgICAgICAgKyB0aGlzLmxvYWRvbmx5X2ltYWdlc0xvYWRlZC90aGlzLmxvYWRvbmx5X2ltYWdlc1RvTG9hZFxuICAgICAgICAgICAgKyB0aGlzLmxvYWRvbmx5X2F1ZGlvTG9hZGVkL3RoaXMubG9hZG9ubHlfYXVkaW9Ub0xvYWQpXG4gICAgICAgICAgICAvIHRoaXMubG9hZG9ubHlfdHlwZXNUb0xvYWQ7XG4gICAgfVxuXG4gICAgdXBkYXRlKGRlbHRhVDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGlmKHRoaXMubG9hZGluZyl7XG4gICAgICAgICAgICBpZih0aGlzLm9uTG9hZFByb2dyZXNzKXtcbiAgICAgICAgICAgICAgICB0aGlzLm9uTG9hZFByb2dyZXNzKHRoaXMuZ2V0TG9hZFBlcmNlbnQoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZih0aGlzLmp1c3RMb2FkZWQpe1xuICAgICAgICAgICAgdGhpcy5qdXN0TG9hZGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZih0aGlzLm9uTG9hZENvbXBsZXRlKXtcbiAgICAgICAgICAgICAgICB0aGlzLm9uTG9hZENvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQSBjbGFzcyByZXByZXNlbnRpbmcgYSByZWZlcmVuY2UgdG8gYSByZXNvdXJjZS5cbiAqIFRoaXMgaXMgdXNlZCBmb3IgdGhlIGV4ZW1wdGlvbiBsaXN0IHRvIGFzc3VyZSBhc3NldHMgYW5kIHRoZWlyIGRlcGVuZGVuY2llcyBkb24ndCBnZXRcbiAqIGRlc3Ryb3llZCBpZiB0aGV5IGFyZSBzdGlsbCBuZWVkZWQuXG4gKi9cbmNsYXNzIFJlc291cmNlUmVmZXJlbmNlIHtcbiAgICBrZXk6IHN0cmluZztcbiAgICByZXNvdXJjZVR5cGU6IFJlc291cmNlVHlwZTtcbiAgICBkZXBlbmRlbmNpZXM6IEFycmF5PFJlc291cmNlUmVmZXJlbmNlPjtcblxuICAgIGNvbnN0cnVjdG9yKGtleTogc3RyaW5nLCByZXNvdXJjZVR5cGU6IFJlc291cmNlVHlwZSl7XG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xuICAgICAgICB0aGlzLnJlc291cmNlVHlwZSA9IHJlc291cmNlVHlwZTtcbiAgICAgICAgdGhpcy4gZGVwZW5kZW5jaWVzID0gbmV3IEFycmF5KCk7XG4gICAgfVxuXG4gICAgYWRkRGVwZW5kZW5jeShyZXNvdXJjZTogUmVzb3VyY2VSZWZlcmVuY2UpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kZXBlbmRlbmNpZXMucHVzaChyZXNvdXJjZSk7XG4gICAgfVxufVxuXG5cbmVudW0gUmVzb3VyY2VUeXBlIHtcbiAgICBJTUFHRSA9IFwiSU1BR0VcIixcbiAgICBUSUxFTUFQID0gXCJUSUxFTUFQXCIsXG4gICAgU1BSSVRFU0hFRVQgPSBcIlNQUklURVNIRUVUXCIsXG4gICAgQVVESU8gPSBcIkFVRElPXCIsXG4gICAgSlNPTiA9IFwiSlNPTlwiLFxuICAgIFNIQURFUiA9IFwiU0hBREVSXCJcbn1cblxuLyoqXG4gKiBBIHBhaXIgcmVwcmVzZW50aW5nIGEga2V5IGFuZCB0aGUgcGF0aCBvZiB0aGUgcmVzb3VyY2UgdG8gbG9hZFxuICovXG5jbGFzcyBLZXlQYXRoUGFpciB7XG4gICAga2V5OiBzdHJpbmc7XG4gICAgcGF0aDogc3RyaW5nO1xuICAgIGlzRGVwZW5kZW5jeT86IGJvb2xlYW4gPSBmYWxzZTtcbn1cblxuY2xhc3MgS2V5UGF0aF9TaGFkZXIge1xuICAgIGtleTogc3RyaW5nO1xuICAgIHZwYXRoOiBzdHJpbmc7XG4gICAgZnBhdGg6IHN0cmluZztcbn0iLCJpbXBvcnQgU2NlbmUgZnJvbSBcIi4uL1NjZW5lXCI7XG5pbXBvcnQgVUlFbGVtZW50IGZyb20gXCIuLi8uLi9Ob2Rlcy9VSUVsZW1lbnRcIjtcbmltcG9ydCBHcmFwaGljIGZyb20gXCIuLi8uLi9Ob2Rlcy9HcmFwaGljXCI7XG5pbXBvcnQgU3ByaXRlIGZyb20gXCIuLi8uLi9Ob2Rlcy9TcHJpdGVzL1Nwcml0ZVwiO1xuaW1wb3J0IEFuaW1hdGVkU3ByaXRlIGZyb20gXCIuLi8uLi9Ob2Rlcy9TcHJpdGVzL0FuaW1hdGVkU3ByaXRlXCI7XG5pbXBvcnQgeyBHcmFwaGljVHlwZSB9IGZyb20gXCIuLi8uLi9Ob2Rlcy9HcmFwaGljcy9HcmFwaGljVHlwZXNcIjtcbmltcG9ydCB7IFVJRWxlbWVudFR5cGUgfSBmcm9tIFwiLi4vLi4vTm9kZXMvVUlFbGVtZW50cy9VSUVsZW1lbnRUeXBlc1wiO1xuaW1wb3J0IFBvaW50IGZyb20gXCIuLi8uLi9Ob2Rlcy9HcmFwaGljcy9Qb2ludFwiO1xuaW1wb3J0IFZlYzIgZnJvbSBcIi4uLy4uL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgQnV0dG9uIGZyb20gXCIuLi8uLi9Ob2Rlcy9VSUVsZW1lbnRzL0J1dHRvblwiO1xuaW1wb3J0IExhYmVsIGZyb20gXCIuLi8uLi9Ob2Rlcy9VSUVsZW1lbnRzL0xhYmVsXCI7XG5pbXBvcnQgU2xpZGVyIGZyb20gXCIuLi8uLi9Ob2Rlcy9VSUVsZW1lbnRzL1NsaWRlclwiO1xuaW1wb3J0IFRleHRJbnB1dCBmcm9tIFwiLi4vLi4vTm9kZXMvVUlFbGVtZW50cy9UZXh0SW5wdXRcIjtcbmltcG9ydCBSZWN0IGZyb20gXCIuLi8uLi9Ob2Rlcy9HcmFwaGljcy9SZWN0XCI7XG5pbXBvcnQgUmVzb3VyY2VNYW5hZ2VyIGZyb20gXCIuLi8uLi9SZXNvdXJjZU1hbmFnZXIvUmVzb3VyY2VNYW5hZ2VyXCI7XG5pbXBvcnQgTGluZSBmcm9tIFwiLi4vLi4vTm9kZXMvR3JhcGhpY3MvTGluZVwiO1xuaW1wb3J0IFBhcnRpY2xlIGZyb20gXCIuLi8uLi9Ob2Rlcy9HcmFwaGljcy9QYXJ0aWNsZVwiO1xuaW1wb3J0IFNwcml0ZXNoZWV0IGZyb20gXCIuLi8uLi9EYXRhVHlwZXMvU3ByaXRlc2hlZXRcIjtcblxuLy8gQGlnbm9yZVBhZ2VcblxuLyoqXG4gKiBBIGZhY3RvcnkgdGhhdCBhYnN0cmFjdHMgYWRkaW5nIEByZWZlcmVuY2VbQ2FudmFzTm9kZV1zIHRvIHRoZSBAcmVmZXJlbmNlW1NjZW5lXS5cbiAqIEFjY2VzcyBtZXRob2RzIGluIHRoaXMgZmFjdG9yeSB0aHJvdWdoIFNjZW5lLmFkZC5bbWV0aG9kTmFtZV0oKS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FudmFzTm9kZUZhY3Rvcnkge1xuXHRwcm90ZWN0ZWQgc2NlbmU6IFNjZW5lO1xuXHRwcm90ZWN0ZWQgcmVzb3VyY2VNYW5hZ2VyOiBSZXNvdXJjZU1hbmFnZXI7XG5cblx0aW5pdChzY2VuZTogU2NlbmUpOiB2b2lkIHtcblx0XHR0aGlzLnNjZW5lID0gc2NlbmU7XG5cdFx0dGhpcy5yZXNvdXJjZU1hbmFnZXIgPSBSZXNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBZGRzIGFuIGluc3RhbmNlIG9mIGEgVUlFbGVtZW50IHRvIHRoZSBjdXJyZW50IHNjZW5lIC0gaS5lLiBhbnkgY2xhc3MgdGhhdCBleHRlbmRzIFVJRWxlbWVudFxuXHQgKiBAcGFyYW0gdHlwZSBUaGUgdHlwZSBvZiBVSUVsZW1lbnQgdG8gYWRkXG5cdCAqIEBwYXJhbSBsYXllck5hbWUgVGhlIGxheWVyIHRvIGFkZCB0aGUgVUlFbGVtZW50IHRvXG5cdCAqIEBwYXJhbSBvcHRpb25zIEFueSBhZGRpdGlvbmFsIGFyZ3VtZW50cyB0byBmZWVkIHRvIHRoZSBjb25zdHJ1Y3RvclxuXHQgKiBAcmV0dXJucyBBIG5ldyBVSUVsZW1lbnRcblx0ICovXG5cdGFkZFVJRWxlbWVudCA9ICh0eXBlOiBzdHJpbmcgfCBVSUVsZW1lbnRUeXBlLCBsYXllck5hbWU6IHN0cmluZywgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIGFueT4pOiBVSUVsZW1lbnQgPT4ge1xuXHRcdC8vIEdldCB0aGUgbGF5ZXJcblx0XHRsZXQgbGF5ZXIgPSB0aGlzLnNjZW5lLmdldExheWVyKGxheWVyTmFtZSk7XG5cblx0XHRsZXQgaW5zdGFuY2U6IFVJRWxlbWVudDtcblxuXHRcdHN3aXRjaCh0eXBlKXtcblx0XHRcdGNhc2UgVUlFbGVtZW50VHlwZS5CVVRUT046XG5cdFx0XHRcdGluc3RhbmNlID0gdGhpcy5idWlsZEJ1dHRvbihvcHRpb25zKTtcblx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBVSUVsZW1lbnRUeXBlLkxBQkVMOlxuXHRcdFx0XHRpbnN0YW5jZSA9IHRoaXMuYnVpbGRMYWJlbChvcHRpb25zKTtcblx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBVSUVsZW1lbnRUeXBlLlNMSURFUjpcblx0XHRcdFx0aW5zdGFuY2UgPSB0aGlzLmJ1aWxkU2xpZGVyKG9wdGlvbnMpO1xuXHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFVJRWxlbWVudFR5cGUuVEVYVF9JTlBVVDpcblx0XHRcdFx0aW5zdGFuY2UgPSB0aGlzLmJ1aWxkVGV4dElucHV0KG9wdGlvbnMpO1xuXHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHR0aHJvdyBgVUlFbGVtZW50VHlwZSAnJHt0eXBlfScgZG9lcyBub3QgZXhpc3QsIG9yIGlzIHJlZ2lzdGVyZWQgaW5jb3JyZWN0bHkuYFxuXHRcdH1cblxuXHRcdGluc3RhbmNlLnNldFNjZW5lKHRoaXMuc2NlbmUpO1xuXHRcdGluc3RhbmNlLmlkID0gdGhpcy5zY2VuZS5nZW5lcmF0ZUlkKCk7XG5cdFx0dGhpcy5zY2VuZS5nZXRTY2VuZUdyYXBoKCkuYWRkTm9kZShpbnN0YW5jZSk7XG5cblx0XHQvLyBBZGQgaW5zdGFuY2UgdG8gbGF5ZXJcblx0XHRsYXllci5hZGROb2RlKGluc3RhbmNlKVxuXG5cdFx0cmV0dXJuIGluc3RhbmNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFkZHMgYSBzcHJpdGUgdG8gdGhlIGN1cnJlbnQgc2NlbmVcblx0ICogQHBhcmFtIGtleSBUaGUga2V5IG9mIHRoZSBpbWFnZSB0aGUgc3ByaXRlIHdpbGwgcmVwcmVzZW50XG5cdCAqIEBwYXJhbSBsYXllck5hbWUgVGhlIGxheWVyIG9uIHdoaWNoIHRvIGFkZCB0aGUgc3ByaXRlXG5cdCAqIEByZXR1cm5zIEEgbmV3IFNwcml0ZVxuXHQgKi9cblx0YWRkU3ByaXRlID0gKGtleTogc3RyaW5nLCBsYXllck5hbWU6IHN0cmluZyk6IFNwcml0ZSA9PiB7XG5cdFx0bGV0IGxheWVyID0gdGhpcy5zY2VuZS5nZXRMYXllcihsYXllck5hbWUpO1xuXG5cdFx0bGV0IGluc3RhbmNlID0gbmV3IFNwcml0ZShrZXkpO1xuXG5cdFx0Ly8gQWRkIGluc3RhbmNlIHRvIHNjZW5lXG5cdFx0aW5zdGFuY2Uuc2V0U2NlbmUodGhpcy5zY2VuZSk7XG5cdFx0aW5zdGFuY2UuaWQgPSB0aGlzLnNjZW5lLmdlbmVyYXRlSWQoKTtcblxuXHRcdGlmKCEodGhpcy5zY2VuZS5pc1BhcmFsbGF4TGF5ZXIobGF5ZXJOYW1lKSB8fCB0aGlzLnNjZW5lLmlzVUlMYXllcihsYXllck5hbWUpKSl7XG5cdFx0XHR0aGlzLnNjZW5lLmdldFNjZW5lR3JhcGgoKS5hZGROb2RlKGluc3RhbmNlKTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gQWRkIGluc3RhbmNlIHRvIGxheWVyXG5cdFx0bGF5ZXIuYWRkTm9kZShpbnN0YW5jZSk7XG5cblx0XHRyZXR1cm4gaW5zdGFuY2U7XG5cdH1cblxuXHQvKipcblx0ICogQWRkcyBhbiBBbmltYXRlZFNwcml0ZSB0byB0aGUgY3VycmVudCBzY2VuZVxuXHQgKiBAcGFyYW0ga2V5IFRoZSBrZXkgb2YgdGhlIGltYWdlIHRoZSBzcHJpdGUgd2lsbCByZXByZXNlbnRcblx0ICogQHBhcmFtIGxheWVyTmFtZSBUaGUgbGF5ZXIgb24gd2hpY2ggdG8gYWRkIHRoZSBzcHJpdGVcblx0ICogQHJldHVybnMgQSBuZXcgQW5pbWF0ZWRTcHJpdGVcblx0ICovXG5cdGFkZEFuaW1hdGVkU3ByaXRlID0gPFQgZXh0ZW5kcyBBbmltYXRlZFNwcml0ZT4oY29uc3RyOiBuZXcgKHM6IFNwcml0ZXNoZWV0KSA9PiBULCBrZXk6IHN0cmluZywgbGF5ZXJOYW1lOiBzdHJpbmcpOiBUID0+IHtcblx0XHRsZXQgbGF5ZXIgPSB0aGlzLnNjZW5lLmdldExheWVyKGxheWVyTmFtZSk7XG5cdFx0bGV0IHNwcml0ZXNoZWV0ID0gdGhpcy5yZXNvdXJjZU1hbmFnZXIuZ2V0U3ByaXRlc2hlZXQoa2V5KTtcblx0XHRsZXQgaW5zdGFuY2UgPSBuZXcgY29uc3RyKHNwcml0ZXNoZWV0KTtcblxuXHRcdC8vIEFkZCBpbnN0YW5jZSBmbyBzY2VuZVxuXHRcdGluc3RhbmNlLnNldFNjZW5lKHRoaXMuc2NlbmUpO1xuXHRcdGluc3RhbmNlLmlkID0gdGhpcy5zY2VuZS5nZW5lcmF0ZUlkKCk7XG5cdFx0XG5cdFx0aWYoISh0aGlzLnNjZW5lLmlzUGFyYWxsYXhMYXllcihsYXllck5hbWUpIHx8IHRoaXMuc2NlbmUuaXNVSUxheWVyKGxheWVyTmFtZSkpKXtcblx0XHRcdHRoaXMuc2NlbmUuZ2V0U2NlbmVHcmFwaCgpLmFkZE5vZGUoaW5zdGFuY2UpO1xuXHRcdH1cblxuXHRcdC8vIEFkZCBpbnN0YW5jZSB0byBsYXllclxuXHRcdGxheWVyLmFkZE5vZGUoaW5zdGFuY2UpO1xuXG5cdFx0cmV0dXJuIGluc3RhbmNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFkZHMgYSBuZXcgZ3JhcGhpYyBlbGVtZW50IHRvIHRoZSBjdXJyZW50IFNjZW5lXG5cdCAqIEBwYXJhbSB0eXBlIFRoZSB0eXBlIG9mIGdyYXBoaWMgdG8gYWRkXG5cdCAqIEBwYXJhbSBsYXllck5hbWUgVGhlIGxheWVyIG9uIHdoaWNoIHRvIGFkZCB0aGUgZ3JhcGhpY1xuXHQgKiBAcGFyYW0gb3B0aW9ucyBBbnkgYWRkaXRpb25hbCBhcmd1bWVudHMgdG8gc2VuZCB0byB0aGUgZ3JhcGhpYyBjb25zdHJ1Y3RvclxuXHQgKiBAcmV0dXJucyBBIG5ldyBHcmFwaGljXG5cdCAqL1xuXHRhZGRHcmFwaGljID0gKHR5cGU6IEdyYXBoaWNUeXBlIHwgc3RyaW5nLCBsYXllck5hbWU6IHN0cmluZywgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIGFueT4pOiBHcmFwaGljID0+IHtcblx0XHQvLyBHZXQgdGhlIGxheWVyXG5cdFx0bGV0IGxheWVyID0gdGhpcy5zY2VuZS5nZXRMYXllcihsYXllck5hbWUpO1xuXG5cdFx0bGV0IGluc3RhbmNlOiBHcmFwaGljO1xuXG5cdFx0c3dpdGNoKHR5cGUpe1xuXHRcdFx0Y2FzZSBHcmFwaGljVHlwZS5QT0lOVDpcblx0XHRcdFx0aW5zdGFuY2UgPSB0aGlzLmJ1aWxkUG9pbnQob3B0aW9ucyk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBHcmFwaGljVHlwZS5MSU5FOlxuXHRcdFx0XHRpbnN0YW5jZSA9IHRoaXMuYnVpbGRMaW5lKG9wdGlvbnMpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgR3JhcGhpY1R5cGUuUkVDVDpcblx0XHRcdFx0aW5zdGFuY2UgPSB0aGlzLmJ1aWxkUmVjdChvcHRpb25zKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIEdyYXBoaWNUeXBlLlBBUlRJQ0xFOlxuXHRcdFx0XHRpbnN0YW5jZSA9IHRoaXMuYnVpbGRQYXJ0aWNsZShvcHRpb25zKTtcblx0XHRcdFx0YnJlYWs7XHRcdFx0XHRcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHRocm93IGBHcmFwaGljVHlwZSAnJHt0eXBlfScgZG9lcyBub3QgZXhpc3QsIG9yIGlzIHJlZ2lzdGVyZWQgaW5jb3JyZWN0bHkuYFxuXHRcdH1cblxuXHRcdC8vIEFkZCBpbnN0YW5jZSB0byBzY2VuZVxuXHRcdGluc3RhbmNlLnNldFNjZW5lKHRoaXMuc2NlbmUpO1xuXHRcdGluc3RhbmNlLmlkID0gdGhpcy5zY2VuZS5nZW5lcmF0ZUlkKCk7XG5cblx0XHRpZighKHRoaXMuc2NlbmUuaXNQYXJhbGxheExheWVyKGxheWVyTmFtZSkgfHwgdGhpcy5zY2VuZS5pc1VJTGF5ZXIobGF5ZXJOYW1lKSkpe1xuXHRcdFx0dGhpcy5zY2VuZS5nZXRTY2VuZUdyYXBoKCkuYWRkTm9kZShpbnN0YW5jZSk7XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIGluc3RhbmNlIHRvIGxheWVyXG5cdFx0bGF5ZXIuYWRkTm9kZShpbnN0YW5jZSk7XG5cblx0XHRyZXR1cm4gaW5zdGFuY2U7XG5cdH1cblxuXHQvKiAtLS0tLS0tLS0tIEJVSUxERVJTIC0tLS0tLS0tLS0gKi9cblxuXHRidWlsZEJ1dHRvbihvcHRpb25zPzogUmVjb3JkPHN0cmluZywgYW55Pik6IEJ1dHRvbiB7XG5cdFx0dGhpcy5jaGVja0lmUHJvcEV4aXN0cyhcIkJ1dHRvblwiLCBvcHRpb25zLCBcInBvc2l0aW9uXCIsIFZlYzIsIFwiVmVjMlwiKTtcblx0XHR0aGlzLmNoZWNrSWZQcm9wRXhpc3RzKFwiQnV0dG9uXCIsIG9wdGlvbnMsIFwidGV4dFwiLCBcInN0cmluZ1wiKTtcblxuXHRcdHJldHVybiBuZXcgQnV0dG9uKG9wdGlvbnMucG9zaXRpb24sIG9wdGlvbnMudGV4dCk7XG5cdH1cblxuXHRidWlsZExhYmVsKG9wdGlvbnM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogTGFiZWwge1xuXHRcdHRoaXMuY2hlY2tJZlByb3BFeGlzdHMoXCJMYWJlbFwiLCBvcHRpb25zLCBcInBvc2l0aW9uXCIsIFZlYzIsIFwiVmVjMlwiKTtcblx0XHR0aGlzLmNoZWNrSWZQcm9wRXhpc3RzKFwiTGFiZWxcIiwgb3B0aW9ucywgXCJ0ZXh0XCIsIFwic3RyaW5nXCIpO1xuXG5cdFx0cmV0dXJuIG5ldyBMYWJlbChvcHRpb25zLnBvc2l0aW9uLCBvcHRpb25zLnRleHQpXG5cdH1cblxuXHRidWlsZFNsaWRlcihvcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogU2xpZGVyIHtcblx0XHR0aGlzLmNoZWNrSWZQcm9wRXhpc3RzKFwiU2xpZGVyXCIsIG9wdGlvbnMsIFwicG9zaXRpb25cIiwgVmVjMiwgXCJWZWMyXCIpO1xuXG5cdFx0bGV0IGluaXRWYWx1ZSA9IDA7XG5cdFx0aWYob3B0aW9ucy52YWx1ZSAhPT0gdW5kZWZpbmVkKXtcblx0XHRcdGluaXRWYWx1ZSA9IG9wdGlvbnMudmFsdWU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG5ldyBTbGlkZXIob3B0aW9ucy5wb3NpdGlvbiwgaW5pdFZhbHVlKTtcblx0fVxuXG5cdGJ1aWxkVGV4dElucHV0KG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIGFueT4pOiBUZXh0SW5wdXQge1xuXHRcdHRoaXMuY2hlY2tJZlByb3BFeGlzdHMoXCJUZXh0SW5wdXRcIiwgb3B0aW9ucywgXCJwb3NpdGlvblwiLCBWZWMyLCBcIlZlYzJcIik7XG5cblx0XHRyZXR1cm4gbmV3IFRleHRJbnB1dChvcHRpb25zLnBvc2l0aW9uKTtcblx0fVxuXG5cdGJ1aWxkUG9pbnQob3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIGFueT4pOiBQb2ludCB7XG5cdFx0dGhpcy5jaGVja0lmUHJvcEV4aXN0cyhcIlBvaW50XCIsIG9wdGlvbnMsIFwicG9zaXRpb25cIiwgVmVjMiwgXCJWZWMyXCIpO1xuXG5cdFx0cmV0dXJuIG5ldyBQb2ludChvcHRpb25zLnBvc2l0aW9uKTtcblx0fVxuXG5cdGJ1aWxkUGFydGljbGUob3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIGFueT4pOiBQb2ludCB7XG5cdFx0dGhpcy5jaGVja0lmUHJvcEV4aXN0cyhcIlBhcnRpY2xlXCIsIG9wdGlvbnMsIFwicG9zaXRpb25cIiwgVmVjMiwgXCJWZWMyXCIpO1xuXHRcdHRoaXMuY2hlY2tJZlByb3BFeGlzdHMoXCJQYXJ0aWNsZVwiLCBvcHRpb25zLCBcInNpemVcIiwgVmVjMiwgXCJWZWMyXCIpO1xuXHRcdHRoaXMuY2hlY2tJZlByb3BFeGlzdHMoXCJQYXJ0aWNsZVwiLCBvcHRpb25zLCBcIm1hc3NcIiwgXCJudW1iZXJcIiwgXCJudW1iZXJcIik7XG5cblx0XHQvL0NoYW5nZWQgZm9yIHRlc3Rpbmdcblx0XHRyZXR1cm4gbmV3IFBhcnRpY2xlKG9wdGlvbnMucG9zaXRpb24sIG9wdGlvbnMuc2l6ZSwgb3B0aW9ucy5tYXNzKTtcblx0fVxuXG5cdGJ1aWxkTGluZShvcHRpb25zPzogUmVjb3JkPHN0cmluZywgYW55Pik6IFBvaW50IHtcblx0XHR0aGlzLmNoZWNrSWZQcm9wRXhpc3RzKFwiTGluZVwiLCBvcHRpb25zLCBcInN0YXJ0XCIsIFZlYzIsIFwiVmVjMlwiKTtcblx0XHR0aGlzLmNoZWNrSWZQcm9wRXhpc3RzKFwiTGluZVwiLCBvcHRpb25zLCBcImVuZFwiLCBWZWMyLCBcIlZlYzJcIik7XG5cblx0XHRyZXR1cm4gbmV3IExpbmUob3B0aW9ucy5zdGFydCwgb3B0aW9ucy5lbmQpO1xuXHR9XG5cblx0YnVpbGRSZWN0KG9wdGlvbnM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogUmVjdCB7XG5cdFx0dGhpcy5jaGVja0lmUHJvcEV4aXN0cyhcIlJlY3RcIiwgb3B0aW9ucywgXCJwb3NpdGlvblwiLCBWZWMyLCBcIlZlYzJcIik7XG5cdFx0dGhpcy5jaGVja0lmUHJvcEV4aXN0cyhcIlJlY3RcIiwgb3B0aW9ucywgXCJzaXplXCIsIFZlYzIsIFwiVmVjMlwiKTtcblxuXHRcdHJldHVybiBuZXcgUmVjdChvcHRpb25zLnBvc2l0aW9uLCBvcHRpb25zLnNpemUpO1xuXHR9XG5cblx0LyogLS0tLS0tLS0tLSBFUlJPUiBIQU5ETElORyAtLS0tLS0tLS0tICovXG5cblx0Y2hlY2tJZlByb3BFeGlzdHM8VD4ob2JqZWN0TmFtZTogc3RyaW5nLCBvcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBwcm9wOiBzdHJpbmcsIHR5cGU6IChuZXcgKC4uLmFyZ3M6IGFueSkgPT4gVCkgfCBzdHJpbmcsIHR5cGVOYW1lPzogc3RyaW5nKXtcblx0XHRpZighb3B0aW9ucyB8fCBvcHRpb25zW3Byb3BdID09PSB1bmRlZmluZWQpe1xuXHRcdFx0Ly8gQ2hlY2sgdGhhdCB0aGUgb3B0aW9ucyBvYmplY3QgaGFzIHRoZSBwcm9wZXJ0eVxuXHRcdFx0dGhyb3cgYCR7b2JqZWN0TmFtZX0gb2JqZWN0IHJlcXVpcmVzIGFyZ3VtZW50ICR7cHJvcH0gb2YgdHlwZSAke3R5cGVOYW1lfSwgYnV0IG5vbmUgd2FzIHByb3ZpZGVkLmA7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIENoZWNrIHRoYXQgdGhlIHByb3BlcnR5IGhhcyB0aGUgY29ycmVjdCB0eXBlXG5cdFx0XHRpZigodHlwZW9mIHR5cGUpID09PSBcInN0cmluZ1wiKXtcblx0XHRcdFx0aWYoISh0eXBlb2Ygb3B0aW9uc1twcm9wXSA9PT0gdHlwZSkpe1xuXHRcdFx0XHRcdHRocm93IGAke29iamVjdE5hbWV9IG9iamVjdCByZXF1aXJlcyBhcmd1bWVudCAke3Byb3B9IG9mIHR5cGUgJHt0eXBlfSwgYnV0IHByb3ZpZGVkICR7cHJvcH0gd2FzIG5vdCBvZiB0eXBlICR7dHlwZX0uYDtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmKHR5cGUgaW5zdGFuY2VvZiBGdW5jdGlvbil7XG5cdFx0XHRcdC8vIElmIHR5cGUgaXMgYSBjb25zdHJ1Y3RvciwgY2hlY2sgYWdhaW5zdCB0aGF0XG5cdFx0XHRcdGlmKCEob3B0aW9uc1twcm9wXSBpbnN0YW5jZW9mIHR5cGUpKXtcblx0XHRcdFx0XHR0aHJvdyBgJHtvYmplY3ROYW1lfSBvYmplY3QgcmVxdWlyZXMgYXJndW1lbnQgJHtwcm9wfSBvZiB0eXBlICR7dHlwZU5hbWV9LCBidXQgcHJvdmlkZWQgJHtwcm9wfSB3YXMgbm90IG9mIHR5cGUgJHt0eXBlTmFtZX0uYDtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhyb3cgYCR7b2JqZWN0TmFtZX0gb2JqZWN0IHJlcXVpcmVzIGFyZ3VtZW50ICR7cHJvcH0gb2YgdHlwZSAke3R5cGVOYW1lfSwgYnV0IHByb3ZpZGVkICR7cHJvcH0gd2FzIG5vdCBvZiB0eXBlICR7dHlwZU5hbWV9LmA7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59IiwiaW1wb3J0IFNjZW5lIGZyb20gXCIuLi9TY2VuZVwiO1xuaW1wb3J0IENhbnZhc05vZGVGYWN0b3J5IGZyb20gXCIuL0NhbnZhc05vZGVGYWN0b3J5XCI7XG5pbXBvcnQgVGlsZW1hcEZhY3RvcnkgZnJvbSBcIi4vVGlsZW1hcEZhY3RvcnlcIjtcbmltcG9ydCBUaWxlbWFwIGZyb20gXCIuLi8uLi9Ob2Rlcy9UaWxlbWFwXCI7XG5pbXBvcnQgeyBVSUVsZW1lbnRUeXBlIH0gZnJvbSBcIi4uLy4uL05vZGVzL1VJRWxlbWVudHMvVUlFbGVtZW50VHlwZXNcIjtcbmltcG9ydCBVSUVsZW1lbnQgZnJvbSBcIi4uLy4uL05vZGVzL1VJRWxlbWVudFwiO1xuaW1wb3J0IFNwcml0ZSBmcm9tIFwiLi4vLi4vTm9kZXMvU3ByaXRlcy9TcHJpdGVcIjtcbmltcG9ydCB7IEdyYXBoaWNUeXBlIH0gZnJvbSBcIi4uLy4uL05vZGVzL0dyYXBoaWNzL0dyYXBoaWNUeXBlc1wiO1xuaW1wb3J0IEdyYXBoaWMgZnJvbSBcIi4uLy4uL05vZGVzL0dyYXBoaWNcIjtcbmltcG9ydCBBbmltYXRlZFNwcml0ZSBmcm9tIFwiLi4vLi4vTm9kZXMvU3ByaXRlcy9BbmltYXRlZFNwcml0ZVwiO1xuaW1wb3J0IFZlYzIgZnJvbSBcIi4uLy4uL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgTGF5ZXIgZnJvbSBcIi4uL0xheWVyXCI7XG5pbXBvcnQgU3ByaXRlc2hlZXQgZnJvbSBcIi4uLy4uL0RhdGFUeXBlcy9TcHJpdGVzaGVldFwiO1xuXG4vKipcbiAqIFRoZSBtYW5hZ2VyIG9mIGFsbCBmYWN0b3JpZXMgdXNlZCBmb3IgYWRkaW5nIEByZWZlcmVuY2VbR2FtZU5vZGVdcyB0byB0aGUgQHJlZmVyZW5jZVtTY2VuZV0uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZhY3RvcnlNYW5hZ2VyIHtcblxuICAgIC8vIENvbnN0cnVjdG9ycyBhcmUgY2FsbGVkIGhlcmUgdG8gYWxsb3cgYXNzaWdubWVudCBvZiB0aGVpciBmdW5jdGlvbnMgdG8gZnVuY3Rpb25zIGluIHRoaXMgY2xhc3NcbiAgICBwcml2YXRlIGNhbnZhc05vZGVGYWN0b3J5OiBDYW52YXNOb2RlRmFjdG9yeSA9IG5ldyBDYW52YXNOb2RlRmFjdG9yeSgpO1xuICAgIHByaXZhdGUgdGlsZW1hcEZhY3Rvcnk6IFRpbGVtYXBGYWN0b3J5ID0gbmV3IFRpbGVtYXBGYWN0b3J5KCk7XG5cbiAgICBjb25zdHJ1Y3RvcihzY2VuZTogU2NlbmUsIHRpbGVtYXBzOiBBcnJheTxUaWxlbWFwPil7XG4gICAgICAgIHRoaXMuY2FudmFzTm9kZUZhY3RvcnkuaW5pdChzY2VuZSk7XG4gICAgICAgIHRoaXMudGlsZW1hcEZhY3RvcnkuaW5pdChzY2VuZSwgdGlsZW1hcHMpO1xuICAgIH1cblxuICAgIC8vIEV4cG9zZSBhbGwgb2YgdGhlIGZhY3RvcmllcyB0aHJvdWdoIHRoZSBmYWN0b3J5IG1hbmFnZXJcbiAgICAvKipcblx0ICogQWRkcyBhbiBpbnN0YW5jZSBvZiBhIFVJRWxlbWVudCB0byB0aGUgY3VycmVudCBzY2VuZSAtIGkuZS4gYW55IGNsYXNzIHRoYXQgZXh0ZW5kcyBVSUVsZW1lbnRcblx0ICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgb2YgVUlFbGVtZW50IHRvIGFkZFxuXHQgKiBAcGFyYW0gbGF5ZXJOYW1lIFRoZSBsYXllciB0byBhZGQgdGhlIFVJRWxlbWVudCB0b1xuXHQgKiBAcGFyYW0gb3B0aW9ucyBBbnkgYWRkaXRpb25hbCBhcmd1bWVudHMgdG8gZmVlZCB0byB0aGUgY29uc3RydWN0b3Jcblx0ICogQHJldHVybnMgQSBuZXcgVUlFbGVtZW50XG5cdCAqL1xuICAgIHVpRWxlbWVudCh0eXBlOiBzdHJpbmcgfCBVSUVsZW1lbnRUeXBlLCBsYXllck5hbWU6IHN0cmluZywgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIGFueT4pOiBVSUVsZW1lbnQge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW52YXNOb2RlRmFjdG9yeS5hZGRVSUVsZW1lbnQodHlwZSwgbGF5ZXJOYW1lLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICAvKipcblx0ICogQWRkcyBhIHNwcml0ZSB0byB0aGUgY3VycmVudCBzY2VuZVxuXHQgKiBAcGFyYW0ga2V5IFRoZSBrZXkgb2YgdGhlIGltYWdlIHRoZSBzcHJpdGUgd2lsbCByZXByZXNlbnRcblx0ICogQHBhcmFtIGxheWVyTmFtZSBUaGUgbGF5ZXIgb24gd2hpY2ggdG8gYWRkIHRoZSBzcHJpdGVcblx0ICogQHJldHVybnMgQSBuZXcgU3ByaXRlXG5cdCAqL1xuXHRzcHJpdGUoa2V5OiBzdHJpbmcsIGxheWVyTmFtZTogc3RyaW5nKTogU3ByaXRlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FudmFzTm9kZUZhY3RvcnkuYWRkU3ByaXRlKGtleSwgbGF5ZXJOYW1lKTtcbiAgICB9XG5cbiAgICAvKipcblx0ICogQWRkcyBhbiBBbmltYXRlZFNwcml0ZSB0byB0aGUgY3VycmVudCBzY2VuZVxuXHQgKiBAcGFyYW0ga2V5IFRoZSBrZXkgb2YgdGhlIGltYWdlIHRoZSBzcHJpdGUgd2lsbCByZXByZXNlbnRcblx0ICogQHBhcmFtIGxheWVyTmFtZSBUaGUgbGF5ZXIgb24gd2hpY2ggdG8gYWRkIHRoZSBzcHJpdGVcblx0ICogQHJldHVybnMgQSBuZXcgQW5pbWF0ZWRTcHJpdGVcblx0ICovXG5cdGFuaW1hdGVkU3ByaXRlPFQgZXh0ZW5kcyBBbmltYXRlZFNwcml0ZT4oY29uc3RyOiBuZXcgKHM6IFNwcml0ZXNoZWV0KSA9PiBULCBrZXk6IHN0cmluZywgbGF5ZXJOYW1lOiBzdHJpbmcpOiBUIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FudmFzTm9kZUZhY3RvcnkuYWRkQW5pbWF0ZWRTcHJpdGUoY29uc3RyLCBrZXksIGxheWVyTmFtZSk7XG4gICAgfVxuXG4gICAgLyoqXG5cdCAqIEFkZHMgYSBuZXcgZ3JhcGhpYyBlbGVtZW50IHRvIHRoZSBjdXJyZW50IFNjZW5lXG5cdCAqIEBwYXJhbSB0eXBlIFRoZSB0eXBlIG9mIGdyYXBoaWMgdG8gYWRkXG5cdCAqIEBwYXJhbSBsYXllck5hbWUgVGhlIGxheWVyIG9uIHdoaWNoIHRvIGFkZCB0aGUgZ3JhcGhpY1xuXHQgKiBAcGFyYW0gb3B0aW9ucyBBbnkgYWRkaXRpb25hbCBhcmd1bWVudHMgdG8gc2VuZCB0byB0aGUgZ3JhcGhpYyBjb25zdHJ1Y3RvclxuXHQgKiBAcmV0dXJucyBBIG5ldyBHcmFwaGljXG5cdCAqL1xuXHRncmFwaGljKHR5cGU6IEdyYXBoaWNUeXBlIHwgc3RyaW5nLCBsYXllck5hbWU6IHN0cmluZywgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIGFueT4pOiBHcmFwaGljIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FudmFzTm9kZUZhY3RvcnkuYWRkR3JhcGhpYyh0eXBlLCBsYXllck5hbWUsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSB0aWxlbWFwIHRvIHRoZSBzY2VuZVxuICAgICAqIEBwYXJhbSBrZXkgVGhlIGtleSBvZiB0aGUgbG9hZGVkIHRpbGVtYXAgdG8gbG9hZFxuICAgICAqIEBwYXJhbSBjb25zdHIgVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBkZXNpcmVkIHRpbGVtYXBcbiAgICAgKiBAcGFyYW0gYXJncyBBZGRpdGlvbmFsIGFyZ3VtZW50cyB0byBzZW5kIHRvIHRoZSB0aWxlbWFwIGNvbnN0cnVjdG9yXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2YgTGF5ZXJzLCBlYWNoIG9mIHdoaWNoIGNvbnRhaW5zIGEgbGF5ZXIgb2YgdGhlIHRpbGVtYXAgYXMgaXRzIG93biBUaWxlbWFwIGluc3RhbmNlLlxuICAgICAqL1xuXHR0aWxlbWFwKGtleTogc3RyaW5nLCBzY2FsZT86IFZlYzIpOiBBcnJheTxMYXllcj4ge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlbWFwRmFjdG9yeS5hZGQoa2V5LCBzY2FsZSk7XG4gICAgfVxufSIsImltcG9ydCBTY2VuZSBmcm9tIFwiLi4vU2NlbmVcIjtcbmltcG9ydCBUaWxlbWFwIGZyb20gXCIuLi8uLi9Ob2Rlcy9UaWxlbWFwXCI7XG5pbXBvcnQgUmVzb3VyY2VNYW5hZ2VyIGZyb20gXCIuLi8uLi9SZXNvdXJjZU1hbmFnZXIvUmVzb3VyY2VNYW5hZ2VyXCI7XG5pbXBvcnQgT3J0aG9nb25hbFRpbGVtYXAgZnJvbSBcIi4uLy4uL05vZGVzL1RpbGVtYXBzL09ydGhvZ29uYWxUaWxlbWFwXCI7XG5pbXBvcnQgTGF5ZXIgZnJvbSBcIi4uL0xheWVyXCI7XG5pbXBvcnQgVGlsZXNldCBmcm9tIFwiLi4vLi4vRGF0YVR5cGVzL1RpbGVzZXRzL1RpbGVzZXRcIjtcbmltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IHsgVGlsZWRDb2xsZWN0aW9uVGlsZSB9IGZyb20gXCIuLi8uLi9EYXRhVHlwZXMvVGlsZXNldHMvVGlsZWREYXRhXCI7XG5pbXBvcnQgU3ByaXRlIGZyb20gXCIuLi8uLi9Ob2Rlcy9TcHJpdGVzL1Nwcml0ZVwiO1xuaW1wb3J0IFBvc2l0aW9uR3JhcGggZnJvbSBcIi4uLy4uL0RhdGFUeXBlcy9HcmFwaHMvUG9zaXRpb25HcmFwaFwiO1xuaW1wb3J0IE5hdm1lc2ggZnJvbSBcIi4uLy4uL1BhdGhmaW5kaW5nL05hdm1lc2hcIjtcbmltcG9ydCBJc29tZXRyaWNUaWxlbWFwIGZyb20gXCIuLi8uLi9Ob2Rlcy9UaWxlbWFwcy9Jc29tZXRyaWNUaWxlbWFwXCI7XG5pbXBvcnQgU3RhZ2dlcmVkSXNvbWV0cmljVGlsZW1hcCBmcm9tIFwiLi4vLi4vTm9kZXMvVGlsZW1hcHMvU3RhZ2dlcmVkSXNvbWV0cmljVGlsZW1hcFwiO1xuXG4vLyBAaWdub3JlUGFnZVxuZXhwb3J0IGVudW0gVGlsZW1hcE9yaWVudGF0aW9uIHtcbiAgICBPUlRIT0dPTkFMID0gXCJvcnRob2dvbmFsXCIsXG4gICAgSVNPTUVUUklDID0gXCJpc29tZXRyaWNcIixcbiAgICBTVEFHR0VSRURfSVNPTUVUUklDID0gXCJzdGFnZ2VyZWRcIlxufVxuXG5cbi8qKlxuICogQSBmYWN0b3J5IHRoYXQgYWJzdHJhY3RzIGFkZGluZyBAcmVmZXJlbmNlW1RpbGVtYXBdcyB0byB0aGUgQHJlZmVyZW5jZVtTY2VuZV0uXG4gKiBBY2Nlc3MgbWV0aG9kcyBpbiB0aGlzIGZhY3RvcnkgdGhyb3VnaCBTY2VuZS5hZGQuW21ldGhvZE5hbWVdKCkuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpbGVtYXBGYWN0b3J5IHtcbiAgICBwcml2YXRlIHNjZW5lOiBTY2VuZTtcbiAgICBwcml2YXRlIHRpbGVtYXBzOiBBcnJheTxUaWxlbWFwPjtcbiAgICBwcml2YXRlIHJlc291cmNlTWFuYWdlcjogUmVzb3VyY2VNYW5hZ2VyO1xuICAgIFxuICAgIGluaXQoc2NlbmU6IFNjZW5lLCB0aWxlbWFwczogQXJyYXk8VGlsZW1hcD4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuICAgICAgICB0aGlzLnRpbGVtYXBzID0gdGlsZW1hcHM7XG4gICAgICAgIHRoaXMucmVzb3VyY2VNYW5hZ2VyID0gUmVzb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG4gICAgfVxuXG4gICAgLy8gVE9ETyAtIFRoaXMgaXMgc3BlY2lmaWNhbGx5IGNhdGVyZWQgdG8gVGlsZWQgdGlsZW1hcHMgcmlnaHQgbm93LiBJbiB0aGUgZnV0dXJlLFxuICAgIC8vIGl0IHdvdWxkIGJlIGdvb2QgdG8gaGF2ZSBhIFwicGFyc2VUaWxlbWFwXCIgZnVuY3Rpb24gdGhhdCB3b3VsZCBjb252ZXJ0IHRoZSB0aWxlbWFwXG4gICAgLy8gZGF0YSBpbnRvIGEgc3RhbmRhcmQgZm9ybWF0LiBUaGlzIGNvdWxkIGFsbG93IGZvciBzdXBwb3J0IGZyb20gb3RoZXIgcHJvZ3JhbXNcbiAgICAvLyBvciB0aGUgZGV2ZWxvcG1lbnQgb2YgYW4gaW50ZXJuYWwgbGV2ZWwgYnVpbGRlciB0b29sXG4gICAgLyoqXG4gICAgICogQWRkcyBhIHRpbGVtYXAgdG8gdGhlIHNjZW5lXG4gICAgICogQHBhcmFtIGtleSBUaGUga2V5IG9mIHRoZSBsb2FkZWQgdGlsZW1hcCB0byBsb2FkXG4gICAgICogQHBhcmFtIGNvbnN0ciBUaGUgY29uc3RydWN0b3Igb2YgdGhlIGRlc2lyZWQgdGlsZW1hcFxuICAgICAqIEBwYXJhbSBhcmdzIEFkZGl0aW9uYWwgYXJndW1lbnRzIHRvIHNlbmQgdG8gdGhlIHRpbGVtYXAgY29uc3RydWN0b3JcbiAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiBMYXllcnMsIGVhY2ggb2Ygd2hpY2ggY29udGFpbnMgYSBsYXllciBvZiB0aGUgdGlsZW1hcCBhcyBpdHMgb3duIFRpbGVtYXAgaW5zdGFuY2UuXG4gICAgICovXG5cdGFkZCA9IChrZXk6IHN0cmluZywgc2NhbGU6IFZlYzIgPSBuZXcgVmVjMigxLCAxKSk6IEFycmF5PExheWVyPiA9PiB7XG4gICAgICAgIC8vIEdldCBUaWxlbWFwIERhdGFcbiAgICAgICAgbGV0IHRpbGVtYXBEYXRhID0gdGhpcy5yZXNvdXJjZU1hbmFnZXIuZ2V0VGlsZW1hcChrZXkpO1xuXG4gICAgICAgIC8vIFNldCB0aGUgY29uc3RydWN0b3IgZm9yIHRoaXMgdGlsZW1hcCB0byBlaXRoZXIgYmUgb3J0aG9ncmFwaGljIG9yIGlzb21ldHJpY1xuICAgICAgICBsZXQgY29uc3RyOiBuZXcoLi4uYXJnczogYW55KSA9PiBUaWxlbWFwO1xuXG4gICAgICAgIHN3aXRjaCh0aWxlbWFwRGF0YS5vcmllbnRhdGlvbikge1xuICAgICAgICAgICAgY2FzZSBUaWxlbWFwT3JpZW50YXRpb24uT1JUSE9HT05BTDoge1xuICAgICAgICAgICAgICAgIGNvbnN0ciA9IE9ydGhvZ29uYWxUaWxlbWFwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBUaWxlbWFwT3JpZW50YXRpb24uSVNPTUVUUklDOiB7XG4gICAgICAgICAgICAgICAgY29uc3RyID0gSXNvbWV0cmljVGlsZW1hcDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgVGlsZW1hcE9yaWVudGF0aW9uLlNUQUdHRVJFRF9JU09NRVRSSUM6IHtcbiAgICAgICAgICAgICAgICBjb25zdHIgPSBTdGFnZ2VyZWRJc29tZXRyaWNUaWxlbWFwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBUaWxlbWFwIE9yaWVudGF0aW9uIFwiJHt0aWxlbWFwRGF0YS5vcmllbnRhdGlvbn1cImApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgcmV0dXJuIHZhbHVlIGFycmF5XG4gICAgICAgIGxldCBzY2VuZUxheWVycyA9IG5ldyBBcnJheTxMYXllcj4oKTtcblxuICAgICAgICAvLyBDcmVhdGUgYWxsIG9mIHRoZSB0aWxlc2V0cyBmb3IgdGhpcyB0aWxlbWFwXG4gICAgICAgIGxldCB0aWxlc2V0cyA9IG5ldyBBcnJheTxUaWxlc2V0PigpO1xuXG4gICAgICAgIGxldCBjb2xsZWN0aW9uVGlsZXMgPSBuZXcgQXJyYXk8VGlsZWRDb2xsZWN0aW9uVGlsZT4oKTtcblxuICAgICAgICBmb3IobGV0IHRpbGVzZXQgb2YgdGlsZW1hcERhdGEudGlsZXNldHMpe1xuICAgICAgICAgICAgaWYodGlsZXNldC5pbWFnZSl7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBhIHN0YW5kYXJkIHRpbGVzZXQgYW5kIG5vdCBhIGNvbGxlY3Rpb24sIGNyZWF0ZSBhIHRpbGVzZXQgZm9yIGl0LlxuICAgICAgICAgICAgICAgIC8vIFRPRE8gLSBXZSBhcmUgaWdub3JpbmcgY29sbGVjdGlvbiB0aWxlc2V0cyBmb3Igbm93LiBUaGlzIGlzIGxpa2VseSBub3QgYSBncmVhdCBpZGVhIGluIHByYWN0aWNlLFxuICAgICAgICAgICAgICAgIC8vIGFzIHRoZW9yZXRpY2FsbHkgc29tZW9uZSBjb3VsZCB3YW50IHRvIHVzZSBvbmUgZm9yIGEgc3RhbmRhcmQgdGlsZW1hcC4gV2UgYXJlIGFzc3VtaW5nIGZvciBub3dcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHdlIG9ubHkgd2FudCB0byB1c2UgdGhlbSBmb3Igb2JqZWN0IGxheWVyc1xuICAgICAgICAgICAgICAgIHRpbGVzZXRzLnB1c2gobmV3IFRpbGVzZXQodGlsZXNldCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aWxlc2V0LnRpbGVzLmZvckVhY2godGlsZSA9PiB0aWxlLmlkICs9IHRpbGVzZXQuZmlyc3RnaWQpO1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25UaWxlcy5wdXNoKC4uLnRpbGVzZXQudGlsZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gTG9vcCBvdmVyIHRoZSBsYXllcnMgb2YgdGhlIHRpbGVtYXAgYW5kIGNyZWF0ZSB0aWxlZGxheWVycyBvciBvYmplY3QgbGF5ZXJzXG4gICAgICAgIGZvcihsZXQgbGF5ZXIgb2YgdGlsZW1hcERhdGEubGF5ZXJzKXtcblxuICAgICAgICAgICAgbGV0IHNjZW5lTGF5ZXI7XG4gICAgICAgICAgICBsZXQgaXNQYXJhbGxheExheWVyID0gZmFsc2U7XG4gICAgICAgICAgICBsZXQgZGVwdGggPSAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihsYXllci5wcm9wZXJ0aWVzKXtcbiAgICAgICAgICAgICAgICBmb3IobGV0IHByb3Agb2YgbGF5ZXIucHJvcGVydGllcyl7XG4gICAgICAgICAgICAgICAgICAgIGlmKHByb3AubmFtZSA9PT0gXCJQYXJhbGxheFwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUGFyYWxsYXhMYXllciA9IHByb3AudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihwcm9wLm5hbWUgPT09IFwiRGVwdGhcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVwdGggPSBwcm9wLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihpc1BhcmFsbGF4TGF5ZXIpe1xuICAgICAgICAgICAgICAgIHNjZW5lTGF5ZXIgPSB0aGlzLnNjZW5lLmFkZFBhcmFsbGF4TGF5ZXIobGF5ZXIubmFtZSwgbmV3IFZlYzIoMSwgMSksIGRlcHRoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2NlbmVMYXllciA9IHRoaXMuc2NlbmUuYWRkTGF5ZXIobGF5ZXIubmFtZSwgZGVwdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihsYXllci50eXBlID09PSBcInRpbGVsYXllclwiKXtcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgdGlsZW1hcCBvYmplY3QgZm9yIHRoZSBsYXllclxuICAgICAgICAgICAgICAgIGxldCB0aWxlbWFwID0gbmV3IGNvbnN0cih0aWxlbWFwRGF0YSwgbGF5ZXIsIHRpbGVzZXRzLCBzY2FsZSk7XG4gICAgICAgICAgICAgICAgdGlsZW1hcC5pZCA9IHRoaXMuc2NlbmUuZ2VuZXJhdGVJZCgpO1xuICAgICAgICAgICAgICAgIHRpbGVtYXAuc2V0U2NlbmUodGhpcy5zY2VuZSk7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gQWRkIHRpbGVtYXAgdG8gc2NlbmVcbiAgICAgICAgICAgICAgICB0aGlzLnRpbGVtYXBzLnB1c2godGlsZW1hcCk7XG4gICAgXG4gICAgICAgICAgICAgICAgc2NlbmVMYXllci5hZGROb2RlKHRpbGVtYXApO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIFJlZ2lzdGVyIHRpbGVtYXAgd2l0aCBwaHlzaWNzIGlmIGl0J3MgY29sbGlkYWJsZVxuICAgICAgICAgICAgICAgIGlmKHRpbGVtYXAuaXNDb2xsaWRhYmxlKXtcbiAgICAgICAgICAgICAgICAgICAgdGlsZW1hcC5hZGRQaHlzaWNzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYobGF5ZXIucHJvcGVydGllcyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGl0ZW0gb2YgbGF5ZXIucHJvcGVydGllcyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXRlbS5uYW1lID09PSBcIkdyb3VwXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlbWFwLnNldEdyb3VwKGl0ZW0udmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICBsZXQgaXNOYXZtZXNoUG9pbnRzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbGV0IG5hdm1lc2hOYW1lO1xuICAgICAgICAgICAgICAgIGxldCBlZGdlcztcbiAgICAgICAgICAgICAgICBpZihsYXllci5wcm9wZXJ0aWVzKXtcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBwcm9wIG9mIGxheWVyLnByb3BlcnRpZXMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYocHJvcC5uYW1lID09PSBcIk5hdm1lc2hQb2ludHNcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOYXZtZXNoUG9pbnRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihwcm9wLm5hbWUgPT09IFwibmFtZVwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZtZXNoTmFtZSA9IHByb3AudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYocHJvcC5uYW1lID09PSBcImVkZ2VzXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VzID0gcHJvcC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmKGlzTmF2bWVzaFBvaW50cyl7XG4gICAgICAgICAgICAgICAgICAgIGxldCBnID0gbmV3IFBvc2l0aW9uR3JhcGgoKTtcblxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IG9iaiBvZiBsYXllci5vYmplY3RzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGcuYWRkUG9zaXRpb25lZE5vZGUobmV3IFZlYzIob2JqLngsIG9iai55KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGVkZ2Ugb2YgZWRnZXMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgZy5hZGRFZGdlKGVkZ2UuZnJvbSwgZWRnZS50byk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmdldE5hdmlnYXRpb25NYW5hZ2VyKCkuYWRkTmF2aWdhYmxlRW50aXR5KG5hdm1lc2hOYW1lLCBuZXcgTmF2bWVzaChnKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gTGF5ZXIgaXMgYW4gb2JqZWN0IGxheWVyLCBzbyBhZGQgZWFjaCBvYmplY3QgYXMgYSBzcHJpdGUgdG8gYSBuZXcgbGF5ZXJcbiAgICAgICAgICAgICAgICBmb3IobGV0IG9iaiBvZiBsYXllci5vYmplY3RzKXtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgb2JqIGlzIGNvbGxpZGFibGVcbiAgICAgICAgICAgICAgICAgICAgbGV0IGhhc1BoeXNpY3MgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGlzQ29sbGlkYWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaXNUcmlnZ2VyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGxldCBvbkVudGVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9uRXhpdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0cmlnZ2VyR3JvdXAgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZ3JvdXAgPSBcIlwiO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKG9iai5wcm9wZXJ0aWVzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgcHJvcCBvZiBvYmoucHJvcGVydGllcyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocHJvcC5uYW1lID09PSBcIkhhc1BoeXNpY3NcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc1BoeXNpY3MgPSBwcm9wLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihwcm9wLm5hbWUgPT09IFwiQ29sbGlkYWJsZVwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNDb2xsaWRhYmxlID0gcHJvcC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYocHJvcC5uYW1lID09PSBcIkdyb3VwXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cCA9IHByb3AudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKHByb3AubmFtZSA9PT0gXCJJc1RyaWdnZXJcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVHJpZ2dlciA9IHByb3AudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKHByb3AubmFtZSA9PT0gXCJUcmlnZ2VyR3JvdXBcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXJHcm91cCA9IHByb3AudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKHByb3AubmFtZSA9PT0gXCJUcmlnZ2VyT25FbnRlclwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FbnRlciA9IHByb3AudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKHByb3AubmFtZSA9PT0gXCJUcmlnZ2VyT25FeGl0XCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkV4aXQgPSBwcm9wLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGxldCBzcHJpdGU6IFNwcml0ZTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBvYmogaXMgYSB0aWxlIGZyb20gYSB0aWxlc2V0XG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgdGlsZXNldCBvZiB0aWxlc2V0cyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0aWxlc2V0Lmhhc1RpbGUob2JqLmdpZCkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBvYmplY3QgaXMgYSB0aWxlIGZyb20gdGhpcyBzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1hZ2VLZXkgPSB0aWxlc2V0LmdldEltYWdlS2V5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9mZnNldCA9IHRpbGVzZXQuZ2V0SW1hZ2VPZmZzZXRGb3JUaWxlKG9iai5naWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcml0ZSA9IHRoaXMuc2NlbmUuYWRkLnNwcml0ZShpbWFnZUtleSwgbGF5ZXIubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNpemUgPSB0aWxlc2V0LmdldFRpbGVTaXplKCkuY2xvbmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJpdGUucG9zaXRpb24uc2V0KChvYmoueCArIHNpemUueC8yKSpzY2FsZS54LCAob2JqLnkgLSBzaXplLnkvMikqc2NhbGUueSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByaXRlLnNldEltYWdlT2Zmc2V0KG9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByaXRlLnNpemUuY29weShzaXplKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJpdGUuc2NhbGUuc2V0KHNjYWxlLngsIHNjYWxlLnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gTm90IGluIGEgdGlsZXNldCwgbXVzdCBjb3JyZXNwb25kIHRvIGEgY29sbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICBpZighc3ByaXRlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgdGlsZSBvZiBjb2xsZWN0aW9uVGlsZXMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9iai5naWQgPT09IHRpbGUuaWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1hZ2VLZXkgPSB0aWxlLmltYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJpdGUgPSB0aGlzLnNjZW5lLmFkZC5zcHJpdGUoaW1hZ2VLZXksIGxheWVyLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJpdGUucG9zaXRpb24uc2V0KChvYmoueCArIHRpbGUuaW1hZ2V3aWR0aC8yKSpzY2FsZS54LCAob2JqLnkgLSB0aWxlLmltYWdlaGVpZ2h0LzIpKnNjYWxlLnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJpdGUuc2NhbGUuc2V0KHNjYWxlLngsIHNjYWxlLnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vdyB3ZSBoYXZlIHNwcml0ZS4gQXNzb2NpYXRlIGl0IHdpdGggb3VyIHBoeXNpY3Mgb2JqZWN0IGlmIHRoZXJlIGlzIG9uZVxuICAgICAgICAgICAgICAgICAgICBpZihoYXNQaHlzaWNzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1ha2UgdGhlIHNwcml0ZSBhIHN0YXRpYyBwaHlzaWNzIG9iamVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgc3ByaXRlLmFkZFBoeXNpY3Moc3ByaXRlLmJvdW5kYXJ5LmNsb25lKCksIFZlYzIuWkVSTywgaXNDb2xsaWRhYmxlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwcml0ZS5zZXRHcm91cChncm91cCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpc1RyaWdnZXIgJiYgdHJpZ2dlckdyb3VwICE9PSBudWxsKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJpdGUuc2V0VHJpZ2dlcih0cmlnZ2VyR3JvdXAsIG9uRW50ZXIsIG9uRXhpdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgcmV0dXJuIHZhbHVlXG4gICAgICAgICAgICBzY2VuZUxheWVycy5wdXNoKHNjZW5lTGF5ZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNjZW5lTGF5ZXJzO1xuXHR9XG59IiwiaW1wb3J0IFNjZW5lIGZyb20gXCIuL1NjZW5lXCI7XG5pbXBvcnQgTWF0aFV0aWxzIGZyb20gXCIuLi9VdGlscy9NYXRoVXRpbHNcIjtcbmltcG9ydCBHYW1lTm9kZSBmcm9tIFwiLi4vTm9kZXMvR2FtZU5vZGVcIjtcblxuXG4vKipcbiAqIEEgbGF5ZXIgaW4gdGhlIHNjZW5lLiBMYXllcnMgYXJlIHVzZWQgZm9yIHNvcnRpbmcgQHJlZmVyZW5jZVtHYW1lTm9kZV1zIGJ5IGRlcHRoLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMYXllciB7XG4gICAgLyoqIFRoZSBzY2VuZSB0aGlzIGxheWVyIGJlbG9uZ3MgdG8gKi9cbiAgICBwcm90ZWN0ZWQgc2NlbmU6IFNjZW5lO1xuXG4gICAgLyoqIFRoZSBuYW1lIG9mIHRoaXMgbGF5ZXIgKi9cbiAgICBwcm90ZWN0ZWQgbmFtZTogc3RyaW5nO1xuXG4gICAgLyoqIFdoZXRoZXIgdGhpcyBsYXllciBpcyBwYXVzZWQgb3Igbm90ICovXG4gICAgcHJvdGVjdGVkIHBhdXNlZDogYm9vbGVhbjtcblxuICAgIC8qKiBXaGV0aGVyIHRoaXMgbGF5ZXIgaXMgaGlkZGVuIGZyb20gYmVpbmcgcmVuZGVyZWQgb3Igbm90ICovXG4gICAgcHJvdGVjdGVkIGhpZGRlbjogYm9vbGVhbjtcblxuICAgIC8qKiBUaGUgZ2xvYmFsIGFscGhhIGxldmVsIG9mIHRoaXMgbGF5ZXIgKi9cbiAgICBwcm90ZWN0ZWQgYWxwaGE6IG51bWJlcjtcblxuICAgIC8qKiBBbiBhcnJheSBvZiB0aGUgR2FtZU5vZGVzIHRoYXQgYmVsb25nIHRvIHRoaXMgbGF5ZXIgKi9cbiAgICBwcm90ZWN0ZWQgaXRlbXM6IEFycmF5PEdhbWVOb2RlPjtcblxuICAgIC8qKiBXaGV0aGVyIG9yIG5vdCB0aGlzIGxheWVyIHNob3VsZCBiZSB5c29ydGVkICovXG4gICAgcHJvdGVjdGVkIHlTb3J0OiBib29sZWFuO1xuXG4gICAgLyoqIFRoZSBkZXB0aCBvZiB0aGlzIGxheWVyIGNvbXBhcmVkIHRvIG90aGVyIGxheWVycyAqL1xuICAgIHByb3RlY3RlZCBkZXB0aDogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBsYXllci4gVG8gZG8gdGhpcyBpbiBhIGdhbWUsIHVzZSB0aGUgYWRkTGF5ZXIoKSBtZXRob2QgaW4gQHJlZnJlbmNlW1NjZW5lXVxuICAgICAqIEBwYXJhbSBzY2VuZSBUaGUgc2NlbmUgdG8gYWRkIHRoZSBsYXllciB0b1xuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBsYXllclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNjZW5lOiBTY2VuZSwgbmFtZTogc3RyaW5nKXtcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFscGhhID0gMTtcbiAgICAgICAgdGhpcy5pdGVtcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB0aGlzLnlTb3J0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZGVwdGggPSAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJlaXZlcyB0aGUgbmFtZSBvZiB0aGUgbGF5ZXJcbiAgICAgKiBAcmV0dXJucyBUaGUgbmFtZSBvZiB0aGUgbGF5ZXJcbiAgICAgKi9cbiAgICBnZXROYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGF1c2VzL1VucGF1c2VzIHRoZSBsYXllci4gQWZmZWN0cyBhbGwgZWxlbWVudHMgaW4gdGhpcyBsYXllclxuICAgICAqIEBwYXJhbSBwYXVzZVZhbHVlIFRydWUgaWYgdGhlIGxheWVyIHNob3VsZCBiZSBwYXVzZWQsIGZhbHNlIGlmIG5vdFxuICAgICAqL1xuICAgIHNldFBhdXNlZChwYXVzZVZhbHVlOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIHRoaXMucGF1c2VkID0gcGF1c2VWYWx1ZTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgbGF5ZXIgaXMgcGF1c2VkXG4gICAgICovXG4gICAgaXNQYXVzZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdXNlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBvcGFjaXR5IG9mIHRoZSBsYXllclxuICAgICAqIEBwYXJhbSBhbHBoYSBUaGUgbmV3IG9wYWNpdHkgdmFsdWUgaW4gdGhlIHJhbmdlIFswLCAxXVxuICAgICAqL1xuICAgIHNldEFscGhhKGFscGhhOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hbHBoYSA9IE1hdGhVdGlscy5jbGFtcChhbHBoYSwgMCwgMSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgb3BhY2l0eSBvZiB0aGUgbGF5ZXJcbiAgICAgKiBAcmV0dXJucyBUaGUgb3BhY2l0eVxuICAgICAqL1xuICAgIGdldEFscGhhKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmFscGhhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGxheWVyJ3MgaGlkZGVuIHZhbHVlLiBJZiBoaWRkZW4sIGEgbGF5ZXIgd2lsbCBub3QgYmUgcmVuZGVyZWQsIGJ1dCB3aWxsIHN0aWxsIHVwZGF0ZVxuICAgICAqIEBwYXJhbSBoaWRkZW4gVGhlIGhpZGRlbiB2YWx1ZSBvZiB0aGUgbGF5ZXJcbiAgICAgKi9cbiAgICBzZXRIaWRkZW4oaGlkZGVuOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaGlkZGVuID0gaGlkZGVuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGhpZGVlbiB2YWx1ZSBvZiB0aGUgbHlhZXJcbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBzY2VuZSBpcyBoaWRkZW4sIGZhbHNlIG90aGVyd2lzZVxuICAgICAqL1xuICAgIGlzSGlkZGVuKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5oaWRkZW47XG4gICAgfVxuXG4gICAgLyoqIFBhdXNlcyB0aGlzIHNjZW5lIGFuZCBoaWRlcyBpdCAqL1xuICAgIGRpc2FibGUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5oaWRkZW4gPSB0cnVlO1xuICAgIH1cblxuICAgIC8qKiBVbnBhdXNlcyB0aGlzIGxheWVyIGFuZCBtYWtlcyBpdCB2aXNpYmxlICovXG4gICAgZW5hYmxlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhpZGRlbiA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgd2hldGhlciBvciBub3QgdGhlIHNjZW5lIHdpbGwgeVNvcnQgYXV0b21hdGljYWxseS5cbiAgICAgKiB5U29ydGluZyBtZWFucyB0aGF0IENhbnZhc05vZGVzIG9uIHRoaXMgbGF5ZXIgd2lsbCBoYXZlIHRoZWlyIGRlcHRoIHNvcnRlZCBkZXBlbmRpbmcgb24gdGhlaXIgeS12YWx1ZS5cbiAgICAgKiBUaGlzIG1lYW5zIHRoYXQgaWYgYW4gb2JqZWN0IGlzIFwiaGlnaGVyXCIgaW4gdGhlIHNjZW5lLCBpdCB3aWxsIHNvcnQgYmVoaW5kIG9iamVjdHMgdGhhdCBhcmUgXCJsb3dlclwiLlxuICAgICAqIFRoaXMgaXMgdXNlZnVsIGZvciAzLzQgdmlldyBnYW1lcywgb3Igc2ltaWxhciBzaXR1YXRpb25zLCB3aGVyZSB5b3Ugc29tZXRpbWVzIHdhbnQgdG8gYmUgaW4gZnJvbnQgb2Ygb2JqZWN0cyxcbiAgICAgKiBhbmQgb3RoZXIgdGltZXMgd2FudCB0byBiZSBiZWhpbmQgdGhlIHNhbWUgb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0geVNvcnQgVHJ1ZSBpZiB5U29ydGluZyBzaG91bGQgYmUgYWN0aXZlLCBmYWxzZSBpZiBub3RcbiAgICAgKi9cbiAgICBzZXRZU29ydCh5U29ydDogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICB0aGlzLnlTb3J0ID0geVNvcnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgeVNvcnQgc3RhdHVzIG9mIHRoZSBzY2VuZVxuICAgICAqIEByZXR1cm5zIFRydWUgaWYgeVNvcnRpbmcgaXMgb2NjdXJyaW5nLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBnZXRZU29ydCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueVNvcnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZGVwdGggb2YgdGhlIGxheWVyIGNvbXBhcmVkIHRvIG90aGVyIGxheWVycy4gQSBsYXJnZXIgbnVtYmVyIG1lYW5zIHRoZSBsYXllciB3aWxsIGJlIGNsb3NlciB0byB0aGUgc2NyZWVuLlxuICAgICAqIEBwYXJhbSBkZXB0aCBUaGUgZGVwdGggb2YgdGhlIGxheWVyLlxuICAgICAqL1xuICAgIHNldERlcHRoKGRlcHRoOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kZXB0aCA9IGRlcHRoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgZGVwdGggb2YgdGhlIGxheWVyLlxuICAgICAqIEByZXR1cm5zIFRoZSBkZXB0aFxuICAgICAqL1xuICAgIGdldERlcHRoKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlcHRoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBub2RlIHRvIHRoaXMgbGF5ZXJcbiAgICAgKiBAcGFyYW0gbm9kZSBUaGUgbm9kZSB0byBhZGQgdG8gdGhpcyBsYXllci5cbiAgICAgKi9cbiAgICBhZGROb2RlKG5vZGU6IEdhbWVOb2RlKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaXRlbXMucHVzaChub2RlKTtcbiAgICAgICAgbm9kZS5zZXRMYXllcih0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgbm9kZSBmcm9tIHRoaXMgbGF5ZXJcbiAgICAgKiBAcGFyYW0gbm9kZSBUaGUgbm9kZSB0byByZW1vdmVcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBub2RlIHdhcyByZW1vdmVkLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICByZW1vdmVOb2RlKG5vZGU6IEdhbWVOb2RlKTogdm9pZCB7XG4gICAgICAgIC8vIEZpbmQgYW5kIHJlbW92ZSB0aGUgbm9kZVxuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLml0ZW1zLmluZGV4T2Yobm9kZSk7XG5cbiAgICAgICAgaWYoaW5kZXggIT09IC0xKXtcbiAgICAgICAgICAgIHRoaXMuaXRlbXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIG5vZGUuc2V0TGF5ZXIodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJlaXZlcyBhbGwgR2FtZU5vZGVzIGZyb20gdGhpcyBsYXllclxuICAgICAqIEByZXR1cm5zIGFuIEFycmF5IHRoYXQgY29udGFpbnMgYWxsIG9mIHRoZSBHYW1lTm9kZXMgaW4gdGhpcyBsYXllci5cbiAgICAgKi9cbiAgICBnZXRJdGVtcygpOiBBcnJheTxHYW1lTm9kZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcztcbiAgICB9XG59IiwiaW1wb3J0IExheWVyIGZyb20gXCIuLi9MYXllclwiO1xuaW1wb3J0IFZlYzIgZnJvbSBcIi4uLy4uL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgU2NlbmUgZnJvbSBcIi4uL1NjZW5lXCI7XG5cbi8qKlxuICogQW4gZXh0ZW5zaW9uIG9mIGEgTGF5ZXIgdGhhdCBoYXMgYSBwYXJhbGxheCB2YWx1ZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFyYWxsYXhMYXllciBleHRlbmRzIExheWVyIHtcblx0LyoqIFRoZSB2YWx1ZSBvZiB0aGUgcGFyYWxsYXggb2YgdGhlIExheWVyICovXG5cdHBhcmFsbGF4OiBWZWMyO1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBuZXcgUGFyYWxsYXhMYXllci5cblx0ICogVXNlIGFkZFBhcmFsbGF4TGF5ZXIoKSBpbiBAcmVmZXJlbmNlW1NjZW5lXSB0byBhZGQgYSBsYXllciBvZiB0aGlzIHR5cGUgdG8geW91ciBnYW1lLlxuXHQgKiBAcGFyYW0gc2NlbmUgVGhlIFNjZW5lIHRvIGFkZCB0aGlzIFBhcmFsbGF4TGF5ZXIgdG9cblx0ICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIFBhcmFsbGF4TGF5ZXJcblx0ICogQHBhcmFtIHBhcmFsbGF4IFRoZSBwYXJhbGxheCBsZXZlbFxuXHQgKi9cblx0Y29uc3RydWN0b3Ioc2NlbmU6IFNjZW5lLCBuYW1lOiBzdHJpbmcsIHBhcmFsbGF4OiBWZWMyKXtcblx0XHRzdXBlcihzY2VuZSwgbmFtZSk7XG5cdFx0dGhpcy5wYXJhbGxheCA9IHBhcmFsbGF4O1xuXHR9XG59IiwiaW1wb3J0IFZlYzIgZnJvbSBcIi4uLy4uL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgU2NlbmUgZnJvbSBcIi4uL1NjZW5lXCI7XG5pbXBvcnQgUGFyYWxsYXhMYXllciBmcm9tIFwiLi9QYXJhbGxheExheWVyXCI7XG5cbi8qKlxuICogQSBMYXllciBzdHJpY3RseSB0byBiZSB1c2VkIGZvciBtYW5hZ2luZyBVSUVsZW1lbnRzLlxuICogVGhpcyBpcyBpbnRlbmRlZCB0byBiZSBhIExheWVyIHRoYXQgYWx3YXlzIHN0YXlzIGluIHRoZSBzYW1lIHBsYWNlLFxuICogYW5kIHRodXMgcmVuZGVycyB0aGluZ3MgbGlrZSBhIEhVRCBvciBhbiBpbnZlbnRvcnkgd2l0aG91dCB0YWtpbmcgaW50byBjb25zaWRlcmF0aW9uIHRoZSBcXHJlZmVyZW5jZVtWaWV3cG9ydF0gc2Nyb2xsLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVSUxheWVyIGV4dGVuZHMgUGFyYWxsYXhMYXllciB7XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgbmV3IFVJTGF5ZXIuXG5cdCAqIFVzZSBhZGRVSUxheWVyKCkgaW4gQHJlZmVyZW5jZVtTY2VuZV0gdG8gYWRkIGEgbGF5ZXIgb2YgdGhpcyB0eXBlIHRvIHlvdXIgZ2FtZS5cblx0ICogQHBhcmFtIHNjZW5lIFRoZSBTY2VuZSB0byBhZGQgdGhpcyBVSUxheWVyIHRvXG5cdCAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBVSUxheWVyXG5cdCAqL1xuXHRjb25zdHJ1Y3RvcihzY2VuZTogU2NlbmUsIG5hbWU6IHN0cmluZyl7XG5cdFx0c3VwZXIoc2NlbmUsIG5hbWUsIFZlYzIuWkVSTyk7XG5cdH1cbn0iLCJpbXBvcnQgTGF5ZXIgZnJvbSBcIi4vTGF5ZXJcIjtcbmltcG9ydCBWaWV3cG9ydCBmcm9tIFwiLi4vU2NlbmVHcmFwaC9WaWV3cG9ydFwiO1xuaW1wb3J0IFZlYzIgZnJvbSBcIi4uL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgU2NlbmVHcmFwaCBmcm9tIFwiLi4vU2NlbmVHcmFwaC9TY2VuZUdyYXBoXCI7XG5pbXBvcnQgUGh5c2ljc01hbmFnZXIgZnJvbSBcIi4uL1BoeXNpY3MvUGh5c2ljc01hbmFnZXJcIjtcbmltcG9ydCBCYXNpY1BoeXNpY3NNYW5hZ2VyIGZyb20gXCIuLi9QaHlzaWNzL0Jhc2ljUGh5c2ljc01hbmFnZXJcIjtcbmltcG9ydCBTY2VuZUdyYXBoQXJyYXkgZnJvbSBcIi4uL1NjZW5lR3JhcGgvU2NlbmVHcmFwaEFycmF5XCI7XG5pbXBvcnQgRmFjdG9yeU1hbmFnZXIgZnJvbSBcIi4vRmFjdG9yaWVzL0ZhY3RvcnlNYW5hZ2VyXCI7XG5pbXBvcnQgVGlsZW1hcCBmcm9tIFwiLi4vTm9kZXMvVGlsZW1hcFwiO1xuaW1wb3J0IFJlc291cmNlTWFuYWdlciBmcm9tIFwiLi4vUmVzb3VyY2VNYW5hZ2VyL1Jlc291cmNlTWFuYWdlclwiO1xuaW1wb3J0IEdhbWUgZnJvbSBcIi4uL0xvb3AvR2FtZVwiO1xuaW1wb3J0IFNjZW5lTWFuYWdlciBmcm9tIFwiLi9TY2VuZU1hbmFnZXJcIjtcbmltcG9ydCBSZWNlaXZlciBmcm9tIFwiLi4vRXZlbnRzL1JlY2VpdmVyXCI7XG5pbXBvcnQgRW1pdHRlciBmcm9tIFwiLi4vRXZlbnRzL0VtaXR0ZXJcIjtcbmltcG9ydCBVcGRhdGVhYmxlIGZyb20gXCIuLi9EYXRhVHlwZXMvSW50ZXJmYWNlcy9VcGRhdGVhYmxlXCI7XG5pbXBvcnQgTmF2aWdhdGlvbk1hbmFnZXIgZnJvbSBcIi4uL1BhdGhmaW5kaW5nL05hdmlnYXRpb25NYW5hZ2VyXCI7XG5pbXBvcnQgQUlNYW5hZ2VyIGZyb20gXCIuLi9BSS9BSU1hbmFnZXJcIjtcbmltcG9ydCBNYXAgZnJvbSBcIi4uL0RhdGFUeXBlcy9Db2xsZWN0aW9ucy9NYXBcIjtcbmltcG9ydCBQYXJhbGxheExheWVyIGZyb20gXCIuL0xheWVycy9QYXJhbGxheExheWVyXCI7XG5pbXBvcnQgVUlMYXllciBmcm9tIFwiLi9MYXllcnMvVUlMYXllclwiO1xuaW1wb3J0IENhbnZhc05vZGUgZnJvbSBcIi4uL05vZGVzL0NhbnZhc05vZGVcIjtcbmltcG9ydCBHYW1lTm9kZSBmcm9tIFwiLi4vTm9kZXMvR2FtZU5vZGVcIjtcbmltcG9ydCBTY2VuZU9wdGlvbnMgZnJvbSBcIi4vU2NlbmVPcHRpb25zXCI7XG5pbXBvcnQgUmVuZGVyaW5nTWFuYWdlciBmcm9tIFwiLi4vUmVuZGVyaW5nL1JlbmRlcmluZ01hbmFnZXJcIjtcbmltcG9ydCBEZWJ1ZyBmcm9tIFwiLi4vRGVidWcvRGVidWdcIjtcbmltcG9ydCBUaW1lck1hbmFnZXIgZnJvbSBcIi4uL1RpbWluZy9UaW1lck1hbmFnZXJcIjtcbmltcG9ydCBUd2Vlbk1hbmFnZXIgZnJvbSBcIi4uL1JlbmRlcmluZy9BbmltYXRpb25zL1R3ZWVuTWFuYWdlclwiO1xuaW1wb3J0IFBhcnRpY2xlU3lzdGVtTWFuYWdlciBmcm9tIFwiLi4vUmVuZGVyaW5nL0FuaW1hdGlvbnMvUGFydGljbGVTeXN0ZW1NYW5hZ2VyXCI7XG5cbi8qKlxuICogU2NlbmVzIGFyZSB0aGUgbWFpbiBjb250YWluZXIgaW4gdGhlIGdhbWUgZW5naW5lLlxuICogWW91ciBtYWluIHNjZW5lIGlzIHRoZSBjdXJyZW50IGxldmVsIG9yIG1lbnUgb2YgdGhlIGdhbWUsIGFuZCB3aWxsIGNvbnRhaW4gYWxsIG9mIHRoZSBHYW1lTm9kZXMgbmVlZGVkLlxuICogU2NlbmVzIHByb3ZpZGUgYW4gZWFzeSB3YXkgdG8gbG9hZCBhc3NldHMsIGFkZCBhc3NldHMgdG8gdGhlIGdhbWUgd29ybGQsIGFuZCB1bmxvYWQgYXNzZXRzLFxuICogYW5kIGhhdmUgbGlmZWN5Y2xlIG1ldGhvZHMgZXhwb3NlZCBmb3IgdGhlc2UgZnVuY3Rpb25zLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTY2VuZSBpbXBsZW1lbnRzIFVwZGF0ZWFibGUge1xuICAgIC8qKiBUaGUgc2l6ZSBvZiB0aGUgZ2FtZSB3b3JsZC4gKi9cbiAgICBwcm90ZWN0ZWQgd29ybGRTaXplOiBWZWMyO1xuXG4gICAgLyoqIFRoZSB2aWV3cG9ydC4gKi9cbiAgICBwcm90ZWN0ZWQgdmlld3BvcnQ6IFZpZXdwb3J0O1xuXG4gICAgLyoqIEEgZmxhZyB0aGF0IHJlcHJlc2VudHMgd2hldGhlciB0aGlzIHNjZW5lIGlzIHJ1bm5pbmcgb3Igbm90LiAqL1xuICAgIHByb3RlY3RlZCBydW5uaW5nOiBib29sZWFuO1xuXG4gICAgLyoqIFRoZSBtYW5hZ2VyIG9mIHRoaXMgc2NlbmUuICovXG4gICAgcHJvdGVjdGVkIHNjZW5lTWFuYWdlcjogU2NlbmVNYW5hZ2VyO1xuXG4gICAgLyoqIFRoZSByZWNlaXZlciBmb3IgdGhpcyBzY2VuZS4gKi9cbiAgICBwcm90ZWN0ZWQgcmVjZWl2ZXI6IFJlY2VpdmVyO1xuXG4gICAgLyoqIFRoZSBlbWl0dGVyIGZvciB0aGlzIHNjZW5lLiAqL1xuICAgIHByb3RlY3RlZCBlbWl0dGVyOiBFbWl0dGVyO1xuXG4gICAgLyoqIFRoaXMgbGlzdCBvZiB0aWxlbWFwcyBpbiB0aGlzIHNjZW5lLiAqL1xuICAgIHByb3RlY3RlZCB0aWxlbWFwczogQXJyYXk8VGlsZW1hcD47XG5cbiAgICAvKiogQSBtYXAgZnJvbSBsYXllciBuYW1lcyB0byB0aGUgbGF5ZXJzIHRoZW1zZWx2ZXMgKi9cbiAgICBwcm90ZWN0ZWQgbGF5ZXJzOiBNYXA8TGF5ZXI+O1xuXG4gICAgLyoqIEEgbWFwIGZyb20gcGFyYWxsYXggbGF5ZXIgbmFtZXMgdG8gdGhlIHBhcmFsbGF4IGxheWVycyB0aGVtc2VsdmVzICovXG4gICAgcHJvdGVjdGVkIHBhcmFsbGF4TGF5ZXJzOiBNYXA8UGFyYWxsYXhMYXllcj47XG5cbiAgICAvKiogQSBtYXAgZnJvbSB1aUxheWVyIG5hbWVzIHRvIHRoZSB1aUxheWVycyB0aGVtc2VsdmVzICovXG4gICAgcHJvdGVjdGVkIHVpTGF5ZXJzOiBNYXA8VUlMYXllcj47XG5cbiAgICAvKiogVGhlIHNjZW5lIGdyYXBoIG9mIHRoZSBTY2VuZSovXG4gICAgcHJvdGVjdGVkIHNjZW5lR3JhcGg6IFNjZW5lR3JhcGg7XG5cbiAgICAvKiogVGhlIHBoeXNpY3MgbWFuYWdlciBvZiB0aGUgU2NlbmUgKi9cbiAgICBwcm90ZWN0ZWQgcGh5c2ljc01hbmFnZXI6IFBoeXNpY3NNYW5hZ2VyO1xuICAgIFxuICAgIC8qKiBUaGUgbmF2aWdhdGlvbiBtYW5hZ2VyIG9mIHRoZSBTY2VuZSAqL1xuICAgIHByb3RlY3RlZCBuYXZNYW5hZ2VyOiBOYXZpZ2F0aW9uTWFuYWdlcjtcblxuICAgIC8qKiBUaGUgQUkgbWFuYWdlciBvZiB0aGUgU2NlbmUgKi9cbiAgICBwcm90ZWN0ZWQgYWlNYW5hZ2VyOiBBSU1hbmFnZXI7XG5cbiAgICAvKiogVGhlIHJlbmRlcmluZ01hbmFnZXIgb2YgdGhlIHNjZW5lICovXG4gICAgcHJvdGVjdGVkIHJlbmRlcmluZ01hbmFnZXI6IFJlbmRlcmluZ01hbmFnZXI7XG5cbiAgICAvKiogQW4gaW50ZXJmYWNlIHRoYXQgYWxsb3dzIHRoZSBhZGRpbmcgb2YgZGlmZmVyZW50IG5vZGVzIHRvIHRoZSBzY2VuZSAqL1xuICAgIHB1YmxpYyBhZGQ6IEZhY3RvcnlNYW5hZ2VyO1xuXG4gICAgLyoqIEFuIGludGVyZmFjZSB0aGF0IGFsbG93cyB0aGUgbG9hZGluZyBvZiBkaWZmZXJlbnQgZmlsZXMgZm9yIHVzZSBpbiB0aGUgc2NlbmUuIEFuIGFsaWFzIGZvciByZXNvdXJjZU1hbmFnZXIgKi9cbiAgICBwdWJsaWMgbG9hZDogUmVzb3VyY2VNYW5hZ2VyO1xuXG4gICAgLyoqIEFuIGludGVyZmFjZSB0aGF0IGFsbG93cyB0aGUgbG9hZGluZyBhbmQgdW5sb2FkaW5nIG9mIGRpZmZlcmVudCBmaWxlcyBmb3IgdXNlIGluIHRoZSBzY2VuZSAqL1xuICAgIHB1YmxpYyByZXNvdXJjZU1hbmFnZXI6IFJlc291cmNlTWFuYWdlcjtcblxuICAgIC8qKiBUaGUgY29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGlzIHNjZW5lICovXG4gICAgcHVibGljIHNjZW5lT3B0aW9uczogU2NlbmVPcHRpb25zO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBTY2VuZS4gVG8gYWRkIGEgbmV3IFNjZW5lIGluIHlvdXIgZ2FtZSwgdXNlIGNoYW5nZVRvU2NlbmUoKSBpbiBAcmVmZXJlbmNlW1NjZW5lTWFuYWdlcl1cbiAgICAgKiBAcGFyYW0gdmlld3BvcnQgVGhlIHZpZXdwb3J0IG9mIHRoZSBnYW1lXG4gICAgICogQHBhcmFtIHNjZW5lTWFuYWdlciBUaGUgU2NlbmVNYW5hZ2VyIHRoYXQgb3ducyB0aGlzIFNjZW5lXG4gICAgICogQHBhcmFtIHJlbmRlcmluZ01hbmFnZXIgVGhlIFJlbmRlcmluZ01hbmFnZXIgdGhhdCB3aWxsIGhhbmRsZSB0aGlzIFNjZW5lJ3MgcmVuZGVyaW5nXG4gICAgICogQHBhcmFtIGdhbWUgVGhlIGluc3RhbmNlIG9mIHRoZSBHYW1lXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIG9wdGlvbnMgZm9yIFNjZW5lIGluaXRpYWxpemF0aW9uXG4gICAgICovXG4gICAgY29uc3RydWN0b3Iodmlld3BvcnQ6IFZpZXdwb3J0LCBzY2VuZU1hbmFnZXI6IFNjZW5lTWFuYWdlciwgcmVuZGVyaW5nTWFuYWdlcjogUmVuZGVyaW5nTWFuYWdlciwgb3B0aW9uczogUmVjb3JkPHN0cmluZywgYW55Pil7XG4gICAgICAgIHRoaXMuc2NlbmVPcHRpb25zID0gU2NlbmVPcHRpb25zLnBhcnNlKG9wdGlvbnMgPT09IHVuZGVmaW5lZCA/IHt9IDogb3B0aW9ucyk7XG5cbiAgICAgICAgdGhpcy53b3JsZFNpemUgPSBuZXcgVmVjMig1MDAsIDUwMCk7XG4gICAgICAgIHRoaXMudmlld3BvcnQgPSB2aWV3cG9ydDtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRCb3VuZHMoMCwgMCwgMjU2MCwgMTI4MCk7XG4gICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNjZW5lTWFuYWdlciA9IHNjZW5lTWFuYWdlcjtcbiAgICAgICAgdGhpcy5yZWNlaXZlciA9IG5ldyBSZWNlaXZlcigpO1xuICAgICAgICB0aGlzLmVtaXR0ZXIgPSBuZXcgRW1pdHRlcigpO1xuXG4gICAgICAgIHRoaXMudGlsZW1hcHMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdGhpcy5zY2VuZUdyYXBoID0gbmV3IFNjZW5lR3JhcGhBcnJheSh0aGlzLnZpZXdwb3J0LCB0aGlzKTtcblxuICAgICAgICB0aGlzLmxheWVycyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy51aUxheWVycyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5wYXJhbGxheExheWVycyA9IG5ldyBNYXAoKTtcblxuICAgICAgICB0aGlzLnBoeXNpY3NNYW5hZ2VyID0gbmV3IEJhc2ljUGh5c2ljc01hbmFnZXIodGhpcy5zY2VuZU9wdGlvbnMucGh5c2ljcyk7XG4gICAgICAgIHRoaXMubmF2TWFuYWdlciA9IG5ldyBOYXZpZ2F0aW9uTWFuYWdlcigpO1xuICAgICAgICB0aGlzLmFpTWFuYWdlciA9IG5ldyBBSU1hbmFnZXIoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJpbmdNYW5hZ2VyID0gcmVuZGVyaW5nTWFuYWdlcjtcblxuICAgICAgICB0aGlzLmFkZCA9IG5ldyBGYWN0b3J5TWFuYWdlcih0aGlzLCB0aGlzLnRpbGVtYXBzKTtcblxuICAgICAgICB0aGlzLmxvYWQgPSBSZXNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICAgICAgICB0aGlzLnJlc291cmNlTWFuYWdlciA9IHRoaXMubG9hZDtcblxuICAgICAgICAvLyBHZXQgdGhlIHRpbWVyIG1hbmFnZXIgYW5kIGNsZWFyIGFueSBleGlzdGluZyB0aW1lcnNcbiAgICAgICAgVGltZXJNYW5hZ2VyLmdldEluc3RhbmNlKCkuY2xlYXJUaW1lcnMoKTtcbiAgICB9XG5cbiAgICAvKiogQSBsaWZlY3ljbGUgbWV0aG9kIHRoYXQgZ2V0cyBjYWxsZWQgaW1tZWRpYXRlbHkgYWZ0ZXIgYSBuZXcgc2NlbmUgaXMgY3JlYXRlZCwgYmVmb3JlIGFueXRoaW5nIGVsc2UuICovXG4gICAgaW5pdFNjZW5lKGluaXQ6IFJlY29yZDxzdHJpbmcsIGFueT4pOiB2b2lkIHt9XG5cbiAgICAvKiogQSBsaWZlY3ljbGUgbWV0aG9kIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiBhIG5ldyBzY2VuZSBpcyBjcmVhdGVkLiBMb2FkIGFsbCBmaWxlcyB5b3Ugd2lzaCB0byBhY2Nlc3MgaW4gdGhlIHNjZW5lIGhlcmUuICovXG4gICAgbG9hZFNjZW5lKCk6IHZvaWQge31cblxuICAgIC8qKiBBIGxpZmVjeWNsZSBtZXRob2QgY2FsbGVkIHN0cmljdGx5IGFmdGVyIGxvYWRTY2VuZSgpLiBDcmVhdGUgYW55IGdhbWUgb2JqZWN0cyB5b3Ugd2lzaCB0byB1c2UgaW4gdGhlIHNjZW5lIGhlcmUuICovXG4gICAgc3RhcnRTY2VuZSgpOiB2b2lkIHt9XG5cbiAgICAvKipcbiAgICAgKiBBIGxpZmVjeWNsZSBtZXRob2QgY2FsbGVkIGV2ZXJ5IGZyYW1lIG9mIHRoZSBnYW1lLiBUaGlzIGlzIHdoZXJlIHlvdSBjYW4gZHluYW1pY2FsbHkgZG8gdGhpbmdzIGxpa2UgYWRkIGluIG5ldyBlbmVtaWVzXG4gICAgICogQHBhcmFtIGRlbHRhIFRoZSB0aW1lIHRoaXMgZnJhbWUgcmVwcmVzZW50c1xuICAgICAqL1xuICAgIHVwZGF0ZVNjZW5lKGRlbHRhVDogbnVtYmVyKTogdm9pZCB7fVxuXG4gICAgLyoqIEEgbGlmZWN5Y2xlIG1ldGhvZCB0aGF0IGdldHMgY2FsbGVkIG9uIHNjZW5lIGRlc3RydWN0aW9uLiBTcGVjaWZ5IHdoaWNoIGZpbGVzIHlvdSBubyBsb25nZXIgbmVlZCBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uLiAqL1xuICAgIHVubG9hZFNjZW5lKCk6IHZvaWQge31cblxuICAgIHVwZGF0ZShkZWx0YVQ6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLnVwZGF0ZVNjZW5lKGRlbHRhVCk7XG5cbiAgICAgICAgLy8gRG8gdGltZSB1cGRhdGVzXG4gICAgICAgIFRpbWVyTWFuYWdlci5nZXRJbnN0YW5jZSgpLnVwZGF0ZShkZWx0YVQpO1xuXG4gICAgICAgIC8vIERvIGFsbCBBSSB1cGRhdGVzXG4gICAgICAgIHRoaXMuYWlNYW5hZ2VyLnVwZGF0ZShkZWx0YVQpO1xuXG4gICAgICAgIC8vIFVwZGF0ZSBhbGwgcGh5c2ljcyBvYmplY3RzXG4gICAgICAgIHRoaXMucGh5c2ljc01hbmFnZXIudXBkYXRlKGRlbHRhVCk7XG5cbiAgICAgICAgLy8gVXBkYXRlIGFsbCBjYW52YXMgb2JqZWN0c1xuICAgICAgICB0aGlzLnNjZW5lR3JhcGgudXBkYXRlKGRlbHRhVCk7XG5cbiAgICAgICAgLy8gVXBkYXRlIGFsbCB0aWxlbWFwc1xuICAgICAgICB0aGlzLnRpbGVtYXBzLmZvckVhY2godGlsZW1hcCA9PiB7XG4gICAgICAgICAgICBpZighdGlsZW1hcC5nZXRMYXllcigpLmlzUGF1c2VkKCkpe1xuICAgICAgICAgICAgICAgIHRpbGVtYXAudXBkYXRlKGRlbHRhVCk7XG4gICAgICAgICAgICB9IFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSBhbGwgdHdlZW5zXG4gICAgICAgIFR3ZWVuTWFuYWdlci5nZXRJbnN0YW5jZSgpLnVwZGF0ZShkZWx0YVQpO1xuXG4gICAgICAgIC8vIFVwZGF0ZSBhbGwgcGFydGljbGUgc3lzdGVtc1xuICAgICAgICBQYXJ0aWNsZVN5c3RlbU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS51cGRhdGUoZGVsdGFUKTtcblxuICAgICAgICAvLyBVcGRhdGUgdmlld3BvcnRcbiAgICAgICAgdGhpcy52aWV3cG9ydC51cGRhdGUoZGVsdGFUKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb2xsZWN0cyByZW5kZXJhYmxlIHNldHMgYW5kIGNvb3JkaW5hdGVzIHdpdGggdGhlIFJlbmRlcmluZ01hbmFnZXIgdG8gZHJhdyB0aGUgU2NlbmVcbiAgICAgKi9cbiAgICByZW5kZXIoKTogdm9pZCB7XG4gICAgICAgIC8vIEdldCB0aGUgdmlzaWJsZSBzZXQgb2Ygbm9kZXNcbiAgICAgICAgbGV0IHZpc2libGVTZXQgPSB0aGlzLnNjZW5lR3JhcGguZ2V0VmlzaWJsZVNldCgpO1xuXG4gICAgICAgIC8vIEFkZCBwYXJhbGxheCBsYXllciBpdGVtcyB0byB0aGUgdmlzaWJsZSBzZXQgKHdlJ3JlIHJlbmRlcmluZyB0aGVtIGFsbCBmb3Igbm93KVxuICAgICAgICB0aGlzLnBhcmFsbGF4TGF5ZXJzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIGxldCBwTGF5ZXIgPSB0aGlzLnBhcmFsbGF4TGF5ZXJzLmdldChrZXkpO1xuICAgICAgICAgICAgZm9yKGxldCBub2RlIG9mIHBMYXllci5nZXRJdGVtcygpKXtcbiAgICAgICAgICAgICAgICBpZihub2RlIGluc3RhbmNlb2YgQ2FudmFzTm9kZSl7XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVTZXQucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNlbmQgdGhlIHZpc2libGUgc2V0LCB0aWxlbWFwcywgYW5kIHVpTGF5ZXJzIHRvIHRoZSByZW5kZXJlclxuICAgICAgICB0aGlzLnJlbmRlcmluZ01hbmFnZXIucmVuZGVyKHZpc2libGVTZXQsIHRoaXMudGlsZW1hcHMsIHRoaXMudWlMYXllcnMpO1xuXG4gICAgICAgIGxldCBub2RlcyA9IHRoaXMuc2NlbmVHcmFwaC5nZXRBbGxOb2RlcygpO1xuICAgICAgICB0aGlzLnRpbGVtYXBzLmZvckVhY2godGlsZW1hcCA9PiB0aWxlbWFwLnZpc2libGUgPyBub2Rlcy5wdXNoKHRpbGVtYXApIDogMCk7XG4gICAgICAgIERlYnVnLnNldE5vZGVzKG5vZGVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzY2VuZSBhcyBydW5uaW5nIG9yIG5vdFxuICAgICAqIEBwYXJhbSBydW5uaW5nIFRydWUgaWYgdGhlIFNjZW5lIHNob3VsZCBiZSBydW5uaW5nLCBmYWxzZSBpZiBub3RcbiAgICAgKi9cbiAgICBzZXRSdW5uaW5nKHJ1bm5pbmc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5ydW5uaW5nID0gcnVubmluZztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBTY2VuZSBpcyBydW5uaW5nXG4gICAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgc2NlbmUgaXMgcnVubmluZywgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgaXNSdW5uaW5nKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5ydW5uaW5nO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBub2RlIGZyb20gdGhpcyBTY2VuZVxuICAgICAqIEBwYXJhbSBub2RlIFRoZSBub2RlIHRvIHJlbW92ZVxuICAgICAqL1xuICAgIHJlbW92ZShub2RlOiBHYW1lTm9kZSk6IHZvaWQge1xuICAgICAgICAvLyBSZW1vdmUgZnJvbSB0aGUgc2NlbmUgZ3JhcGhcbiAgICAgICAgaWYobm9kZSBpbnN0YW5jZW9mIENhbnZhc05vZGUpe1xuICAgICAgICAgICAgdGhpcy5zY2VuZUdyYXBoLnJlbW92ZU5vZGUobm9kZSk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIC8qKiBEZXN0cm95cyB0aGlzIHNjZW5lIGFuZCBhbGwgbm9kZXMgaW4gaXQgKi9cbiAgICBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICBmb3IobGV0IG5vZGUgb2YgdGhpcy5zY2VuZUdyYXBoLmdldEFsbE5vZGVzKCkpe1xuICAgICAgICAgICAgbm9kZS5kZXN0cm95KCk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IobGV0IHRpbGVtYXAgb2YgdGhpcy50aWxlbWFwcyl7XG4gICAgICAgICAgICB0aWxlbWFwLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVjZWl2ZXIuZGVzdHJveSgpO1xuXG4gICAgICAgIGRlbGV0ZSB0aGlzLnNjZW5lR3JhcGg7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnBoeXNpY3NNYW5hZ2VyO1xuICAgICAgICBkZWxldGUgdGhpcy5uYXZNYW5hZ2VyO1xuICAgICAgICBkZWxldGUgdGhpcy5haU1hbmFnZXI7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnJlY2VpdmVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgbGF5ZXIgdG8gdGhlIHNjZW5lIGFuZCByZXR1cm5zIGl0XG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIG5ldyBsYXllclxuICAgICAqIEBwYXJhbSBkZXB0aCBUaGUgZGVwdGggb2YgdGhlIGxheWVyXG4gICAgICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgTGF5ZXJcbiAgICAgKi9cbiAgICBhZGRMYXllcihuYW1lOiBzdHJpbmcsIGRlcHRoPzogbnVtYmVyKTogTGF5ZXIge1xuICAgICAgICBpZih0aGlzLmxheWVycy5oYXMobmFtZSkgfHwgdGhpcy5wYXJhbGxheExheWVycy5oYXMobmFtZSkgfHwgdGhpcy51aUxheWVycy5oYXMobmFtZSkpe1xuICAgICAgICAgICAgdGhyb3cgYExheWVyIHdpdGggbmFtZSAke25hbWV9IGFscmVhZHkgZXhpc3RzYDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsYXllciA9IG5ldyBMYXllcih0aGlzLCBuYW1lKTtcblxuICAgICAgICB0aGlzLmxheWVycy5hZGQobmFtZSwgbGF5ZXIpO1xuXG4gICAgICAgIGlmKGRlcHRoKXtcbiAgICAgICAgICAgIGxheWVyLnNldERlcHRoKGRlcHRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBsYXllcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IHBhcmFsbGF4IGxheWVyIHRvIHRoaXMgc2NlbmUgYW5kIHJldHVybnMgaXRcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgcGFyYWxsYXggbGF5ZXJcbiAgICAgKiBAcGFyYW0gcGFyYWxsYXggVGhlIHBhcmFsbGF4IGxldmVsXG4gICAgICogQHBhcmFtIGRlcHRoIFRoZSBkZXB0aCBvZiB0aGUgbGF5ZXJcbiAgICAgKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCBQYXJhbGxheExheWVyXG4gICAgICovXG4gICAgYWRkUGFyYWxsYXhMYXllcihuYW1lOiBzdHJpbmcsIHBhcmFsbGF4OiBWZWMyLCBkZXB0aD86IG51bWJlcik6IFBhcmFsbGF4TGF5ZXIge1xuICAgICAgICBpZih0aGlzLmxheWVycy5oYXMobmFtZSkgfHwgdGhpcy5wYXJhbGxheExheWVycy5oYXMobmFtZSkgfHwgdGhpcy51aUxheWVycy5oYXMobmFtZSkpe1xuICAgICAgICAgICAgdGhyb3cgYExheWVyIHdpdGggbmFtZSAke25hbWV9IGFscmVhZHkgZXhpc3RzYDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsYXllciA9IG5ldyBQYXJhbGxheExheWVyKHRoaXMsIG5hbWUsIHBhcmFsbGF4KTtcblxuICAgICAgICB0aGlzLnBhcmFsbGF4TGF5ZXJzLmFkZChuYW1lLCBsYXllcik7XG5cbiAgICAgICAgaWYoZGVwdGgpe1xuICAgICAgICAgICAgbGF5ZXIuc2V0RGVwdGgoZGVwdGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGxheWVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgVUlMYXllciB0byB0aGUgc2NlbmVcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgbmV3IFVJbGF5ZXJcbiAgICAgKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCBVSUxheWVyXG4gICAgICovXG4gICAgYWRkVUlMYXllcihuYW1lOiBzdHJpbmcpOiBVSUxheWVyIHtcbiAgICAgICAgaWYodGhpcy5sYXllcnMuaGFzKG5hbWUpIHx8IHRoaXMucGFyYWxsYXhMYXllcnMuaGFzKG5hbWUpIHx8IHRoaXMudWlMYXllcnMuaGFzKG5hbWUpKXtcbiAgICAgICAgICAgIHRocm93IGBMYXllciB3aXRoIG5hbWUgJHtuYW1lfSBhbHJlYWR5IGV4aXN0c2A7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbGF5ZXIgPSBuZXcgVUlMYXllcih0aGlzLCBuYW1lKTtcblxuICAgICAgICB0aGlzLnVpTGF5ZXJzLmFkZChuYW1lLCBsYXllcik7XG5cbiAgICAgICAgcmV0dXJuIGxheWVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYSBsYXllciBmcm9tIHRoZSBzY2VuZSBieSBuYW1lIGlmIGl0IGV4aXN0cy5cbiAgICAgKiBUaGlzIGNhbiBiZSBhIExheWVyIG9yIGFueSBvZiBpdHMgc3ViY2xhc3Nlc1xuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBsYXllclxuICAgICAqIEByZXR1cm5zIFRoZSBMYXllciBmb3VuZCB3aXRoIHRoYXQgbmFtZVxuICAgICAqL1xuICAgIGdldExheWVyKG5hbWU6IHN0cmluZyk6IExheWVyIHtcbiAgICAgICAgaWYodGhpcy5sYXllcnMuaGFzKG5hbWUpKXtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxheWVycy5nZXQobmFtZSk7XG4gICAgICAgIH0gZWxzZSBpZih0aGlzLnBhcmFsbGF4TGF5ZXJzLmhhcyhuYW1lKSl7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJhbGxheExheWVycy5nZXQobmFtZSk7XG4gICAgICAgIH0gZWxzZSBpZih0aGlzLnVpTGF5ZXJzLmhhcyhuYW1lKSl7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy51aUxheWVycy5nZXQobmFtZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBgUmVxdWVzdGVkIGxheWVyICR7bmFtZX0gZG9lcyBub3QgZXhpc3QuYDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGxheWVyIGlzIGEgUGFyYWxsYXhMYXllclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBsYXllclxuICAgICAqIEByZXR1cm5zIFRydWUgaWYgdGhpcyBsYXllciBpcyBhIFBhcmFsbGF4TGF5ZXJcbiAgICAgKi9cbiAgICBpc1BhcmFsbGF4TGF5ZXIobmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmFsbGF4TGF5ZXJzLmhhcyhuYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBsYXllciBpcyBhIFVJTGF5ZXJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgbGF5ZXJcbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoaXMgbGF5ZXIgaXMgUGFyYWxsYXhMYXllclxuICAgICAqL1xuICAgIGlzVUlMYXllcihuYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudWlMYXllcnMuaGFzKG5hbWUpO1xuICAgIH0gICAgXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB0cmFuc2xhdGlvbiBvZiB0aGlzIG5vZGUgd2l0aCByZXNwZWN0IHRvIGNhbWVyYSBzcGFjZSAoZHVlIHRvIHRoZSB2aWV3cG9ydCBtb3ZpbmcpLlxuICAgICAqIFRoaXMgdmFsdWUgaXMgYWZmZWN0ZWQgYnkgdGhlIHBhcmFsbGF4IGxldmVsIG9mIHRoZSBAcmVmZXJlbmNlW0xheWVyXSB0aGUgbm9kZSBpcyBvbi5cbiAgICAgKiBAcGFyYW0gbm9kZSBUaGUgbm9kZSB0byBjaGVjayB0aGUgdmlld3BvcnQgd2l0aCByZXNwZWN0IHRvXG4gICAgICogQHJldHVybnMgQSBWZWMyIGNvbnRhaW5pbmcgdGhlIHRyYW5zbGF0aW9uIG9mIHZpZXdwb3J0IHdpdGggcmVzcGVjdCB0byB0aGlzIG5vZGUuXG4gICAgICovXG4gICAgZ2V0Vmlld1RyYW5zbGF0aW9uKG5vZGU6IEdhbWVOb2RlKTogVmVjMiB7XG4gICAgICAgIGxldCBsYXllciA9IG5vZGUuZ2V0TGF5ZXIoKTtcblxuICAgICAgICBpZihsYXllciBpbnN0YW5jZW9mIFBhcmFsbGF4TGF5ZXIgfHwgbGF5ZXIgaW5zdGFuY2VvZiBVSUxheWVyKXtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXdwb3J0LmdldE9yaWdpbigpLm11bHQobGF5ZXIucGFyYWxsYXgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld3BvcnQuZ2V0T3JpZ2luKCk7XG4gICAgICAgIH1cblx0fVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgc2NhbGUgbGV2ZWwgb2YgdGhlIHZpZXdcbiAgICAgKiBAcmV0dXJucyBUaGUgem9vbSBsZXZlbCBvZiB0aGUgdmlld3BvcnRcbiAgICAqL1xuXHRnZXRWaWV3U2NhbGUoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy52aWV3cG9ydC5nZXRab29tTGV2ZWwoKTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgVmlld3BvcnQgYXNzb2NpYXRlZCB3aXRoIHRoaXMgc2NlbmVcbiAgICAgKiBAcmV0dXJucyBUaGUgY3VycmVudCBWaWV3cG9ydFxuICAgICAqL1xuICAgIGdldFZpZXdwb3J0KCk6IFZpZXdwb3J0IHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld3BvcnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgd29ybGQgc2l6ZSBvZiB0aGlzIFNjZW5lXG4gICAgICogQHJldHVybnMgVGhlIHdvcmxkIHNpemUgaW4gYSBWZWMyXG4gICAgICovXG4gICAgZ2V0V29ybGRTaXplKCk6IFZlYzIge1xuICAgICAgICByZXR1cm4gdGhpcy53b3JsZFNpemU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgU2NlbmVHcmFwaCBhc3NvY2lhdGVkIHdpdGggdGhpcyBTY2VuZVxuICAgICAqIEByZXR1cm5zIFRoZSBTY2VuZUdyYXBoXG4gICAgICovXG4gICAgZ2V0U2NlbmVHcmFwaCgpOiBTY2VuZUdyYXBoIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NlbmVHcmFwaDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBQaHlzaWNzTWFuYWdlciBhc3NvY2lhdGVkIHdpdGggdGhpcyBTY2VuZVxuICAgICAqIEByZXR1cm5zIFRoZSBQaHlzaWNzTWFuYWdlclxuICAgICAqL1xuICAgIGdldFBoeXNpY3NNYW5hZ2VyKCk6IFBoeXNpY3NNYW5hZ2VyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGh5c2ljc01hbmFnZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgTmF2aWdhdGlvbk1hbmFnZXIgYXNzb2NpYXRlZCB3aXRoIHRoaXMgU2NlbmVcbiAgICAgKiBAcmV0dXJucyBUaGUgTmF2aWdhdGlvbk1hbmFnZXJcbiAgICAgKi9cbiAgICBnZXROYXZpZ2F0aW9uTWFuYWdlcigpOiBOYXZpZ2F0aW9uTWFuYWdlciB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hdk1hbmFnZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgQUlNYW5hZ2VyIGFzc29jaWF0ZWQgd2l0aCB0aGlzIFNjZW5lXG4gICAgICogQHJldHVybnMgVGhlIEFJTWFuYWdlclxuICAgICAqL1xuICAgIGdldEFJTWFuYWdlcigpOiBBSU1hbmFnZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5haU1hbmFnZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGFuIElEIGZvciBhIEdhbWVOb2RlXG4gICAgICogQHJldHVybnMgVGhlIG5ldyBJRFxuICAgICAqL1xuICAgIGdlbmVyYXRlSWQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NlbmVNYW5hZ2VyLmdlbmVyYXRlSWQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYSBUaWxlbWFwIGluIHRoaXMgU2NlbmVcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgVGlsZW1hcFxuICAgICAqIEByZXR1cm5zIFRoZSBUaWxlbWFwLCBpZiBvbmUgdGhpcyBuYW1lIGV4aXN0cywgb3RoZXJ3aXNlIG51bGxcbiAgICAgKi9cbiAgICBnZXRUaWxlbWFwKG5hbWU6IHN0cmluZyk6IFRpbGVtYXAge1xuICAgICAgICBmb3IobGV0IHRpbGVtYXAgb2YgdGhpcyAudGlsZW1hcHMpe1xuICAgICAgICAgICAgaWYodGlsZW1hcC5uYW1lID09PSBuYW1lKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGlsZW1hcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn0iLCJpbXBvcnQgU2NlbmUgZnJvbSBcIi4vU2NlbmVcIjtcbmltcG9ydCBSZXNvdXJjZU1hbmFnZXIgZnJvbSBcIi4uL1Jlc291cmNlTWFuYWdlci9SZXNvdXJjZU1hbmFnZXJcIjtcbmltcG9ydCBWaWV3cG9ydCBmcm9tIFwiLi4vU2NlbmVHcmFwaC9WaWV3cG9ydFwiO1xuaW1wb3J0IFJlbmRlcmluZ01hbmFnZXIgZnJvbSBcIi4uL1JlbmRlcmluZy9SZW5kZXJpbmdNYW5hZ2VyXCI7XG5pbXBvcnQgTWVtb3J5VXRpbHMgZnJvbSBcIi4uL1V0aWxzL01lbW9yeVV0aWxzXCI7XG5pbXBvcnQgUmVjZWl2ZXIgZnJvbSBcIi4uL0V2ZW50cy9SZWNlaXZlclwiO1xuaW1wb3J0IHsgR2FtZUV2ZW50VHlwZSB9IGZyb20gXCIuLi9FdmVudHMvR2FtZUV2ZW50VHlwZVwiO1xuXG4vKipcbiAqIFRoZSBTY2VuZU1hbmFnZXIgYWN0cyBhcyBhbiBpbnRlcmZhY2UgdG8gY3JlYXRlIFNjZW5lcywgYW5kIGhhbmRsZXMgdGhlIGxpZmVjeWNsZSBtZXRob2RzIG9mIFNjZW5lcy5cbiAqIEl0IGdpdmVzIFNjZW5lcyBhY2Nlc3MgdG8gaW5mb3JtYXRpb24gdGhleSBuZWVkIGZyb20gdGhlIEByZWZlcmVuY2VbR2FtZV0gY2xhc3Mgd2hpbGUga2VlcGluZyBhIGxheWVyIG9mIHNlcGFyYXRpb24uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNjZW5lTWFuYWdlciB7XG5cdC8qKiBUaGUgY3VycmVudCBTY2VuZSBvZiB0aGUgZ2FtZSAqL1xuXHRwcm90ZWN0ZWQgY3VycmVudFNjZW5lOiBTY2VuZTtcblxuXHQvKiogVGhlIFZpZXdwb3J0IG9mIHRoZSBnYW1lICovXG5cdHByb3RlY3RlZCB2aWV3cG9ydDogVmlld3BvcnQ7XG5cblx0LyoqIEEgcmVmZXJlbmNlIHRvIHRoZSBSZXNvdXJjZU1hbmFnZXIgKi9cblx0cHJvdGVjdGVkIHJlc291cmNlTWFuYWdlcjogUmVzb3VyY2VNYW5hZ2VyO1xuXG5cdC8qKiBBIGNvdW50ZXIgdG8ga2VlcCB0cmFjayBvZiBnYW1lIGlkcyAqL1xuXHRwcm90ZWN0ZWQgaWRDb3VudGVyOiBudW1iZXI7XG5cblx0LyoqIFRoZSBSZW5kZXJpbmdNYW5hZ2VyIG9mIHRoZSBnYW1lICovXG5cdHByb3RlY3RlZCByZW5kZXJpbmdNYW5hZ2VyOiBSZW5kZXJpbmdNYW5hZ2VyO1xuXG5cdC8qKiBGb3IgY29uc2lzdGVuY3ksIG9ubHkgY2hhbmdlIHNjZW5lcyBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSB1cGRhdGUgY3ljbGUgKi9cblx0cHJvdGVjdGVkIHBlbmRpbmdTY2VuZTogU2NlbmU7XG5cdHByb3RlY3RlZCBwZW5kaW5nU2NlbmVJbml0OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuXG5cdHByb3RlY3RlZCByZWNlaXZlcjogUmVjZWl2ZXI7XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBuZXcgU2NlbmVNYW5hZ2VyXG5cdCAqIEBwYXJhbSB2aWV3cG9ydCBUaGUgVmlld3BvcnQgb2YgdGhlIGdhbWVcblx0ICogQHBhcmFtIGdhbWUgVGhlIEdhbWUgaW5zdGFuY2Vcblx0ICogQHBhcmFtIHJlbmRlcmluZ01hbmFnZXIgVGhlIFJlbmRlcmluZ01hbmFnZXIgb2YgdGhlIGdhbWVcblx0ICovXG5cdGNvbnN0cnVjdG9yKHZpZXdwb3J0OiBWaWV3cG9ydCwgcmVuZGVyaW5nTWFuYWdlcjogUmVuZGVyaW5nTWFuYWdlcil7XG5cdFx0dGhpcy5yZXNvdXJjZU1hbmFnZXIgPSBSZXNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcblx0XHR0aGlzLnZpZXdwb3J0ID0gdmlld3BvcnQ7XG5cdFx0dGhpcy5yZW5kZXJpbmdNYW5hZ2VyID0gcmVuZGVyaW5nTWFuYWdlcjtcblx0XHR0aGlzLmlkQ291bnRlciA9IDA7XG5cdFx0dGhpcy5wZW5kaW5nU2NlbmUgPSBudWxsO1xuXG5cdFx0dGhpcy5yZWNlaXZlciA9IG5ldyBSZWNlaXZlcigpO1xuXHRcdHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKEdhbWVFdmVudFR5cGUuQ0hBTkdFX1NDRU5FKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBZGQgYSBzY2VuZSBhcyB0aGUgbWFpbiBzY2VuZS5cblx0ICogVXNlIHRoaXMgbWV0aG9kIGlmIHlvdSd2ZSBjcmVhdGVkIGEgc3ViY2xhc3Mgb2YgU2NlbmUsIGFuZCB5b3Ugd2FudCB0byBhZGQgaXQgYXMgdGhlIG1haW4gU2NlbmUuXG5cdCAqIEBwYXJhbSBjb25zdHIgVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBzY2VuZSB0byBhZGRcblx0ICogQHBhcmFtIGluaXQgQW4gb2JqZWN0IHRvIHBhc3MgdG8gdGhlIGluaXQgZnVuY3Rpb24gb2YgdGhlIG5ldyBzY2VuZVxuXHQgKi9cblx0cHVibGljIGNoYW5nZVRvU2NlbmU8VCBleHRlbmRzIFNjZW5lPihjb25zdHI6IG5ldyAoLi4uYXJnczogYW55KSA9PiBULCBpbml0PzogUmVjb3JkPHN0cmluZywgYW55Piwgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIGFueT4pOiB2b2lkIHtcblx0XHRjb25zb2xlLmxvZyhcIkNyZWF0aW5nIHRoZSBuZXcgc2NlbmUgLSBjaGFuZ2UgaXMgcGVuZGluZyB1bnRpbCBuZXh0IHVwZGF0ZVwiKTtcblx0XHR0aGlzLnBlbmRpbmdTY2VuZSA9IG5ldyBjb25zdHIodGhpcy52aWV3cG9ydCwgdGhpcywgdGhpcy5yZW5kZXJpbmdNYW5hZ2VyLCBvcHRpb25zKTtcblx0XHR0aGlzLnBlbmRpbmdTY2VuZUluaXQgPSBpbml0O1xuXHR9XG5cblx0cHJvdGVjdGVkIGRvU2NlbmVDaGFuZ2UoKXtcblx0XHRjb25zb2xlLmxvZyhcIlBlcmZvcm1pbmcgc2NlbmUgY2hhbmdlXCIpO1xuXHRcdHRoaXMudmlld3BvcnQuc2V0Q2VudGVyKHRoaXMudmlld3BvcnQuZ2V0SGFsZlNpemUoKS54LCB0aGlzLnZpZXdwb3J0LmdldEhhbGZTaXplKCkueSk7XG5cdFx0XG5cdFx0aWYodGhpcy5jdXJyZW50U2NlbmUpe1xuXHRcdFx0Y29uc29sZS5sb2coXCJVbmxvYWRpbmcgb2xkIHNjZW5lXCIpXG5cdFx0XHR0aGlzLmN1cnJlbnRTY2VuZS51bmxvYWRTY2VuZSgpO1xuXG5cdFx0XHRjb25zb2xlLmxvZyhcIkRlc3Ryb3lpbmcgb2xkIHNjZW5lXCIpO1xuXHRcdFx0dGhpcy5jdXJyZW50U2NlbmUuZGVzdHJveSgpO1xuXHRcdH1cblxuXHRcdGNvbnNvbGUubG9nKFwiVW5sb2FkaW5nIG9sZCByZXNvdXJjZXMuLi5cIik7XG5cdFx0dGhpcy5yZXNvdXJjZU1hbmFnZXIudW5sb2FkQWxsUmVzb3VyY2VzKCk7XG5cblx0XHQvLyBNYWtlIHRoZSBwZW5kaW5nIHNjZW5lIHRoZSBjdXJyZW50IG9uZVxuXHRcdHRoaXMuY3VycmVudFNjZW5lID0gdGhpcy5wZW5kaW5nU2NlbmU7XG5cblx0XHQvLyBNYWtlIHRoZSBwZW5kaW5nIHNjZW5lIG51bGxcblx0XHR0aGlzLnBlbmRpbmdTY2VuZSA9IG51bGw7XG5cblx0XHQvLyBJbml0IHRoZSBzY2VuZVxuXHRcdHRoaXMuY3VycmVudFNjZW5lLmluaXRTY2VuZSh0aGlzLnBlbmRpbmdTY2VuZUluaXQpO1xuXG5cdFx0Ly8gRW5xdWV1ZSBhbGwgc2NlbmUgYXNzZXQgbG9hZHNcblx0XHR0aGlzLmN1cnJlbnRTY2VuZS5sb2FkU2NlbmUoKTtcblxuXHRcdC8vIExvYWQgYWxsIGFzc2V0c1xuXHRcdGNvbnNvbGUubG9nKFwiU3RhcnRpbmcgU2NlbmUgTG9hZFwiKTtcblx0XHR0aGlzLnJlc291cmNlTWFuYWdlci5sb2FkUmVzb3VyY2VzRnJvbVF1ZXVlKCgpID0+IHtcblx0XHRcdGNvbnNvbGUubG9nKFwiU3RhcnRpbmcgU2NlbmVcIik7XG5cdFx0XHR0aGlzLmN1cnJlbnRTY2VuZS5zdGFydFNjZW5lKCk7XG5cdFx0XHR0aGlzLmN1cnJlbnRTY2VuZS5zZXRSdW5uaW5nKHRydWUpO1xuXHRcdH0pO1xuXG5cdFx0dGhpcy5yZW5kZXJpbmdNYW5hZ2VyLnNldFNjZW5lKHRoaXMuY3VycmVudFNjZW5lKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdlbmVyYXRlcyBhIHVuaXF1ZSBJRFxuXHQgKiBAcmV0dXJucyBBIG5ldyBJRFxuXHQgKi9cblx0cHVibGljIGdlbmVyYXRlSWQoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5pZENvdW50ZXIrKztcblx0fVxuXG5cdC8qKlxuXHQgKiBSZW5kZXJzIHRoZSBjdXJyZW50IFNjZW5lXG5cdCAqL1xuXHRwdWJsaWMgcmVuZGVyKCk6IHZvaWQge1xuXHRcdGlmKHRoaXMuY3VycmVudFNjZW5lKXtcblx0XHRcdHRoaXMuY3VycmVudFNjZW5lLnJlbmRlcigpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGVzIHRoZSBjdXJyZW50IFNjZW5lXG5cdCAqIEBwYXJhbSBkZWx0YVQgVGhlIHRpbWVzdGVwIG9mIHRoZSBTY2VuZVxuXHQgKi9cblx0cHVibGljIHVwZGF0ZShkZWx0YVQ6IG51bWJlcil7XG5cdFx0d2hpbGUgKHRoaXMucmVjZWl2ZXIuaGFzTmV4dEV2ZW50KCkpIHtcblx0XHRcdGxldCBldiA9IHRoaXMucmVjZWl2ZXIuZ2V0TmV4dEV2ZW50KCk7XG5cdFx0XHRpZiAoZXYudHlwZSA9PT0gR2FtZUV2ZW50VHlwZS5DSEFOR0VfU0NFTkUpIHRoaXMuY2hhbmdlVG9TY2VuZShldi5kYXRhLmdldChcInNjZW5lXCIpLCBldi5kYXRhLmdldChcImluaXRcIikpO1xuXHRcdH1cblxuXHRcdGlmKHRoaXMucGVuZGluZ1NjZW5lICE9PSBudWxsKXtcblx0XHRcdHRoaXMuZG9TY2VuZUNoYW5nZSgpO1xuXHRcdH1cblxuXHRcdGlmKHRoaXMuY3VycmVudFNjZW5lICYmIHRoaXMuY3VycmVudFNjZW5lLmlzUnVubmluZygpKXtcblx0XHRcdHRoaXMuY3VycmVudFNjZW5lLnVwZGF0ZShkZWx0YVQpO1xuXHRcdH1cblx0fVxufSIsImltcG9ydCBBcnJheVV0aWxzIGZyb20gXCIuLi9VdGlscy9BcnJheVV0aWxzXCI7XG5cbi8vIEBpZ25vcmVQYWdlXG5cbi8qKlxuICogVGhlIG9wdGlvbnMgdG8gZ2l2ZSBhIEByZWZlcmVuY2VbU2NlbmVdIGZvciBpbml0aWFsaXphdGlvblxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTY2VuZU9wdGlvbnMge1xuICAgIHBoeXNpY3M6IHtcbiAgICAgICAgZ3JvdXBzOiBBcnJheTxzdHJpbmc+LFxuICAgICAgICBjb2xsaXNpb25zOiBBcnJheTxBcnJheTxudW1iZXI+PjtcbiAgICB9XG5cbiAgICBzdGF0aWMgcGFyc2Uob3B0aW9uczogUmVjb3JkPHN0cmluZywgYW55Pik6IFNjZW5lT3B0aW9uc3tcbiAgICAgICAgbGV0IHNPcHQgPSBuZXcgU2NlbmVPcHRpb25zKCk7XG5cbiAgICAgICAgaWYob3B0aW9ucy5waHlzaWNzID09PSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgc09wdC5waHlzaWNzID0ge2dyb3VwczogdW5kZWZpbmVkLCBjb2xsaXNpb25zOiB1bmRlZmluZWR9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc09wdC5waHlzaWNzID0gb3B0aW9ucy5waHlzaWNzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNPcHQ7XG4gICAgfVxufSIsImltcG9ydCBWaWV3cG9ydCBmcm9tIFwiLi9WaWV3cG9ydFwiO1xuaW1wb3J0IENhbnZhc05vZGUgZnJvbSBcIi4uL05vZGVzL0NhbnZhc05vZGVcIjtcbmltcG9ydCBNYXAgZnJvbSBcIi4uL0RhdGFUeXBlcy9Db2xsZWN0aW9ucy9NYXBcIjtcbmltcG9ydCBWZWMyIGZyb20gXCIuLi9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IFNjZW5lIGZyb20gXCIuLi9TY2VuZS9TY2VuZVwiO1xuaW1wb3J0IEFBQkIgZnJvbSBcIi4uL0RhdGFUeXBlcy9TaGFwZXMvQUFCQlwiO1xuXG4vKipcbiAqIEFuIGFic3RyYWN0IGludGVyZmFjZSBvZiBhIFNjZW5lR3JhcGguXG4gKiBFeHBvc2VzIG1ldGhvZHMgZm9yIHVzZSBieSBvdGhlciBjb2RlLCBidXQgbGVhdmVzIHRoZSBpbXBsZW1lbnRhdGlvbiB1cCB0byB0aGUgc3ViY2xhc3Nlcy5cbiAqIFRoZSBTY2VuZUdyYXBoIG1hbmFnZXMgdGhlIHBvc2l0aW9ucyBvZiBhbGwgR2FtZU5vZGVzLCBhbmQgY2FuIGVhc2lseSBwcnVuZSBhIHZpc2libGUgc2V0IGZvciByZW5kZXJpbmcuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFNjZW5lR3JhcGgge1xuXHQvKipcdEEgcmVmZXJlbmNlIHRvIHRoZSB2aWV3cG9ydCAqL1xuXHRwcm90ZWN0ZWQgdmlld3BvcnQ6IFZpZXdwb3J0O1xuXHQvKipcdEEgbWFwIG9mIENhbnZhc05vZGVzIGluIHRoaXMgU2NlbmVHcmFwaCAqL1xuXHRwcm90ZWN0ZWQgbm9kZU1hcDogQXJyYXk8Q2FudmFzTm9kZT47XG5cdC8qKiBBIGNvdW50ZXIgb2YgSURzIGZvciBub2RlcyBpbiB0aGlzIFNjZW5lR3JhcGggKi9cblx0cHJvdGVjdGVkIGlkQ291bnRlcjogbnVtYmVyO1xuXHQvKiogQSByZWZlcmVuY2UgdG8gdGhlIFNjZW5lIHRoaXMgU2NlbmVHcmFwaCBiZWxvbmdzIHRvICovXG5cdHByb3RlY3RlZCBzY2VuZTogU2NlbmU7XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBuZXcgU2NlbmVHcmFwaFxuXHQgKiBAcGFyYW0gdmlld3BvcnQgVGhlIHZpZXdwb3J0XG5cdCAqIEBwYXJhbSBzY2VuZSBUaGUgU2NlbmUgdGhpcyBTY2VuZUdyYXBoIGJlbG9uZ3MgdG9cblx0ICovXG4gICAgY29uc3RydWN0b3Iodmlld3BvcnQ6IFZpZXdwb3J0LCBzY2VuZTogU2NlbmUpe1xuXHRcdHRoaXMudmlld3BvcnQgPSB2aWV3cG9ydDtcblx0XHR0aGlzLnNjZW5lID0gc2NlbmU7XG5cdFx0dGhpcy5ub2RlTWFwID0gbmV3IEFycmF5KCk7XG5cdFx0dGhpcy5pZENvdW50ZXIgPSAwO1xuICAgIH1cblxuXHQvKipcblx0ICogQWRkIGEgbm9kZSB0byB0aGUgU2NlbmVHcmFwaFxuXHQgKiBAcGFyYW0gbm9kZSBUaGUgQ2FudmFzTm9kZSB0byBhZGQgdG8gdGhlIFNjZW5lR3JhcGhcblx0ICogQHJldHVybnMgVGhlIFNjZW5lR3JhcGggSUQgb2YgdGhpcyBuZXdseSBhZGRlZCBDYW52YXNOb2RlXG5cdCAqL1xuICAgIGFkZE5vZGUobm9kZTogQ2FudmFzTm9kZSk6IG51bWJlciB7XG5cdFx0dGhpcy5ub2RlTWFwW25vZGUuaWRdID0gbm9kZTtcblx0XHR0aGlzLmFkZE5vZGVTcGVjaWZpYyhub2RlLCB0aGlzLmlkQ291bnRlcik7XG5cdFx0dGhpcy5pZENvdW50ZXIgKz0gMTtcblx0XHRyZXR1cm4gdGhpcy5pZENvdW50ZXIgLSAxO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBBbiBvdmVycmlkYWJsZSBtZXRob2QgdG8gYWRkIGEgQ2FudmFzTm9kZSB0byB0aGUgc3BlY2lmaWMgZGF0YSBzdHJ1Y3R1cmUgb2YgdGhlIFNjZW5lR3JhcGhcblx0ICogQHBhcmFtIG5vZGUgVGhlIG5vZGUgdG8gYWRkIHRvIHRoZSBkYXRhIHN0cnVjdHVyZVxuXHQgKiBAcGFyYW0gaWQgVGhlIGlkIG9mIHRoZSBDYW52YXNOb2RlXG5cdCAqL1xuXHRwcm90ZWN0ZWQgYWJzdHJhY3QgYWRkTm9kZVNwZWNpZmljKG5vZGU6IENhbnZhc05vZGUsIGlkOiBudW1iZXIpOiB2b2lkO1xuXG5cdC8qKlxuXHQgKiBSZW1vdmVzIGEgbm9kZSBmcm9tIHRoZSBTY2VuZUdyYXBoXG5cdCAqIEBwYXJhbSBub2RlIFRoZSBub2RlIHRvIHJlbW92ZVxuXHQgKi9cbiAgICByZW1vdmVOb2RlKG5vZGU6IENhbnZhc05vZGUpOiB2b2lkIHtcblx0XHQvLyBGaW5kIGFuZCByZW1vdmUgbm9kZSBpbiBPKG4pXG5cdFx0dGhpcy5ub2RlTWFwW25vZGUuaWRdID0gdW5kZWZpbmVkO1xuXHRcdHRoaXMucmVtb3ZlTm9kZVNwZWNpZmljKG5vZGUsIG5vZGUuaWQpO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBUaGUgc3BlY2lmaWMgaW1wbGVtZW50YXRpb24gb2YgcmVtb3ZpbmcgYSBub2RlXG5cdCAqIEBwYXJhbSBub2RlIFRoZSBub2RlIHRvIHJlbW92ZVxuXHQgKiBAcGFyYW0gaWQgVGhlIGlkIG9mIHRoZSBub2RlIHRvIHJlbW92ZVxuXHQgKi9cblx0cHJvdGVjdGVkIGFic3RyYWN0IHJlbW92ZU5vZGVTcGVjaWZpYyhub2RlOiBDYW52YXNOb2RlLCBpZDogbnVtYmVyKTogdm9pZDtcblxuXHQvKipcblx0ICogR2V0IGEgc3BlY2lmaWMgbm9kZSB1c2luZyBpdHMgaWRcblx0ICogQHBhcmFtIGlkIFRoZSBpZCBvZiB0aGUgQ2FudmFzTm9kZSB0byByZXRyaWV2ZVxuXHQgKiBAcmV0dXJucyBUaGUgbm9kZSB3aXRoIHRoaXMgSURcblx0ICovXG5cdGdldE5vZGUoaWQ6IG51bWJlcik6IENhbnZhc05vZGUge1xuXHRcdHJldHVybiB0aGlzLm5vZGVNYXBbaWRdO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIG5vZGVzIGF0IHNwZWNpZmljIGNvb3JkaW5hdGVzXG5cdCAqIEBwYXJhbSB2ZWNPclggVGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgcG9zaXRpb24sIG9yIHRoZSBjb29yZGluYXRlcyBpbiBhIFZlYzJcblx0ICogQHBhcmFtIHkgVGhlIHktY29vcmRpbmF0ZSBvZiB0aGUgcG9zaXRpb25cblx0ICogQHJldHVybnMgQW4gYXJyYXkgb2Ygbm9kZXMgZm91bmQgYXQgdGhlIHBvc2l0aW9uIHByb3ZpZGVkXG5cdCAqL1xuICAgIGdldE5vZGVzQXQodmVjT3JYOiBWZWMyIHwgbnVtYmVyLCB5OiBudW1iZXIgPSBudWxsKTogQXJyYXk8Q2FudmFzTm9kZT4ge1xuXHRcdGlmKHZlY09yWCBpbnN0YW5jZW9mIFZlYzIpe1xuXHRcdFx0cmV0dXJuIHRoaXMuZ2V0Tm9kZXNBdENvb3Jkcyh2ZWNPclgueCwgdmVjT3JYLnkpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5nZXROb2Rlc0F0Q29vcmRzKHZlY09yWCwgeSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIG5vZGVzIHRoYXQgb3ZlcmxhcCBhIHNwZWNpZmljIGJvdW5kYXJ5XG5cdCAqIEBwYXJhbSBib3VuZGFyeSBUaGUgcmVnaW9uIHRvIGNoZWNrXG5cdCAqIEByZXR1cm5zIEFuIGFycmF5IG9mIG5vZGVzIGZvdW5kIG92ZXJsYXBwaW5nIHRoZSBwcm92aWRlZCBib3VuZGFyeVxuXHQgKi9cblx0YWJzdHJhY3QgZ2V0Tm9kZXNJblJlZ2lvbihib3VuZGFyeTogQUFCQik6IEFycmF5PENhbnZhc05vZGU+O1xuXHRcblx0LyoqXG5cdCAqIFJldHVybnMgYWxsIG5vZGVzIGluIHRoZSBTY2VuZUdyYXBoXG5cdCAqIEByZXR1cm5zIEFuIEFycmF5IGNvbnRhaW5pbmcgYWxsIG5vZGVzIGluIHRoZSBTY2VuZUdyYXBoXG5cdCAqL1xuXHRnZXRBbGxOb2RlcygpOiBBcnJheTxDYW52YXNOb2RlPiB7XG5cdFx0bGV0IGFyciA9IG5ldyBBcnJheTxDYW52YXNOb2RlPigpO1xuXHRcdGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLm5vZGVNYXAubGVuZ3RoOyBpKyspe1xuXHRcdFx0aWYodGhpcy5ub2RlTWFwW2ldICE9PSB1bmRlZmluZWQpe1xuXHRcdFx0XHRhcnIucHVzaCh0aGlzLm5vZGVNYXBbaV0pO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gYXJyO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSBzcGVjaWZpYyBpbXBsZW1lbnRhdGlvbiBvZiBnZXR0aW5nIGEgbm9kZSBhdCBjZXJ0YWluIGNvb3JkaW5hdGVzXG5cdCAqIEBwYXJhbSB4IFRoZSB4LWNvb3JkaW5hdGVzIG9mIHRoZSBub2RlXG5cdCAqIEBwYXJhbSB5IFRoZSB5LWNvb3JkaW5hdGVzIG9mIHRoZSBub2RlXG5cdCAqL1xuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBnZXROb2Rlc0F0Q29vcmRzKHg6IG51bWJlciwgeTogbnVtYmVyKTogQXJyYXk8Q2FudmFzTm9kZT47XG5cblx0YWJzdHJhY3QgdXBkYXRlKGRlbHRhVDogbnVtYmVyKTogdm9pZDtcblx0XG5cdGFic3RyYWN0IHJlbmRlcihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQ7XG5cblx0LyoqXG5cdCAqIEdldHMgdGhlIHZpc2libGUgc2V0IG9mIENhbnZhc05vZGVzIGJhc2VkIG9uIHRoZSBAcmVmZXJlbmNlW1ZpZXdwb3J0XVxuXHQgKiBAcmV0dXJucyBBbiBhcnJheSBjb250YWluaW5nIGFsbCB2aXNpYmxlIG5vZGVzIGluIHRoZSBTY2VuZUdyYXBoXG5cdCAqL1xuICAgIGFic3RyYWN0IGdldFZpc2libGVTZXQoKTogQXJyYXk8Q2FudmFzTm9kZT47XG59IiwiaW1wb3J0IFNjZW5lR3JhcGggZnJvbSBcIi4vU2NlbmVHcmFwaFwiO1xuaW1wb3J0IENhbnZhc05vZGUgZnJvbSBcIi4uL05vZGVzL0NhbnZhc05vZGVcIjtcbmltcG9ydCBWaWV3cG9ydCBmcm9tIFwiLi9WaWV3cG9ydFwiO1xuaW1wb3J0IFNjZW5lIGZyb20gXCIuLi9TY2VuZS9TY2VuZVwiO1xuaW1wb3J0IEFBQkIgZnJvbSBcIi4uL0RhdGFUeXBlcy9TaGFwZXMvQUFCQlwiO1xuaW1wb3J0IFN0YXRzIGZyb20gXCIuLi9EZWJ1Zy9TdGF0c1wiO1xuXG4vKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIGEgU2NlbmVHcmFwaCB0aGF0IHNpbXBseSBzdG9yZWQgQ2FudmFzTm9kZXMgaW4gYW4gYXJyYXkuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNjZW5lR3JhcGhBcnJheSBleHRlbmRzIFNjZW5lR3JhcGgge1xuICAgIC8qKiBUaGUgbGlzdCBvZiBDYW52YXNOb2RlcyBpbiB0aGlzIFNjZW5lR3JhcGggKi9cbiAgICBwcml2YXRlIG5vZGVMaXN0OiBBcnJheTxDYW52YXNOb2RlPjtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgU2NlbmVHcmFwaEFycmF5XG4gICAgICogQHBhcmFtIHZpZXdwb3J0IFRoZSBWaWV3cG9ydFxuICAgICAqIEBwYXJhbSBzY2VuZSBUaGUgU2NlbmUgdGhpcyBTY2VuZUdyYXBoIGJlbG9uZ3MgdG9cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih2aWV3cG9ydDogVmlld3BvcnQsIHNjZW5lOiBTY2VuZSl7XG4gICAgICAgIHN1cGVyKHZpZXdwb3J0LCBzY2VuZSk7XG5cbiAgICAgICAgdGhpcy5ub2RlTGlzdCA9IG5ldyBBcnJheTxDYW52YXNOb2RlPigpO1xuICAgIH1cblxuICAgIC8vIEBvdmVycmlkZVxuICAgIHByb3RlY3RlZCBhZGROb2RlU3BlY2lmaWMobm9kZTogQ2FudmFzTm9kZSwgaWQ6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLm5vZGVMaXN0LnB1c2gobm9kZSk7XG4gICAgfVxuXG4gICAgLy8gQG92ZXJyaWRlXG4gICAgcHJvdGVjdGVkIHJlbW92ZU5vZGVTcGVjaWZpYyhub2RlOiBDYW52YXNOb2RlLCBpZDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMubm9kZUxpc3QuaW5kZXhPZihub2RlKTtcbiAgICAgICAgaWYoaW5kZXggPiAtMSl7XG4gICAgICAgICAgICB0aGlzLm5vZGVMaXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBAb3ZlcnJpZGVcbiAgICBnZXROb2Rlc0F0Q29vcmRzKHg6IG51bWJlciwgeTogbnVtYmVyKTogQXJyYXk8Q2FudmFzTm9kZT4ge1xuICAgICAgICBsZXQgcmVzdWx0cyA9IFtdO1xuXG4gICAgICAgIGZvcihsZXQgbm9kZSBvZiB0aGlzLm5vZGVMaXN0KXtcbiAgICAgICAgICAgIGlmKG5vZGUuY29udGFpbnMoeCwgeSkpe1xuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cblxuICAgIC8vIEBvdmVycmlkZVxuICAgIGdldE5vZGVzSW5SZWdpb24oYm91bmRhcnk6IEFBQkIpOiBBcnJheTxDYW52YXNOb2RlPiB7XG4gICAgICAgIGxldCB0MCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICBsZXQgcmVzdWx0cyA9IFtdO1xuXG4gICAgICAgIGZvcihsZXQgbm9kZSBvZiB0aGlzLm5vZGVMaXN0KXtcbiAgICAgICAgICAgIGlmKGJvdW5kYXJ5Lm92ZXJsYXBzKG5vZGUuYm91bmRhcnkpKXtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2gobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHQxID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgIFN0YXRzLmxvZyhcInNncXVlcnlcIiwgKHQxLXQwKSk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuXG4gICAgdXBkYXRlKGRlbHRhVDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGxldCB0MCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICBmb3IobGV0IG5vZGUgb2YgdGhpcy5ub2RlTGlzdCl7XG4gICAgICAgICAgICBpZighbm9kZS5nZXRMYXllcigpLmlzUGF1c2VkKCkpe1xuICAgICAgICAgICAgICAgIG5vZGUudXBkYXRlKGRlbHRhVCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHQxID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgIFN0YXRzLmxvZyhcInNndXBkYXRlXCIsICh0MS10MCkpO1xuICAgIH1cblxuICAgIHJlbmRlcihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge31cblxuICAgIC8vIEBvdmVycmlkZVxuICAgIGdldFZpc2libGVTZXQoKTogQXJyYXk8Q2FudmFzTm9kZT4ge1xuICAgICAgICBsZXQgdmlzaWJsZVNldCA9IG5ldyBBcnJheTxDYW52YXNOb2RlPigpO1xuXG4gICAgICAgIGZvcihsZXQgbm9kZSBvZiB0aGlzLm5vZGVMaXN0KXtcbiAgICAgICAgICAgIGlmKCFub2RlLmdldExheWVyKCkuaXNIaWRkZW4oKSAmJiBub2RlLnZpc2libGUgJiYgdGhpcy52aWV3cG9ydC5pbmNsdWRlcyhub2RlKSl7XG4gICAgICAgICAgICAgICAgdmlzaWJsZVNldC5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZpc2libGVTZXQ7XG4gICAgfVxufSIsImltcG9ydCBWZWMyIGZyb20gXCIuLi9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IEdhbWVOb2RlIGZyb20gXCIuLi9Ob2Rlcy9HYW1lTm9kZVwiO1xuaW1wb3J0IENhbnZhc05vZGUgZnJvbSBcIi4uL05vZGVzL0NhbnZhc05vZGVcIjtcbmltcG9ydCBNYXRoVXRpbHMgZnJvbSBcIi4uL1V0aWxzL01hdGhVdGlsc1wiO1xuaW1wb3J0IFF1ZXVlIGZyb20gXCIuLi9EYXRhVHlwZXMvQ29sbGVjdGlvbnMvUXVldWVcIjtcbmltcG9ydCBBQUJCIGZyb20gXCIuLi9EYXRhVHlwZXMvU2hhcGVzL0FBQkJcIjtcbmltcG9ydCBJbnB1dCBmcm9tIFwiLi4vSW5wdXQvSW5wdXRcIjtcbmltcG9ydCBQYXJhbGxheExheWVyIGZyb20gXCIuLi9TY2VuZS9MYXllcnMvUGFyYWxsYXhMYXllclwiO1xuaW1wb3J0IFVJTGF5ZXIgZnJvbSBcIi4uL1NjZW5lL0xheWVycy9VSUxheWVyXCI7XG5cbi8qKlxuICogVGhlIHZpZXdwb3J0IG9mIHRoZSBnYW1lLiBDb3JyZXNwb25kcyB0byB0aGUgdmlzaWJsZSB3aW5kb3cgZGlzcGxheWVkIGluIHRoZSBicm93c2VyLlxuICogVGhlIHZpZXdwb3J0IGtlZXBzIHRyYWNrIG9mIGl0cyBwb3NpdGlvbiBpbiB0aGUgZ2FtZSB3b3JsZCwgYW5kIGNhbiBhY3QgYXMgYSBjYW1lcmEgdG8gZm9sbG93IG9iamVjdHMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpZXdwb3J0IHtcbiAgICAvKiogVGhlIEFBQkIgdGhhdCBjb250YWlucyB0aGUgcG9zaXRpb24gYW5kIHNpemUgb2YgdGhlIHZpZXdwb3J0IHZpZXcgKi9cbiAgICBwcml2YXRlIHZpZXc6IEFBQkI7XG4gICAgLyoqIFRoZSBib3VuZGFyeSBmb3IgdGhlIHZpZXdwb3J0LiBUaGlzIHJlcHJlc2VudHMgdGhlIGxpbWl0cyB0byB3aGVyZSB0aGUgdmlld3BvcnQgY2FuIGdvICovXG4gICAgcHJpdmF0ZSBib3VuZGFyeTogQUFCQjtcbiAgICAvKiogVGhlIEdhbWVOb2RlIHRoZSBWaWV3cG9ydCBpcyBmb2xsb3dpbmcgKi9cbiAgICBwcml2YXRlIGZvbGxvd2luZzogR2FtZU5vZGU7XG4gICAgLyoqIFRoZSBwb3NpdGlvbiB0aGUgR2FtZU5vZGUgaXMgZm9jdXNpbmcgb24uIFRoaXMgaXMgb3ZlcnJpZGRlbiBpZiBcImZvbGxvd2luZ1wiIGlzIHNldC4gKi9cbiAgICBwcml2YXRlIGZvY3VzOiBWZWMyO1xuXG4gICAgLyoqIEEgcXVldWUgb2YgcHJldmlvdXMgcG9zaXRpb25zIG9mIHdoYXQgdGhpcyB2aWV3cG9ydCBpcyBmb2xsb3dpbmcuIFVzZWQgZm9yIHNtb290aGluZyB2aWV3cG9ydCBtb3ZlbWVudCAqL1xuICAgIHByaXZhdGUgbGFzdFBvc2l0aW9uczogUXVldWU8VmVjMj47XG5cbiAgICAvKiogVGhlIG51bWJlciBvZiBwcmV2aW91cyBwb3NpdGlvbnMgdGhpcyB2aWV3cG9ydCB0cmFja3MgKi9cbiAgICBwcml2YXRlIHNtb290aGluZ0ZhY3RvcjogbnVtYmVyO1xuXG4gICAgLyoqIEEgYm9vbGVhbiB0aGEgcmVwcmVzZW50cyB3aGV0aGVyIHRoZSBwbGF5ZXIgY2FuIHpvb20gYnkgc2Nyb2xsaW5nIHdpdGggdGhlIG1vdXNlIHdoZWVsICovXG4gICAgcHJpdmF0ZSBzY3JvbGxab29tRW5hYmxlZDogYm9vbGVhbjtcblxuICAgIC8qKiBUaGUgYW1vdW50IHRoYXQgaXMgem9vbWVkIGluIG9yIG91dC4gKi9cbiAgICBwcml2YXRlIFpPT01fRkFDVE9SOiBudW1iZXIgPSAxLjI7XG5cbiAgICAvKiogVGhlIHNpemUgb2YgdGhlIGNhbnZhcyAqL1xuICAgIHByaXZhdGUgY2FudmFzU2l6ZTogVmVjMjtcblxuICAgIGNvbnN0cnVjdG9yKGNhbnZhc1NpemU6IFZlYzIsIHpvb21MZXZlbDogbnVtYmVyKXtcbiAgICAgICAgdGhpcy52aWV3ID0gbmV3IEFBQkIoVmVjMi5aRVJPLCBWZWMyLlpFUk8pO1xuICAgICAgICB0aGlzLmJvdW5kYXJ5ID0gbmV3IEFBQkIoVmVjMi5aRVJPLCBWZWMyLlpFUk8pO1xuICAgICAgICB0aGlzLmxhc3RQb3NpdGlvbnMgPSBuZXcgUXVldWUoKTtcbiAgICAgICAgdGhpcy5zbW9vdGhpbmdGYWN0b3IgPSAxMDtcbiAgICAgICAgdGhpcy5zY3JvbGxab29tRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNhbnZhc1NpemUgPSBWZWMyLlpFUk87XG4gICAgICAgIHRoaXMuZm9jdXMgPSBWZWMyLlpFUk87XG5cbiAgICAgICAgLy8gU2V0IHRoZSBzaXplIG9mIHRoZSBjYW52YXNcbiAgICAgICAgdGhpcy5zZXRDYW52YXNTaXplKGNhbnZhc1NpemUpO1xuXG4gICAgICAgIC8vIFNldCB0aGUgc2l6ZSBvZiB0aGUgdmlld3BvcnRcbiAgICAgICAgdGhpcy5zZXRTaXplKGNhbnZhc1NpemUpO1xuICAgICAgICB0aGlzLnNldFpvb21MZXZlbCh6b29tTGV2ZWwpO1xuXG4gICAgICAgIC8vIFNldCB0aGUgY2VudGVyIChhbmQgbWFrZSB0aGUgdmlld3BvcnQgc3RheSB0aGVyZSlcbiAgICAgICAgdGhpcy5zZXRDZW50ZXIodGhpcy52aWV3LmhhbGZTaXplLmNsb25lKCkpO1xuICAgICAgICB0aGlzLnNldEZvY3VzKHRoaXMudmlldy5oYWxmU2l6ZS5jbG9uZSgpKTtcbiAgICB9XG5cbiAgICAvKiogRW5hYmxlcyB0aGUgdmlld3BvcnQgdG8gem9vbSBpbiBhbmQgb3V0ICovXG4gICAgZW5hYmxlWm9vbSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zY3JvbGxab29tRW5hYmxlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcG9zaXRpb24gb2YgdGhlIHZpZXdwb3J0XG4gICAgICogQHJldHVybnMgVGhlIGNlbnRlciBvZiB0aGUgdmlld3BvcnQgYXMgYSBWZWMyXG4gICAgICovXG4gICAgZ2V0Q2VudGVyKCk6IFZlYzIge1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3LmNlbnRlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IFZlYzIgd2l0aCB0aGUgb3JpZ2luIG9mIHRoZSB2aWV3cG9ydFxuICAgICAqIEByZXR1cm5zIFRoZSB0b3AgbGVmdCBjb3JuZGVyIG9mIHRoZSBWaWVwb3J0IGFzIGEgVmVjMlxuICAgICAqL1xuICAgIGdldE9yaWdpbigpOiBWZWMyIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMyKHRoaXMudmlldy5sZWZ0LCB0aGlzLnZpZXcudG9wKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSByZWdpb24gdmlzaWJsZSB0byB0aGlzIHZpZXdwb3J0XG4gICAgICogQHJldHVybnMgVGhlIEFBQkIgY29udGFpbmluZyB0aGUgcmVnaW9uIHZpc2libGUgdG8gdGhlIHZpZXdwb3J0XG4gICAgICovXG4gICAgZ2V0VmlldygpOiBBQUJCIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlldztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSB2aWV3cG9ydFxuICAgICAqIEBwYXJhbSB2ZWNPclggVGhlIG5ldyBwb3NpdGlvbiBvciB0aGUgeC1jb29yZGluYXRlIG9mIHRoZSBuZXcgcG9zaXRpb25cbiAgICAgKiBAcGFyYW0geSBUaGUgeS1jb29yZGluYXRlIG9mIHRoZSBuZXcgcG9zaXRpb25cbiAgICAgKi9cbiAgICBzZXRDZW50ZXIodmVjT3JYOiBWZWMyIHwgbnVtYmVyLCB5OiBudW1iZXIgPSBudWxsKTogdm9pZCB7XG4gICAgICAgIGxldCBwb3M6IFZlYzI7XG5cdFx0aWYodmVjT3JYIGluc3RhbmNlb2YgVmVjMil7XG4gICAgICAgICAgICBwb3MgPSB2ZWNPclg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwb3MgPSBuZXcgVmVjMih2ZWNPclgsIHkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy52aWV3LmNlbnRlciA9IHBvcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzaXplIG9mIHRoZSB2aWV3cG9ydCBhcyBhIFZlYzJcbiAgICAgKiBAcmV0dXJucyBUaGUgaGFsZi1zaXplIG9mIHRoZSB2aWV3cG9ydCBhcyBhIFZlYzJcbiAgICAgKi9cbiAgICBnZXRIYWxmU2l6ZSgpOiBWZWMyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlldy5nZXRIYWxmU2l6ZSgpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzaXplIG9mIHRoZSB2aWV3cG9ydFxuICAgICAqIEBwYXJhbSB2ZWNPclggVGhlIG5ldyB3aWR0aCBvZiB0aGUgdmlld3BvcnQgb3IgdGhlIG5ldyBzaXplIGFzIGEgVmVjMlxuICAgICAqIEBwYXJhbSB5IFRoZSBuZXcgaGVpZ2h0IG9mIHRoZSB2aWV3cG9ydFxuICAgICAqL1xuICAgIHNldFNpemUodmVjT3JYOiBWZWMyIHwgbnVtYmVyLCB5OiBudW1iZXIgPSBudWxsKTogdm9pZCB7XG5cdFx0aWYodmVjT3JYIGluc3RhbmNlb2YgVmVjMil7XG5cdFx0XHR0aGlzLnZpZXcuc2V0SGFsZlNpemUodmVjT3JYLnNjYWxlZCgxLzIpKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy52aWV3LnNldEhhbGZTaXplKG5ldyBWZWMyKHZlY09yWC8yLCB5LzIpKTtcblx0XHR9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgaGFsZi1zaXplIG9mIHRoZSB2aWV3cG9ydFxuICAgICAqIEBwYXJhbSB2ZWNPclggVGhlIG5ldyBoYWxmLXdpZHRoIG9mIHRoZSB2aWV3cG9ydCBvciB0aGUgbmV3IGhhbGYtc2l6ZSBhcyBhIFZlYzJcbiAgICAgKiBAcGFyYW0geSBUaGUgbmV3IGhlaWdodCBvZiB0aGUgdmlld3BvcnRcbiAgICAgKi9cbiAgICBzZXRIYWxmU2l6ZSh2ZWNPclg6IFZlYzIgfCBudW1iZXIsIHk6IG51bWJlciA9IG51bGwpOiB2b2lkIHtcblx0XHRpZih2ZWNPclggaW5zdGFuY2VvZiBWZWMyKXtcblx0XHRcdHRoaXMudmlldy5zZXRIYWxmU2l6ZSh2ZWNPclguY2xvbmUoKSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMudmlldy5zZXRIYWxmU2l6ZShuZXcgVmVjMih2ZWNPclgsIHkpKTtcblx0XHR9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgdmlld3BvcnQgd2l0aCB0aGUgc2l6ZSBvZiB0aGUgY3VycmVudCBDYW52YXNcbiAgICAgKiBAcGFyYW0gdmVjT3JYIFRoZSB3aWR0aCBvZiB0aGUgY2FudmFzLCBvciB0aGUgY2FudmFzIHNpemUgYXMgYSBWZWMyXG4gICAgICogQHBhcmFtIHkgVGhlIGhlaWdodCBvZiB0aGUgY2FudmFzXG4gICAgICovXG4gICAgc2V0Q2FudmFzU2l6ZSh2ZWNPclg6IFZlYzIgfCBudW1iZXIsIHk6IG51bWJlciA9IG51bGwpOiB2b2lkIHtcblx0XHRpZih2ZWNPclggaW5zdGFuY2VvZiBWZWMyKXtcblx0XHRcdHRoaXMuY2FudmFzU2l6ZSA9IHZlY09yWC5jbG9uZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmNhbnZhc1NpemUgPSBuZXcgVmVjMih2ZWNPclgsIHkpO1xuXHRcdH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB6b29tIGxldmVsIG9mIHRoZSB2aWV3cG9ydFxuICAgICAqIEBwYXJhbSB6b29tIFRoZSB6b29tIGxldmVsXG4gICAgICovXG4gICAgc2V0Wm9vbUxldmVsKHpvb206IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLnZpZXcuaGFsZlNpemUuY29weSh0aGlzLmNhbnZhc1NpemUuc2NhbGVkKDEvem9vbS8yKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgem9vbSBsZXZlbCBvZiB0aGUgdmlld3BvcnRcbiAgICAgKiBAcmV0dXJucyBUaGUgem9vbSBsZXZlbFxuICAgICAqL1xuICAgIGdldFpvb21MZXZlbCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW52YXNTaXplLngvdGhpcy52aWV3Lmh3LzJcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzbW9vdGhpbmcgZmFjdG9yIGZvciB0aGUgdmlld3BvcnQgbW92ZW1lbnQuXG4gICAgICogQHBhcmFtIHNtb290aGluZ0ZhY3RvciBUaGUgc21vb3RoaW5nIGZhY3RvciBmb3IgdGhlIHZpZXdwb3J0XG4gICAgICovXG4gICAgc2V0U21vb3RoaW5nRmFjdG9yKHNtb290aGluZ0ZhY3RvcjogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGlmKHNtb290aGluZ0ZhY3RvciA8IDEpIHNtb290aGluZ0ZhY3RvciA9IDE7XG4gICAgICAgIHRoaXMuc21vb3RoaW5nRmFjdG9yID0gc21vb3RoaW5nRmFjdG9yO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRlbGxzIHRoZSB2aWV3cG9ydCB0byBmb2N1cyBvbiBhIHBvaW50LiBPdmVyaWRkZW4gYnkgXCJmb2xsb3dpbmdcIi5cbiAgICAgKiBAcGFyYW0gZm9jdXMgVGhlIHBvaW50IHRoZSAgdmlld3BvcnQgc2hvdWxkIGZvY3VzIG9uXG4gICAgICovXG4gICAgc2V0Rm9jdXMoZm9jdXM6IFZlYzIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5mb2N1cy5jb3B5KGZvY3VzKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBDYW52YXNOb2RlIGlzIGluc2lkZSBvZiB0aGUgdmlld3BvcnRcbiAgICAgKiBAcGFyYW0gbm9kZSBUaGUgbm9kZSB0byBjaGVja1xuICAgICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIG5vZGUgaXMgY3VycmVudGx5IHZpc2libGUgaW4gdGhlIHZpZXdwb3J0LCBmYWxzZSBpZiBub3RcbiAgICAgKi9cbiAgICBpbmNsdWRlcyhub2RlOiBDYW52YXNOb2RlKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBwYXJhbGxheCA9IG5vZGUuZ2V0TGF5ZXIoKSBpbnN0YW5jZW9mIFBhcmFsbGF4TGF5ZXIgfHwgbm9kZS5nZXRMYXllcigpIGluc3RhbmNlb2YgVUlMYXllciA/ICg8UGFyYWxsYXhMYXllcj5ub2RlLmdldExheWVyKCkpLnBhcmFsbGF4IDogbmV3IFZlYzIoMSwgMSk7XG4gICAgICAgIGxldCBjZW50ZXIgPSB0aGlzLnZpZXcuY2VudGVyLmNsb25lKCk7XG4gICAgICAgIHRoaXMudmlldy5jZW50ZXIubXVsdChwYXJhbGxheCk7XG4gICAgICAgIGxldCBvdmVybGFwcyA9IHRoaXMudmlldy5vdmVybGFwcyhub2RlLmJvdW5kYXJ5KTtcbiAgICAgICAgdGhpcy52aWV3LmNlbnRlciA9IGNlbnRlclxuICAgICAgICByZXR1cm4gb3ZlcmxhcHM7XG4gICAgfVxuXG5cdC8vIFRPRE86IFB1dCBzb21lIGVycm9yIGhhbmRsaW5nIG9uIHRoaXMgZm9yIHRyeWluZyB0byBtYWtlIHRoZSBib3VuZHMgdG9vIHNtYWxsIGZvciB0aGUgdmlld3BvcnRcbiAgICAvLyBUT0RPOiBUaGlzIHNob3VsZCBwcm9iYWJseSBiZSBkb25lIGF1dG9tYXRpY2FsbHksIG9yIHNob3VsZCBjb25zaWRlciB0aGUgYXNwZWN0IHJhdGlvIG9yIHNvbWV0aGluZ1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGJvdW5kcyBvZiB0aGUgdmlld3BvcnRcbiAgICAgKiBAcGFyYW0gbG93ZXJYIFRoZSBsZWZ0IGVkZ2Ugb2YgdGhlIHZpZXdwb3J0XG4gICAgICogQHBhcmFtIGxvd2VyWSBUaGUgdG9wIGVkZ2Ugb2YgdGhlIHZpZXdwb3J0XG4gICAgICogQHBhcmFtIHVwcGVyWCBUaGUgcmlnaHQgZWRnZSBvZiB0aGUgdmlld3BvcnRcbiAgICAgKiBAcGFyYW0gdXBwZXJZIFRoZSBib3R0b20gZWRnZSBvZiB0aGUgdmlld3BvcnRcbiAgICAgKi9cbiAgICBzZXRCb3VuZHMobG93ZXJYOiBudW1iZXIsIGxvd2VyWTogbnVtYmVyLCB1cHBlclg6IG51bWJlciwgdXBwZXJZOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgbGV0IGh3aWR0aCA9ICh1cHBlclggLSBsb3dlclgpLzI7XG4gICAgICAgIGxldCBoaGVpZ2h0ID0gKHVwcGVyWSAtIGxvd2VyWSkvMjtcbiAgICAgICAgbGV0IHggPSBsb3dlclggKyBod2lkdGg7XG4gICAgICAgIGxldCB5ID0gbG93ZXJZICsgaGhlaWdodDtcbiAgICAgICAgdGhpcy5ib3VuZGFyeS5jZW50ZXIuc2V0KHgsIHkpO1xuICAgICAgICB0aGlzLmJvdW5kYXJ5LmhhbGZTaXplLnNldChod2lkdGgsIGhoZWlnaHQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1ha2UgdGhlIHZpZXdwb3J0IGZvbGxvdyB0aGUgc3BlY2lmaWVkIEdhbWVOb2RlXG4gICAgICogQHBhcmFtIG5vZGUgVGhlIEdhbWVOb2RlIHRvIGZvbGxvd1xuICAgICAqL1xuICAgIGZvbGxvdyhub2RlOiBHYW1lTm9kZSk6IHZvaWQge1xuICAgICAgICB0aGlzLmZvbGxvd2luZyA9IG5vZGU7XG4gICAgfVxuXG4gICAgdXBkYXRlVmlldygpOiB2b2lkIHtcbiAgICAgICAgaWYodGhpcy5sYXN0UG9zaXRpb25zLmdldFNpemUoKSA+IHRoaXMuc21vb3RoaW5nRmFjdG9yKXtcbiAgICAgICAgICAgIHRoaXMubGFzdFBvc2l0aW9ucy5kZXF1ZXVlKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEdldCB0aGUgYXZlcmFnZSBvZiB0aGUgbGFzdCAxMCBwb3NpdGlvbnNcbiAgICAgICAgbGV0IHBvcyA9IFZlYzIuWkVSTztcbiAgICAgICAgdGhpcy5sYXN0UG9zaXRpb25zLmZvckVhY2gocG9zaXRpb24gPT4gcG9zLmFkZChwb3NpdGlvbikpO1xuICAgICAgICBwb3Muc2NhbGUoMS90aGlzLmxhc3RQb3NpdGlvbnMuZ2V0U2l6ZSgpKTtcblxuICAgICAgICAvLyBTZXQgdGhpcyBwb3NpdGlvbiBlaXRoZXIgdG8gdGhlIG9iamVjdCBvciB0byBpdHMgYm91bmRzXG4gICAgICAgIHBvcy54ID0gTWF0aFV0aWxzLmNsYW1wKHBvcy54LCB0aGlzLmJvdW5kYXJ5LmxlZnQgKyB0aGlzLnZpZXcuaHcsIHRoaXMuYm91bmRhcnkucmlnaHQgLSB0aGlzLnZpZXcuaHcpO1xuICAgICAgICBwb3MueSA9IE1hdGhVdGlscy5jbGFtcChwb3MueSwgdGhpcy5ib3VuZGFyeS50b3AgKyB0aGlzLnZpZXcuaGgsIHRoaXMuYm91bmRhcnkuYm90dG9tIC0gdGhpcy52aWV3LmhoKTtcblxuICAgICAgICAvLyBBc3N1cmUgdGhlcmUgYXJlIG5vIGxpbmVzIGluIHRoZSB0aWxlbWFwXG4gICAgICAgIHBvcy54ID0gTWF0aC5mbG9vcihwb3MueCk7XG4gICAgICAgIHBvcy55ID0gTWF0aC5mbG9vcihwb3MueSk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnZpZXcuY2VudGVyLmNvcHkocG9zKTtcbiAgICB9XG5cbiAgICB1cGRhdGUoZGVsdGFUOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgLy8gSWYgem9vbSBpcyBlbmFibGVkXG4gICAgICAgIGlmKHRoaXMuc2Nyb2xsWm9vbUVuYWJsZWQpe1xuICAgICAgICAgICAgaWYoSW5wdXQuZGlkSnVzdFNjcm9sbCgpKXtcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudFNpemUgPSB0aGlzLnZpZXcuZ2V0SGFsZlNpemUoKS5jbG9uZSgpO1xuICAgICAgICAgICAgICAgIGlmKElucHV0LmdldFNjcm9sbERpcmVjdGlvbigpIDwgMCl7XG4gICAgICAgICAgICAgICAgICAgIC8vIFpvb20gaW5cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFNpemUuc2NhbGUoMS90aGlzLlpPT01fRkFDVE9SKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBab29tIG91dFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2l6ZS5zY2FsZSh0aGlzLlpPT01fRkFDVE9SKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZihjdXJyZW50U2l6ZS54ID4gdGhpcy5ib3VuZGFyeS5odyl7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmYWN0b3IgPSB0aGlzLmJvdW5kYXJ5Lmh3L2N1cnJlbnRTaXplLng7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTaXplLnggPSB0aGlzLmJvdW5kYXJ5Lmh3O1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2l6ZS55ICo9IGZhY3RvcjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZihjdXJyZW50U2l6ZS55ID4gdGhpcy5ib3VuZGFyeS5oaCl7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmYWN0b3IgPSB0aGlzLmJvdW5kYXJ5LmhoL2N1cnJlbnRTaXplLnk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTaXplLnkgPSB0aGlzLmJvdW5kYXJ5LmhoO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2l6ZS54ICo9IGZhY3RvcjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLnZpZXcuc2V0SGFsZlNpemUoY3VycmVudFNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgdmlld3BvcnQgaXMgZm9sbG93aW5nIGFuIG9iamVjdFxuICAgICAgICBpZih0aGlzLmZvbGxvd2luZyl7XG4gICAgICAgICAgICAvLyBVcGRhdGUgb3VyIGxpc3Qgb2YgcHJldmlvdXMgcG9zaXRpb25zXG4gICAgICAgICAgICB0aGlzLmxhc3RQb3NpdGlvbnMuZW5xdWV1ZSh0aGlzLmZvbGxvd2luZy5wb3NpdGlvbi5jbG9uZSgpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFBvc2l0aW9ucy5lbnF1ZXVlKHRoaXMuZm9jdXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy51cGRhdGVWaWV3KCk7XG4gICAgfVxufSIsImltcG9ydCBNYXAgZnJvbSBcIi4uL0RhdGFUeXBlcy9Db2xsZWN0aW9ucy9NYXBcIjtcbmltcG9ydCBSZWNlaXZlciBmcm9tIFwiLi4vRXZlbnRzL1JlY2VpdmVyXCI7XG5pbXBvcnQgUmVzb3VyY2VNYW5hZ2VyIGZyb20gXCIuLi9SZXNvdXJjZU1hbmFnZXIvUmVzb3VyY2VNYW5hZ2VyXCI7XG5pbXBvcnQgeyBHYW1lRXZlbnRUeXBlIH0gZnJvbSBcIi4uL0V2ZW50cy9HYW1lRXZlbnRUeXBlXCI7XG5cbi8qKlxuICogTWFuYWdlcyBhbnkgc291bmRzIG9yIG11c2ljIG5lZWRlZCBmb3IgdGhlIGdhbWUuXG4gKiBUaHJvdWdoIHRoZSBFdmVudFF1ZXVlLCBleHBvc2VzIGludGVyZmFjZSB0byBwbGF5IHNvdW5kcyBzbyBHYW1lTm9kZXMgY2FuIGFjdGl2YXRlIHNvdW5kcyB3aXRob3V0XG4gKiBuZWVkaW5nIGRpcmVjdCByZWZlcmVuY2VzIHRvIHRoZSBhdWRpbyBzeXN0ZW1cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXVkaW9NYW5hZ2VyIHtcbiAgICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogQXVkaW9NYW5hZ2VyO1xuXG4gICAgLyoqIFRoZSBldmVudCByZWNlaXZlciBvZiB0aGlzIEF1ZGlvTWFuYWdlciAqL1xuICAgIHByaXZhdGUgcmVjZWl2ZXI6IFJlY2VpdmVyO1xuXG4gICAgLyoqIEEgTWFwIG9mIHRoZSBuYW1lcyBvZiBjdXJyZW50bHkgcGxheWluZyAob3IgcGF1c2VkKSBzb3VuZHMgdG8gdGhlaXIgQXVkaW9CdWZmZXJzICovXG4gICAgcHJpdmF0ZSBjdXJyZW50U291bmRzOiBNYXA8QXVkaW9CdWZmZXJTb3VyY2VOb2RlPjtcblxuICAgIHByaXZhdGUgYXVkaW9DdHg6IEF1ZGlvQ29udGV4dDtcblxuICAgIHByaXZhdGUgZ2Fpbk5vZGVzOiBBcnJheTxHYWluTm9kZT47XG5cbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIHRoaXMuaW5pdEF1ZGlvKCk7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIgPSBuZXcgUmVjZWl2ZXIoKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoW1xuICAgICAgICAgICAgR2FtZUV2ZW50VHlwZS5QTEFZX1NPVU5ELFxuICAgICAgICAgICAgR2FtZUV2ZW50VHlwZS5TVE9QX1NPVU5ELFxuICAgICAgICAgICAgR2FtZUV2ZW50VHlwZS5QTEFZX01VU0lDLFxuICAgICAgICAgICAgR2FtZUV2ZW50VHlwZS5QTEFZX1NGWCxcbiAgICAgICAgICAgIEdhbWVFdmVudFR5cGUuTVVURV9DSEFOTkVMLFxuICAgICAgICAgICAgR2FtZUV2ZW50VHlwZS5VTk1VVEVfQ0hBTk5FTFxuICAgICAgICBdKTtcbiAgICAgICAgdGhpcy5jdXJyZW50U291bmRzID0gbmV3IE1hcCgpO1xuXG4gICAgICAgIHRoaXMuZ2Fpbk5vZGVzID0gbmV3IEFycmF5PEdhaW5Ob2RlPihNQVhfQVVESU9fQ0hBTk5FTFMpO1xuICAgICAgICB0aGlzLmluaXRHYWluTm9kZXMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGluc3RhbmNlIG9mIHRoZSBBdWRpb01hbmFnZXIgY2xhc3Mgb3IgY3JlYXRlIGEgbmV3IG9uZSBpZiBub25lIGV4aXN0c1xuICAgICAqIEByZXR1cm5zIFRoZSBBdWRpb01hbmFnZXJcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKCk6IEF1ZGlvTWFuYWdlciB7XG4gICAgICAgIGlmKCF0aGlzLmluc3RhbmNlKXtcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UgPSBuZXcgQXVkaW9NYW5hZ2VyKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgdGhlIHdlYkF1ZGlvIGNvbnRleHRcbiAgICAgKi9cbiAgICBwcml2YXRlIGluaXRBdWRpbygpOiB2b2lkIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHdpbmRvdy5BdWRpb0NvbnRleHQgPSB3aW5kb3cuQXVkaW9Db250ZXh0Oy8vIHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQ7IFxuICAgICAgICAgICAgdGhpcy5hdWRpb0N0eCA9IG5ldyBBdWRpb0NvbnRleHQoKTsgXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnV2ViIEF1ZGlvIEFQSSBzdWNjZXNzZnVsbHkgbG9hZGVkJyk7XG4gICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdXZWIgQXVkaW8gQVBJIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyJyk7IFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0R2Fpbk5vZGVzKCk6IHZvaWQge1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgTUFYX0FVRElPX0NIQU5ORUxTOyBpKyspe1xuICAgICAgICAgICAgdGhpcy5nYWluTm9kZXNbaV0gPSB0aGlzLmF1ZGlvQ3R4LmNyZWF0ZUdhaW4oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgYXVkaW8gY29udGV4dFxuICAgICAqIEByZXR1cm5zIFRoZSBBdWRpb0NvbnRleHRcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QXVkaW9Db250ZXh0KCk6IEF1ZGlvQ29udGV4dCB7XG4gICAgICAgIHJldHVybiB0aGlzLmF1ZGlvQ3R4O1xuICAgIH1cblxuICAgIC8qXG4gICAgICAgIEFjY29yZGluZyB0byB0aGUgTUROLCBjcmVhdGUgYSBuZXcgc291bmQgZm9yIGV2ZXJ5IGNhbGw6XG5cbiAgICAgICAgQW4gQXVkaW9CdWZmZXJTb3VyY2VOb2RlIGNhbiBvbmx5IGJlIHBsYXllZCBvbmNlOyBhZnRlciBlYWNoIGNhbGwgdG8gc3RhcnQoKSwgeW91IGhhdmUgdG8gY3JlYXRlIGEgbmV3IG5vZGVcbiAgICAgICAgaWYgeW91IHdhbnQgdG8gcGxheSB0aGUgc2FtZSBzb3VuZCBhZ2Fpbi4gRm9ydHVuYXRlbHksIHRoZXNlIG5vZGVzIGFyZSB2ZXJ5IGluZXhwZW5zaXZlIHRvIGNyZWF0ZSwgYW5kIHRoZVxuICAgICAgICBhY3R1YWwgQXVkaW9CdWZmZXJzIGNhbiBiZSByZXVzZWQgZm9yIG11bHRpcGxlIHBsYXlzIG9mIHRoZSBzb3VuZC4gSW5kZWVkLCB5b3UgY2FuIHVzZSB0aGVzZSBub2RlcyBpbiBhXG4gICAgICAgIFwiZmlyZSBhbmQgZm9yZ2V0XCIgbWFubmVyOiBjcmVhdGUgdGhlIG5vZGUsIGNhbGwgc3RhcnQoKSB0byBiZWdpbiBwbGF5aW5nIHRoZSBzb3VuZCwgYW5kIGRvbid0IGV2ZW4gYm90aGVyIHRvXG4gICAgICAgIGhvbGQgYSByZWZlcmVuY2UgdG8gaXQuIEl0IHdpbGwgYXV0b21hdGljYWxseSBiZSBnYXJiYWdlLWNvbGxlY3RlZCBhdCBhbiBhcHByb3ByaWF0ZSB0aW1lLCB3aGljaCB3b24ndCBiZVxuICAgICAgICB1bnRpbCBzb21ldGltZSBhZnRlciB0aGUgc291bmQgaGFzIGZpbmlzaGVkIHBsYXlpbmcuXG4gICAgKi9cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHNvdW5kIGZyb20gdGhlIGtleSBvZiBhIGxvYWRlZCBhdWRpbyBmaWxlXG4gICAgICogQHBhcmFtIGtleSBUaGUga2V5IG9mIHRoZSBsb2FkZWQgYXVkaW8gZmlsZSB0byBjcmVhdGUgYSBuZXcgc291bmQgZm9yXG4gICAgICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgQXVkaW9CdWZmZXJcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgY3JlYXRlU291bmQoa2V5OiBzdHJpbmcsIGhvbGRSZWZlcmVuY2U6IGJvb2xlYW4sIGNoYW5uZWw6IEF1ZGlvQ2hhbm5lbFR5cGUsIG9wdGlvbnM6IE1hcDxhbnk+KTogQXVkaW9CdWZmZXJTb3VyY2VOb2RlIHtcbiAgICAgICAgLy8gR2V0IGF1ZGlvIGJ1ZmZlclxuICAgICAgICBsZXQgYnVmZmVyID0gUmVzb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0QXVkaW8oa2V5KTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBzb3VuZCBzb3VyY2VcbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuYXVkaW9DdHguY3JlYXRlQnVmZmVyU291cmNlKCk7IFxuICAgICAgXG4gICAgICAgIC8vIFRlbGwgdGhlIHNvdXJjZSB3aGljaCBzb3VuZCB0byBwbGF5XG4gICAgICAgIHNvdXJjZS5idWZmZXIgPSBidWZmZXI7ICAgICAgICAgICAgICAgXG4gICAgICBcbiAgICAgICAgLy8gQWRkIGFueSBhZGRpdGlvbmFsIG5vZGVzXG4gICAgICAgIGNvbnN0IG5vZGVzOiBBcnJheTxBdWRpb05vZGU+ID0gW3NvdXJjZV07XG5cbiAgICAgICAgLy8gRG8gYW55IGFkZGl0aW9uYWwgbm9kZXMgaGVyZT9cbiAgICAgICAgLy8gT2YgY291cnNlLCB0aGVyZSBhcmVuJ3QgYW55IHN1cHBvcnRlZCB5ZXQuLi5cblxuICAgICAgICAvLyBBZGQgdGhlIGdhaW4gbm9kZSBmb3IgdGhpcyBjaGFubmVsXG4gICAgICAgIG5vZGVzLnB1c2godGhpcy5nYWluTm9kZXNbY2hhbm5lbF0pO1xuXG4gICAgICAgIC8vIENvbm5lY3QgYW55IG5vZGVzIGFsb25nIHRoZSBwYXRoXG4gICAgICAgIGZvcihsZXQgaSA9IDE7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBub2Rlc1tpLTFdLmNvbm5lY3Qobm9kZXNbaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ29ubmVjdCB0aGUgc291cmNlIHRvIHRoZSBjb250ZXh0J3MgZGVzdGluYXRpb25cbiAgICAgICAgbm9kZXNbbm9kZXMubGVuZ3RoIC0gMV0uY29ubmVjdCh0aGlzLmF1ZGlvQ3R4LmRlc3RpbmF0aW9uKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGxheSB0aGUgc291bmQgc3BlY2lmaWVkIGJ5IHRoZSBrZXlcbiAgICAgKiBAcGFyYW0ga2V5IFRoZSBrZXkgb2YgdGhlIHNvdW5kIHRvIHBsYXlcbiAgICAgKiBAcGFyYW0gbG9vcCBBIGJvb2xlYW4gZm9yIHdoZXRoZXIgb3Igbm90IHRvIGxvb3AgdGhlIHNvdW5kXG4gICAgICogQHBhcmFtIGhvbGRSZWZlcmVuY2UgQSBib29sZWFuIGZvciB3aGV0aGVyIG9yIG5vdCB3ZSB3YW50IHRvIGhvbGQgb24gdG8gYSByZWZlcmVuY2Ugb2YgdGhlIGF1ZGlvIG5vZGUuIFRoaXMgaXMgZ29vZCBmb3IgcGxheWluZyBtdXNpYyBvbiBhIGxvb3AgdGhhdCB3aWxsIGV2ZW50dWFsbHkgbmVlZCB0byBiZSBzdG9wcGVkLlxuICAgICAqL1xuICAgIHByb3RlY3RlZCBwbGF5U291bmQoa2V5OiBzdHJpbmcsIGxvb3A6IGJvb2xlYW4sIGhvbGRSZWZlcmVuY2U6IGJvb2xlYW4sIGNoYW5uZWw6IEF1ZGlvQ2hhbm5lbFR5cGUsIG9wdGlvbnM6IE1hcDxhbnk+KTogdm9pZCB7XG4gICAgICAgIGxldCBzb3VuZCA9IHRoaXMuY3JlYXRlU291bmQoa2V5LCBob2xkUmVmZXJlbmNlLCBjaGFubmVsLCBvcHRpb25zKTtcblxuICAgICAgICBpZihsb29wKXtcbiAgICAgICAgICAgIHNvdW5kLmxvb3AgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIGEgcmVmZXJlbmNlIG9mIHRoZSBuZXcgc291bmQgdG8gYSBtYXAuIFRoaXMgd2lsbCBhbGxvdyB1cyB0byBzdG9wIGEgbG9vcGluZyBvciBsb25nIHNvdW5kIGF0IGEgbGF0ZXIgdGltZVxuICAgICAgICBpZihob2xkUmVmZXJlbmNlKXtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNvdW5kcy5hZGQoa2V5LCBzb3VuZCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHNvdW5kLnN0YXJ0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RvcCB0aGUgc291bmQgc3BlY2lmaWVkIGJ5IHRoZSBrZXlcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgc3RvcFNvdW5kKGtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGxldCBzb3VuZCA9IHRoaXMuY3VycmVudFNvdW5kcy5nZXQoa2V5KTtcbiAgICAgICAgaWYoc291bmQpe1xuICAgICAgICAgICAgc291bmQuc3RvcCgpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50U291bmRzLmRlbGV0ZShrZXkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIG11dGVDaGFubmVsKGNoYW5uZWw6IEF1ZGlvQ2hhbm5lbFR5cGUpe1xuICAgICAgICB0aGlzLmdhaW5Ob2Rlc1tjaGFubmVsXS5nYWluLnNldFZhbHVlQXRUaW1lKDAsIHRoaXMuYXVkaW9DdHguY3VycmVudFRpbWUpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCB1bm11dGVDaGFubmVsKGNoYW5uZWw6IEF1ZGlvQ2hhbm5lbFR5cGUpe1xuICAgICAgICB0aGlzLmdhaW5Ob2Rlc1tjaGFubmVsXS5nYWluLnNldFZhbHVlQXRUaW1lKDEsIHRoaXMuYXVkaW9DdHguY3VycmVudFRpbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHZvbHVtZSBvZiBhIGNoYW5uZWwgdXNpbmcgdGhlIEdhaW5Ob2RlIGZvciB0aGF0IGNoYW5uZWwuIEZvciBtb3JlXG4gICAgICogaW5mb3JtYXRpb24gb24gR2Fpbk5vZGVzLCBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0dhaW5Ob2RlXG4gICAgICogQHBhcmFtIGNoYW5uZWwgVGhlIGF1ZGlvIGNoYW5uZWwgdG8gc2V0IHRoZSB2b2x1bWUgZm9yXG4gICAgICogQHBhcmFtIHZvbHVtZSBUaGUgdm9sdW1lIG9mIHRoZSBjaGFubmVsLiAwIGlzIG11dGVkLiBWYWx1ZXMgYmVsb3cgemVybyB3aWxsIGJlIHNldCB0byB6ZXJvLlxuICAgICAqL1xuICAgIHN0YXRpYyBzZXRWb2x1bWUoY2hhbm5lbDogQXVkaW9DaGFubmVsVHlwZSwgdm9sdW1lOiBudW1iZXIpe1xuICAgICAgICBpZih2b2x1bWUgPCAwKXtcbiAgICAgICAgICAgIHZvbHVtZSA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhbSA9IEF1ZGlvTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuICAgICAgICBhbS5nYWluTm9kZXNbY2hhbm5lbF0uZ2Fpbi5zZXRWYWx1ZUF0VGltZSh2b2x1bWUsIGFtLmF1ZGlvQ3R4LmN1cnJlbnRUaW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBHYWluTm9kZSBmb3IgdGhpcyBjaGFubmVsLlxuICAgICAqIExlYXJuIG1vcmUgYWJvdXQgR2Fpbk5vZGVzIGhlcmUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0dhaW5Ob2RlXG4gICAgICogRE9OJ1QgVVNFIFRISVMgVU5MRVNTIFlPVSBLTk9XIFdIQVQgWU9VJ1JFIERPSU5HXG4gICAgICogQHBhcmFtIGNoYW5uZWwgVGhlIGNoYW5uZWxcbiAgICAgKiBAcmV0dXJucyBUaGUgR2Fpbk5vZGUgZm9yIHRoZSBzcGVjaWZpZWQgY2hhbm5lbFxuICAgICAqL1xuICAgIGdldENoYW5uZWxHYWluTm9kZShjaGFubmVsOiBBdWRpb0NoYW5uZWxUeXBlKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2Fpbk5vZGVzW2NoYW5uZWxdO1xuICAgIH1cbiAgICBcbiAgICB1cGRhdGUoZGVsdGFUOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgLy8gUGxheSBlYWNoIGF1ZGlvIGNsaXAgcmVxdWVzdGVkXG4gICAgICAgIC8vIFRPRE8gLSBBZGQgbG9naWMgdG8gbWVyZ2Ugc291bmRzIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSBvZiB0aGUgc2FtZSBrZXlcbiAgICAgICAgd2hpbGUodGhpcy5yZWNlaXZlci5oYXNOZXh0RXZlbnQoKSl7XG4gICAgICAgICAgICBsZXQgZXZlbnQgPSB0aGlzLnJlY2VpdmVyLmdldE5leHRFdmVudCgpO1xuICAgICAgICAgICAgaWYoZXZlbnQudHlwZSA9PT0gR2FtZUV2ZW50VHlwZS5QTEFZX1NPVU5EIHx8IGV2ZW50LnR5cGUgPT09IEdhbWVFdmVudFR5cGUuUExBWV9NVVNJQyB8fCBldmVudC50eXBlID09PSBHYW1lRXZlbnRUeXBlLlBMQVlfU0ZYKXtcbiAgICAgICAgICAgICAgICBsZXQgc291bmRLZXkgPSBldmVudC5kYXRhLmdldChcImtleVwiKTtcbiAgICAgICAgICAgICAgICBsZXQgbG9vcCA9IGV2ZW50LmRhdGEuZ2V0KFwibG9vcFwiKTtcbiAgICAgICAgICAgICAgICBsZXQgaG9sZFJlZmVyZW5jZSA9IGV2ZW50LmRhdGEuZ2V0KFwiaG9sZFJlZmVyZW5jZVwiKTtcblxuICAgICAgICAgICAgICAgIGxldCBjaGFubmVsID0gQXVkaW9DaGFubmVsVHlwZS5ERUZBVUxUO1xuXG4gICAgICAgICAgICAgICAgaWYoZXZlbnQudHlwZSA9PT0gR2FtZUV2ZW50VHlwZS5QTEFZX01VU0lDKXtcbiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbCA9IEF1ZGlvQ2hhbm5lbFR5cGUuTVVTSUM7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKEdhbWVFdmVudFR5cGUuUExBWV9TRlgpe1xuICAgICAgICAgICAgICAgICAgICBjaGFubmVsID0gQXVkaW9DaGFubmVsVHlwZS5TRlg7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKGV2ZW50LmRhdGEuaGFzKFwiY2hhbm5lbFwiKSl7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5uZWwgPSBldmVudC5kYXRhLmdldChcImNoYW5uZWxcIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5U291bmQoc291bmRLZXksIGxvb3AsIGhvbGRSZWZlcmVuY2UsIGNoYW5uZWwsIGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihldmVudC50eXBlID09PSBHYW1lRXZlbnRUeXBlLlNUT1BfU09VTkQpe1xuICAgICAgICAgICAgICAgIGxldCBzb3VuZEtleSA9IGV2ZW50LmRhdGEuZ2V0KFwia2V5XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcFNvdW5kKHNvdW5kS2V5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoZXZlbnQudHlwZSA9PT0gR2FtZUV2ZW50VHlwZS5NVVRFX0NIQU5ORUwpe1xuICAgICAgICAgICAgICAgIHRoaXMubXV0ZUNoYW5uZWwoZXZlbnQuZGF0YS5nZXQoXCJjaGFubmVsXCIpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoZXZlbnQudHlwZSA9PT0gR2FtZUV2ZW50VHlwZS5VTk1VVEVfQ0hBTk5FTCl7XG4gICAgICAgICAgICAgICAgdGhpcy51bm11dGVDaGFubmVsKGV2ZW50LmRhdGEuZ2V0KFwiY2hhbm5lbFwiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBlbnVtIEF1ZGlvQ2hhbm5lbFR5cGUge1xuICAgIERFRkFVTFQgPSAwLFxuICAgIFNGWCA9IDEsXG4gICAgTVVTSUMgPSAyLFxuICAgIENVU1RPTV8xID0gMyxcbiAgICBDVVNUT01fMiA9IDQsXG4gICAgQ1VTVE9NXzMgPSA1LFxuICAgIENVU1RPTV80ID0gNixcbiAgICBDVVNUT01fNSA9IDcsXG4gICAgQ1VTVE9NXzYgPSA4LFxuICAgIENVU1RPTV83ID0gOSxcbiAgICBDVVNUT01fOCA9IDEwLFxuICAgIENVU1RPTV85ID0gMTEsXG59XG5cbmV4cG9ydCBjb25zdCBNQVhfQVVESU9fQ0hBTk5FTFMgPSAxMjsiLCJpbXBvcnQgVXBkYXRlYWJsZSBmcm9tIFwiLi4vRGF0YVR5cGVzL0ludGVyZmFjZXMvVXBkYXRlYWJsZVwiO1xuaW1wb3J0IE1hdGhVdGlscyBmcm9tIFwiLi4vVXRpbHMvTWF0aFV0aWxzXCI7XG5pbXBvcnQgVGltZXJNYW5hZ2VyIGZyb20gXCIuL1RpbWVyTWFuYWdlclwiO1xuXG4vKiogKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpbWVyIGltcGxlbWVudHMgVXBkYXRlYWJsZSB7XG5cbiAgICAvKiogVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhpcyB0aW1lciAqL1xuICAgIHByb3RlY3RlZCBzdGF0ZTogVGltZXJTdGF0ZTtcbiAgICBcbiAgICAvKiogVGhlIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGlzIHRpbWVyIGVuZHMgKi9cbiAgICBwcm90ZWN0ZWQgb25FbmQ6IEZ1bmN0aW9uO1xuXG4gICAgLyoqIFdoZXRoZXIgb3Igbm90IHRoaXMgdGltZXIgc2hvdWxkIGxvb3AgKi9cbiAgICBwcm90ZWN0ZWQgbG9vcDogYm9vbGVhbjtcblxuICAgIC8qKiBUaGUgdG90YWwgYW1vdW50IG9mIHRpbWUgdGhpcyB0aW1lciBydW5zIGZvciAqL1xuICAgIHByb3RlY3RlZCB0b3RhbFRpbWU6IG51bWJlcjtcblxuICAgIC8qKiBUaGUgYW1vdW50IG9mIHRpbWUgbGVmdCBvbiB0aGUgY3VycmVudCBydW4gKi9cbiAgICBwcm90ZWN0ZWQgdGltZUxlZnQ6IG51bWJlcjtcblxuICAgIC8qKiBUaGUgbnVtYmVyIG9mIHRpbWVzIHRoaXMgdGltZXIgaGFzIGJlZW4gcnVuICovXG4gICAgcHJvdGVjdGVkIG51bVJ1bnM6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKHRpbWU6IG51bWJlciwgb25FbmQ/OiBGdW5jdGlvbiwgbG9vcDogYm9vbGVhbiA9IGZhbHNlKXtcbiAgICAgICAgLy8gUmVnaXN0ZXIgdGhpcyB0aW1lclxuICAgICAgICBUaW1lck1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5hZGRUaW1lcih0aGlzKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMudG90YWxUaW1lID0gdGltZTtcbiAgICAgICAgdGhpcy50aW1lTGVmdCA9IDA7XG4gICAgICAgIHRoaXMub25FbmQgPSBvbkVuZDtcbiAgICAgICAgdGhpcy5sb29wID0gbG9vcDtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbWVyU3RhdGUuU1RPUFBFRDtcbiAgICAgICAgdGhpcy5udW1SdW5zID0gMDtcbiAgICB9XG5cbiAgICBpc1N0b3BwZWQoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUgPT09IFRpbWVyU3RhdGUuU1RPUFBFRDtcbiAgICB9XG5cbiAgICBpc1BhdXNlZCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gVGltZXJTdGF0ZS5QQVVTRUQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGlzIHRpbWVyIGhhcyBiZWVuIHJ1biBiZWZvcmVcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIGl0IGhhcyBiZWVuIHJ1biBhdCBsZWFzdCBvbmNlIChhZnRlciB0aGUgbGF0ZXN0IHJlc2V0KSwgYW5kIGZhbHNlIG90aGVyd2lzZVxuICAgICAqL1xuICAgIGhhc1J1bigpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubnVtUnVucyA+IDA7XG4gICAgfVxuXG4gICAgc3RhcnQodGltZT86IG51bWJlcil7XG4gICAgICAgIGlmKHRpbWUgIT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICB0aGlzLnRvdGFsVGltZSA9IHRpbWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbWVyU3RhdGUuQUNUSVZFO1xuICAgICAgICB0aGlzLnRpbWVMZWZ0ID0gdGhpcy50b3RhbFRpbWU7XG4gICAgfVxuXG4gICAgLyoqIFJlc2V0cyB0aGlzIHRpbWVyLiBTZXRzIHRoZSBwcm9ncmVzcyBiYWNrIHRvIHplcm8sIGFuZCBzZXRzIHRoZSBudW1iZXIgb2YgcnVucyBiYWNrIHRvIHplcm8gKi9cbiAgICByZXNldCgpe1xuICAgICAgICB0aGlzLnRpbWVMZWZ0ID0gdGhpcy50b3RhbFRpbWU7XG4gICAgICAgIHRoaXMubnVtUnVucyA9IDA7XG4gICAgfVxuXG4gICAgcGF1c2UoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBUaW1lclN0YXRlLlBBVVNFRDtcbiAgICB9XG5cbiAgICB1cGRhdGUoZGVsdGFUOiBudW1iZXIpe1xuICAgICAgICBpZih0aGlzLnN0YXRlID09PSBUaW1lclN0YXRlLkFDVElWRSl7XG4gICAgICAgICAgICB0aGlzLnRpbWVMZWZ0IC09IGRlbHRhVCoxMDAwO1xuXG4gICAgICAgICAgICBpZih0aGlzLnRpbWVMZWZ0IDw9IDApe1xuICAgICAgICAgICAgICAgIHRoaXMudGltZUxlZnQgPSBNYXRoVXRpbHMuY2xhbXBMb3cwKHRoaXMudGltZUxlZnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZW5kKCl7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgc3RhdGVcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbWVyU3RhdGUuU1RPUFBFRDtcbiAgICAgICAgdGhpcy5udW1SdW5zICs9IDE7XG5cbiAgICAgICAgLy8gQ2FsbCB0aGUgZW5kIGZ1bmN0aW9uIGlmIHRoZXJlIGlzIG9uZVxuICAgICAgICBpZih0aGlzLm9uRW5kKXtcbiAgICAgICAgICAgIHRoaXMub25FbmQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExvb3AgaWYgd2Ugd2FudCB0b1xuICAgICAgICBpZih0aGlzLmxvb3Ape1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbWVyU3RhdGUuQUNUSVZFO1xuICAgICAgICAgICAgdGhpcy50aW1lTGVmdCA9IHRoaXMudG90YWxUaW1lO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdG9TdHJpbmcoKTogc3RyaW5ne1xuICAgICAgICByZXR1cm4gXCJUaW1lcjogXCIgKyB0aGlzLnN0YXRlICsgXCIgLSBUaW1lIExlZnQ6IFwiICsgdGhpcy50aW1lTGVmdCArIFwibXMgb2YgXCIgKyB0aGlzLnRvdGFsVGltZSArIFwibXNcIjtcbiAgICB9XG59XG5cbmV4cG9ydCBlbnVtIFRpbWVyU3RhdGUge1xuICAgIEFDVElWRSA9IFwiQUNUSVZFXCIsXG4gICAgUEFVU0VEID0gXCJQQVVTRURcIixcbiAgICBTVE9QUEVEID0gXCJTVE9QUEVEXCJcbn0iLCJpbXBvcnQgVXBkYXRlYWJsZSBmcm9tIFwiLi4vRGF0YVR5cGVzL0ludGVyZmFjZXMvVXBkYXRlYWJsZVwiO1xuaW1wb3J0IFRpbWVyIGZyb20gXCIuL1RpbWVyXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpbWVyTWFuYWdlciBpbXBsZW1lbnRzIFVwZGF0ZWFibGUge1xuXG4gICAgcHJvdGVjdGVkIHRpbWVyczogQXJyYXk8VGltZXI+O1xuXG4gICAgY29uc3RydWN0b3IoKXtcbiAgICAgICAgdGhpcy50aW1lcnMgPSBuZXcgQXJyYXkoKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgc3RhdGljIGluc3RhbmNlOiBUaW1lck1hbmFnZXI7XG5cbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogVGltZXJNYW5hZ2VyIHtcbiAgICAgICAgaWYoIXRoaXMuaW5zdGFuY2Upe1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZSA9IG5ldyBUaW1lck1hbmFnZXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlO1xuICAgIH1cblxuICAgIGFkZFRpbWVyKHRpbWVyOiBUaW1lcil7XG4gICAgICAgIHRoaXMudGltZXJzLnB1c2godGltZXIpO1xuICAgIH1cblxuICAgIGNsZWFyVGltZXJzKCl7XG4gICAgICAgIHRoaXMudGltZXJzID0gbmV3IEFycmF5KCk7XG4gICAgfVxuXG4gICAgdXBkYXRlKGRlbHRhVDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMudGltZXJzLmZvckVhY2godGltZXIgPT4gdGltZXIudXBkYXRlKGRlbHRhVCkpO1xuICAgIH1cbn0iLCJpbXBvcnQgTWF0aFV0aWxzIGZyb20gXCIuL01hdGhVdGlsc1wiO1xuXG4vLyBUT0RPOiBUaGlzIHNob3VsZCBiZSBtb3ZlZCB0byB0aGUgZGF0YXR5cGVzIGZvbGRlclxuLyoqXG4gKiBBIENvbG9yIHV0aWwgY2xhc3MgdGhhdCBrZWVwcyB0cmFjayBvZiBjb2xvcnMgbGlrZSBhIHZlY3RvciwgYnV0IGNhbiBiZSBjb252ZXJ0ZWQgaW50byBhIHN0cmluZyBmb3JtYXRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29sb3Ige1xuXHQvKiogVGhlIHJlZCB2YWx1ZSAqL1xuXHRwdWJsaWMgcjogbnVtYmVyO1xuXHQvKiogVGhlIGdyZWVuIHZhbHVlICovXG5cdHB1YmxpYyBnOiBudW1iZXI7XG5cdC8qKiBUaGUgYmx1ZSB2YWx1ZSAqL1xuXHRwdWJsaWMgYjogbnVtYmVyO1xuXHQvKiogVGhlIGFscGhhIHZhbHVlICovXG5cdHB1YmxpYyBhOiBudW1iZXI7XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBuZXcgY29sb3Jcblx0ICogQHBhcmFtIHIgUmVkXG5cdCAqIEBwYXJhbSBnIEdyZWVuXG5cdCAqIEBwYXJhbSBiIEJsdWVcblx0ICogQHBhcmFtIGEgQWxwaGFcblx0ICovXG5cdGNvbnN0cnVjdG9yKHI6IG51bWJlciA9IDAsIGc6IG51bWJlciA9IDAsIGI6IG51bWJlciA9IDAsIGE6IG51bWJlciA9IDEpe1xuICAgICAgICB0aGlzLnIgPSByO1xuICAgICAgICB0aGlzLmcgPSBnO1xuICAgICAgICB0aGlzLmIgPSBiO1xuICAgICAgICB0aGlzLmEgPSBhO1xuXHR9XG5cblx0LyoqXHRcblx0ICogVHJhbnNwYXJlbnQgY29sb3Jcblx0ICogQHJldHVybnMgcmdiYSgwLCAwLCAwLCAwKVxuXHQgKi9cblx0c3RhdGljIGdldCBUUkFOU1BBUkVOVCgpOiBDb2xvciB7XG5cdFx0cmV0dXJuIG5ldyBDb2xvcigwLCAwLCAwLCAwKTtcblx0fVxuXHRcblx0LyoqXHRcblx0ICogUmVkIGNvbG9yXG5cdCAqIEByZXR1cm5zIHJnYigyNTUsIDAsIDApXG5cdCAqL1xuXHRzdGF0aWMgZ2V0IFJFRCgpOiBDb2xvciB7XG5cdFx0cmV0dXJuIG5ldyBDb2xvcigyNTUsIDAsIDAsIDEpO1xuXHR9XG5cblx0LyoqXHRcblx0ICogR3JlZW4gY29sb3Jcblx0ICogQHJldHVybnMgcmdiKDAsIDI1NSwgMClcblx0ICovXG5cdHN0YXRpYyBnZXQgR1JFRU4oKTogQ29sb3Ige1xuXHRcdHJldHVybiBuZXcgQ29sb3IoMCwgMjU1LCAwLCAxKTtcblx0fVxuXG5cdC8qKlx0XG5cdCAqIEJsdWUgY29sb3Jcblx0ICogQHJldHVybnMgcmdiKDAsIDAsIDI1NSlcblx0ICovXG5cdHN0YXRpYyBnZXQgQkxVRSgpOiBDb2xvciB7XG5cdFx0cmV0dXJuIG5ldyBDb2xvcigwLCAwLCAyNTUsIDEpO1xuXHR9XG5cblx0LyoqXHRcblx0ICogWWVsbG93IGNvbG9yXG5cdCAqIEByZXR1cm5zIHJnYigyNTUsIDI1NSwgMClcblx0ICovXG5cdHN0YXRpYyBnZXQgWUVMTE9XKCk6IENvbG9yIHtcblx0XHRyZXR1cm4gbmV3IENvbG9yKDI1NSwgMjU1LCAwLCAxKTtcblx0fVxuXG5cdC8qKlx0XG5cdCAqIE1hZ2VudGEgY29sb3Jcblx0ICogQHJldHVybnMgcmdiKDI1NSwgMCwgMjU1KVxuXHQgKi9cblx0c3RhdGljIGdldCBNQUdFTlRBKCk6IENvbG9yIHtcblx0XHRyZXR1cm4gbmV3IENvbG9yKDI1NSwgMCwgMjU1LCAxKTtcblx0fVxuXG5cdC8qKlx0XG5cdCAqIEN5YW4gY29sb3Jcblx0ICogQHJldHVybnMgcmdiKDAsIDI1NSwgMjU1KVxuXHQgKi9cblx0c3RhdGljIGdldCBDWUFOKCk6IENvbG9yIHtcblx0XHRyZXR1cm4gbmV3IENvbG9yKDAsIDI1NSwgMjU1LCAxKTtcblx0fVxuXG5cdC8qKlx0XG5cdCAqIFdoaXRlIGNvbG9yXG5cdCAqIEByZXR1cm5zIHJnYigyNTUsIDI1NSwgMjU1KVxuXHQgKi9cblx0c3RhdGljIGdldCBXSElURSgpOiBDb2xvciB7XG5cdFx0cmV0dXJuIG5ldyBDb2xvcigyNTUsIDI1NSwgMjU1LCAxKTtcblx0fSBcblxuXHQvKipcdFxuXHQgKiBCbGFjayBjb2xvclxuXHQgKiBAcmV0dXJucyByZ2IoMCwgMCwgMClcblx0ICovXG5cdHN0YXRpYyBnZXQgQkxBQ0soKTogQ29sb3Ige1xuXHRcdHJldHVybiBuZXcgQ29sb3IoMCwgMCwgMCwgMSk7XG5cdH1cblxuXHQvKipcdFxuXHQgKiBPcmFuZ2UgY29sb3Jcblx0ICogQHJldHVybnMgcmdiKDI1NSwgMTAwLCAwKVxuXHQgKi9cblx0c3RhdGljIGdldCBPUkFOR0UoKTogQ29sb3Ige1xuXHRcdHJldHVybiBuZXcgQ29sb3IoMjU1LCAxMDAsIDAsIDEpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNldHMgdGhlIGNvbG9yIHRvIHRoZSB2YWx1ZXMgcHJvdmlkZWRcblx0ICogQHBhcmFtIHIgUmVkXG5cdCAqIEBwYXJhbSBnIEdyZWVuXG5cdCAqIEBwYXJhbSBiIEJsdWVcblx0ICogQHBhcmFtIGEgQWxwaGFcblx0ICovXG5cdHNldChyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyLCBhOiBudW1iZXIgPSAxKTogdm9pZCB7XG5cdFx0dGhpcy5yID0gcjtcblx0XHR0aGlzLmcgPSBnO1xuXHRcdHRoaXMuYiA9IGI7XG5cdFx0dGhpcy5hID0gYTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIGEgbmV3IGNvbG9yIHNsaWdodGx5IGxpZ2h0ZXIgdGhhbiB0aGUgY3VycmVudCBjb2xvclxuXHQgKiBAcmV0dXJucyBBIG5ldyBsaWdodGVyIENvbG9yXG5cdCAqL1xuXHRsaWdodGVuKCk6IENvbG9yIHtcblx0XHRyZXR1cm4gbmV3IENvbG9yKE1hdGhVdGlscy5jbGFtcCh0aGlzLnIgKyA0MCwgMCwgMjU1KSwgTWF0aFV0aWxzLmNsYW1wKHRoaXMuZyArIDQwLCAwLCAyNTUpLCBNYXRoVXRpbHMuY2xhbXAodGhpcy5iICsgNDAsIDAsIDI1NSksIE1hdGhVdGlscy5jbGFtcCh0aGlzLmEgKyAxMCwgMCwgMjU1KSk7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyBhIG5ldyBjb2xvciBzbGlnaHRseSBkYXJrZXIgdGhhbiB0aGUgY3VycmVudCBjb2xvclxuXHQgKiBAcmV0dXJucyBBIG5ldyBkYXJrZXIgQ29sb3Jcblx0ICovXG5cdGRhcmtlbigpOiBDb2xvciB7XG5cdFx0cmV0dXJuIG5ldyBDb2xvcihNYXRoVXRpbHMuY2xhbXAodGhpcy5yIC0gNDAsIDAsIDI1NSksIE1hdGhVdGlscy5jbGFtcCh0aGlzLmcgLSA0MCwgMCwgMjU1KSwgTWF0aFV0aWxzLmNsYW1wKHRoaXMuYiAtIDQwLCAwLCAyNTUpLCBNYXRoVXRpbHMuY2xhbXAodGhpcy5hICsgMTAsIDAsIDI1NSkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmV0dXJucyB0aGlzIGNvbG9yIGFzIGFuIGFycmF5XG5cdCAqIEByZXR1cm5zIFtyLCBnLCBiLCBhXVxuXHQgKi9cblx0dG9BcnJheSgpOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXSB7XG5cdFx0cmV0dXJuIFt0aGlzLnIsIHRoaXMuZywgdGhpcy5iLCB0aGlzLmFdO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmV0dXJucyB0aGUgY29sb3IgYXMgYSBzdHJpbmcgb2YgdGhlIGZvcm0gI1JSR0dCQlxuXHQgKiBAcmV0dXJucyAjUlJHR0JCXG5cdCAqL1xuXHR0b1N0cmluZygpOiBzdHJpbmcge1xuXHRcdHJldHVybiBcIiNcIiArIE1hdGhVdGlscy50b0hleCh0aGlzLnIsIDIpICsgTWF0aFV0aWxzLnRvSGV4KHRoaXMuZywgMikgKyBNYXRoVXRpbHMudG9IZXgodGhpcy5iLCAyKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRoZSBjb2xvciBhcyBhIHN0cmluZyBvZiB0aGUgZm9ybSByZ2IociwgZywgYilcblx0ICogQHJldHVybnMgcmdiKHIsIGcsIGIpXG5cdCAqL1xuXHR0b1N0cmluZ1JHQigpOiBzdHJpbmcge1xuXHRcdHJldHVybiBcInJnYihcIiArIHRoaXMuci50b1N0cmluZygpICsgXCIsIFwiICsgdGhpcy5nLnRvU3RyaW5nKCkgKyBcIiwgXCIgKyB0aGlzLmIudG9TdHJpbmcoKSArIFwiKVwiO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIGNvbG9yIGFzIGEgc3RyaW5nIG9mIHRoZSBmb3JtIHJnYmEociwgZywgYiwgYSlcblx0ICogQHJldHVybnMgcmdiYShyLCBnLCBiLCBhKVxuXHQgKi9cblx0dG9TdHJpbmdSR0JBKCk6IHN0cmluZyB7XG5cdFx0aWYodGhpcy5hID09PSAwKXtcblx0XHRcdHJldHVybiB0aGlzLnRvU3RyaW5nUkdCKCk7XG5cdFx0fVxuXHRcdHJldHVybiBcInJnYmEoXCIgKyB0aGlzLnIudG9TdHJpbmcoKSArIFwiLCBcIiArIHRoaXMuZy50b1N0cmluZygpICsgXCIsIFwiICsgdGhpcy5iLnRvU3RyaW5nKCkgKyBcIiwgXCIgKyB0aGlzLmEudG9TdHJpbmcoKSArXCIpXCJcblx0fVxuXG5cdC8qKlxuXHQgKiBUdXJucyB0aGlzIGNvbG9yIGludG8gYSBmbG9hdDMyQXJyYXkgYW5kIGNoYW5nZXMgY29sb3IgcmFuZ2UgdG8gWzAuMCwgMS4wXVxuXHQgKiBAcmV0dXJucyBhIEZsb2F0MzJBcnJheSBjb250YWluaW5nIHRoZSBjb2xvclxuXHQgKi9cblx0dG9XZWJHTCgpOiBGbG9hdDMyQXJyYXkge1xuXHRcdHJldHVybiBuZXcgRmxvYXQzMkFycmF5KFtcblx0XHRcdHRoaXMuci8yNTUsXG5cdFx0XHR0aGlzLmcvMjU1LFxuXHRcdFx0dGhpcy5iLzI1NSxcblx0XHRcdHRoaXMuYVxuXHRcdF0pO1xuXHR9XG5cblx0c3RhdGljIGZyb21TdHJpbmdIZXgoc3RyOiBzdHJpbmcpOiBDb2xvciB7XG5cdFx0bGV0IGkgPSAwO1xuXHRcdGlmKHN0ci5jaGFyQXQoMCkgPT0gXCIjXCIpIGkrPSAxO1xuXHRcdGxldCByID0gTWF0aFV0aWxzLmZyb21IZXgoc3RyLnN1YnN0cmluZyhpLCBpKzIpKTtcblx0XHRsZXQgZyA9IE1hdGhVdGlscy5mcm9tSGV4KHN0ci5zdWJzdHJpbmcoaSsyLCBpKzQpKTtcblx0XHRsZXQgYiA9IE1hdGhVdGlscy5mcm9tSGV4KHN0ci5zdWJzdHJpbmcoaSs0LCBpKzYpKTtcblx0XHRyZXR1cm4gbmV3IENvbG9yKHIsIGcsIGIpO1xuXHR9XG59IiwiLy8gQGlnbm9yZVBhZ2VcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRWFzZUZ1bmN0aW9ucyB7XG5cbiAgICBzdGF0aWMgZWFzZUluT3V0U2luZSh4OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gLShNYXRoLmNvcyhNYXRoLlBJICogeCkgLSAxKSAvIDI7XG4gICAgfVxuXG4gICAgc3RhdGljIGVhc2VPdXRJblNpbmUoeDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHggPCAwLjUgPyAtTWF0aC5jb3MoTWF0aC5QSSooeCArIDAuNSkpLzIgOiAtTWF0aC5jb3MoTWF0aC5QSSooeCAtIDAuNSkpLzIgKyAxO1xuICAgIH1cblxuICAgIHN0YXRpYyBlYXNlT3V0U2luZSh4OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gTWF0aC5zaW4oKHggKiBNYXRoLlBJKSAvIDIpO1xuICAgIH1cblxuICAgIHN0YXRpYyBlYXNlSW5TaW5lKHg6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiAxIC0gTWF0aC5jb3MoKHggKiBNYXRoLlBJKSAvIDIpOyBcbiAgICB9XG5cbiAgICBzdGF0aWMgZWFzZUluT3V0UXVpbnQoeDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHggPCAwLjUgPyAxNiAqIHggKiB4ICogeCAqIHggKiB4IDogMSAtIE1hdGgucG93KC0yICogeCArIDIsIDUpIC8gMjsgICAgXG4gICAgfVxuXG4gICAgc3RhdGljIGVhc2VJbk91dFF1YWQoeDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHggPCAwLjUgPyAyICogeCAqIHggOiAxIC0gTWF0aC5wb3coLTIgKiB4ICsgMiwgMikgLyAyO1xuICAgIH1cblxuICAgIHN0YXRpYyBlYXNlT3V0SW5RdWFkKHg6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB4IDwgMC41ID8gdGhpcy5lYXNlT3V0SW5fT3V0UG93KHgsIDIpIDogdGhpcy5lYXNlT3V0SW5fSW5Qb3coeCwgMik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZWFzZU91dEluX091dFBvdyh4OiBudW1iZXIsIHBvdzogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIDAuNSAtIE1hdGgucG93KC0yICogeCArIDEsIHBvdykgLyAyO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGVhc2VPdXRJbl9JblBvdyh4OiBudW1iZXIsIHBvdzogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIDAuNSArIE1hdGgucG93KDIgKiB4IC0gMSwgcG93KSAvIDI7XG4gICAgfVxufVxuXG5leHBvcnQgZW51bSBFYXNlRnVuY3Rpb25UeXBlIHtcbiAgICAvLyBTSU5FXG4gICAgSU5fT1VUX1NJTkUgPSBcImVhc2VJbk91dFNpbmVcIixcbiAgICBPVVRfSU5fU0lORSA9IFwiZWFzZU91dEluU2luZVwiLFxuICAgIElOX1NJTkUgPSBcImVhc2VJblNpbmVcIixcbiAgICBPVVRfU0lORSA9IFwiZWFzZU91dFNpbmVcIixcblxuICAgIC8vIFFVQURcbiAgICBJTl9PVVRfUVVBRCA9IFwiZWFzZUluT3V0UXVhZFwiLFxuICAgIE9VVF9JTl9RVUFEID0gXCJlYXNlT3V0SW5RdWFkXCIsXG5cbiAgICAvLyBRVUlOVFxuICAgIElOX09VVF9RVUlOVCA9IFwiZWFzZUluT3V0UXVpbnRcIlxufSIsImltcG9ydCBHcmFwaCBmcm9tIFwiLi4vRGF0YVR5cGVzL0dyYXBocy9HcmFwaFwiO1xuaW1wb3J0IEVkZ2VOb2RlIGZyb20gXCIuLi9EYXRhVHlwZXMvR3JhcGhzL0VkZ2VOb2RlXCI7XG5pbXBvcnQgQmluYXJ5SGVhcFNldCBmcm9tIFwiLi4vRGF0YVR5cGVzL0NvbGxlY3Rpb25zL0JpbmFyeUhlYXBTZXRcIjtcblxuLyoqIEEgY2xhc3MgdG8gcHJvdmlkZXMgc29tZSB1dGlsaXR5IGZ1bmN0aW9ucyBmb3IgZ3JhcGhzICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHcmFwaFV0aWxzIHtcblxuXHQvKipcblx0ICogQW4gaW1wbGVtZW50YXRpb24gb2YgRGppa3N0cmEncyBzaG9ydGVzdCBwYXRoIGFsZ29yaXRobSBiYXNlZCBvbiB0aGUgb25lIGRlc2NyaWJlZCBpbiBUaGUgQWxnb3JpdGhtIERlc2lnbiBNYW51YWwuXG5cdCAqIEBwYXJhbSBnIFRoZSBncmFwaFxuXHQgKiBAcGFyYW0gc3RhcnQgVGhlIG51bWJlciB0byBzdGFydCB0aGUgc2hvcnRlc3QgcGF0aCBmcm9tXG5cdCAqIEByZXR1cm5zIEFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIHBhcmVudCBvZiBlYWNoIG5vZGUgb2YgdGhlIEdyYXBoIGluIHRoZSBzaG9ydGVzdCBwYXRoLlxuXHQgKi9cblx0c3RhdGljIGRqaWtzdHJhKGc6IEdyYXBoLCBzdGFydDogbnVtYmVyKTogQXJyYXk8bnVtYmVyPiB7XG5cdFx0bGV0IGk6IG51bWJlcjtcdFx0Ly8gQ291bnRlclxuXHRcdGxldCBwOiBFZGdlTm9kZTtcdC8vIFBvaW50ZXIgdG8gZWRnZW5vZGVcblx0XHRsZXQgaW5UcmVlOiBBcnJheTxib29sZWFuPiA9IG5ldyBBcnJheShnLm51bVZlcnRpY2VzKTtcblx0XHRsZXQgZGlzdGFuY2U6IEFycmF5PG51bWJlcj4gPSBuZXcgQXJyYXkoZy5udW1WZXJ0aWNlcyk7XG5cdFx0bGV0IHBhcmVudDogQXJyYXk8bnVtYmVyPiA9IG5ldyBBcnJheShnLm51bVZlcnRpY2VzKTtcblx0XHRsZXQgdjogbnVtYmVyO1x0XHQvLyBDdXJyZW50IHZlcnRleCB0byBwcm9jZXNzXG5cdFx0bGV0IHc6IG51bWJlcjsgXHRcdC8vIENhbmRpZGF0ZSBmb3IgbmV4dCB2ZXJ0ZXhcblx0XHRsZXQgd2VpZ2h0OiBudW1iZXI7XHQvLyBFZGdlIHdlaWdodFxuXHRcdGxldCBkaXN0O1x0XHRcdC8vIEJlc3QgY3VycmVudCBkaXN0YW5jZSBmcm9tIHN0YXJ0XG5cblx0XHRmb3IoaSA9IDA7IGkgPCBnLm51bVZlcnRpY2VzOyBpKyspe1xuXHRcdFx0aW5UcmVlW2ldID0gZmFsc2U7XG5cdFx0XHRkaXN0YW5jZVtpXSA9IEluZmluaXR5O1xuXHRcdFx0cGFyZW50W2ldID0gLTE7XG5cdFx0fVxuXG5cdFx0ZGlzdGFuY2Vbc3RhcnRdID0gMDtcblx0XHR2ID0gc3RhcnQ7XG5cblx0XHR3aGlsZSghaW5UcmVlW3ZdKXtcblx0XHRcdGluVHJlZVt2XSA9IHRydWU7XG5cdFx0XHRwID0gZy5lZGdlc1t2XTtcblxuXHRcdFx0d2hpbGUocCAhPT0gbnVsbCl7XG5cdFx0XHRcdHcgPSBwLnk7XG5cdFx0XHRcdHdlaWdodCA9IHAud2VpZ2h0O1xuXG5cdFx0XHRcdGlmKGRpc3RhbmNlW3ddID4gZGlzdGFuY2Vbdl0gKyB3ZWlnaHQpe1xuXHRcdFx0XHRcdGRpc3RhbmNlW3ddID0gZGlzdGFuY2Vbdl0gKyB3ZWlnaHQ7XG5cdFx0XHRcdFx0cGFyZW50W3ddID0gdjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHAgPSBwLm5leHQ7XG5cdFx0XHR9XG5cblx0XHRcdHYgPSAwO1xuXG5cdFx0XHRkaXN0ID0gSW5maW5pdHk7XG5cblx0XHRcdGZvcihpID0gMDsgaSA8PSBnLm51bVZlcnRpY2VzOyBpKyspe1xuXHRcdFx0XHRpZighaW5UcmVlW2ldICYmIGRpc3QgPiBkaXN0YW5jZVtpXSl7XG5cdFx0XHRcdFx0ZGlzdCA9IGRpc3RhbmNlO1xuXHRcdFx0XHRcdHYgPSBpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHBhcmVudDtcblxuXHR9XG5cblx0LyoqXG5cdCAqIEFuIGltcGxlbWVudGF0aW9uIG9mIHRoZSBBKiBhbGdvcml0aG1cblx0ICogQHBhcmFtIGcgdGhlIGdyYXBoIHRvIHNlYXJjaFxuXHQgKiBAcGFyYW0gc3RhcnQgdGhlIG5vZGUgaW4gdGhlIGdyYXBoLCBnLCB0byBzdGFydCBzZWFyY2hpbmcgZnJvbVxuXHQgKiBAcGFyYW0gZ29hbCB0aGUgbm9kZSBpbiB0aGUgZ3JhcGgsIGcsIHRoYXQgQSogc2hvdWxkIHRyeSB0byByZWFjaFxuXHQgKiBAcGFyYW0gaGV1cmlzdGljIHRoZSBoZXVyaXN0aWMgZnVuY3Rpb24gdXNlZCB0byBjYWxjdWxhdGUgdGhlIGYtc2NvcmUgb2YgYSBub2RlIGluIHRoZSBncmFwaCwgZ1xuXHQgKiBAcmV0dXJuIGlmIGEgcGF0aCBiZXR3ZWVuIHN0YXJ0IGFuZCBnb2FsIGV4aXN0cywgYW4gYXJyYXkgb2Ygbm9kZXMgcmVwcmVzZW50aW5nIHRoZSBwYXRoIGZyb20gc3RhcnQgXG5cdCAqIHRvIGdvYWwgZm91bmQgYnkgQSo7IG90aGVyd2lzZSBudWxsXG5cdCAqL1xuXHRzdGF0aWMgYXN0YXIoZzogR3JhcGgsIHN0YXJ0OiBudW1iZXIsIGdvYWw6IG51bWJlciwgaGV1cmlzdGljOiAobm9kZTogbnVtYmVyKSA9PiBudW1iZXIpOiBBcnJheTxudW1iZXI+IHtcblxuXHRcdC8vIENvbnN0cnVjdCBhIG5ldyBtYXAgb2YgdGhlIGdTY29yZXMgLSBzdGFydCBnZXRzIGEgZ1Njb3JlIG9mIDBcblx0XHRsZXQgZ1Njb3JlID0gbmV3IE1hcDxudW1iZXIsIG51bWJlcj4oKTtcblx0XHRnU2NvcmUuc2V0KHN0YXJ0LCAwKTtcblxuXHRcdC8vIENvbnN0cnVjdCBhIG5ldyBtYXAgb2YgdGhlIGZTY29yZXMgLSBmKG4pID0gZyhuKSArIGgobilcblx0XHRsZXQgZlNjb3JlID0gbmV3IE1hcDxudW1iZXIsIG51bWJlcj4oKTtcblx0XHRmU2NvcmUuc2V0KHN0YXJ0LCBoZXVyaXN0aWMoc3RhcnQpKTtcblxuXHRcdC8vIENvbnN0cnVjdCBhIG5ldyBtYXAgdG8gaG9sZCB0aGUgcGF0aCBmcm9tIHN0YXJ0IHRvIGdvYWxcblx0XHRsZXQgY2FtZUZyb20gPSBuZXcgTWFwPG51bWJlciwgbnVtYmVyPigpO1xuXG5cdFx0Ly8gVGhlIG9wZW4tc2V0IG9mIG5vZGVzIHRvIGJlIGV4cGxvcmVkLiBTdGFydHMgb2ZmIHdpdGgganVzdCBzdGFydGluZyBub2RlXG5cdFx0bGV0IG9wZW5TZXQgPSBuZXcgQmluYXJ5SGVhcFNldDxudW1iZXI+KChlMSwgZTIpID0+IHtcblx0XHRcdGxldCBlMWZTY29yZSA9IGZTY29yZS5oYXMoZTEpID8gZlNjb3JlLmdldChlMSkgOiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG5cdFx0XHRsZXQgZTJmU2NvcmUgPSBmU2NvcmUuaGFzKGUyKSA/IGZTY29yZS5nZXQoZTIpIDogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuXHRcdFx0aWYgKGUxZlNjb3JlIDwgZTJmU2NvcmUpIHJldHVybiAxO1xuXHRcdFx0cmV0dXJuIDBcblx0XHR9KVxuXHRcdG9wZW5TZXQucHVzaChzdGFydCk7XG5cblx0XHQvLyBXaGlsZSB0aGVyZSBhcmUgZWxlbWVudHMgaW4gdGhlIG9wZW5TZXQgLSBleHBsb3JlIHRoZSBub2Rlc1xuXHRcdHdoaWxlICghb3BlblNldC5pc0VtcHR5KCkpIHtcblxuXHRcdFx0bGV0IGN1cnJlbnQgPSBvcGVuU2V0LnBlZWsoKTtcblxuXHRcdFx0Ly8gSWYgdGhlIG5leHQgbm9kZSBpcyB0aGUgZ29hbCAtIHJldHVybiB0aGUgcGF0aFxuXHRcdFx0aWYgKGN1cnJlbnQgPT09IGdvYWwpIHtcblx0XHRcdFx0bGV0IHJlcyA9IEdyYXBoVXRpbHMuYXN0YXJQYXRoQnVpbGRlcihjYW1lRnJvbSwgY3VycmVudCk7XG5cdFx0XHRcdHJldHVybiByZXM7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE90aGVyd2lzZSAtIHJlbW92ZSB0aGUgY3VycmVudCBub2RlIGZyb20gdGhlIG9wZW5TZXQgYW5kIGV4cGxvcmUgaXQncyBuZWlnaGJvcnNcblx0XHRcdG9wZW5TZXQucG9wKCk7XG5cblx0XHRcdC8vIEl0ZXJhdGUgdGhyb3VnaCB0aGUgY3VycmVudCBub2RlJ3MgZWRnZSBsaXN0XG5cdFx0XHRsZXQgZWRnZSA9IGcuZWRnZXNbY3VycmVudF1cblxuXHRcdFx0d2hpbGUgKGVkZ2UgIT09IG51bGwgJiYgZWRnZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdC8vIEdldCB0aGUgbmVpZ2hib3Igbm9kZSBmcm9tIHRoZSBlZGdlXG5cdFx0XHRcdGxldCBuZWlnaGJvciA9IGVkZ2UueTtcblxuXHRcdFx0XHQvLyBHZXQgdGVudGF0aXZlIGdzY29yZVxuXHRcdFx0XHRsZXQgdGVudGF0aXZlX2dzY29yZSA9IGdTY29yZS5nZXQoY3VycmVudCkgKyBlZGdlLndlaWdodDtcblxuXHRcdFx0XHQvLyBHZXQgbmVpZ2hib3JzIGdzY29yZSAtIGlmIG5laWdoYm9yIGRvZXNuJ3QgaGF2ZSBhIGdzY29yZSwgZGVmYXVsdCBpcyBwb3NpdGl2ZSBpbmZpbml0eVxuXHRcdFx0XHRsZXQgbmVpZ2hib3JfZ3Njb3JlID0gZ1Njb3JlLmhhcyhuZWlnaGJvcikgPyBnU2NvcmUuZ2V0KG5laWdoYm9yKSA6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcblxuXHRcdFx0XHRpZiAodGVudGF0aXZlX2dzY29yZSA8IG5laWdoYm9yX2dzY29yZSkge1xuXG5cdFx0XHRcdFx0Y2FtZUZyb20uc2V0KG5laWdoYm9yLCBjdXJyZW50KTtcblx0XHRcdFx0XHRnU2NvcmUuc2V0KG5laWdoYm9yLCB0ZW50YXRpdmVfZ3Njb3JlKTtcblx0XHRcdFx0XHRmU2NvcmUuc2V0KG5laWdoYm9yLCB0ZW50YXRpdmVfZ3Njb3JlICsgaGV1cmlzdGljKG5laWdoYm9yKSk7XG5cblx0XHRcdFx0XHQvLyBJZiB0aGUgb3BlblNldCBhbHJlYWR5IGNvbnRhaW5zIHRoZSBuZWlnaGJvciwgdGhlbiByZXN0b3JlIHRoZSBoZWFwIGFib3V0IHRoZSBuZWlnaGJvclxuXHRcdFx0XHRcdGlmIChvcGVuU2V0LmhhcyhuZWlnaGJvcikpIHtcblx0XHRcdFx0XHRcdG9wZW5TZXQucmVzdG9yZShuZWlnaGJvcik7XG5cdFx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCB0aGUgb3BlblNldCBkb2Vzbid0IGNvbnRhaW4gdGhlIG5laWdoYm9yLCBzbyB3ZSBhZGQgdGhlIG5laWdoYm9yIHRvIHRoZSBvcGVuU2V0XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdG9wZW5TZXQucHVzaChuZWlnaGJvcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZWRnZSA9IGVkZ2UubmV4dDtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHRwcml2YXRlIHN0YXRpYyBhc3RhclBhdGhCdWlsZGVyKGNhbWVGcm9tOiBNYXA8bnVtYmVyLCBudW1iZXI+LCBjdXJyZW50OiBudW1iZXIpOiBBcnJheTxudW1iZXI+IHtcblx0XHRsZXQgcGF0aCA9IG5ldyBBcnJheSgpO1xuXHRcdHBhdGgucHVzaChjdXJyZW50KTtcblx0XHR3aGlsZSAoY2FtZUZyb20uaGFzKGN1cnJlbnQpKSB7XG5cdFx0XHRjdXJyZW50ID0gY2FtZUZyb20uZ2V0KGN1cnJlbnQpO1xuXHRcdFx0cGF0aC5wdXNoKGN1cnJlbnQpO1xuXHRcdH1cblx0XHRwYXRoLnJldmVyc2UoKTtcblx0XHRyZXR1cm4gcGF0aDtcblx0fSAgICBcbn0iLCJpbXBvcnQgVmVjMiBmcm9tIFwiLi4vRGF0YVR5cGVzL1ZlYzJcIjtcblxuLyoqIEEgY2xhc3MgY29udGFpbmluZyBzb21lIHV0aWxpdHkgZnVuY3Rpb25zIGZvciBtYXRoIG9wZXJhdGlvbnMgKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hdGhVdGlscyB7XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgc2lnbiBvZiB0aGUgdmFsdWUgcHJvdmlkZWRcbiAgICAgKiBAcGFyYW0geCBUaGUgdmFsdWUgdG8gZXh0cmFjdCB0aGUgc2lnbiBmcm9tXG4gICAgICogQHJldHVybnMgLTEgaWYgdGhlIG51bWJlciBpcyBsZXNzIHRoYW4gMCwgMSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgc2lnbih4OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4geCA8IDAgPyAtMSA6IDE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB4IGlzIGJldHdlZW4gYSBhbmQgYlxuICAgICAqIEBwYXJhbSBhIFRoZSBtaW4gYm91bmRcbiAgICAgKiBAcGFyYW0gYiBUaGUgbWF4IGJvdW5kXG4gICAgICogQHBhcmFtIHggVGhlIHZhbHVlIHRvIGNoZWNrXG4gICAgICogQHBhcmFtIGV4Y2x1c2l2ZSBXaGV0aGVyIG9yIG5vdCBhIGFuZCBiIGFyZSBleGNsdXNpdmUgYm91bmRzXG4gICAgICogQHJldHVybnMgVHJ1ZSBpZiB4IGlzIGJldHdlZW4gYSBhbmQgYiwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgc3RhdGljIGJldHdlZW4oYTogbnVtYmVyLCBiOiBudW1iZXIsIHg6IG51bWJlciwgZXhjbHVzaXZlPzogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgICAgICBpZihleGNsdXNpdmUpe1xuICAgICAgICAgICAgcmV0dXJuIChhIDwgeCkgJiYgKHggPCBiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAoYSA8PSB4KSAmJiAoeCA8PSBiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsYW1wcyB0aGUgdmFsdWUgeCB0byB0aGUgcmFuZ2UgW21pbiwgbWF4XSwgcm91bmRpbmcgdXAgb3IgZG93biBpZiBuZWVkZWRcbiAgICAgKiBAcGFyYW0geCBUaGUgdmFsdWUgdG8gYmUgY2xhbXBlZFxuICAgICAqIEBwYXJhbSBtaW4gVGhlIG1pbiBvZiB0aGUgcmFuZ2VcbiAgICAgKiBAcGFyYW0gbWF4IFRoZSBtYXggb2YgdGhlIHJhbmdlXG4gICAgICogQHJldHVybnMgeCwgaWYgaXQgaXMgYmV0d2VlbiBtaW4gYW5kIG1heCwgb3IgbWluL21heCBpZiBpdCBleGNlZWRzIHRoZWlyIGJvdW5kc1xuICAgICAqL1xuICAgIHN0YXRpYyBjbGFtcCh4OiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIGlmKHggPCBtaW4pIHJldHVybiBtaW47XG4gICAgICAgIGlmKHggPiBtYXgpIHJldHVybiBtYXg7XG4gICAgICAgIHJldHVybiB4O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsYW1wcyB0aGUgdmFsdWUgeCB0byB0aGUgcmFuZ2UgYmV0d2VlbiAwIGFuZCAxXG4gICAgICogQHBhcmFtIHggVGhlIHZhbHVlIHRvIGJlIGNsYW1wZWRcbiAgICAgKiBAcmV0dXJucyB4LCBpZiBpdCBpcyBiZXR3ZWVuIDAgYW5kIDEsIG9yIDAvMSBpZiBpdCBleGNlZWRzIHRoZWlyIGJvdW5kc1xuICAgICAqL1xuICAgIHN0YXRpYyBjbGFtcDAxKHg6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBNYXRoVXRpbHMuY2xhbXAoeCwgMCwgMSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xhbXBzIHRoZSBsb3dlciBlbmQgb2YgdGhlIHZhbHVlIG9mIHggdG8gdGhlIHJhbmdlIHRvIG1pblxuICAgICAqIEBwYXJhbSB4IFRoZSB2YWx1ZSB0byBiZSBjbGFtcGVkXG4gICAgICogQHBhcmFtIG1pbiBUaGUgbWluaW11bSBhbGxvd2VkIHZhbHVlIG9mIHhcbiAgICAgKiBAcmV0dXJucyB4LCBpZiBpdCBpcyBncmVhdGVyIHRoYW4gbWluLCBvdGhlcndpc2UgbWluXG4gICAgICovXG4gICAgc3RhdGljIGNsYW1wTG93KHg6IG51bWJlciwgbWluOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4geCA8IG1pbiA/IG1pbiA6IHg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xhbXBzIHRoZSBsb3dlciBlbmQgb2YgdGhlIHZhbHVlIG9mIHggdG8gemVyb1xuICAgICAqIEBwYXJhbSB4IFRoZSB2YWx1ZSB0byBiZSBjbGFtcGVkXG4gICAgICogQHJldHVybnMgeCwgaWYgaXQgaXMgZ3JlYXRlciB0aGFuIDAsIG90aGVyd2lzZSAwXG4gICAgICovXG4gICAgc3RhdGljIGNsYW1wTG93MCh4OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gTWF0aFV0aWxzLmNsYW1wTG93KHgsIDApO1xuICAgIH1cblxuICAgIHN0YXRpYyBjbGFtcE1hZ25pdHVkZSh2OiBWZWMyLCBtOiBudW1iZXIpOiBWZWMyIHtcbiAgICAgICAgaWYodi5tYWdTcSgpID4gbSptKXtcbiAgICAgICAgICAgIHJldHVybiB2LnNjYWxlVG8obSk7XG4gICAgICAgIH0gZWxzZXtcbiAgICAgICAgICAgIHJldHVybiB2O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIGNoYW5nZVJhbmdlKHg6IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyLCBuZXdNaW46IG51bWJlciwgbmV3TWF4OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5sZXJwKG5ld01pbiwgbmV3TWF4LCB0aGlzLmludkxlcnAobWluLCBtYXgsIHgpKTtcbiAgICB9XG5cbiAgICAvKipcblx0ICogTGluZWFyIEludGVycG9sYXRpb25cblx0ICogQHBhcmFtIGEgVGhlIGZpcnN0IHZhbHVlIGZvciB0aGUgaW50ZXJwb2xhdGlvbiBib3VuZFxuXHQgKiBAcGFyYW0gYiBUaGUgc2Vjb25kIHZhbHVlIGZvciB0aGUgaW50ZXJwb2xhdGlvbiBib3VuZFxuXHQgKiBAcGFyYW0gdCBUaGUgdGltZSB3ZSBhcmUgaW50ZXJwb2xhdGluZyB0b1xuICAgICAqIEByZXR1cm5zIFRoZSB2YWx1ZSBiZXR3ZWVuIGEgYW5kIGIgYXQgdGltZSB0XG5cdCAqL1xuXHRzdGF0aWMgbGVycChhOiBudW1iZXIsIGI6IG51bWJlciwgdDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIGEgKyB0ICogKGIgLSBhKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbnZlcnNlIExpbmVhciBJbnRlcnBvbGF0aW9uLiBGaW5kcyB0aGUgdGltZSBhdCB3aGljaCBhIHZhbHVlIGJldHdlZW4gYSBhbmQgYiB3b3VsZCBvY2N1clxuICAgICAqIEBwYXJhbSBhIFRoZSBmaXJzdCB2YWx1ZSBmb3IgdGhlIGludGVycG9sYXRpb24gYm91bmRcbiAgICAgKiBAcGFyYW0gYiBUaGUgc2Vjb25kIHZhbHVlIGZvciB0aGUgaW50ZXJwb2xhdGlvbiBib3VuZFxuICAgICAqIEBwYXJhbSB2YWx1ZSBUaGUgY3VycmVudCB2YWx1ZVxuICAgICAqIEByZXR1cm5zIFRoZSB0aW1lIGF0IHdoaWNoIHRoZSBjdXJyZW50IHZhbHVlIG9jY3VycyBiZXR3ZWVuIGEgYW5kIGJcbiAgICAgKi9cbiAgICBzdGF0aWMgaW52TGVycChhOiBudW1iZXIsIGI6IG51bWJlciwgdmFsdWU6IG51bWJlcil7XG4gICAgICAgIHJldHVybiAodmFsdWUgLSBhKS8oYiAtIGEpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBDdXRzIG9mZiBkZWNpbWFsIHBvaW50cyBvZiBhIG51bWJlciBhZnRlciBhIHNwZWNpZmllZCBwbGFjZVxuICAgICAqIEBwYXJhbSBudW0gVGhlIG51bWJlciB0byBmbG9vclxuICAgICAqIEBwYXJhbSBwbGFjZSBUaGUgbGFzdCBkZWNpbWFsIHBsYWNlIG9mIHRoZSBuZXcgbnVtYmVyXG4gICAgICogQHJldHVybnMgVGhlIGZsb29yZWQgbnVtYmVyXG4gICAgICovXG4gICAgc3RhdGljIGZsb29yVG9QbGFjZShudW06IG51bWJlciwgcGxhY2U6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIGlmKHBsYWNlID09PSAwKXtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKG51bSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZmFjdG9yID0gMTA7XG4gICAgICAgIHdoaWxlKHBsYWNlID4gMSl7XG4gICAgICAgICAgICBmYWN0b3IgIT0gMTA7XG4gICAgICAgICAgICBwbGFjZS0tO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IobnVtKmZhY3RvcikvZmFjdG9yO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG51bWJlciBmcm9tIGEgaGV4IHN0cmluZ1xuICAgICAqIEBwYXJhbSBzdHIgdGhlIHN0cmluZyBjb250YWluaW5nIHRoZSBoZXggbnVtYmVyXG4gICAgICogQHJldHVybnMgdGhlIG51bWJlciBpbiBkZWNpbWFsIHJlcHJlc2VudGVkIGJ5IHRoZSBoZXggc3RyaW5nXG4gICAgICovXG4gICAgc3RhdGljIGZyb21IZXgoc3RyOiBzdHJpbmcpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQoc3RyLCAxNik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIGFzIGEgaGV4YWRlY2ltYWxcbiAgICAgKiBAcGFyYW0gbnVtIFRoZSBudW1iZXIgdG8gY29udmVydCB0byBoZXhcbiAgICAgKiBAcGFyYW0gbWluTGVuZ3RoIFRoZSBsZW5ndGggb2YgdGhlIHJldHVybmVkIGhleCBzdHJpbmcgKGFkZHMgemVybyBwYWRkaW5nIGlmIG5lZWRlZClcbiAgICAgKiBAcmV0dXJucyBUaGUgaGV4IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBudW1iZXIgYXMgYSBzdHJpbmdcbiAgICAgKi9cbiAgICBzdGF0aWMgdG9IZXgobnVtOiBudW1iZXIsIG1pbkxlbmd0aDogbnVtYmVyID0gbnVsbCk6IHN0cmluZyB7XG4gICAgICAgIGxldCBmYWN0b3IgPSAxO1xuICAgICAgICB3aGlsZShmYWN0b3IqMTYgPCBudW0pe1xuICAgICAgICAgICAgZmFjdG9yICo9IDE2O1xuICAgICAgICB9XG4gICAgICAgIGxldCBoZXhTdHIgPSBcIlwiO1xuICAgICAgICB3aGlsZShmYWN0b3IgPj0gMSl7XG4gICAgICAgICAgICBsZXQgZGlnaXQgPSBNYXRoLmZsb29yKG51bS9mYWN0b3IpO1xuICAgICAgICAgICAgaGV4U3RyICs9IE1hdGhVdGlscy50b0hleERpZ2l0KGRpZ2l0KTtcbiAgICAgICAgICAgIG51bSAtPSBkaWdpdCAqIGZhY3RvcjtcbiAgICAgICAgICAgIGZhY3RvciAvPSAxNjtcblx0XHR9XG5cdFx0XG5cdFx0aWYobWluTGVuZ3RoICE9PSBudWxsKXtcblx0XHRcdHdoaWxlKGhleFN0ci5sZW5ndGggPCBtaW5MZW5ndGgpe1xuXHRcdFx0XHRoZXhTdHIgPSBcIjBcIiArIGhleFN0cjtcblx0XHRcdH1cblx0XHR9XG5cbiAgICAgICAgcmV0dXJuIGhleFN0cjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIGRpZ2l0IHRvIGhleGFkZWNpbWFsLiBJbiB0aGlzIGNhc2UsIGEgZGlnaXQgaXMgYmV0d2VlbiAwIGFuZCAxNSBpbmNsdXNpdmVcbiAgICAgKiBAcGFyYW0gbnVtIFRoZSBkaWdpdCB0byBjb252ZXJ0IHRvIGhleGFkZWNpbWFsXG4gICAgICogQHJldHVybnMgVGhlIGhleCByZXByZXNlbnRhdGlvbiBvZiB0aGUgZGlnaXQgYXMgYSBzdHJpbmdcbiAgICAgKi9cbiAgICBzdGF0aWMgdG9IZXhEaWdpdChudW06IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGlmKG51bSA8IDEwKXtcbiAgICAgICAgICAgIHJldHVybiBcIlwiICsgbnVtO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoNjUgKyBudW0gLSAxMCk7XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IFZlYzIgZnJvbSBcIi4uL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgQ29sb3IgZnJvbSBcIi4vQ29sb3JcIjtcbmltcG9ydCBNYXRoVXRpbHMgZnJvbSBcIi4vTWF0aFV0aWxzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlbmRlcmluZ1V0aWxzIHtcblx0c3RhdGljIHRvV2ViR0xDb29yZHMocG9pbnQ6IFZlYzIsIG9yaWdpbjogVmVjMiwgd29ybGRTaXplOiBWZWMyKTogRmxvYXQzMkFycmF5IHtcblx0XHRyZXR1cm4gbmV3IEZsb2F0MzJBcnJheShbXG5cdFx0XHRNYXRoVXRpbHMuY2hhbmdlUmFuZ2UocG9pbnQueCwgb3JpZ2luLngsIG9yaWdpbi54ICsgd29ybGRTaXplLngsIC0xLCAxKSxcblx0XHRcdE1hdGhVdGlscy5jaGFuZ2VSYW5nZShwb2ludC55LCBvcmlnaW4ueSwgb3JpZ2luLnkgKyB3b3JsZFNpemUueSwgMSwgLTEpXG5cdFx0XSk7XG5cdH1cblxuXHRzdGF0aWMgdG9XZWJHTFNjYWxlKHNpemU6IFZlYzIsIHdvcmxkU2l6ZTogVmVjMik6IEZsb2F0MzJBcnJheSB7XG5cdFx0cmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoW1xuXHRcdFx0MipzaXplLngvd29ybGRTaXplLngsXG5cdFx0XHQyKnNpemUueS93b3JsZFNpemUueSxcblx0XHRdKTtcblx0fVxuXG5cdHN0YXRpYyB0b1dlYkdMQ29sb3IoY29sb3I6IENvbG9yKTogRmxvYXQzMkFycmF5IHtcblx0XHRyZXR1cm4gbmV3IEZsb2F0MzJBcnJheShbXG5cdFx0XHRNYXRoVXRpbHMuY2hhbmdlUmFuZ2UoY29sb3IuciwgMCwgMjU1LCAwLCAxKSxcblx0XHRcdE1hdGhVdGlscy5jaGFuZ2VSYW5nZShjb2xvci5nLCAwLCAyNTUsIDAsIDEpLFxuXHRcdFx0TWF0aFV0aWxzLmNoYW5nZVJhbmdlKGNvbG9yLmIsIDAsIDI1NSwgMCwgMSksXG5cdFx0XHRjb2xvci5hXG5cdFx0XSk7XG5cdH1cbn0iLCIvKiogU29tZSB1dGlsaXR5IGZ1bmN0aW9ucyBmb3IgZGVhbGluZyB3aXRoIHN0cmluZ3MgKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0cmluZ1V0aWxzIHtcbiAgICAvKipcbiAgICAgKiBFeHRyYWN0cyB0aGUgcGF0aCBmcm9tIGEgZmlsZXBhdGggdGhhdCBpbmNsdWRlcyB0aGUgZmlsZVxuICAgICAqIEBwYXJhbSBmaWxlUGF0aCB0aGUgZmlsZXBhdGggdG8gZXh0cmFjdCB0aGUgcGF0aCBmcm9tXG4gICAgICogQHJldHVybnMgVGhlIHBhdGggcG9ydGlvbiBvZiB0aGUgZmlsZXBhdGggcHJvdmlkZWRcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0UGF0aEZyb21GaWxlUGF0aChmaWxlUGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHNwbGl0UGF0aCA9IGZpbGVQYXRoLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgc3BsaXRQYXRoLnBvcCgpO1xuICAgICAgICBzcGxpdFBhdGgucHVzaChcIlwiKTtcbiAgICAgICAgcmV0dXJuIHNwbGl0UGF0aC5qb2luKFwiL1wiKTtcbiAgICB9XG59IiwiaW1wb3J0IEdhbWVFdmVudCBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvRXZlbnRzL0dhbWVFdmVudFwiO1xuaW1wb3J0IHsgVGFyZ2V0YWJsZUVudGl0eSB9IGZyb20gXCIuLi8uLi8uLi9HYW1lU3lzdGVtcy9UYXJnZXRpbmcvVGFyZ2V0YWJsZUVudGl0eVwiO1xuaW1wb3J0IE5QQ0FjdGlvbiBmcm9tIFwiLi9OUENBY3Rpb25cIjtcblxuLyoqXG4gKiBBbiBJZGxlIGFjdGlvbiBmb3IgdGhlIE5QQ0dvYXBBSS4gQmFzaWNhbGx5IGEgZGVmYXVsdCBhY3Rpb24gZm9yIGFsbCBvZiB0aGUgTlBDc1xuICogdG8gZG8gbm90aGluZy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSWRsZUFjdGlvbiBleHRlbmRzIE5QQ0FjdGlvbiB7XG5cbiAgICBwdWJsaWMgcGVyZm9ybUFjdGlvbih0YXJnZXQ6IFRhcmdldGFibGVFbnRpdHkpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5maW5pc2hlZCgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBoYW5kbGVJbnB1dChldmVudDogR2FtZUV2ZW50KTogdm9pZCB7XG4gICAgICAgIHN3aXRjaChldmVudC50eXBlKSB7XG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgc3VwZXIuaGFuZGxlSW5wdXQoZXZlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxufSIsImltcG9ydCBHb2FwQWN0aW9uIGZyb20gXCIuLi8uLi8uLi8uLi9Xb2xmaWUyRC9BSS9Hb2FwL0dvYXBBY3Rpb25cIjtcbmltcG9ydCBHYW1lRXZlbnQgZnJvbSBcIi4uLy4uLy4uLy4uL1dvbGZpZTJEL0V2ZW50cy9HYW1lRXZlbnRcIjtcbmltcG9ydCBIZWFsdGhwYWNrIGZyb20gXCIuLi8uLi8uLi9HYW1lU3lzdGVtcy9JdGVtU3lzdGVtL0l0ZW1zL0hlYWx0aHBhY2tcIjtcbmltcG9ydCBOUENBY3RvciBmcm9tIFwiLi4vLi4vLi4vQWN0b3JzL05QQ0FjdG9yXCI7XG5pbXBvcnQgTlBDQmVoYXZpb3IgZnJvbSBcIi4uL05QQ0JlaGF2aW9yXCI7XG5pbXBvcnQgRmluZGVyIGZyb20gXCIuLi8uLi8uLi9HYW1lU3lzdGVtcy9TZWFyY2hpbmcvRmluZGVyXCI7XG5pbXBvcnQgeyBUYXJnZXRhYmxlRW50aXR5IH0gZnJvbSBcIi4uLy4uLy4uL0dhbWVTeXN0ZW1zL1RhcmdldGluZy9UYXJnZXRhYmxlRW50aXR5XCI7XG5pbXBvcnQgQmFzaWNGaW5kZXIgZnJvbSBcIi4uLy4uLy4uL0dhbWVTeXN0ZW1zL1NlYXJjaGluZy9CYXNpY0ZpbmRlclwiO1xuaW1wb3J0IE5hdmlnYXRpb25QYXRoIGZyb20gXCIuLi8uLi8uLi8uLi9Xb2xmaWUyRC9QYXRoZmluZGluZy9OYXZpZ2F0aW9uUGF0aFwiO1xuaW1wb3J0IExhc2VyR3VuIGZyb20gXCIuLi8uLi8uLi9HYW1lU3lzdGVtcy9JdGVtU3lzdGVtL0l0ZW1zL0xhc2VyR3VuXCI7XG5pbXBvcnQgVGltZXIgZnJvbSBcIi4uLy4uLy4uLy4uL1dvbGZpZTJEL1RpbWluZy9UaW1lclwiO1xuaW1wb3J0IHsgSXRlbUV2ZW50IH0gZnJvbSBcIi4uLy4uLy4uL0V2ZW50c1wiO1xuaW1wb3J0IHsgR3JhcGhpY1R5cGUgfSBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvTm9kZXMvR3JhcGhpY3MvR3JhcGhpY1R5cGVzXCI7XG5pbXBvcnQgTGluZSBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvTm9kZXMvR3JhcGhpY3MvTGluZVwiO1xuaW1wb3J0IFZlYzIgZnJvbSBcIi4uLy4uLy4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgVmlld3BvcnQgZnJvbSBcIi4uLy4uLy4uLy4uL1dvbGZpZTJEL1NjZW5lR3JhcGgvVmlld3BvcnRcIjtcbi8qKlxuICogQW4gYWJzdHJhY3QgR29hcEFjdGlvbiBmb3IgYW4gTlBDLiBBbGwgTlBDIGFjdGlvbnMgY29uc2lzdCBvZiBkb2luZyB0aHJlZSB0aGluZ3M6XG4gKiBcbiAqICAxLiBTZWxlY3Rpbmcgc29tZSB0YXJnZXQvbG9jYXRpb25cbiAqICAyLiBHb2luZyB0byBvciBtb3Zpbmcgd2l0aGluIHJhbmdlIG9mIHRoZSBzZWxlY3RlZCB0YXJnZXRcbiAqICAzLiBEb2luZyBzb21ldGhpbmcgYXQgdGhlIHRhcmdldCBsb2NhdGlvblxuICogXG4gKiBUaGUgYWJzdHJhY3QgTlBDIGFjdGlvbiB0YWtlcyBjYXJlIG9mIHRoZSBmaXJzdCB0d28gcGFydHMgKHNlbGVjdGluZyB0aGUgdGFyZ2V0IGFuZCBtb3ZpbmcgdG8gdGhlIHRhcmdldCBsb2NhdGlvbikuIEFsbFxuICogY29uY3JldGUgaW1wbGVtZW50YXRpb25zIG9mIHRoZSBOUENBY3Rpb24gd2lsbCBoYXZlIHRvIGltcGxlbWVudCB0aGUgYWJzdHJhY3QgbWV0aG9kIHBlcmZvcm1BY3Rpb24oKSB3aGljaFxuICogZ2V0cyBjYWxsZWQgd2hlbiB0aGUgTlBDIHJlYWNoZXMgdGhlIHRhcmdldCBsb2NhdGlvbi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgTlBDQWN0aW9uIGV4dGVuZHMgR29hcEFjdGlvbiB7XG5cbiAgICBwcm90ZWN0ZWQgcGFyZW50OiBOUENCZWhhdmlvcjtcbiAgICBwcm90ZWN0ZWQgYWN0b3I6IE5QQ0FjdG9yO1xuXG4gICAgcHJvdGVjdGVkIGxhc2VyZ3VuOiBMYXNlckd1bjtcbiAgICBwcm90ZWN0ZWQgdGltZXI6IFRpbWVyO1xuXG4gICAgLy8gVGhlIHRhcmdldGluZyBzdHJhdGVneSB1c2VkIGZvciB0aGlzIEdvdG9BY3Rpb24gLSBkZXRlcm1pbmVzIGhvdyB0aGUgdGFyZ2V0IGlzIHNlbGVjdGVkIGJhc2ljYWxseVxuICAgIHByb3RlY3RlZCBfdGFyZ2V0RmluZGVyOiBGaW5kZXI8VGFyZ2V0YWJsZUVudGl0eT47XG4gICAgLy8gVGhlIHRhcmdldHMgb3IgVGFyZ2V0YWJsZSBlbnRpdGllcyBcbiAgICBwcm90ZWN0ZWQgX3RhcmdldHM6IFRhcmdldGFibGVFbnRpdHlbXTtcbiAgICAvLyBUaGUgdGFyZ2V0IHdlIGFyZSBnb2luZyB0byBzZXQgdGhlIGFjdG9yIHRvIHRhcmdldFxuICAgIHByb3RlY3RlZCBfdGFyZ2V0OiBUYXJnZXRhYmxlRW50aXR5IHwgbnVsbDtcbiAgICAvLyBUaGUgcGF0aCBmcm9tIHRoZSBOUEMgdG8gdGhlIHRhcmdldFxuICAgIHByb3RlY3RlZCBfcGF0aDogTmF2aWdhdGlvblBhdGggfCBudWxsO1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHBhcmVudDogTlBDQmVoYXZpb3IsIGFjdG9yOiBOUENBY3Rvcikge1xuICAgICAgICBzdXBlcihwYXJlbnQsIGFjdG9yKTtcbiAgICAgICAgdGhpcy50YXJnZXRGaW5kZXIgPSBuZXcgQmFzaWNGaW5kZXIoKTtcbiAgICAgICAgdGhpcy50YXJnZXRzID0gW107XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5wYXRoID0gbnVsbDtcbiAgICAgICAgdGhpcy50aW1lciA9IG5ldyBUaW1lcigyMDAwKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb25FbnRlcihvcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogdm9pZCB7XG4gICAgICAgIC8vIFNlbGVjdCB0aGUgdGFyZ2V0IGxvY2F0aW9uIHdoZXJlIHRoZSBOUEMgc2hvdWxkIHBlcmZvcm0gdGhlIGFjdGlvblxuICAgICAgICB0aGlzLnRhcmdldCA9IHRoaXMudGFyZ2V0RmluZGVyLmZpbmQodGhpcy50YXJnZXRzKTtcblxuICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIHRhcmdldCwgc2V0IHRoZSBOUENzIHRhcmdldCB0byB0aGUgdGFyZ2V0IGFuZCBmaW5kIGEgcGF0aCB0byB0aGUgdGFyZ2V0XG4gICAgICAgIGlmICh0aGlzLnRhcmdldCAhPT0gbnVsbCAmJiB0aGlzLmFjdG9yLnBvc2l0aW9uLmRpc3RhbmNlVG8odGhpcy50YXJnZXQucG9zaXRpb24pIDwgMjAwKSB7XG4gICAgICAgICAgICAvLyBTZXQgdGhlIGFjdG9ycyBjdXJyZW50IHRhcmdldCB0byBiZSB0aGUgdGFyZ2V0IGZvciB0aGlzIGFjdGlvblxuICAgICAgICAgICAgdGhpcy5hY3Rvci5zZXRUYXJnZXQodGhpcy50YXJnZXQpO1xuICAgICAgICAgICAgLy8gQ29uc3RydWN0IGEgcGF0aCBmcm9tIHRoZSBhY3RvciB0byB0aGUgdGFyZ2V0XG4gICAgICAgICAgICB0aGlzLnBhdGggPSB0aGlzLmFjdG9yLmdldFBhdGgodGhpcy5hY3Rvci5wb3NpdGlvbiwgdGhpcy50YXJnZXQucG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZShkZWx0YVQ6IG51bWJlcik6IHZvaWQge1xuXG4gICAgICAgIGlmICh0aGlzLnRhcmdldCAhPT0gbnVsbCAmJiB0aGlzLnBhdGggIT09IG51bGwgJiYgIXRoaXMucGF0aC5pc0RvbmUoKSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodGhpcy5hY3Rvci5hdFRhcmdldCgpIHx8IHRoaXMuYWN0b3IucG9zaXRpb24uZGlzdGFuY2VUbyh0aGlzLnRhcmdldC5wb3NpdGlvbikgPCA1MCkge1xuICAgICAgICAgICAgICAgIC8vIHRoaXMucGVyZm9ybUFjdGlvbih0aGlzLnRhcmdldCk7XG5cbiAgICAgICAgICAgICAgICBsZXQgc3ByaXRlID0gdGhpcy5hY3Rvci5nZXRTY2VuZSgpLmFkZC5zcHJpdGUoXCJsYXNlckd1blwiLCBcInByaW1hcnlcIik7XG4gICAgICAgICAgICAgICAgbGV0IGxpbmUgPSA8TGluZT50aGlzLmFjdG9yLmdldFNjZW5lKCkuYWRkLmdyYXBoaWMoR3JhcGhpY1R5cGUuTElORSwgXCJwcmltYXJ5XCIsIHtzdGFydDogVmVjMi5aRVJPLCBlbmQ6IFZlYzIuWkVST30pO1xuICAgICAgICAgICAgICAgIHRoaXMubGFzZXJndW4gPSBMYXNlckd1bi5jcmVhdGUoc3ByaXRlLCBsaW5lKTtcblxuICAgICAgICAgICAgICAgIHRoaXMudGltZXIuaXNTdG9wcGVkKCkgPyBjb25zb2xlLmxvZyhcIldlYXBvbiBjb29saW5nIGRvd24hXCIpIDogY29uc29sZS5sb2coXCJXZWFwb24gcmVhZHkhXCIpO1xuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBsYXNlcmd1biBpcyBub3QgbnVsbCBhbmQgdGhlIGxhc2VyZ3VuIGlzIHN0aWxsIGluIHRoZSBhY3RvcnMgaW52ZW50b3J5OyBzaG9vdCB0aGUgbGFzZXJndW5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy50aW1lci5pc1N0b3BwZWQoKSAmJiB0aGlzLmxhc2VyZ3VuICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgc3RhcnQsIGRpcmVjdGlvbiwgYW5kIGVuZCBwb3NpdGlvbiB0byBzaG9vdCB0aGUgbGFzZXIgZ3VuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzZXJndW4ubGFzZXJTdGFydC5jb3B5KHRoaXMuYWN0b3IucG9zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc2VyZ3VuLmRpcmVjdGlvbi5jb3B5KHRoaXMuYWN0b3IucG9zaXRpb24uZGlyVG8odGhpcy50YXJnZXQucG9zaXRpb24pKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXNlcmd1bi5sYXNlckVuZC5jb3B5KHRoaXMudGFyZ2V0LnBvc2l0aW9uKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBQbGF5IHRoZSBzaG9vdGluZyBhbmltYXRpb24gZm9yIHRoZSBsYXNlciBndW4gIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc2VyZ3VuLnBsYXlTaG9vdEFuaW1hdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yLmFuaW1hdGlvbi5wbGF5SWZOb3RBbHJlYWR5KFwiQVRUQUNLSU5HXCIsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2VuZCBhIGxhc2VyIGZpcmVkIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdHRlci5maXJlRXZlbnQoSXRlbUV2ZW50LkxBU0VSR1VOX0ZJUkVELCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RvcklkOiB0aGlzLmFjdG9yLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG86IHRoaXMubGFzZXJndW4ubGFzZXJTdGFydC5jbG9uZSgpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb206IHRoaXMubGFzZXJndW4ubGFzZXJFbmQuY2xvbmUoKS5zdWIodGhpcy5sYXNlcmd1bi5sYXNlclN0YXJ0KVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWVyLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmKCF0aGlzLmFjdG9yLmFuaW1hdGlvbi5pc1BsYXlpbmcoXCJBVFRBQ0tJTkdcIikpICAgIHRoaXMuYWN0b3IuYW5pbWF0aW9uLnBsYXlJZk5vdEFscmVhZHkoXCJJRExFXCIsIHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0b3IubW92ZU9uUGF0aCh0aGlzLmFjdG9yLnNwZWVkKmRlbHRhVCoyNSwgdGhpcy5wYXRoKTtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmFjdG9yLmNvbGxpZGVkV2l0aFRpbGVtYXApICB0aGlzLnBhdGggPSB0aGlzLmFjdG9yLmdldFBhdGgodGhpcy5hY3Rvci5wb3NpdGlvbiwgdGhpcy50YXJnZXQucG9zaXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IFxuICAgICAgICBlbHNlIFxuICAgICAgICB7XG4gICAgICAgICAgICAvLyAvLyBTZWxlY3QgdGhlIHRhcmdldCBsb2NhdGlvbiB3aGVyZSB0aGUgTlBDIHNob3VsZCBwZXJmb3JtIHRoZSBhY3Rpb25cbiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gdGhpcy50YXJnZXRGaW5kZXIuZmluZCh0aGlzLnRhcmdldHMpO1xuXG4gICAgICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIHRhcmdldCwgc2V0IHRoZSBOUENzIHRhcmdldCB0byB0aGUgdGFyZ2V0IGFuZCBmaW5kIGEgcGF0aCB0byB0aGUgdGFyZ2V0XG4gICAgICAgICAgICBpZiAodGhpcy50YXJnZXQgIT09IG51bGwgJiYgdGhpcy5hY3Rvci5wb3NpdGlvbi5kaXN0YW5jZVRvKHRoaXMudGFyZ2V0LnBvc2l0aW9uKSA8IDIwMCkge1xuICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgYWN0b3JzIGN1cnJlbnQgdGFyZ2V0IHRvIGJlIHRoZSB0YXJnZXQgZm9yIHRoaXMgYWN0aW9uXG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rvci5zZXRUYXJnZXQodGhpcy50YXJnZXQpO1xuICAgICAgICAgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhdGggZnJvbSB0aGUgYWN0b3IgdG8gdGhlIHRhcmdldFxuICAgICAgICAgICAgICAgIHRoaXMucGF0aCA9IHRoaXMuYWN0b3IuZ2V0UGF0aCh0aGlzLmFjdG9yLnBvc2l0aW9uLCB0aGlzLnRhcmdldC5wb3NpdGlvbik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHRoaXMuZmluaXNoZWQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBhYnN0cmFjdCBwZXJmb3JtQWN0aW9uKHRhcmdldDogVGFyZ2V0YWJsZUVudGl0eSk6IHZvaWQ7XG5cbiAgICBwdWJsaWMgb25FeGl0KCk6IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICAgICAgICAvLyBDbGVhciB0aGUgYWN0b3IncyBjdXJyZW50IHRhcmdldFxuICAgICAgICB0aGlzLmFjdG9yLmNsZWFyVGFyZ2V0KCk7XG4gICAgICAgIC8vIENsZWFyIHRoZSByZWZlcmVuY2UgdG8gdGhlIHRhcmdldCBhbmQgdGhlIHBhdGggaW4gdGhlIGFjdGlvblxuICAgICAgICB0aGlzLnRhcmdldCA9IG51bGw7XG4gICAgICAgIHRoaXMucGF0aCA9IG51bGw7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaGFuZGxlSW5wdXQoZXZlbnQ6IEdhbWVFdmVudCk6IHZvaWQge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuaGFuZGxlZCBldmVudCBjYXVnaHQgaW4gTlBDQWN0aW9uISBFdmVudCB0eXBlOiAke2V2ZW50LnR5cGV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IHRhcmdldEZpbmRlcigpOiBGaW5kZXI8VGFyZ2V0YWJsZUVudGl0eT4geyByZXR1cm4gdGhpcy5fdGFyZ2V0RmluZGVyOyB9XG4gICAgcHVibGljIHNldCB0YXJnZXRGaW5kZXIoZmluZGVyOiBGaW5kZXI8VGFyZ2V0YWJsZUVudGl0eT4pIHsgdGhpcy5fdGFyZ2V0RmluZGVyID0gZmluZGVyOyB9XG5cbiAgICBwdWJsaWMgZ2V0IHRhcmdldHMoKTogQXJyYXk8VGFyZ2V0YWJsZUVudGl0eT4geyByZXR1cm4gdGhpcy5fdGFyZ2V0czsgfVxuICAgIHB1YmxpYyBzZXQgdGFyZ2V0cyh0YXJnZXRzOiBBcnJheTxUYXJnZXRhYmxlRW50aXR5PikgeyB0aGlzLl90YXJnZXRzID0gdGFyZ2V0czsgfVxuXG4gICAgcHVibGljIGdldCB0YXJnZXQoKTogVGFyZ2V0YWJsZUVudGl0eSB8IG51bGwgeyByZXR1cm4gdGhpcy5fdGFyZ2V0OyB9XG4gICAgcHJvdGVjdGVkIHNldCB0YXJnZXQodGFyZ2V0OiBUYXJnZXRhYmxlRW50aXR5IHwgbnVsbCkgeyB0aGlzLl90YXJnZXQgPSB0YXJnZXQ7IH1cblxuICAgIHByb3RlY3RlZCBzZXQgcGF0aChwYXRoOiBOYXZpZ2F0aW9uUGF0aCB8IG51bGwpIHsgdGhpcy5fcGF0aCA9IHBhdGg7IH1cbiAgICBwcm90ZWN0ZWQgZ2V0IHBhdGgoKTogTmF2aWdhdGlvblBhdGggfCBudWxsIHsgcmV0dXJuIHRoaXMuX3BhdGg7IH1cbn1cbiIsImltcG9ydCBHYW1lRXZlbnQgZnJvbSBcIi4uLy4uLy4uLy4uL1dvbGZpZTJEL0V2ZW50cy9HYW1lRXZlbnRcIjtcbmltcG9ydCBOUENBY3RvciBmcm9tIFwiLi4vLi4vLi4vQWN0b3JzL05QQ0FjdG9yXCI7XG5pbXBvcnQgTlBDQmVoYXZpb3IgZnJvbSBcIi4uL05QQ0JlaGF2aW9yXCI7XG5pbXBvcnQgTlBDQWN0aW9uIGZyb20gXCIuL05QQ0FjdGlvblwiO1xuaW1wb3J0IEl0ZW0gZnJvbSBcIi4uLy4uLy4uL0dhbWVTeXN0ZW1zL0l0ZW1TeXN0ZW0vSXRlbVwiO1xuaW1wb3J0IEZpbmRlciBmcm9tIFwiLi4vLi4vLi4vR2FtZVN5c3RlbXMvU2VhcmNoaW5nL0ZpbmRlclwiO1xuaW1wb3J0IHsgVGFyZ2V0YWJsZUVudGl0eSB9IGZyb20gXCIuLi8uLi8uLi9HYW1lU3lzdGVtcy9UYXJnZXRpbmcvVGFyZ2V0YWJsZUVudGl0eVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQaWNrdXBUYXJnZXRlZEl0ZW0gZXh0ZW5kcyBOUENBY3Rpb24ge1xuXG4gICAgLy8gVGhlIHRhcmdldGluZyBzdHJhdGVneSB1c2VkIGZvciB0aGlzIEdvdG9BY3Rpb24gLSBkZXRlcm1pbmVzIGhvdyB0aGUgdGFyZ2V0IGlzIHNlbGVjdGVkIGJhc2ljYWxseVxuICAgIHByb3RlY3RlZCBvdmVycmlkZSBfdGFyZ2V0RmluZGVyOiBGaW5kZXI8SXRlbT47XG4gICAgLy8gVGhlIHRhcmdldHMgb3IgVGFyZ2V0YWJsZSBlbnRpdGllcyBcbiAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgX3RhcmdldHM6IEl0ZW1bXTtcbiAgICAvLyBUaGUgdGFyZ2V0IHdlIGFyZSBnb2luZyB0byBzZXQgdGhlIGFjdG9yIHRvIHRhcmdldFxuICAgIHByb3RlY3RlZCBfdGFyZ2V0OiBJdGVtIHwgbnVsbDtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihwYXJlbnQ6IE5QQ0JlaGF2aW9yLCBhY3RvcjogTlBDQWN0b3IpIHtcbiAgICAgICAgc3VwZXIocGFyZW50LCBhY3Rvcik7XG4gICAgfVxuXG4gICAgcHVibGljIHBlcmZvcm1BY3Rpb24odGFyZ2V0OiBJdGVtKTogdm9pZCB7XG4gICAgICAgIGlmICh0YXJnZXQuaW52ZW50b3J5ID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmFjdG9yLmludmVudG9yeS5hZGQodGFyZ2V0KVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmluaXNoZWQoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaGFuZGxlSW5wdXQoZXZlbnQ6IEdhbWVFdmVudCk6IHZvaWQge1xuICAgICAgICBzd2l0Y2goZXZlbnQudHlwZSkge1xuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIHN1cGVyLmhhbmRsZUlucHV0KGV2ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgdGFyZ2V0RmluZGVyKCk6IEZpbmRlcjxJdGVtPiB7IHJldHVybiB0aGlzLl90YXJnZXRGaW5kZXI7IH1cbiAgICBwdWJsaWMgc2V0IHRhcmdldEZpbmRlcihmaW5kZXI6IEZpbmRlcjxJdGVtPikgeyB0aGlzLl90YXJnZXRGaW5kZXIgPSBmaW5kZXI7IH1cblxuICAgIHB1YmxpYyBnZXQgdGFyZ2V0cygpOiBBcnJheTxJdGVtPiB7IHJldHVybiB0aGlzLl90YXJnZXRzOyB9XG4gICAgcHVibGljIHNldCB0YXJnZXRzKHRhcmdldHM6IEFycmF5PEl0ZW0+KSB7IHRoaXMuX3RhcmdldHMgPSB0YXJnZXRzOyB9XG5cbiAgICBwdWJsaWMgZ2V0IHRhcmdldCgpOiBJdGVtIHwgbnVsbCB7IHJldHVybiB0aGlzLl90YXJnZXQ7IH1cbiAgICBwcm90ZWN0ZWQgc2V0IHRhcmdldCh0YXJnZXQ6IEl0ZW0gfCBudWxsKSB7IHRoaXMuX3RhcmdldCA9IHRhcmdldDsgfVxuXG59IiwiaW1wb3J0IHsgR29hcEFjdGlvblN0YXR1cyB9IGZyb20gXCIuLi8uLi8uLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvR29hcC9Hb2FwQWN0aW9uXCI7XG5pbXBvcnQgQUFCQiBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL1NoYXBlcy9BQUJCXCI7XG5pbXBvcnQgVmVjMiBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL1ZlYzJcIjtcbmltcG9ydCBHYW1lRXZlbnQgZnJvbSBcIi4uLy4uLy4uLy4uL1dvbGZpZTJEL0V2ZW50cy9HYW1lRXZlbnRcIjtcbmltcG9ydCBPcnRob2dvbmFsVGlsZW1hcCBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvTm9kZXMvVGlsZW1hcHMvT3J0aG9nb25hbFRpbGVtYXBcIjtcbmltcG9ydCBMYXNlckd1biBmcm9tIFwiLi4vLi4vLi4vR2FtZVN5c3RlbXMvSXRlbVN5c3RlbS9JdGVtcy9MYXNlckd1blwiO1xuaW1wb3J0IHsgVGFyZ2V0YWJsZUVudGl0eSB9IGZyb20gXCIuLi8uLi8uLi9HYW1lU3lzdGVtcy9UYXJnZXRpbmcvVGFyZ2V0YWJsZUVudGl0eVwiO1xuaW1wb3J0IE5QQ0FjdG9yIGZyb20gXCIuLi8uLi8uLi9BY3RvcnMvTlBDQWN0b3JcIjtcbmltcG9ydCBOUENCZWhhdmlvciBmcm9tIFwiLi4vTlBDQmVoYXZpb3JcIjtcbmltcG9ydCBOUENBY3Rpb24gZnJvbSBcIi4vTlBDQWN0aW9uXCI7XG5pbXBvcnQgeyBJdGVtRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vRXZlbnRzXCI7XG5pbXBvcnQgVGltZXIgZnJvbSBcIi4uLy4uLy4uLy4uL1dvbGZpZTJEL1RpbWluZy9UaW1lclwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTaG9vdExhc2VyR3VuIGV4dGVuZHMgTlBDQWN0aW9uIHtcblxuICAgIHByb3RlY3RlZCBsYXNlcmd1bjogTGFzZXJHdW4gfCBudWxsO1xuICAgIHByb3RlY3RlZCB0aW1lcjogVGltZXI7XG4gICAgXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHBhcmVudDogTlBDQmVoYXZpb3IsIGFjdG9yOiBOUENBY3Rvcikge1xuICAgICAgICBzdXBlcihwYXJlbnQsIGFjdG9yKTtcbiAgICAgICAgdGhpcy5sYXNlcmd1biA9IG51bGw7XG4gICAgICAgIHRoaXMuX3RhcmdldCA9IG51bGw7XG4gICAgICAgIHRoaXMudGltZXIgPSBuZXcgVGltZXIoMjAwMCk7XG4gICAgfVxuXG4gICAgcHVibGljIHBlcmZvcm1BY3Rpb24odGFyZ2V0OiBUYXJnZXRhYmxlRW50aXR5KTogdm9pZCB7XG4gICAgICAgIHRoaXMudGltZXIuaXNTdG9wcGVkKCkgPyBjb25zb2xlLmxvZyhcIldlYXBvbiBjb29saW5nIGRvd24hXCIpIDogY29uc29sZS5sb2coXCJXZWFwb24gcmVhZHkhXCIpO1xuICAgICAgICAvLyBJZiB0aGUgbGFzZXJndW4gaXMgbm90IG51bGwgYW5kIHRoZSBsYXNlcmd1biBpcyBzdGlsbCBpbiB0aGUgYWN0b3JzIGludmVudG9yeTsgc2hvb3QgdGhlIGxhc2VyZ3VuXG4gICAgICAgIGlmICh0aGlzLnRpbWVyLmlzU3RvcHBlZCgpICYmIHRoaXMubGFzZXJndW4gIT09IG51bGwgJiYgdGhpcy5sYXNlcmd1bi5pbnZlbnRvcnkgIT09IG51bGwgJiYgdGhpcy5sYXNlcmd1bi5pbnZlbnRvcnkuaWQgPT09IHRoaXMuYWN0b3IuaW52ZW50b3J5LmlkKSB7XG4gICAgICAgICAgICAvLyBTZXQgdGhlIHN0YXJ0LCBkaXJlY3Rpb24sIGFuZCBlbmQgcG9zaXRpb24gdG8gc2hvb3QgdGhlIGxhc2VyIGd1blxuICAgICAgICAgICAgdGhpcy5sYXNlcmd1bi5sYXNlclN0YXJ0LmNvcHkodGhpcy5hY3Rvci5wb3NpdGlvbik7XG4gICAgICAgICAgICB0aGlzLmxhc2VyZ3VuLmRpcmVjdGlvbi5jb3B5KHRoaXMuYWN0b3IucG9zaXRpb24uZGlyVG8odGFyZ2V0LnBvc2l0aW9uKSk7XG4gICAgICAgICAgICB0aGlzLmxhc2VyZ3VuLmxhc2VyRW5kLmNvcHkodGhpcy5nZXRMYXNlckVuZCh0aGlzLmFjdG9yLmdldFNjZW5lKCkuZ2V0V2FsbHMoKSwgdGhpcy5sYXNlcmd1bi5sYXNlclN0YXJ0LCB0aGlzLmxhc2VyZ3VuLmRpcmVjdGlvbikpO1xuXG4gICAgICAgICAgICAvLyBQbGF5IHRoZSBzaG9vdGluZyBhbmltYXRpb24gZm9yIHRoZSBsYXNlciBndW5cbiAgICAgICAgICAgIHRoaXMubGFzZXJndW4ucGxheVNob290QW5pbWF0aW9uKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNlbmQgYSBsYXNlciBmaXJlZCBldmVudFxuICAgICAgICAgICAgdGhpcy5lbWl0dGVyLmZpcmVFdmVudChJdGVtRXZlbnQuTEFTRVJHVU5fRklSRUQsIHtcbiAgICAgICAgICAgICAgICBhY3RvcklkOiB0aGlzLmFjdG9yLmlkLFxuICAgICAgICAgICAgICAgIGJhdHRsZXJJZDogdGhpcy5hY3Rvci5iYXR0bGVHcm91cCxcbiAgICAgICAgICAgICAgICB0bzogdGhpcy5sYXNlcmd1bi5sYXNlclN0YXJ0LmNsb25lKCksIFxuICAgICAgICAgICAgICAgIGZyb206IHRoaXMubGFzZXJndW4ubGFzZXJFbmQuY2xvbmUoKS5zdWIodGhpcy5sYXNlcmd1bi5sYXNlclN0YXJ0KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMudGltZXIuc3RhcnQoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBGaW5pc2ggdGhlIGFjdGlvblxuICAgICAgICB0aGlzLmZpbmlzaGVkKCk7XG4gICAgfVxuXG4gICAgcHVibGljIG9uRW50ZXIob3B0aW9uczogUmVjb3JkPHN0cmluZywgYW55Pik6IHZvaWQge1xuICAgICAgICBzdXBlci5vbkVudGVyKG9wdGlvbnMpO1xuICAgICAgICAvLyBGaW5kIGEgbGFzZXJndW4gaW4gdGhlIGFjdG9ycyBpbnZlbnRvcnlcbiAgICAgICAgbGV0IGxhc2VyZ3VuID0gdGhpcy5hY3Rvci5pbnZlbnRvcnkuZmluZChpdGVtID0+IGl0ZW0uY29uc3RydWN0b3IgPT09IExhc2VyR3VuKTtcbiAgICAgICAgaWYgKGxhc2VyZ3VuICE9PSBudWxsICYmIGxhc2VyZ3VuLmNvbnN0cnVjdG9yID09PSBMYXNlckd1bikge1xuICAgICAgICAgICAgdGhpcy5sYXNlcmd1biA9IGxhc2VyZ3VuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGhhbmRsZUlucHV0KGV2ZW50OiBHYW1lRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgc3dpdGNoKGV2ZW50LnR5cGUpIHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICBzdXBlci5oYW5kbGVJbnB1dChldmVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlKGRlbHRhVDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHN1cGVyLnVwZGF0ZShkZWx0YVQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvbkV4aXQoKTogUmVjb3JkPHN0cmluZywgYW55PiB7XG4gICAgICAgIC8vIENsZWFyIHRoZSByZWZlcmVuY2UgdG8gdGhlIGxhc2VyZ3VuXG4gICAgICAgIHRoaXMubGFzZXJndW4gPSBudWxsO1xuICAgICAgICByZXR1cm4gc3VwZXIub25FeGl0KCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldExhc2VyRW5kKHdhbGxzOiBPcnRob2dvbmFsVGlsZW1hcCwgc3RhcnQ6IFZlYzIsIGRpcjogVmVjMik6IFZlYzIge1xuICAgICAgICBsZXQgZW5kID0gc3RhcnQuY2xvbmUoKS5hZGQoZGlyLnNjYWxlZCg5MDApKTtcbiAgICAgICAgbGV0IGRlbHRhID0gZW5kLmNsb25lKCkuc3ViKHN0YXJ0KTtcblxuICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggdGhlIHRpbGVtYXAgcmVnaW9uIHVudGlsIHdlIGZpbmQgYSBjb2xsaXNpb25cbiAgICAgICAgbGV0IG1pblggPSBNYXRoLm1pbihzdGFydC54LCBlbmQueCk7XG4gICAgICAgIGxldCBtYXhYID0gTWF0aC5tYXgoc3RhcnQueCwgZW5kLngpO1xuICAgICAgICBsZXQgbWluWSA9IE1hdGgubWluKHN0YXJ0LnksIGVuZC55KTtcbiAgICAgICAgbGV0IG1heFkgPSBNYXRoLm1heChzdGFydC55LCBlbmQueSk7XG5cbiAgICAgICAgbGV0IG1pbkluZGV4ID0gd2FsbHMuZ2V0VGlsZW1hcFBvc2l0aW9uKG1pblgsIG1pblkpO1xuXHRcdGxldCBtYXhJbmRleCA9IHdhbGxzLmdldFRpbGVtYXBQb3NpdGlvbihtYXhYLCBtYXhZKTtcblxuICAgICAgICBsZXQgdGlsZVNpemUgPSB3YWxscy5nZXRTY2FsZWRUaWxlU2l6ZSgpO1xuXG4gICAgICAgIGZvcihsZXQgY29sID0gbWluSW5kZXgueDsgY29sIDw9IG1heEluZGV4Lng7IGNvbCsrKXtcbiAgICAgICAgICAgIGZvcihsZXQgcm93ID0gbWluSW5kZXgueTsgcm93IDw9IG1heEluZGV4Lnk7IHJvdysrKXtcbiAgICAgICAgICAgICAgICBpZih3YWxscy5pc1RpbGVDb2xsaWRhYmxlKGNvbCwgcm93KSl7XG4gICAgICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgcG9zaXRpb24gb2YgdGhpcyB0aWxlXG4gICAgICAgICAgICAgICAgICAgIGxldCB0aWxlUG9zID0gbmV3IFZlYzIoY29sICogdGlsZVNpemUueCArIHRpbGVTaXplLngvMiwgcm93ICogdGlsZVNpemUueSArIHRpbGVTaXplLnkvMik7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgY29sbGlkZXIgZm9yIHRoaXMgdGlsZVxuICAgICAgICAgICAgICAgICAgICBsZXQgY29sbGlkZXIgPSBuZXcgQUFCQih0aWxlUG9zLCB0aWxlU2l6ZS5zY2FsZWQoMS8yKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IGhpdCA9IGNvbGxpZGVyLmludGVyc2VjdFNlZ21lbnQoc3RhcnQsIGRlbHRhLCBWZWMyLlpFUk8pO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKGhpdCAhPT0gbnVsbCAmJiBzdGFydC5kaXN0YW5jZVNxVG8oaGl0LnBvcykgPCBzdGFydC5kaXN0YW5jZVNxVG8oZW5kKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSBoaXQucG9zO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbmQ7XG4gICAgfVxuXG59IiwiaW1wb3J0IFN0YXRlTWFjaGluZUdvYXBBSSBmcm9tIFwiLi4vLi4vLi4vV29sZmllMkQvQUkvR29hcC9TdGF0ZU1hY2hpbmVHb2FwQUlcIjtcbmltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IEdhbWVFdmVudCBmcm9tIFwiLi4vLi4vLi4vV29sZmllMkQvRXZlbnRzL0dhbWVFdmVudFwiO1xuaW1wb3J0IHsgR2FtZUV2ZW50VHlwZSB9IGZyb20gXCIuLi8uLi8uLi9Xb2xmaWUyRC9FdmVudHMvR2FtZUV2ZW50VHlwZVwiO1xuaW1wb3J0IEdhbWVOb2RlIGZyb20gXCIuLi8uLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9HYW1lTm9kZVwiO1xuaW1wb3J0IExpbmUgZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL05vZGVzL0dyYXBoaWNzL0xpbmVcIjtcbmltcG9ydCBUaW1lciBmcm9tIFwiLi4vLi4vLi4vV29sZmllMkQvVGltaW5nL1RpbWVyXCI7XG5pbXBvcnQgTlBDQWN0b3IgZnJvbSBcIi4uLy4uL0FjdG9ycy9OUENBY3RvclwiO1xuaW1wb3J0IHsgSXRlbUV2ZW50IH0gZnJvbSBcIi4uLy4uL0V2ZW50c1wiO1xuaW1wb3J0IE5QQ0FjdGlvbiBmcm9tIFwiLi9OUENBY3Rpb25zL05QQ0FjdGlvblwiO1xuXG5cbi8qKlxuICogQW4gYWJzdHJhY3QgaW1wbGVtZW50YXRpb24gb2YgYmVoYXZpb3IgZm9yIGFuIE5QQy4gRWFjaCBjb25jcmV0ZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGVcbiAqIE5QQ0JlaGF2aW9yIGNsYXNzIHNob3VsZCBkZWZpbmUgc29tZSBuZXcgYmVoYXZpb3IgZm9yIGFuIE5QQ0FjdG9yLiBcbiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgTlBDQmVoYXZpb3IgZXh0ZW5kcyBTdGF0ZU1hY2hpbmVHb2FwQUk8TlBDQWN0aW9uPiAge1xuICAgIHByb3RlY3RlZCBvdmVycmlkZSBvd25lcjogTlBDQWN0b3I7XG5cbiAgICBwdWJsaWMgaW5pdGlhbGl6ZUFJKG93bmVyOiBOUENBY3Rvciwgb3B0aW9uczogUmVjb3JkPHN0cmluZywgYW55Pik6IHZvaWQge1xuICAgICAgICB0aGlzLm93bmVyID0gb3duZXI7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKEl0ZW1FdmVudC5MQVNFUkdVTl9GSVJFRCk7XG4gICAgfVxuXG4gICAgcHVibGljIGFjdGl2YXRlKG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIGFueT4pOiB2b2lkIHt9XG5cbiAgICBwdWJsaWMgdXBkYXRlKGRlbHRhVDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHN1cGVyLnVwZGF0ZShkZWx0YVQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBldmVudCB0aGUgZ2FtZSBldmVudFxuICAgICAqL1xuICAgIHB1YmxpYyBoYW5kbGVFdmVudChldmVudDogR2FtZUV2ZW50KTogdm9pZCB7XG4gICAgICAgIHN3aXRjaChldmVudC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIEl0ZW1FdmVudC5MQVNFUkdVTl9GSVJFRDoge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2F0Y2hpbmcgYW5kIGhhbmRsaW5nIGxhc2VyZ3VuIGZpcmVkIGV2ZW50ISEhXCIpO1xuICAgICAgICAgICAgICAgIC8vIEVuYWJsZSB0byBoYXZlIGV2ZXJ5IE5QQyBoYXZlIHNob290IGF1ZGlvXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5lbWl0dGVyLmZpcmVFdmVudChHYW1lRXZlbnRUeXBlLlBMQVlfU09VTkQsIHtrZXk6IHRoaXMub3duZXIuZ2V0U2NlbmUoKS5nZXRTaG9vdEF1ZGlvS2V5KCksIGxvb3A6IGZhbHNlLCBob2xkUmVmZXJlbmNlOiBmYWxzZX0pO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTGFzZXJndW5GaXJlZChldmVudC5kYXRhLmdldChcImFjdG9ySWRcIiksIGV2ZW50LmRhdGEuZ2V0KFwiYmF0dGxlcklkXCIpLCBldmVudC5kYXRhLmdldChcInRvXCIpLCBldmVudC5kYXRhLmdldChcImZyb21cIikpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIHN1cGVyLmhhbmRsZUV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBoYW5kbGVMYXNlcmd1bkZpcmVkKGFjdG9ySWQ6IG51bWJlciwgYmF0dGxlcklkOiBudW1iZXIsIHRvOiBWZWMyLCBmcm9tOiBWZWMyKTogdm9pZCB7XG4gICAgICAgIGlmIChhY3RvcklkICE9PSB0aGlzLm93bmVyLmlkICYmIGJhdHRsZXJJZCAhPT0gdGhpcy5vd25lci5iYXR0bGVHcm91cCkge1xuICAgICAgICAgICAgdGhpcy5vd25lci5oZWFsdGggLT0gdGhpcy5vd25lci5jb2xsaXNpb25TaGFwZS5nZXRCb3VuZGluZ1JlY3QoKS5pbnRlcnNlY3RTZWdtZW50KHRvLCBmcm9tKSA/IDEgOiAwO1xuICAgICAgICAgICAgaWYoIXRoaXMub3duZXIuYW5pbWF0aW9uLmlzUGxheWluZyhcIkFUVEFDS0lOR1wiKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLm93bmVyLmFuaW1hdGlvbi5wbGF5SWZOb3RBbHJlYWR5KFwiVEFLSU5HX0RBTUFHRVwiLCBmYWxzZSwgXCJJRExFXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICB9XG4gICAgXG59IiwiaW1wb3J0IE5QQ0FjdG9yIGZyb20gXCIuLi8uLi8uLi9BY3RvcnMvTlBDQWN0b3JcIjtcbmltcG9ydCBOUENCZWhhdmlvciBmcm9tIFwiLi4vTlBDQmVoYXZpb3JcIjtcbmltcG9ydCBJZGxlIGZyb20gXCIuLi9OUENBY3Rpb25zL0dvdG9BY3Rpb25cIjtcbmltcG9ydCBTaG9vdExhc2VyR3VuIGZyb20gXCIuLi9OUENBY3Rpb25zL1Nob290TGFzZXJHdW5cIjtcbmltcG9ydCBCYXNpY0ZpbmRlciBmcm9tIFwiLi4vLi4vLi4vR2FtZVN5c3RlbXMvU2VhcmNoaW5nL0Jhc2ljRmluZGVyXCI7XG5pbXBvcnQgeyBCYXR0bGVyQWN0aXZlRmlsdGVyLCBFbmVteUZpbHRlciwgSXRlbUZpbHRlciwgUmFuZ2VGaWx0ZXIsIFZpc2libGVJdGVtRmlsdGVyIH0gZnJvbSBcIi4uLy4uLy4uL0dhbWVTeXN0ZW1zL1NlYXJjaGluZy9IVzRGaWx0ZXJzXCI7XG5pbXBvcnQgSXRlbSBmcm9tIFwiLi4vLi4vLi4vR2FtZVN5c3RlbXMvSXRlbVN5c3RlbS9JdGVtXCI7XG5pbXBvcnQgUGlja3VwSXRlbSBmcm9tIFwiLi4vTlBDQWN0aW9ucy9QaWNrdXBJdGVtXCI7XG5pbXBvcnQgeyBDbG9zZXN0UG9zaXRpb25lZCB9IGZyb20gXCIuLi8uLi8uLi9HYW1lU3lzdGVtcy9TZWFyY2hpbmcvSFc0UmVkdWNlcnNcIjtcbmltcG9ydCB7IFRhcmdldGFibGVFbnRpdHkgfSBmcm9tIFwiLi4vLi4vLi4vR2FtZVN5c3RlbXMvVGFyZ2V0aW5nL1RhcmdldGFibGVFbnRpdHlcIjtcbmltcG9ydCBMYXNlckd1biBmcm9tIFwiLi4vLi4vLi4vR2FtZVN5c3RlbXMvSXRlbVN5c3RlbS9JdGVtcy9MYXNlckd1blwiO1xuaW1wb3J0IHsgVGFyZ2V0RXhpc3RzIH0gZnJvbSBcIi4uL05QQ1N0YXR1c2VzL1RhcmdldEV4aXN0c1wiO1xuaW1wb3J0IHsgSGFzSXRlbSB9IGZyb20gXCIuLi9OUENTdGF0dXNlcy9IYXNJdGVtXCI7XG5pbXBvcnQgRmFsc2VTdGF0dXMgZnJvbSBcIi4uL05QQ1N0YXR1c2VzL0ZhbHNlU3RhdHVzXCI7XG5pbXBvcnQgR2FtZUV2ZW50IGZyb20gXCIuLi8uLi8uLi8uLi9Xb2xmaWUyRC9FdmVudHMvR2FtZUV2ZW50XCI7XG5pbXBvcnQgR29hcEFjdGlvbiBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvQUkvR29hcC9Hb2FwQWN0aW9uXCI7XG5pbXBvcnQgR29hcFN0YXRlIGZyb20gXCIuLi8uLi8uLi8uLi9Xb2xmaWUyRC9BSS9Hb2FwL0dvYXBTdGF0ZVwiO1xuaW1wb3J0IEJhdHRsZXIgZnJvbSBcIi4uLy4uLy4uL0dhbWVTeXN0ZW1zL0JhdHRsZVN5c3RlbS9CYXR0bGVyXCI7XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR3VhcmRCZWhhdmlvciBleHRlbmRzIE5QQ0JlaGF2aW9yIHtcblxuICAgIC8qKiBUaGUgdGFyZ2V0IHRoZSBndWFyZCBzaG91bGQgZ3VhcmQgKi9cbiAgICBwcm90ZWN0ZWQgdGFyZ2V0OiBUYXJnZXRhYmxlRW50aXR5O1xuICAgIC8qKiBUaGUgcmFuZ2UgdGhlIGd1YXJkIHNob3VsZCBiZSBmcm9tIHRoZSB0YXJnZXQgdGhleSdyZSBndWFyZGluZyB0byBiZSBjb25zaWRlcmVkIGd1YXJkaW5nIHRoZSB0YXJnZXQgKi9cbiAgICBwcm90ZWN0ZWQgcmFuZ2U6IG51bWJlcjtcblxuICAgIC8qKiBJbml0aWFsaXplIHRoZSBOUEMgQUkgKi9cbiAgICBwdWJsaWMgaW5pdGlhbGl6ZUFJKG93bmVyOiBOUENBY3Rvciwgb3B0aW9uczogR3VhcmRPcHRpb25zKTogdm9pZCB7XG4gICAgICAgIHN1cGVyLmluaXRpYWxpemVBSShvd25lciwgb3B0aW9ucyk7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgdGFyZ2V0YWJsZSBlbnRpdHkgdGhlIGd1YXJkIHNob3VsZCB0cnkgdG8gcHJvdGVjdCBhbmQgdGhlIHJhbmdlIHRvIHRoZSB0YXJnZXRcbiAgICAgICAgdGhpcy50YXJnZXQgPSBvcHRpb25zLnRhcmdldFxuICAgICAgICB0aGlzLnJhbmdlID0gb3B0aW9ucy5yYW5nZTtcbiAgICAgICAgdGhpcy5vd25lci5yYW5nZSA9IHRoaXMucmFuZ2U7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBndWFyZCBzdGF0dXNlc1xuICAgICAgICB0aGlzLmluaXRpYWxpemVTdGF0dXNlcygpO1xuICAgICAgICAvLyBJbml0aWFsaXplIGd1YXJkIGFjdGlvbnNcbiAgICAgICAgdGhpcy5pbml0aWFsaXplQWN0aW9ucygpO1xuICAgICAgICAvLyBTZXQgdGhlIGd1YXJkcyBnb2FsXG4gICAgICAgIHRoaXMuZ29hbCA9IEd1YXJkU3RhdHVzZXMuR09BTDtcblxuICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBndWFyZCBiZWhhdmlvclxuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaGFuZGxlRXZlbnQoZXZlbnQ6IEdhbWVFdmVudCk6IHZvaWQge1xuICAgICAgICBzd2l0Y2goZXZlbnQudHlwZSkge1xuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIHN1cGVyLmhhbmRsZUV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGUoZGVsdGFUOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgc3VwZXIudXBkYXRlKGRlbHRhVCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGluaXRpYWxpemVTdGF0dXNlcygpOiB2b2lkIHtcblxuICAgICAgICBsZXQgc2NlbmUgPSB0aGlzLm93bmVyLmdldFNjZW5lKCk7XG5cbiAgICAgICAgLy8gQSBzdGF0dXMgY2hlY2tpbmcgaWYgdGhlcmUgYXJlIGFueSBlbmVtaWVzIGF0IHRhcmdldCB0aGUgZ3VhcmQgaXMgZ3VhcmRpbmdcbiAgICAgICAgbGV0IGVuZW15QmF0dGxlckZpbmRlciA9IG5ldyBCYXNpY0ZpbmRlcjxCYXR0bGVyPihudWxsLCBCYXR0bGVyQWN0aXZlRmlsdGVyKCksIEVuZW15RmlsdGVyKHRoaXMub3duZXIpLCBSYW5nZUZpbHRlcih0aGlzLnRhcmdldCwgMCwgdGhpcy5yYW5nZSp0aGlzLnJhbmdlKSlcbiAgICAgICAgbGV0IGVuZW15QXRHdWFyZFBvc2l0aW9uID0gbmV3IFRhcmdldEV4aXN0cyhzY2VuZS5nZXRCYXR0bGVycygpLCBlbmVteUJhdHRsZXJGaW5kZXIpXG4gICAgICAgIHRoaXMuYWRkU3RhdHVzKEd1YXJkU3RhdHVzZXMuRU5FTVlfSU5fR1VBUkRfUE9TSVRJT04sIGVuZW15QXRHdWFyZFBvc2l0aW9uKTtcblxuICAgICAgICAvLyBBZGQgYSBzdGF0dXMgdG8gY2hlY2sgaWYgYSBsYXNlcmd1biBleGlzdHMgaW4gdGhlIHNjZW5lIGFuZCBpdCdzIHZpc2libGVcbiAgICAgICAgdGhpcy5hZGRTdGF0dXMoR3VhcmRTdGF0dXNlcy5MQVNFUkdVTl9FWElTVFMsIG5ldyBUYXJnZXRFeGlzdHMoc2NlbmUuZ2V0TGFzZXJHdW5zKCksIG5ldyBCYXNpY0ZpbmRlcjxJdGVtPihudWxsLCBJdGVtRmlsdGVyKExhc2VyR3VuKSwgVmlzaWJsZUl0ZW1GaWx0ZXIoKSkpKTtcbiAgICAgICAgLy8gQWRkIGEgc3RhdHVzIHRvIGNoZWNrIGlmIHRoZSBndWFyZCBoYXMgYSBsYXNlcmd1blxuICAgICAgICB0aGlzLmFkZFN0YXR1cyhHdWFyZFN0YXR1c2VzLkhBU19XRUFQT04sIG5ldyBIYXNJdGVtKHRoaXMub3duZXIsIG5ldyBCYXNpY0ZpbmRlcihudWxsLCBJdGVtRmlsdGVyKExhc2VyR3VuKSkpKTtcblxuICAgICAgICAvLyBBZGQgdGhlIGdvYWwgc3RhdHVzIFxuICAgICAgICB0aGlzLmFkZFN0YXR1cyhHdWFyZFN0YXR1c2VzLkdPQUwsIG5ldyBGYWxzZVN0YXR1cygpKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZUFjdGlvbnMoKTogdm9pZCB7XG5cbiAgICAgICAgbGV0IHNjZW5lID0gdGhpcy5vd25lci5nZXRTY2VuZSgpO1xuXG4gICAgICAgIC8vIEFuIGFjdGlvbiBmb3Igc2hvb3RpbmcgYW4gZW5lbXkgaW4gdGhlIGd1YXJkcyBndWFyZCBhcmVhXG4gICAgICAgIGxldCBzaG9vdEVuZW15ID0gbmV3IFNob290TGFzZXJHdW4odGhpcywgdGhpcy5vd25lcik7XG4gICAgICAgIHNob290RW5lbXkudGFyZ2V0cyA9IHNjZW5lLmdldEJhdHRsZXJzKCk7XG4gICAgICAgIHNob290RW5lbXkudGFyZ2V0RmluZGVyID0gbmV3IEJhc2ljRmluZGVyPEJhdHRsZXI+KENsb3Nlc3RQb3NpdGlvbmVkKHRoaXMub3duZXIpLCBCYXR0bGVyQWN0aXZlRmlsdGVyKCksIEVuZW15RmlsdGVyKHRoaXMub3duZXIpLCBSYW5nZUZpbHRlcih0aGlzLnRhcmdldCwgMCwgdGhpcy5yYW5nZSp0aGlzLnJhbmdlKSk7XG4gICAgICAgIHNob290RW5lbXkuYWRkUHJlY29uZGl0aW9uKEd1YXJkU3RhdHVzZXMuSEFTX1dFQVBPTik7XG4gICAgICAgIHNob290RW5lbXkuYWRkUHJlY29uZGl0aW9uKEd1YXJkU3RhdHVzZXMuRU5FTVlfSU5fR1VBUkRfUE9TSVRJT04pO1xuICAgICAgICBzaG9vdEVuZW15LmFkZEVmZmVjdChHdWFyZFN0YXR1c2VzLkdPQUwpO1xuICAgICAgICBzaG9vdEVuZW15LmNvc3QgPSAxO1xuICAgICAgICB0aGlzLmFkZFN0YXRlKEd1YXJkQWN0aW9ucy5TSE9PVF9FTkVNWSwgc2hvb3RFbmVteSk7XG5cbiAgICAgICAgLy8gQW4gYWN0aW9uIGZvciBwaWNraW5nIHVwIGEgbGFzZXJndW5cbiAgICAgICAgbGV0IHBpY2t1cExhc2VyR3VuID0gbmV3IFBpY2t1cEl0ZW0odGhpcywgdGhpcy5vd25lcik7XG4gICAgICAgIHBpY2t1cExhc2VyR3VuLnRhcmdldHMgPSBzY2VuZS5nZXRMYXNlckd1bnMoKTtcbiAgICAgICAgcGlja3VwTGFzZXJHdW4udGFyZ2V0RmluZGVyID0gbmV3IEJhc2ljRmluZGVyPEl0ZW0+KENsb3Nlc3RQb3NpdGlvbmVkKHRoaXMub3duZXIpLCBWaXNpYmxlSXRlbUZpbHRlcigpLCBJdGVtRmlsdGVyKExhc2VyR3VuKSk7XG4gICAgICAgIHBpY2t1cExhc2VyR3VuLmFkZFByZWNvbmRpdGlvbihHdWFyZFN0YXR1c2VzLkxBU0VSR1VOX0VYSVNUUyk7XG4gICAgICAgIHBpY2t1cExhc2VyR3VuLmFkZEVmZmVjdChHdWFyZFN0YXR1c2VzLkhBU19XRUFQT04pO1xuICAgICAgICBwaWNrdXBMYXNlckd1bi5jb3N0ID0gNTtcbiAgICAgICAgdGhpcy5hZGRTdGF0ZShHdWFyZEFjdGlvbnMuUElDS1VQX0xBU0VSX0dVTiwgcGlja3VwTGFzZXJHdW4pO1xuXG4gICAgICAgIC8vIEFuIGFjdGlvbiBmb3IgZ3VhcmRpbmcgdGhlIGd1YXJkJ3MgZ3VhcmQgbG9jYXRpb25cbiAgICAgICAgbGV0IGd1YXJkID0gbmV3IElkbGUodGhpcywgdGhpcy5vd25lcik7XG4gICAgICAgIGd1YXJkLnRhcmdldHMgPSBbdGhpcy50YXJnZXRdO1xuICAgICAgICBndWFyZC50YXJnZXRGaW5kZXIgPSBuZXcgQmFzaWNGaW5kZXIoKTtcbiAgICAgICAgZ3VhcmQuYWRkUHJlY29uZGl0aW9uKEd1YXJkU3RhdHVzZXMuSEFTX1dFQVBPTik7XG4gICAgICAgIGd1YXJkLmFkZEVmZmVjdChHdWFyZFN0YXR1c2VzLkdPQUwpO1xuICAgICAgICBndWFyZC5jb3N0ID0gMTAwMDtcbiAgICAgICAgdGhpcy5hZGRTdGF0ZShHdWFyZEFjdGlvbnMuR1VBUkQsIGd1YXJkKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb3ZlcnJpZGUgYWRkU3RhdGUoc3RhdGVOYW1lOiBHdWFyZEFjdGlvbiwgc3RhdGU6IEdvYXBBY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgc3VwZXIuYWRkU3RhdGUoc3RhdGVOYW1lLCBzdGF0ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIG92ZXJyaWRlIGFkZFN0YXR1cyhzdGF0dXNOYW1lOiBHdWFyZFN0YXR1cywgc3RhdHVzOiBHb2FwU3RhdGUpOiB2b2lkIHtcbiAgICAgICAgc3VwZXIuYWRkU3RhdHVzKHN0YXR1c05hbWUsIHN0YXR1cyk7XG4gICAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEd1YXJkT3B0aW9ucyB7XG4gICAgdGFyZ2V0OiBUYXJnZXRhYmxlRW50aXR5XG4gICAgcmFuZ2U6IG51bWJlcjtcbn1cblxuZXhwb3J0IHR5cGUgR3VhcmRTdGF0dXMgPSB0eXBlb2YgR3VhcmRTdGF0dXNlc1trZXlvZiB0eXBlb2YgR3VhcmRTdGF0dXNlc107XG5leHBvcnQgY29uc3QgR3VhcmRTdGF0dXNlcyA9IHtcblxuICAgIEVORU1ZX0lOX0dVQVJEX1BPU0lUSU9OOiBcImVuZW15LWF0LWd1YXJkLXBvc2l0aW9uXCIsXG5cbiAgICBIQVNfV0VBUE9OOiBcImhhcy13ZWFwb25cIixcblxuICAgIExBU0VSR1VOX0VYSVNUUzogXCJsYXNlci1ndW4tZXhpc3RzXCIsXG5cbiAgICBHT0FMOiBcImdvYWxcIlxuXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgdHlwZSBHdWFyZEFjdGlvbiA9IHR5cGVvZiBHdWFyZEFjdGlvbnNba2V5b2YgdHlwZW9mIEd1YXJkQWN0aW9uc107XG5leHBvcnQgY29uc3QgR3VhcmRBY3Rpb25zID0ge1xuXG4gICAgUElDS1VQX0xBU0VSX0dVTjogXCJwaWNrdXAtbGFzZXJndW5cIixcblxuICAgIFNIT09UX0VORU1ZOiBcInNob290LWVuZW15XCIsXG5cbiAgICBHVUFSRDogXCJndWFyZFwiLFxuXG59IGFzIGNvbnN0O1xuXG4iLCJpbXBvcnQgR29hcFN0YXRlIGZyb20gXCIuLi8uLi8uLi8uLi9Xb2xmaWUyRC9BSS9Hb2FwL0dvYXBTdGF0ZVwiO1xuaW1wb3J0IEFjdG9yIGZyb20gXCIuLi8uLi8uLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvSW50ZXJmYWNlcy9BY3RvclwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGYWxzZVN0YXR1cyBleHRlbmRzIEdvYXBTdGF0ZSB7XG4gICAgcHVibGljIGlzU2F0aXNmaWVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBcbiAgICBcbn0iLCJpbXBvcnQgR29hcFN0YXRlIGZyb20gXCIuLi8uLi8uLi8uLi9Xb2xmaWUyRC9BSS9Hb2FwL0dvYXBTdGF0ZVwiO1xuaW1wb3J0IEl0ZW0gZnJvbSBcIi4uLy4uLy4uL0dhbWVTeXN0ZW1zL0l0ZW1TeXN0ZW0vSXRlbVwiO1xuaW1wb3J0IEZpbmRlciBmcm9tIFwiLi4vLi4vLi4vR2FtZVN5c3RlbXMvU2VhcmNoaW5nL0ZpbmRlclwiO1xuXG5pbXBvcnQgTlBDQWN0b3IgZnJvbSBcIi4uLy4uLy4uL0FjdG9ycy9OUENBY3RvclwiO1xuXG5leHBvcnQgY2xhc3MgSGFzSXRlbSBleHRlbmRzIEdvYXBTdGF0ZSB7XG4gICAgcHJvdGVjdGVkIGFjdG9yOiBOUENBY3RvcjtcbiAgICBwcm90ZWN0ZWQgZmluZGVyOiBGaW5kZXI8SXRlbT47XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoYWN0b3I6IE5QQ0FjdG9yLCBmaW5kZXI6IEZpbmRlcjxJdGVtPikge1xuICAgICAgICBzdXBlcigpXG4gICAgICAgIHRoaXMuYWN0b3IgPSBhY3RvcjtcbiAgICAgICAgdGhpcy5maW5kZXIgPSBmaW5kZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGlzU2F0aXNmaWVkKCk6IGJvb2xlYW4ge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgLy8gcmV0dXJuIHRoaXMuZmluZGVyLmZpbmQoQXJyYXkuZnJvbSh0aGlzLmFjdG9yLmludmVudG9yeS5pdGVtcygpKSkgIT09IG51bGxcbiAgICB9XG4gICAgXG59IiwiaW1wb3J0IEdvYXBTdGF0ZSBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvQUkvR29hcC9Hb2FwU3RhdGVcIjtcbmltcG9ydCBGaW5kZXIgZnJvbSBcIi4uLy4uLy4uL0dhbWVTeXN0ZW1zL1NlYXJjaGluZy9GaW5kZXJcIjtcblxuZXhwb3J0IGNsYXNzIFRhcmdldEV4aXN0czxUPiBleHRlbmRzIEdvYXBTdGF0ZSB7XG5cbiAgICBwcm90ZWN0ZWQgdGFyZ2V0czogUmVhZG9ubHk8VFtdPjtcbiAgICBwcm90ZWN0ZWQgZmluZGVyOiBGaW5kZXI8VD47XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IodGFyZ2V0czogUmVhZG9ubHk8VFtdPiwgZmluZGVyOiBGaW5kZXI8VD4pIHtcbiAgICAgICAgc3VwZXIoKVxuICAgICAgICB0aGlzLmZpbmRlciA9IGZpbmRlcjtcbiAgICAgICAgdGhpcy50YXJnZXRzID0gdGFyZ2V0cztcbiAgICB9XG5cbiAgICBwdWJsaWMgaXNTYXRpc2ZpZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRlci5maW5kKHRoaXMudGFyZ2V0cykgIT09IG51bGw7XG4gICAgfVxuXG59IiwiaW1wb3J0IFN0YXRlTWFjaGluZUFJIGZyb20gXCIuLi8uLi8uLi9Xb2xmaWUyRC9BSS9TdGF0ZU1hY2hpbmVBSVwiO1xuaW1wb3J0IEFJIGZyb20gXCIuLi8uLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvSW50ZXJmYWNlcy9BSVwiO1xuaW1wb3J0IFZlYzIgZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgR2FtZUV2ZW50IGZyb20gXCIuLi8uLi8uLi9Xb2xmaWUyRC9FdmVudHMvR2FtZUV2ZW50XCI7XG5pbXBvcnQgeyBHYW1lRXZlbnRUeXBlIH0gZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL0V2ZW50cy9HYW1lRXZlbnRUeXBlXCI7XG5pbXBvcnQgUGxheWVyQWN0b3IgZnJvbSBcIi4uLy4uL0FjdG9ycy9QbGF5ZXJBY3RvclwiO1xuaW1wb3J0IHsgSXRlbUV2ZW50LCBQbGF5ZXJFdmVudCB9IGZyb20gXCIuLi8uLi9FdmVudHNcIjtcbmltcG9ydCBJbnZlbnRvcnkgZnJvbSBcIi4uLy4uL0dhbWVTeXN0ZW1zL0l0ZW1TeXN0ZW0vSW52ZW50b3J5XCI7XG5pbXBvcnQgSXRlbSBmcm9tIFwiLi4vLi4vR2FtZVN5c3RlbXMvSXRlbVN5c3RlbS9JdGVtXCI7XG5pbXBvcnQgUGxheWVyQ29udHJvbGxlciBmcm9tIFwiLi9QbGF5ZXJDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBJZGxlLCBJbnZpbmNpYmxlLCBNb3ZpbmcsIERlYWQsIFBsYXllclN0YXRlVHlwZSB9IGZyb20gXCIuL1BsYXllclN0YXRlcy9QbGF5ZXJTdGF0ZVwiO1xuXG4vKipcbiAqIFRoZSBBSSB0aGF0IGNvbnRyb2xzIHRoZSBwbGF5ZXIuIFRoZSBwbGF5ZXJzIEFJIGhhcyBiZWVuIGNvbmZpZ3VyZWQgYXMgYSBGaW5pdGUgU3RhdGUgTWFjaGluZSAoRlNNKVxuICogd2l0aCA0IHN0YXRlczsgSWRsZSwgTW92aW5nLCBJbnZpbmNpYmxlLCBhbmQgRGVhZC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGxheWVyQUkgZXh0ZW5kcyBTdGF0ZU1hY2hpbmVBSSBpbXBsZW1lbnRzIEFJIHtcblxuICAgIC8qKiBUaGUgR2FtZU5vZGUgdGhhdCBvd25zIHRoaXMgQUkgKi9cbiAgICBwdWJsaWMgb3duZXI6IFBsYXllckFjdG9yO1xuICAgIC8qKiBBIHNldCBvZiBjb250cm9scyBmb3IgdGhlIHBsYXllciAqL1xuICAgIHB1YmxpYyBjb250cm9sbGVyOiBQbGF5ZXJDb250cm9sbGVyO1xuICAgIC8qKiBUaGUgaW52ZW50b3J5IG9iamVjdCBhc3NvY2lhdGVkIHdpdGggdGhlIHBsYXllciAqL1xuICAgIHB1YmxpYyBpbnZlbnRvcnk6IEludmVudG9yeTtcbiAgICAvKiogVGhlIHBsYXllcnMgaGVsZCBpdGVtICovXG4gICAgcHVibGljIGl0ZW06IEl0ZW0gfCBudWxsO1xuICAgIFxuICAgIHB1YmxpYyBpbml0aWFsaXplQUkob3duZXI6IFBsYXllckFjdG9yLCBvcHRzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogdm9pZCB7XG4gICAgICAgIHRoaXMub3duZXIgPSBvd25lcjtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyID0gbmV3IFBsYXllckNvbnRyb2xsZXIob3duZXIpO1xuXG4gICAgICAgIC8vIEFkZCB0aGUgcGxheWVycyBzdGF0ZXMgdG8gaXQncyBTdGF0ZU1hY2hpbmVcbiAgICAgICAgdGhpcy5hZGRTdGF0ZShQbGF5ZXJTdGF0ZVR5cGUuSURMRSwgbmV3IElkbGUodGhpcywgdGhpcy5vd25lcikpO1xuICAgICAgICB0aGlzLmFkZFN0YXRlKFBsYXllclN0YXRlVHlwZS5JTlZJTkNJQkxFLCBuZXcgSW52aW5jaWJsZSh0aGlzLCB0aGlzLm93bmVyKSk7XG4gICAgICAgIHRoaXMuYWRkU3RhdGUoUGxheWVyU3RhdGVUeXBlLk1PVklORywgbmV3IE1vdmluZyh0aGlzLCB0aGlzLm93bmVyKSk7XG4gICAgICAgIHRoaXMuYWRkU3RhdGUoUGxheWVyU3RhdGVUeXBlLkRFQUQsIG5ldyBEZWFkKHRoaXMsIHRoaXMub3duZXIpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHBsYXllcnMgc3RhdGUgdG8gSWRsZVxuICAgICAgICB0aGlzLmluaXRpYWxpemUoUGxheWVyU3RhdGVUeXBlLklETEUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhY3RpdmF0ZShvcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogdm9pZCB7IH1cblxuICAgIHB1YmxpYyB1cGRhdGUoZGVsdGFUOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgc3VwZXIudXBkYXRlKGRlbHRhVCk7XG4gICAgfVxuXG4gICAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7fVxuXG4gICAgcHVibGljIGhhbmRsZUV2ZW50KGV2ZW50OiBHYW1lRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgc3dpdGNoKGV2ZW50LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJQTEFZRVJfREFNQUdFRFwiOiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJoaXQgYXVkaW8gIHBsYXllZFwiKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBQbGF5IGhpdCBhdWRpbyBoZXJlIG1heWJlXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5lbWl0dGVyLmZpcmVFdmVudChHYW1lRXZlbnRUeXBlLlBMQVlfU09VTkQsIHtrZXk6IHRoaXMub3duZXIuZ2V0U2NlbmUoKS5nZXRIaXRBdWRpb0tleSwgbG9vcDogZmFsc2UsIGhvbGRSZWZlcmVuY2U6IGZhbHNlfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5vd25lci5oZWFsdGggLT0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgSXRlbUV2ZW50LkxBU0VSR1VOX0ZJUkVEOiB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVMYXNlckZpcmVkRXZlbnQoZXZlbnQuZGF0YS5nZXQoXCJhY3RvcklkXCIpLCBldmVudC5kYXRhLmdldChcInRvXCIpLCBldmVudC5kYXRhLmdldChcImZyb21cIikpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIHN1cGVyLmhhbmRsZUV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBoYW5kbGVMYXNlckZpcmVkRXZlbnQoYWN0b3JJZDogbnVtYmVyLCB0bzogVmVjMiwgZnJvbTogVmVjMik6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5vd25lci5pZCAhPT0gYWN0b3JJZCAmJiB0aGlzLm93bmVyLmNvbGxpc2lvblNoYXBlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vd25lci5jb2xsaXNpb25TaGFwZS5nZXRCb3VuZGluZ1JlY3QoKS5pbnRlcnNlY3RTZWdtZW50KHRvLCBmcm9tLmNsb25lKCkuc3ViKHRvKSkgIT09IG51bGxcbiAgICAgICAgICAgIHx8IHRoaXMub3duZXIuY29sbGlzaW9uU2hhcGUuY2VudGVyLmRpc3RhbmNlVG8odG8pIDwgNTUpIHtcbiAgICAgICAgICAgICAgICAvLyBwbGF5IGhpdCBhdWRpbyBoZXJlP1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSGl0IGF1ZGlvIHBsYXllZFwiKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXR0ZXIuZmlyZUV2ZW50KEdhbWVFdmVudFR5cGUuUExBWV9TT1VORCwge2tleTogdGhpcy5vd25lci5nZXRTY2VuZSgpLmdldEhpdEF1ZGlvS2V5KCksIGxvb3A6IGZhbHNlLCBob2xkUmVmZXJlbmNlOiBmYWxzZX0pO1xuICAgICAgICAgICAgICAgIHRoaXMub3duZXIuaGVhbHRoIC09IDE7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYoZnJvbS54ID49IHRvLngpICAgdGhpcy5vd25lci5hbmltYXRpb24ucGxheUlmTm90QWxyZWFkeShcIlRBS0lOR19EQU1BR0VfTEVGVFwiLCBmYWxzZSwgXCJJRExFXCIpO1xuICAgICAgICAgICAgICAgIGVsc2UgICAgICAgICAgICAgICAgIHRoaXMub3duZXIuYW5pbWF0aW9uLnBsYXlJZk5vdEFscmVhZHkoXCJUQUtJTkdfREFNQUdFX1JJR0hUXCIsIGZhbHNlLCBcIklETEVcIik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cblxufSIsImltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IElucHV0IGZyb20gXCIuLi8uLi8uLi9Xb2xmaWUyRC9JbnB1dC9JbnB1dFwiO1xuaW1wb3J0IEFuaW1hdGVkU3ByaXRlIGZyb20gXCIuLi8uLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9TcHJpdGVzL0FuaW1hdGVkU3ByaXRlXCI7XG5pbXBvcnQgUGFydGljbGUgZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL05vZGVzL0dyYXBoaWNzL1BhcnRpY2xlXCI7XG5pbXBvcnQgUGFydGljbGVTeXN0ZW0gZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL1JlbmRlcmluZy9BbmltYXRpb25zL1BhcnRpY2xlU3lzdGVtXCI7XG5pbXBvcnQgU2NlbmUgZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL1NjZW5lL1NjZW5lXCI7XG5pbXBvcnQgQ29sb3IgZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL1V0aWxzL0NvbG9yXCI7XG5pbXBvcnQgeyBFYXNlRnVuY3Rpb25UeXBlIH0gZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL1V0aWxzL0Vhc2VGdW5jdGlvbnNcIjtcbmltcG9ydCBSYW5kVXRpbHMgZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL1V0aWxzL1JhbmRVdGlsc1wiO1xuaW1wb3J0IHsgSFczUGh5c2ljc0dyb3VwcyB9IGZyb20gXCIuL0hXM1BoeXNpY3NHcm91cHNcIjtcblxuLyoqXG4gKiBTdHJpbmdzIHVzZWQgaW4gdGhlIGtleSBiaW5kaW5nIGZvciB0aGUgcGxheWVyXG4gKi9cbmV4cG9ydCBlbnVtIFBsYXllcklucHV0IHtcbiAgICBNT1ZFX1VQID0gXCJNT1ZFX1VQXCIsXG4gICAgTU9WRV9ET1dOID0gXCJNT1ZFX0RPV05cIixcbiAgICBNT1ZFX0xFRlQgPSBcIk1PVkVfTEVGVFwiLFxuICAgIE1PVkVfUklHSFQgPSBcIk1PVkVfUklHSFRcIixcbiAgICBBVFRBQ0tJTkcgPSBcIkFUVEFDS0lOR1wiLFxuICAgIFBJQ0tVUF9JVEVNID0gXCJQSUNLVVBfSVRFTVwiLFxuICAgIERST1BfSVRFTSA9IFwiRFJPUF9JVEVNXCJcbn1cblxuLyoqXG4gKiBUaGUgUGxheWVyQ29udHJvbGxlciBjbGFzcyBoYW5kbGVzIHByb2Nlc3NpbmcgdGhlIGlucHV0IHJlY2lldmVkIGZyb20gdGhlIHVzZXIgYW5kIGV4cG9zZXMgIFxuICogYSBzZXQgb2YgbWV0aG9kcyB0byBtYWtlIGRlYWxpbmcgd2l0aCB0aGUgdXNlciBpbnB1dCBhIGJpdCBzaW1wbGVyLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5ZXJDb250cm9sbGVyIHtcblxuICAgIC8qKiBUaGUgR2FtZU5vZGUgdGhhdCBvd25zIHRoZSBBSSAqL1xuICAgIHByb3RlY3RlZCBvd25lcjogQW5pbWF0ZWRTcHJpdGU7XG5cbiAgICBjb25zdHJ1Y3Rvcihvd25lcjogQW5pbWF0ZWRTcHJpdGUpIHtcbiAgICAgICAgdGhpcy5vd25lciA9IG93bmVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGRpcmVjdGlvbiB0aGUgcGxheWVyIHNob3VsZCBtb3ZlIGJhc2VkIG9uIGlucHV0IGZyb20gdGhlIGtleWJvYXJkLiBcbiAgICAgKiBAcmV0dXJucyBhIFZlYzIgaW5kaWNhdGluZyB0aGUgZGlyZWN0aW9uIHRoZSBwbGF5ZXIgc2hvdWxkIG1vdmUuIFxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgbW92ZURpcigpOiBWZWMyIHsgXG4gICAgICAgIGxldCBkaXI6IFZlYzIgPSBWZWMyLlpFUk87XG4gICAgICAgIGRpci55ID0gKElucHV0LmlzUHJlc3NlZChQbGF5ZXJJbnB1dC5NT1ZFX1VQKSA/IC0xIDogMCkgKyAoSW5wdXQuaXNQcmVzc2VkKFBsYXllcklucHV0Lk1PVkVfRE9XTikgPyAxIDogMCk7XG5cdFx0ZGlyLnggPSAoSW5wdXQuaXNQcmVzc2VkKFBsYXllcklucHV0Lk1PVkVfTEVGVCkgPyAtMSA6IDApICsgKElucHV0LmlzUHJlc3NlZChQbGF5ZXJJbnB1dC5NT1ZFX1JJR0hUKSA/IDEgOiAwKTtcbiAgICAgICAgcmV0dXJuIGRpci5ub3JtYWxpemUoKS5zY2FsZSgyKTtcbiAgICB9XG5cbiAgICAvKiogXG4gICAgICogR2V0cyB0aGUgZGlyZWN0aW9uIHRoZSBwbGF5ZXIgc2hvdWxkIGJlIGZhY2luZyBiYXNlZCBvbiB0aGUgcG9zaXRpb24gb2YgdGhlXG4gICAgICogbW91c2UgYXJvdW5kIHRoZSBwbGF5ZXJcbiAgICAgKiBAcmV0dXJuIGEgVmVjMiByZXByZXNlbnRpbmcgdGhlIGRpcmVjdGlvbiB0aGUgcGxheWVyIHNob3VsZCBmYWNlLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgZmFjZURpcigpOiBWZWMyIHsgcmV0dXJuIHRoaXMub3duZXIucG9zaXRpb24uZGlyVG8oSW5wdXQuZ2V0R2xvYmFsTW91c2VQb3NpdGlvbigpKTsgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgcm90YXRpb24gb2YgdGhlIHBsYXllcnMgc3ByaXRlIGJhc2VkIG9uIHRoZSBkaXJlY3Rpb24gdGhlIHBsYXllclxuICAgICAqIHNob3VsZCBiZSBmYWNpbmcuXG4gICAgICogQHJldHVybiBhIG51bWJlciByZXByZXNlbnRpbmcgaG93IG11Y2ggdGhlIHBsYXllciBzaG91bGQgYmUgcm90YXRlZFxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgcm90YXRpb24oKTogbnVtYmVyIHsgcmV0dXJuIFZlYzIuVVAuYW5nbGVUb0NDVyh0aGlzLmZhY2VEaXIpOyB9XG5cbiAgICAvKiogXG4gICAgICogQ2hlY2tzIGlmIHRoZSBwbGF5ZXIgaXMgYXR0ZW1wdGluZyB0byB1c2UgYSBoZWxkIGl0ZW0gb3Igbm90LlxuICAgICAqIEByZXR1cm4gdHJ1ZSBpZiB0aGUgcGxheWVyIGlzIGF0dGVtcHRpbmcgdG8gdXNlIGEgaGVsZCBpdGVtOyBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHVzZUl0ZW0oKTogYm9vbGVhbiB7IHJldHVybiBJbnB1dC5pc01vdXNlSnVzdFByZXNzZWQoKTsgfVxuXG4gICAgLyoqIFxuICAgICAqIENoZWNrcyBpZiB0aGUgcGxheWVyIGlzIGF0dGVtcHRpbmcgdG8gcGljayB1cCBhbiBpdGVtIG9yIG5vdC5cbiAgICAgKiBAcmV0dXJuIHRydWUgaWYgdGhlIHBsYXllciBpcyBhdHRlbXB0aW5nIHRvIHBpY2sgdXAgYW4gaXRlbTsgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgcGlja2luZ1VwKCk6IGJvb2xlYW4geyByZXR1cm4gSW5wdXQuaXNKdXN0UHJlc3NlZChQbGF5ZXJJbnB1dC5QSUNLVVBfSVRFTSk7IH1cblxuICAgIC8qKiBcbiAgICAgKiBDaGVja3MgaWYgdGhlIHBsYXllciBpcyBhdHRlbXB0aW5nIHRvIGRyb3AgdGhlaXIgaGVsZCBpdGVtIG9yIG5vdC5cbiAgICAgKiBAcmV0dXJuIHRydWUgaWYgdGhlIHBsYXllciBpcyBhdHRlbXB0aW5nIHRvIGRyb3AgdGhlaXIgaGVsZCBpdGVtOyBmYWxzZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgcHVibGljIGdldCBkcm9wcGluZygpOiBib29sZWFuIHsgcmV0dXJuIElucHV0LmlzSnVzdFByZXNzZWQoUGxheWVySW5wdXQuRFJPUF9JVEVNKTsgfVxuXG59IiwiaW1wb3J0IEdhbWVFdmVudCBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvRXZlbnRzL0dhbWVFdmVudFwiO1xuaW1wb3J0IHsgUGxheWVyRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vRXZlbnRzXCI7XG5pbXBvcnQgUGxheWVyU3RhdGUgZnJvbSBcIi4vUGxheWVyU3RhdGVcIjtcblxuLyoqXG4gKiBUaGUgRGVhZCBzdGF0ZSBmb3IgdGhlIFBsYXllckFJLiBXaGlsZSB0aGUgcGxheWVyIGlzIGluIHRoZSBcIkRlYWRcIiBzdGF0ZSwgdGhlIHBsYXllciBkb2VzIG5vdFxuICogZ2V0IHVwZGF0ZWQgYW5kIGFsbCBpbmNvbWluZyBldmVudHMgdG8gdGhlIFBsYXllckFJIGFyZSBpZ25vcmVkLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEZWFkIGV4dGVuZHMgUGxheWVyU3RhdGUge1xuXG4gICAgLyoqXG4gICAgICogV2hlbiB0aGUgUGxheWVyQUkgZW50ZXJzIHRoZSBkZWFkIHN0YXRlLCBhbiBldmVudCBpcyBmaXJlZCB0byBhbGVydCB0aGUgc3lzdGVtXG4gICAgICogdGhhdCB0aGUgcGxheWVyIGlzIG9mZmljaWFsbHkgZGVhZC5cbiAgICAgKi9cbiAgICBvbkVudGVyKG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIGFueT4pOiB2b2lkIHtcbiAgICAgICAgLy9wbGF5IGR5aW5nIGFuaW1hdGlvblxuICAgICAgICAvL3RoaXMucGFyZW50Lm93bmVyLmFuaW1hdGlvbi5wbGF5KFwiRFlJTkdcIixmYWxzZSwgXCJERUFEXCIpO1xuICAgICAgICAvL3RoaXMucGFyZW50Lm93bmVyLmFuaW1hdGlvbi5wbGF5KFwiREVBRFwiLGZhbHNlLCBQbGF5ZXJFdmVudC5QTEFZRVJfS0lMTEVEKTtcbiAgICAgICAgdGhpcy5lbWl0dGVyLmZpcmVFdmVudChQbGF5ZXJFdmVudC5QTEFZRVJfS0lMTEVEKTtcbiAgICAgICAgLy8gdGhpcy5wYXJlbnQub3duZXIuYW5pbWF0aW9uLnBsYXkoXCJEWUlOR1wiLCBmYWxzZSwgUGxheWVyRXZlbnQuUExBWUVSX0tJTExFRCk7XG4gICAgICAgIFxuICAgICAgICAvLyB0aGlzLmVtaXR0ZXIuZmlyZUV2ZW50KFBsYXllckV2ZW50LlBMQVlFUl9LSUxMRUQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBpbnB1dCBoYW5kbGVyIGZvciB0aGUgZGVhZCBzdGF0ZSBpZ25vcmVzIGFsbCBpbmNvbWluZyBldmVudHMgdG8gdGhlIHBsYXllci4gXG4gICAgICogQHBhcmFtIGV2ZW50IFxuICAgICAqL1xuICAgIGhhbmRsZUlucHV0KGV2ZW50OiBHYW1lRXZlbnQpOiB2b2lkIHsgfVxuXG4gICAgLyoqXG4gICAgICogU2ltaWxhciB0byB0aGUgaGFuZGxlSW5wdXQgbWV0aG9kLCB3aGlsZSBpbiB0aGUgZGVhZCBzdGF0ZSwgdGhlIFBsYXllckFJIGRvZXNuJ3RcbiAgICAgKiBnZXQgdXBkYXRlZC5cbiAgICAgKiBAcGFyYW0gZGVsdGFUIFxuICAgICAqL1xuICAgIHVwZGF0ZShkZWx0YVQ6IG51bWJlcik6IHZvaWQge1xuICAgICAgICAvLyBpZiAodGhpcy5wYXJlbnQub3duZXIuaGVhbHRoIDw9IDApIHtcbiAgICAgICAgLy8gICAgIHRoaXMucGFyZW50Lm93bmVyLmFuaW1hdGlvbi5wbGF5SWZOb3RBbHJlYWR5KFwiRFlJTkdcIixmYWxzZSwgXCJERUFEXCIpO1xuICAgICAgICAvLyB9XG4gICAgfVxuXG4gICAgb25FeGl0KCk6IFJlY29yZDxzdHJpbmcsIGFueT4geyByZXR1cm4ge30gfVxuXG59IiwiaW1wb3J0IFZlYzIgZnJvbSBcIi4uLy4uLy4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgR2FtZUV2ZW50IGZyb20gXCIuLi8uLi8uLi8uLi9Xb2xmaWUyRC9FdmVudHMvR2FtZUV2ZW50XCI7XG5pbXBvcnQgSW5wdXQgZnJvbSBcIi4uLy4uLy4uLy4uL1dvbGZpZTJEL0lucHV0L0lucHV0XCI7XG5pbXBvcnQgeyBQbGF5ZXJBbmltYXRpb25UeXBlLCBQbGF5ZXJTdGF0ZVR5cGUgfSBmcm9tIFwiLi9QbGF5ZXJTdGF0ZVwiO1xuaW1wb3J0IFBsYXllclN0YXRlIGZyb20gXCIuL1BsYXllclN0YXRlXCI7XG5pbXBvcnQgU2hvb3RMYXNlckd1biBmcm9tIFwiLi4vLi4vTlBDL05QQ0FjdGlvbnMvU2hvb3RMYXNlckd1blwiOyBcbmltcG9ydCBMYXNlckd1biBmcm9tIFwiLi4vLi4vLi4vR2FtZVN5c3RlbXMvSXRlbVN5c3RlbS9JdGVtcy9MYXNlckd1blwiO1xuaW1wb3J0IHsgSXRlbUV2ZW50IH0gZnJvbSBcIi4uLy4uLy4uL0V2ZW50c1wiO1xuaW1wb3J0IHsgR3JhcGhpY1R5cGUgfSBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvTm9kZXMvR3JhcGhpY3MvR3JhcGhpY1R5cGVzXCI7XG5pbXBvcnQgTGluZSBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvTm9kZXMvR3JhcGhpY3MvTGluZVwiO1xuaW1wb3J0IEFBQkIgZnJvbSBcIi4uLy4uLy4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9TaGFwZXMvQUFCQlwiO1xuaW1wb3J0IENpcmNsZSBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL1NoYXBlcy9DaXJjbGVcIjtcbi8vIGltcG9ydCBNYWluSFc0U2NlbmUgZnJvbSBcIi4uLy4uLy4uL1NjZW5lcy9NYWluSFc0U2NlbmVcIjtcbmltcG9ydCBTcHJpdGUgZnJvbSBcIi4uLy4uLy4uLy4uL1dvbGZpZTJEL05vZGVzL1Nwcml0ZXMvU3ByaXRlXCI7XG5pbXBvcnQgT3J0aG9nb25hbFRpbGVtYXAgZnJvbSBcIi4uLy4uLy4uLy4uL1dvbGZpZTJEL05vZGVzL1RpbGVtYXBzL09ydGhvZ29uYWxUaWxlbWFwXCI7XG5pbXBvcnQgeyBHYW1lRXZlbnRUeXBlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL1dvbGZpZTJEL0V2ZW50cy9HYW1lRXZlbnRUeXBlXCI7XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSWRsZSBleHRlbmRzIFBsYXllclN0YXRlIHtcblxuICAgIHByb3RlY3RlZCBsYXNlcmd1bjogTGFzZXJHdW47XG4gICAgcHJvdGVjdGVkIHNob290TGFzZXI6IFNob290TGFzZXJHdW47XG5cbiAgICBwdWJsaWMgb3ZlcnJpZGUgb25FbnRlcihvcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogdm9pZCB7XG4gICAgICAgIHRoaXMucGFyZW50Lm93bmVyLmFuaW1hdGlvbi5wbGF5SWZOb3RBbHJlYWR5KFBsYXllckFuaW1hdGlvblR5cGUuSURMRSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIG92ZXJyaWRlIGhhbmRsZUlucHV0KGV2ZW50OiBHYW1lRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgc3dpdGNoKGV2ZW50LnR5cGUpIHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICBzdXBlci5oYW5kbGVJbnB1dChldmVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0TGFzZXJFbmQod2FsbHM6IE9ydGhvZ29uYWxUaWxlbWFwLCBzdGFydDogVmVjMiwgZGlyOiBWZWMyKTogVmVjMiB7XG4gICAgICAgIGxldCBlbmQgPSBzdGFydC5jbG9uZSgpLmFkZChkaXIuc2NhbGVkKDkwMCkpO1xuICAgICAgICBsZXQgZGVsdGEgPSBlbmQuY2xvbmUoKS5zdWIoc3RhcnQpO1xuXG4gICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCB0aGUgdGlsZW1hcCByZWdpb24gdW50aWwgd2UgZmluZCBhIGNvbGxpc2lvblxuICAgICAgICBsZXQgbWluWCA9IE1hdGgubWluKHN0YXJ0LngsIGVuZC54KTtcbiAgICAgICAgbGV0IG1heFggPSBNYXRoLm1heChzdGFydC54LCBlbmQueCk7XG4gICAgICAgIGxldCBtaW5ZID0gTWF0aC5taW4oc3RhcnQueSwgZW5kLnkpO1xuICAgICAgICBsZXQgbWF4WSA9IE1hdGgubWF4KHN0YXJ0LnksIGVuZC55KTtcblxuICAgICAgICBsZXQgbWluSW5kZXggPSB3YWxscy5nZXRUaWxlbWFwUG9zaXRpb24obWluWCwgbWluWSk7XG5cdFx0bGV0IG1heEluZGV4ID0gd2FsbHMuZ2V0VGlsZW1hcFBvc2l0aW9uKG1heFgsIG1heFkpO1xuXG4gICAgICAgIGxldCB0aWxlU2l6ZSA9IHdhbGxzLmdldFNjYWxlZFRpbGVTaXplKCk7XG5cbiAgICAgICAgZm9yKGxldCBjb2wgPSBtaW5JbmRleC54OyBjb2wgPD0gbWF4SW5kZXgueDsgY29sKyspe1xuICAgICAgICAgICAgZm9yKGxldCByb3cgPSBtaW5JbmRleC55OyByb3cgPD0gbWF4SW5kZXgueTsgcm93Kyspe1xuICAgICAgICAgICAgICAgIGlmKHdhbGxzLmlzVGlsZUNvbGxpZGFibGUoY29sLCByb3cpKXtcbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBwb3NpdGlvbiBvZiB0aGlzIHRpbGVcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRpbGVQb3MgPSBuZXcgVmVjMihjb2wgKiB0aWxlU2l6ZS54ICsgdGlsZVNpemUueC8yLCByb3cgKiB0aWxlU2l6ZS55ICsgdGlsZVNpemUueS8yKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBjb2xsaWRlciBmb3IgdGhpcyB0aWxlXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb2xsaWRlciA9IG5ldyBBQUJCKHRpbGVQb3MsIHRpbGVTaXplLnNjYWxlZCgxLzIpKTtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgaGl0ID0gY29sbGlkZXIuaW50ZXJzZWN0U2VnbWVudChzdGFydCwgZGVsdGEsIFZlYzIuWkVSTyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoaGl0ICE9PSBudWxsICYmIHN0YXJ0LmRpc3RhbmNlU3FUbyhoaXQucG9zKSA8IHN0YXJ0LmRpc3RhbmNlU3FUbyhlbmQpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCA9IGhpdC5wb3M7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVuZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgb3ZlcnJpZGUgdXBkYXRlKGRlbHRhVDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHN1cGVyLnVwZGF0ZShkZWx0YVQpO1xuXG4gICAgICAgIC8vIElmIHRoZSBwbGF5ZXIgaGl0cyB0aGUgYXR0YWNrIGJ1dHRvbiBhbmQgdGhlIHdlYXBvbiBzeXN0ZW0gaXNuJ3QgcnVubmluZywgcmVzdGFydCB0aGUgc3lzdGVtIGFuZCBmaXJlIVxuICAgICAgICBpZiAoSW5wdXQuaXNLZXlKdXN0UHJlc3NlZChcInNwYWNlXCIpKSB7XG4gICAgICAgICAgICAvLyBTaG9vdCBBdWRpbyBQbGF5ZWRcbiAgICAgICAgICAgIHRoaXMuZW1pdHRlci5maXJlRXZlbnQoR2FtZUV2ZW50VHlwZS5QTEFZX1NPVU5ELCB7a2V5OiB0aGlzLm93bmVyLmdldFNjZW5lKCkuZ2V0U2hvb3RBdWRpb0tleSgpLCBsb29wOiBmYWxzZSwgaG9sZFJlZmVyZW5jZTogZmFsc2V9KTtcbiAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNwYWNlX3ByZXNzZWRcIilcblxuICAgICAgICAgICAgbGV0IHNwcml0ZSA9IHRoaXMub3duZXIuZ2V0U2NlbmUoKS5hZGQuc3ByaXRlKFwibGFzZXJHdW5cIiwgXCJwcmltYXJ5XCIpO1xuICAgICAgICAgICAgbGV0IGxpbmUgPSA8TGluZT50aGlzLm93bmVyLmdldFNjZW5lKCkuYWRkLmdyYXBoaWMoR3JhcGhpY1R5cGUuTElORSwgXCJwcmltYXJ5XCIsIHtzdGFydDogVmVjMi5aRVJPLCBlbmQ6IFZlYzIuWkVST30pO1xuICAgICAgICAgICAgdGhpcy5sYXNlcmd1biA9IExhc2VyR3VuLmNyZWF0ZShzcHJpdGUsIGxpbmUpO1xuXG4gICAgICAgICAgICB0aGlzLmxhc2VyZ3VuLmxhc2VyU3RhcnQuY29weSh0aGlzLm93bmVyLnBvc2l0aW9uKTtcbiAgICAgICAgICAgIHRoaXMubGFzZXJndW4uZGlyZWN0aW9uLmNvcHkodGhpcy5vd25lci5wb3NpdGlvbi5kaXJUbyhJbnB1dC5nZXRHbG9iYWxNb3VzZVBvc2l0aW9uKCkpKTtcbiAgICAgICAgICAgIC8vIHRoaXMubGFzZXJndW4ubGFzZXJFbmQuY29weShJbnB1dC5nZXRHbG9iYWxNb3VzZVBvc2l0aW9uKCkpO1xuICAgICAgICAgICAgdGhpcy5sYXNlcmd1bi5sYXNlckVuZC5jb3B5KHRoaXMuZ2V0TGFzZXJFbmQodGhpcy5vd25lci5nZXRTY2VuZSgpLmdldFdhbGxzKCksIHRoaXMubGFzZXJndW4ubGFzZXJTdGFydCwgdGhpcy5sYXNlcmd1bi5kaXJlY3Rpb24pKTtcblxuXG4gICAgICAgICAgICBpZih0aGlzLnBhcmVudC5jb250cm9sbGVyLmZhY2VEaXIueCA8IDApIFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXR0YWNraW5nIGxlZnRcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5vd25lci5hbmltYXRpb24ucGxheShcIkFUVEFDS0lOR19MRUZUXCIsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBQbGF5IHRoZSBzaG9vdGluZyBhbmltYXRpb24gZm9yIHRoZSBsYXNlciBndW5cbiAgICAgICAgICAgICAgICB0aGlzLmxhc2VyZ3VuLnBsYXlTaG9vdEFuaW1hdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgLy8gU2VuZCBhIGxhc2VyIGZpcmVkIGV2ZW50XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0dGVyLmZpcmVFdmVudChJdGVtRXZlbnQuTEFTRVJHVU5fRklSRUQsIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0b3JJZDogdGhpcy5vd25lci5pZCxcbiAgICAgICAgICAgICAgICAgICAgdG86IHRoaXMubGFzZXJndW4ubGFzZXJTdGFydC5jbG9uZSgpLCBcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogdGhpcy5sYXNlcmd1bi5sYXNlckVuZC5jbG9uZSgpLnN1Yih0aGlzLmxhc2VyZ3VuLmxhc2VyU3RhcnQpXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXR0YWNraW5nIHJpZ2h0XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMub3duZXIuYW5pbWF0aW9uLnBsYXkoXCJBVFRBQ0tJTkdfUklHSFRcIiwgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgLy8gUGxheSB0aGUgc2hvb3RpbmcgYW5pbWF0aW9uIGZvciB0aGUgbGFzZXIgZ3VuXG4gICAgICAgICAgICAgICAgdGhpcy5sYXNlcmd1bi5wbGF5U2hvb3RBbmltYXRpb24oKTtcblxuICAgICAgICAgICAgICAgIC8vIFNlbmQgYSBsYXNlciBmaXJlZCBldmVudFxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdHRlci5maXJlRXZlbnQoSXRlbUV2ZW50LkxBU0VSR1VOX0ZJUkVELCB7XG4gICAgICAgICAgICAgICAgICAgIGFjdG9ySWQ6IHRoaXMub3duZXIuaWQsXG4gICAgICAgICAgICAgICAgICAgIHRvOiB0aGlzLmxhc2VyZ3VuLmxhc2VyU3RhcnQuY2xvbmUoKSwgXG4gICAgICAgICAgICAgICAgICAgIGZyb206IHRoaXMubGFzZXJndW4ubGFzZXJFbmQuY2xvbmUoKS5zdWIodGhpcy5sYXNlcmd1bi5sYXNlclN0YXJ0KVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHJvdGF0aW9uIHRvIGFwcGx5IHRoZSBwYXJ0aWNsZXMgdmVsb2NpdHkgdmVjdG9yXG4gICAgICAgICAgICAvLyB0aGlzLndlYXBvbi5yb3RhdGlvbiA9IDIqTWF0aC5QSSAtIFZlYzIuVVAuYW5nbGVUb0NDVyh0aGlzLnBhcmVudC5jb250cm9sbGVyLmZhY2VEaXIpICsgTWF0aC5QSTtcbiAgICAgICAgICAgIC8vIFN0YXJ0IHRoZSBwYXJ0aWNsZSBzeXN0ZW0gYXQgdGhlIHBsYXllcidzIGN1cnJlbnQgcG9zaXRpb25cbiAgICAgICAgICAgIC8vdGhpcy53ZWFwb24uc3RhcnRTeXN0ZW0oNTAwLCAwLCB0aGlzLm93bmVyLnBvc2l0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5wYXJlbnQuY29udHJvbGxlci5tb3ZlRGlyLmVxdWFscyhWZWMyLlpFUk8pKSB7XG4gICAgICAgICAgICB0aGlzLmZpbmlzaGVkKFBsYXllclN0YXRlVHlwZS5NT1ZJTkcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIG92ZXJyaWRlIG9uRXhpdCgpOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHsgXG4gICAgICAgIHJldHVybiB7fTsgXG4gICAgfVxuICAgIFxufSIsImltcG9ydCBHYW1lRXZlbnQgZnJvbSBcIi4uLy4uLy4uLy4uL1dvbGZpZTJEL0V2ZW50cy9HYW1lRXZlbnRcIjtcbmltcG9ydCBUaW1lciBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvVGltaW5nL1RpbWVyXCI7XG5pbXBvcnQgUGxheWVyQWN0b3IgZnJvbSBcIi4uLy4uLy4uL0FjdG9ycy9QbGF5ZXJBY3RvclwiO1xuaW1wb3J0IFBsYXllckFJIGZyb20gXCIuLi9QbGF5ZXJBSVwiO1xuaW1wb3J0IFBsYXllclN0YXRlLCB7IFBsYXllclN0YXRlVHlwZSB9IGZyb20gXCIuL1BsYXllclN0YXRlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEludmluY2libGUgZXh0ZW5kcyBQbGF5ZXJTdGF0ZSB7XG5cbiAgICBwcm90ZWN0ZWQgdGltZXI6IFRpbWVyO1xuXG4gICAgY29uc3RydWN0b3IocGFyZW50OiBQbGF5ZXJBSSwgb3duZXI6IFBsYXllckFjdG9yKSB7XG4gICAgICAgIHN1cGVyKHBhcmVudCwgb3duZXIpO1xuICAgICAgICB0aGlzLnRpbWVyID0gbmV3IFRpbWVyKDEwMCwgKCkgPT4gdGhpcy5maW5pc2hlZChQbGF5ZXJTdGF0ZVR5cGUuSURMRSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvdmVycmlkZSB1cGRhdGUoZGVsdGFUOiBudW1iZXIpOiB2b2lkIHt9XG5cbiAgICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlSW5wdXQoZXZlbnQ6IEdhbWVFdmVudCk6IHZvaWQge1xuICAgICAgICBzd2l0Y2goZXZlbnQudHlwZSkge1xuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIHN1cGVyLmhhbmRsZUlucHV0KGV2ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBvdmVycmlkZSBvbkVudGVyKG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIGFueT4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy50aW1lci5zdGFydCgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvdmVycmlkZSBvbkV4aXQoKTogUmVjb3JkPHN0cmluZywgYW55PiB7IFxuICAgICAgICByZXR1cm4ge307XG4gICAgfVxufSIsImltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi8uLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IEdhbWVFdmVudCBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvRXZlbnRzL0dhbWVFdmVudFwiO1xuaW1wb3J0IElucHV0IGZyb20gXCIuLi8uLi8uLi8uLi9Xb2xmaWUyRC9JbnB1dC9JbnB1dFwiO1xuaW1wb3J0IHsgUGxheWVyU3RhdGVUeXBlIH0gZnJvbSBcIi4vUGxheWVyU3RhdGVcIjtcbmltcG9ydCBQbGF5ZXJTdGF0ZSBmcm9tIFwiLi9QbGF5ZXJTdGF0ZVwiO1xuaW1wb3J0IHsgUGxheWVySW5wdXQgfSBmcm9tIFwiLi4vUGxheWVyQ29udHJvbGxlclwiO1xuaW1wb3J0IExhc2VyR3VuIGZyb20gXCIuLi8uLi8uLi9HYW1lU3lzdGVtcy9JdGVtU3lzdGVtL0l0ZW1zL0xhc2VyR3VuXCI7XG5pbXBvcnQgeyBJdGVtRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vRXZlbnRzXCI7XG5pbXBvcnQgeyBHcmFwaGljVHlwZSB9IGZyb20gXCIuLi8uLi8uLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9HcmFwaGljcy9HcmFwaGljVHlwZXNcIjtcbmltcG9ydCBMaW5lIGZyb20gXCIuLi8uLi8uLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9HcmFwaGljcy9MaW5lXCI7XG5pbXBvcnQgeyBHYW1lRXZlbnRUeXBlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL1dvbGZpZTJEL0V2ZW50cy9HYW1lRXZlbnRUeXBlXCI7XG5pbXBvcnQgQUFCQiBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL1NoYXBlcy9BQUJCXCI7XG5pbXBvcnQgT3J0aG9nb25hbFRpbGVtYXAgZnJvbSBcIi4uLy4uLy4uLy4uL1dvbGZpZTJEL05vZGVzL1RpbGVtYXBzL09ydGhvZ29uYWxUaWxlbWFwXCI7XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW92aW5nIGV4dGVuZHMgUGxheWVyU3RhdGUge1xuXG4gICAgcHJvdGVjdGVkIGxhc2VyZ3VuOiBMYXNlckd1bjtcbiAgICBcbiAgICBwdWJsaWMgb3ZlcnJpZGUgb25FbnRlcihvcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogdm9pZCB7XG4gICAgXG4gICAgfVxuXG4gICAgcHVibGljIG92ZXJyaWRlIGhhbmRsZUlucHV0KGV2ZW50OiBHYW1lRXZlbnQpOiB2b2lkIHsgXG4gICAgICAgIHN3aXRjaChldmVudC50eXBlKSB7XG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgc3VwZXIuaGFuZGxlSW5wdXQoZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldExhc2VyRW5kKHdhbGxzOiBPcnRob2dvbmFsVGlsZW1hcCwgc3RhcnQ6IFZlYzIsIGRpcjogVmVjMik6IFZlYzIge1xuICAgICAgICBsZXQgZW5kID0gc3RhcnQuY2xvbmUoKS5hZGQoZGlyLnNjYWxlZCg5MDApKTtcbiAgICAgICAgbGV0IGRlbHRhID0gZW5kLmNsb25lKCkuc3ViKHN0YXJ0KTtcblxuICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggdGhlIHRpbGVtYXAgcmVnaW9uIHVudGlsIHdlIGZpbmQgYSBjb2xsaXNpb25cbiAgICAgICAgbGV0IG1pblggPSBNYXRoLm1pbihzdGFydC54LCBlbmQueCk7XG4gICAgICAgIGxldCBtYXhYID0gTWF0aC5tYXgoc3RhcnQueCwgZW5kLngpO1xuICAgICAgICBsZXQgbWluWSA9IE1hdGgubWluKHN0YXJ0LnksIGVuZC55KTtcbiAgICAgICAgbGV0IG1heFkgPSBNYXRoLm1heChzdGFydC55LCBlbmQueSk7XG5cbiAgICAgICAgbGV0IG1pbkluZGV4ID0gd2FsbHMuZ2V0VGlsZW1hcFBvc2l0aW9uKG1pblgsIG1pblkpO1xuXHRcdGxldCBtYXhJbmRleCA9IHdhbGxzLmdldFRpbGVtYXBQb3NpdGlvbihtYXhYLCBtYXhZKTtcblxuICAgICAgICBsZXQgdGlsZVNpemUgPSB3YWxscy5nZXRTY2FsZWRUaWxlU2l6ZSgpO1xuXG4gICAgICAgIGZvcihsZXQgY29sID0gbWluSW5kZXgueDsgY29sIDw9IG1heEluZGV4Lng7IGNvbCsrKXtcbiAgICAgICAgICAgIGZvcihsZXQgcm93ID0gbWluSW5kZXgueTsgcm93IDw9IG1heEluZGV4Lnk7IHJvdysrKXtcbiAgICAgICAgICAgICAgICBpZih3YWxscy5pc1RpbGVDb2xsaWRhYmxlKGNvbCwgcm93KSl7XG4gICAgICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgcG9zaXRpb24gb2YgdGhpcyB0aWxlXG4gICAgICAgICAgICAgICAgICAgIGxldCB0aWxlUG9zID0gbmV3IFZlYzIoY29sICogdGlsZVNpemUueCArIHRpbGVTaXplLngvMiwgcm93ICogdGlsZVNpemUueSArIHRpbGVTaXplLnkvMik7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgY29sbGlkZXIgZm9yIHRoaXMgdGlsZVxuICAgICAgICAgICAgICAgICAgICBsZXQgY29sbGlkZXIgPSBuZXcgQUFCQih0aWxlUG9zLCB0aWxlU2l6ZS5zY2FsZWQoMS8yKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IGhpdCA9IGNvbGxpZGVyLmludGVyc2VjdFNlZ21lbnQoc3RhcnQsIGRlbHRhLCBWZWMyLlpFUk8pO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKGhpdCAhPT0gbnVsbCAmJiBzdGFydC5kaXN0YW5jZVNxVG8oaGl0LnBvcykgPCBzdGFydC5kaXN0YW5jZVNxVG8oZW5kKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSBoaXQucG9zO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbmQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBvdmVycmlkZSB1cGRhdGUoZGVsdGFUOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgc3VwZXIudXBkYXRlKGRlbHRhVCk7XG4gICAgICAgIFxuICAgICAgICAvLyBpZiAoSW5wdXQuaXNLZXlKdXN0UHJlc3NlZChcInNwYWNlXCIpKSB7XG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcIlNwYWNlX3ByZXNzZWRcIilcbiAgICAgICAgLy8gICAgIGlmKHRoaXMucGFyZW50LmNvbnRyb2xsZXIuZmFjZURpci54IDwgMCkgXG4gICAgICAgIC8vICAgICB7XG4gICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coXCJBdHRhY2tpbmcgbGVmdFwiKTtcbiAgICAgICAgLy8gICAgICAgICB0aGlzLm93bmVyLmFuaW1hdGlvbi5wbGF5KFwiQVRUQUNLSU5HX0xFRlRcIiwgZmFsc2UpO1xuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIC8vICAgICB7XG4gICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coXCJBdHRhY2tpbmcgcmlnaHRcIik7XG4gICAgICAgIC8vICAgICAgICAgdGhpcy5vd25lci5hbmltYXRpb24ucGxheShcIkFUVEFDS0lOR19SSUdIVFwiLCBmYWxzZSk7XG4gICAgICAgIC8vICAgICB9XG5cbiAgICAgICAgLy8gICAgIC8vIFVwZGF0ZSB0aGUgcm90YXRpb24gdG8gYXBwbHkgdGhlIHBhcnRpY2xlcyB2ZWxvY2l0eSB2ZWN0b3JcbiAgICAgICAgLy8gICAgIC8vdGhpcy53ZWFwb24ucm90YXRpb24gPSAyKk1hdGguUEkgLSBWZWMyLlVQLmFuZ2xlVG9DQ1codGhpcy5wYXJlbnQuY29udHJvbGxlci5mYWNlRGlyKSArIE1hdGguUEk7XG4gICAgICAgIC8vICAgICAvLyBTdGFydCB0aGUgcGFydGljbGUgc3lzdGVtIGF0IHRoZSBwbGF5ZXIncyBjdXJyZW50IHBvc2l0aW9uXG4gICAgICAgIC8vICAgICAvL3RoaXMud2VhcG9uLnN0YXJ0U3lzdGVtKDUwMCwgMCwgdGhpcy5vd25lci5wb3NpdGlvbik7XG4gICAgICAgIC8vIH1cblxuICAgICAgICAvLyBpZiAoSW5wdXQuaXNLZXlQcmVzc2VkKFwiQVwiKSAmJiBJbnB1dC5pc0tleVByZXNzZWQoXCJEXCIpKSB7XG4gICAgICAgIC8vICAgICB0aGlzLm93bmVyLmFuaW1hdGlvbi5wbGF5KFwiSURMRVwiKVxuICAgICAgICAvLyB9XG4gICAgICAgIC8vIGVsc2UgaWYgKElucHV0LmlzS2V5UHJlc3NlZChcIkFcIikpIHtcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKFwicnVubmluZyBsZWZ0XCIpXG4gICAgICAgIC8vICAgICB0aGlzLm93bmVyLmFuaW1hdGlvbi5wbGF5KFwiUlVOTklOR19MRUZUXCIsIHRydWUsIFwiSURMRVwiKTtcbiAgICAgICAgLy8gfVxuICAgICAgICAvLyBlbHNlIGlmIChJbnB1dC5pc0tleVByZXNzZWQoXCJEXCIpKSB7XG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcInJ1bm5pbmcgcmlnaHRcIilcbiAgICAgICAgLy8gICAgIHRoaXMub3duZXIuYW5pbWF0aW9uLnBsYXkoXCJSVU5OSU5HX1JJR0hUXCIsIHRydWUsIFwiSURMRVwiKTtcbiAgICAgICAgLy8gfVxuICAgICAgICBpZiAodGhpcy5wYXJlbnQuY29udHJvbGxlci5tb3ZlRGlyLnggPCAwKSB7XG4gICAgICAgICAgICB0aGlzLm93bmVyLmFuaW1hdGlvbi5wbGF5SWZOb3RBbHJlYWR5KFwiUlVOTklOR19MRUZUXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYodGhpcy5wYXJlbnQuY29udHJvbGxlci5tb3ZlRGlyLnggPiAwKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLm93bmVyLmFuaW1hdGlvbi5wbGF5SWZOb3RBbHJlYWR5KFwiUlVOTklOR19SSUdIVFwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMub3duZXIuYW5pbWF0aW9uLnBsYXlJZk5vdEFscmVhZHkoXCJJRExFXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucGFyZW50LmNvbnRyb2xsZXIubW92ZURpci5lcXVhbHMoVmVjMi5aRVJPKSkge1xuICAgICAgICAgICAgdGhpcy5maW5pc2hlZChQbGF5ZXJTdGF0ZVR5cGUuSURMRSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGlmIChJbnB1dC5pc0tleUp1c3RQcmVzc2VkKFwic3BhY2VcIikpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU3BhY2VfcHJlc3NlZFwiKVxuXG4gICAgICAgICAgICAvLyBpZiAodGhpcy5wYXJlbnQuY29udHJvbGxlci5tb3ZlRGlyLnggPCAwKSB7XG4gICAgICAgICAgICAvLyAgICAgdGhpcy5vd25lci5hbmltYXRpb24ucGxheUlmTm90QWxyZWFkeShcIlJVTk5JTkdfTEVGVFwiKTtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIC8vIGVsc2UgaWYodGhpcy5wYXJlbnQuY29udHJvbGxlci5tb3ZlRGlyLnggPiAwKVxuICAgICAgICAgICAgLy8ge1xuICAgICAgICAgICAgLy8gICAgIHRoaXMub3duZXIuYW5pbWF0aW9uLnBsYXlJZk5vdEFscmVhZHkoXCJSVU5OSU5HX1JJR0hUXCIpO1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgLy8gZWxzZVxuICAgICAgICAgICAgLy8ge1xuICAgICAgICAgICAgLy8gICAgIHRoaXMub3duZXIuYW5pbWF0aW9uLnBsYXlJZk5vdEFscmVhZHkoXCJJRExFXCIpO1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgLy8gU2hvb3QgQXVkaW8gUGxheWVkXG4gICAgICAgICAgICB0aGlzLmVtaXR0ZXIuZmlyZUV2ZW50KEdhbWVFdmVudFR5cGUuUExBWV9TT1VORCwge2tleTogdGhpcy5vd25lci5nZXRTY2VuZSgpLmdldFNob290QXVkaW9LZXkoKSwgbG9vcDogZmFsc2UsIGhvbGRSZWZlcmVuY2U6IGZhbHNlfSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5jb250cm9sbGVyLm1vdmVEaXIueCA8IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm93bmVyLmFuaW1hdGlvbi5wbGF5SWZOb3RBbHJlYWR5KFwiUlVOTklOR19MRUZUXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZih0aGlzLnBhcmVudC5jb250cm9sbGVyLm1vdmVEaXIueCA+IDApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5vd25lci5hbmltYXRpb24ucGxheUlmTm90QWxyZWFkeShcIlJVTk5JTkdfUklHSFRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5vd25lci5hbmltYXRpb24ucGxheUlmTm90QWxyZWFkeShcIklETEVcIik7XG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAvLyBpZiAodGhpcy5wYXJlbnQuY29udHJvbGxlci5tb3ZlRGlyLmVxdWFscyhWZWMyLlpFUk8pKSB7XG4gICAgICAgICAgICAvLyAgICAgdGhpcy5maW5pc2hlZChQbGF5ZXJTdGF0ZVR5cGUuSURMRSk7XG4gICAgICAgICAgICAvLyB9XG5cbiAgICAgICAgICAgIGxldCBzcHJpdGUgPSB0aGlzLm93bmVyLmdldFNjZW5lKCkuYWRkLnNwcml0ZShcImxhc2VyR3VuXCIsIFwicHJpbWFyeVwiKTtcbiAgICAgICAgICAgIGxldCBsaW5lID0gPExpbmU+dGhpcy5vd25lci5nZXRTY2VuZSgpLmFkZC5ncmFwaGljKEdyYXBoaWNUeXBlLkxJTkUsIFwicHJpbWFyeVwiLCB7c3RhcnQ6IFZlYzIuWkVSTywgZW5kOiBWZWMyLlpFUk99KTtcbiAgICAgICAgICAgIHRoaXMubGFzZXJndW4gPSBMYXNlckd1bi5jcmVhdGUoc3ByaXRlLCBsaW5lKTtcblxuICAgICAgICAgICAgdGhpcy5sYXNlcmd1bi5sYXNlclN0YXJ0LmNvcHkodGhpcy5vd25lci5wb3NpdGlvbik7XG4gICAgICAgICAgICB0aGlzLmxhc2VyZ3VuLmRpcmVjdGlvbi5jb3B5KHRoaXMub3duZXIucG9zaXRpb24uZGlyVG8oSW5wdXQuZ2V0R2xvYmFsTW91c2VQb3NpdGlvbigpKSk7XG4gICAgICAgICAgICB0aGlzLmxhc2VyZ3VuLmxhc2VyRW5kLmNvcHkodGhpcy5nZXRMYXNlckVuZCh0aGlzLm93bmVyLmdldFNjZW5lKCkuZ2V0V2FsbHMoKSwgdGhpcy5sYXNlcmd1bi5sYXNlclN0YXJ0LCB0aGlzLmxhc2VyZ3VuLmRpcmVjdGlvbikpO1xuXG4gICAgICAgICAgICBpZih0aGlzLnBhcmVudC5jb250cm9sbGVyLmZhY2VEaXIueCA8IDApIFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXR0YWNraW5nIGxlZnRcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5vd25lci5hbmltYXRpb24ucGxheShcIkFUVEFDS0lOR19MRUZUXCIsIGZhbHNlLCBcIklETEVcIik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gUGxheSB0aGUgc2hvb3RpbmcgYW5pbWF0aW9uIGZvciB0aGUgbGFzZXIgZ3VuXG4gICAgICAgICAgICAgICAgdGhpcy5sYXNlcmd1bi5wbGF5U2hvb3RBbmltYXRpb24oKTtcblxuICAgICAgICAgICAgICAgIC8vIFNlbmQgYSBsYXNlciBmaXJlZCBldmVudFxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdHRlci5maXJlRXZlbnQoSXRlbUV2ZW50LkxBU0VSR1VOX0ZJUkVELCB7XG4gICAgICAgICAgICAgICAgICAgIGFjdG9ySWQ6IHRoaXMub3duZXIuaWQsXG4gICAgICAgICAgICAgICAgICAgIHRvOiB0aGlzLmxhc2VyZ3VuLmxhc2VyU3RhcnQuY2xvbmUoKSwgXG4gICAgICAgICAgICAgICAgICAgIGZyb206IHRoaXMubGFzZXJndW4ubGFzZXJFbmQuY2xvbmUoKS5zdWIodGhpcy5sYXNlcmd1bi5sYXNlclN0YXJ0KVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkF0dGFja2luZyByaWdodFwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLm93bmVyLmFuaW1hdGlvbi5wbGF5KFwiQVRUQUNLSU5HX1JJR0hUXCIsIGZhbHNlLCBcIlJVTk5JTkdfUklHSFRcIik7XG5cbiAgICAgICAgICAgICAgICAvLyBQbGF5IHRoZSBzaG9vdGluZyBhbmltYXRpb24gZm9yIHRoZSBsYXNlciBndW5cbiAgICAgICAgICAgICAgICB0aGlzLmxhc2VyZ3VuLnBsYXlTaG9vdEFuaW1hdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgLy8gU2VuZCBhIGxhc2VyIGZpcmVkIGV2ZW50XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0dGVyLmZpcmVFdmVudChJdGVtRXZlbnQuTEFTRVJHVU5fRklSRUQsIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0b3JJZDogdGhpcy5vd25lci5pZCxcbiAgICAgICAgICAgICAgICAgICAgdG86IHRoaXMubGFzZXJndW4ubGFzZXJTdGFydC5jbG9uZSgpLCBcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogdGhpcy5sYXNlcmd1bi5sYXNlckVuZC5jbG9uZSgpLnN1Yih0aGlzLmxhc2VyZ3VuLmxhc2VyU3RhcnQpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBcbiAgICB9XG5cbiAgICBwdWJsaWMgb3ZlcnJpZGUgb25FeGl0KCk6IFJlY29yZDxzdHJpbmcsIGFueT4geyByZXR1cm4ge307IH1cblxufSIsImltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi8uLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IFN0YXRlIGZyb20gXCIuLi8uLi8uLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvU3RhdGUvU3RhdGVcIjtcbmltcG9ydCBHYW1lRXZlbnQgZnJvbSBcIi4uLy4uLy4uLy4uL1dvbGZpZTJEL0V2ZW50cy9HYW1lRXZlbnRcIjtcbmltcG9ydCBQbGF5ZXJXZWFwb24gZnJvbSBcIi4uL1BsYXllcldlYXBvblwiO1xuaW1wb3J0IElucHV0IGZyb20gXCIuLi8uLi8uLi8uLi9Xb2xmaWUyRC9JbnB1dC9JbnB1dFwiO1xuaW1wb3J0IHsgQmF0dGxlckV2ZW50LCBIdWRFdmVudCwgSXRlbUV2ZW50IH0gZnJvbSBcIi4uLy4uLy4uL0V2ZW50c1wiXG5pbXBvcnQgSXRlbSBmcm9tIFwiLi4vLi4vLi4vR2FtZVN5c3RlbXMvSXRlbVN5c3RlbS9JdGVtXCI7XG5pbXBvcnQgUGxheWVyQUkgZnJvbSBcIi4uL1BsYXllckFJXCI7XG5cblxuZXhwb3J0IGVudW0gUGxheWVyQW5pbWF0aW9uVHlwZSB7XG4gICAgSURMRSA9IFwiSURMRVwiXG59XG5cblxuZXhwb3J0IGVudW0gUGxheWVyU3RhdGVUeXBlIHtcbiAgICBJRExFID0gXCJJRExFXCIsXG4gICAgSU5WSU5DSUJMRSA9IFwiSU5WSU5DSUJMRVwiLFxuICAgIEFUVEFDS0lORyA9IFwiQVRUQUNLSU5HXCIsXG4gICAgTU9WSU5HID0gXCJNT1ZJTkdcIixcbiAgICBERUFEID0gXCJERUFEXCJcbn1cblxuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgUGxheWVyU3RhdGUgZXh0ZW5kcyBTdGF0ZSB7XG5cbiAgICBwcm90ZWN0ZWQgcGFyZW50OiBQbGF5ZXJBSTtcbiAgICBwcm90ZWN0ZWQgb3duZXI6IFBsYXllckFjdG9yO1xuICAgIHByb3RlY3RlZCB3ZWFwb246IFBsYXllcldlYXBvbjtcblxuICAgIHByb3RlY3RlZCBib29sID0gdHJ1ZTtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihwYXJlbnQ6IFBsYXllckFJLCBvd25lcjogUGxheWVyQWN0b3IpIHtcbiAgICAgICAgc3VwZXIocGFyZW50KTtcbiAgICAgICAgdGhpcy5vd25lciA9IG93bmVyO1xuICAgIH1cblxuICAgIHB1YmxpYyBvdmVycmlkZSBvbkVudGVyKG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIGFueT4pOiB2b2lkIHt9XG4gICAgcHVibGljIG92ZXJyaWRlIG9uRXhpdCgpOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHsgcmV0dXJuIHt9OyB9XG4gICAgcHVibGljIG92ZXJyaWRlIHVwZGF0ZShkZWx0YVQ6IG51bWJlcik6IHZvaWQge1xuXG4gICAgICAgIC8vIEFkanVzdCB0aGUgYW5nbGUgdGhlIHBsYXllciBpcyBmYWNpbmcgXG4gICAgICAgIC8vIHRoaXMucGFyZW50Lm93bmVyLnJvdGF0aW9uID0gdGhpcy5wYXJlbnQuY29udHJvbGxlci5yb3RhdGlvbjtcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgcm90YXRpb24gdG8gYXBwbHkgdGhlIHBhcnRpY2xlcyB2ZWxvY2l0eSB2ZWN0b3JcbiAgICAgICAgLy90aGlzLndlYXBvbi5yb3RhdGlvbiA9IDIqTWF0aC5QSSAtIFZlYzIuVVAuYW5nbGVUb0NDVyh0aGlzLnBhcmVudC5jb250cm9sbGVyLmZhY2VEaXIpICsgTWF0aC5QSTtcblxuICAgICAgICAvLyBNb3ZlIHRoZSBwbGF5ZXJcbiAgICAgICAgdGhpcy5wYXJlbnQub3duZXIubW92ZSh0aGlzLnBhcmVudC5jb250cm9sbGVyLm1vdmVEaXIpO1xuXG4gICAgICAgIC8vIGlmICh0aGlzLnBhcmVudC5jb250cm9sbGVyLm1vdmVEaXIuZXF1YWxzKFZlYzIuWkVSTykpIHtcbiAgICAgICAgLy8gICAgIHRoaXMuZmluaXNoZWQoUGxheWVyU3RhdGVUeXBlLklETEUpO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgaWYodGhpcy5wYXJlbnQub3duZXIuaGVhbHRoIDw9IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGxheWluZyBkeWluZyBhdWRpb1wiKTtcblxuICAgICAgICAgICAgaWYodGhpcy5ib29sID09IHRydWUpe1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdHRlci5maXJlRXZlbnQoR2FtZUV2ZW50VHlwZS5QTEFZX1NPVU5ELCB7a2V5OiB0aGlzLm93bmVyLmdldFNjZW5lKCkuZ2V0RHlpbmdBdWRpb0tleSgpLCBsb29wOiBmYWxzZSwgaG9sZFJlZmVyZW5jZTogZmFsc2V9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmJvb2wgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm93bmVyLmFuaW1hdGlvbi5wbGF5SWZOb3RBbHJlYWR5KFwiRFlJTkdcIixmYWxzZSwgXCJERUFEXCIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub3duZXIuZnJlZXplKCk7XG4gICAgICAgICAgICAvL3RoaXMucGFyZW50Lm93bmVyLmFuaW1hdGlvbi5wbGF5SWZOb3RBbHJlYWR5KFwiREVBRFwiLGZhbHNlLCBQbGF5ZXJTdGF0ZVR5cGUuREVBRCk7XG4gICAgICAgICAgICAvL3RoaXMuZmluaXNoZWQoUGxheWVyU3RhdGVUeXBlLkRFQUQpO1xuICAgICAgICAgICAgLy8gdGhpcy5wYXJlbnQub3duZXIuYW5pbWF0aW9uLnBsYXkoXCJEWUlOR1wiLCB0cnVlKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQub3duZXIuYW5pbWF0aW9uLmlzUGxheWluZyhcIkRZSU5HXCIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQub3duZXIuYW5pbWF0aW9uLnBsYXkoXCJERUFEXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuZmluaXNoZWQoUGxheWVyU3RhdGVUeXBlLkRFQUQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgIFxuXG4gICAgICAgIC8vIEhhbmRsZSB0aGUgcGxheWVyIHRyeWluZyB0byBwaWNrIHVwIGFuIGl0ZW1cbiAgICAgICAgaWYgKHRoaXMucGFyZW50LmNvbnRyb2xsZXIucGlja2luZ1VwKSB7XG4gICAgICAgICAgICAvLyBSZXF1ZXN0IGFuIGl0ZW0gZnJvbSB0aGUgc2NlbmVcbiAgICAgICAgICAgIHRoaXMuZW1pdHRlci5maXJlRXZlbnQoSXRlbUV2ZW50LklURU1fUkVRVUVTVCwge25vZGU6IHRoaXMub3duZXIsIGludmVudG9yeTogdGhpcy5vd25lci5pbnZlbnRvcnl9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEhhbmRsZSB0aGUgcGxheWVyIHRyeWluZyB0byBkcm9wIGFuIGl0ZW1cbiAgICAgICAgaWYgKHRoaXMucGFyZW50LmNvbnRyb2xsZXIuZHJvcHBpbmcpIHtcbiAgICAgICAgICAgIFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucGFyZW50LmNvbnRyb2xsZXIudXNlSXRlbSkge1xuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlSW5wdXQoZXZlbnQ6IEdhbWVFdmVudCk6IHZvaWQge1xuICAgICAgICBzd2l0Y2goZXZlbnQudHlwZSkge1xuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5oYW5kbGVkIGV2ZW50IG9mIHR5cGUgJHtldmVudC50eXBlfSBjYXVnaHQgaW4gUGxheWVyU3RhdGUhYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuaW1wb3J0IElkbGUgZnJvbSBcIi4vSWRsZVwiO1xuaW1wb3J0IEludmluY2libGUgZnJvbSBcIi4vSW52aW5jaWJsZVwiO1xuaW1wb3J0IE1vdmluZyBmcm9tIFwiLi9Nb3ZpbmdcIjtcbmltcG9ydCBEZWFkIGZyb20gXCIuL0RlYWRcIjtcbmltcG9ydCBQbGF5ZXJBY3RvciBmcm9tIFwiLi4vLi4vLi4vQWN0b3JzL1BsYXllckFjdG9yXCI7XG5pbXBvcnQgeyBHYW1lRXZlbnRUeXBlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL1dvbGZpZTJEL0V2ZW50cy9HYW1lRXZlbnRUeXBlXCI7XG5leHBvcnQgeyBJZGxlLCBJbnZpbmNpYmxlLCBNb3ZpbmcsIERlYWR9ICIsImltcG9ydCBTcHJpdGVzaGVldCBmcm9tIFwiLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL1Nwcml0ZXNoZWV0XCI7XG5pbXBvcnQgVmVjMiBmcm9tIFwiLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL1ZlYzJcIjtcbmltcG9ydCBBbmltYXRlZFNwcml0ZSBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvU3ByaXRlcy9BbmltYXRlZFNwcml0ZVwiXG5pbXBvcnQgTmF2aWdhdGlvblBhdGggZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1BhdGhmaW5kaW5nL05hdmlnYXRpb25QYXRoXCI7XG5pbXBvcnQgeyBCYXR0bGVyRXZlbnQsIEh1ZEV2ZW50IH0gZnJvbSBcIi4uL0V2ZW50c1wiO1xuaW1wb3J0IEludmVudG9yeSBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvSXRlbVN5c3RlbS9JbnZlbnRvcnlcIjtcbi8vIGltcG9ydCBIVzRTY2VuZSBmcm9tIFwiLi4vU2NlbmVzL0hXNFNjZW5lXCI7XG5pbXBvcnQgQmFzaWNUYXJnZXRhYmxlIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9UYXJnZXRpbmcvQmFzaWNUYXJnZXRhYmxlXCI7XG5pbXBvcnQgQmFzaWNUYXJnZXRpbmcgZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL1RhcmdldGluZy9CYXNpY1RhcmdldGluZ1wiO1xuXG5pbXBvcnQgQmF0dGxlciBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvQmF0dGxlU3lzdGVtL0JhdHRsZXJcIjtcbmltcG9ydCB7IFRhcmdldGFibGVFbnRpdHkgfSBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvVGFyZ2V0aW5nL1RhcmdldGFibGVFbnRpdHlcIjtcbmltcG9ydCB7IFRhcmdldGluZ0VudGl0eSB9IGZyb20gXCIuLi9HYW1lU3lzdGVtcy9UYXJnZXRpbmcvVGFyZ2V0aW5nRW50aXR5XCI7XG5pbXBvcnQgQmFzaWNCYXR0bGVyIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9CYXR0bGVTeXN0ZW0vQmFzaWNCYXR0bGVyXCI7XG5pbXBvcnQgVGltZXIgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1RpbWluZy9UaW1lclwiO1xuaW1wb3J0IEZpbmFsUHJvamVjdFNjZW5lIGZyb20gXCIuLi9TY2VuZXMvRmluYWxQcm9qZWN0U2NlbmVcIjtcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOUENBY3RvciBleHRlbmRzIEFuaW1hdGVkU3ByaXRlIGltcGxlbWVudHMgQmF0dGxlciwgVGFyZ2V0aW5nRW50aXR5IHtcblxuICAgIC8qKiBPdmVycmlkZSB0aGUgdHlwZSBvZiB0aGUgc2NlbmUgdG8gYmUgdGhlIEhXMyBzY2VuZSAqL1xuICAgIHByb3RlY3RlZCBzY2VuZTogRmluYWxQcm9qZWN0U2NlbmVcblxuICAgIC8vIEFuIGludmluY2libGUgdGltZXIgZm9yIG91ciBOUENzXG4gICAgcHJvdGVjdGVkIGludmluY2libGVUaW1lcjogVGltZXI7XG5cbiAgICAvLyBUaGUga2V5IG9mIHRoZSBOYXZtZXNoIHRvIHVzZSB0byBidWlsZCBwYXRocyBmb3IgdGhpcyBOUENBY3RvclxuICAgIHByb3RlY3RlZCBfbmF2a2V5OiBzdHJpbmc7XG5cbiAgICAvLyBUaGUgTlBDcyBiYXR0bGVyIG9iamVjdFxuICAgIHByb3RlY3RlZCBfYmF0dGxlcjogQmF0dGxlcjtcblxuICAgIHByb3RlY3RlZCBfdGFyZ2V0aW5nOiBUYXJnZXRpbmdFbnRpdHk7XG5cbiAgICBwdWJsaWMgcmFuZ2U6IG51bWJlcjtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihzaGVldDogU3ByaXRlc2hlZXQpIHtcbiAgICAgICAgc3VwZXIoc2hlZXQpO1xuICAgICAgICB0aGlzLl9uYXZrZXkgPSBcIm5hdmtleVwiO1xuICAgICAgICB0aGlzLl9iYXR0bGVyID0gbmV3IEJhc2ljQmF0dGxlcih0aGlzKTtcbiAgICAgICAgdGhpcy5fdGFyZ2V0aW5nID0gbmV3IEJhc2ljVGFyZ2V0aW5nKHRoaXMpO1xuICAgICAgICB0aGlzLmludmluY2libGVUaW1lciA9IG5ldyBUaW1lcigxMDAwKTtcblxuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcInVzZS1ocGFja1wiKTtcbiAgICB9XG5cbiAgICAvKiogVGhlIFRhcmdldGluZ0VudGl0eSBpbnRlcmZhY2UgKi9cbiAgICBcbiAgICBwdWJsaWMgY2xlYXJUYXJnZXQoKTogdm9pZCB7IHRoaXMuX3RhcmdldGluZy5jbGVhclRhcmdldCgpOyB9XG4gICAgcHVibGljIHNldFRhcmdldCh0YXJnZXRhYmxlOiBUYXJnZXRhYmxlRW50aXR5KTogdm9pZCB7IHRoaXMuX3RhcmdldGluZy5zZXRUYXJnZXQodGFyZ2V0YWJsZSk7IH1cbiAgICBwdWJsaWMgaGFzVGFyZ2V0KCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy5fdGFyZ2V0aW5nLmhhc1RhcmdldCgpOyB9XG4gICAgcHVibGljIGdldFRhcmdldCgpOiBUYXJnZXRhYmxlRW50aXR5IHsgcmV0dXJuIHRoaXMuX3RhcmdldGluZy5nZXRUYXJnZXQoKTsgfVxuICAgIFxuICAgIC8qKiBUaGUgVGFyZ2V0YWJsZUVudGl0eSBpbnRlcmZhY2UgKi9cblxuICAgIHB1YmxpYyBnZXRUYXJnZXRpbmcoKTogVGFyZ2V0aW5nRW50aXR5W10geyByZXR1cm4gdGhpcy5fYmF0dGxlci5nZXRUYXJnZXRpbmcoKTsgfVxuICAgIHB1YmxpYyBhZGRUYXJnZXRpbmcodGFyZ2V0aW5nOiBUYXJnZXRpbmdFbnRpdHkpOiB2b2lkIHsgdGhpcy5fYmF0dGxlci5hZGRUYXJnZXRpbmcodGFyZ2V0aW5nKTsgfVxuICAgIHB1YmxpYyByZW1vdmVUYXJnZXRpbmcodGFyZ2V0aW5nOiBUYXJnZXRpbmdFbnRpdHkpOiB2b2lkIHsgdGhpcy5fYmF0dGxlci5yZW1vdmVUYXJnZXRpbmcodGFyZ2V0aW5nKTsgfVxuXG4gICAgYXRUYXJnZXQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXJnZXRpbmcuZ2V0VGFyZ2V0KCkucG9zaXRpb24uZGlzdGFuY2VTcVRvKHRoaXMucG9zaXRpb24pIDwgNjI1O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgYmF0dGxlckFjdGl2ZSgpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMuYmF0dGxlci5iYXR0bGVyQWN0aXZlOyB9XG4gICAgcHVibGljIHNldCBiYXR0bGVyQWN0aXZlKHZhbHVlOiBib29sZWFuKSB7IFxuICAgICAgICB0aGlzLmJhdHRsZXIuYmF0dGxlckFjdGl2ZSA9IHZhbHVlOyBcbiAgICAgICAgdGhpcy52aXNpYmxlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuYWlBY3RpdmUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IGJhdHRsZUdyb3VwKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmJhdHRsZXIuYmF0dGxlR3JvdXA7IH1cbiAgICBwdWJsaWMgc2V0IGJhdHRsZUdyb3VwKGJhdHRsZUdyb3VwOiBudW1iZXIpIHsgdGhpcy5iYXR0bGVyLmJhdHRsZUdyb3VwID0gYmF0dGxlR3JvdXA7IH1cblxuICAgIHB1YmxpYyBnZXQgbWF4SGVhbHRoKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmJhdHRsZXIubWF4SGVhbHRoIH1cbiAgICBwdWJsaWMgc2V0IG1heEhlYWx0aChtYXhIZWFsdGg6IG51bWJlcikgeyBcbiAgICAgICAgdGhpcy5iYXR0bGVyLm1heEhlYWx0aCA9IG1heEhlYWx0aDsgXG4gICAgICAgIHRoaXMuZW1pdHRlci5maXJlRXZlbnQoSHVkRXZlbnQuSEVBTFRIX0NIQU5HRSwge2lkOiB0aGlzLmlkLCBjdXJocDogdGhpcy5oZWFsdGgsIG1heGhwOiB0aGlzLm1heEhlYWx0aH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgaGVhbHRoKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmJhdHRsZXIuaGVhbHRoOyB9XG4gICAgcHVibGljIHNldCBoZWFsdGgoaGVhbHRoOiBudW1iZXIpIHsgXG4gICAgICAgIHRoaXMuYmF0dGxlci5oZWFsdGggPSBoZWFsdGg7IFxuICAgICAgICBpZiAodGhpcy5oZWFsdGggPD0gMCAmJiB0aGlzLmJhdHRsZXJBY3RpdmUpIHtcbiAgICAgICAgICAgIFxuXG4gICAgICAgICAgICB0aGlzLmVtaXR0ZXIuZmlyZUV2ZW50KEJhdHRsZXJFdmVudC5CQVRUTEVSX0tJTExFRCwge2lkOiB0aGlzLmlkfSk7XG5cbiAgICAgICAgICAgIC8vIHRoaXMuYW5pbWF0aW9uLnBsYXkoXCJEWUlOR1wiLCBmYWxzZSwgXCJERUFEXCIpO1xuICAgICAgICAgICAgLy8gaWYoIXRoaXMuYW5pbWF0aW9uLmlzUGxheWluZyhcIkRZSU5HXCIpKVxuICAgICAgICAgICAgLy8ge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBzcGVlZCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5iYXR0bGVyLnNwZWVkOyB9XG4gICAgcHVibGljIHNldCBzcGVlZChzcGVlZDogbnVtYmVyKSB7IHRoaXMuYmF0dGxlci5zcGVlZCA9IHNwZWVkOyB9XG5cbiAgICBwdWJsaWMgb3ZlcnJpZGUgc2V0U2NlbmUoc2NlbmU6IEZpbmFsUHJvamVjdFNjZW5lKTogdm9pZCB7IHRoaXMuc2NlbmUgPSBzY2VuZTsgfVxuICAgIHB1YmxpYyBvdmVycmlkZSBnZXRTY2VuZSgpOiBGaW5hbFByb2plY3RTY2VuZSB7IHJldHVybiB0aGlzLnNjZW5lOyB9XG5cbiAgICBwdWJsaWMgZ2V0IG5hdmtleSgpOiBzdHJpbmcgeyByZXR1cm4gdGhpcy5fbmF2a2V5OyB9XG4gICAgcHVibGljIHNldCBuYXZrZXkobmF2a2V5OiBzdHJpbmcpIHsgdGhpcy5fbmF2a2V5ID0gbmF2a2V5OyB9XG5cbiAgICBnZXRQYXRoKHRvOiBWZWMyLCBmcm9tOiBWZWMyKTogTmF2aWdhdGlvblBhdGggeyBcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NlbmUuZ2V0TmF2aWdhdGlvbk1hbmFnZXIoKS5nZXRQYXRoKHRoaXMubmF2a2V5LCB0bywgZnJvbSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBpbnZlbnRvcnkoKTogSW52ZW50b3J5IHsgcmV0dXJuIHRoaXMuYmF0dGxlci5pbnZlbnRvcnk7IH1cblxuICAgIC8qKiBQcm90ZWN0ZWQgZ2V0dGVycyBmb3IgdGhlIGRpZmZlcmVudCBjb21wb25lbnRzICovXG5cbiAgICBwcm90ZWN0ZWQgZ2V0IGJhdHRsZXIoKTogQmF0dGxlciB7IHJldHVybiB0aGlzLl9iYXR0bGVyOyB9XG4gICAgcHJvdGVjdGVkIGdldCB0YXJnZXRpbmcoKTogVGFyZ2V0aW5nRW50aXR5IHsgcmV0dXJuIHRoaXMuX3RhcmdldGluZzsgfVxufSIsImltcG9ydCBTcHJpdGVzaGVldCBmcm9tIFwiLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL1Nwcml0ZXNoZWV0XCI7XG5pbXBvcnQgQW5pbWF0ZWRTcHJpdGUgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL05vZGVzL1Nwcml0ZXMvQW5pbWF0ZWRTcHJpdGVcIjtcbmltcG9ydCB7IEJhdHRsZXJFdmVudCwgSXRlbUV2ZW50IH0gZnJvbSBcIi4uL0V2ZW50c1wiO1xuaW1wb3J0IEJhc2ljQmF0dGxlciBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvQmF0dGxlU3lzdGVtL0Jhc2ljQmF0dGxlclwiO1xuaW1wb3J0IEJhdHRsZXIgZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL0JhdHRsZVN5c3RlbS9CYXR0bGVyXCI7XG5pbXBvcnQgSW52ZW50b3J5IGZyb20gXCIuLi9HYW1lU3lzdGVtcy9JdGVtU3lzdGVtL0ludmVudG9yeVwiO1xuaW1wb3J0IEhXM0l0ZW0gZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL0l0ZW1TeXN0ZW0vSXRlbVwiO1xuaW1wb3J0IEJhc2ljVGFyZ2V0YWJsZSBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvVGFyZ2V0aW5nL0Jhc2ljVGFyZ2V0YWJsZVwiO1xuaW1wb3J0IHsgVGFyZ2V0YWJsZUVudGl0eSB9IGZyb20gXCIuLi9HYW1lU3lzdGVtcy9UYXJnZXRpbmcvVGFyZ2V0YWJsZUVudGl0eVwiO1xuaW1wb3J0IHsgVGFyZ2V0aW5nRW50aXR5IH0gZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL1RhcmdldGluZy9UYXJnZXRpbmdFbnRpdHlcIjtcbmltcG9ydCBGaW5hbFByb2plY3RTY2VuZSBmcm9tIFwiLi4vU2NlbmVzL0ZpbmFsUHJvamVjdFNjZW5lXCI7XG4vLyBpbXBvcnQgSFc0U2NlbmUgZnJvbSBcIi4uL1NjZW5lcy9IVzRTY2VuZVwiO1xuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXllckFjdG9yIGV4dGVuZHMgQW5pbWF0ZWRTcHJpdGUgaW1wbGVtZW50cyBCYXR0bGVyIHtcblxuICAgIC8qKiBPdmVycmlkZSB0aGUgdHlwZSBvZiB0aGUgc2NlbmUgdG8gYmUgdGhlIEhXMyBzY2VuZSAqL1xuICAgIHByb3RlY3RlZCBzY2VuZTogRmluYWxQcm9qZWN0U2NlbmVcblxuICAgIC8qKiBHaXZlIHRoZSBwbGF5ZXIgYSBiYXR0bGVyIGNvbXBvb25lbnQgKi9cbiAgICBwcm90ZWN0ZWQgYmF0dGxlcjogQmF0dGxlcjtcbiAgICBwcm90ZWN0ZWQgdGFyZ2V0YWJsZTogVGFyZ2V0YWJsZUVudGl0eTtcblxuICAgIHByb3RlY3RlZCBoZWxkSXRlbTogSFczSXRlbTtcblxuICAgIGNvbnN0cnVjdG9yKHNoZWV0OiBTcHJpdGVzaGVldCkge1xuICAgICAgICBzdXBlcihzaGVldCk7XG4gICAgICAgIHRoaXMuYmF0dGxlciA9IG5ldyBCYXNpY0JhdHRsZXIodGhpcyk7XG4gICAgICAgIHRoaXMudGFyZ2V0YWJsZSA9IG5ldyBCYXNpY1RhcmdldGFibGUodGhpcyk7XG5cbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoSXRlbUV2ZW50LkxBU0VSR1VOX0ZJUkVEKVxuICAgIH1cblxuICAgIGdldCBiYXR0bGVyQWN0aXZlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXR0bGVyLmJhdHRsZXJBY3RpdmU7XG4gICAgfVxuICAgIHNldCBiYXR0bGVyQWN0aXZlKHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuYmF0dGxlci5iYXR0bGVyQWN0aXZlID0gdmFsdWU7XG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHZhbHVlO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgZ2V0VGFyZ2V0aW5nKCk6IFRhcmdldGluZ0VudGl0eVtdIHsgcmV0dXJuIHRoaXMudGFyZ2V0YWJsZS5nZXRUYXJnZXRpbmcoKTsgfVxuICAgIHB1YmxpYyBhZGRUYXJnZXRpbmcodGFyZ2V0aW5nOiBUYXJnZXRpbmdFbnRpdHkpOiB2b2lkIHsgdGhpcy50YXJnZXRhYmxlLmFkZFRhcmdldGluZyh0YXJnZXRpbmcpOyB9XG4gICAgcHVibGljIHJlbW92ZVRhcmdldGluZyh0YXJnZXRpbmc6IFRhcmdldGluZ0VudGl0eSk6IHZvaWQgeyB0aGlzLnRhcmdldGFibGUucmVtb3ZlVGFyZ2V0aW5nKHRhcmdldGluZyk7IH1cblxuICAgIHB1YmxpYyBvdmVycmlkZSBzZXRTY2VuZShzY2VuZTogRmluYWxQcm9qZWN0U2NlbmUpOiB2b2lkIHsgdGhpcy5zY2VuZSA9IHNjZW5lOyB9XG4gICAgcHVibGljIG92ZXJyaWRlIGdldFNjZW5lKCk6IEZpbmFsUHJvamVjdFNjZW5lIHsgcmV0dXJuIHRoaXMuc2NlbmU7IH1cblxuICAgIGdldCBiYXR0bGVHcm91cCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXR0bGVyLmJhdHRsZUdyb3VwO1xuICAgIH1cbiAgICBzZXQgYmF0dGxlR3JvdXAodmFsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLmJhdHRsZXIuYmF0dGxlR3JvdXAgPSB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0IG1heEhlYWx0aCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXR0bGVyLm1heEhlYWx0aDtcbiAgICB9XG4gICAgc2V0IG1heEhlYWx0aCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuYmF0dGxlci5tYXhIZWFsdGggPSB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0IGhlYWx0aCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXR0bGVyLmhlYWx0aDtcbiAgICB9XG4gICAgc2V0IGhlYWx0aCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuYmF0dGxlci5oZWFsdGggPSB2YWx1ZTtcbiAgICAgICAgLy8gaWYgKHRoaXMuaGVhbHRoIDw9IDApIHtcbiAgICAgICAgLy8gICAgIHRoaXMuZW1pdHRlci5maXJlRXZlbnQoQmF0dGxlckV2ZW50LkJBVFRMRVJfS0lMTEVELCB7aWQ6IHRoaXMuaWR9KTtcbiAgICAgICAgLy8gfVxuICAgIH1cbiAgICBnZXQgc3BlZWQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmF0dGxlci5zcGVlZDtcbiAgICB9XG4gICAgc2V0IHNwZWVkKHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5iYXR0bGVyLnNwZWVkID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCBpbnZlbnRvcnkoKTogSW52ZW50b3J5IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmF0dGxlci5pbnZlbnRvcnk7XG4gICAgfVxufSIsImV4cG9ydCBlbnVtIEJhdHRsZXJFdmVudCB7XG4gICAgQkFUVExFUl9LSUxMRUQgPSBcIkJBVFRMRVJfS0lMTEVEXCIsXG4gICAgQkFUVExFUl9SRVNQQVdOID0gXCJCQVRUTEVSX1JFU1BBV05cIixcbiAgICBcbiAgICBCQVRUTEVSX0NIQU5HRSA9IFwiQkFUVExFUl9DSEFOR0VcIixcbiAgICBDT05TVU1FID0gXCJDT05TVU1FXCIsXG4gICAgSElUID0gXCJISVRcIixcbn1cblxuZXhwb3J0IGVudW0gSXRlbUV2ZW50IHtcbiAgICBJVEVNX1JFUVVFU1QgPSBcIklURU1fUkVRVUVTVFwiLFxuXG4gICAgTEFTRVJHVU5fRklSRUQgPSBcIkxBU0VSR1VOX0ZJUkVEXCIsXG5cbiAgICBXRUFQT05fVVNFRCA9IFwiV0VBUE9OX1VTRURcIixcbiAgICBDT05TVU1BQkxFX1VTRUQgPSBcIkNPTlNVTUFCTEVfVVNFRFwiLFxuICAgIElOVkVOVE9SWV9DSEFOR0VEID0gXCJJTlZFTlRPUllfQ0hBTkdFRFwiLFxufVxuXG5leHBvcnQgZW51bSBIdWRFdmVudCB7XG4gICAgSEVBTFRIX0NIQU5HRSA9IFwiSEVBTFRIX0NIQU5HRVwiXG59XG5cbmV4cG9ydCBlbnVtIFBsYXllckV2ZW50IHtcbiAgICBQTEFZRVJfS0lMTEVEID0gXCJQTEFZRVJfS0lMTEVEXCJcbn0iLCJpbXBvcnQgUG9zaXRpb25lZCBmcm9tIFwiLi4vLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL0ludGVyZmFjZXMvUG9zaXRpb25lZFwiO1xuaW1wb3J0IFVuaXF1ZSBmcm9tIFwiLi4vLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL0ludGVyZmFjZXMvVW5pcXVlXCI7XG5pbXBvcnQgVmVjMiBmcm9tIFwiLi4vLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL1ZlYzJcIjtcbmltcG9ydCBJbnZlbnRvcnkgZnJvbSBcIi4uL0l0ZW1TeXN0ZW0vSW52ZW50b3J5XCI7XG5pbXBvcnQgQmFzaWNUYXJnZXRhYmxlIGZyb20gXCIuLi9UYXJnZXRpbmcvQmFzaWNUYXJnZXRhYmxlXCI7XG5pbXBvcnQgeyBUYXJnZXRhYmxlRW50aXR5IH0gZnJvbSBcIi4uL1RhcmdldGluZy9UYXJnZXRhYmxlRW50aXR5XCI7XG5pbXBvcnQgeyBUYXJnZXRpbmdFbnRpdHkgfSBmcm9tIFwiLi4vVGFyZ2V0aW5nL1RhcmdldGluZ0VudGl0eVwiO1xuaW1wb3J0IEJhdHRsZXIgZnJvbSBcIi4vQmF0dGxlclwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNpY0JhdHRsZXIgaW1wbGVtZW50cyBCYXR0bGVyIHtcblxuICAgIHByb3RlY3RlZCBfb3duZXI6IFVuaXF1ZSAmIFBvc2l0aW9uZWQ7XG4gICAgcHJvdGVjdGVkIF90YXJnZXRhYmxlOiBUYXJnZXRhYmxlRW50aXR5O1xuICAgIHByb3RlY3RlZCBfaW52ZW50b3J5OiBJbnZlbnRvcnk7XG5cbiAgICBwcm90ZWN0ZWQgX21heEhlYWx0aDogbnVtYmVyO1xuICAgIHByb3RlY3RlZCBfaGVhbHRoOiBudW1iZXI7XG4gICAgcHJvdGVjdGVkIF9iYXR0bGVHcm91cDogbnVtYmVyO1xuICAgIHByb3RlY3RlZCBfc3BlZWQ6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgX2FjdGl2ZTogYm9vbGVhbjtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihvd25lcjogVW5pcXVlICYgUG9zaXRpb25lZCkge1xuICAgICAgICB0aGlzLl9vd25lciA9IG93bmVyO1xuICAgICAgICB0aGlzLl90YXJnZXRhYmxlID0gbmV3IEJhc2ljVGFyZ2V0YWJsZShvd25lcik7XG4gICAgICAgIHRoaXMuaW52ZW50b3J5ID0gbmV3IEludmVudG9yeSgpO1xuXG4gICAgICAgIHRoaXMubWF4SGVhbHRoID0gMDtcbiAgICAgICAgdGhpcy5oZWFsdGggPSAwO1xuICAgICAgICB0aGlzLmJhdHRsZUdyb3VwID0gMDtcbiAgICAgICAgdGhpcy5zcGVlZCA9IDA7XG4gICAgICAgIHRoaXMuYmF0dGxlckFjdGl2ZSA9IHRydWU7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBnZXQgaWQoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX293bmVyLmlkOyB9XG5cbiAgICBwdWJsaWMgZ2V0IHBvc2l0aW9uKCk6IFZlYzIgeyByZXR1cm4gdGhpcy5fdGFyZ2V0YWJsZS5wb3NpdGlvbjsgfVxuICAgIHB1YmxpYyBzZXQgcG9zaXRpb24ocG9zaXRpb246IFZlYzIpIHsgdGhpcy5fdGFyZ2V0YWJsZS5wb3NpdGlvbiA9IHBvc2l0aW9uOyB9XG5cbiAgICBwdWJsaWMgZ2V0IHJlbGF0aXZlUG9zaXRpb24oKTogVmVjMiB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXJnZXRhYmxlLnJlbGF0aXZlUG9zaXRpb247XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBiYXR0bGVHcm91cCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fYmF0dGxlR3JvdXA7IH1cbiAgICBwdWJsaWMgc2V0IGJhdHRsZUdyb3VwKGJhdHRsZUdyb3VwOiBudW1iZXIpIHsgdGhpcy5fYmF0dGxlR3JvdXAgPSBiYXR0bGVHcm91cDsgfVxuXG4gICAgcHVibGljIGdldCBtYXhIZWFsdGgoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX21heEhlYWx0aCB9XG4gICAgcHVibGljIHNldCBtYXhIZWFsdGgobWF4SGVhbHRoOiBudW1iZXIpIHsgdGhpcy5fbWF4SGVhbHRoID0gbWF4SGVhbHRoOyB9XG5cbiAgICBwdWJsaWMgZ2V0IGhlYWx0aCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5faGVhbHRoOyB9XG4gICAgcHVibGljIHNldCBoZWFsdGgoaGVhbHRoOiBudW1iZXIpIHsgdGhpcy5faGVhbHRoID0gaGVhbHRoOyB9XG5cbiAgICBwdWJsaWMgZ2V0IHNwZWVkKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9zcGVlZDsgfVxuICAgIHB1YmxpYyBzZXQgc3BlZWQoc3BlZWQ6IG51bWJlcikgeyB0aGlzLl9zcGVlZCA9IHNwZWVkOyB9XG5cbiAgICBwdWJsaWMgZ2V0IGludmVudG9yeSgpOiBJbnZlbnRvcnkgeyByZXR1cm4gdGhpcy5faW52ZW50b3J5OyB9XG4gICAgcHJvdGVjdGVkIHNldCBpbnZlbnRvcnkoaW52ZW50b3J5OiBJbnZlbnRvcnkpIHsgdGhpcy5faW52ZW50b3J5ID0gaW52ZW50b3J5OyB9XG5cbiAgICBwdWJsaWMgZ2V0IGJhdHRsZXJBY3RpdmUoKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLl9hY3RpdmU7IH1cbiAgICBwdWJsaWMgc2V0IGJhdHRsZXJBY3RpdmUodmFsdWU6IGJvb2xlYW4pIHsgdGhpcy5fYWN0aXZlID0gdmFsdWU7IH1cbiAgICBcbiAgICBwdWJsaWMgZ2V0VGFyZ2V0aW5nKCk6IFRhcmdldGluZ0VudGl0eVtdIHsgcmV0dXJuIHRoaXMuX3RhcmdldGFibGUuZ2V0VGFyZ2V0aW5nKCk7IH1cbiAgICBwdWJsaWMgYWRkVGFyZ2V0aW5nKHRhcmdldGluZzogVGFyZ2V0aW5nRW50aXR5KTogdm9pZCB7IHRoaXMuX3RhcmdldGFibGUuYWRkVGFyZ2V0aW5nKHRhcmdldGluZyk7IH1cbiAgICBwdWJsaWMgcmVtb3ZlVGFyZ2V0aW5nKHRhcmdldGluZzogVGFyZ2V0aW5nRW50aXR5KTogdm9pZCB7IHRoaXMuX3RhcmdldGFibGUucmVtb3ZlVGFyZ2V0aW5nKHRhcmdldGluZyk7IH1cbn0iLCJpbXBvcnQgVXBkYXRlYWJsZSBmcm9tIFwiLi4vLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL0ludGVyZmFjZXMvVXBkYXRlYWJsZVwiO1xuaW1wb3J0IFNjZW5lIGZyb20gXCIuLi8uLi8uLi9Xb2xmaWUyRC9TY2VuZS9TY2VuZVwiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi8uLi8uLi9Xb2xmaWUyRC9VdGlscy9Db2xvclwiO1xuaW1wb3J0IExhYmVsIGZyb20gXCIuLi8uLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9VSUVsZW1lbnRzL0xhYmVsXCI7XG5pbXBvcnQgeyBVSUVsZW1lbnRUeXBlIH0gZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL05vZGVzL1VJRWxlbWVudHMvVUlFbGVtZW50VHlwZXNcIjtcbmltcG9ydCBHYW1lTm9kZSBmcm9tIFwiLi4vLi4vLi4vV29sZmllMkQvTm9kZXMvR2FtZU5vZGVcIjtcbmltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IFBvc2l0aW9uZWQgZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9JbnRlcmZhY2VzL1Bvc2l0aW9uZWRcIjtcbmltcG9ydCBVbmlxdWUgZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9JbnRlcmZhY2VzL1VuaXF1ZVwiO1xuXG5pbnRlcmZhY2UgSGVhbHRoIHtcbiAgICBnZXQgaGVhbHRoKCk6IG51bWJlcjtcbiAgICBnZXQgbWF4SGVhbHRoKCk6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIEhlYWx0aEJhck9wdGlvbnMge1xuICAgIHNpemU6IFZlYzI7XG4gICAgb2Zmc2V0OiBWZWMyO1xufVxuXG4vKipcbiAqIEEgVUkgY29tcG9uZW50IHRoYXQncyBzdXBwb3NzZWQgdG8gcmVwcmVzZW50IGEgaGVhbHRoYmFyXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhlYWx0aGJhckhVRCBpbXBsZW1lbnRzIFVwZGF0ZWFibGUge1xuXG4gICAgLyoqIFRoZSBzY2VuZSBhbmQgbGF5ZXIgaW4gdGhlIHNjZW5lIHRoZSBoZWFsdGhiYXIgaXMgaW4gKi9cbiAgICBwcm90ZWN0ZWQgc2NlbmU6IFNjZW5lO1xuICAgIHByb3RlY3RlZCBsYXllcjogc3RyaW5nO1xuXG4gICAgLyoqIFRoZSBHYW1lTm9kZSB0aGF0IG93bnMgdGhpcyBoZWFsdGhiYXIgKi9cbiAgICBwcm90ZWN0ZWQgb3duZXI6IEhlYWx0aCAmIFBvc2l0aW9uZWQgJiBVbmlxdWU7XG5cbiAgICAvKiogVGhlIHNpemUgYW5kIG9mZnNldCBvZiB0aGUgaGVhbHRoYmFyIGZyb20gaXQncyBvd25lcidzIHBvc2l0aW9uICovXG4gICAgcHJvdGVjdGVkIHNpemU6IFZlYzI7XG4gICAgcHJvdGVjdGVkIG9mZnNldDogVmVjMjtcblxuICAgIC8qKiBUaGUgYWN0dWFsIGhlYWx0aGJhciAodGhlIHBhcnQgd2l0aCBjb2xvcikgKi9cbiAgICBwcm90ZWN0ZWQgaGVhbHRoQmFyOiBMYWJlbDtcbiAgICAvKiogVGhlIGhlYWx0aGJhcnMgYmFja2dyb3VuZCAodGhlIHBhcnQgd2l0aCB0aGUgYm9yZGVyKSAqL1xuICAgIHByb3RlY3RlZCBoZWFsdGhCYXJCZzogTGFiZWw7XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3Ioc2NlbmU6IFNjZW5lLCBvd25lcjogSGVhbHRoICYgUG9zaXRpb25lZCAmIFVuaXF1ZSwgbGF5ZXI6IHN0cmluZywgb3B0aW9uczogSGVhbHRoQmFyT3B0aW9ucykge1xuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XG4gICAgICAgIHRoaXMubGF5ZXIgPSBsYXllcjtcbiAgICAgICAgdGhpcy5vd25lciA9IG93bmVyO1xuXG4gICAgICAgIHRoaXMuc2l6ZSA9IG9wdGlvbnMuc2l6ZTtcbiAgICAgICAgdGhpcy5vZmZzZXQgPSBvcHRpb25zLm9mZnNldDtcblxuICAgICAgICB0aGlzLmhlYWx0aEJhciA9IDxMYWJlbD50aGlzLnNjZW5lLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5MQUJFTCwgbGF5ZXIsIHtwb3NpdGlvbjogdGhpcy5vd25lci5wb3NpdGlvbi5jbG9uZSgpLmFkZCh0aGlzLm9mZnNldCksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgdGhpcy5oZWFsdGhCYXIuc2l6ZS5jb3B5KHRoaXMuc2l6ZSk7XG4gICAgICAgIHRoaXMuaGVhbHRoQmFyLmJhY2tncm91bmRDb2xvciA9IENvbG9yLlJFRDtcblxuICAgICAgICB0aGlzLmhlYWx0aEJhckJnID0gPExhYmVsPnRoaXMuc2NlbmUuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkxBQkVMLCBsYXllciwge3Bvc2l0aW9uOiB0aGlzLm93bmVyLnBvc2l0aW9uLmNsb25lKCkuYWRkKHRoaXMub2Zmc2V0KSwgdGV4dDogXCJcIn0pO1xuICAgICAgICB0aGlzLmhlYWx0aEJhckJnLmJhY2tncm91bmRDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICB0aGlzLmhlYWx0aEJhckJnLmJvcmRlckNvbG9yID0gQ29sb3IuQkxBQ0s7XG4gICAgICAgIHRoaXMuaGVhbHRoQmFyQmcuYm9yZGVyV2lkdGggPSAxO1xuICAgICAgICB0aGlzLmhlYWx0aEJhckJnLnNpemUuY29weSh0aGlzLnNpemUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGhlYWx0aGJhcnMgcG9zaXRpb24gYWNjb3JkaW5nIHRvIHRoZSBwb3NpdGlvbiBvZiBpdCdzIG93bmVyXG4gICAgICogQHBhcmFtIGRlbHRhVCBcbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlKGRlbHRhVDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmhlYWx0aEJhci5wb3NpdGlvbi5jb3B5KHRoaXMub3duZXIucG9zaXRpb24pLmFkZCh0aGlzLm9mZnNldCk7XG4gICAgICAgIHRoaXMuaGVhbHRoQmFyQmcucG9zaXRpb24uY29weSh0aGlzLm93bmVyLnBvc2l0aW9uKS5hZGQodGhpcy5vZmZzZXQpO1xuXG4gICAgICAgIGxldCBzY2FsZSA9IHRoaXMuc2NlbmUuZ2V0Vmlld1NjYWxlKCk7XG4gICAgICAgIHRoaXMuaGVhbHRoQmFyLnNjYWxlLnNjYWxlKHNjYWxlKTtcbiAgICAgICAgdGhpcy5oZWFsdGhCYXJCZy5zY2FsZS5zY2FsZShzY2FsZSk7XG5cbiAgICAgICAgbGV0IHVuaXQgPSB0aGlzLmhlYWx0aEJhckJnLnNpemUueCAvIHRoaXMub3duZXIubWF4SGVhbHRoO1xuXHRcdHRoaXMuaGVhbHRoQmFyLnNpemUuc2V0KHRoaXMuaGVhbHRoQmFyQmcuc2l6ZS54IC0gdW5pdCAqICh0aGlzLm93bmVyLm1heEhlYWx0aCAtIHRoaXMub3duZXIuaGVhbHRoKSwgdGhpcy5oZWFsdGhCYXJCZy5zaXplLnkpO1xuXHRcdHRoaXMuaGVhbHRoQmFyLnBvc2l0aW9uLnNldCh0aGlzLmhlYWx0aEJhckJnLnBvc2l0aW9uLnggLSAodW5pdCAvIHNjYWxlIC8gMikgKiAodGhpcy5vd25lci5tYXhIZWFsdGggLSB0aGlzLm93bmVyLmhlYWx0aCksIHRoaXMuaGVhbHRoQmFyQmcucG9zaXRpb24ueSk7XG5cblx0XHR0aGlzLmhlYWx0aEJhci5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLm93bmVyLmhlYWx0aCA8IHRoaXMub3duZXIubWF4SGVhbHRoICogMS80ID8gQ29sb3IuUkVEIDogdGhpcy5vd25lci5oZWFsdGggPCB0aGlzLm93bmVyLm1heEhlYWx0aCAqIDMvNCA/IENvbG9yLllFTExPVyA6IENvbG9yLkdSRUVOO1xuICAgIH1cblxuICAgIGdldCBvd25lcklkKCk6IG51bWJlciB7IHJldHVybiB0aGlzLm93bmVyLmlkOyB9XG5cbiAgICBzZXQgdmlzaWJsZSh2aXNpYmxlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuaGVhbHRoQmFyLnZpc2libGUgPSB2aXNpYmxlO1xuICAgICAgICB0aGlzLmhlYWx0aEJhckJnLnZpc2libGUgPSB2aXNpYmxlO1xuICAgIH1cbiAgICBcblxufSIsImltcG9ydCBVbmlxdWUgZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9JbnRlcmZhY2VzL1VuaXF1ZVwiO1xuaW1wb3J0IEVtaXR0ZXIgZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL0V2ZW50cy9FbWl0dGVyXCI7XG5pbXBvcnQgSXRlbSBmcm9tIFwiLi9JdGVtXCI7XG5pbXBvcnQgSGVhbHRocGFjayBmcm9tIFwiLi9JdGVtcy9IZWFsdGhwYWNrXCI7XG5cbi8qKlxuICogQW4gaW52ZW50b3J5IGlzIGEgY29sbGVjdGlvbiBvZiBpdGVtcy4gQWxsIGl0ZW1zIGluIHRoZSBpbnZlbnRvcnkgbXVzdCBiZSByZWdpc3RlcmVkIHdpdGhcbiAqIHRoZSBJbnZlbnRvcnlzIEl0ZW1NYW5hZ2VyIGNsYXNzLiBcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW52ZW50b3J5IGltcGxlbWVudHMgVW5pcXVlIHtcblxuICAgIC8qKiBUaGUgaWQgbnVtYmVyIG9mIHRoZSBuZXh0IGludmVudG9yeSAqL1xuICAgIHByaXZhdGUgc3RhdGljIE5FWFRfSUQ6IG51bWJlciA9IDA7XG5cbiAgICAvKiogVGhlIGlkIG9mIHRoaXMgaW52ZW50b3J5ICovXG4gICAgcHJvdGVjdGVkIF9faWQ6IG51bWJlcjtcblxuICAgIC8qKiBUaGUgY29sbGVjdGlvbiBvZiBpdGVtcyBpbiB0aGUgaW52ZW50b3J5ICovXG4gICAgcHJvdGVjdGVkIF9pbnZlbnRvcnk6IE1hcDxudW1iZXIsIEl0ZW0+O1xuXG4gICAgLyoqIEEgZmxhZyBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlICovXG4gICAgcHJvdGVjdGVkIF9kaXJ0eTogYm9vbGVhbjtcblxuICAgIC8qKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdGhpcyBpbnZlbnRvcnkgY2FuIGhvbGQgKi9cbiAgICBwcm90ZWN0ZWQgX2NhcGFjaXR5OiBudW1iZXI7XG5cbiAgICAvKiogVGhlIG51bWJlciBvZiBpdGVtcyBpbiB0aGlzIGludmVudG9yeSAqL1xuICAgIHByb3RlY3RlZCBfc2l6ZTogbnVtYmVyO1xuXG4gICAgLyoqIFRoZSBldmVudCB0byBmaXJlIHdoZW4gdGhpcyBpbnZlbnRvcnkgY2hhbmdlcyAqL1xuICAgIHByb3RlY3RlZCBfb25DaGFuZ2U6IHN0cmluZyB8IG51bGw7XG5cbiAgICAvKiogQW4gZW1pdHRlciB1c2VkIHRvIGVtaXQgZXZlbnRzIHdoZW4gdGhpcyBpbnZlbnRvcnkgY2hhbmdlcyAqL1xuICAgIHByb3RlY3RlZCBfZW1pdHRlcjogRW1pdHRlcjtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihjYXBhY2l0eTogbnVtYmVyID0gMTApIHtcbiAgICAgICAgdGhpcy5fX2lkID0gSW52ZW50b3J5Lk5FWFRfSUQgXG4gICAgICAgIEludmVudG9yeS5ORVhUX0lEICs9IDE7XG5cbiAgICAgICAgdGhpcy5pbnZlbnRvcnkgPSBuZXcgTWFwPG51bWJlciwgSXRlbT4oKTtcbiAgICAgICAgdGhpcy5fZW1pdHRlciA9IG5ldyBFbWl0dGVyKCk7XG5cbiAgICAgICAgdGhpcy5zaXplID0gMDtcbiAgICAgICAgdGhpcy5jYXBhY2l0eSA9IGNhcGFjaXR5O1xuICAgICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMub25DaGFuZ2UgPSBudWxsO1xuICAgICAgICBcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IGlkKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9faWQ7IH1cblxuICAgIHB1YmxpYyBnZXQgZGlydHkoKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLl9kaXJ0eTsgfVxuICAgIHByb3RlY3RlZCBzZXQgZGlydHkoZGlydHk6IGJvb2xlYW4pIHsgdGhpcy5fZGlydHkgPSBkaXJ0eTsgfVxuXG4gICAgcHVibGljIGdldCBzaXplKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9zaXplOyB9XG4gICAgcHJvdGVjdGVkIHNldCBzaXplKHNpemU6IG51bWJlcikgeyB0aGlzLl9zaXplID0gc2l6ZTsgfVxuXG4gICAgcHVibGljIGdldCBjYXBhY2l0eSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fY2FwYWNpdHk7IH1cbiAgICBwcm90ZWN0ZWQgc2V0IGNhcGFjaXR5KGNhcGFjaXR5OiBudW1iZXIpIHsgdGhpcy5fY2FwYWNpdHkgPSBjYXBhY2l0eTsgfVxuXG4gICAgcHVibGljIGdldCBvbkNoYW5nZSgpOiBzdHJpbmcgeyByZXR1cm4gdGhpcy5fb25DaGFuZ2U7IH1cbiAgICBwdWJsaWMgc2V0IG9uQ2hhbmdlKG9uQ2hhbmdlOiBzdHJpbmcpIHsgdGhpcy5fb25DaGFuZ2UgPSBvbkNoYW5nZTsgfVxuXG4gICAgcHJvdGVjdGVkIGdldCBpbnZlbnRvcnkoKTogTWFwPG51bWJlciwgSXRlbT4geyByZXR1cm4gdGhpcy5faW52ZW50b3J5OyB9XG4gICAgcHJvdGVjdGVkIHNldCBpbnZlbnRvcnkoaW52ZW50b3J5OiBNYXA8bnVtYmVyLCBJdGVtPikgeyB0aGlzLl9pbnZlbnRvcnkgPSBpbnZlbnRvcnk7IH1cblxuICAgIHByb3RlY3RlZCBnZXQgZW1pdHRlcigpOiBFbWl0dGVyIHsgcmV0dXJuIHRoaXMuX2VtaXR0ZXI7IH1cbiAgICBwcm90ZWN0ZWQgc2V0IGVtaXR0ZXIoZW1pdHRlcjogRW1pdHRlcikgeyB0aGlzLl9lbWl0dGVyID0gZW1pdHRlcjsgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhbiBpdGVtIGZyb20gdGhpcyBpbnZlbnRvcnkgYnkgaWQuXG4gICAgICogQHBhcmFtIGlkIHRoZSBpZCBvZiB0aGUgaXRlbSB0byBnZXRcbiAgICAgKiBAcmV0dXJucyB0aGUgaXRlbSBpZiBpdCBleGlzdHM7IG51bGwgb3RoZXJ3aXNlXG4gICAgICovXG4gICAgcHVibGljIGdldChpZDogbnVtYmVyKTogSXRlbSB8IG51bGwge1xuICAgICAgICBpZiAoIXRoaXMuaGFzKGlkKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaW52ZW50b3J5LmdldChpZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhbiBpdGVtIHRvIHRoaXMgaW52ZW50b3J5XG4gICAgICogQHBhcmFtIGl0ZW0gYWRkcyBhbiBpdGVtIHRvIHRoZSBpbnZlbnRvcnkgd2l0aCB0aGUga2V5IG9mIHRoZSBpdGVtcyBvd25lclxuICAgICAqIEByZXR1cm5zIGlmIHRoZSBJdGVtIHdhcyBzdWNjZXNzZnVsbHkgYWRkZWQgdG8gdGhlIGludmVudG9yeTsgbnVsbCBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBwdWJsaWMgYWRkKGl0ZW06IEl0ZW0pOiBJdGVtIHwgbnVsbCB7IFxuICAgICAgICBpZiAodGhpcy5oYXMoaXRlbS5pZCkgfHwgdGhpcy5zaXplID49IHRoaXMuY2FwYWNpdHkgfHwgaXRlbS5pbnZlbnRvcnkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW52ZW50b3J5LnNldChpdGVtLmlkLCBpdGVtKTtcbiAgICAgICAgdGhpcy5zaXplICs9IDE7XG4gICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuXG4gICAgICAgIGl0ZW0uaW52ZW50b3J5ID0gdGhpcztcbiAgICAgICAgaXRlbS52aXNpYmxlID0gZmFsc2U7XG5cbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGFuIGl0ZW0gd2l0aCB0aGUgZ2l2ZW4gaWQgbnVtYmVyIGV4aXN0cyBpbiB0aGlzIGludmVudG9yeS5cbiAgICAgKiBAcGFyYW0gaWQgdGhlIGlkIG9mIHRoZSBpdGVtIGluIHRoZSBpbnZlbnRvcnlcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBpdGVtIHdpdGggdGhlIGlkIGV4aXN0czsgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgcHVibGljIGhhcyhpZDogbnVtYmVyKTogYm9vbGVhbiB7IFxuICAgICAgICByZXR1cm4gdGhpcy5pbnZlbnRvcnkuaGFzKGlkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBpdGVtIHdpdGggdGhlIGdpdmVuIGlkIG51bWJlciBmcm9tIHRoaXMgaW52ZW50b3J5XG4gICAgICogQHBhcmFtIGlkIHRoZSBpZCBvZiB0aGUgaXRlbVxuICAgICAqIEByZXR1cm5zIHRoZSBpdGVtIHRoYXQgd2FzIHJlbW92ZWQgb3IgbnVsbCBcbiAgICAgKi9cbiAgICBwdWJsaWMgcmVtb3ZlKGlkOiBudW1iZXIpOiBJdGVtIHwgbnVsbCB7IFxuICAgICAgICBpZiAoIXRoaXMuaGFzKGlkKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGl0ZW06IEl0ZW0gPSB0aGlzLmdldChpZCk7XG4gICAgICAgIHRoaXMuaW52ZW50b3J5LmRlbGV0ZShpZCk7XG4gICAgICAgIHRoaXMuc2l6ZSAtPSAxO1xuICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZVxuXG4gICAgICAgIGl0ZW0uaW52ZW50b3J5ID0gbnVsbDtcblxuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaXRlbXMoKTogSXRlcmFibGVJdGVyYXRvcjxJdGVtPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmludmVudG9yeS52YWx1ZXMoKVxuICAgIH1cblxuICAgIHB1YmxpYyBmaW5kKGZ1bmM6IChpdGVtOiBJdGVtKSA9PiBib29sZWFuKTogSXRlbSB8IG51bGwge1xuICAgICAgICBsZXQgaXRlbSA9IEFycmF5LmZyb20odGhpcy5pbnZlbnRvcnkudmFsdWVzKCkpLmZpbmQoZnVuYyk7XG4gICAgICAgIHJldHVybiBpdGVtID09PSB1bmRlZmluZWQgPyBudWxsIDogaXRlbTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2xlYW4oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMub25DaGFuZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdHRlci5maXJlRXZlbnQodGhpcy5vbkNoYW5nZSwgeyBpZDogdGhpcy5pZCwgaW52ZW50b3J5OiB0aGlzIH0pO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCBVbmlxdWUgZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9JbnRlcmZhY2VzL1VuaXF1ZVwiO1xuaW1wb3J0IFZlYzIgZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgRW1pdHRlciBmcm9tIFwiLi4vLi4vLi4vV29sZmllMkQvRXZlbnRzL0VtaXR0ZXJcIjtcbmltcG9ydCBHYW1lTm9kZSBmcm9tIFwiLi4vLi4vLi4vV29sZmllMkQvTm9kZXMvR2FtZU5vZGVcIjtcbmltcG9ydCBTcHJpdGUgZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL05vZGVzL1Nwcml0ZXMvU3ByaXRlXCI7XG5pbXBvcnQgTGF5ZXIgZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL1NjZW5lL0xheWVyXCI7XG5pbXBvcnQgU2NlbmUgZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL1NjZW5lL1NjZW5lXCI7XG5pbXBvcnQgQmFzaWNUYXJnZXRhYmxlIGZyb20gXCIuLi9UYXJnZXRpbmcvQmFzaWNUYXJnZXRhYmxlXCI7XG5pbXBvcnQgQmFzaWNUYXJnZXRpbmcgZnJvbSBcIi4uL1RhcmdldGluZy9CYXNpY1RhcmdldGluZ1wiO1xuXG4vLyBpbXBvcnQgSFc0U2NlbmUgZnJvbSBcIi4uLy4uL1NjZW5lcy9IVzRTY2VuZVwiO1xuaW1wb3J0IEludmVudG9yeSBmcm9tIFwiLi9JbnZlbnRvcnlcIjtcbmltcG9ydCB7IFRhcmdldGFibGVFbnRpdHkgfSBmcm9tIFwiLi4vVGFyZ2V0aW5nL1RhcmdldGFibGVFbnRpdHlcIjtcbmltcG9ydCB7IFRhcmdldGluZ0VudGl0eSB9IGZyb20gXCIuLi9UYXJnZXRpbmcvVGFyZ2V0aW5nRW50aXR5XCI7XG5cblxuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgSXRlbSBpbXBsZW1lbnRzIFVuaXF1ZSwgVGFyZ2V0YWJsZUVudGl0eSB7XG5cbiAgICBwcm90ZWN0ZWQgc3ByaXRlOiBTcHJpdGU7XG4gICAgcHJvdGVjdGVkIGVtaXR0ZXI6IEVtaXR0ZXI7XG5cbiAgICBwcm90ZWN0ZWQgX2ludmVudG9yeTogSW52ZW50b3J5IHwgbnVsbDtcbiAgICBwcm90ZWN0ZWQgX3RhcmdldGFibGU6IFRhcmdldGFibGVFbnRpdHk7XG5cbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3Ioc3ByaXRlOiBTcHJpdGUpeyBcbiAgICAgICAgdGhpcy5zcHJpdGUgPSBzcHJpdGU7XG4gICAgICAgIHRoaXMuZW1pdHRlciA9IG5ldyBFbWl0dGVyKCk7XG5cbiAgICAgICAgdGhpcy5faW52ZW50b3J5ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fdGFyZ2V0YWJsZSA9IG5ldyBCYXNpY1RhcmdldGFibGUodGhpcy5zcHJpdGUpO1xuICAgIH1cblxuICAgIGdldFRhcmdldGluZygpOiBUYXJnZXRpbmdFbnRpdHlbXSB7IFxuICAgICAgICByZXR1cm4gdGhpcy5fdGFyZ2V0YWJsZS5nZXRUYXJnZXRpbmcoKTsgXG4gICAgfVxuICAgIGFkZFRhcmdldGluZyh0YXJnZXRpbmc6IFRhcmdldGluZ0VudGl0eSk6IHZvaWQge1xuICAgICAgICB0aGlzLl90YXJnZXRhYmxlLmFkZFRhcmdldGluZyh0YXJnZXRpbmcpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRpbmcodGFyZ2V0aW5nOiBUYXJnZXRpbmdFbnRpdHkpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0YWJsZS5yZW1vdmVUYXJnZXRpbmcodGFyZ2V0aW5nKTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGdldCByZWxhdGl2ZVBvc2l0aW9uKCk6IFZlYzIgeyByZXR1cm4gdGhpcy5zcHJpdGUucmVsYXRpdmVQb3NpdGlvbjsgfVxuXG4gICAgcHVibGljIGdldCBpZCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5zcHJpdGUuaWQ7IH1cblxuICAgIHB1YmxpYyBnZXQgcG9zaXRpb24oKTogVmVjMiB7IHJldHVybiB0aGlzLnNwcml0ZS5wb3NpdGlvbjsgfVxuXG4gICAgcHVibGljIGdldCB2aXNpYmxlKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy5zcHJpdGUudmlzaWJsZTsgfVxuICAgIHB1YmxpYyBzZXQgdmlzaWJsZSh2YWx1ZTogYm9vbGVhbikgeyB0aGlzLnNwcml0ZS52aXNpYmxlID0gdmFsdWU7IH1cblxuICAgIHB1YmxpYyBnZXQgaW52ZW50b3J5KCk6IEludmVudG9yeSB8IG51bGwgeyByZXR1cm4gdGhpcy5faW52ZW50b3J5OyB9XG4gICAgcHVibGljIHNldCBpbnZlbnRvcnkodmFsdWU6IEludmVudG9yeSB8IG51bGwpIHsgdGhpcy5faW52ZW50b3J5ID0gdmFsdWU7IH1cblxufSIsImltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi8uLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IFNwcml0ZSBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvTm9kZXMvU3ByaXRlcy9TcHJpdGVcIjtcbi8vIGltcG9ydCBIVzRTY2VuZSBmcm9tIFwiLi4vLi4vLi4vU2NlbmVzL0hXNFNjZW5lXCI7XG5pbXBvcnQgSXRlbSBmcm9tIFwiLi4vSXRlbVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIZWFsdGhwYWNrIGV4dGVuZHMgSXRlbSB7XG4gICAgXG4gICAgcHJvdGVjdGVkIGhwOiBudW1iZXI7XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3Ioc3ByaXRlOiBTcHJpdGUpIHtcbiAgICAgICAgc3VwZXIoc3ByaXRlKTtcbiAgICAgICAgdGhpcy5ocCA9IDU7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBoZWFsdGgoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuaHA7IH1cbiAgICBwdWJsaWMgc2V0IGhlYWx0aChocDogbnVtYmVyKSB7IHRoaXMuaHAgPSBocDsgfVxuXG5cbn0iLCJpbXBvcnQgQUFCQiBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL1NoYXBlcy9BQUJCXCI7XG5pbXBvcnQgVmVjMiBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL1ZlYzJcIjtcbmltcG9ydCBHYW1lTm9kZSwgeyBUd2VlbmFibGVQcm9wZXJ0aWVzIH0gZnJvbSBcIi4uLy4uLy4uLy4uL1dvbGZpZTJEL05vZGVzL0dhbWVOb2RlXCI7XG5pbXBvcnQgR3JhcGhpYyBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvTm9kZXMvR3JhcGhpY1wiO1xuaW1wb3J0IHsgR3JhcGhpY1R5cGUgfSBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvTm9kZXMvR3JhcGhpY3MvR3JhcGhpY1R5cGVzXCI7XG5pbXBvcnQgTGluZSBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvTm9kZXMvR3JhcGhpY3MvTGluZVwiO1xuaW1wb3J0IFNwcml0ZSBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvTm9kZXMvU3ByaXRlcy9TcHJpdGVcIjtcbmltcG9ydCBTY2VuZSBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvU2NlbmUvU2NlbmVcIjtcbmltcG9ydCBDb2xvciBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvVXRpbHMvQ29sb3JcIjtcbmltcG9ydCB7IEVhc2VGdW5jdGlvblR5cGUgfSBmcm9tIFwiLi4vLi4vLi4vLi4vV29sZmllMkQvVXRpbHMvRWFzZUZ1bmN0aW9uc1wiO1xuLy8gaW1wb3J0IEhXNFNjZW5lIGZyb20gXCIuLi8uLi8uLi9TY2VuZXMvSFc0U2NlbmVcIjtcbmltcG9ydCBJdGVtIGZyb20gXCIuLi9JdGVtXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExhc2VyR3VuIGV4dGVuZHMgSXRlbSB7XG5cbiAgICBwdWJsaWMgZGFtYWdlOiBudW1iZXI7XG5cbiAgICBwcm90ZWN0ZWQgX2xhc2VyOiBMaW5lXG4gICAgcHJvdGVjdGVkIF9kaXJlY3Rpb246IFZlYzI7XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3Ioc3ByaXRlOiBTcHJpdGUsIGxhc2VyOiBMaW5lKSB7XG4gICAgICAgIHN1cGVyKHNwcml0ZSk7XG4gICAgICAgIHRoaXMuX2xhc2VyID0gbGFzZXI7XG4gICAgICAgIHRoaXMuX2xhc2VyLnN0YXJ0LmNvcHkoVmVjMi5aRVJPX1NUQVRJQyk7XG4gICAgICAgIHRoaXMuX2xhc2VyLmVuZC5jb3B5KFZlYzIuWkVST19TVEFUSUMpO1xuICAgICAgICB0aGlzLl9sYXNlci5jb2xvciA9IENvbG9yLlJFRDtcbiAgICAgICAgdGhpcy5fbGFzZXIudHdlZW5zLmFkZChcImZhZGVcIiwge1xuICAgICAgICAgICAgc3RhcnREZWxheTogMCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAsXG4gICAgICAgICAgICBlZmZlY3RzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eTogVHdlZW5hYmxlUHJvcGVydGllcy5hbHBoYSxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IDEsXG4gICAgICAgICAgICAgICAgICAgIGVuZDogMCxcbiAgICAgICAgICAgICAgICAgICAgZWFzZTogRWFzZUZ1bmN0aW9uVHlwZS5PVVRfU0lORVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBvbkVuZDogXCJMYXNlciBmYWRlZFwiXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9kaXJlY3Rpb24gPSBWZWMyLlpFUk87XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGUoc3ByaXRlOiBTcHJpdGUsIGxhc2VyOiBMaW5lKTogTGFzZXJHdW4ge1xuICAgICAgICByZXR1cm4gbmV3IExhc2VyR3VuKHNwcml0ZSwgbGFzZXIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgZGlyZWN0aW9uKCk6IFZlYzIgeyByZXR1cm4gdGhpcy5fZGlyZWN0aW9uOyB9XG4gICAgcHVibGljIGdldCBsYXNlclN0YXJ0KCk6IFZlYzIgeyByZXR1cm4gdGhpcy5fbGFzZXIuc3RhcnQ7IH1cbiAgICBwdWJsaWMgZ2V0IGxhc2VyRW5kKCk6IFZlYzIgeyByZXR1cm4gdGhpcy5fbGFzZXIuZW5kOyB9XG5cbiAgICBwdWJsaWMgcGxheVNob290QW5pbWF0aW9uKCk6IHZvaWQgeyB0aGlzLl9sYXNlci50d2VlbnMucGxheShcImZhZGVcIik7IH1cbiAgICBcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNpY0ZpbmRlcjxUPiB7XG5cbiAgICBwcm90ZWN0ZWQgcmVkdWNlcjogKHQxOiBULCB0MjogVCkgPT4gVCB8IG51bGw7XG4gICAgcHJvdGVjdGVkIGZpbHRlcnM6ICgodDogVCkgPT4gYm9vbGVhbilbXTtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihyZWR1Y2VyOiAodDE6IFQsIHQyOiBUKSA9PiBUID0gbnVsbCwgLi4uZmlsdGVyczogKCh0OiBUKSA9PiBib29sZWFuKVtdKSB7XG4gICAgICAgIHRoaXMucmVkdWNlciA9IHJlZHVjZXI7XG4gICAgICAgIHRoaXMuZmlsdGVycyA9IGZpbHRlcnM7XG4gICAgfVxuXG4gICAgcHVibGljIGZpbmQodGFyZ2V0czogUmVhZG9ubHk8VFtdPik6IFQgfCBudWxsIHtcbiAgICAgICAgbGV0IGZpbHRlcmVkID0gdGFyZ2V0cy5maWx0ZXIodGFyZ2V0ID0+IHRoaXMuZmlsdGVycy5ldmVyeShmaWx0ZXIgPT4gZmlsdGVyKHRhcmdldCkpKTtcbiAgICAgICAgcmV0dXJuIGZpbHRlcmVkLmxlbmd0aCA9PT0gMCA/IG51bGwgOiB0aGlzLnJlZHVjZXIgPT09IG51bGwgPyBmaWx0ZXJlZFswXSA6IGZpbHRlcmVkLnJlZHVjZSh0aGlzLnJlZHVjZXIpO1xuICAgIH1cblxufSIsImltcG9ydCBQb3NpdGlvbmVkIGZyb20gXCIuLi8uLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvSW50ZXJmYWNlcy9Qb3NpdGlvbmVkXCI7XG5pbXBvcnQgTWF0aFV0aWxzIGZyb20gXCIuLi8uLi8uLi9Xb2xmaWUyRC9VdGlscy9NYXRoVXRpbHNcIjtcbmltcG9ydCBCYXR0bGVyIGZyb20gXCIuLi9CYXR0bGVTeXN0ZW0vQmF0dGxlclwiO1xuaW1wb3J0IEl0ZW0gZnJvbSBcIi4uL0l0ZW1TeXN0ZW0vSXRlbVwiO1xuaW1wb3J0IHsgVGFyZ2V0YWJsZUVudGl0eSB9IGZyb20gXCIuLi9UYXJnZXRpbmcvVGFyZ2V0YWJsZUVudGl0eVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gQmF0dGxlckFjdGl2ZUZpbHRlcigpOiAoYjogQmF0dGxlcikgPT4gYm9vbGVhbiB7XG4gICAgcmV0dXJuIChiOiBCYXR0bGVyKSA9PiBiLmJhdHRsZXJBY3RpdmU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBCYXR0bGVySGVhbHRoRmlsdGVyKG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IChiOiBCYXR0bGVyKSA9PiBib29sZWFuIHtcbiAgICByZXR1cm4gKGI6IEJhdHRsZXIpID0+IHsgcmV0dXJuIE1hdGhVdGlscy5iZXR3ZWVuKG1pbiwgbWF4LCBiLmhlYWx0aCwgdHJ1ZSk7IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEJhdHRsZXJHcm91cEZpbHRlcihncm91cHM6IG51bWJlcltdLCB3aGl0ZWxpc3Q6IGJvb2xlYW4gPSB0cnVlKTogKGI6IEJhdHRsZXIpID0+IGJvb2xlYW4ge1xuICAgIHJldHVybiB3aGl0ZWxpc3QgPyAoYjogQmF0dGxlcikgPT4geyByZXR1cm4gZ3JvdXBzLmluY2x1ZGVzKGIuYmF0dGxlR3JvdXApOyB9IDogKGI6IEJhdHRsZXIpID0+IHsgcmV0dXJuICFncm91cHMuaW5jbHVkZXMoYi5iYXR0bGVHcm91cCk7IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEFsbHlGaWx0ZXIoYmF0dGxlcjogQmF0dGxlcik6IChvdGhlcjogQmF0dGxlcikgPT4gYm9vbGVhbiB7XG4gICAgcmV0dXJuIChvdGhlcjogQmF0dGxlcikgPT4geyByZXR1cm4gYmF0dGxlci5iYXR0bGVHcm91cCA9PT0gb3RoZXIuYmF0dGxlR3JvdXA7IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEVuZW15RmlsdGVyKGJhdHRsZXI6IEJhdHRsZXIpOiAob3RoZXI6IEJhdHRsZXIpID0+IGJvb2xlYW4ge1xuICAgIHJldHVybiAob3RoZXI6IEJhdHRsZXIpID0+IHsgcmV0dXJuIGJhdHRsZXIuYmF0dGxlR3JvdXAgIT09IG90aGVyLmJhdHRsZUdyb3VwOyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSYW5nZUZpbHRlcihwb3NpdGlvbmVkOiBQb3NpdGlvbmVkLCBtaW5EaXN0U3E6IG51bWJlciwgbWF4RGlzdFNxOiBudW1iZXIpOiAodDogVGFyZ2V0YWJsZUVudGl0eSkgPT4gYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0OiBUYXJnZXRhYmxlRW50aXR5KSA9PiB7IFxuICAgICAgICBsZXQgZGlzdFNxID0gdC5wb3NpdGlvbi5kaXN0YW5jZVNxVG8ocG9zaXRpb25lZC5wb3NpdGlvbilcbiAgICAgICAgcmV0dXJuIGRpc3RTcSA+IG1pbkRpc3RTcSAmJiBkaXN0U3EgPCBtYXhEaXN0U3E7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gSXRlbUZpbHRlcihjb25zdHI6IG5ldyAoLi4uYXJnczogYW55W10pID0+IEl0ZW0pOiAoaTogSXRlbSkgPT4gYm9vbGVhbiB7XG4gICAgcmV0dXJuIChpOiBJdGVtKSA9PiB7IHJldHVybiBpLmNvbnN0cnVjdG9yID09PSBjb25zdHI7IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFZpc2libGVJdGVtRmlsdGVyKCk6IChpOiBJdGVtKSA9PiBib29sZWFuIHtcbiAgICByZXR1cm4gKGk6IEl0ZW0pID0+IGkudmlzaWJsZTtcbn0iLCJpbXBvcnQgUG9zaXRpb25lZCBmcm9tIFwiLi4vLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL0ludGVyZmFjZXMvUG9zaXRpb25lZFwiO1xuaW1wb3J0IEJhdHRsZXIgZnJvbSBcIi4uL0JhdHRsZVN5c3RlbS9CYXR0bGVyXCI7XG5pbXBvcnQgeyBUYXJnZXRhYmxlRW50aXR5IH0gZnJvbSBcIi4uL1RhcmdldGluZy9UYXJnZXRhYmxlRW50aXR5XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBDbG9zZXN0UG9zaXRpb25lZDxQIGV4dGVuZHMgUG9zaXRpb25lZD4ocG9zaXRpb25lZDogUG9zaXRpb25lZCk6IChwMTogUCwgcDI6IFApID0+IFAge1xuICAgIHJldHVybiAocDE6IFAsIHAyOiBQKTogUCA9PiB7IFxuICAgICAgICByZXR1cm4gcDEucG9zaXRpb24uZGlzdGFuY2VTcVRvKHBvc2l0aW9uZWQucG9zaXRpb24pIDwgcDIucG9zaXRpb24uZGlzdGFuY2VTcVRvKHBvc2l0aW9uZWQucG9zaXRpb24pID8gcDEgOiBwMjtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBMb3dlc3RIZWFsdGhCYXR0bGVyKGIxOiBCYXR0bGVyLCBiMjogQmF0dGxlcik6IEJhdHRsZXIge1xuICAgIHJldHVybiBiMS5oZWFsdGggPCBiMi5oZWFsdGggPyBiMSA6IGIyXG59IiwiaW1wb3J0IFBvc2l0aW9uZWQgZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9JbnRlcmZhY2VzL1Bvc2l0aW9uZWRcIjtcbmltcG9ydCBVbmlxdWUgZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9JbnRlcmZhY2VzL1VuaXF1ZVwiO1xuaW1wb3J0IFZlYzIgZnJvbSBcIi4uLy4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgeyBUYXJnZXRhYmxlRW50aXR5IH0gZnJvbSBcIi4vVGFyZ2V0YWJsZUVudGl0eVwiO1xuaW1wb3J0IHsgVGFyZ2V0aW5nRW50aXR5IH0gZnJvbSBcIi4vVGFyZ2V0aW5nRW50aXR5XCI7XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFzaWNUYXJnZXRhYmxlIGltcGxlbWVudHMgVGFyZ2V0YWJsZUVudGl0eSB7XG4gICAgcHJvdGVjdGVkIG93bmVyOiBQb3NpdGlvbmVkO1xuXG4gICAgcHJvdGVjdGVkIHRhcmdldGluZzogTWFwPG51bWJlciwgVGFyZ2V0aW5nRW50aXR5PjtcblxuICAgIGNvbnN0cnVjdG9yKG93bmVyOiBQb3NpdGlvbmVkKSB7XG4gICAgICAgIHRoaXMub3duZXIgPSBvd25lcjtcbiAgICAgICAgdGhpcy50YXJnZXRpbmcgPSBuZXcgTWFwPG51bWJlciwgVGFyZ2V0aW5nRW50aXR5PigpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUYXJnZXRpbmcoKTogVGFyZ2V0aW5nRW50aXR5W10geyBcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy50YXJnZXRpbmcudmFsdWVzKCkpOyBcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkVGFyZ2V0aW5nKHRhcmdldGluZzogVGFyZ2V0aW5nRW50aXR5KTogdm9pZCB7XG4gICAgICAgIHRoaXMudGFyZ2V0aW5nLnNldCh0YXJnZXRpbmcuaWQsIHRhcmdldGluZyk7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyByZW1vdmVUYXJnZXRpbmcodGFyZ2V0aW5nOiBUYXJnZXRpbmdFbnRpdHkpOiB2b2lkIHtcbiAgICAgICAgdGhpcy50YXJnZXRpbmcuZGVsZXRlKHRhcmdldGluZy5pZCk7XG4gICAgfVxuXG4gICAgZ2V0IHBvc2l0aW9uKCk6IFZlYzIgeyByZXR1cm4gdGhpcy5vd25lci5wb3NpdGlvbjsgfVxuICAgIGdldCByZWxhdGl2ZVBvc2l0aW9uKCk6IFZlYzIgeyByZXR1cm4gdGhpcy5vd25lci5yZWxhdGl2ZVBvc2l0aW9uOyB9XG5cbn0iLCJpbXBvcnQgVW5pcXVlIGZyb20gXCIuLi8uLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvSW50ZXJmYWNlcy9VbmlxdWVcIjtcbmltcG9ydCB7IFRhcmdldGFibGVFbnRpdHkgfSBmcm9tIFwiLi9UYXJnZXRhYmxlRW50aXR5XCI7XG5pbXBvcnQgeyBUYXJnZXRpbmdFbnRpdHkgfSBmcm9tIFwiLi9UYXJnZXRpbmdFbnRpdHlcIjtcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNpY1RhcmdldGluZyBpbXBsZW1lbnRzIFRhcmdldGluZ0VudGl0eSB7XG5cbiAgICBwcm90ZWN0ZWQgb3duZXI6IFVuaXF1ZTtcbiAgICBwcm90ZWN0ZWQgX3RhcmdldDogVGFyZ2V0YWJsZUVudGl0eSB8IG51bGw7XG5cbiAgICBjb25zdHJ1Y3Rvcihvd25lcjogVW5pcXVlKSB7XG4gICAgICAgIHRoaXMub3duZXIgPSBvd25lcjtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBudWxsO1xuICAgIH1cblxuICAgIGNsZWFyVGFyZ2V0KCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy50YXJnZXQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnJlbW92ZVRhcmdldGluZyh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl90YXJnZXQgPSBudWxsO1xuICAgIH1cbiAgICBzZXRUYXJnZXQodGFyZ2V0YWJsZTogVGFyZ2V0YWJsZUVudGl0eSk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy50YXJnZXQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnJlbW92ZVRhcmdldGluZyh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldGFibGU7XG4gICAgICAgIHRoaXMudGFyZ2V0LmFkZFRhcmdldGluZyh0aGlzKTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0KCk6IFRhcmdldGFibGVFbnRpdHkge1xuICAgICAgICBpZiAodGhpcy50YXJnZXQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRhcmdldCBub3Qgc2V0IVwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy50YXJnZXQ7XG4gICAgfVxuXG4gICAgaGFzVGFyZ2V0KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy50YXJnZXQgIT09IG51bGw7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBpZCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5vd25lci5pZDsgfVxuXG4gICAgcHJvdGVjdGVkIGdldCB0YXJnZXQoKTogVGFyZ2V0YWJsZUVudGl0eSB8IG51bGwgeyByZXR1cm4gdGhpcy5fdGFyZ2V0OyB9XG4gICAgcHJvdGVjdGVkIHNldCB0YXJnZXQodGFyZ2V0OiBUYXJnZXRhYmxlRW50aXR5IHwgbnVsbCkgeyB0aGlzLl90YXJnZXQgPSB0YXJnZXQ7IH1cbn0iLCJpbXBvcnQgU3RhY2sgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9Db2xsZWN0aW9ucy9TdGFja1wiO1xuaW1wb3J0IFZlYzIgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgTmF2aWdhdGlvblBhdGggZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1BhdGhmaW5kaW5nL05hdmlnYXRpb25QYXRoXCI7XG5pbXBvcnQgTmF2UGF0aFN0cmF0IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9QYXRoZmluZGluZy9TdHJhdGVnaWVzL05hdmlnYXRpb25TdHJhdGVneVwiO1xuaW1wb3J0IEdyYXBoVXRpbHMgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1V0aWxzL0dyYXBoVXRpbHNcIjtcblxuLyoqXG4gKiBUaGlzIGlzIHdoZXJlIHRoZSBzdHVkZW50cyB3aWxsIGJlIGltcGxlbWVudGluZyB0aGVpciB2ZXJzaW9uIG9mIEEqIC0gaW4gdGhlb3J5LlxuICogXG4gKiBUaGUgQXN0YXJTdHJhdGVneSBjbGFzcyBpcyBhbiBleHRlbnNpb24gb2YgdGhlIGFic3RyYWN0IE5hdlBhdGhTdHJhdGVneSBjbGFzcy4gRm9yIG91ciBuYXZpZ2F0aW9uIHN5c3RlbSwgeW91IGNhblxuICogbm93IHNwZWNpZnkgYW5kIGRlZmluZSB5b3VyIG93biBwYXRoZmluZGluZyBzdHJhdGVneS4gT3JpZ2luYWxseSwgdGhlIHR3byBvcHRpb25zIHdlcmUgdG8gdXNlIERqaWtzdHJhcyBvciBhXG4gKiBkaXJlY3QgKHBvaW50IEEgLT4gcG9pbnQgQikgc3RyYXRlZ3kuIFRoZSBvbmx5IHdheSB0byBjaGFuZ2UgaG93IHRoZSBwYXRoZmluZGluZyB3YXMgZG9uZSB3YXMgYnkgaGFyZC1jb2RpbmcgdGhpbmdzXG4gKiBpbnRvIHRoZSBjbGFzc2VzIGFzc29jaWF0ZWQgd2l0aCB0aGUgbmF2aWdhdGlvbiBzeXN0ZW0uIFxuICogXG4gKiBUaGlzIGlzIHRoZSBTdHJhdGVneSBkZXNpZ24gcGF0dGVybiA7KVxuICogQGF1dGhvciBQZXRleUx1bXBraW5zXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFzdGFyU3RyYXRlZ3kgZXh0ZW5kcyBOYXZQYXRoU3RyYXQge1xuXG4gICAgLyoqXG4gICAgICogQHNlZSBOYXZQYXRoU3RyYXQuYnVpbGRQYXRoKClcbiAgICAgKi9cbiAgICBwdWJsaWMgYnVpbGRQYXRoKHRvOiBWZWMyLCBmcm9tOiBWZWMyKTogTmF2aWdhdGlvblBhdGgge1xuICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLm1lc2guZ3JhcGguc25hcChmcm9tKTtcbiAgICAgICAgbGV0IGVuZCA9IHRoaXMubWVzaC5ncmFwaC5zbmFwKHRvKTtcbiAgICBcbiAgICAgICAgbGV0IHBhdGhTdGFjayA9IG5ldyBTdGFjazxWZWMyPih0aGlzLm1lc2guZ3JhcGgubnVtVmVydGljZXMpO1xuICAgICAgICBcbiAgICAgICAgLy8gUHVzaCB0aGUgZmluYWwgcG9zaXRpb24gYW5kIHRoZSBmaW5hbCBwb3NpdGlvbiBpbiB0aGUgZ3JhcGhcbiAgICAgICAgcGF0aFN0YWNrLnB1c2godG8uY2xvbmUoKSk7XG4gICAgICAgIHBhdGhTdGFjay5wdXNoKHRoaXMubWVzaC5ncmFwaC5wb3NpdGlvbnNbZW5kXSk7XG4gICAgXG4gICAgICAgIC8vIFVzZSBBKiBvbiB0aGUgbWVzaCdzIFBvc2l0aW9uR3JhcGggdG8gZmluZCBhIHBhdGggZnJvbSBzdGFydCB0byBlbmRcbiAgICAgICAgbGV0IHBhcmVudDogbnVtYmVyW10gfCBudWxsID0gR3JhcGhVdGlscy5hc3Rhcih0aGlzLm1lc2guZ3JhcGgsIHN0YXJ0LCBlbmQsIChub2RlOiBudW1iZXIpID0+IHsgXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZXNoLmdyYXBoLmdldE5vZGVQb3NpdGlvbihub2RlKS5kaXN0YW5jZVRvKHRoaXMubWVzaC5ncmFwaC5nZXROb2RlUG9zaXRpb24oZW5kKSk7IFxuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgLy8gSWYgQSogY2Fubm90IGZpbmQgYSBwYXRoXG4gICAgICAgIGlmIChwYXJlbnQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTmF2aWdhdGlvblBhdGgocGF0aFN0YWNrKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gTmVlZCB0byBwdXNoIHRoZSBub2RlcyBmcm9tIHRoZSBhcnJheSByZXR1cm5lZCBmcm9tIG15IGltcGxlbWVudGF0aW9uIGludG8gdGhlIHBhdGggc3RhY2tcbiAgICAgICAgZm9yIChsZXQgaSA9IHBhcmVudC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgcGF0aFN0YWNrLnB1c2godGhpcy5tZXNoLmdyYXBoLnBvc2l0aW9uc1twYXJlbnRbaV1dKTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICByZXR1cm4gbmV3IE5hdmlnYXRpb25QYXRoKHBhdGhTdGFjayk7XG4gICAgfVxuICAgIFxufSIsImltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IFNjZW5lIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9TY2VuZS9TY2VuZVwiO1xuaW1wb3J0IE9ydGhvZ29uYWxUaWxlbWFwIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9UaWxlbWFwcy9PcnRob2dvbmFsVGlsZW1hcFwiO1xuaW1wb3J0IExhc2VyR3VuIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9JdGVtU3lzdGVtL0l0ZW1zL0xhc2VyR3VuXCI7XG5pbXBvcnQgSGVhbHRocGFjayBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvSXRlbVN5c3RlbS9JdGVtcy9IZWFsdGhwYWNrXCI7XG5pbXBvcnQgQmF0dGxlciBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvQmF0dGxlU3lzdGVtL0JhdHRsZXJcIjtcbmltcG9ydCBBY3RvciBmcm9tIFwiLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL0ludGVyZmFjZXMvQWN0b3JcIjtcbmltcG9ydCBIZWFsdGhiYXJIVUQgZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL0hVRC9IZWFsdGhiYXJIVURcIjtcbmltcG9ydCBQbGF5ZXJBY3RvciBmcm9tIFwiLi4vQWN0b3JzL1BsYXllckFjdG9yXCI7XG5pbXBvcnQgTlBDQWN0b3IgZnJvbSBcIi4uL0FjdG9ycy9OUENBY3RvclwiO1xuaW1wb3J0IEJhdHRsZXJCYXNlIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9CYXR0bGVTeXN0ZW0vQmF0dGxlckJhc2VcIjtcbmltcG9ydCBQb3NpdGlvbkdyYXBoIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvR3JhcGhzL1Bvc2l0aW9uR3JhcGhcIjtcbmltcG9ydCB7IEJhdHRsZXJFdmVudCwgSXRlbUV2ZW50LCBQbGF5ZXJFdmVudCB9IGZyb20gXCIuLi9FdmVudHNcIjtcbmltcG9ydCBNYXRoVXRpbHMgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1V0aWxzL01hdGhVdGlsc1wiO1xuaW1wb3J0IEFBQkIgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9TaGFwZXMvQUFCQlwiO1xuaW1wb3J0IExpbmUgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL05vZGVzL0dyYXBoaWNzL0xpbmVcIjtcbmltcG9ydCB7IEdyYXBoaWNUeXBlIH0gZnJvbSBcIi4uLy4uL1dvbGZpZTJEL05vZGVzL0dyYXBoaWNzL0dyYXBoaWNUeXBlc1wiO1xuaW1wb3J0IEd1YXJkQmVoYXZpb3IgZnJvbSBcIi4uL0FJL05QQy9OUENCZWhhdmlvci9HYXVyZEJlaGF2aW9yXCI7XG5pbXBvcnQgTmF2bWVzaCBmcm9tIFwiLi4vLi4vV29sZmllMkQvUGF0aGZpbmRpbmcvTmF2bWVzaFwiO1xuaW1wb3J0IERpcmVjdFN0cmF0ZWd5IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9QYXRoZmluZGluZy9TdHJhdGVnaWVzL0RpcmVjdFN0cmF0ZWd5XCI7XG5pbXBvcnQgQXN0YXJTdHJhdGVneSBmcm9tIFwiLi4vUGF0aGZpbmRpbmcvQXN0YXJTdHJhdGVneVwiO1xuaW1wb3J0IFBsYXllckFJIGZyb20gXCIuLi9BSS9QbGF5ZXIvUGxheWVyQUlcIjtcbmltcG9ydCBHYW1lRXZlbnQgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL0V2ZW50cy9HYW1lRXZlbnRcIjtcbmltcG9ydCB7IENsb3Nlc3RQb3NpdGlvbmVkIH0gZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL1NlYXJjaGluZy9IVzRSZWR1Y2Vyc1wiO1xuaW1wb3J0IEdhbWVOb2RlIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9HYW1lTm9kZVwiO1xuaW1wb3J0IEludmVudG9yeSBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvSXRlbVN5c3RlbS9JbnZlbnRvcnlcIjtcbmltcG9ydCBJdGVtIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9JdGVtU3lzdGVtL0l0ZW1cIjtcbmltcG9ydCBNYWluTWVudSBmcm9tIFwiLi9NYWluTWVudVwiO1xuaW1wb3J0IFNwcml0ZSBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvU3ByaXRlcy9TcHJpdGVcIjtcbi8vIGltcG9ydCBNYWluSFc0U2NlbmUgZnJvbSBcIi4vTWFpbkhXNFNjZW5lXCI7XG5pbXBvcnQgeyBVSUVsZW1lbnRUeXBlIH0gZnJvbSBcIi4uLy4uL1dvbGZpZTJEL05vZGVzL1VJRWxlbWVudHMvVUlFbGVtZW50VHlwZXNcIjtcbmltcG9ydCBDb2xvciBmcm9tIFwiLi4vLi4vV29sZmllMkQvVXRpbHMvQ29sb3JcIjtcbmltcG9ydCBJbnB1dCBmcm9tIFwiLi4vLi4vV29sZmllMkQvSW5wdXQvSW5wdXRcIjtcbmltcG9ydCBMZXZlbFNlbGVjdGlvblNjZW5lIGZyb20gXCIuL0xldmVsU2VsZWN0aW9uU2NlbmVcIjtcbmltcG9ydCBHYW1lT3ZlciBmcm9tIFwiLi9HYW1lT3ZlclwiO1xuaW1wb3J0IExldmVsMVNjZW5lIGZyb20gXCIuL0xldmVsMVNjZW5lXCI7XG5pbXBvcnQgTGV2ZWwyU2NlbmUgZnJvbSBcIi4vTGV2ZWwyU2NlbmVcIjtcbmltcG9ydCBMZXZlbDNTY2VuZSBmcm9tIFwiLi9MZXZlbDNTY2VuZVwiO1xuaW1wb3J0IExldmVsNFNjZW5lIGZyb20gXCIuL0xldmVsNFNjZW5lXCI7XG5pbXBvcnQgTGV2ZWw1U2NlbmUgZnJvbSBcIi4vTGV2ZWw1U2NlbmVcIjtcbmltcG9ydCBMYXN0U2NlbmUgZnJvbSBcIi4vTGFzdFNjZW5lXCI7XG5pbXBvcnQgdGVzdE1lbnUgZnJvbSBcIi4vTWFpbk1lbnVcIjtcbmltcG9ydCB7IEdhbWVFdmVudFR5cGUgfSBmcm9tIFwiLi4vLi4vV29sZmllMkQvRXZlbnRzL0dhbWVFdmVudFR5cGVcIjtcbi8vIGltcG9ydCB0ZXN0U2NlbmUgZnJvbSBcIi4vTGV2ZWwxU2NlbmVcIjtcblxuY29uc3QgQmF0dGxlckdyb3VwcyA9IHtcbiAgICBSRUQ6IDEsXG4gICAgQkxVRTogMlxufSBhcyBjb25zdDtcblxuZXhwb3J0IGNvbnN0IEZpbmFsUHJvamVjdFNjZW5lTGF5ZXJzID0ge1xuXHRQUklNQVJZOiBcIlBSSU1BUllcIixcblx0QkFDS0dST1VORDogXCJCQUNLR1JPVU5EXCIsIFxuXHRVSTogXCJVSVwiLFxuICAgIFBBVVNFOiBcIlBBVVNFXCIsXG4gICAgQ09OVFJPTFM6IFwiQ09OVFJPTFNcIixcbiAgICBIRUxQOiBcIkhFTFBcIixcbiAgICBDT01QTEVURTogXCJDT01QTEVURVwiXG59IGFzIGNvbnN0O1xuXG5cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIEZpbmFsUHJvamVjdFNjZW5lIGV4dGVuZHMgU2NlbmUge1xuXG4gICAgICAgLyoqIEdhbWVTeXN0ZW1zIGluIHRoZSBIVzMgU2NlbmUgKi9cbiAgICAvLyBwcml2YXRlIGludmVudG9yeUh1ZDogSW52ZW50b3J5SFVEO1xuXG4gICAgLyoqIEFsbCB0aGUgYmF0dGxlcnMgaW4gdGhlIEhXM1NjZW5lIChpbmNsdWRpbmcgdGhlIHBsYXllcikgKi9cbiAgICBwcm90ZWN0ZWQgYmF0dGxlcnM6IChCYXR0bGVyICYgQWN0b3IpW107XG4gICAgLyoqIEhlYWx0aGJhcnMgZm9yIHRoZSBiYXR0bGVycyAqL1xuICAgIHByb3RlY3RlZCBoZWFsdGhiYXJzOiBNYXA8bnVtYmVyLCBIZWFsdGhiYXJIVUQ+O1xuXG4gICAgcHJvdGVjdGVkIHBsYXllcjogKFBsYXllckFjdG9yKVtdO1xuICAgIHByb3RlY3RlZCBlbmVtaWVzOiAoTlBDQWN0b3IpW107XG5cbiAgICBwcm90ZWN0ZWQgYm9zczogTlBDQWN0b3I7XG4gICAgXG4gICAgcHJvdGVjdGVkIHNob290QXVkaW9LZXk6IHN0cmluZztcblxuICAgIHByb3RlY3RlZCBoaXRBdWRpb0tleTogc3RyaW5nO1xuXG4gICAgcHJvdGVjdGVkIGR5aW5nQXVkaW9LZXk6IHN0cmluZztcblxuICAgIHByb3RlY3RlZCBsZXZlbE11c2ljS2V5OiBzdHJpbmc7XG5cbiAgICAvL3ByaXZhdGUgem9vbUJvb2wgPSBmYWxzZTtcblxuICAgIC8vIHByb3RlY3RlZCBzaG9vdEF1ZGlvS2V5OiBzdHJpbmc7XG5cbiAgICBwcm90ZWN0ZWQgYmFzZXM6IEJhdHRsZXJCYXNlW107XG5cbiAgICBwcm90ZWN0ZWQgaGVhbHRocGFja3M6IEFycmF5PEhlYWx0aHBhY2s+O1xuICAgIHByb3RlY3RlZCBsYXNlcmd1bnM6IEFycmF5PExhc2VyR3VuPjtcblxuICAgIC8vIFRoZSB3YWxsIGxheWVyIG9mIHRoZSB0aWxlbWFwXG4gICAgcHJvdGVjdGVkIHdhbGxzOiBPcnRob2dvbmFsVGlsZW1hcDtcblxuICAgIC8vIFRoZSBwb3NpdGlvbiBncmFwaCBmb3IgdGhlIG5hdm1lc2hcbiAgICBwcm90ZWN0ZWQgZ3JhcGg6IFBvc2l0aW9uR3JhcGg7XG5cbiAgICBwcm90ZWN0ZWQgcGF1c2VJbWFnZTogU3ByaXRlO1xuICAgIHByb3RlY3RlZCBoZWxwSW1hZ2U6IFNwcml0ZTtcbiAgICBwcm90ZWN0ZWQgY29udHJvbHNJbWFnZTogU3ByaXRlO1xuICAgIHByb3RlY3RlZCBjb21wbGV0ZUltYWdlOiBTcHJpdGU7XG5cbiAgICBwcm90ZWN0ZWQgYm9zc0xvY2F0aW9uOiBWZWMyO1xuXG4gICAgcHVibGljIHN0YXRpYyBQQVVTRV9LRVkgPSBcIlBBVVNFXCI7XG4gICAgcHVibGljIHN0YXRpYyBQQVVTRV9QQVRIID0gXCJodzRfYXNzZXRzL3Nwcml0ZXMvUGF1c2VkLVNjcmVlbi5wbmdcIjtcblxuICAgIHB1YmxpYyBzdGF0aWMgSEVMUF9LRVkgPSBcIkhFTFBcIjtcbiAgICBwdWJsaWMgc3RhdGljIEhFTFBfUEFUSCA9IFwiaHc0X2Fzc2V0cy9zcHJpdGVzL0hlbHAtU2NyZWVuLnBuZ1wiO1xuXG5cbiAgICBwdWJsaWMgc3RhdGljIENPTlRST0xTX0tFWSA9IFwiQ09OVFJPTFNcIlxuICAgIHB1YmxpYyBzdGF0aWMgQ09OVFJPTFNfUEFUSCA9IFwiaHc0X2Fzc2V0cy9zcHJpdGVzL0NvbnRyb2xzLVNjcmVlbi5wbmdcIlxuXG4gICAgcHVibGljIHN0YXRpYyBDT01QTEVURV9LRVkgPSBcIkNPTVBMRVRFXCJcbiAgICBwdWJsaWMgc3RhdGljIENPTVBMRVRFX1BBVEggPSBcImh3NF9hc3NldHMvc3ByaXRlcy9MZXZlbC1Db21wbGV0ZS5wbmdcIlxuXG4gICAgXG4gICAgcHVibGljIHN0YXJ0U2NlbmUoKSB7XG4gICAgICAgIC8vIHN1cGVyLnN0YXJ0U2NlbmUoKTtcbiAgICAgICAgLy8gXG5cbiAgICAgICAgY29uc3QgY2VudGVyID0gdGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKTtcblxuICAgICAgICBcblxuICAgICAgICAvLyB0aGlzLmFkZExheWVyKE1haW5TY2VuZUxheWVycy5VSSwgKTtcbiAgICAgICAgLy8gdGhpcy5hZGRMYXllcihNYWluU2NlbmVMYXllcnMuUEFVU0UsIDUpO1xuICAgICAgICAvLyBsZXQgdiA9IHRoaXMuZ2V0TGF5ZXIoXCJVSVwiKTtcbiAgICAgICAgXG4gICAgICAgIFxuXG4gICAgICAgIC8vIEFkZCBpbiB0aGUgdGlsZW1hcFxuICAgICAgICBsZXQgdGlsZW1hcExheWVycyA9IHRoaXMuYWRkLnRpbGVtYXAoXCJsZXZlbFwiKTtcblxuICAgICAgICAvLyBHZXQgdGhlIHdhbGwgbGF5ZXJcbiAgICAgICAgdGhpcy53YWxscyA9IDxPcnRob2dvbmFsVGlsZW1hcD50aWxlbWFwTGF5ZXJzWzFdLmdldEl0ZW1zKClbMF07XG5cbiAgICAgICAgLy8gU2V0IHRoZSB2aWV3cG9ydCBib3VuZHMgdG8gdGhlIHRpbGVtYXBcbiAgICAgICAgbGV0IHRpbGVtYXBTaXplOiBWZWMyID0gdGhpcy53YWxscy5zaXplO1xuXG4gICAgICAgIHRoaXMudmlld3BvcnQuc2V0Qm91bmRzKDAsIDAsIHRpbGVtYXBTaXplLngsIHRpbGVtYXBTaXplLnkpO1xuICAgIFxuICAgICAgICAvLyBcblxuICAgICAgICB0aGlzLmluaXRMYXllcnMoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgcGxheWVyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVBsYXllcigpO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVJdGVtcygpO1xuXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZU5hdm1lc2goKTtcblxuICAgICAgICAvLyBDcmVhdGUgdGhlIE5QQ1NcbiAgICAgICAgdGhpcy5pbml0aWFsaXplTlBDcygpO1xuXG4gICAgICAgIC8vIFN1YnNjcmliZSB0byByZWxldmFudCBldmVudHNcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJoZWFsdGhwYWNrXCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcImVuZW15RGllZFwiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoSXRlbUV2ZW50LklURU1fUkVRVUVTVCk7XG5cbiAgICBcblxuICAgICAgICAvLyBBZGQgYSBVSSBmb3IgaGVhbHRoXG4gICAgICAgIHRoaXMuYWRkVUlMYXllcihcImhlYWx0aFwiKTtcblxuICAgICAgICAvLyBQYXVzZSBCdXR0b24gKE5vdCBuZWVkZWQganVzdCBwcmVzcyBlc2NhcGUpXG4gICAgICAgIC8vIGxldCBwYXVzZSA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTWFpblNjZW5lTGF5ZXJzLlVJLCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54ICsgNjAwLCBjZW50ZXIueSAtIDQwMCksIHRleHQ6IFwiUGF1c2VcIn0pO1xuICAgICAgICAvLyBwYXVzZS5zaXplLnNldCgxMDAsIDUwKTtcbiAgICAgICAgLy8gcGF1c2UuYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICAvLyBwYXVzZS5ib3JkZXJDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICAvLyBwYXVzZS5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgLy8gcGF1c2Uub25DbGlja0V2ZW50SWQgPSBcInBhdXNlXCI7XG5cbiAgICAgICAgLy8gdGhpcy5wYXVzZU1lbnUgPSBwYXVzZTtcblxuICAgICAgICAvLyBUT0RPIE1ha2UgdGV4dCBtb3ZlIHdpdGggYnV0dG9uXG5cbiAgICAgICAgLy8gbGV0IHBhdXNlQmFyID0gbmV3IFBhdXNlSFVEKHRoaXMsIHBhdXNlLCBjZW50ZXIpO1xuICAgICAgICAvLyB0aGlzLnBhdXNlID0gcGF1c2VCYXI7XG5cblxuICAgICAgICBsZXQgcGF1c2VMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJQQVVTRVwiKTtcblxuICAgICAgICB0aGlzLnBhdXNlSW1hZ2UgPSB0aGlzLmFkZC5zcHJpdGUoRmluYWxQcm9qZWN0U2NlbmUuUEFVU0VfS0VZLCBwYXVzZUxheWVyLmdldE5hbWUoKSk7XG4gICAgICAgIHRoaXMucGF1c2VJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuICAgICAgICAvLyB0aGlzLnBhdXNlSW1hZ2UuYWxwaGEgPSAwLjc7XG5cbiAgICAgICAgY29uc3QgdW5wYXVzZSA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgRmluYWxQcm9qZWN0U2NlbmVMYXllcnMuUEFVU0UsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLnggLSA1LCBjZW50ZXIueSAtIDIxMCksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgdW5wYXVzZS5zaXplLnNldCg0MDAsIDEwMCk7XG4gICAgICAgIHVucGF1c2UuYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICB1bnBhdXNlLmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIHVucGF1c2UuYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIHVucGF1c2Uub25DbGlja0V2ZW50SWQgPSBcInVucGF1c2VcIjtcblxuICAgICAgICBjb25zdCBtYWluTWVudSA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgRmluYWxQcm9qZWN0U2NlbmVMYXllcnMuUEFVU0UsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLnggLSA1LCBjZW50ZXIueSArIDIyMyksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgbWFpbk1lbnUuc2l6ZS5zZXQoNDAwLCAxMDApO1xuICAgICAgICBtYWluTWVudS5ib3JkZXJXaWR0aCA9IDI7XG4gICAgICAgIG1haW5NZW51LmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIG1haW5NZW51LmJhY2tncm91bmRDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBtYWluTWVudS5vbkNsaWNrRXZlbnRJZCA9IFwibWFpbm1lbnVcIjtcblxuICAgICAgICBjb25zdCBjb250cm9sc0J1dHRvbiA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgRmluYWxQcm9qZWN0U2NlbmVMYXllcnMuUEFVU0UsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLnggLSA1LCBjZW50ZXIueSAtIDY1KSwgdGV4dDogXCJcIn0pO1xuICAgICAgICBjb250cm9sc0J1dHRvbi5zaXplLnNldCg0MDAsIDEwMCk7XG4gICAgICAgIGNvbnRyb2xzQnV0dG9uLmJvcmRlcldpZHRoID0gMjtcbiAgICAgICAgY29udHJvbHNCdXR0b24uYm9yZGVyQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgY29udHJvbHNCdXR0b24uYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIGNvbnRyb2xzQnV0dG9uLm9uQ2xpY2tFdmVudElkID0gXCJjb250cm9sc1wiO1xuXG4gICAgICAgIGNvbnN0IGhlbHBCdXR0b24gPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIEZpbmFsUHJvamVjdFNjZW5lTGF5ZXJzLlBBVVNFLCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54IC0gNSwgY2VudGVyLnkgKyA4MCksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgaGVscEJ1dHRvbi5zaXplLnNldCg0MDAsIDEwMClcbiAgICAgICAgaGVscEJ1dHRvbi5ib3JkZXJXaWR0aCA9IDI7XG4gICAgICAgIGhlbHBCdXR0b24uYm9yZGVyQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgaGVscEJ1dHRvbi5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgaGVscEJ1dHRvbi5vbkNsaWNrRXZlbnRJZCA9IFwiaGVscFwiO1xuICAgICAgICBcblxuICAgICAgICBwYXVzZUxheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICAgICAgcGF1c2VMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG5cbiAgICAgICBcbiAgICAgICAgbGV0IGNvbnRyb2xzTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiQ09OVFJPTFNcIik7XG5cbiAgICAgICAgdGhpcy5jb250cm9sc0ltYWdlID0gdGhpcy5hZGQuc3ByaXRlKEZpbmFsUHJvamVjdFNjZW5lLkNPTlRST0xTX0tFWSwgY29udHJvbHNMYXllci5nZXROYW1lKCkpO1xuICAgICAgICB0aGlzLmNvbnRyb2xzSW1hZ2UucG9zaXRpb24uY29weSh0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTtcbiAgICAgICAgLy8gdGhpcy5jb250cm9sc0ltYWdlLmFscGhhID0gMC41O1xuXG4gICAgICAgIGNvbnN0IGNvbnRyb2xzQmFja0J1dHRvbiA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgRmluYWxQcm9qZWN0U2NlbmVMYXllcnMuQ09OVFJPTFMsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLnggLSA1OTUsIGNlbnRlci55ICsgNDE1KSwgdGV4dDogXCJcIn0pO1xuICAgICAgICBjb250cm9sc0JhY2tCdXR0b24uc2l6ZS5zZXQoMjAwLCA1MCk7XG4gICAgICAgIGNvbnRyb2xzQmFja0J1dHRvbi5ib3JkZXJXaWR0aCA9IDI7XG4gICAgICAgIGNvbnRyb2xzQmFja0J1dHRvbi5ib3JkZXJDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBjb250cm9sc0JhY2tCdXR0b24uYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIGNvbnRyb2xzQmFja0J1dHRvbi5vbkNsaWNrRXZlbnRJZCA9IFwiYmFja2NvbnRyb2xzXCI7XG5cbiAgICAgICAgY29udHJvbHNMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgICAgIGNvbnRyb2xzTGF5ZXIuc2V0SGlkZGVuKHRydWUpO1xuXG4gICAgICAgIC8vIFxuICAgICAgICBsZXQgaGVscExheWVyID0gdGhpcy5nZXRMYXllcihcIkhFTFBcIik7XG5cbiAgICAgICAgdGhpcy5oZWxwSW1hZ2UgPSB0aGlzLmFkZC5zcHJpdGUoRmluYWxQcm9qZWN0U2NlbmUuSEVMUF9LRVksIGhlbHBMYXllci5nZXROYW1lKCkpO1xuICAgICAgICB0aGlzLmhlbHBJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuICAgICAgICAvLyB0aGlzLmhlbHBJbWFnZS5hbHBoYSA9IDAuNTtcblxuICAgICAgICBjb25zdCBoZWxwQmFja0J1dHRvbiA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgRmluYWxQcm9qZWN0U2NlbmVMYXllcnMuSEVMUCwge3Bvc2l0aW9uOiBuZXcgVmVjMihjZW50ZXIueCAtIDU5NSwgY2VudGVyLnkgKyA0MTUpLCB0ZXh0OiBcIlwifSk7XG4gICAgICAgIGhlbHBCYWNrQnV0dG9uLnNpemUuc2V0KDIwMCwgNTApO1xuICAgICAgICBoZWxwQmFja0J1dHRvbi5ib3JkZXJXaWR0aCA9IDI7XG4gICAgICAgIGhlbHBCYWNrQnV0dG9uLmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIGhlbHBCYWNrQnV0dG9uLmJhY2tncm91bmRDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBoZWxwQmFja0J1dHRvbi5vbkNsaWNrRXZlbnRJZCA9IFwiaGVscGNvbnRyb2xzXCI7XG5cbiAgICAgICAgaGVscExheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICAgICAgaGVscExheWVyLnNldEhpZGRlbih0cnVlKTtcblxuXG4gICAgICAgIC8vIENvbXBsZXRlIExheWVyXG5cbiAgICAgICAgbGV0IGNvbXBsZXRlTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiQ09NUExFVEVcIik7XG5cbiAgICAgICAgdGhpcy5jb21wbGV0ZUltYWdlID0gdGhpcy5hZGQuc3ByaXRlKEZpbmFsUHJvamVjdFNjZW5lLkNPTVBMRVRFX0tFWSwgY29tcGxldGVMYXllci5nZXROYW1lKCkpO1xuICAgICAgICB0aGlzLmNvbXBsZXRlSW1hZ2UucG9zaXRpb24uY29weSh0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTtcblxuICAgICAgICBjb25zdCBjb21wbGV0ZUJ1dHRvbiA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgRmluYWxQcm9qZWN0U2NlbmVMYXllcnMuQ09NUExFVEUsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLngsIGNlbnRlci55ICsgNDc1KSwgdGV4dDogXCJcIn0pO1xuICAgICAgICBjb21wbGV0ZUJ1dHRvbi5zaXplLnNldCgxMzIwLCAyMDAwKTtcbiAgICAgICAgY29tcGxldGVCdXR0b24uYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICBjb21wbGV0ZUJ1dHRvbi5ib3JkZXJDb2xvciA9IENvbG9yLldISVRFO1xuICAgICAgICBjb21wbGV0ZUJ1dHRvbi5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgY29tcGxldGVCdXR0b24ub25DbGlja0V2ZW50SWQgPSBcIm5leHRsdmxcIjtcblxuICAgICAgICBjb21wbGV0ZUxheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICAgICAgY29tcGxldGVMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG5cblxuXG5cblxuXG4gICAgICAgIC8vIHRoaXMucGF1c2VNZW51ID0gdW5wYXVzZTtcblxuICAgICAgICAvLyBsZXQgdmFsID0gdGhpcy5sYXllcnM7XG5cbiAgICAgICAgLy8gY29uc29sZS5sb2codmFsKTtcblxuICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgzKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFBsYXllckV2ZW50LlBMQVlFUl9LSUxMRUQpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShCYXR0bGVyRXZlbnQuQkFUVExFUl9LSUxMRUQpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShCYXR0bGVyRXZlbnQuQkFUVExFUl9SRVNQQVdOKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJwYXVzZVwiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJ1bnBhdXNlXCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcIm1haW5tZW51XCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcImNvbnRyb2xzXCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcImhlbHBcIik7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFwiYmFja2NvbnRyb2xzXCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcImhlbHBjb250cm9sc1wiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJuZXh0bHZsXCIpO1xuXG4gICAgICAgIHRoaXMuZW1pdHRlci5maXJlRXZlbnQoR2FtZUV2ZW50VHlwZS5QTEFZX1NPVU5ELCB7a2V5OiB0aGlzLmxldmVsTXVzaWNLZXksIGxvb3A6IHRydWUsIGhvbGRSZWZlcmVuY2U6IHRydWV9KTtcblxuICAgICAgICAvLyB0aGlzLmVtaXR0ZXIuZmlyZUV2ZW50KEdhbWVFdmVudFR5cGUuUExBWV9TT1VORCwge2tleTogdGhpcy5nZXRTaG9vdEF1ZGlvS2V5KCksIGxvb3A6IGZhbHNlLCBob2xkUmVmZXJlbmNlOiBmYWxzZX0pO1xuICAgIH1cblxuICAvKipcbiAgICAgKiBAc2VlIFNjZW5lLnVwZGF0ZVNjZW5lXG4gICAgICovXG4gIHB1YmxpYyBvdmVycmlkZSB1cGRhdGVTY2VuZShkZWx0YVQ6IG51bWJlcik6IHZvaWQge1xuICAgIHdoaWxlICh0aGlzLnJlY2VpdmVyLmhhc05leHRFdmVudCgpKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlRXZlbnQodGhpcy5yZWNlaXZlci5nZXROZXh0RXZlbnQoKSk7XG4gICAgfVxuICAgIC8vIHRoaXMuaW52ZW50b3J5SHVkLnVwZGF0ZShkZWx0YVQpO1xuICAgIHRoaXMuaGVhbHRoYmFycy5mb3JFYWNoKGhlYWx0aGJhciA9PiBoZWFsdGhiYXIudXBkYXRlKGRlbHRhVCkpO1xuICAgIC8vIHRoaXMucGF1c2Uuc2V0Q2VudGVyKHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuICAgIC8vIHRoaXMucGF1c2VNZW51LnVwZGF0ZShkZWx0YVQpO1xuICAgIC8vIHRoaXMucGF1c2UudXBkYXRlKGRlbHRhVCk7XG5cbiAgICBpZiAoSW5wdXQuaXNLZXlKdXN0UHJlc3NlZChcImVzY2FwZVwiKSl7XG4gICAgXG5cbiAgICAgICAgY29uc29sZS5sb2coXCJFc2NhcGUgcHJlc3NlZFwiKTtcbiAgICAgICAgbGV0IHYgPSBuZXcgR2FtZUV2ZW50KFwicGF1c2VcIiwgbnVsbCk7XG4gICAgICAgIHRoaXMuaGFuZGxlRXZlbnQodik7XG4gICAgfVxuICAgIGlmICh0aGlzLmJvc3MuaGVhbHRoIDw9IDApIHtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgIHRoaXMudW5wYXVzZUNvbXBsZXRlTGF5ZXIoKTtcblxuICAgICAgICB0aGlzLnBsYXllclswXS5mcmVlemUoKTsgLy8gRnJlZXplcyBwbGF5ZXJcbiAgICAgICAgdGhpcy5wbGF5ZXJbMF0uZGlzYWJsZVBoeXNpY3MoKTtcbiAgICAgICAgdGhpcy5wbGF5ZXJbMF0uYWlBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmVuZW1pZXMubGVuZ3RoOyBpKyspeyAvLyBGcmVlemVzIGVuZW1pZXMgXG4gICAgICAgICAgICBpZih0aGlzLmVuZW1pZXNbaV0uYmF0dGxlckFjdGl2ZSA9PSB0cnVlKXtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZW1pZXNbaV0uZnJlZXplKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmVtaWVzW2ldLmRpc2FibGVQaHlzaWNzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmVtaWVzW2ldLmFpQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICB9IFxuXG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IHBhdXNlTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiUEFVU0VcIik7XG4gICBcbiAgICBpZighcGF1c2VMYXllci5pc0hpZGRlbigpKXtcbiAgICAgICAgdGhpcy5wYXVzZUltYWdlLnBvc2l0aW9uLmNvcHkodGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKSk7IC8vIFdvcmtzIGJ1dCB3aGVuIG1vdmluZyB0aGUgc2NyZWVuIGdldHMgbW92ZWQgdXB3YXJkcy5cbiAgICB9XG5cbiAgICBpZihJbnB1dC5pc0tleVByZXNzZWQoXCJ6XCIpKXtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgIH1cbiAgICBcbiAgICBpZihJbnB1dC5pc0tleVByZXNzZWQoXCJ4XCIpKXtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMyk7XG4gICAgIH1cblxuXG4gICAgLy8gQW5vdGhlciB3YXkgdG8gcGxheSBzaG9vdCBhdWRpbyBpcyB3aGVuIHBsYXllciBwcmVzc2VkIHNwYWNlXG4gICAgLy8gIGlmKElucHV0LmlzS2V5SnVzdFByZXNzZWQoXCJzcGFjZVwiKSl7XG4gICAgLy8gICAgIGNvbnNvbGUubG9nKFwiU2hvb3QgQXVkaW8gUGxheWVkXCIpO1xuICAgIC8vICAgICB0aGlzLmVtaXR0ZXIuZmlyZUV2ZW50KEdhbWVFdmVudFR5cGUuUExBWV9TT1VORCwge2tleTogdGhpcy5nZXRTaG9vdEF1ZGlvS2V5KCksIGxvb3A6IGZhbHNlLCBob2xkUmVmZXJlbmNlOiBmYWxzZX0pO1xuICAgIC8vICB9XG4gICAgLy8gVE9ETyBJZiBpbnB1dCBpcyAyLCAzLCA0LCA1LCA2IGdvIHRvIHRob3NlIGxldmVscyBieSBjaGFuaW5nIHRoZSBzY2VuZVxuXG4gICAgaWYoSW5wdXQuaXNLZXlKdXN0UHJlc3NlZChcIjFcIikpe1xuICAgICAgICB0aGlzLnZpZXdwb3J0LmZvbGxvdyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoTGV2ZWwxU2NlbmUpO1xuICAgICB9XG4gICAgIGlmKElucHV0LmlzS2V5SnVzdFByZXNzZWQoXCIyXCIpKXtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKExldmVsMlNjZW5lKTtcbiAgICAgfVxuICAgICBpZihJbnB1dC5pc0tleUp1c3RQcmVzc2VkKFwiM1wiKSl7XG4gICAgICAgIHRoaXMudmlld3BvcnQuZm9sbG93KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgxKTtcbiAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShMZXZlbDNTY2VuZSk7XG4gICAgIH1cbiAgICAgaWYoSW5wdXQuaXNLZXlKdXN0UHJlc3NlZChcIjRcIikpe1xuICAgICAgICB0aGlzLnZpZXdwb3J0LmZvbGxvdyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoTGV2ZWw0U2NlbmUpO1xuICAgICB9XG4gICAgIGlmKElucHV0LmlzS2V5SnVzdFByZXNzZWQoXCI1XCIpKXtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKExldmVsNVNjZW5lKTtcbiAgICAgfVxuICAgICBpZihJbnB1dC5pc0tleUp1c3RQcmVzc2VkKFwiNlwiKSl7XG4gICAgICAgIHRoaXMudmlld3BvcnQuZm9sbG93KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgxKTtcbiAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShMYXN0U2NlbmUpO1xuICAgICB9XG5cbiAgICAgaWYoSW5wdXQuaXNLZXlKdXN0UHJlc3NlZChcInRcIikpe1xuICAgICAgICB0aGlzLnBsYXllclswXS5wb3NpdGlvbiA9IHRoaXMuYm9zc0xvY2F0aW9uO1xuICAgICB9XG5cbiAgICBcblxuXG5cbn1cblxuLyoqXG4gKiBIYW5kbGUgZXZlbnRzIGZyb20gdGhlIHJlc3Qgb2YgdGhlIGdhbWVcbiAqIEBwYXJhbSBldmVudCBhIGdhbWUgZXZlbnRcbiAqL1xucHVibGljIGhhbmRsZUV2ZW50KGV2ZW50OiBHYW1lRXZlbnQpOiB2b2lkIHtcbiAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgICAgY2FzZSBCYXR0bGVyRXZlbnQuQkFUVExFUl9LSUxMRUQ6IHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlQmF0dGxlcktpbGxlZChldmVudCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEJhdHRsZXJFdmVudC5CQVRUTEVSX1JFU1BBV046IHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgSXRlbUV2ZW50LklURU1fUkVRVUVTVDoge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVJdGVtUmVxdWVzdChldmVudC5kYXRhLmdldChcIm5vZGVcIiksIGV2ZW50LmRhdGEuZ2V0KFwiaW52ZW50b3J5XCIpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgUGxheWVyRXZlbnQuUExBWUVSX0tJTExFRDoge1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoR2FtZU92ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJwYXVzZVwiOiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlBhdXNlXCIpO1xuXG4gICAgICAgICAgICAvLyB0aGlzLnBhdXNlSW1hZ2Uuc2NhbGUgPSB0aGlzLnBhdXNlSW1hZ2Uuc2l6ZVdpdGhab29tO1xuXG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgxKTtcbiAgICAgICAgICAgIHRoaXMucGF1c2VJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpOyAvLyBXb3JrcyBidXQgd2hlbiBtb3ZpbmcgdGhlIHNjcmVlbiBnZXRzIG1vdmVkIHVwd2FyZHMuXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyB0aGlzLnZpZXdwb3J0LmZvbGxvdyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnBsYXllclswXS5mcmVlemUoKTsgLy8gRnJlZXplcyBwbGF5ZXJcbiAgICAgICAgICAgIHRoaXMucGxheWVyWzBdLmRpc2FibGVQaHlzaWNzKCk7XG4gICAgICAgICAgICBcblxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuZW5lbWllcy5sZW5ndGg7IGkrKyl7IC8vIEZyZWV6ZXMgZW5lbWllcyBcbiAgICAgICAgICAgICAgICBpZih0aGlzLmVuZW1pZXNbaV0uYmF0dGxlckFjdGl2ZSA9PSB0cnVlKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmVtaWVzW2ldLmZyZWV6ZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZW1pZXNbaV0uZGlzYWJsZVBoeXNpY3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmVtaWVzW2ldLmFpQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgfSBcbiAgICBcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmVuZW1pZXNbaV0uY2xlYXJUYXJnZXQoKTsgXG4gICAgICAgICAgICAgICAgLy8gVE9ETyBTdG9wIGVuZW15IGZyb20gYXR0YWNraW5nIHdoaWxlIHBhdXNlZFxuICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgdGhpcy51bnBhdXNlUGF1c2VMYXllcigpOyBcbiAgICAgICAgICAgdGhpcy5wYXVzZVByaW1hcnlMYXllcigpO1xuICAgICAgICAgICB0aGlzLnBhdXNlVUlMYXllcigpO1xuXG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJ1bnBhdXNlXCI6IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidW5wYXVzZVwiKTtcblxuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMyk7XG4gICAgICAgICAgICBsZXQgY2VudGVyID0gdGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKTtcbiAgICAgICAgICAgIC8vIHRoaXMucGF1c2VNZW51LnBvc2l0aW9uLnNldChjZW50ZXIueCwgY2VudGVyLnkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMucGxheWVyWzBdLnVuZnJlZXplKCk7XG4gICAgICAgICAgICB0aGlzLnBsYXllclswXS5lbmFibGVQaHlzaWNzKCk7XG4gICAgICAgICAgICAvLyBJbnB1dC5lbmFibGVJbnB1dCgpO1xuXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5lbmVtaWVzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmVuZW1pZXNbaV0uYmF0dGxlckFjdGl2ZSA9PSB0cnVlKXsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5lbWllc1tpXS51bmZyZWV6ZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZW1pZXNbaV0uZW5hYmxlUGh5c2ljcygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZW1pZXNbaV0uYWlBY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gdGhpcy5lbmVtaWVzW2ldLnNldFRhcmdldCh0aGlzLmJhdHRsZXJzWzBdKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5wYXVzZVBhdXNlTGF5ZXIoKTtcbiAgICAgICAgICAgIHRoaXMudW5wYXVzZVByaW1hcnlMYXllcigpO1xuICAgICAgICAgICAgdGhpcy51bnBhdXNlVUlMYXllcigpO1xuXG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IFxuICAgICAgICBjYXNlIFwibWFpbm1lbnVcIjoge1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShNYWluTWVudSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBcbiAgICAgICAgY2FzZSBcImNvbnRyb2xzXCI6IHtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbHNJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuICAgICAgICAgICAgdGhpcy5wYXVzZVBhdXNlTGF5ZXIoKTtcbiAgICAgICAgICAgIHRoaXMudW5wYXVzZUNvbnRyb2xzTGF5ZXIoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IFxuICAgICAgICBjYXNlIFwiYmFja2NvbnRyb2xzXCI6IHtcbiAgICAgICAgICAgIHRoaXMudW5wYXVzZVBhdXNlTGF5ZXIoKTtcbiAgICAgICAgICAgIHRoaXMucGF1c2VDb250cm9sc0xheWVyKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiaGVscFwiOiB7XG4gICAgICAgICAgICB0aGlzLmhlbHBJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuICAgICAgICAgICAgdGhpcy5wYXVzZVBhdXNlTGF5ZXIoKTtcbiAgICAgICAgICAgIHRoaXMudW5wYXVzZUhlbHBMYXllcigpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImhlbHBjb250cm9sc1wiOiB7XG4gICAgICAgICAgICB0aGlzLnVucGF1c2VQYXVzZUxheWVyKCk7XG4gICAgICAgICAgICB0aGlzLnBhdXNlSGVscExheWVyKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwibmV4dGx2bFwiOiB7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LmZvbGxvdyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKExldmVsMlNjZW5lKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmhhbmRsZWQgZXZlbnQgdHlwZSBcIiR7ZXZlbnQudHlwZX1cIiBjYXVnaHQgaW4gSFczU2NlbmUgZXZlbnQgaGFuZGxlcmApO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5wcm90ZWN0ZWQgcGF1c2VQYXVzZUxheWVyKCk6IHZvaWQge1xuICAgIGxldCBwYXVzZUxheWVyID0gdGhpcy5nZXRMYXllcihcIlBBVVNFXCIpO1xuICAgIHBhdXNlTGF5ZXIuc2V0UGF1c2VkKHRydWUpO1xuICAgIHBhdXNlTGF5ZXIuc2V0SGlkZGVuKHRydWUpO1xufVxuXG5wcm90ZWN0ZWQgdW5wYXVzZVBhdXNlTGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IHBhdXNlTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiUEFVU0VcIik7XG4gICAgcGF1c2VMYXllci5zZXRQYXVzZWQoZmFsc2UpO1xuICAgIHBhdXNlTGF5ZXIuc2V0SGlkZGVuKGZhbHNlKTtcbn1cblxucHJvdGVjdGVkIHBhdXNlQ29udHJvbHNMYXllcigpOiB2b2lkIHtcbiAgICBsZXQgY29udHJvbHNMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJDT05UUk9MU1wiKTtcbiAgICBjb250cm9sc0xheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICBjb250cm9sc0xheWVyLnNldEhpZGRlbih0cnVlKTtcbn1cblxucHJvdGVjdGVkIHVucGF1c2VDb250cm9sc0xheWVyKCk6IHZvaWQge1xuICAgIGxldCBjb250cm9sc0xheWVyID0gdGhpcy5nZXRMYXllcihcIkNPTlRST0xTXCIpO1xuICAgIGNvbnRyb2xzTGF5ZXIuc2V0UGF1c2VkKGZhbHNlKTtcbiAgICBjb250cm9sc0xheWVyLnNldEhpZGRlbihmYWxzZSk7XG59XG5cbnByb3RlY3RlZCBwYXVzZVByaW1hcnlMYXllcigpOiB2b2lkIHtcbiAgICBsZXQgcHJpbWFyeUxheWVyID0gdGhpcy5nZXRMYXllcihcInByaW1hcnlcIik7XG4gICAgcHJpbWFyeUxheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICBwcmltYXJ5TGF5ZXIuc2V0SGlkZGVuKHRydWUpO1xufVxuXG5wcm90ZWN0ZWQgdW5wYXVzZVByaW1hcnlMYXllcigpOiB2b2lkIHtcbiAgICBsZXQgcHJpbWFyeUxheWVyID0gdGhpcy5nZXRMYXllcihcInByaW1hcnlcIik7XG4gICAgcHJpbWFyeUxheWVyLnNldFBhdXNlZChmYWxzZSk7XG4gICAgcHJpbWFyeUxheWVyLnNldEhpZGRlbihmYWxzZSk7XG59XG5cbnByb3RlY3RlZCBwYXVzZVVJTGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IHVpTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiVUlcIik7XG4gICAgdWlMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgdWlMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG59XG5cbnByb3RlY3RlZCB1bnBhdXNlVUlMYXllcigpOiB2b2lkIHtcbiAgICBsZXQgdWlMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJVSVwiKTtcbiAgICB1aUxheWVyLnNldFBhdXNlZChmYWxzZSk7XG4gICAgdWlMYXllci5zZXRIaWRkZW4oZmFsc2UpO1xufVxuXG5wcm90ZWN0ZWQgcGF1c2VIZWxwTGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IGhlbHBMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJIRUxQXCIpO1xuICAgIGhlbHBMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgaGVscExheWVyLnNldEhpZGRlbih0cnVlKTtcbn1cblxucHJvdGVjdGVkIHVucGF1c2VIZWxwTGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IGhlbHBMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJIRUxQXCIpO1xuICAgIGhlbHBMYXllci5zZXRQYXVzZWQoZmFsc2UpO1xuICAgIGhlbHBMYXllci5zZXRIaWRkZW4oZmFsc2UpO1xufVxuXG5wcm90ZWN0ZWQgcGF1c2VDb21wbGV0ZUxheWVyKCk6IHZvaWQge1xuICAgIGxldCBjb21wbGV0ZUxheWVyID0gdGhpcy5nZXRMYXllcihcIkNPTVBMRVRFXCIpO1xuICAgIGNvbXBsZXRlTGF5ZXIuc2V0UGF1c2VkKHRydWUpO1xuICAgIGNvbXBsZXRlTGF5ZXIuc2V0SGlkZGVuKHRydWUpO1xufVxuXG5wcm90ZWN0ZWQgdW5wYXVzZUNvbXBsZXRlTGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IGNvbXBsZXRlTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiQ09NUExFVEVcIik7XG4gICAgY29tcGxldGVMYXllci5zZXRQYXVzZWQoZmFsc2UpO1xuICAgIGNvbXBsZXRlTGF5ZXIuc2V0SGlkZGVuKGZhbHNlKTtcbn1cblxuXG5wcm90ZWN0ZWQgaGFuZGxlSXRlbVJlcXVlc3Qobm9kZTogR2FtZU5vZGUsIGludmVudG9yeTogSW52ZW50b3J5KTogdm9pZCB7XG4gICAgbGV0IGl0ZW1zOiBJdGVtW10gPSBuZXcgQXJyYXk8SXRlbT4oLi4udGhpcy5oZWFsdGhwYWNrcywgLi4udGhpcy5sYXNlcmd1bnMpLmZpbHRlcigoaXRlbTogSXRlbSkgPT4ge1xuICAgICAgICByZXR1cm4gaXRlbS5pbnZlbnRvcnkgPT09IG51bGwgJiYgaXRlbS5wb3NpdGlvbi5kaXN0YW5jZVRvKG5vZGUucG9zaXRpb24pIDw9IDEwMDtcbiAgICB9KTtcblxuICAgIGlmIChpdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGludmVudG9yeS5hZGQoaXRlbXMucmVkdWNlKENsb3Nlc3RQb3NpdGlvbmVkKG5vZGUpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhhbmRsZXMgYW4gTlBDIGJlaW5nIGtpbGxlZCBieSB1bnJlZ2lzdGVyaW5nIHRoZSBOUEMgZnJvbSB0aGUgc2NlbmVzIHN1YnN5c3RlbXNcbiAqIEBwYXJhbSBldmVudCBhbiBOUEMta2lsbGVkIGV2ZW50XG4gKi9cbnByb3RlY3RlZCBoYW5kbGVCYXR0bGVyS2lsbGVkKGV2ZW50OiBHYW1lRXZlbnQpOiB2b2lkIHtcbiAgICBsZXQgaWQ6IG51bWJlciA9IGV2ZW50LmRhdGEuZ2V0KFwiaWRcIik7XG4gICAgbGV0IGJhdHRsZXIgPSB0aGlzLmJhdHRsZXJzLmZpbmQoYiA9PiBiLmlkID09PSBpZCk7XG5cbiAgICBpZiAoYmF0dGxlcikge1xuICAgICAgICBiYXR0bGVyLmJhdHRsZXJBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5oZWFsdGhiYXJzLmdldChpZCkudmlzaWJsZSA9IGZhbHNlO1xuICAgIH1cbiAgICBcbn1cblxuLyoqIEluaXRpYWxpemVzIHRoZSBsYXllcnMgaW4gdGhlIHNjZW5lICovXG5wcm90ZWN0ZWQgaW5pdExheWVycygpOiB2b2lkIHtcblxuICAgIHRoaXMuYWRkTGF5ZXIoRmluYWxQcm9qZWN0U2NlbmVMYXllcnMuVUkpO1xuICAgIHRoaXMuYWRkTGF5ZXIoRmluYWxQcm9qZWN0U2NlbmVMYXllcnMuUEFVU0UsIDEwKTtcbiAgICB0aGlzLmFkZExheWVyKEZpbmFsUHJvamVjdFNjZW5lTGF5ZXJzLkhFTFAsIDExKTtcbiAgICB0aGlzLmFkZExheWVyKEZpbmFsUHJvamVjdFNjZW5lTGF5ZXJzLkNPTlRST0xTLCAxMSk7XG4gICAgdGhpcy5hZGRMYXllcihGaW5hbFByb2plY3RTY2VuZUxheWVycy5DT01QTEVURSwgMTIpO1xuXG4gICAgdGhpcy5hZGRMYXllcihcInByaW1hcnlcIiwgNSk7XG59XG5cblxuXG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIHBsYXllciBpbiB0aGUgc2NlbmVcbiAqL1xucHJvdGVjdGVkIGluaXRpYWxpemVQbGF5ZXIoKTogdm9pZCB7XG4gICAgY29uc3QgY2VudGVyID0gdGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKTtcbiAgICBsZXQgcGxheWVyID0gdGhpcy5hZGQuYW5pbWF0ZWRTcHJpdGUoUGxheWVyQWN0b3IsIFwicGxheWVyMVwiLCBcInByaW1hcnlcIik7XG4gICAgcGxheWVyLnBvc2l0aW9uLnNldChjZW50ZXIueC0zMDAsIGNlbnRlci55KzMwMCk7XG5cbiAgICBwbGF5ZXIuYmF0dGxlR3JvdXAgPSAyO1xuICAgIFxuXG4gICAgcGxheWVyLmhlYWx0aCA9IDEwO1xuICAgIHBsYXllci5tYXhIZWFsdGggPSAxMDtcbiAgICBwbGF5ZXIuc2NhbGUgPSBuZXcgVmVjMigwLjQsIDAuNCk7IC8vIFNjYWxlcyBwbGF5ZXIgXG5cbiAgICBwbGF5ZXIuaW52ZW50b3J5Lm9uQ2hhbmdlID0gSXRlbUV2ZW50LklOVkVOVE9SWV9DSEFOR0VEXG4gICAgLy8gdGhpcy5pbnZlbnRvcnlIdWQgPSBuZXcgSW52ZW50b3J5SFVEKHRoaXMsIHBsYXllci5pbnZlbnRvcnksIFwiaW52ZW50b3J5U2xvdFwiLCB7XG4gICAgLy8gICAgIHN0YXJ0OiBuZXcgVmVjMigyMzIsIDI0KSxcbiAgICAvLyAgICAgc2xvdExheWVyOiBcInNsb3RzXCIsXG4gICAgLy8gICAgIHBhZGRpbmc6IDgsXG4gICAgLy8gICAgIGl0ZW1MYXllcjogXCJpdGVtc1wiXG4gICAgLy8gfSk7XG5cbiAgICAvLyBHaXZlIHRoZSBwbGF5ZXIgcGh5c2ljc1xuICAgIHBsYXllci5hZGRQaHlzaWNzKG5ldyBBQUJCKFZlYzIuWkVSTywgbmV3IFZlYzIoMTYsIDE2KSkpO1xuXG4gICAgLy8gR2l2ZSB0aGUgcGxheWVyIGEgaGVhbHRoYmFyXG4gICAgbGV0IGhlYWx0aGJhciA9IG5ldyBIZWFsdGhiYXJIVUQodGhpcywgcGxheWVyLCBcInByaW1hcnlcIiwge3NpemU6IHBsYXllci5zaXplLmNsb25lKCkuc2NhbGVkKDEsIDEvNCksIG9mZnNldDogcGxheWVyLnNpemUuY2xvbmUoKS5zY2FsZWQoMCwgLTEvMyl9KTtcbiAgICB0aGlzLmhlYWx0aGJhcnMuc2V0KHBsYXllci5pZCwgaGVhbHRoYmFyKTtcblxuICAgIC8vIEdpdmUgdGhlIHBsYXllciBQbGF5ZXJBSVxuICAgIHBsYXllci5hZGRBSShQbGF5ZXJBSSk7XG5cbiAgICAvLyBTdGFydCB0aGUgcGxheWVyIGluIHRoZSBcIklETEVcIiBhbmltYXRpb25cbiAgICBwbGF5ZXIuYW5pbWF0aW9uLnBsYXkoXCJJRExFXCIpO1xuICAgIFxuICAgIHRoaXMuYmF0dGxlcnMucHVzaChwbGF5ZXIpO1xuICAgIHRoaXMucGxheWVyLnB1c2gocGxheWVyKTtcbiAgICB0aGlzLnZpZXdwb3J0LmZvbGxvdyhwbGF5ZXIpO1xuICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDMpO1xuICAgIFxufVxuLyoqXG4gKiBJbml0aWFsaXplIHRoZSBOUENzIFxuICovXG5wcm90ZWN0ZWQgaW5pdGlhbGl6ZU5QQ3MoKTogdm9pZCB7XG5cbiBcbiAgICAvLyBHZXQgdGhlIG9iamVjdCBkYXRhIGZvciB0aGUgYmx1ZSBlbmVtaWVzXG4gICAgbGV0IGJsdWUgPSB0aGlzLmxvYWQuZ2V0T2JqZWN0KFwiYmx1ZVwiKTtcblxuICAgIC8vIEluaXRpYWxpemUgdGhlIGJsdWUgZW5lbWllc1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmx1ZS5lbmVtaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBucGMgPSB0aGlzLmFkZC5hbmltYXRlZFNwcml0ZShOUENBY3RvciwgXCJCbHVlRW5lbXlcIiwgXCJwcmltYXJ5XCIpO1xuICAgICAgICBucGMucG9zaXRpb24uc2V0KGJsdWUuZW5lbWllc1tpXVswXSwgYmx1ZS5lbmVtaWVzW2ldWzFdKTtcbiAgICAgICAgbnBjLmFkZFBoeXNpY3MobmV3IEFBQkIoVmVjMi5aRVJPLCBuZXcgVmVjMig4LCA4KSksIG51bGwsIGZhbHNlKTtcblxuICAgICAgICAvLyBHaXZlIHRoZSBOUENTIHRoZWlyIGhlYWx0aGJhcnNcbiAgICAgICAgbGV0IGhlYWx0aGJhciA9IG5ldyBIZWFsdGhiYXJIVUQodGhpcywgbnBjLCBcInByaW1hcnlcIiwge3NpemU6IG5wYy5zaXplLmNsb25lKCkuc2NhbGVkKDEvMiwgMS80KSwgb2Zmc2V0OiBucGMuc2l6ZS5jbG9uZSgpLnNjYWxlZCgwLCAtMS8zKX0pO1xuICAgICAgICB0aGlzLmhlYWx0aGJhcnMuc2V0KG5wYy5pZCwgaGVhbHRoYmFyKTtcblxuICAgICAgICBucGMuYmF0dGxlR3JvdXAgPSAxXG4gICAgICAgIG5wYy5zcGVlZCA9IDEwO1xuICAgICAgICBucGMuaGVhbHRoID0gMTtcbiAgICAgICAgbnBjLm1heEhlYWx0aCA9IDE7XG4gICAgICAgIG5wYy5uYXZrZXkgPSBcIm5hdm1lc2hcIjtcbiAgICAgICAgbnBjLnNjYWxlID0gbmV3IFZlYzIoMC40LDAuNCk7XG5cbiAgICAgICAgLy8gR2l2ZSB0aGUgTlBDcyB0aGVpciBBSVxuICAgICAgICBucGMuYWRkQUkoR3VhcmRCZWhhdmlvciwge3RhcmdldDogdGhpcy5iYXR0bGVyc1swXSwgcmFuZ2U6IDB9KTtcblxuICAgICAgICAvLyBQbGF5IHRoZSBOUENzIFwiSURMRVwiIGFuaW1hdGlvbiBcbiAgICAgICAgbnBjLmFuaW1hdGlvbi5wbGF5KFwiSURMRVwiKTtcblxuICAgICAgICB0aGlzLmJhdHRsZXJzLnB1c2gobnBjKTtcbiAgICAgICAgdGhpcy5lbmVtaWVzLnB1c2gobnBjKTtcbiAgICB9XG5cbiAgICBsZXQgbnBjID0gdGhpcy5hZGQuYW5pbWF0ZWRTcHJpdGUoTlBDQWN0b3IsIFwiQmx1ZUVuZW15XCIsIFwicHJpbWFyeVwiKTtcbiAgICAgICAgdGhpcy5ib3NzID0gbnBjO1xuICAgICAgICBucGMucG9zaXRpb24uc2V0KDY1MCwyNTApO1xuICAgICAgICB0aGlzLmJvc3NMb2NhdGlvbiA9IG5ldyBWZWMyKDY1MCwgMjUwKTtcblxuICAgICAgICBucGMuYWRkUGh5c2ljcyhuZXcgQUFCQihWZWMyLlpFUk8sIG5ldyBWZWMyKDMyLCAzMikpLCBudWxsLCBmYWxzZSk7XG5cbiAgICAgICAgLy8gR2l2ZSB0aGUgTlBDUyB0aGVpciBoZWFsdGhiYXJzXG4gICAgICAgIGxldCBoZWFsdGhiYXIgPSBuZXcgSGVhbHRoYmFySFVEKHRoaXMsIG5wYywgXCJwcmltYXJ5XCIsIHtzaXplOiBucGMuc2l6ZS5jbG9uZSgpLnNjYWxlZCgyLCAxLzQpLCBvZmZzZXQ6IG5wYy5zaXplLmNsb25lKCkuc2NhbGVkKDAsIC0xLzIpfSk7XG4gICAgICAgIHRoaXMuaGVhbHRoYmFycy5zZXQobnBjLmlkLCBoZWFsdGhiYXIpO1xuXG4gICAgICAgIG5wYy5iYXR0bGVHcm91cCA9IDFcbiAgICAgICAgbnBjLnNwZWVkID0gMTA7XG4gICAgICAgIG5wYy5oZWFsdGggPSAxMDtcbiAgICAgICAgbnBjLm1heEhlYWx0aCA9IDEwO1xuICAgICAgICBucGMubmF2a2V5ID0gXCJuYXZtZXNoXCI7XG4gICAgICAgIG5wYy5zY2FsZSA9IG5ldyBWZWMyKDEsMSk7XG5cblxuICAgICAgICAvLyBHaXZlIHRoZSBOUENzIHRoZWlyIEFJXG4gICAgICAgIG5wYy5hZGRBSShHdWFyZEJlaGF2aW9yLCB7dGFyZ2V0OiB0aGlzLmJhdHRsZXJzWzBdLCByYW5nZTogMH0pO1xuXG4gICAgICAgIC8vIFBsYXkgdGhlIE5QQ3MgXCJJRExFXCIgYW5pbWF0aW9uIFxuICAgICAgICBucGMuYW5pbWF0aW9uLnBsYXkoXCJJRExFXCIpO1xuXG4gICAgICAgIHRoaXMuYmF0dGxlcnMucHVzaChucGMpO1xuICAgICAgICB0aGlzLmVuZW1pZXMucHVzaChucGMpO1xuXG4gICBcblxufVxuXG4vKipcbiAqIEluaXRpYWxpemUgdGhlIGl0ZW1zIGluIHRoZSBzY2VuZSAoaGVhbHRocGFja3MgYW5kIGxhc2VyIGd1bnMpXG4gKi9cbnByb3RlY3RlZCBpbml0aWFsaXplSXRlbXMoKTogdm9pZCB7XG4gICAgbGV0IGxhc2VyZ3VucyA9IHRoaXMubG9hZC5nZXRPYmplY3QoXCJsYXNlcmd1bnNcIik7XG4gICAgdGhpcy5sYXNlcmd1bnMgPSBuZXcgQXJyYXk8TGFzZXJHdW4+KGxhc2VyZ3Vucy5pdGVtcy5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGFzZXJndW5zLml0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBzcHJpdGUgPSB0aGlzLmFkZC5zcHJpdGUoXCJsYXNlckd1blwiLCBcInByaW1hcnlcIik7XG4gICAgICAgIGxldCBsaW5lID0gPExpbmU+dGhpcy5hZGQuZ3JhcGhpYyhHcmFwaGljVHlwZS5MSU5FLCBcInByaW1hcnlcIiwge3N0YXJ0OiBWZWMyLlpFUk8sIGVuZDogVmVjMi5aRVJPfSk7XG4gICAgICAgIHRoaXMubGFzZXJndW5zW2ldID0gTGFzZXJHdW4uY3JlYXRlKHNwcml0ZSwgbGluZSk7XG4gICAgICAgIHRoaXMubGFzZXJndW5zW2ldLnBvc2l0aW9uLnNldChsYXNlcmd1bnMuaXRlbXNbaV1bMF0sIGxhc2VyZ3Vucy5pdGVtc1tpXVsxXSk7XG4gICAgfVxuXG4gICAgbGV0IGhlYWx0aHBhY2tzID0gdGhpcy5sb2FkLmdldE9iamVjdChcImhlYWx0aHBhY2tzXCIpO1xuICAgIHRoaXMuaGVhbHRocGFja3MgPSBuZXcgQXJyYXk8SGVhbHRocGFjaz4oaGVhbHRocGFja3MuaXRlbXMubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhlYWx0aHBhY2tzLml0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBzcHJpdGUgPSB0aGlzLmFkZC5zcHJpdGUoXCJoZWFsdGhwYWNrXCIsIFwicHJpbWFyeVwiKTtcbiAgICAgICAgdGhpcy5oZWFsdGhwYWNrc1tpXSA9IG5ldyBIZWFsdGhwYWNrKHNwcml0ZSk7XG4gICAgICAgIHRoaXMuaGVhbHRocGFja3NbaV0ucG9zaXRpb24uc2V0KGhlYWx0aHBhY2tzLml0ZW1zW2ldWzBdLCBoZWFsdGhwYWNrcy5pdGVtc1tpXVsxXSk7XG4gICAgfVxufVxuLyoqXG4gKiBJbml0aWFsaXplcyB0aGUgbmF2bWVzaCBncmFwaCB1c2VkIGJ5IHRoZSBOUENzIGluIHRoZSBIVzNTY2VuZS4gVGhpcyBtZXRob2QgaXMgYSBsaXR0bGUgYnVnZ3ksIGFuZFxuICogYW5kIGl0IHNraXBzIG92ZXIgc29tZSBvZiB0aGUgcG9zaXRpb25zIG9uIHRoZSB0aWxlbWFwLiBJZiB5b3UgY2FuIGZpeCBteSBuYXZtZXNoIGdlbmVyYXRpb24gYWxnb3JpdGhtLFxuICogZ28gZm9yIGl0LlxuICogXG4gKiAtIFBldGVyXG4gKi9cbnByb3RlY3RlZCBpbml0aWFsaXplTmF2bWVzaCgpOiB2b2lkIHtcbiAgICAvLyBDcmVhdGUgdGhlIGdyYXBoXG4gICAgdGhpcy5ncmFwaCA9IG5ldyBQb3NpdGlvbkdyYXBoKCk7XG5cbiAgICBsZXQgZGltOiBWZWMyID0gdGhpcy53YWxscy5nZXREaW1lbnNpb25zKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkaW0ueTsgaSsrKSB7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZGltLng7IGorKykge1xuICAgICAgICAgICAgbGV0IHRpbGU6IEFBQkIgPSB0aGlzLndhbGxzLmdldFRpbGVDb2xsaWRlcihqLCBpKTtcbiAgICAgICAgICAgIHRoaXMuZ3JhcGguYWRkUG9zaXRpb25lZE5vZGUodGlsZS5jZW50ZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHJjOiBWZWMyO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ncmFwaC5udW1WZXJ0aWNlczsgaSsrKSB7XG4gICAgICAgIHJjID0gdGhpcy53YWxscy5nZXRUaWxlQ29sUm93KGkpO1xuICAgICAgICBpZiAoIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShyYy54LCByYy55KSAmJlxuICAgICAgICAgICAgIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShNYXRoVXRpbHMuY2xhbXAocmMueCAtIDEsIDAsIGRpbS54IC0gMSksIHJjLnkpICYmXG4gICAgICAgICAgICAhdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKE1hdGhVdGlscy5jbGFtcChyYy54ICsgMSwgMCwgZGltLnggLSAxKSwgcmMueSkgJiZcbiAgICAgICAgICAgICF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUocmMueCwgTWF0aFV0aWxzLmNsYW1wKHJjLnkgLSAxLCAwLCBkaW0ueSAtIDEpKSAmJlxuICAgICAgICAgICAgIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShyYy54LCBNYXRoVXRpbHMuY2xhbXAocmMueSArIDEsIDAsIGRpbS55IC0gMSkpICYmXG4gICAgICAgICAgICAhdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKE1hdGhVdGlscy5jbGFtcChyYy54ICsgMSwgMCwgZGltLnggLSAxKSwgTWF0aFV0aWxzLmNsYW1wKHJjLnkgKyAxLCAwLCBkaW0ueSAtIDEpKSAmJlxuICAgICAgICAgICAgIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShNYXRoVXRpbHMuY2xhbXAocmMueCAtIDEsIDAsIGRpbS54IC0gMSksIE1hdGhVdGlscy5jbGFtcChyYy55ICsgMSwgMCwgZGltLnkgLSAxKSkgJiZcbiAgICAgICAgICAgICF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUoTWF0aFV0aWxzLmNsYW1wKHJjLnggKyAxLCAwLCBkaW0ueCAtIDEpLCBNYXRoVXRpbHMuY2xhbXAocmMueSAtIDEsIDAsIGRpbS55IC0gMSkpICYmXG4gICAgICAgICAgICAhdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKE1hdGhVdGlscy5jbGFtcChyYy54IC0gMSwgMCwgZGltLnggLSAxKSwgTWF0aFV0aWxzLmNsYW1wKHJjLnkgLSAxLCAwLCBkaW0ueSAtIDEpKVxuXG4gICAgICAgICkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGVkZ2UgdG8gdGhlIGxlZnRcbiAgICAgICAgICAgIHJjID0gdGhpcy53YWxscy5nZXRUaWxlQ29sUm93KGkgKyAxKTtcbiAgICAgICAgICAgIGlmICgoaSArIDEpICUgZGltLnggIT09IDAgJiYgIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShyYy54LCByYy55KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ3JhcGguYWRkRWRnZShpLCBpICsgMSk7XG4gICAgICAgICAgICAgICAgLy8gdGhpcy5hZGQuZ3JhcGhpYyhHcmFwaGljVHlwZS5MSU5FLCBcImdyYXBoXCIsIHtzdGFydDogdGhpcy5ncmFwaC5nZXROb2RlUG9zaXRpb24oaSksIGVuZDogdGhpcy5ncmFwaC5nZXROb2RlUG9zaXRpb24oaSArIDEpfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIENyZWF0ZSBlZGdlIGJlbG93XG4gICAgICAgICAgICByYyA9IHRoaXMud2FsbHMuZ2V0VGlsZUNvbFJvdyhpICsgZGltLngpO1xuICAgICAgICAgICAgaWYgKGkgKyBkaW0ueCA8IHRoaXMuZ3JhcGgubnVtVmVydGljZXMgJiYgIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShyYy54LCByYy55KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ3JhcGguYWRkRWRnZShpLCBpICsgZGltLngpO1xuICAgICAgICAgICAgICAgIC8vIHRoaXMuYWRkLmdyYXBoaWMoR3JhcGhpY1R5cGUuTElORSwgXCJncmFwaFwiLCB7c3RhcnQ6IHRoaXMuZ3JhcGguZ2V0Tm9kZVBvc2l0aW9uKGkpLCBlbmQ6IHRoaXMuZ3JhcGguZ2V0Tm9kZVBvc2l0aW9uKGkgKyBkaW0ueCl9KVxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNldCB0aGlzIGdyYXBoIGFzIGEgbmF2aWdhYmxlIGVudGl0eVxuICAgIGxldCBuYXZtZXNoID0gbmV3IE5hdm1lc2godGhpcy5ncmFwaCk7XG4gICAgLy8gQWRkIGRpZmZlcmVudCBzdHJhdGVnaWVzIHRvIHVzZSBmb3IgdGhpcyBuYXZtZXNoXG4gICAgbmF2bWVzaC5yZWdpc3RlclN0cmF0ZWd5KFwiZGlyZWN0XCIsIG5ldyBEaXJlY3RTdHJhdGVneShuYXZtZXNoKSk7XG4gICAgbmF2bWVzaC5yZWdpc3RlclN0cmF0ZWd5KFwiYXN0YXJcIiwgbmV3IEFzdGFyU3RyYXRlZ3kobmF2bWVzaCkpO1xuICAgIC8vIFNlbGVjdCBBKiBhcyBvdXIgbmF2aWdhdGlvbiBzdHJhdGVneVxuICAgIG5hdm1lc2guc2V0U3RyYXRlZ3koXCJhc3RhclwiKTtcblxuICAgIC8vIEFkZCB0aGlzIG5hdm1lc2ggdG8gdGhlIG5hdmlnYXRpb24gbWFuYWdlclxuICAgIHRoaXMubmF2TWFuYWdlci5hZGROYXZpZ2FibGVFbnRpdHkoXCJuYXZtZXNoXCIsIG5hdm1lc2gpO1xufVxuXG5wdWJsaWMgdW5sb2FkU2NlbmUoKTogdm9pZCB7XG4gICAgLy8gVGhlIHNjZW5lIGlzIGJlaW5nIGRlc3Ryb3llZCwgc28gd2UgY2FuIHN0b3AgcGxheWluZyB0aGUgc29uZ1xuICAgIHRoaXMuZW1pdHRlci5maXJlRXZlbnQoR2FtZUV2ZW50VHlwZS5TVE9QX1NPVU5ELCB7a2V5OiB0aGlzLmxldmVsTXVzaWNLZXl9KTtcbn1cblxuXG4gICAgcHVibGljIGFic3RyYWN0IGdldEJhdHRsZXJzKCk6IEJhdHRsZXJbXTtcblxuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRXYWxscygpOiBPcnRob2dvbmFsVGlsZW1hcDtcblxuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRIZWFsdGhwYWNrcygpOiBIZWFsdGhwYWNrW107XG5cbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0TGFzZXJHdW5zKCk6IExhc2VyR3VuW107XG5cbiAgICBwdWJsaWMgYWJzdHJhY3QgaXNUYXJnZXRWaXNpYmxlKHBvc2l0aW9uOiBWZWMyLCB0YXJnZXQ6IFZlYzIpOiBib29sZWFuO1xuXG4gICAgcHVibGljIGdldFNob290QXVkaW9LZXkoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hvb3RBdWRpb0tleTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0SGl0QXVkaW9LZXkoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGl0QXVkaW9LZXk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldER5aW5nQXVkaW9LZXkoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHlpbmdBdWRpb0tleTtcbiAgICB9XG5cbiAgICBcbn0iLCJpbXBvcnQgVmVjMiBmcm9tIFwiLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL1ZlYzJcIjtcbmltcG9ydCBHYW1lRXZlbnQgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL0V2ZW50cy9HYW1lRXZlbnRcIjtcbmltcG9ydCBJbnB1dCBmcm9tIFwiLi4vLi4vV29sZmllMkQvSW5wdXQvSW5wdXRcIjtcbmltcG9ydCBMYWJlbCBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvVUlFbGVtZW50cy9MYWJlbFwiO1xuaW1wb3J0IHsgVUlFbGVtZW50VHlwZSB9IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9VSUVsZW1lbnRzL1VJRWxlbWVudFR5cGVzXCI7XG5pbXBvcnQgU2NlbmUgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1NjZW5lL1NjZW5lXCI7XG5pbXBvcnQgQ29sb3IgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1V0aWxzL0NvbG9yXCI7XG5pbXBvcnQgTWFpbk1lbnUgZnJvbSBcIi4vTWFpbk1lbnVcIjtcbmltcG9ydCB0ZXN0TWVudSBmcm9tIFwiLi9NYWluTWVudVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lT3ZlciBleHRlbmRzIFNjZW5lIHtcblxuXG4gICAgcHVibGljIGxvYWRTY2VuZSgpe1xuICAgICAgIFxuICAgIH1cblxuXG4gICAgc3RhcnRTY2VuZSgpIHtcbiAgICAgICAgY29uc3QgY2VudGVyID0gdGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKTtcblxuICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgxKTtcblxuICAgICAgICB0aGlzLmFkZFVJTGF5ZXIoXCJwcmltYXJ5XCIpO1xuXG4gICAgICAgIGNvbnN0IGdhbWVPdmVyID0gPExhYmVsPnRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgXCJwcmltYXJ5XCIsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLngsIGNlbnRlci55KSwgdGV4dDogXCJHYW1lIE92ZXJcIn0pO1xuICAgICAgICBnYW1lT3Zlci5zaXplLnNldCgxMzIwLCAyMDAwKTtcbiAgICAgICAgZ2FtZU92ZXIuYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICBnYW1lT3Zlci5ib3JkZXJDb2xvciA9IENvbG9yLldISVRFO1xuICAgICAgICBnYW1lT3Zlci5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgZ2FtZU92ZXIub25DbGlja0V2ZW50SWQgPSBcIm1haW5tZW51XCI7XG5cbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJtYWlubWVudVwiKVxuICAgIH1cblxuXG4gICAgcHVibGljIHVwZGF0ZVNjZW5lKCl7XG4gICAgICAgIHdoaWxlKHRoaXMucmVjZWl2ZXIuaGFzTmV4dEV2ZW50KCkpe1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFdmVudCh0aGlzLnJlY2VpdmVyLmdldE5leHRFdmVudCgpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwdWJsaWMgaGFuZGxlRXZlbnQoZXZlbnQ6IEdhbWVFdmVudCk6IHZvaWQge1xuICAgICAgICBzd2l0Y2goZXZlbnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcIm1haW5tZW51XCI6IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKE1haW5NZW51KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIFxufSIsImltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IFNjZW5lIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9TY2VuZS9TY2VuZVwiO1xuaW1wb3J0IE9ydGhvZ29uYWxUaWxlbWFwIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9UaWxlbWFwcy9PcnRob2dvbmFsVGlsZW1hcFwiO1xuaW1wb3J0IExhc2VyR3VuIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9JdGVtU3lzdGVtL0l0ZW1zL0xhc2VyR3VuXCI7XG5pbXBvcnQgSGVhbHRocGFjayBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvSXRlbVN5c3RlbS9JdGVtcy9IZWFsdGhwYWNrXCI7XG5pbXBvcnQgQmF0dGxlciBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvQmF0dGxlU3lzdGVtL0JhdHRsZXJcIjtcblxuXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBIVzRTY2VuZSBleHRlbmRzIFNjZW5lIHtcblxuIHByb3RlY3RlZCBzaG9vdEF1ZGlvS2V5OiBzdHJpbmc7XG5cbiBwcm90ZWN0ZWQgaGl0QXVkaW9LZXk6IHN0cmluZztcblxuIHByb3RlY3RlZCBkeWluZ0F1ZGlvS2V5OiBzdHJpbmc7XG5cbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0QmF0dGxlcnMoKTogQmF0dGxlcltdO1xuXG4gICAgcHVibGljIGFic3RyYWN0IGdldFdhbGxzKCk6IE9ydGhvZ29uYWxUaWxlbWFwO1xuXG4gICAgcHVibGljIGFic3RyYWN0IGdldEhlYWx0aHBhY2tzKCk6IEhlYWx0aHBhY2tbXTtcblxuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRMYXNlckd1bnMoKTogTGFzZXJHdW5bXTtcblxuICAgIHB1YmxpYyBhYnN0cmFjdCBpc1RhcmdldFZpc2libGUocG9zaXRpb246IFZlYzIsIHRhcmdldDogVmVjMik6IGJvb2xlYW47XG4gICAgXG5cbiAgICBwdWJsaWMgZ2V0U2hvb3RBdWRpb0tleSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5zaG9vdEF1ZGlvS2V5O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRIaXRBdWRpb0tleSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5oaXRBdWRpb0tleTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0RHlpbmdBdWRpb0tleSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5keWluZ0F1ZGlvS2V5O1xuICAgIH1cbn0iLCJpbXBvcnQgUG9zaXRpb25HcmFwaCBmcm9tIFwiLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL0dyYXBocy9Qb3NpdGlvbkdyYXBoXCI7XG5pbXBvcnQgQWN0b3IgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9JbnRlcmZhY2VzL0FjdG9yXCI7XG5pbXBvcnQgQUFCQiBmcm9tIFwiLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL1NoYXBlcy9BQUJCXCI7XG5pbXBvcnQgU2hhcGUgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9TaGFwZXMvU2hhcGVcIjtcbmltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IEdhbWVFdmVudCBmcm9tIFwiLi4vLi4vV29sZmllMkQvRXZlbnRzL0dhbWVFdmVudFwiO1xuaW1wb3J0IElucHV0IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9JbnB1dC9JbnB1dFwiO1xuaW1wb3J0IEdhbWVOb2RlIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9HYW1lTm9kZVwiO1xuaW1wb3J0IHsgR3JhcGhpY1R5cGUgfSBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvR3JhcGhpY3MvR3JhcGhpY1R5cGVzXCI7XG5pbXBvcnQgTGluZSBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvR3JhcGhpY3MvTGluZVwiO1xuaW1wb3J0IFNwcml0ZSBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvU3ByaXRlcy9TcHJpdGVcIjtcbmltcG9ydCBPcnRob2dvbmFsVGlsZW1hcCBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvVGlsZW1hcHMvT3J0aG9nb25hbFRpbGVtYXBcIjtcbmltcG9ydCBVSUVsZW1lbnQgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL05vZGVzL1VJRWxlbWVudFwiO1xuaW1wb3J0IEJ1dHRvbiBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvVUlFbGVtZW50cy9CdXR0b25cIjtcbmltcG9ydCB7IFVJRWxlbWVudFR5cGUgfSBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvVUlFbGVtZW50cy9VSUVsZW1lbnRUeXBlc1wiO1xuaW1wb3J0IE5hdm1lc2ggZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1BhdGhmaW5kaW5nL05hdm1lc2hcIjtcbmltcG9ydCBEaXJlY3RTdHJhdGVneSBmcm9tIFwiLi4vLi4vV29sZmllMkQvUGF0aGZpbmRpbmcvU3RyYXRlZ2llcy9EaXJlY3RTdHJhdGVneVwiO1xuaW1wb3J0IFJlbmRlcmluZ01hbmFnZXIgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1JlbmRlcmluZy9SZW5kZXJpbmdNYW5hZ2VyXCI7XG5pbXBvcnQgU2NlbmVNYW5hZ2VyIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9TY2VuZS9TY2VuZU1hbmFnZXJcIjtcbmltcG9ydCBWaWV3cG9ydCBmcm9tIFwiLi4vLi4vV29sZmllMkQvU2NlbmVHcmFwaC9WaWV3cG9ydFwiO1xuaW1wb3J0IFRpbWVyIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9UaW1pbmcvVGltZXJcIjtcbmltcG9ydCBDb2xvciBmcm9tIFwiLi4vLi4vV29sZmllMkQvVXRpbHMvQ29sb3JcIjtcbmltcG9ydCBNYXRoVXRpbHMgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1V0aWxzL01hdGhVdGlsc1wiO1xuaW1wb3J0IE5QQ0FjdG9yIGZyb20gXCIuLi9BY3RvcnMvTlBDQWN0b3JcIjtcbmltcG9ydCBQbGF5ZXJBY3RvciBmcm9tIFwiLi4vQWN0b3JzL1BsYXllckFjdG9yXCI7XG5pbXBvcnQgR3VhcmRCZWhhdmlvciBmcm9tIFwiLi4vQUkvTlBDL05QQ0JlaGF2aW9yL0dhdXJkQmVoYXZpb3JcIjtcbmltcG9ydCBIZWFsZXJCZWhhdmlvciBmcm9tIFwiLi4vQUkvTlBDL05QQ0JlaGF2aW9yL0hlYWxlckJlaGF2aW9yXCI7XG5pbXBvcnQgUGxheWVyQUkgZnJvbSBcIi4uL0FJL1BsYXllci9QbGF5ZXJBSVwiO1xuaW1wb3J0IFBsYXllckNvbnRyb2xsZXIsIHsgUGxheWVySW5wdXQgfSBmcm9tIFwiLi4vQUkvUGxheWVyL1BsYXllckNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IEl0ZW1FdmVudCwgUGxheWVyRXZlbnQsIEJhdHRsZXJFdmVudCwgSHVkRXZlbnQgfSBmcm9tIFwiLi4vRXZlbnRzXCI7XG5pbXBvcnQgQmF0dGxlciBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvQmF0dGxlU3lzdGVtL0JhdHRsZXJcIjtcbmltcG9ydCBCYXR0bGVyQmFzZSBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvQmF0dGxlU3lzdGVtL0JhdHRsZXJCYXNlXCI7XG5pbXBvcnQgSGVhbHRoYmFySFVEIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9IVUQvSGVhbHRoYmFySFVEXCI7XG5pbXBvcnQgSW52ZW50b3J5SFVEIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9IVUQvSW52ZW50b3J5SFVEXCI7XG5pbXBvcnQgUGF1c2VIVUQgZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL0hVRC9QYXVzZUhVRFwiO1xuaW1wb3J0IEludmVudG9yeSBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvSXRlbVN5c3RlbS9JbnZlbnRvcnlcIjtcbmltcG9ydCBJdGVtIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9JdGVtU3lzdGVtL0l0ZW1cIjtcbmltcG9ydCBIZWFsdGhwYWNrIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9JdGVtU3lzdGVtL0l0ZW1zL0hlYWx0aHBhY2tcIjtcbmltcG9ydCBMYXNlckd1biBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvSXRlbVN5c3RlbS9JdGVtcy9MYXNlckd1blwiO1xuaW1wb3J0IHsgQ2xvc2VzdFBvc2l0aW9uZWQgfSBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvU2VhcmNoaW5nL0hXNFJlZHVjZXJzXCI7XG5pbXBvcnQgQmFzaWNUYXJnZXRhYmxlIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9UYXJnZXRpbmcvQmFzaWNUYXJnZXRhYmxlXCI7XG5pbXBvcnQgUG9zaXRpb24gZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL1RhcmdldGluZy9Qb3NpdGlvblwiO1xuaW1wb3J0IEFzdGFyU3RyYXRlZ3kgZnJvbSBcIi4uL1BhdGhmaW5kaW5nL0FzdGFyU3RyYXRlZ3lcIjtcbmltcG9ydCBHYW1lT3ZlciBmcm9tIFwiLi9HYW1lT3ZlclwiO1xuLy8gaW1wb3J0IEhXNFNjZW5lIGZyb20gXCIuL0hXNFNjZW5lXCI7XG4vLyBpbXBvcnQgTWFpbk1lbnUgZnJvbSBcIi4vTWFpbk1lbnVcIjtcbi8vIGltcG9ydCBMZXZlbFNlbGVjdGlvblNjZW5lIGZyb20gXCIuL0xldmVsU2VsZWN0aW9uU2NlbmVcIjtcbi8vIGltcG9ydCB7IEdhbWVFdmVudFR5cGUgfSBmcm9tIFwiLi4vLi4vV29sZmllMkQvRXZlbnRzL0dhbWVFdmVudFR5cGVcIjtcbi8vIGltcG9ydCB0ZXN0SFc0U2NlbmUgZnJvbSBcIi4vRmluYWxQcm9qZWN0U2NlbmVcIjtcbmltcG9ydCBGaW5hbFByb2plY3RTY2VuZSBmcm9tIFwiLi9GaW5hbFByb2plY3RTY2VuZVwiO1xuLy8gaW1wb3J0IHRlc3RNYWluU2NlbmUgZnJvbSBcIi4vdGVzdG1haW5cIjtcbmltcG9ydCBIVzRTY2VuZSBmcm9tIFwiLi9IVzRTY2VuZVwiO1xuaW1wb3J0IExldmVsU2VsZWN0aW9uU2NlbmUgZnJvbSBcIi4vTGV2ZWxTZWxlY3Rpb25TY2VuZVwiO1xuaW1wb3J0IE1haW5NZW51IGZyb20gXCIuL01haW5NZW51XCI7XG5pbXBvcnQgTGV2ZWwxU2NlbmUgZnJvbSBcIi4vTGV2ZWwxU2NlbmVcIjtcbmltcG9ydCBMZXZlbDJTY2VuZSBmcm9tIFwiLi9MZXZlbDJTY2VuZVwiO1xuaW1wb3J0IExldmVsM1NjZW5lIGZyb20gXCIuL0xldmVsM1NjZW5lXCI7XG5pbXBvcnQgTGV2ZWw0U2NlbmUgZnJvbSBcIi4vTGV2ZWw0U2NlbmVcIjtcbmltcG9ydCBMZXZlbDVTY2VuZSBmcm9tIFwiLi9MZXZlbDVTY2VuZVwiO1xuaW1wb3J0IFNwbGFzaFNjcmVlbiBmcm9tIFwiLi9TcGxhc2hTY3JlZW5cIjtcbmltcG9ydCB0ZXN0TWVudSBmcm9tIFwiLi9NYWluTWVudVwiO1xuaW1wb3J0IHsgR2FtZUV2ZW50VHlwZSB9IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9FdmVudHMvR2FtZUV2ZW50VHlwZVwiO1xuXG5cbmNvbnN0IEJhdHRsZXJHcm91cHMgPSB7XG4gICAgUkVEOiAxLFxuICAgIEJMVUU6IDJcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCBjb25zdCBMYXN0U2NlbmVMYXllcnMgPSB7XG5cdFBSSU1BUlk6IFwiUFJJTUFSWVwiLFxuXHRCQUNLR1JPVU5EOiBcIkJBQ0tHUk9VTkRcIiwgXG5cdFVJOiBcIlVJXCIsXG4gICAgUEFVU0U6IFwiUEFVU0VcIixcbiAgICBDT05UUk9MUzogXCJDT05UUk9MU1wiLFxuICAgIEhFTFA6IFwiSEVMUFwiLFxuICAgIENPTVBMRVRFOiBcIkNPTVBMRVRFXCJcbn0gYXMgY29uc3Q7XG5cblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMYXN0U2NlbmUgZXh0ZW5kcyBIVzRTY2VuZSB7XG5cbiAgICAvKiogR2FtZVN5c3RlbXMgaW4gdGhlIEhXMyBTY2VuZSAqL1xuICAgIC8vIHByaXZhdGUgaW52ZW50b3J5SHVkOiBJbnZlbnRvcnlIVUQ7XG5cbiAgICAvKiogQWxsIHRoZSBiYXR0bGVycyBpbiB0aGUgSFczU2NlbmUgKGluY2x1ZGluZyB0aGUgcGxheWVyKSAqL1xuICAgIHByb3RlY3RlZCBiYXR0bGVyczogKEJhdHRsZXIgJiBBY3RvcilbXTtcbiAgICAvKiogSGVhbHRoYmFycyBmb3IgdGhlIGJhdHRsZXJzICovXG4gICAgcHJvdGVjdGVkIGhlYWx0aGJhcnM6IE1hcDxudW1iZXIsIEhlYWx0aGJhckhVRD47XG5cbiAgICBwcm90ZWN0ZWQgcGxheWVyOiAoUGxheWVyQWN0b3IpW107XG4gICAgcHJvdGVjdGVkIGVuZW1pZXM6IChOUENBY3RvcilbXTtcblxuICAgIHByb3RlY3RlZCBib3NzOiBOUENBY3RvcjtcbiAgICBcbiAgICAvLyBwcm90ZWN0ZWQgc2hvb3RBdWRpb0tleTogc3RyaW5nO1xuXG4gICAgLy9wcml2YXRlIHpvb21Cb29sID0gZmFsc2U7XG5cbiAgICAvLyBwcm90ZWN0ZWQgc2hvb3RBdWRpb0tleTogc3RyaW5nO1xuICAgIC8vIHByb3RlY3RlZCBoaXRBdWRpb0tleTogc3RyaW5nO1xuXG4gICAgcHJvdGVjdGVkIGxldmVsTXVzaWNLZXk6IHN0cmluZztcblxuICAgIHByb3RlY3RlZCBiYXNlczogQmF0dGxlckJhc2VbXTtcblxuICAgIHByb3RlY3RlZCBoZWFsdGhwYWNrczogQXJyYXk8SGVhbHRocGFjaz47XG4gICAgcHJvdGVjdGVkIGxhc2VyZ3VuczogQXJyYXk8TGFzZXJHdW4+O1xuXG4gICAgLy8gVGhlIHdhbGwgbGF5ZXIgb2YgdGhlIHRpbGVtYXBcbiAgICBwcm90ZWN0ZWQgd2FsbHM6IE9ydGhvZ29uYWxUaWxlbWFwO1xuXG4gICAgLy8gVGhlIHBvc2l0aW9uIGdyYXBoIGZvciB0aGUgbmF2bWVzaFxuICAgIHByb3RlY3RlZCBncmFwaDogUG9zaXRpb25HcmFwaDtcblxuICAgIHByb3RlY3RlZCBwYXVzZUltYWdlOiBTcHJpdGU7XG4gICAgcHJvdGVjdGVkIGhlbHBJbWFnZTogU3ByaXRlO1xuICAgIHByb3RlY3RlZCBjb250cm9sc0ltYWdlOiBTcHJpdGU7XG4gICAgcHJvdGVjdGVkIGNvbXBsZXRlSW1hZ2U6IFNwcml0ZTtcblxuICAgIHByb3RlY3RlZCBib3NzTG9jYXRpb246IFZlYzI7XG5cbiAgICBwdWJsaWMgc3RhdGljIFBBVVNFX0tFWSA9IFwiUEFVU0VcIjtcbiAgICBwdWJsaWMgc3RhdGljIFBBVVNFX1BBVEggPSBcImh3NF9hc3NldHMvc3ByaXRlcy9QYXVzZWQtU2NyZWVuLnBuZ1wiO1xuXG4gICAgcHVibGljIHN0YXRpYyBIRUxQX0tFWSA9IFwiSEVMUFwiO1xuICAgIHB1YmxpYyBzdGF0aWMgSEVMUF9QQVRIID0gXCJodzRfYXNzZXRzL3Nwcml0ZXMvSGVscC1TY3JlZW4ucG5nXCI7XG5cblxuICAgIHB1YmxpYyBzdGF0aWMgQ09OVFJPTFNfS0VZID0gXCJDT05UUk9MU1wiXG4gICAgcHVibGljIHN0YXRpYyBDT05UUk9MU19QQVRIID0gXCJodzRfYXNzZXRzL3Nwcml0ZXMvQ29udHJvbHMtU2NyZWVuLnBuZ1wiXG5cbiAgICBwdWJsaWMgc3RhdGljIENPTVBMRVRFX0tFWSA9IFwiQ09NUExFVEVcIlxuICAgIHB1YmxpYyBzdGF0aWMgQ09NUExFVEVfUEFUSCA9IFwiaHc0X2Fzc2V0cy9zcHJpdGVzL0dhbWUtQ29tcGxldGUucG5nXCJcblxuICAgXG4gICAgcHVibGljIHN0YXRpYyBTSE9PVF9BVURJT19LRVkgPSBcIlBMQVlFUl9TSE9PVFwiXG4gICAgcHVibGljIHN0YXRpYyBTSE9PVF9BVURJT19QQVRIID0gXCJodzRfYXNzZXRzL3NvdW5kcy9sYXNlclNob290LndhdlwiXG5cbiAgICBwdWJsaWMgc3RhdGljIEhJVF9BVURJT19LRVkgPSBcIlBMQVlFUl9ISVRcIlxuICAgIHB1YmxpYyBzdGF0aWMgSElUX0FVRElPX1BBVEggPSBcImh3NF9hc3NldHMvc291bmRzL2hpdC53YXZcIlxuXG4gICAgcHVibGljIHN0YXRpYyBEWUlOR19BVURJT19LRVkgPSBcIlBMQVlFUl9EWUlOR1wiXG4gICAgcHVibGljIHN0YXRpYyBEWUlOR19BVURJT19QQVRIID0gXCJodzRfYXNzZXRzL3NvdW5kcy9keWluZy53YXZcIlxuXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBMRVZFTF9NVVNJQ19LRVkgPSBcIkxFVkVMX01VU0lDXCI7XG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBMRVZFTF9NVVNJQ19QQVRIID0gXCJodzRfYXNzZXRzL211c2ljL0ZpbmFsc3RhZ2V0aGVtZS53YXZcIjtcblxuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHZpZXdwb3J0OiBWaWV3cG9ydCwgc2NlbmVNYW5hZ2VyOiBTY2VuZU1hbmFnZXIsIHJlbmRlcmluZ01hbmFnZXI6IFJlbmRlcmluZ01hbmFnZXIsIG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIGFueT4pIHtcbiAgICAgICAgc3VwZXIodmlld3BvcnQsIHNjZW5lTWFuYWdlciwgcmVuZGVyaW5nTWFuYWdlciwgb3B0aW9ucyk7XG5cbiAgICAgICAgdGhpcy5iYXR0bGVycyA9IG5ldyBBcnJheTxCYXR0bGVyICYgQWN0b3I+KCk7XG4gICAgICAgIHRoaXMuaGVhbHRoYmFycyA9IG5ldyBNYXA8bnVtYmVyLCBIZWFsdGhiYXJIVUQ+KCk7XG4gICAgICAgIHRoaXMucGxheWVyID0gbmV3IEFycmF5PFBsYXllckFjdG9yPigpO1xuICAgICAgICB0aGlzLmVuZW1pZXMgPSBuZXcgQXJyYXk8TlBDQWN0b3I+KCk7XG4gICBcblxuICAgICAgICB0aGlzLmxhc2VyZ3VucyA9IG5ldyBBcnJheTxMYXNlckd1bj4oKTtcbiAgICAgICAgdGhpcy5oZWFsdGhwYWNrcyA9IG5ldyBBcnJheTxIZWFsdGhwYWNrPigpO1xuXG4gICAgICAgIHRoaXMuc2hvb3RBdWRpb0tleSA9IExhc3RTY2VuZS5TSE9PVF9BVURJT19LRVk7XG4gICAgICAgIHRoaXMuaGl0QXVkaW9LZXkgPSBMYXN0U2NlbmUuSElUX0FVRElPX0tFWTtcbiAgICAgICAgdGhpcy5keWluZ0F1ZGlvS2V5ID0gTGFzdFNjZW5lLkRZSU5HX0FVRElPX0tFWTtcbiAgICAgICAgdGhpcy5sZXZlbE11c2ljS2V5ID0gTGFzdFNjZW5lLkxFVkVMX01VU0lDX0tFWVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBzZWUgU2NlbmUudXBkYXRlKClcbiAgICAgKi9cbiAgICBwdWJsaWMgb3ZlcnJpZGUgbG9hZFNjZW5lKCkge1xuXG5cbiAgICAgICAgLy8gTG9hZCB0aGUgcGxheWVyIGFuZCBlbmVteSBzcHJpdGVzaGVldHNcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KFwicGxheWVyMVwiLCBcImh3NF9hc3NldHMvc3ByaXRlc2hlZXRzL1dhcmJhbGxfMDAxX0x1a2FzLmpzb25cIik7XG5cbiAgICAgICAgLy8gTG9hZCBpbiB0aGUgZW5lbXkgc3ByaXRlc1xuICAgICAgICB0aGlzLmxvYWQuc3ByaXRlc2hlZXQoXCJCbHVlRW5lbXlcIiwgXCJodzRfYXNzZXRzL3Nwcml0ZXNoZWV0cy9CYWxsX0JhdC5qc29uXCIpO1xuICAgICAgICB0aGlzLmxvYWQuc3ByaXRlc2hlZXQoXCJSZWRFbmVteVwiLCBcImh3NF9hc3NldHMvc3ByaXRlc2hlZXRzL0JhbGxfQmF0Lmpzb25cIik7XG4gICAgICAgIHRoaXMubG9hZC5zcHJpdGVzaGVldChcIkJsdWVIZWFsZXJcIiwgXCJodzRfYXNzZXRzL3Nwcml0ZXNoZWV0cy9Qc3lmbHkuanNvblwiKTtcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KFwiUmVkSGVhbGVyXCIsIFwiaHc0X2Fzc2V0cy9zcHJpdGVzaGVldHMvQmFsbF9CYXQuanNvblwiKTtcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KFwiQm9zc1wiLCBcImh3NF9hc3NldHMvc3ByaXRlc2hlZXRzL0tZVS5qc29uXCIpO1xuXG4gICAgICAgIC8vIExvYWQgdGhlIHRpbGVtYXBcbiAgICAgICAgdGhpcy5sb2FkLnRpbGVtYXAoXCJsZXZlbFwiLCBcImh3NF9hc3NldHMvdGlsZW1hcHMvRmluYWxTdGFnZVRpbGVtYXAuanNvblwiKTtcblxuICAgICAgICAvLyBMb2FkIHRoZSBlbmVteSBsb2NhdGlvbnNcbiAgICAgICAgLy8gdGhpcy5sb2FkLm9iamVjdChcImJvc3NcIiwgXCJodzRfYXNzZXRzL2RhdGEvZW5lbWllcy9sdmw2Lmpzb25cIik7XG4gICAgICAgIC8vIHRoaXMubG9hZC5vYmplY3QoXCJibHVlXCIsIFwiaHc0X2Fzc2V0cy9kYXRhL2VuZW1pZXMvcmVkLmpzb25cIik7XG5cbiAgICAgICAgLy8gTG9hZCB0aGUgaGVhbHRocGFjayBhbmQgbGFzZXJndW4gbG9hY3Rpb25zXG4gICAgICAgIHRoaXMubG9hZC5vYmplY3QoXCJoZWFsdGhwYWNrc1wiLCBcImh3NF9hc3NldHMvZGF0YS9pdGVtcy9oZWFsdGhwYWNrcy5qc29uXCIpO1xuICAgICAgICB0aGlzLmxvYWQub2JqZWN0KFwibGFzZXJndW5zXCIsIFwiaHc0X2Fzc2V0cy9kYXRhL2l0ZW1zL2xhc2VyZ3Vucy5qc29uXCIpO1xuXG4gICAgICAgIC8vIExvYWQgdGhlIGhlYWx0aHBhY2ssIGludmVudG9yeSBzbG90LCBhbmQgbGFzZXIgZ3VuIHNwcml0ZXNcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKFwiaGVhbHRocGFja1wiLCBcImh3NF9hc3NldHMvc3ByaXRlcy9oZWFsdGhwYWNrLnBuZ1wiKTtcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKFwiaW52ZW50b3J5U2xvdFwiLCBcImh3NF9hc3NldHMvc3ByaXRlcy9pbnZlbnRvcnkucG5nXCIpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoXCJsYXNlckd1blwiLCBcImh3NF9hc3NldHMvc3ByaXRlcy9sYXNlckd1bi5wbmdcIik7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShMYXN0U2NlbmUuUEFVU0VfS0VZLCBMYXN0U2NlbmUuUEFVU0VfUEFUSCk7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShMYXN0U2NlbmUuSEVMUF9LRVksIExhc3RTY2VuZS5IRUxQX1BBVEgpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoTGFzdFNjZW5lLkNPTlRST0xTX0tFWSwgTGFzdFNjZW5lLkNPTlRST0xTX1BBVEgpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoTGFzdFNjZW5lLkNPTVBMRVRFX0tFWSwgTGFzdFNjZW5lLkNPTVBMRVRFX1BBVEgpO1xuXG4gICAgICAgIHRoaXMubG9hZC5hdWRpbyh0aGlzLnNob290QXVkaW9LZXksIExhc3RTY2VuZS5TSE9PVF9BVURJT19QQVRIKTtcbiAgICAgICAgdGhpcy5sb2FkLmF1ZGlvKHRoaXMuaGl0QXVkaW9LZXksIExhc3RTY2VuZS5ISVRfQVVESU9fUEFUSCk7XG4gICAgICAgIHRoaXMubG9hZC5hdWRpbyh0aGlzLmR5aW5nQXVkaW9LZXksIExhc3RTY2VuZS5EWUlOR19BVURJT19QQVRIKTtcbiAgICAgICAgdGhpcy5sb2FkLmF1ZGlvKHRoaXMubGV2ZWxNdXNpY0tleSwgTGFzdFNjZW5lLkxFVkVMX01VU0lDX1BBVEgpO1xuXG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBzdGFydFNjZW5lKCkge1xuICAgICAgICAvLyBzdXBlci5zdGFydFNjZW5lKCk7XG4gICAgICAgIC8vIFxuXG4gICAgICAgIGNvbnN0IGNlbnRlciA9IHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCk7XG5cbiAgICAgICAgXG5cbiAgICAgICAgLy8gdGhpcy5hZGRMYXllcihNYWluU2NlbmVMYXllcnMuVUksICk7XG4gICAgICAgIC8vIHRoaXMuYWRkTGF5ZXIoTWFpblNjZW5lTGF5ZXJzLlBBVVNFLCA1KTtcbiAgICAgICAgLy8gbGV0IHYgPSB0aGlzLmdldExheWVyKFwiVUlcIik7XG4gICAgICAgIFxuICAgICAgICBcblxuICAgICAgICAvLyBBZGQgaW4gdGhlIHRpbGVtYXBcbiAgICAgICAgbGV0IHRpbGVtYXBMYXllcnMgPSB0aGlzLmFkZC50aWxlbWFwKFwibGV2ZWxcIik7XG5cbiAgICAgICAgLy8gR2V0IHRoZSB3YWxsIGxheWVyXG4gICAgICAgIHRoaXMud2FsbHMgPSA8T3J0aG9nb25hbFRpbGVtYXA+dGlsZW1hcExheWVyc1sxXS5nZXRJdGVtcygpWzBdO1xuXG4gICAgICAgIC8vIFNldCB0aGUgdmlld3BvcnQgYm91bmRzIHRvIHRoZSB0aWxlbWFwXG4gICAgICAgIGxldCB0aWxlbWFwU2l6ZTogVmVjMiA9IHRoaXMud2FsbHMuc2l6ZTtcblxuICAgICAgICB0aGlzLnZpZXdwb3J0LnNldEJvdW5kcygwLCAwLCB0aWxlbWFwU2l6ZS54LCB0aWxlbWFwU2l6ZS55KTtcbiAgICBcbiAgICAgICAgLy8gXG5cbiAgICAgICAgdGhpcy5pbml0TGF5ZXJzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgdGhlIHBsYXllclxuICAgICAgICB0aGlzLmluaXRpYWxpemVQbGF5ZXIoKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplSXRlbXMoKTtcblxuICAgICAgICB0aGlzLmluaXRpYWxpemVOYXZtZXNoKCk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBOUENTXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZU5QQ3MoKTtcblxuICAgICAgICAvLyBTdWJzY3JpYmUgdG8gcmVsZXZhbnQgZXZlbnRzXG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFwiaGVhbHRocGFja1wiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJlbmVteURpZWRcIik7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKEl0ZW1FdmVudC5JVEVNX1JFUVVFU1QpO1xuXG4gICAgXG5cbiAgICAgICAgLy8gQWRkIGEgVUkgZm9yIGhlYWx0aFxuICAgICAgICB0aGlzLmFkZFVJTGF5ZXIoXCJoZWFsdGhcIik7XG5cbiAgICAgICAgLy8gUGF1c2UgQnV0dG9uIChOb3QgbmVlZGVkIGp1c3QgcHJlc3MgZXNjYXBlKVxuICAgICAgICAvLyBsZXQgcGF1c2UgPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIE1haW5TY2VuZUxheWVycy5VSSwge3Bvc2l0aW9uOiBuZXcgVmVjMihjZW50ZXIueCArIDYwMCwgY2VudGVyLnkgLSA0MDApLCB0ZXh0OiBcIlBhdXNlXCJ9KTtcbiAgICAgICAgLy8gcGF1c2Uuc2l6ZS5zZXQoMTAwLCA1MCk7XG4gICAgICAgIC8vIHBhdXNlLmJvcmRlcldpZHRoID0gMjtcbiAgICAgICAgLy8gcGF1c2UuYm9yZGVyQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgLy8gcGF1c2UuYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIC8vIHBhdXNlLm9uQ2xpY2tFdmVudElkID0gXCJwYXVzZVwiO1xuXG4gICAgICAgIC8vIHRoaXMucGF1c2VNZW51ID0gcGF1c2U7XG5cbiAgICAgICAgLy8gVE9ETyBNYWtlIHRleHQgbW92ZSB3aXRoIGJ1dHRvblxuXG4gICAgICAgIC8vIGxldCBwYXVzZUJhciA9IG5ldyBQYXVzZUhVRCh0aGlzLCBwYXVzZSwgY2VudGVyKTtcbiAgICAgICAgLy8gdGhpcy5wYXVzZSA9IHBhdXNlQmFyO1xuXG5cbiAgICAgICAgbGV0IHBhdXNlTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiUEFVU0VcIik7XG5cbiAgICAgICAgdGhpcy5wYXVzZUltYWdlID0gdGhpcy5hZGQuc3ByaXRlKExhc3RTY2VuZS5QQVVTRV9LRVksIHBhdXNlTGF5ZXIuZ2V0TmFtZSgpKTtcbiAgICAgICAgdGhpcy5wYXVzZUltYWdlLnBvc2l0aW9uLmNvcHkodGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKSk7XG4gICAgICAgIC8vIHRoaXMucGF1c2VJbWFnZS5hbHBoYSA9IDAuNztcblxuICAgICAgICBjb25zdCB1bnBhdXNlID0gdGhpcy5hZGQudWlFbGVtZW50KFVJRWxlbWVudFR5cGUuQlVUVE9OLCBMYXN0U2NlbmVMYXllcnMuUEFVU0UsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLnggLSA1LCBjZW50ZXIueSAtIDIxMCksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgdW5wYXVzZS5zaXplLnNldCg0MDAsIDEwMCk7XG4gICAgICAgIHVucGF1c2UuYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICB1bnBhdXNlLmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIHVucGF1c2UuYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIHVucGF1c2Uub25DbGlja0V2ZW50SWQgPSBcInVucGF1c2VcIjtcblxuICAgICAgICBjb25zdCBtYWluTWVudSA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTGFzdFNjZW5lTGF5ZXJzLlBBVVNFLCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54IC0gNSwgY2VudGVyLnkgKyAyMjMpLCB0ZXh0OiBcIlwifSk7XG4gICAgICAgIG1haW5NZW51LnNpemUuc2V0KDQwMCwgMTAwKTtcbiAgICAgICAgbWFpbk1lbnUuYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICBtYWluTWVudS5ib3JkZXJDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBtYWluTWVudS5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgbWFpbk1lbnUub25DbGlja0V2ZW50SWQgPSBcIm1haW5tZW51XCI7XG5cbiAgICAgICAgY29uc3QgY29udHJvbHNCdXR0b24gPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIExhc3RTY2VuZUxheWVycy5QQVVTRSwge3Bvc2l0aW9uOiBuZXcgVmVjMihjZW50ZXIueCAtIDUsIGNlbnRlci55IC0gNjUpLCB0ZXh0OiBcIlwifSk7XG4gICAgICAgIGNvbnRyb2xzQnV0dG9uLnNpemUuc2V0KDQwMCwgMTAwKTtcbiAgICAgICAgY29udHJvbHNCdXR0b24uYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICBjb250cm9sc0J1dHRvbi5ib3JkZXJDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBjb250cm9sc0J1dHRvbi5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgY29udHJvbHNCdXR0b24ub25DbGlja0V2ZW50SWQgPSBcImNvbnRyb2xzXCI7XG5cbiAgICAgICAgY29uc3QgaGVscEJ1dHRvbiA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTGFzdFNjZW5lTGF5ZXJzLlBBVVNFLCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54IC0gNSwgY2VudGVyLnkgKyA4MCksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgaGVscEJ1dHRvbi5zaXplLnNldCg0MDAsIDEwMClcbiAgICAgICAgaGVscEJ1dHRvbi5ib3JkZXJXaWR0aCA9IDI7XG4gICAgICAgIGhlbHBCdXR0b24uYm9yZGVyQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgaGVscEJ1dHRvbi5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgaGVscEJ1dHRvbi5vbkNsaWNrRXZlbnRJZCA9IFwiaGVscFwiO1xuICAgICAgICBcblxuICAgICAgICBwYXVzZUxheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICAgICAgcGF1c2VMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG5cbiAgICAgICBcbiAgICAgICAgbGV0IGNvbnRyb2xzTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiQ09OVFJPTFNcIik7XG5cbiAgICAgICAgdGhpcy5jb250cm9sc0ltYWdlID0gdGhpcy5hZGQuc3ByaXRlKExhc3RTY2VuZS5DT05UUk9MU19LRVksIGNvbnRyb2xzTGF5ZXIuZ2V0TmFtZSgpKTtcbiAgICAgICAgdGhpcy5jb250cm9sc0ltYWdlLnBvc2l0aW9uLmNvcHkodGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKSk7XG4gICAgICAgIC8vIHRoaXMuY29udHJvbHNJbWFnZS5hbHBoYSA9IDAuNTtcblxuICAgICAgICBjb25zdCBjb250cm9sc0JhY2tCdXR0b24gPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIExhc3RTY2VuZUxheWVycy5DT05UUk9MUywge3Bvc2l0aW9uOiBuZXcgVmVjMihjZW50ZXIueCAtIDU5NSwgY2VudGVyLnkgKyA0MTUpLCB0ZXh0OiBcIlwifSk7XG4gICAgICAgIGNvbnRyb2xzQmFja0J1dHRvbi5zaXplLnNldCgyMDAsIDUwKTtcbiAgICAgICAgY29udHJvbHNCYWNrQnV0dG9uLmJvcmRlcldpZHRoID0gMjtcbiAgICAgICAgY29udHJvbHNCYWNrQnV0dG9uLmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIGNvbnRyb2xzQmFja0J1dHRvbi5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgY29udHJvbHNCYWNrQnV0dG9uLm9uQ2xpY2tFdmVudElkID0gXCJiYWNrY29udHJvbHNcIjtcblxuICAgICAgICBjb250cm9sc0xheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICAgICAgY29udHJvbHNMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG5cbiAgICAgICAgLy8gXG4gICAgICAgIGxldCBoZWxwTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiSEVMUFwiKTtcblxuICAgICAgICB0aGlzLmhlbHBJbWFnZSA9IHRoaXMuYWRkLnNwcml0ZShMYXN0U2NlbmUuSEVMUF9LRVksIGhlbHBMYXllci5nZXROYW1lKCkpO1xuICAgICAgICB0aGlzLmhlbHBJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuICAgICAgICAvLyB0aGlzLmhlbHBJbWFnZS5hbHBoYSA9IDAuNTtcblxuICAgICAgICBjb25zdCBoZWxwQmFja0J1dHRvbiA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTGFzdFNjZW5lTGF5ZXJzLkhFTFAsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLnggLSA1OTUsIGNlbnRlci55ICsgNDE1KSwgdGV4dDogXCJcIn0pO1xuICAgICAgICBoZWxwQmFja0J1dHRvbi5zaXplLnNldCgyMDAsIDUwKTtcbiAgICAgICAgaGVscEJhY2tCdXR0b24uYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICBoZWxwQmFja0J1dHRvbi5ib3JkZXJDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBoZWxwQmFja0J1dHRvbi5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgaGVscEJhY2tCdXR0b24ub25DbGlja0V2ZW50SWQgPSBcImhlbHBjb250cm9sc1wiO1xuXG4gICAgICAgIGhlbHBMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgICAgIGhlbHBMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG5cbiAgICAgICAgbGV0IGNvbXBsZXRlTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiQ09NUExFVEVcIik7XG5cbiAgICAgICAgdGhpcy5jb21wbGV0ZUltYWdlID0gdGhpcy5hZGQuc3ByaXRlKEZpbmFsUHJvamVjdFNjZW5lLkNPTVBMRVRFX0tFWSwgY29tcGxldGVMYXllci5nZXROYW1lKCkpO1xuICAgICAgICB0aGlzLmNvbXBsZXRlSW1hZ2UucG9zaXRpb24uY29weSh0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTtcblxuICAgICAgICBjb25zdCBjb21wbGV0ZUJ1dHRvbiA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTGFzdFNjZW5lTGF5ZXJzLkNPTVBMRVRFLCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54LCBjZW50ZXIueSArIDQ3NSksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgY29tcGxldGVCdXR0b24uc2l6ZS5zZXQoMTMyMCwgMjAwMCk7XG4gICAgICAgIGNvbXBsZXRlQnV0dG9uLmJvcmRlcldpZHRoID0gMjtcbiAgICAgICAgY29tcGxldGVCdXR0b24uYm9yZGVyQ29sb3IgPSBDb2xvci5XSElURTtcbiAgICAgICAgY29tcGxldGVCdXR0b24uYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIGNvbXBsZXRlQnV0dG9uLm9uQ2xpY2tFdmVudElkID0gXCJuZXh0bHZsXCI7XG5cbiAgICAgICAgY29tcGxldGVMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgICAgIGNvbXBsZXRlTGF5ZXIuc2V0SGlkZGVuKHRydWUpO1xuXG5cbiAgICAgICAgLy8gdGhpcy5wYXVzZU1lbnUgPSB1bnBhdXNlO1xuXG4gICAgICAgIC8vIGxldCB2YWwgPSB0aGlzLmxheWVycztcblxuICAgICAgICAvLyBjb25zb2xlLmxvZyh2YWwpO1xuXG4gICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDMpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoUGxheWVyRXZlbnQuUExBWUVSX0tJTExFRCk7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKEJhdHRsZXJFdmVudC5CQVRUTEVSX0tJTExFRCk7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKEJhdHRsZXJFdmVudC5CQVRUTEVSX1JFU1BBV04pO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcInBhdXNlXCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcInVucGF1c2VcIik7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFwibWFpbm1lbnVcIik7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFwiY29udHJvbHNcIik7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFwiaGVscFwiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJiYWNrY29udHJvbHNcIik7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFwiaGVscGNvbnRyb2xzXCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcIm5leHRsdmxcIik7XG5cblxuICAgICAgICB0aGlzLmVtaXR0ZXIuZmlyZUV2ZW50KEdhbWVFdmVudFR5cGUuUExBWV9TT1VORCwge2tleTogdGhpcy5sZXZlbE11c2ljS2V5LCBsb29wOiB0cnVlLCBob2xkUmVmZXJlbmNlOiB0cnVlfSk7XG5cbiAgICAgICAgLy8gdGhpcy5lbWl0dGVyLmZpcmVFdmVudChHYW1lRXZlbnRUeXBlLlBMQVlfU09VTkQsIHtrZXk6IHRoaXMuZ2V0U2hvb3RBdWRpb0tleSgpLCBsb29wOiBmYWxzZSwgaG9sZFJlZmVyZW5jZTogZmFsc2V9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAc2VlIFNjZW5lLnVwZGF0ZVNjZW5lXG4gICAgICovXG4gIHB1YmxpYyBvdmVycmlkZSB1cGRhdGVTY2VuZShkZWx0YVQ6IG51bWJlcik6IHZvaWQge1xuICAgIHdoaWxlICh0aGlzLnJlY2VpdmVyLmhhc05leHRFdmVudCgpKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlRXZlbnQodGhpcy5yZWNlaXZlci5nZXROZXh0RXZlbnQoKSk7XG4gICAgfVxuICAgIC8vIHRoaXMuaW52ZW50b3J5SHVkLnVwZGF0ZShkZWx0YVQpO1xuICAgIHRoaXMuaGVhbHRoYmFycy5mb3JFYWNoKGhlYWx0aGJhciA9PiBoZWFsdGhiYXIudXBkYXRlKGRlbHRhVCkpO1xuICAgIC8vIHRoaXMucGF1c2Uuc2V0Q2VudGVyKHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuICAgIC8vIHRoaXMucGF1c2VNZW51LnVwZGF0ZShkZWx0YVQpO1xuICAgIC8vIHRoaXMucGF1c2UudXBkYXRlKGRlbHRhVCk7XG5cbiAgICBpZiAoSW5wdXQuaXNLZXlKdXN0UHJlc3NlZChcImVzY2FwZVwiKSl7XG4gICAgXG5cbiAgICAgICAgY29uc29sZS5sb2coXCJFc2NhcGUgcHJlc3NlZFwiKTtcbiAgICAgICAgbGV0IHYgPSBuZXcgR2FtZUV2ZW50KFwicGF1c2VcIiwgbnVsbCk7XG4gICAgICAgIHRoaXMuaGFuZGxlRXZlbnQodik7XG4gICAgfVxuICAgIGlmICh0aGlzLmJvc3MuaGVhbHRoIDw9IDApIHtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgIHRoaXMudW5wYXVzZUNvbXBsZXRlTGF5ZXIoKTtcblxuICAgICAgICB0aGlzLnBsYXllclswXS5mcmVlemUoKTsgLy8gRnJlZXplcyBwbGF5ZXJcbiAgICAgICAgdGhpcy5wbGF5ZXJbMF0uZGlzYWJsZVBoeXNpY3MoKTtcbiAgICAgICAgdGhpcy5wbGF5ZXJbMF0uYWlBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmVuZW1pZXMubGVuZ3RoOyBpKyspeyAvLyBGcmVlemVzIGVuZW1pZXMgXG4gICAgICAgICAgICBpZih0aGlzLmVuZW1pZXNbaV0uYmF0dGxlckFjdGl2ZSA9PSB0cnVlKXtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZW1pZXNbaV0uZnJlZXplKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmVtaWVzW2ldLmRpc2FibGVQaHlzaWNzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmVtaWVzW2ldLmFpQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICB9IFxuXG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IHBhdXNlTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiUEFVU0VcIik7XG4gICBcbiAgICBpZighcGF1c2VMYXllci5pc0hpZGRlbigpKXtcbiAgICAgICAgdGhpcy5wYXVzZUltYWdlLnBvc2l0aW9uLmNvcHkodGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKSk7IC8vIFdvcmtzIGJ1dCB3aGVuIG1vdmluZyB0aGUgc2NyZWVuIGdldHMgbW92ZWQgdXB3YXJkcy5cbiAgICB9XG5cbiAgICBpZihJbnB1dC5pc0tleVByZXNzZWQoXCJ6XCIpKXtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgIH1cbiAgICBcbiAgICBpZihJbnB1dC5pc0tleVByZXNzZWQoXCJ4XCIpKXtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMyk7XG4gICAgIH1cblxuICAgICBpZihJbnB1dC5pc0tleUp1c3RQcmVzc2VkKFwiMVwiKSl7XG4gICAgICAgIHRoaXMudmlld3BvcnQuZm9sbG93KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgxKTtcbiAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShMZXZlbDFTY2VuZSk7XG4gICAgIH1cbiAgICAgaWYoSW5wdXQuaXNLZXlKdXN0UHJlc3NlZChcIjJcIikpe1xuICAgICAgICB0aGlzLnZpZXdwb3J0LmZvbGxvdyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoTGV2ZWwyU2NlbmUpO1xuICAgICB9XG4gICAgIGlmKElucHV0LmlzS2V5SnVzdFByZXNzZWQoXCIzXCIpKXtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKExldmVsM1NjZW5lKTtcbiAgICAgfVxuICAgICBpZihJbnB1dC5pc0tleUp1c3RQcmVzc2VkKFwiNFwiKSl7XG4gICAgICAgIHRoaXMudmlld3BvcnQuZm9sbG93KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgxKTtcbiAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShMZXZlbDRTY2VuZSk7XG4gICAgIH1cbiAgICAgaWYoSW5wdXQuaXNLZXlKdXN0UHJlc3NlZChcIjVcIikpe1xuICAgICAgICB0aGlzLnZpZXdwb3J0LmZvbGxvdyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoTGV2ZWw1U2NlbmUpO1xuICAgICB9XG4gICAgIGlmKElucHV0LmlzS2V5SnVzdFByZXNzZWQoXCI2XCIpKXtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKExhc3RTY2VuZSk7XG4gICAgIH1cblxuICAgICBpZihJbnB1dC5pc0tleUp1c3RQcmVzc2VkKFwidFwiKSl7XG4gICAgICAgIHRoaXMucGxheWVyWzBdLnBvc2l0aW9uID0gdGhpcy5ib3NzTG9jYXRpb247XG4gICAgIH1cblxuICAgIC8vIEFub3RoZXIgd2F5IHRvIHBsYXkgc2hvb3QgYXVkaW8gaXMgd2hlbiBwbGF5ZXIgcHJlc3NlZCBzcGFjZVxuICAgIC8vICBpZihJbnB1dC5pc0tleUp1c3RQcmVzc2VkKFwic3BhY2VcIikpe1xuICAgIC8vICAgICBjb25zb2xlLmxvZyhcIlNob290IEF1ZGlvIFBsYXllZFwiKTtcbiAgICAvLyAgICAgdGhpcy5lbWl0dGVyLmZpcmVFdmVudChHYW1lRXZlbnRUeXBlLlBMQVlfU09VTkQsIHtrZXk6IHRoaXMuZ2V0U2hvb3RBdWRpb0tleSgpLCBsb29wOiBmYWxzZSwgaG9sZFJlZmVyZW5jZTogZmFsc2V9KTtcbiAgICAvLyAgfVxuICAgIC8vIFRPRE8gSWYgaW5wdXQgaXMgMiwgMywgNCwgNSwgNiBnbyB0byB0aG9zZSBsZXZlbHMgYnkgY2hhbmluZyB0aGUgc2NlbmVcblxufVxuXG4vKipcbiAqIEhhbmRsZSBldmVudHMgZnJvbSB0aGUgcmVzdCBvZiB0aGUgZ2FtZVxuICogQHBhcmFtIGV2ZW50IGEgZ2FtZSBldmVudFxuICovXG5wdWJsaWMgaGFuZGxlRXZlbnQoZXZlbnQ6IEdhbWVFdmVudCk6IHZvaWQge1xuICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuICAgICAgICBjYXNlIEJhdHRsZXJFdmVudC5CQVRUTEVSX0tJTExFRDoge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVCYXR0bGVyS2lsbGVkKGV2ZW50KTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuZm9sbG93KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgxKTtcbiAgICAgICAgICAgIC8vIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoTGV2ZWxTZWxlY3Rpb25TY2VuZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEJhdHRsZXJFdmVudC5CQVRUTEVSX1JFU1BBV046IHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgSXRlbUV2ZW50LklURU1fUkVRVUVTVDoge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVJdGVtUmVxdWVzdChldmVudC5kYXRhLmdldChcIm5vZGVcIiksIGV2ZW50LmRhdGEuZ2V0KFwiaW52ZW50b3J5XCIpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgUGxheWVyRXZlbnQuUExBWUVSX0tJTExFRDoge1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoR2FtZU92ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJwYXVzZVwiOiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlBhdXNlXCIpO1xuXG4gICAgICAgICAgICAvLyB0aGlzLnBhdXNlSW1hZ2Uuc2NhbGUgPSB0aGlzLnBhdXNlSW1hZ2Uuc2l6ZVdpdGhab29tO1xuXG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgxKTtcbiAgICAgICAgICAgIHRoaXMucGF1c2VJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpOyAvLyBXb3JrcyBidXQgd2hlbiBtb3ZpbmcgdGhlIHNjcmVlbiBnZXRzIG1vdmVkIHVwd2FyZHMuXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyB0aGlzLnZpZXdwb3J0LmZvbGxvdyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnBsYXllclswXS5mcmVlemUoKTsgLy8gRnJlZXplcyBwbGF5ZXJcbiAgICAgICAgICAgIHRoaXMucGxheWVyWzBdLmRpc2FibGVQaHlzaWNzKCk7XG5cbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmVuZW1pZXMubGVuZ3RoOyBpKyspeyAvLyBGcmVlemVzIGVuZW1pZXMgXG4gICAgICAgICAgICAgICAgaWYodGhpcy5lbmVtaWVzW2ldLmJhdHRsZXJBY3RpdmUgPT0gdHJ1ZSl7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5lbWllc1tpXS5mcmVlemUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmVtaWVzW2ldLmRpc2FibGVQaHlzaWNzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5lbWllc1tpXS5haUFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgIH0gXG4gICAgXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5lbmVtaWVzW2ldLmNsZWFyVGFyZ2V0KCk7IFxuICAgICAgICAgICAgICAgIC8vIFRPRE8gU3RvcCBlbmVteSBmcm9tIGF0dGFja2luZyB3aGlsZSBwYXVzZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgIHRoaXMudW5wYXVzZVBhdXNlTGF5ZXIoKTsgXG4gICAgICAgICAgIHRoaXMucGF1c2VQcmltYXJ5TGF5ZXIoKTtcbiAgICAgICAgICAgdGhpcy5wYXVzZVVJTGF5ZXIoKTtcblxuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwidW5wYXVzZVwiOiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInVucGF1c2VcIik7XG5cbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDMpO1xuICAgICAgICAgICAgbGV0IGNlbnRlciA9IHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCk7XG4gICAgICAgICAgICAvLyB0aGlzLnBhdXNlTWVudS5wb3NpdGlvbi5zZXQoY2VudGVyLngsIGNlbnRlci55KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnBsYXllclswXS51bmZyZWV6ZSgpO1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXJbMF0uZW5hYmxlUGh5c2ljcygpO1xuICAgICAgICAgICAgLy8gSW5wdXQuZW5hYmxlSW5wdXQoKTtcblxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuZW5lbWllcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5lbmVtaWVzW2ldLmJhdHRsZXJBY3RpdmUgPT0gdHJ1ZSl7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZW1pZXNbaV0udW5mcmVlemUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmVtaWVzW2ldLmVuYWJsZVBoeXNpY3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmVtaWVzW2ldLmFpQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHRoaXMuZW5lbWllc1tpXS5zZXRUYXJnZXQodGhpcy5iYXR0bGVyc1swXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucGF1c2VQYXVzZUxheWVyKCk7XG4gICAgICAgICAgICB0aGlzLnVucGF1c2VQcmltYXJ5TGF5ZXIoKTtcbiAgICAgICAgICAgIHRoaXMudW5wYXVzZVVJTGF5ZXIoKTtcblxuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBcbiAgICAgICAgY2FzZSBcIm1haW5tZW51XCI6IHtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuZm9sbG93KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgxKTtcbiAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoTWFpbk1lbnUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gXG4gICAgICAgIGNhc2UgXCJjb250cm9sc1wiOiB7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xzSW1hZ2UucG9zaXRpb24uY29weSh0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTtcbiAgICAgICAgICAgIHRoaXMucGF1c2VQYXVzZUxheWVyKCk7XG4gICAgICAgICAgICB0aGlzLnVucGF1c2VDb250cm9sc0xheWVyKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBcbiAgICAgICAgY2FzZSBcImJhY2tjb250cm9sc1wiOiB7XG4gICAgICAgICAgICB0aGlzLnVucGF1c2VQYXVzZUxheWVyKCk7XG4gICAgICAgICAgICB0aGlzLnBhdXNlQ29udHJvbHNMYXllcigpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImhlbHBcIjoge1xuICAgICAgICAgICAgdGhpcy5oZWxwSW1hZ2UucG9zaXRpb24uY29weSh0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTtcbiAgICAgICAgICAgIHRoaXMucGF1c2VQYXVzZUxheWVyKCk7XG4gICAgICAgICAgICB0aGlzLnVucGF1c2VIZWxwTGF5ZXIoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJoZWxwY29udHJvbHNcIjoge1xuICAgICAgICAgICAgdGhpcy51bnBhdXNlUGF1c2VMYXllcigpO1xuICAgICAgICAgICAgdGhpcy5wYXVzZUhlbHBMYXllcigpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcIm5leHRsdmxcIjoge1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShTcGxhc2hTY3JlZW4pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmhhbmRsZWQgZXZlbnQgdHlwZSBcIiR7ZXZlbnQudHlwZX1cIiBjYXVnaHQgaW4gSFczU2NlbmUgZXZlbnQgaGFuZGxlcmApO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5wcm90ZWN0ZWQgcGF1c2VQYXVzZUxheWVyKCk6IHZvaWQge1xuICAgIGxldCBwYXVzZUxheWVyID0gdGhpcy5nZXRMYXllcihcIlBBVVNFXCIpO1xuICAgIHBhdXNlTGF5ZXIuc2V0UGF1c2VkKHRydWUpO1xuICAgIHBhdXNlTGF5ZXIuc2V0SGlkZGVuKHRydWUpO1xufVxuXG5wcm90ZWN0ZWQgdW5wYXVzZVBhdXNlTGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IHBhdXNlTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiUEFVU0VcIik7XG4gICAgcGF1c2VMYXllci5zZXRQYXVzZWQoZmFsc2UpO1xuICAgIHBhdXNlTGF5ZXIuc2V0SGlkZGVuKGZhbHNlKTtcbn1cblxucHJvdGVjdGVkIHBhdXNlQ29udHJvbHNMYXllcigpOiB2b2lkIHtcbiAgICBsZXQgY29udHJvbHNMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJDT05UUk9MU1wiKTtcbiAgICBjb250cm9sc0xheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICBjb250cm9sc0xheWVyLnNldEhpZGRlbih0cnVlKTtcbn1cblxucHJvdGVjdGVkIHVucGF1c2VDb250cm9sc0xheWVyKCk6IHZvaWQge1xuICAgIGxldCBjb250cm9sc0xheWVyID0gdGhpcy5nZXRMYXllcihcIkNPTlRST0xTXCIpO1xuICAgIGNvbnRyb2xzTGF5ZXIuc2V0UGF1c2VkKGZhbHNlKTtcbiAgICBjb250cm9sc0xheWVyLnNldEhpZGRlbihmYWxzZSk7XG59XG5cbnByb3RlY3RlZCBwYXVzZVByaW1hcnlMYXllcigpOiB2b2lkIHtcbiAgICBsZXQgcHJpbWFyeUxheWVyID0gdGhpcy5nZXRMYXllcihcInByaW1hcnlcIik7XG4gICAgcHJpbWFyeUxheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICBwcmltYXJ5TGF5ZXIuc2V0SGlkZGVuKHRydWUpO1xufVxuXG5wcm90ZWN0ZWQgdW5wYXVzZVByaW1hcnlMYXllcigpOiB2b2lkIHtcbiAgICBsZXQgcHJpbWFyeUxheWVyID0gdGhpcy5nZXRMYXllcihcInByaW1hcnlcIik7XG4gICAgcHJpbWFyeUxheWVyLnNldFBhdXNlZChmYWxzZSk7XG4gICAgcHJpbWFyeUxheWVyLnNldEhpZGRlbihmYWxzZSk7XG59XG5cbnByb3RlY3RlZCBwYXVzZVVJTGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IHVpTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiVUlcIik7XG4gICAgdWlMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgdWlMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG59XG5cbnByb3RlY3RlZCB1bnBhdXNlVUlMYXllcigpOiB2b2lkIHtcbiAgICBsZXQgdWlMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJVSVwiKTtcbiAgICB1aUxheWVyLnNldFBhdXNlZChmYWxzZSk7XG4gICAgdWlMYXllci5zZXRIaWRkZW4oZmFsc2UpO1xufVxuXG5wcm90ZWN0ZWQgcGF1c2VIZWxwTGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IGhlbHBMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJIRUxQXCIpO1xuICAgIGhlbHBMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgaGVscExheWVyLnNldEhpZGRlbih0cnVlKTtcbn1cblxucHJvdGVjdGVkIHVucGF1c2VIZWxwTGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IGhlbHBMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJIRUxQXCIpO1xuICAgIGhlbHBMYXllci5zZXRQYXVzZWQoZmFsc2UpO1xuICAgIGhlbHBMYXllci5zZXRIaWRkZW4oZmFsc2UpO1xufVxuXG5wcm90ZWN0ZWQgcGF1c2VDb21wbGV0ZUxheWVyKCk6IHZvaWQge1xuICAgIGxldCBjb21wbGV0ZUxheWVyID0gdGhpcy5nZXRMYXllcihcIkNPTVBMRVRFXCIpO1xuICAgIGNvbXBsZXRlTGF5ZXIuc2V0UGF1c2VkKHRydWUpO1xuICAgIGNvbXBsZXRlTGF5ZXIuc2V0SGlkZGVuKHRydWUpO1xufVxuXG5wcm90ZWN0ZWQgdW5wYXVzZUNvbXBsZXRlTGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IGNvbXBsZXRlTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiQ09NUExFVEVcIik7XG4gICAgY29tcGxldGVMYXllci5zZXRQYXVzZWQoZmFsc2UpO1xuICAgIGNvbXBsZXRlTGF5ZXIuc2V0SGlkZGVuKGZhbHNlKTtcbn1cblxuXG5cbnByb3RlY3RlZCBoYW5kbGVJdGVtUmVxdWVzdChub2RlOiBHYW1lTm9kZSwgaW52ZW50b3J5OiBJbnZlbnRvcnkpOiB2b2lkIHtcbiAgICBsZXQgaXRlbXM6IEl0ZW1bXSA9IG5ldyBBcnJheTxJdGVtPiguLi50aGlzLmhlYWx0aHBhY2tzLCAuLi50aGlzLmxhc2VyZ3VucykuZmlsdGVyKChpdGVtOiBJdGVtKSA9PiB7XG4gICAgICAgIHJldHVybiBpdGVtLmludmVudG9yeSA9PT0gbnVsbCAmJiBpdGVtLnBvc2l0aW9uLmRpc3RhbmNlVG8obm9kZS5wb3NpdGlvbikgPD0gMTAwO1xuICAgIH0pO1xuXG4gICAgaWYgKGl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaW52ZW50b3J5LmFkZChpdGVtcy5yZWR1Y2UoQ2xvc2VzdFBvc2l0aW9uZWQobm9kZSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGFuZGxlcyBhbiBOUEMgYmVpbmcga2lsbGVkIGJ5IHVucmVnaXN0ZXJpbmcgdGhlIE5QQyBmcm9tIHRoZSBzY2VuZXMgc3Vic3lzdGVtc1xuICogQHBhcmFtIGV2ZW50IGFuIE5QQy1raWxsZWQgZXZlbnRcbiAqL1xucHJvdGVjdGVkIGhhbmRsZUJhdHRsZXJLaWxsZWQoZXZlbnQ6IEdhbWVFdmVudCk6IHZvaWQge1xuICAgIGxldCBpZDogbnVtYmVyID0gZXZlbnQuZGF0YS5nZXQoXCJpZFwiKTtcbiAgICBsZXQgYmF0dGxlciA9IHRoaXMuYmF0dGxlcnMuZmluZChiID0+IGIuaWQgPT09IGlkKTtcblxuICAgIGlmIChiYXR0bGVyKSB7XG4gICAgICAgIGJhdHRsZXIuYmF0dGxlckFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhlYWx0aGJhcnMuZ2V0KGlkKS52aXNpYmxlID0gZmFsc2U7XG4gICAgfVxuICAgIFxufVxuXG4vKiogSW5pdGlhbGl6ZXMgdGhlIGxheWVycyBpbiB0aGUgc2NlbmUgKi9cbnByb3RlY3RlZCBpbml0TGF5ZXJzKCk6IHZvaWQge1xuXG4gICAgdGhpcy5hZGRMYXllcihMYXN0U2NlbmVMYXllcnMuVUkpO1xuICAgIHRoaXMuYWRkTGF5ZXIoTGFzdFNjZW5lTGF5ZXJzLlBBVVNFLCAxMCk7XG4gICAgdGhpcy5hZGRMYXllcihMYXN0U2NlbmVMYXllcnMuSEVMUCwgMTEpO1xuICAgIHRoaXMuYWRkTGF5ZXIoTGFzdFNjZW5lTGF5ZXJzLkNPTlRST0xTLCAxMSk7XG4gICAgdGhpcy5hZGRMYXllcihMYXN0U2NlbmVMYXllcnMuQ09NUExFVEUsIDEyKTtcblxuICAgIHRoaXMuYWRkTGF5ZXIoXCJwcmltYXJ5XCIsIDUpO1xufVxuXG5cblxuXG4vKipcbiAqIEluaXRpYWxpemVzIHRoZSBwbGF5ZXIgaW4gdGhlIHNjZW5lXG4gKi9cbnByb3RlY3RlZCBpbml0aWFsaXplUGxheWVyKCk6IHZvaWQge1xuICAgIGNvbnN0IGNlbnRlciA9IHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCk7XG4gICAgbGV0IHBsYXllciA9IHRoaXMuYWRkLmFuaW1hdGVkU3ByaXRlKFBsYXllckFjdG9yLCBcInBsYXllcjFcIiwgXCJwcmltYXJ5XCIpO1xuICAgIHBsYXllci5wb3NpdGlvbi5zZXQoY2VudGVyLnggKyAxNSwgY2VudGVyLnkgKyAzOTApO1xuXG4gICAgcGxheWVyLmJhdHRsZUdyb3VwID0gMjtcbiAgICBcblxuICAgIHBsYXllci5oZWFsdGggPSAxMDtcbiAgICBwbGF5ZXIubWF4SGVhbHRoID0gMTA7XG4gICAgcGxheWVyLnNjYWxlID0gbmV3IFZlYzIoMC40LCAwLjQpOyAvLyBTY2FsZXMgcGxheWVyIFxuXG4gICAgcGxheWVyLmludmVudG9yeS5vbkNoYW5nZSA9IEl0ZW1FdmVudC5JTlZFTlRPUllfQ0hBTkdFRFxuICAgIC8vIHRoaXMuaW52ZW50b3J5SHVkID0gbmV3IEludmVudG9yeUhVRCh0aGlzLCBwbGF5ZXIuaW52ZW50b3J5LCBcImludmVudG9yeVNsb3RcIiwge1xuICAgIC8vICAgICBzdGFydDogbmV3IFZlYzIoMjMyLCAyNCksXG4gICAgLy8gICAgIHNsb3RMYXllcjogXCJzbG90c1wiLFxuICAgIC8vICAgICBwYWRkaW5nOiA4LFxuICAgIC8vICAgICBpdGVtTGF5ZXI6IFwiaXRlbXNcIlxuICAgIC8vIH0pO1xuXG4gICAgLy8gR2l2ZSB0aGUgcGxheWVyIHBoeXNpY3NcbiAgICBwbGF5ZXIuYWRkUGh5c2ljcyhuZXcgQUFCQihWZWMyLlpFUk8sIG5ldyBWZWMyKDE2LCAxNikpKTtcblxuICAgIC8vIEdpdmUgdGhlIHBsYXllciBhIGhlYWx0aGJhclxuICAgIGxldCBoZWFsdGhiYXIgPSBuZXcgSGVhbHRoYmFySFVEKHRoaXMsIHBsYXllciwgXCJwcmltYXJ5XCIsIHtzaXplOiBwbGF5ZXIuc2l6ZS5jbG9uZSgpLnNjYWxlZCgxLCAxLzQpLCBvZmZzZXQ6IHBsYXllci5zaXplLmNsb25lKCkuc2NhbGVkKDAsIC0xLzMpfSk7XG4gICAgdGhpcy5oZWFsdGhiYXJzLnNldChwbGF5ZXIuaWQsIGhlYWx0aGJhcik7XG5cbiAgICAvLyBHaXZlIHRoZSBwbGF5ZXIgUGxheWVyQUlcbiAgICBwbGF5ZXIuYWRkQUkoUGxheWVyQUkpO1xuXG4gICAgLy8gU3RhcnQgdGhlIHBsYXllciBpbiB0aGUgXCJJRExFXCIgYW5pbWF0aW9uXG4gICAgcGxheWVyLmFuaW1hdGlvbi5wbGF5KFwiSURMRVwiKTtcbiAgICBcbiAgICB0aGlzLmJhdHRsZXJzLnB1c2gocGxheWVyKTtcbiAgICB0aGlzLnBsYXllci5wdXNoKHBsYXllcik7XG4gICAgdGhpcy52aWV3cG9ydC5mb2xsb3cocGxheWVyKTtcbiAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgzKTtcbiAgICBcbn1cbi8qKlxuICogSW5pdGlhbGl6ZSB0aGUgTlBDcyBcbiAqL1xucHJvdGVjdGVkIGluaXRpYWxpemVOUENzKCk6IHZvaWQge1xuXG4gICAgbGV0IG5wYyA9IHRoaXMuYWRkLmFuaW1hdGVkU3ByaXRlKE5QQ0FjdG9yLCBcIkJvc3NcIiwgXCJwcmltYXJ5XCIpO1xuICAgICAgICB0aGlzLmJvc3MgPSBucGM7XG4gICAgICAgIG5wYy5wb3NpdGlvbi5zZXQoNjUwLDE1MCk7XG4gICAgICAgIHRoaXMuYm9zc0xvY2F0aW9uID0gbmV3IFZlYzIoNjUwLCAxNTApO1xuICAgICAgICBucGMuYWRkUGh5c2ljcyhuZXcgQUFCQihWZWMyLlpFUk8sIG5ldyBWZWMyKDMyLCAzMikpLCBudWxsLCBmYWxzZSk7XG5cbiAgICAgICAgLy8gR2l2ZSB0aGUgTlBDUyB0aGVpciBoZWFsdGhiYXJzXG4gICAgICAgIGxldCBoZWFsdGhiYXIgPSBuZXcgSGVhbHRoYmFySFVEKHRoaXMsIG5wYywgXCJwcmltYXJ5XCIsIHtzaXplOiBucGMuc2l6ZS5jbG9uZSgpLnNjYWxlZCg0LCAxLzQpLCBvZmZzZXQ6IG5wYy5zaXplLmNsb25lKCkuc2NhbGVkKDAsIC0xLzIpfSk7XG4gICAgICAgIHRoaXMuaGVhbHRoYmFycy5zZXQobnBjLmlkLCBoZWFsdGhiYXIpO1xuXG4gICAgICAgIG5wYy5iYXR0bGVHcm91cCA9IDFcbiAgICAgICAgbnBjLnNwZWVkID0gMTA7XG4gICAgICAgIG5wYy5oZWFsdGggPSA1MDtcbiAgICAgICAgbnBjLm1heEhlYWx0aCA9IDUwO1xuICAgICAgICBucGMubmF2a2V5ID0gXCJuYXZtZXNoXCI7XG4gICAgICAgIG5wYy5zY2FsZSA9IG5ldyBWZWMyKDEsMSk7XG5cblxuICAgICAgICAvLyBHaXZlIHRoZSBOUENzIHRoZWlyIEFJXG4gICAgICAgIG5wYy5hZGRBSShHdWFyZEJlaGF2aW9yLCB7dGFyZ2V0OiB0aGlzLmJhdHRsZXJzWzBdLCByYW5nZTogMH0pO1xuXG4gICAgICAgIC8vIFBsYXkgdGhlIE5QQ3MgXCJJRExFXCIgYW5pbWF0aW9uIFxuICAgICAgICBucGMuYW5pbWF0aW9uLnBsYXkoXCJJRExFXCIpO1xuXG4gICAgICAgIHRoaXMuYmF0dGxlcnMucHVzaChucGMpO1xuICAgICAgICB0aGlzLmVuZW1pZXMucHVzaChucGMpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSB0aGUgYmx1ZSBoZWFsZXJzXG4gICAgXG5cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplIHRoZSBpdGVtcyBpbiB0aGUgc2NlbmUgKGhlYWx0aHBhY2tzIGFuZCBsYXNlciBndW5zKVxuICovXG5wcm90ZWN0ZWQgaW5pdGlhbGl6ZUl0ZW1zKCk6IHZvaWQge1xuICAgIGxldCBsYXNlcmd1bnMgPSB0aGlzLmxvYWQuZ2V0T2JqZWN0KFwibGFzZXJndW5zXCIpO1xuICAgIHRoaXMubGFzZXJndW5zID0gbmV3IEFycmF5PExhc2VyR3VuPihsYXNlcmd1bnMuaXRlbXMubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxhc2VyZ3Vucy5pdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgc3ByaXRlID0gdGhpcy5hZGQuc3ByaXRlKFwibGFzZXJHdW5cIiwgXCJwcmltYXJ5XCIpO1xuICAgICAgICBsZXQgbGluZSA9IDxMaW5lPnRoaXMuYWRkLmdyYXBoaWMoR3JhcGhpY1R5cGUuTElORSwgXCJwcmltYXJ5XCIsIHtzdGFydDogVmVjMi5aRVJPLCBlbmQ6IFZlYzIuWkVST30pO1xuICAgICAgICB0aGlzLmxhc2VyZ3Vuc1tpXSA9IExhc2VyR3VuLmNyZWF0ZShzcHJpdGUsIGxpbmUpO1xuICAgICAgICB0aGlzLmxhc2VyZ3Vuc1tpXS5wb3NpdGlvbi5zZXQobGFzZXJndW5zLml0ZW1zW2ldWzBdLCBsYXNlcmd1bnMuaXRlbXNbaV1bMV0pO1xuICAgIH1cblxuICAgIGxldCBoZWFsdGhwYWNrcyA9IHRoaXMubG9hZC5nZXRPYmplY3QoXCJoZWFsdGhwYWNrc1wiKTtcbiAgICB0aGlzLmhlYWx0aHBhY2tzID0gbmV3IEFycmF5PEhlYWx0aHBhY2s+KGhlYWx0aHBhY2tzLml0ZW1zLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoZWFsdGhwYWNrcy5pdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgc3ByaXRlID0gdGhpcy5hZGQuc3ByaXRlKFwiaGVhbHRocGFja1wiLCBcInByaW1hcnlcIik7XG4gICAgICAgIHRoaXMuaGVhbHRocGFja3NbaV0gPSBuZXcgSGVhbHRocGFjayhzcHJpdGUpO1xuICAgICAgICB0aGlzLmhlYWx0aHBhY2tzW2ldLnBvc2l0aW9uLnNldChoZWFsdGhwYWNrcy5pdGVtc1tpXVswXSwgaGVhbHRocGFja3MuaXRlbXNbaV1bMV0pO1xuICAgIH1cbn1cbi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIG5hdm1lc2ggZ3JhcGggdXNlZCBieSB0aGUgTlBDcyBpbiB0aGUgSFczU2NlbmUuIFRoaXMgbWV0aG9kIGlzIGEgbGl0dGxlIGJ1Z2d5LCBhbmRcbiAqIGFuZCBpdCBza2lwcyBvdmVyIHNvbWUgb2YgdGhlIHBvc2l0aW9ucyBvbiB0aGUgdGlsZW1hcC4gSWYgeW91IGNhbiBmaXggbXkgbmF2bWVzaCBnZW5lcmF0aW9uIGFsZ29yaXRobSxcbiAqIGdvIGZvciBpdC5cbiAqIFxuICogLSBQZXRlclxuICovXG5wcm90ZWN0ZWQgaW5pdGlhbGl6ZU5hdm1lc2goKTogdm9pZCB7XG4gICAgLy8gQ3JlYXRlIHRoZSBncmFwaFxuICAgIHRoaXMuZ3JhcGggPSBuZXcgUG9zaXRpb25HcmFwaCgpO1xuXG4gICAgbGV0IGRpbTogVmVjMiA9IHRoaXMud2FsbHMuZ2V0RGltZW5zaW9ucygpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGltLnk7IGkrKykge1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGRpbS54OyBqKyspIHtcbiAgICAgICAgICAgIGxldCB0aWxlOiBBQUJCID0gdGhpcy53YWxscy5nZXRUaWxlQ29sbGlkZXIoaiwgaSk7XG4gICAgICAgICAgICB0aGlzLmdyYXBoLmFkZFBvc2l0aW9uZWROb2RlKHRpbGUuY2VudGVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxldCByYzogVmVjMjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZ3JhcGgubnVtVmVydGljZXM7IGkrKykge1xuICAgICAgICByYyA9IHRoaXMud2FsbHMuZ2V0VGlsZUNvbFJvdyhpKTtcbiAgICAgICAgaWYgKCF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUocmMueCwgcmMueSkgJiZcbiAgICAgICAgICAgICF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUoTWF0aFV0aWxzLmNsYW1wKHJjLnggLSAxLCAwLCBkaW0ueCAtIDEpLCByYy55KSAmJlxuICAgICAgICAgICAgIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShNYXRoVXRpbHMuY2xhbXAocmMueCArIDEsIDAsIGRpbS54IC0gMSksIHJjLnkpICYmXG4gICAgICAgICAgICAhdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKHJjLngsIE1hdGhVdGlscy5jbGFtcChyYy55IC0gMSwgMCwgZGltLnkgLSAxKSkgJiZcbiAgICAgICAgICAgICF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUocmMueCwgTWF0aFV0aWxzLmNsYW1wKHJjLnkgKyAxLCAwLCBkaW0ueSAtIDEpKSAmJlxuICAgICAgICAgICAgIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShNYXRoVXRpbHMuY2xhbXAocmMueCArIDEsIDAsIGRpbS54IC0gMSksIE1hdGhVdGlscy5jbGFtcChyYy55ICsgMSwgMCwgZGltLnkgLSAxKSkgJiZcbiAgICAgICAgICAgICF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUoTWF0aFV0aWxzLmNsYW1wKHJjLnggLSAxLCAwLCBkaW0ueCAtIDEpLCBNYXRoVXRpbHMuY2xhbXAocmMueSArIDEsIDAsIGRpbS55IC0gMSkpICYmXG4gICAgICAgICAgICAhdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKE1hdGhVdGlscy5jbGFtcChyYy54ICsgMSwgMCwgZGltLnggLSAxKSwgTWF0aFV0aWxzLmNsYW1wKHJjLnkgLSAxLCAwLCBkaW0ueSAtIDEpKSAmJlxuICAgICAgICAgICAgIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShNYXRoVXRpbHMuY2xhbXAocmMueCAtIDEsIDAsIGRpbS54IC0gMSksIE1hdGhVdGlscy5jbGFtcChyYy55IC0gMSwgMCwgZGltLnkgLSAxKSlcblxuICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBlZGdlIHRvIHRoZSBsZWZ0XG4gICAgICAgICAgICByYyA9IHRoaXMud2FsbHMuZ2V0VGlsZUNvbFJvdyhpICsgMSk7XG4gICAgICAgICAgICBpZiAoKGkgKyAxKSAlIGRpbS54ICE9PSAwICYmICF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUocmMueCwgcmMueSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdyYXBoLmFkZEVkZ2UoaSwgaSArIDEpO1xuICAgICAgICAgICAgICAgIC8vIHRoaXMuYWRkLmdyYXBoaWMoR3JhcGhpY1R5cGUuTElORSwgXCJncmFwaFwiLCB7c3RhcnQ6IHRoaXMuZ3JhcGguZ2V0Tm9kZVBvc2l0aW9uKGkpLCBlbmQ6IHRoaXMuZ3JhcGguZ2V0Tm9kZVBvc2l0aW9uKGkgKyAxKX0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDcmVhdGUgZWRnZSBiZWxvd1xuICAgICAgICAgICAgcmMgPSB0aGlzLndhbGxzLmdldFRpbGVDb2xSb3coaSArIGRpbS54KTtcbiAgICAgICAgICAgIGlmIChpICsgZGltLnggPCB0aGlzLmdyYXBoLm51bVZlcnRpY2VzICYmICF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUocmMueCwgcmMueSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdyYXBoLmFkZEVkZ2UoaSwgaSArIGRpbS54KTtcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmFkZC5ncmFwaGljKEdyYXBoaWNUeXBlLkxJTkUsIFwiZ3JhcGhcIiwge3N0YXJ0OiB0aGlzLmdyYXBoLmdldE5vZGVQb3NpdGlvbihpKSwgZW5kOiB0aGlzLmdyYXBoLmdldE5vZGVQb3NpdGlvbihpICsgZGltLngpfSlcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZXQgdGhpcyBncmFwaCBhcyBhIG5hdmlnYWJsZSBlbnRpdHlcbiAgICBsZXQgbmF2bWVzaCA9IG5ldyBOYXZtZXNoKHRoaXMuZ3JhcGgpO1xuICAgIC8vIEFkZCBkaWZmZXJlbnQgc3RyYXRlZ2llcyB0byB1c2UgZm9yIHRoaXMgbmF2bWVzaFxuICAgIG5hdm1lc2gucmVnaXN0ZXJTdHJhdGVneShcImRpcmVjdFwiLCBuZXcgRGlyZWN0U3RyYXRlZ3kobmF2bWVzaCkpO1xuICAgIG5hdm1lc2gucmVnaXN0ZXJTdHJhdGVneShcImFzdGFyXCIsIG5ldyBBc3RhclN0cmF0ZWd5KG5hdm1lc2gpKTtcbiAgICAvLyBTZWxlY3QgQSogYXMgb3VyIG5hdmlnYXRpb24gc3RyYXRlZ3lcbiAgICBuYXZtZXNoLnNldFN0cmF0ZWd5KFwiYXN0YXJcIik7XG5cbiAgICAvLyBBZGQgdGhpcyBuYXZtZXNoIHRvIHRoZSBuYXZpZ2F0aW9uIG1hbmFnZXJcbiAgICB0aGlzLm5hdk1hbmFnZXIuYWRkTmF2aWdhYmxlRW50aXR5KFwibmF2bWVzaFwiLCBuYXZtZXNoKTtcbn1cblxucHVibGljIHVubG9hZFNjZW5lKCk6IHZvaWQge1xuICAgIC8vIFRoZSBzY2VuZSBpcyBiZWluZyBkZXN0cm95ZWQsIHNvIHdlIGNhbiBzdG9wIHBsYXlpbmcgdGhlIHNvbmdcbiAgICB0aGlzLmVtaXR0ZXIuZmlyZUV2ZW50KEdhbWVFdmVudFR5cGUuU1RPUF9TT1VORCwge2tleTogdGhpcy5sZXZlbE11c2ljS2V5fSk7XG59XG5cblxuICAgIHB1YmxpYyBnZXRCYXR0bGVycygpOiBCYXR0bGVyW10geyByZXR1cm4gdGhpcy5iYXR0bGVyczsgfVxuXG4gICAgcHVibGljIGdldFdhbGxzKCk6IE9ydGhvZ29uYWxUaWxlbWFwIHsgcmV0dXJuIHRoaXMud2FsbHM7IH1cblxuICAgIHB1YmxpYyBnZXRIZWFsdGhwYWNrcygpOiBIZWFsdGhwYWNrW10geyByZXR1cm4gdGhpcy5oZWFsdGhwYWNrczsgfVxuXG4gICAgcHVibGljIGdldExhc2VyR3VucygpOiBMYXNlckd1bltdIHsgcmV0dXJuIHRoaXMubGFzZXJndW5zOyB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGdpdmVuIHRhcmdldCBwb3NpdGlvbiBpcyB2aXNpYmxlIGZyb20gdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSBwb3NpdGlvbiBcbiAgICAgKiBAcGFyYW0gdGFyZ2V0IFxuICAgICAqIEByZXR1cm5zIFxuICAgICAqL1xuICAgIHB1YmxpYyBpc1RhcmdldFZpc2libGUocG9zaXRpb246IFZlYzIsIHRhcmdldDogVmVjMik6IGJvb2xlYW4ge1xuXG4gICAgICAgIC8vIEdldCB0aGUgbmV3IHBsYXllciBsb2NhdGlvblxuICAgICAgICBsZXQgc3RhcnQgPSBwb3NpdGlvbi5jbG9uZSgpO1xuICAgICAgICBsZXQgZGVsdGEgPSB0YXJnZXQuY2xvbmUoKS5zdWIoc3RhcnQpO1xuXG4gICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCB0aGUgdGlsZW1hcCByZWdpb24gdW50aWwgd2UgZmluZCBhIGNvbGxpc2lvblxuICAgICAgICBsZXQgbWluWCA9IE1hdGgubWluKHN0YXJ0LngsIHRhcmdldC54KTtcbiAgICAgICAgbGV0IG1heFggPSBNYXRoLm1heChzdGFydC54LCB0YXJnZXQueCk7XG4gICAgICAgIGxldCBtaW5ZID0gTWF0aC5taW4oc3RhcnQueSwgdGFyZ2V0LnkpO1xuICAgICAgICBsZXQgbWF4WSA9IE1hdGgubWF4KHN0YXJ0LnksIHRhcmdldC55KTtcblxuICAgICAgICAvLyBHZXQgdGhlIHdhbGwgdGlsZW1hcFxuICAgICAgICBsZXQgd2FsbHMgPSB0aGlzLmdldFdhbGxzKCk7XG5cbiAgICAgICAgbGV0IG1pbkluZGV4ID0gd2FsbHMuZ2V0VGlsZW1hcFBvc2l0aW9uKG1pblgsIG1pblkpO1xuICAgICAgICBsZXQgbWF4SW5kZXggPSB3YWxscy5nZXRUaWxlbWFwUG9zaXRpb24obWF4WCwgbWF4WSk7XG5cbiAgICAgICAgbGV0IHRpbGVTaXplID0gd2FsbHMuZ2V0U2NhbGVkVGlsZVNpemUoKTtcblxuICAgICAgICBmb3IgKGxldCBjb2wgPSBtaW5JbmRleC54OyBjb2wgPD0gbWF4SW5kZXgueDsgY29sKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IHJvdyA9IG1pbkluZGV4Lnk7IHJvdyA8PSBtYXhJbmRleC55OyByb3crKykge1xuICAgICAgICAgICAgICAgIGlmICh3YWxscy5pc1RpbGVDb2xsaWRhYmxlKGNvbCwgcm93KSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIHBvc2l0aW9uIG9mIHRoaXMgdGlsZVxuICAgICAgICAgICAgICAgICAgICBsZXQgdGlsZVBvcyA9IG5ldyBWZWMyKGNvbCAqIHRpbGVTaXplLnggKyB0aWxlU2l6ZS54IC8gMiwgcm93ICogdGlsZVNpemUueSArIHRpbGVTaXplLnkgLyAyKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBjb2xsaWRlciBmb3IgdGhpcyB0aWxlXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb2xsaWRlciA9IG5ldyBBQUJCKHRpbGVQb3MsIHRpbGVTaXplLnNjYWxlZCgxLzQpKTtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgaGl0ID0gY29sbGlkZXIuaW50ZXJzZWN0U2VnbWVudChzdGFydCwgZGVsdGEsIFZlYzIuWkVSTyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGhpdCAhPT0gbnVsbCAmJiBzdGFydC5kaXN0YW5jZVNxVG8oaGl0LnBvcykgPCBzdGFydC5kaXN0YW5jZVNxVG8odGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgaGl0IGEgd2FsbCwgd2UgY2FuJ3Qgc2VlIHRoZSBwbGF5ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgIH1cblxuICAgIFxufSIsImltcG9ydCBQb3NpdGlvbkdyYXBoIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvR3JhcGhzL1Bvc2l0aW9uR3JhcGhcIjtcbmltcG9ydCBBY3RvciBmcm9tIFwiLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL0ludGVyZmFjZXMvQWN0b3JcIjtcbmltcG9ydCBBQUJCIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvU2hhcGVzL0FBQkJcIjtcbmltcG9ydCBTaGFwZSBmcm9tIFwiLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL1NoYXBlcy9TaGFwZVwiO1xuaW1wb3J0IFZlYzIgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgR2FtZUV2ZW50IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9FdmVudHMvR2FtZUV2ZW50XCI7XG5pbXBvcnQgSW5wdXQgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL0lucHV0L0lucHV0XCI7XG5pbXBvcnQgR2FtZU5vZGUgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL05vZGVzL0dhbWVOb2RlXCI7XG5pbXBvcnQgeyBHcmFwaGljVHlwZSB9IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9HcmFwaGljcy9HcmFwaGljVHlwZXNcIjtcbmltcG9ydCBMaW5lIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9HcmFwaGljcy9MaW5lXCI7XG5pbXBvcnQgU3ByaXRlIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9TcHJpdGVzL1Nwcml0ZVwiO1xuaW1wb3J0IE9ydGhvZ29uYWxUaWxlbWFwIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9UaWxlbWFwcy9PcnRob2dvbmFsVGlsZW1hcFwiO1xuaW1wb3J0IFVJRWxlbWVudCBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvVUlFbGVtZW50XCI7XG5pbXBvcnQgQnV0dG9uIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9VSUVsZW1lbnRzL0J1dHRvblwiO1xuaW1wb3J0IHsgVUlFbGVtZW50VHlwZSB9IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9VSUVsZW1lbnRzL1VJRWxlbWVudFR5cGVzXCI7XG5pbXBvcnQgTmF2bWVzaCBmcm9tIFwiLi4vLi4vV29sZmllMkQvUGF0aGZpbmRpbmcvTmF2bWVzaFwiO1xuaW1wb3J0IERpcmVjdFN0cmF0ZWd5IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9QYXRoZmluZGluZy9TdHJhdGVnaWVzL0RpcmVjdFN0cmF0ZWd5XCI7XG5pbXBvcnQgUmVuZGVyaW5nTWFuYWdlciBmcm9tIFwiLi4vLi4vV29sZmllMkQvUmVuZGVyaW5nL1JlbmRlcmluZ01hbmFnZXJcIjtcbmltcG9ydCBTY2VuZU1hbmFnZXIgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1NjZW5lL1NjZW5lTWFuYWdlclwiO1xuaW1wb3J0IFZpZXdwb3J0IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9TY2VuZUdyYXBoL1ZpZXdwb3J0XCI7XG5pbXBvcnQgVGltZXIgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1RpbWluZy9UaW1lclwiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9VdGlscy9Db2xvclwiO1xuaW1wb3J0IE1hdGhVdGlscyBmcm9tIFwiLi4vLi4vV29sZmllMkQvVXRpbHMvTWF0aFV0aWxzXCI7XG5pbXBvcnQgTlBDQWN0b3IgZnJvbSBcIi4uL0FjdG9ycy9OUENBY3RvclwiO1xuaW1wb3J0IFBsYXllckFjdG9yIGZyb20gXCIuLi9BY3RvcnMvUGxheWVyQWN0b3JcIjtcbmltcG9ydCBHdWFyZEJlaGF2aW9yIGZyb20gXCIuLi9BSS9OUEMvTlBDQmVoYXZpb3IvR2F1cmRCZWhhdmlvclwiO1xuaW1wb3J0IEhlYWxlckJlaGF2aW9yIGZyb20gXCIuLi9BSS9OUEMvTlBDQmVoYXZpb3IvSGVhbGVyQmVoYXZpb3JcIjtcbmltcG9ydCBQbGF5ZXJBSSBmcm9tIFwiLi4vQUkvUGxheWVyL1BsYXllckFJXCI7XG5pbXBvcnQgUGxheWVyQ29udHJvbGxlciwgeyBQbGF5ZXJJbnB1dCB9IGZyb20gXCIuLi9BSS9QbGF5ZXIvUGxheWVyQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgSXRlbUV2ZW50LCBQbGF5ZXJFdmVudCwgQmF0dGxlckV2ZW50LCBIdWRFdmVudCB9IGZyb20gXCIuLi9FdmVudHNcIjtcbmltcG9ydCBCYXR0bGVyIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9CYXR0bGVTeXN0ZW0vQmF0dGxlclwiO1xuaW1wb3J0IEJhdHRsZXJCYXNlIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9CYXR0bGVTeXN0ZW0vQmF0dGxlckJhc2VcIjtcbmltcG9ydCBIZWFsdGhiYXJIVUQgZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL0hVRC9IZWFsdGhiYXJIVURcIjtcbmltcG9ydCBJbnZlbnRvcnlIVUQgZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL0hVRC9JbnZlbnRvcnlIVURcIjtcbmltcG9ydCBQYXVzZUhVRCBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvSFVEL1BhdXNlSFVEXCI7XG5pbXBvcnQgSW52ZW50b3J5IGZyb20gXCIuLi9HYW1lU3lzdGVtcy9JdGVtU3lzdGVtL0ludmVudG9yeVwiO1xuaW1wb3J0IEl0ZW0gZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL0l0ZW1TeXN0ZW0vSXRlbVwiO1xuaW1wb3J0IEhlYWx0aHBhY2sgZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL0l0ZW1TeXN0ZW0vSXRlbXMvSGVhbHRocGFja1wiO1xuaW1wb3J0IExhc2VyR3VuIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9JdGVtU3lzdGVtL0l0ZW1zL0xhc2VyR3VuXCI7XG5pbXBvcnQgeyBDbG9zZXN0UG9zaXRpb25lZCB9IGZyb20gXCIuLi9HYW1lU3lzdGVtcy9TZWFyY2hpbmcvSFc0UmVkdWNlcnNcIjtcbmltcG9ydCBCYXNpY1RhcmdldGFibGUgZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL1RhcmdldGluZy9CYXNpY1RhcmdldGFibGVcIjtcbmltcG9ydCBQb3NpdGlvbiBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvVGFyZ2V0aW5nL1Bvc2l0aW9uXCI7XG5pbXBvcnQgQXN0YXJTdHJhdGVneSBmcm9tIFwiLi4vUGF0aGZpbmRpbmcvQXN0YXJTdHJhdGVneVwiO1xuaW1wb3J0IEdhbWVPdmVyIGZyb20gXCIuL0dhbWVPdmVyXCI7XG4vLyBpbXBvcnQgSFc0U2NlbmUgZnJvbSBcIi4vSFc0U2NlbmVcIjtcbi8vIGltcG9ydCBNYWluTWVudSBmcm9tIFwiLi9NYWluTWVudVwiO1xuLy8gaW1wb3J0IExldmVsU2VsZWN0aW9uU2NlbmUgZnJvbSBcIi4vTGV2ZWxTZWxlY3Rpb25TY2VuZVwiO1xuLy8gaW1wb3J0IHsgR2FtZUV2ZW50VHlwZSB9IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9FdmVudHMvR2FtZUV2ZW50VHlwZVwiO1xuLy8gaW1wb3J0IHRlc3RIVzRTY2VuZSBmcm9tIFwiLi9GaW5hbFByb2plY3RTY2VuZVwiO1xuaW1wb3J0IEZpbmFsUHJvamVjdFNjZW5lIGZyb20gXCIuL0ZpbmFsUHJvamVjdFNjZW5lXCI7XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGV2ZWwxU2NlbmUgZXh0ZW5kcyBGaW5hbFByb2plY3RTY2VuZSB7XG5cblxuICAgIHB1YmxpYyBzdGF0aWMgU0hPT1RfQVVESU9fS0VZID0gXCJQTEFZRVJfU0hPT1RcIlxuICAgIHB1YmxpYyBzdGF0aWMgU0hPT1RfQVVESU9fUEFUSCA9IFwiaHc0X2Fzc2V0cy9zb3VuZHMvbGFzZXJTaG9vdC53YXZcIlxuXG4gICAgcHVibGljIHN0YXRpYyBISVRfQVVESU9fS0VZID0gXCJQTEFZRVJfSElUXCJcbiAgICBwdWJsaWMgc3RhdGljIEhJVF9BVURJT19QQVRIID0gXCJodzRfYXNzZXRzL3NvdW5kcy9oaXQud2F2XCJcblxuICAgIHB1YmxpYyBzdGF0aWMgRFlJTkdfQVVESU9fS0VZID0gXCJQTEFZRVJfRFlJTkdcIlxuICAgIHB1YmxpYyBzdGF0aWMgRFlJTkdfQVVESU9fUEFUSCA9IFwiaHc0X2Fzc2V0cy9zb3VuZHMvZHlpbmcud2F2XCJcblxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTEVWRUxfTVVTSUNfS0VZID0gXCJMRVZFTF9NVVNJQ1wiO1xuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTEVWRUxfTVVTSUNfUEFUSCA9IFwiaHc0X2Fzc2V0cy9tdXNpYy9NYWluR2FtZU11c2ljLndhdlwiO1xuXG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3Iodmlld3BvcnQ6IFZpZXdwb3J0LCBzY2VuZU1hbmFnZXI6IFNjZW5lTWFuYWdlciwgcmVuZGVyaW5nTWFuYWdlcjogUmVuZGVyaW5nTWFuYWdlciwgb3B0aW9uczogUmVjb3JkPHN0cmluZywgYW55Pikge1xuICAgICAgICBzdXBlcih2aWV3cG9ydCwgc2NlbmVNYW5hZ2VyLCByZW5kZXJpbmdNYW5hZ2VyLCBvcHRpb25zKTtcblxuICAgICAgICB0aGlzLmJhdHRsZXJzID0gbmV3IEFycmF5PEJhdHRsZXIgJiBBY3Rvcj4oKTtcbiAgICAgICAgdGhpcy5oZWFsdGhiYXJzID0gbmV3IE1hcDxudW1iZXIsIEhlYWx0aGJhckhVRD4oKTtcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBuZXcgQXJyYXk8UGxheWVyQWN0b3I+KCk7XG4gICAgICAgIHRoaXMuZW5lbWllcyA9IG5ldyBBcnJheTxOUENBY3Rvcj4oKTtcbiAgIFxuXG4gICAgICAgIHRoaXMubGFzZXJndW5zID0gbmV3IEFycmF5PExhc2VyR3VuPigpO1xuICAgICAgICB0aGlzLmhlYWx0aHBhY2tzID0gbmV3IEFycmF5PEhlYWx0aHBhY2s+KCk7XG5cbiAgICAgICAgdGhpcy5zaG9vdEF1ZGlvS2V5ID0gTGV2ZWwxU2NlbmUuU0hPT1RfQVVESU9fS0VZO1xuXG4gICAgICAgIHRoaXMuaGl0QXVkaW9LZXkgPSBMZXZlbDFTY2VuZS5ISVRfQVVESU9fS0VZO1xuXG4gICAgICAgIHRoaXMuZHlpbmdBdWRpb0tleSA9IExldmVsMVNjZW5lLkRZSU5HX0FVRElPX0tFWTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMubGV2ZWxNdXNpY0tleSA9IExldmVsMVNjZW5lLkxFVkVMX01VU0lDX0tFWVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBzZWUgU2NlbmUudXBkYXRlKClcbiAgICAgKi9cbiAgICBwdWJsaWMgb3ZlcnJpZGUgbG9hZFNjZW5lKCkge1xuXG5cbiAgICAgICAgLy8gTG9hZCB0aGUgcGxheWVyIGFuZCBlbmVteSBzcHJpdGVzaGVldHNcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KFwicGxheWVyMVwiLCBcImh3NF9hc3NldHMvc3ByaXRlc2hlZXRzL1dhcmJhbGxfMDAxX0x1a2FzLmpzb25cIik7XG5cbiAgICAgICAgLy8gTG9hZCBpbiB0aGUgZW5lbXkgc3ByaXRlc1xuICAgICAgICB0aGlzLmxvYWQuc3ByaXRlc2hlZXQoXCJCbHVlRW5lbXlcIiwgXCJodzRfYXNzZXRzL3Nwcml0ZXNoZWV0cy9Qc3lmbHkuanNvblwiKTtcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KFwiUmVkRW5lbXlcIiwgXCJodzRfYXNzZXRzL3Nwcml0ZXNoZWV0cy9CYWxsX0JhdC5qc29uXCIpO1xuICAgICAgICB0aGlzLmxvYWQuc3ByaXRlc2hlZXQoXCJCbHVlSGVhbGVyXCIsIFwiaHc0X2Fzc2V0cy9zcHJpdGVzaGVldHMvUHN5Zmx5Lmpzb25cIik7XG4gICAgICAgIHRoaXMubG9hZC5zcHJpdGVzaGVldChcIlJlZEhlYWxlclwiLCBcImh3NF9hc3NldHMvc3ByaXRlc2hlZXRzL0JhbGxfQmF0Lmpzb25cIik7XG5cbiAgICAgICAgLy8gTG9hZCB0aGUgdGlsZW1hcFxuICAgICAgICB0aGlzLmxvYWQudGlsZW1hcChcImxldmVsXCIsIFwiaHc0X2Fzc2V0cy90aWxlbWFwcy9CR0NUaWxlbWFwLmpzb25cIik7XG5cbiAgICAgICAgLy8gTG9hZCB0aGUgZW5lbXkgbG9jYXRpb25zXG4gICAgICAgIC8vIHRoaXMubG9hZC5vYmplY3QoXCJyZWRcIiwgXCJodzRfYXNzZXRzL2RhdGEvZW5lbWllcy9sdmwyLmpzb25cIik7XG4gICAgICAgIHRoaXMubG9hZC5vYmplY3QoXCJibHVlXCIsIFwiaHc0X2Fzc2V0cy9kYXRhL2VuZW1pZXMvYmx1ZS5qc29uXCIpO1xuXG4gICAgICAgIC8vIExvYWQgdGhlIGhlYWx0aHBhY2sgYW5kIGxhc2VyZ3VuIGxvYWN0aW9uc1xuICAgICAgICB0aGlzLmxvYWQub2JqZWN0KFwiaGVhbHRocGFja3NcIiwgXCJodzRfYXNzZXRzL2RhdGEvaXRlbXMvaGVhbHRocGFja3MuanNvblwiKTtcbiAgICAgICAgdGhpcy5sb2FkLm9iamVjdChcImxhc2VyZ3Vuc1wiLCBcImh3NF9hc3NldHMvZGF0YS9pdGVtcy9sYXNlcmd1bnMuanNvblwiKTtcblxuICAgICAgICAvLyBMb2FkIHRoZSBoZWFsdGhwYWNrLCBpbnZlbnRvcnkgc2xvdCwgYW5kIGxhc2VyIGd1biBzcHJpdGVzXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShcImhlYWx0aHBhY2tcIiwgXCJodzRfYXNzZXRzL3Nwcml0ZXMvaGVhbHRocGFjay5wbmdcIik7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShcImludmVudG9yeVNsb3RcIiwgXCJodzRfYXNzZXRzL3Nwcml0ZXMvaW52ZW50b3J5LnBuZ1wiKTtcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKFwibGFzZXJHdW5cIiwgXCJodzRfYXNzZXRzL3Nwcml0ZXMvbGFzZXJHdW4ucG5nXCIpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoRmluYWxQcm9qZWN0U2NlbmUuUEFVU0VfS0VZLCBGaW5hbFByb2plY3RTY2VuZS5QQVVTRV9QQVRIKTtcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKEZpbmFsUHJvamVjdFNjZW5lLkhFTFBfS0VZLCBGaW5hbFByb2plY3RTY2VuZS5IRUxQX1BBVEgpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoRmluYWxQcm9qZWN0U2NlbmUuQ09OVFJPTFNfS0VZLCBGaW5hbFByb2plY3RTY2VuZS5DT05UUk9MU19QQVRIKTtcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKEZpbmFsUHJvamVjdFNjZW5lLkNPTVBMRVRFX0tFWSwgRmluYWxQcm9qZWN0U2NlbmUuQ09NUExFVEVfUEFUSCk7XG5cbiAgICAgICAgdGhpcy5sb2FkLmF1ZGlvKHRoaXMuc2hvb3RBdWRpb0tleSwgTGV2ZWwxU2NlbmUuU0hPT1RfQVVESU9fUEFUSCk7XG4gICAgICAgIHRoaXMubG9hZC5hdWRpbyh0aGlzLmhpdEF1ZGlvS2V5LCBMZXZlbDFTY2VuZS5ISVRfQVVESU9fUEFUSCk7XG4gICAgICAgIHRoaXMubG9hZC5hdWRpbyh0aGlzLmR5aW5nQXVkaW9LZXksIExldmVsMVNjZW5lLkRZSU5HX0FVRElPX1BBVEgpO1xuICAgICAgICB0aGlzLmxvYWQuYXVkaW8odGhpcy5sZXZlbE11c2ljS2V5LCBMZXZlbDFTY2VuZS5MRVZFTF9NVVNJQ19QQVRIKTtcblxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAc2VlIFNjZW5lLnN0YXJ0U2NlbmVcbiAgICAgKi9cbiAgICBwdWJsaWMgb3ZlcnJpZGUgc3RhcnRTY2VuZSgpIHtcbiAgICAgICAgc3VwZXIuc3RhcnRTY2VuZSgpO1xuICAgICAgICBcbiAgICB9XG5cblxuICAgIHB1YmxpYyBnZXRCYXR0bGVycygpOiBCYXR0bGVyW10geyByZXR1cm4gdGhpcy5iYXR0bGVyczsgfVxuXG4gICAgcHVibGljIGdldFdhbGxzKCk6IE9ydGhvZ29uYWxUaWxlbWFwIHsgcmV0dXJuIHRoaXMud2FsbHM7IH1cblxuICAgIHB1YmxpYyBnZXRIZWFsdGhwYWNrcygpOiBIZWFsdGhwYWNrW10geyByZXR1cm4gdGhpcy5oZWFsdGhwYWNrczsgfVxuXG4gICAgcHVibGljIGdldExhc2VyR3VucygpOiBMYXNlckd1bltdIHsgcmV0dXJuIHRoaXMubGFzZXJndW5zOyB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGdpdmVuIHRhcmdldCBwb3NpdGlvbiBpcyB2aXNpYmxlIGZyb20gdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSBwb3NpdGlvbiBcbiAgICAgKiBAcGFyYW0gdGFyZ2V0IFxuICAgICAqIEByZXR1cm5zIFxuICAgICAqL1xuICAgIHB1YmxpYyBpc1RhcmdldFZpc2libGUocG9zaXRpb246IFZlYzIsIHRhcmdldDogVmVjMik6IGJvb2xlYW4ge1xuXG4gICAgICAgIC8vIEdldCB0aGUgbmV3IHBsYXllciBsb2NhdGlvblxuICAgICAgICBsZXQgc3RhcnQgPSBwb3NpdGlvbi5jbG9uZSgpO1xuICAgICAgICBsZXQgZGVsdGEgPSB0YXJnZXQuY2xvbmUoKS5zdWIoc3RhcnQpO1xuXG4gICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCB0aGUgdGlsZW1hcCByZWdpb24gdW50aWwgd2UgZmluZCBhIGNvbGxpc2lvblxuICAgICAgICBsZXQgbWluWCA9IE1hdGgubWluKHN0YXJ0LngsIHRhcmdldC54KTtcbiAgICAgICAgbGV0IG1heFggPSBNYXRoLm1heChzdGFydC54LCB0YXJnZXQueCk7XG4gICAgICAgIGxldCBtaW5ZID0gTWF0aC5taW4oc3RhcnQueSwgdGFyZ2V0LnkpO1xuICAgICAgICBsZXQgbWF4WSA9IE1hdGgubWF4KHN0YXJ0LnksIHRhcmdldC55KTtcblxuICAgICAgICAvLyBHZXQgdGhlIHdhbGwgdGlsZW1hcFxuICAgICAgICBsZXQgd2FsbHMgPSB0aGlzLmdldFdhbGxzKCk7XG5cbiAgICAgICAgbGV0IG1pbkluZGV4ID0gd2FsbHMuZ2V0VGlsZW1hcFBvc2l0aW9uKG1pblgsIG1pblkpO1xuICAgICAgICBsZXQgbWF4SW5kZXggPSB3YWxscy5nZXRUaWxlbWFwUG9zaXRpb24obWF4WCwgbWF4WSk7XG5cbiAgICAgICAgbGV0IHRpbGVTaXplID0gd2FsbHMuZ2V0U2NhbGVkVGlsZVNpemUoKTtcblxuICAgICAgICBmb3IgKGxldCBjb2wgPSBtaW5JbmRleC54OyBjb2wgPD0gbWF4SW5kZXgueDsgY29sKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IHJvdyA9IG1pbkluZGV4Lnk7IHJvdyA8PSBtYXhJbmRleC55OyByb3crKykge1xuICAgICAgICAgICAgICAgIGlmICh3YWxscy5pc1RpbGVDb2xsaWRhYmxlKGNvbCwgcm93KSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIHBvc2l0aW9uIG9mIHRoaXMgdGlsZVxuICAgICAgICAgICAgICAgICAgICBsZXQgdGlsZVBvcyA9IG5ldyBWZWMyKGNvbCAqIHRpbGVTaXplLnggKyB0aWxlU2l6ZS54IC8gMiwgcm93ICogdGlsZVNpemUueSArIHRpbGVTaXplLnkgLyAyKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBjb2xsaWRlciBmb3IgdGhpcyB0aWxlXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb2xsaWRlciA9IG5ldyBBQUJCKHRpbGVQb3MsIHRpbGVTaXplLnNjYWxlZCgxLzQpKTtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgaGl0ID0gY29sbGlkZXIuaW50ZXJzZWN0U2VnbWVudChzdGFydCwgZGVsdGEsIFZlYzIuWkVSTyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGhpdCAhPT0gbnVsbCAmJiBzdGFydC5kaXN0YW5jZVNxVG8oaGl0LnBvcykgPCBzdGFydC5kaXN0YW5jZVNxVG8odGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgaGl0IGEgd2FsbCwgd2UgY2FuJ3Qgc2VlIHRoZSBwbGF5ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgIH1cblxuICAgIFxufSIsImltcG9ydCBQb3NpdGlvbkdyYXBoIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvR3JhcGhzL1Bvc2l0aW9uR3JhcGhcIjtcbmltcG9ydCBBY3RvciBmcm9tIFwiLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL0ludGVyZmFjZXMvQWN0b3JcIjtcbmltcG9ydCBBQUJCIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvU2hhcGVzL0FBQkJcIjtcbmltcG9ydCBTaGFwZSBmcm9tIFwiLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL1NoYXBlcy9TaGFwZVwiO1xuaW1wb3J0IFZlYzIgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgR2FtZUV2ZW50IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9FdmVudHMvR2FtZUV2ZW50XCI7XG5pbXBvcnQgSW5wdXQgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL0lucHV0L0lucHV0XCI7XG5pbXBvcnQgR2FtZU5vZGUgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL05vZGVzL0dhbWVOb2RlXCI7XG5pbXBvcnQgeyBHcmFwaGljVHlwZSB9IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9HcmFwaGljcy9HcmFwaGljVHlwZXNcIjtcbmltcG9ydCBMaW5lIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9HcmFwaGljcy9MaW5lXCI7XG5pbXBvcnQgU3ByaXRlIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9TcHJpdGVzL1Nwcml0ZVwiO1xuaW1wb3J0IE9ydGhvZ29uYWxUaWxlbWFwIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9UaWxlbWFwcy9PcnRob2dvbmFsVGlsZW1hcFwiO1xuaW1wb3J0IFVJRWxlbWVudCBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvVUlFbGVtZW50XCI7XG5pbXBvcnQgQnV0dG9uIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9VSUVsZW1lbnRzL0J1dHRvblwiO1xuaW1wb3J0IHsgVUlFbGVtZW50VHlwZSB9IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9VSUVsZW1lbnRzL1VJRWxlbWVudFR5cGVzXCI7XG5pbXBvcnQgTmF2bWVzaCBmcm9tIFwiLi4vLi4vV29sZmllMkQvUGF0aGZpbmRpbmcvTmF2bWVzaFwiO1xuaW1wb3J0IERpcmVjdFN0cmF0ZWd5IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9QYXRoZmluZGluZy9TdHJhdGVnaWVzL0RpcmVjdFN0cmF0ZWd5XCI7XG5pbXBvcnQgUmVuZGVyaW5nTWFuYWdlciBmcm9tIFwiLi4vLi4vV29sZmllMkQvUmVuZGVyaW5nL1JlbmRlcmluZ01hbmFnZXJcIjtcbmltcG9ydCBTY2VuZU1hbmFnZXIgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1NjZW5lL1NjZW5lTWFuYWdlclwiO1xuaW1wb3J0IFZpZXdwb3J0IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9TY2VuZUdyYXBoL1ZpZXdwb3J0XCI7XG5pbXBvcnQgVGltZXIgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1RpbWluZy9UaW1lclwiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9VdGlscy9Db2xvclwiO1xuaW1wb3J0IE1hdGhVdGlscyBmcm9tIFwiLi4vLi4vV29sZmllMkQvVXRpbHMvTWF0aFV0aWxzXCI7XG5pbXBvcnQgTlBDQWN0b3IgZnJvbSBcIi4uL0FjdG9ycy9OUENBY3RvclwiO1xuaW1wb3J0IFBsYXllckFjdG9yIGZyb20gXCIuLi9BY3RvcnMvUGxheWVyQWN0b3JcIjtcbmltcG9ydCBHdWFyZEJlaGF2aW9yIGZyb20gXCIuLi9BSS9OUEMvTlBDQmVoYXZpb3IvR2F1cmRCZWhhdmlvclwiO1xuaW1wb3J0IEhlYWxlckJlaGF2aW9yIGZyb20gXCIuLi9BSS9OUEMvTlBDQmVoYXZpb3IvSGVhbGVyQmVoYXZpb3JcIjtcbmltcG9ydCBQbGF5ZXJBSSBmcm9tIFwiLi4vQUkvUGxheWVyL1BsYXllckFJXCI7XG5pbXBvcnQgUGxheWVyQ29udHJvbGxlciwgeyBQbGF5ZXJJbnB1dCB9IGZyb20gXCIuLi9BSS9QbGF5ZXIvUGxheWVyQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgSXRlbUV2ZW50LCBQbGF5ZXJFdmVudCwgQmF0dGxlckV2ZW50LCBIdWRFdmVudCB9IGZyb20gXCIuLi9FdmVudHNcIjtcbmltcG9ydCBCYXR0bGVyIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9CYXR0bGVTeXN0ZW0vQmF0dGxlclwiO1xuaW1wb3J0IEJhdHRsZXJCYXNlIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9CYXR0bGVTeXN0ZW0vQmF0dGxlckJhc2VcIjtcbmltcG9ydCBIZWFsdGhiYXJIVUQgZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL0hVRC9IZWFsdGhiYXJIVURcIjtcbmltcG9ydCBJbnZlbnRvcnlIVUQgZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL0hVRC9JbnZlbnRvcnlIVURcIjtcbmltcG9ydCBQYXVzZUhVRCBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvSFVEL1BhdXNlSFVEXCI7XG5pbXBvcnQgSW52ZW50b3J5IGZyb20gXCIuLi9HYW1lU3lzdGVtcy9JdGVtU3lzdGVtL0ludmVudG9yeVwiO1xuaW1wb3J0IEl0ZW0gZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL0l0ZW1TeXN0ZW0vSXRlbVwiO1xuaW1wb3J0IEhlYWx0aHBhY2sgZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL0l0ZW1TeXN0ZW0vSXRlbXMvSGVhbHRocGFja1wiO1xuaW1wb3J0IExhc2VyR3VuIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9JdGVtU3lzdGVtL0l0ZW1zL0xhc2VyR3VuXCI7XG5pbXBvcnQgeyBDbG9zZXN0UG9zaXRpb25lZCB9IGZyb20gXCIuLi9HYW1lU3lzdGVtcy9TZWFyY2hpbmcvSFc0UmVkdWNlcnNcIjtcbmltcG9ydCBCYXNpY1RhcmdldGFibGUgZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL1RhcmdldGluZy9CYXNpY1RhcmdldGFibGVcIjtcbmltcG9ydCBQb3NpdGlvbiBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvVGFyZ2V0aW5nL1Bvc2l0aW9uXCI7XG5pbXBvcnQgQXN0YXJTdHJhdGVneSBmcm9tIFwiLi4vUGF0aGZpbmRpbmcvQXN0YXJTdHJhdGVneVwiO1xuaW1wb3J0IEdhbWVPdmVyIGZyb20gXCIuL0dhbWVPdmVyXCI7XG4vLyBpbXBvcnQgSFc0U2NlbmUgZnJvbSBcIi4vSFc0U2NlbmVcIjtcbi8vIGltcG9ydCBNYWluTWVudSBmcm9tIFwiLi9NYWluTWVudVwiO1xuLy8gaW1wb3J0IExldmVsU2VsZWN0aW9uU2NlbmUgZnJvbSBcIi4vTGV2ZWxTZWxlY3Rpb25TY2VuZVwiO1xuLy8gaW1wb3J0IHsgR2FtZUV2ZW50VHlwZSB9IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9FdmVudHMvR2FtZUV2ZW50VHlwZVwiO1xuLy8gaW1wb3J0IHRlc3RIVzRTY2VuZSBmcm9tIFwiLi9GaW5hbFByb2plY3RTY2VuZVwiO1xuaW1wb3J0IEZpbmFsUHJvamVjdFNjZW5lIGZyb20gXCIuL0ZpbmFsUHJvamVjdFNjZW5lXCI7XG4vLyBpbXBvcnQgdGVzdE1haW5TY2VuZSBmcm9tIFwiLi90ZXN0bWFpblwiO1xuaW1wb3J0IEhXNFNjZW5lIGZyb20gXCIuL0hXNFNjZW5lXCI7XG5pbXBvcnQgTGV2ZWxTZWxlY3Rpb25TY2VuZSBmcm9tIFwiLi9MZXZlbFNlbGVjdGlvblNjZW5lXCI7XG5pbXBvcnQgTWFpbk1lbnUgZnJvbSBcIi4vTWFpbk1lbnVcIjtcbmltcG9ydCBMYXN0U2NlbmUgZnJvbSBcIi4vTGFzdFNjZW5lXCI7XG5pbXBvcnQgTGV2ZWwxU2NlbmUgZnJvbSBcIi4vTGV2ZWwxU2NlbmVcIjtcbmltcG9ydCBMZXZlbDNTY2VuZSBmcm9tIFwiLi9MZXZlbDNTY2VuZVwiO1xuaW1wb3J0IExldmVsNFNjZW5lIGZyb20gXCIuL0xldmVsNFNjZW5lXCI7XG5pbXBvcnQgTGV2ZWw1U2NlbmUgZnJvbSBcIi4vTGV2ZWw1U2NlbmVcIjtcbmltcG9ydCB0ZXN0TWVudSBmcm9tIFwiLi9NYWluTWVudVwiO1xuaW1wb3J0IHsgR2FtZUV2ZW50VHlwZSB9IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9FdmVudHMvR2FtZUV2ZW50VHlwZVwiO1xuXG5cbmNvbnN0IEJhdHRsZXJHcm91cHMgPSB7XG4gICAgUkVEOiAxLFxuICAgIEJMVUU6IDJcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCBjb25zdCBMZXZlbDJTY2VuZUxheWVycyA9IHtcblx0UFJJTUFSWTogXCJQUklNQVJZXCIsXG5cdEJBQ0tHUk9VTkQ6IFwiQkFDS0dST1VORFwiLCBcblx0VUk6IFwiVUlcIixcbiAgICBQQVVTRTogXCJQQVVTRVwiLFxuICAgIENPTlRST0xTOiBcIkNPTlRST0xTXCIsXG4gICAgSEVMUDogXCJIRUxQXCIsXG4gICAgQ09NUExFVEU6IFwiQ09NUExFVEVcIlxufSBhcyBjb25zdDtcblxuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExldmVsMlNjZW5lIGV4dGVuZHMgSFc0U2NlbmUge1xuXG4gICAgLyoqIEdhbWVTeXN0ZW1zIGluIHRoZSBIVzMgU2NlbmUgKi9cbiAgICAvLyBwcml2YXRlIGludmVudG9yeUh1ZDogSW52ZW50b3J5SFVEO1xuXG4gICAgLyoqIEFsbCB0aGUgYmF0dGxlcnMgaW4gdGhlIEhXM1NjZW5lIChpbmNsdWRpbmcgdGhlIHBsYXllcikgKi9cbiAgICBwcm90ZWN0ZWQgYmF0dGxlcnM6IChCYXR0bGVyICYgQWN0b3IpW107XG4gICAgLyoqIEhlYWx0aGJhcnMgZm9yIHRoZSBiYXR0bGVycyAqL1xuICAgIHByb3RlY3RlZCBoZWFsdGhiYXJzOiBNYXA8bnVtYmVyLCBIZWFsdGhiYXJIVUQ+O1xuXG4gICAgcHJvdGVjdGVkIHBsYXllcjogKFBsYXllckFjdG9yKVtdO1xuICAgIHByb3RlY3RlZCBlbmVtaWVzOiAoTlBDQWN0b3IpW107XG5cbiAgICBwcm90ZWN0ZWQgYm9zczogTlBDQWN0b3I7XG4gICAgXG4gICAgLy8gcHJvdGVjdGVkIHNob290QXVkaW9LZXk6IHN0cmluZztcbiAgICBcbiAgICAvLyBwcm90ZWN0ZWQgaGl0QXVkaW9LZXk6IHN0cmluZztcblxuICAgIHByb3RlY3RlZCBsZXZlbE11c2ljS2V5OiBzdHJpbmc7XG5cbiAgICBwcm90ZWN0ZWQgYmFzZXM6IEJhdHRsZXJCYXNlW107XG5cbiAgICBwcm90ZWN0ZWQgaGVhbHRocGFja3M6IEFycmF5PEhlYWx0aHBhY2s+O1xuICAgIHByb3RlY3RlZCBsYXNlcmd1bnM6IEFycmF5PExhc2VyR3VuPjtcblxuICAgIC8vIFRoZSB3YWxsIGxheWVyIG9mIHRoZSB0aWxlbWFwXG4gICAgcHJvdGVjdGVkIHdhbGxzOiBPcnRob2dvbmFsVGlsZW1hcDtcblxuICAgIC8vIFRoZSBwb3NpdGlvbiBncmFwaCBmb3IgdGhlIG5hdm1lc2hcbiAgICBwcm90ZWN0ZWQgZ3JhcGg6IFBvc2l0aW9uR3JhcGg7XG5cbiAgICBwcm90ZWN0ZWQgcGF1c2VJbWFnZTogU3ByaXRlO1xuICAgIHByb3RlY3RlZCBoZWxwSW1hZ2U6IFNwcml0ZTtcbiAgICBwcm90ZWN0ZWQgY29udHJvbHNJbWFnZTogU3ByaXRlO1xuICAgIHByb3RlY3RlZCBjb21wbGV0ZUltYWdlOiBTcHJpdGU7XG5cbiAgICBwcm90ZWN0ZWQgYm9zc0xvY2F0aW9uOiBWZWMyO1xuXG4gICAgcHVibGljIHN0YXRpYyBQQVVTRV9LRVkgPSBcIlBBVVNFXCI7XG4gICAgcHVibGljIHN0YXRpYyBQQVVTRV9QQVRIID0gXCJodzRfYXNzZXRzL3Nwcml0ZXMvUGF1c2VkLVNjcmVlbi5wbmdcIjtcblxuICAgIHB1YmxpYyBzdGF0aWMgSEVMUF9LRVkgPSBcIkhFTFBcIjtcbiAgICBwdWJsaWMgc3RhdGljIEhFTFBfUEFUSCA9IFwiaHc0X2Fzc2V0cy9zcHJpdGVzL0hlbHAtU2NyZWVuLnBuZ1wiO1xuXG5cbiAgICBwdWJsaWMgc3RhdGljIENPTlRST0xTX0tFWSA9IFwiQ09OVFJPTFNcIlxuICAgIHB1YmxpYyBzdGF0aWMgQ09OVFJPTFNfUEFUSCA9IFwiaHc0X2Fzc2V0cy9zcHJpdGVzL0NvbnRyb2xzLVNjcmVlbi5wbmdcIlxuICAgXG4gICAgcHVibGljIHN0YXRpYyBTSE9PVF9BVURJT19LRVkgPSBcIlBMQVlFUl9TSE9PVFwiXG4gICAgcHVibGljIHN0YXRpYyBTSE9PVF9BVURJT19QQVRIID0gXCJodzRfYXNzZXRzL3NvdW5kcy9sYXNlclNob290LndhdlwiXG5cbiAgICBwdWJsaWMgc3RhdGljIENPTVBMRVRFX0tFWSA9IFwiQ09NUExFVEVcIlxuICAgIHB1YmxpYyBzdGF0aWMgQ09NUExFVEVfUEFUSCA9IFwiaHc0X2Fzc2V0cy9zcHJpdGVzL0xldmVsLUNvbXBsZXRlLnBuZ1wiXG5cbiAgICBwdWJsaWMgc3RhdGljIEhJVF9BVURJT19LRVkgPSBcIlBMQVlFUl9ISVRcIlxuICAgIHB1YmxpYyBzdGF0aWMgSElUX0FVRElPX1BBVEggPSBcImh3NF9hc3NldHMvc291bmRzL2hpdC53YXZcIlxuXG4gICAgcHVibGljIHN0YXRpYyBEWUlOR19BVURJT19LRVkgPSBcIlBMQVlFUl9EWUlOR1wiXG4gICAgcHVibGljIHN0YXRpYyBEWUlOR19BVURJT19QQVRIID0gXCJodzRfYXNzZXRzL3NvdW5kcy9keWluZy53YXZcIlxuXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBMRVZFTF9NVVNJQ19LRVkgPSBcIkxFVkVMX01VU0lDXCI7XG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBMRVZFTF9NVVNJQ19QQVRIID0gXCJodzRfYXNzZXRzL211c2ljL01haW5HYW1lTXVzaWMud2F2XCI7XG5cblxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih2aWV3cG9ydDogVmlld3BvcnQsIHNjZW5lTWFuYWdlcjogU2NlbmVNYW5hZ2VyLCByZW5kZXJpbmdNYW5hZ2VyOiBSZW5kZXJpbmdNYW5hZ2VyLCBvcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSB7XG4gICAgICAgIHN1cGVyKHZpZXdwb3J0LCBzY2VuZU1hbmFnZXIsIHJlbmRlcmluZ01hbmFnZXIsIG9wdGlvbnMpO1xuXG4gICAgICAgIHRoaXMuYmF0dGxlcnMgPSBuZXcgQXJyYXk8QmF0dGxlciAmIEFjdG9yPigpO1xuICAgICAgICB0aGlzLmhlYWx0aGJhcnMgPSBuZXcgTWFwPG51bWJlciwgSGVhbHRoYmFySFVEPigpO1xuICAgICAgICB0aGlzLnBsYXllciA9IG5ldyBBcnJheTxQbGF5ZXJBY3Rvcj4oKTtcbiAgICAgICAgdGhpcy5lbmVtaWVzID0gbmV3IEFycmF5PE5QQ0FjdG9yPigpO1xuICAgXG5cbiAgICAgICAgdGhpcy5sYXNlcmd1bnMgPSBuZXcgQXJyYXk8TGFzZXJHdW4+KCk7XG4gICAgICAgIHRoaXMuaGVhbHRocGFja3MgPSBuZXcgQXJyYXk8SGVhbHRocGFjaz4oKTtcblxuICAgICAgICB0aGlzLnNob290QXVkaW9LZXkgPSBMZXZlbDJTY2VuZS5TSE9PVF9BVURJT19LRVk7XG5cbiAgICAgICAgdGhpcy5oaXRBdWRpb0tleSA9IExldmVsMlNjZW5lLkhJVF9BVURJT19LRVk7XG4gICAgICAgIHRoaXMuZHlpbmdBdWRpb0tleSA9IExldmVsMlNjZW5lLkRZSU5HX0FVRElPX0tFWTtcblxuICAgICAgICB0aGlzLmxldmVsTXVzaWNLZXkgPSBMZXZlbDJTY2VuZS5MRVZFTF9NVVNJQ19LRVk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHNlZSBTY2VuZS51cGRhdGUoKVxuICAgICAqL1xuICAgIHB1YmxpYyBvdmVycmlkZSBsb2FkU2NlbmUoKSB7XG5cblxuICAgICAgICAvLyBMb2FkIHRoZSBwbGF5ZXIgYW5kIGVuZW15IHNwcml0ZXNoZWV0c1xuICAgICAgICB0aGlzLmxvYWQuc3ByaXRlc2hlZXQoXCJwbGF5ZXIxXCIsIFwiaHc0X2Fzc2V0cy9zcHJpdGVzaGVldHMvV2FyYmFsbF8wMDFfTHVrYXMuanNvblwiKTtcblxuICAgICAgICAvLyBMb2FkIGluIHRoZSBlbmVteSBzcHJpdGVzXG4gICAgICAgIHRoaXMubG9hZC5zcHJpdGVzaGVldChcIkJsdWVFbmVteVwiLCBcImh3NF9hc3NldHMvc3ByaXRlc2hlZXRzL1NsaW1lLmpzb25cIik7XG4gICAgICAgIHRoaXMubG9hZC5zcHJpdGVzaGVldChcIlJlZEVuZW15XCIsIFwiaHc0X2Fzc2V0cy9zcHJpdGVzaGVldHMvU2xpbWUuanNvblwiKTtcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KFwiQmx1ZUhlYWxlclwiLCBcImh3NF9hc3NldHMvc3ByaXRlc2hlZXRzL1NsaW1lLmpzb25cIik7XG4gICAgICAgIHRoaXMubG9hZC5zcHJpdGVzaGVldChcIlJlZEhlYWxlclwiLCBcImh3NF9hc3NldHMvc3ByaXRlc2hlZXRzL1NsaW1lLmpzb25cIik7XG5cbiAgICAgICAgLy8gTG9hZCB0aGUgdGlsZW1hcFxuICAgICAgICB0aGlzLmxvYWQudGlsZW1hcChcImxldmVsXCIsIFwiaHc0X2Fzc2V0cy90aWxlbWFwcy9MZXZlbDJUaWxlbWFwLmpzb25cIik7XG5cbiAgICAgICAgLy8gTG9hZCB0aGUgZW5lbXkgbG9jYXRpb25zXG4gICAgICAgIC8vIHRoaXMubG9hZC5vYmplY3QoXCJyZWRcIiwgXCJodzRfYXNzZXRzL2RhdGEvZW5lbWllcy9sdmwyLmpzb25cIik7XG4gICAgICAgIHRoaXMubG9hZC5vYmplY3QoXCJibHVlXCIsIFwiaHc0X2Fzc2V0cy9kYXRhL2VuZW1pZXMvcmVkLmpzb25cIik7XG5cbiAgICAgICAgLy8gTG9hZCB0aGUgaGVhbHRocGFjayBhbmQgbGFzZXJndW4gbG9hY3Rpb25zXG4gICAgICAgIHRoaXMubG9hZC5vYmplY3QoXCJoZWFsdGhwYWNrc1wiLCBcImh3NF9hc3NldHMvZGF0YS9pdGVtcy9oZWFsdGhwYWNrcy5qc29uXCIpO1xuICAgICAgICB0aGlzLmxvYWQub2JqZWN0KFwibGFzZXJndW5zXCIsIFwiaHc0X2Fzc2V0cy9kYXRhL2l0ZW1zL2xhc2VyZ3Vucy5qc29uXCIpO1xuXG4gICAgICAgIC8vIExvYWQgdGhlIGhlYWx0aHBhY2ssIGludmVudG9yeSBzbG90LCBhbmQgbGFzZXIgZ3VuIHNwcml0ZXNcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKFwiaGVhbHRocGFja1wiLCBcImh3NF9hc3NldHMvc3ByaXRlcy9oZWFsdGhwYWNrLnBuZ1wiKTtcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKFwiaW52ZW50b3J5U2xvdFwiLCBcImh3NF9hc3NldHMvc3ByaXRlcy9pbnZlbnRvcnkucG5nXCIpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoXCJsYXNlckd1blwiLCBcImh3NF9hc3NldHMvc3ByaXRlcy9sYXNlckd1bi5wbmdcIik7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShMZXZlbDJTY2VuZS5QQVVTRV9LRVksIExldmVsMlNjZW5lLlBBVVNFX1BBVEgpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoTGV2ZWwyU2NlbmUuSEVMUF9LRVksIExldmVsMlNjZW5lLkhFTFBfUEFUSCk7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShMZXZlbDJTY2VuZS5DT05UUk9MU19LRVksIExldmVsMlNjZW5lLkNPTlRST0xTX1BBVEgpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoTGV2ZWwyU2NlbmUuQ09NUExFVEVfS0VZLCBMZXZlbDJTY2VuZS5DT01QTEVURV9QQVRIKTtcblxuXG4gICAgICAgIHRoaXMubG9hZC5hdWRpbyh0aGlzLnNob290QXVkaW9LZXksIExldmVsMlNjZW5lLlNIT09UX0FVRElPX1BBVEgpO1xuICAgICAgICB0aGlzLmxvYWQuYXVkaW8odGhpcy5oaXRBdWRpb0tleSwgTGV2ZWwyU2NlbmUuSElUX0FVRElPX1BBVEgpO1xuICAgICAgICB0aGlzLmxvYWQuYXVkaW8odGhpcy5keWluZ0F1ZGlvS2V5LCBMZXZlbDJTY2VuZS5EWUlOR19BVURJT19QQVRIKTtcbiAgICAgICAgdGhpcy5sb2FkLmF1ZGlvKHRoaXMubGV2ZWxNdXNpY0tleSwgTGV2ZWwyU2NlbmUuTEVWRUxfTVVTSUNfUEFUSCk7XG5cbiAgICB9XG4gICAgXG4gICAgcHVibGljIHN0YXJ0U2NlbmUoKSB7XG4gICAgICAgIC8vIHN1cGVyLnN0YXJ0U2NlbmUoKTtcbiAgICAgICAgLy8gXG5cbiAgICAgICAgY29uc3QgY2VudGVyID0gdGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKTtcblxuICAgICAgICBcblxuICAgICAgICAvLyB0aGlzLmFkZExheWVyKE1haW5TY2VuZUxheWVycy5VSSwgKTtcbiAgICAgICAgLy8gdGhpcy5hZGRMYXllcihNYWluU2NlbmVMYXllcnMuUEFVU0UsIDUpO1xuICAgICAgICAvLyBsZXQgdiA9IHRoaXMuZ2V0TGF5ZXIoXCJVSVwiKTtcbiAgICAgICAgXG4gICAgICAgIFxuXG4gICAgICAgIC8vIEFkZCBpbiB0aGUgdGlsZW1hcFxuICAgICAgICBsZXQgdGlsZW1hcExheWVycyA9IHRoaXMuYWRkLnRpbGVtYXAoXCJsZXZlbFwiKTtcblxuICAgICAgICAvLyBHZXQgdGhlIHdhbGwgbGF5ZXJcbiAgICAgICAgdGhpcy53YWxscyA9IDxPcnRob2dvbmFsVGlsZW1hcD50aWxlbWFwTGF5ZXJzWzFdLmdldEl0ZW1zKClbMF07XG5cbiAgICAgICAgLy8gU2V0IHRoZSB2aWV3cG9ydCBib3VuZHMgdG8gdGhlIHRpbGVtYXBcbiAgICAgICAgbGV0IHRpbGVtYXBTaXplOiBWZWMyID0gdGhpcy53YWxscy5zaXplO1xuXG4gICAgICAgIHRoaXMudmlld3BvcnQuc2V0Qm91bmRzKDAsIDAsIHRpbGVtYXBTaXplLngsIHRpbGVtYXBTaXplLnkpO1xuICAgIFxuICAgICAgICAvLyBcblxuICAgICAgICB0aGlzLmluaXRMYXllcnMoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgcGxheWVyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVBsYXllcigpO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVJdGVtcygpO1xuXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZU5hdm1lc2goKTtcblxuICAgICAgICAvLyBDcmVhdGUgdGhlIE5QQ1NcbiAgICAgICAgdGhpcy5pbml0aWFsaXplTlBDcygpO1xuXG4gICAgICAgIC8vIFN1YnNjcmliZSB0byByZWxldmFudCBldmVudHNcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJoZWFsdGhwYWNrXCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcImVuZW15RGllZFwiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoSXRlbUV2ZW50LklURU1fUkVRVUVTVCk7XG5cbiAgICBcblxuICAgICAgICAvLyBBZGQgYSBVSSBmb3IgaGVhbHRoXG4gICAgICAgIHRoaXMuYWRkVUlMYXllcihcImhlYWx0aFwiKTtcblxuICAgICAgICAvLyBQYXVzZSBCdXR0b24gKE5vdCBuZWVkZWQganVzdCBwcmVzcyBlc2NhcGUpXG4gICAgICAgIC8vIGxldCBwYXVzZSA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTWFpblNjZW5lTGF5ZXJzLlVJLCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54ICsgNjAwLCBjZW50ZXIueSAtIDQwMCksIHRleHQ6IFwiUGF1c2VcIn0pO1xuICAgICAgICAvLyBwYXVzZS5zaXplLnNldCgxMDAsIDUwKTtcbiAgICAgICAgLy8gcGF1c2UuYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICAvLyBwYXVzZS5ib3JkZXJDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICAvLyBwYXVzZS5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgLy8gcGF1c2Uub25DbGlja0V2ZW50SWQgPSBcInBhdXNlXCI7XG5cbiAgICAgICAgLy8gdGhpcy5wYXVzZU1lbnUgPSBwYXVzZTtcblxuICAgICAgICAvLyBUT0RPIE1ha2UgdGV4dCBtb3ZlIHdpdGggYnV0dG9uXG5cbiAgICAgICAgLy8gbGV0IHBhdXNlQmFyID0gbmV3IFBhdXNlSFVEKHRoaXMsIHBhdXNlLCBjZW50ZXIpO1xuICAgICAgICAvLyB0aGlzLnBhdXNlID0gcGF1c2VCYXI7XG5cblxuICAgICAgICBsZXQgcGF1c2VMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJQQVVTRVwiKTtcblxuICAgICAgICB0aGlzLnBhdXNlSW1hZ2UgPSB0aGlzLmFkZC5zcHJpdGUoTGV2ZWwyU2NlbmUuUEFVU0VfS0VZLCBwYXVzZUxheWVyLmdldE5hbWUoKSk7XG4gICAgICAgIHRoaXMucGF1c2VJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuICAgICAgICAvLyB0aGlzLnBhdXNlSW1hZ2UuYWxwaGEgPSAwLjc7XG5cbiAgICAgICAgY29uc3QgdW5wYXVzZSA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTGV2ZWwyU2NlbmVMYXllcnMuUEFVU0UsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLnggLSA1LCBjZW50ZXIueSAtIDIxMCksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgdW5wYXVzZS5zaXplLnNldCg0MDAsIDEwMCk7XG4gICAgICAgIHVucGF1c2UuYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICB1bnBhdXNlLmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIHVucGF1c2UuYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIHVucGF1c2Uub25DbGlja0V2ZW50SWQgPSBcInVucGF1c2VcIjtcblxuICAgICAgICBjb25zdCBtYWluTWVudSA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTGV2ZWwyU2NlbmVMYXllcnMuUEFVU0UsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLnggLSA1LCBjZW50ZXIueSArIDIyMyksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgbWFpbk1lbnUuc2l6ZS5zZXQoNDAwLCAxMDApO1xuICAgICAgICBtYWluTWVudS5ib3JkZXJXaWR0aCA9IDI7XG4gICAgICAgIG1haW5NZW51LmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIG1haW5NZW51LmJhY2tncm91bmRDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBtYWluTWVudS5vbkNsaWNrRXZlbnRJZCA9IFwibWFpbm1lbnVcIjtcblxuICAgICAgICBjb25zdCBjb250cm9sc0J1dHRvbiA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTGV2ZWwyU2NlbmVMYXllcnMuUEFVU0UsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLnggLSA1LCBjZW50ZXIueSAtIDY1KSwgdGV4dDogXCJcIn0pO1xuICAgICAgICBjb250cm9sc0J1dHRvbi5zaXplLnNldCg0MDAsIDEwMCk7XG4gICAgICAgIGNvbnRyb2xzQnV0dG9uLmJvcmRlcldpZHRoID0gMjtcbiAgICAgICAgY29udHJvbHNCdXR0b24uYm9yZGVyQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgY29udHJvbHNCdXR0b24uYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIGNvbnRyb2xzQnV0dG9uLm9uQ2xpY2tFdmVudElkID0gXCJjb250cm9sc1wiO1xuXG4gICAgICAgIGNvbnN0IGhlbHBCdXR0b24gPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIExldmVsMlNjZW5lTGF5ZXJzLlBBVVNFLCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54IC0gNSwgY2VudGVyLnkgKyA4MCksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgaGVscEJ1dHRvbi5zaXplLnNldCg0MDAsIDEwMClcbiAgICAgICAgaGVscEJ1dHRvbi5ib3JkZXJXaWR0aCA9IDI7XG4gICAgICAgIGhlbHBCdXR0b24uYm9yZGVyQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgaGVscEJ1dHRvbi5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgaGVscEJ1dHRvbi5vbkNsaWNrRXZlbnRJZCA9IFwiaGVscFwiO1xuICAgICAgICBcblxuICAgICAgICBwYXVzZUxheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICAgICAgcGF1c2VMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG5cbiAgICAgICBcbiAgICAgICAgbGV0IGNvbnRyb2xzTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiQ09OVFJPTFNcIik7XG5cbiAgICAgICAgdGhpcy5jb250cm9sc0ltYWdlID0gdGhpcy5hZGQuc3ByaXRlKExldmVsMlNjZW5lLkNPTlRST0xTX0tFWSwgY29udHJvbHNMYXllci5nZXROYW1lKCkpO1xuICAgICAgICB0aGlzLmNvbnRyb2xzSW1hZ2UucG9zaXRpb24uY29weSh0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTtcbiAgICAgICAgLy8gdGhpcy5jb250cm9sc0ltYWdlLmFscGhhID0gMC41O1xuXG4gICAgICAgIGNvbnN0IGNvbnRyb2xzQmFja0J1dHRvbiA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTGV2ZWwyU2NlbmVMYXllcnMuQ09OVFJPTFMsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLnggLSA1OTUsIGNlbnRlci55ICsgNDE1KSwgdGV4dDogXCJcIn0pO1xuICAgICAgICBjb250cm9sc0JhY2tCdXR0b24uc2l6ZS5zZXQoMjAwLCA1MCk7XG4gICAgICAgIGNvbnRyb2xzQmFja0J1dHRvbi5ib3JkZXJXaWR0aCA9IDI7XG4gICAgICAgIGNvbnRyb2xzQmFja0J1dHRvbi5ib3JkZXJDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBjb250cm9sc0JhY2tCdXR0b24uYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIGNvbnRyb2xzQmFja0J1dHRvbi5vbkNsaWNrRXZlbnRJZCA9IFwiYmFja2NvbnRyb2xzXCI7XG5cbiAgICAgICAgY29udHJvbHNMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgICAgIGNvbnRyb2xzTGF5ZXIuc2V0SGlkZGVuKHRydWUpO1xuXG4gICAgICAgIC8vIFxuICAgICAgICBsZXQgaGVscExheWVyID0gdGhpcy5nZXRMYXllcihcIkhFTFBcIik7XG5cbiAgICAgICAgdGhpcy5oZWxwSW1hZ2UgPSB0aGlzLmFkZC5zcHJpdGUoTGV2ZWwyU2NlbmUuSEVMUF9LRVksIGhlbHBMYXllci5nZXROYW1lKCkpO1xuICAgICAgICB0aGlzLmhlbHBJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuICAgICAgICAvLyB0aGlzLmhlbHBJbWFnZS5hbHBoYSA9IDAuNTtcblxuICAgICAgICBjb25zdCBoZWxwQmFja0J1dHRvbiA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTGV2ZWwyU2NlbmVMYXllcnMuSEVMUCwge3Bvc2l0aW9uOiBuZXcgVmVjMihjZW50ZXIueCAtIDU5NSwgY2VudGVyLnkgKyA0MTUpLCB0ZXh0OiBcIlwifSk7XG4gICAgICAgIGhlbHBCYWNrQnV0dG9uLnNpemUuc2V0KDIwMCwgNTApO1xuICAgICAgICBoZWxwQmFja0J1dHRvbi5ib3JkZXJXaWR0aCA9IDI7XG4gICAgICAgIGhlbHBCYWNrQnV0dG9uLmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIGhlbHBCYWNrQnV0dG9uLmJhY2tncm91bmRDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBoZWxwQmFja0J1dHRvbi5vbkNsaWNrRXZlbnRJZCA9IFwiaGVscGNvbnRyb2xzXCI7XG5cbiAgICAgICAgaGVscExheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICAgICAgaGVscExheWVyLnNldEhpZGRlbih0cnVlKTtcblxuICAgICAgICAgLy8gQ29tcGxldGUgTGF5ZXJcblxuICAgICAgICAgbGV0IGNvbXBsZXRlTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiQ09NUExFVEVcIik7XG5cbiAgICAgICAgIHRoaXMuY29tcGxldGVJbWFnZSA9IHRoaXMuYWRkLnNwcml0ZShMZXZlbDJTY2VuZS5DT01QTEVURV9LRVksIGNvbXBsZXRlTGF5ZXIuZ2V0TmFtZSgpKTtcbiAgICAgICAgIHRoaXMuY29tcGxldGVJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuIFxuICAgICAgICAgY29uc3QgY29tcGxldGVCdXR0b24gPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIExldmVsMlNjZW5lTGF5ZXJzLkNPTVBMRVRFLCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54LCBjZW50ZXIueSArIDQ3NSksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgIGNvbXBsZXRlQnV0dG9uLnNpemUuc2V0KDEzMjAsIDIwMDApO1xuICAgICAgICAgY29tcGxldGVCdXR0b24uYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICAgY29tcGxldGVCdXR0b24uYm9yZGVyQ29sb3IgPSBDb2xvci5XSElURTtcbiAgICAgICAgIGNvbXBsZXRlQnV0dG9uLmJhY2tncm91bmRDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICAgY29tcGxldGVCdXR0b24ub25DbGlja0V2ZW50SWQgPSBcIm5leHRsdmxcIjtcbiBcbiAgICAgICAgIGNvbXBsZXRlTGF5ZXIuc2V0UGF1c2VkKHRydWUpO1xuICAgICAgICAgY29tcGxldGVMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG4gXG5cblxuXG4gICAgICAgIC8vIHRoaXMucGF1c2VNZW51ID0gdW5wYXVzZTtcblxuICAgICAgICAvLyBsZXQgdmFsID0gdGhpcy5sYXllcnM7XG5cbiAgICAgICAgLy8gY29uc29sZS5sb2codmFsKTtcblxuICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgzKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFBsYXllckV2ZW50LlBMQVlFUl9LSUxMRUQpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShCYXR0bGVyRXZlbnQuQkFUVExFUl9LSUxMRUQpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShCYXR0bGVyRXZlbnQuQkFUVExFUl9SRVNQQVdOKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJwYXVzZVwiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJ1bnBhdXNlXCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcIm1haW5tZW51XCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcImNvbnRyb2xzXCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcImhlbHBcIik7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFwiYmFja2NvbnRyb2xzXCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcImhlbHBjb250cm9sc1wiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJuZXh0bHZsXCIpO1xuXG4gICAgICAgIHRoaXMuZW1pdHRlci5maXJlRXZlbnQoR2FtZUV2ZW50VHlwZS5QTEFZX1NPVU5ELCB7a2V5OiB0aGlzLmxldmVsTXVzaWNLZXksIGxvb3A6IHRydWUsIGhvbGRSZWZlcmVuY2U6IHRydWV9KTtcbiAgICAgICAgLy8gdGhpcy5lbWl0dGVyLmZpcmVFdmVudChHYW1lRXZlbnRUeXBlLlBMQVlfU09VTkQsIHtrZXk6IHRoaXMuZ2V0U2hvb3RBdWRpb0tleSgpLCBsb29wOiBmYWxzZSwgaG9sZFJlZmVyZW5jZTogZmFsc2V9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAc2VlIFNjZW5lLnVwZGF0ZVNjZW5lXG4gICAgICovXG4gIHB1YmxpYyBvdmVycmlkZSB1cGRhdGVTY2VuZShkZWx0YVQ6IG51bWJlcik6IHZvaWQge1xuICAgIHdoaWxlICh0aGlzLnJlY2VpdmVyLmhhc05leHRFdmVudCgpKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlRXZlbnQodGhpcy5yZWNlaXZlci5nZXROZXh0RXZlbnQoKSk7XG4gICAgfVxuICAgIC8vIHRoaXMuaW52ZW50b3J5SHVkLnVwZGF0ZShkZWx0YVQpO1xuICAgIHRoaXMuaGVhbHRoYmFycy5mb3JFYWNoKGhlYWx0aGJhciA9PiBoZWFsdGhiYXIudXBkYXRlKGRlbHRhVCkpO1xuICAgIC8vIHRoaXMucGF1c2Uuc2V0Q2VudGVyKHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuICAgIC8vIHRoaXMucGF1c2VNZW51LnVwZGF0ZShkZWx0YVQpO1xuICAgIC8vIHRoaXMucGF1c2UudXBkYXRlKGRlbHRhVCk7XG5cbiAgICBpZiAoSW5wdXQuaXNLZXlKdXN0UHJlc3NlZChcImVzY2FwZVwiKSl7XG4gICAgXG5cbiAgICAgICAgY29uc29sZS5sb2coXCJFc2NhcGUgcHJlc3NlZFwiKTtcbiAgICAgICAgbGV0IHYgPSBuZXcgR2FtZUV2ZW50KFwicGF1c2VcIiwgbnVsbCk7XG4gICAgICAgIHRoaXMuaGFuZGxlRXZlbnQodik7XG4gICAgfVxuICAgIGlmICh0aGlzLmJvc3MuaGVhbHRoIDw9IDApIHtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgIHRoaXMudW5wYXVzZUNvbXBsZXRlTGF5ZXIoKTtcblxuICAgICAgICB0aGlzLnBsYXllclswXS5mcmVlemUoKTsgLy8gRnJlZXplcyBwbGF5ZXJcbiAgICAgICAgdGhpcy5wbGF5ZXJbMF0uZGlzYWJsZVBoeXNpY3MoKTtcbiAgICAgICAgdGhpcy5wbGF5ZXJbMF0uYWlBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmVuZW1pZXMubGVuZ3RoOyBpKyspeyAvLyBGcmVlemVzIGVuZW1pZXMgXG4gICAgICAgICAgICBpZih0aGlzLmVuZW1pZXNbaV0uYmF0dGxlckFjdGl2ZSA9PSB0cnVlKXtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZW1pZXNbaV0uZnJlZXplKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmVtaWVzW2ldLmRpc2FibGVQaHlzaWNzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmVtaWVzW2ldLmFpQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICB9IFxuXG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IHBhdXNlTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiUEFVU0VcIik7XG4gICBcbiAgICBpZighcGF1c2VMYXllci5pc0hpZGRlbigpKXtcbiAgICAgICAgdGhpcy5wYXVzZUltYWdlLnBvc2l0aW9uLmNvcHkodGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKSk7IC8vIFdvcmtzIGJ1dCB3aGVuIG1vdmluZyB0aGUgc2NyZWVuIGdldHMgbW92ZWQgdXB3YXJkcy5cbiAgICB9XG5cbiAgICBpZihJbnB1dC5pc0tleVByZXNzZWQoXCJ6XCIpKXtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgIH1cbiAgICBcbiAgICBpZihJbnB1dC5pc0tleVByZXNzZWQoXCJ4XCIpKXtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMyk7XG4gICAgIH1cblxuICAgICBpZihJbnB1dC5pc0tleUp1c3RQcmVzc2VkKFwiMVwiKSl7XG4gICAgICAgIHRoaXMudmlld3BvcnQuZm9sbG93KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgxKTtcbiAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShMZXZlbDFTY2VuZSk7XG4gICAgIH1cbiAgICAgaWYoSW5wdXQuaXNLZXlKdXN0UHJlc3NlZChcIjJcIikpe1xuICAgICAgICB0aGlzLnZpZXdwb3J0LmZvbGxvdyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoTGV2ZWwyU2NlbmUpO1xuICAgICB9XG4gICAgIGlmKElucHV0LmlzS2V5SnVzdFByZXNzZWQoXCIzXCIpKXtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKExldmVsM1NjZW5lKTtcbiAgICAgfVxuICAgICBpZihJbnB1dC5pc0tleUp1c3RQcmVzc2VkKFwiNFwiKSl7XG4gICAgICAgIHRoaXMudmlld3BvcnQuZm9sbG93KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgxKTtcbiAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShMZXZlbDRTY2VuZSk7XG4gICAgIH1cbiAgICAgaWYoSW5wdXQuaXNLZXlKdXN0UHJlc3NlZChcIjVcIikpe1xuICAgICAgICB0aGlzLnZpZXdwb3J0LmZvbGxvdyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoTGV2ZWw1U2NlbmUpO1xuICAgICB9XG4gICAgIGlmKElucHV0LmlzS2V5SnVzdFByZXNzZWQoXCI2XCIpKXtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKExhc3RTY2VuZSk7XG4gICAgIH1cblxuICAgICBpZihJbnB1dC5pc0tleUp1c3RQcmVzc2VkKFwidFwiKSl7XG4gICAgICAgIHRoaXMucGxheWVyWzBdLnBvc2l0aW9uID0gdGhpcy5ib3NzTG9jYXRpb247XG4gICAgIH1cblxuXG4gICAgLy8gQW5vdGhlciB3YXkgdG8gcGxheSBzaG9vdCBhdWRpbyBpcyB3aGVuIHBsYXllciBwcmVzc2VkIHNwYWNlXG4gICAgLy8gIGlmKElucHV0LmlzS2V5SnVzdFByZXNzZWQoXCJzcGFjZVwiKSl7XG4gICAgLy8gICAgIGNvbnNvbGUubG9nKFwiU2hvb3QgQXVkaW8gUGxheWVkXCIpO1xuICAgIC8vICAgICB0aGlzLmVtaXR0ZXIuZmlyZUV2ZW50KEdhbWVFdmVudFR5cGUuUExBWV9TT1VORCwge2tleTogdGhpcy5nZXRTaG9vdEF1ZGlvS2V5KCksIGxvb3A6IGZhbHNlLCBob2xkUmVmZXJlbmNlOiBmYWxzZX0pO1xuICAgIC8vICB9XG4gICAgLy8gVE9ETyBJZiBpbnB1dCBpcyAyLCAzLCA0LCA1LCA2IGdvIHRvIHRob3NlIGxldmVscyBieSBjaGFuaW5nIHRoZSBzY2VuZVxuXG59XG5cbi8qKlxuICogSGFuZGxlIGV2ZW50cyBmcm9tIHRoZSByZXN0IG9mIHRoZSBnYW1lXG4gKiBAcGFyYW0gZXZlbnQgYSBnYW1lIGV2ZW50XG4gKi9cbnB1YmxpYyBoYW5kbGVFdmVudChldmVudDogR2FtZUV2ZW50KTogdm9pZCB7XG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XG4gICAgICAgIGNhc2UgQmF0dGxlckV2ZW50LkJBVFRMRVJfS0lMTEVEOiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUJhdHRsZXJLaWxsZWQoZXZlbnQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBCYXR0bGVyRXZlbnQuQkFUVExFUl9SRVNQQVdOOiB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEl0ZW1FdmVudC5JVEVNX1JFUVVFU1Q6IHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlSXRlbVJlcXVlc3QoZXZlbnQuZGF0YS5nZXQoXCJub2RlXCIpLCBldmVudC5kYXRhLmdldChcImludmVudG9yeVwiKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFBsYXllckV2ZW50LlBMQVlFUl9LSUxMRUQ6IHtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuZm9sbG93KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKEdhbWVPdmVyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwicGF1c2VcIjoge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJQYXVzZVwiKTtcblxuICAgICAgICAgICAgLy8gdGhpcy5wYXVzZUltYWdlLnNjYWxlID0gdGhpcy5wYXVzZUltYWdlLnNpemVXaXRoWm9vbTtcblxuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgICAgICB0aGlzLnBhdXNlSW1hZ2UucG9zaXRpb24uY29weSh0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTsgLy8gV29ya3MgYnV0IHdoZW4gbW92aW5nIHRoZSBzY3JlZW4gZ2V0cyBtb3ZlZCB1cHdhcmRzLlxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJbMF0uZnJlZXplKCk7IC8vIEZyZWV6ZXMgcGxheWVyXG4gICAgICAgICAgICB0aGlzLnBsYXllclswXS5kaXNhYmxlUGh5c2ljcygpO1xuXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5lbmVtaWVzLmxlbmd0aDsgaSsrKXsgLy8gRnJlZXplcyBlbmVtaWVzIFxuICAgICAgICAgICAgICAgIGlmKHRoaXMuZW5lbWllc1tpXS5iYXR0bGVyQWN0aXZlID09IHRydWUpe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZW1pZXNbaV0uZnJlZXplKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5lbWllc1tpXS5kaXNhYmxlUGh5c2ljcygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZW1pZXNbaV0uYWlBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICB9IFxuICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgdGhpcy51bnBhdXNlUGF1c2VMYXllcigpOyBcbiAgICAgICAgICAgdGhpcy5wYXVzZVByaW1hcnlMYXllcigpO1xuICAgICAgICAgICB0aGlzLnBhdXNlVUlMYXllcigpO1xuXG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJ1bnBhdXNlXCI6IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidW5wYXVzZVwiKTtcblxuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMyk7XG4gICAgICAgICAgICBsZXQgY2VudGVyID0gdGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKTtcbiAgICAgICAgICAgIC8vIHRoaXMucGF1c2VNZW51LnBvc2l0aW9uLnNldChjZW50ZXIueCwgY2VudGVyLnkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMucGxheWVyWzBdLnVuZnJlZXplKCk7XG4gICAgICAgICAgICB0aGlzLnBsYXllclswXS5lbmFibGVQaHlzaWNzKCk7XG4gICAgICAgICAgICAvLyBJbnB1dC5lbmFibGVJbnB1dCgpO1xuXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5lbmVtaWVzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmVuZW1pZXNbaV0uYmF0dGxlckFjdGl2ZSA9PSB0cnVlKXsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5lbWllc1tpXS51bmZyZWV6ZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZW1pZXNbaV0uZW5hYmxlUGh5c2ljcygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZW1pZXNbaV0uYWlBY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gdGhpcy5lbmVtaWVzW2ldLnNldFRhcmdldCh0aGlzLmJhdHRsZXJzWzBdKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5wYXVzZVBhdXNlTGF5ZXIoKTtcbiAgICAgICAgICAgIHRoaXMudW5wYXVzZVByaW1hcnlMYXllcigpO1xuICAgICAgICAgICAgdGhpcy51bnBhdXNlVUlMYXllcigpO1xuXG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IFxuICAgICAgICBjYXNlIFwibWFpbm1lbnVcIjoge1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShNYWluTWVudSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBcbiAgICAgICAgY2FzZSBcImNvbnRyb2xzXCI6IHtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbHNJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuICAgICAgICAgICAgdGhpcy5wYXVzZVBhdXNlTGF5ZXIoKTtcbiAgICAgICAgICAgIHRoaXMudW5wYXVzZUNvbnRyb2xzTGF5ZXIoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IFxuICAgICAgICBjYXNlIFwiYmFja2NvbnRyb2xzXCI6IHtcbiAgICAgICAgICAgIHRoaXMudW5wYXVzZVBhdXNlTGF5ZXIoKTtcbiAgICAgICAgICAgIHRoaXMucGF1c2VDb250cm9sc0xheWVyKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiaGVscFwiOiB7XG4gICAgICAgICAgICB0aGlzLmhlbHBJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuICAgICAgICAgICAgdGhpcy5wYXVzZVBhdXNlTGF5ZXIoKTtcbiAgICAgICAgICAgIHRoaXMudW5wYXVzZUhlbHBMYXllcigpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImhlbHBjb250cm9sc1wiOiB7XG4gICAgICAgICAgICB0aGlzLnVucGF1c2VQYXVzZUxheWVyKCk7XG4gICAgICAgICAgICB0aGlzLnBhdXNlSGVscExheWVyKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwibmV4dGx2bFwiOiB7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LmZvbGxvdyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKExldmVsM1NjZW5lKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5oYW5kbGVkIGV2ZW50IHR5cGUgXCIke2V2ZW50LnR5cGV9XCIgY2F1Z2h0IGluIEhXM1NjZW5lIGV2ZW50IGhhbmRsZXJgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxucHJvdGVjdGVkIHBhdXNlUGF1c2VMYXllcigpOiB2b2lkIHtcbiAgICBsZXQgcGF1c2VMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJQQVVTRVwiKTtcbiAgICBwYXVzZUxheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICBwYXVzZUxheWVyLnNldEhpZGRlbih0cnVlKTtcbn1cblxucHJvdGVjdGVkIHVucGF1c2VQYXVzZUxheWVyKCk6IHZvaWQge1xuICAgIGxldCBwYXVzZUxheWVyID0gdGhpcy5nZXRMYXllcihcIlBBVVNFXCIpO1xuICAgIHBhdXNlTGF5ZXIuc2V0UGF1c2VkKGZhbHNlKTtcbiAgICBwYXVzZUxheWVyLnNldEhpZGRlbihmYWxzZSk7XG59XG5cbnByb3RlY3RlZCBwYXVzZUNvbnRyb2xzTGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IGNvbnRyb2xzTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiQ09OVFJPTFNcIik7XG4gICAgY29udHJvbHNMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgY29udHJvbHNMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG59XG5cbnByb3RlY3RlZCB1bnBhdXNlQ29udHJvbHNMYXllcigpOiB2b2lkIHtcbiAgICBsZXQgY29udHJvbHNMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJDT05UUk9MU1wiKTtcbiAgICBjb250cm9sc0xheWVyLnNldFBhdXNlZChmYWxzZSk7XG4gICAgY29udHJvbHNMYXllci5zZXRIaWRkZW4oZmFsc2UpO1xufVxuXG5wcm90ZWN0ZWQgcGF1c2VQcmltYXJ5TGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IHByaW1hcnlMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJwcmltYXJ5XCIpO1xuICAgIHByaW1hcnlMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgcHJpbWFyeUxheWVyLnNldEhpZGRlbih0cnVlKTtcbn1cblxucHJvdGVjdGVkIHVucGF1c2VQcmltYXJ5TGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IHByaW1hcnlMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJwcmltYXJ5XCIpO1xuICAgIHByaW1hcnlMYXllci5zZXRQYXVzZWQoZmFsc2UpO1xuICAgIHByaW1hcnlMYXllci5zZXRIaWRkZW4oZmFsc2UpO1xufVxuXG5wcm90ZWN0ZWQgcGF1c2VVSUxheWVyKCk6IHZvaWQge1xuICAgIGxldCB1aUxheWVyID0gdGhpcy5nZXRMYXllcihcIlVJXCIpO1xuICAgIHVpTGF5ZXIuc2V0UGF1c2VkKHRydWUpO1xuICAgIHVpTGF5ZXIuc2V0SGlkZGVuKHRydWUpO1xufVxuXG5wcm90ZWN0ZWQgdW5wYXVzZVVJTGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IHVpTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiVUlcIik7XG4gICAgdWlMYXllci5zZXRQYXVzZWQoZmFsc2UpO1xuICAgIHVpTGF5ZXIuc2V0SGlkZGVuKGZhbHNlKTtcbn1cblxucHJvdGVjdGVkIHBhdXNlSGVscExheWVyKCk6IHZvaWQge1xuICAgIGxldCBoZWxwTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiSEVMUFwiKTtcbiAgICBoZWxwTGF5ZXIuc2V0UGF1c2VkKHRydWUpO1xuICAgIGhlbHBMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG59XG5cbnByb3RlY3RlZCB1bnBhdXNlSGVscExheWVyKCk6IHZvaWQge1xuICAgIGxldCBoZWxwTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiSEVMUFwiKTtcbiAgICBoZWxwTGF5ZXIuc2V0UGF1c2VkKGZhbHNlKTtcbiAgICBoZWxwTGF5ZXIuc2V0SGlkZGVuKGZhbHNlKTtcbn1cblxucHJvdGVjdGVkIHBhdXNlQ29tcGxldGVMYXllcigpOiB2b2lkIHtcbiAgICBsZXQgY29tcGxldGVMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJDT01QTEVURVwiKTtcbiAgICBjb21wbGV0ZUxheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICBjb21wbGV0ZUxheWVyLnNldEhpZGRlbih0cnVlKTtcbn1cblxucHJvdGVjdGVkIHVucGF1c2VDb21wbGV0ZUxheWVyKCk6IHZvaWQge1xuICAgIGxldCBjb21wbGV0ZUxheWVyID0gdGhpcy5nZXRMYXllcihcIkNPTVBMRVRFXCIpO1xuICAgIGNvbXBsZXRlTGF5ZXIuc2V0UGF1c2VkKGZhbHNlKTtcbiAgICBjb21wbGV0ZUxheWVyLnNldEhpZGRlbihmYWxzZSk7XG59XG5cblxuXG5wcm90ZWN0ZWQgaGFuZGxlSXRlbVJlcXVlc3Qobm9kZTogR2FtZU5vZGUsIGludmVudG9yeTogSW52ZW50b3J5KTogdm9pZCB7XG4gICAgbGV0IGl0ZW1zOiBJdGVtW10gPSBuZXcgQXJyYXk8SXRlbT4oLi4udGhpcy5oZWFsdGhwYWNrcywgLi4udGhpcy5sYXNlcmd1bnMpLmZpbHRlcigoaXRlbTogSXRlbSkgPT4ge1xuICAgICAgICByZXR1cm4gaXRlbS5pbnZlbnRvcnkgPT09IG51bGwgJiYgaXRlbS5wb3NpdGlvbi5kaXN0YW5jZVRvKG5vZGUucG9zaXRpb24pIDw9IDEwMDtcbiAgICB9KTtcblxuICAgIGlmIChpdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGludmVudG9yeS5hZGQoaXRlbXMucmVkdWNlKENsb3Nlc3RQb3NpdGlvbmVkKG5vZGUpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhhbmRsZXMgYW4gTlBDIGJlaW5nIGtpbGxlZCBieSB1bnJlZ2lzdGVyaW5nIHRoZSBOUEMgZnJvbSB0aGUgc2NlbmVzIHN1YnN5c3RlbXNcbiAqIEBwYXJhbSBldmVudCBhbiBOUEMta2lsbGVkIGV2ZW50XG4gKi9cbnByb3RlY3RlZCBoYW5kbGVCYXR0bGVyS2lsbGVkKGV2ZW50OiBHYW1lRXZlbnQpOiB2b2lkIHtcbiAgICBsZXQgaWQ6IG51bWJlciA9IGV2ZW50LmRhdGEuZ2V0KFwiaWRcIik7XG4gICAgbGV0IGJhdHRsZXIgPSB0aGlzLmJhdHRsZXJzLmZpbmQoYiA9PiBiLmlkID09PSBpZCk7XG5cbiAgICBpZiAoYmF0dGxlcikge1xuICAgICAgICBiYXR0bGVyLmJhdHRsZXJBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5oZWFsdGhiYXJzLmdldChpZCkudmlzaWJsZSA9IGZhbHNlO1xuICAgIH1cbiAgICBcbn1cblxuLyoqIEluaXRpYWxpemVzIHRoZSBsYXllcnMgaW4gdGhlIHNjZW5lICovXG5wcm90ZWN0ZWQgaW5pdExheWVycygpOiB2b2lkIHtcblxuICAgIHRoaXMuYWRkTGF5ZXIoTGV2ZWwyU2NlbmVMYXllcnMuVUkpO1xuICAgIHRoaXMuYWRkTGF5ZXIoTGV2ZWwyU2NlbmVMYXllcnMuUEFVU0UsIDEwKTtcbiAgICB0aGlzLmFkZExheWVyKExldmVsMlNjZW5lTGF5ZXJzLkhFTFAsIDExKTtcbiAgICB0aGlzLmFkZExheWVyKExldmVsMlNjZW5lTGF5ZXJzLkNPTlRST0xTLCAxMSk7XG4gICAgdGhpcy5hZGRMYXllcihMZXZlbDJTY2VuZUxheWVycy5DT01QTEVURSwgMTIpO1xuXG5cbiAgICB0aGlzLmFkZExheWVyKFwicHJpbWFyeVwiLCA1KTtcbn1cblxuXG5cblxuLyoqXG4gKiBJbml0aWFsaXplcyB0aGUgcGxheWVyIGluIHRoZSBzY2VuZVxuICovXG5wcm90ZWN0ZWQgaW5pdGlhbGl6ZVBsYXllcigpOiB2b2lkIHtcbiAgICBjb25zdCBjZW50ZXIgPSB0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpO1xuICAgIGxldCBwbGF5ZXIgPSB0aGlzLmFkZC5hbmltYXRlZFNwcml0ZShQbGF5ZXJBY3RvciwgXCJwbGF5ZXIxXCIsIFwicHJpbWFyeVwiKTtcbiAgICBwbGF5ZXIucG9zaXRpb24uc2V0KGNlbnRlci54LTMwMCwgY2VudGVyLnkrMzAwKTtcblxuICAgIHBsYXllci5iYXR0bGVHcm91cCA9IDI7XG4gICAgXG5cbiAgICBwbGF5ZXIuaGVhbHRoID0gMTA7XG4gICAgcGxheWVyLm1heEhlYWx0aCA9IDEwO1xuICAgIHBsYXllci5zY2FsZSA9IG5ldyBWZWMyKDAuNCwgMC40KTsgLy8gU2NhbGVzIHBsYXllciBcblxuICAgIHBsYXllci5pbnZlbnRvcnkub25DaGFuZ2UgPSBJdGVtRXZlbnQuSU5WRU5UT1JZX0NIQU5HRURcbiAgICAvLyB0aGlzLmludmVudG9yeUh1ZCA9IG5ldyBJbnZlbnRvcnlIVUQodGhpcywgcGxheWVyLmludmVudG9yeSwgXCJpbnZlbnRvcnlTbG90XCIsIHtcbiAgICAvLyAgICAgc3RhcnQ6IG5ldyBWZWMyKDIzMiwgMjQpLFxuICAgIC8vICAgICBzbG90TGF5ZXI6IFwic2xvdHNcIixcbiAgICAvLyAgICAgcGFkZGluZzogOCxcbiAgICAvLyAgICAgaXRlbUxheWVyOiBcIml0ZW1zXCJcbiAgICAvLyB9KTtcblxuICAgIC8vIEdpdmUgdGhlIHBsYXllciBwaHlzaWNzXG4gICAgcGxheWVyLmFkZFBoeXNpY3MobmV3IEFBQkIoVmVjMi5aRVJPLCBuZXcgVmVjMigxNiwgMTYpKSk7XG5cbiAgICAvLyBHaXZlIHRoZSBwbGF5ZXIgYSBoZWFsdGhiYXJcbiAgICBsZXQgaGVhbHRoYmFyID0gbmV3IEhlYWx0aGJhckhVRCh0aGlzLCBwbGF5ZXIsIFwicHJpbWFyeVwiLCB7c2l6ZTogcGxheWVyLnNpemUuY2xvbmUoKS5zY2FsZWQoMSwgMS80KSwgb2Zmc2V0OiBwbGF5ZXIuc2l6ZS5jbG9uZSgpLnNjYWxlZCgwLCAtMS8zKX0pO1xuICAgIHRoaXMuaGVhbHRoYmFycy5zZXQocGxheWVyLmlkLCBoZWFsdGhiYXIpO1xuXG4gICAgLy8gR2l2ZSB0aGUgcGxheWVyIFBsYXllckFJXG4gICAgcGxheWVyLmFkZEFJKFBsYXllckFJKTtcblxuICAgIC8vIFN0YXJ0IHRoZSBwbGF5ZXIgaW4gdGhlIFwiSURMRVwiIGFuaW1hdGlvblxuICAgIHBsYXllci5hbmltYXRpb24ucGxheShcIklETEVcIik7XG4gICAgXG4gICAgdGhpcy5iYXR0bGVycy5wdXNoKHBsYXllcik7XG4gICAgdGhpcy5wbGF5ZXIucHVzaChwbGF5ZXIpO1xuICAgIHRoaXMudmlld3BvcnQuZm9sbG93KHBsYXllcik7XG4gICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMyk7XG4gICAgXG59XG4vKipcbiAqIEluaXRpYWxpemUgdGhlIE5QQ3MgXG4gKi9cbnByb3RlY3RlZCBpbml0aWFsaXplTlBDcygpOiB2b2lkIHtcblxuICAgXG4gICAgLy8gR2V0IHRoZSBvYmplY3QgZGF0YSBmb3IgdGhlIGJsdWUgZW5lbWllc1xuICAgIGxldCBibHVlID0gdGhpcy5sb2FkLmdldE9iamVjdChcImJsdWVcIik7XG5cbiAgICAvLyBJbml0aWFsaXplIHRoZSBibHVlIGVuZW1pZXNcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJsdWUuZW5lbWllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgbnBjID0gdGhpcy5hZGQuYW5pbWF0ZWRTcHJpdGUoTlBDQWN0b3IsIFwiQmx1ZUVuZW15XCIsIFwicHJpbWFyeVwiKTtcbiAgICAgICAgbnBjLnBvc2l0aW9uLnNldChibHVlLmVuZW1pZXNbaV1bMF0sIGJsdWUuZW5lbWllc1tpXVsxXSk7XG4gICAgICAgIG5wYy5hZGRQaHlzaWNzKG5ldyBBQUJCKFZlYzIuWkVSTywgbmV3IFZlYzIoOCwgOCkpLCBudWxsLCBmYWxzZSk7XG5cbiAgICAgICAgLy8gR2l2ZSB0aGUgTlBDUyB0aGVpciBoZWFsdGhiYXJzXG4gICAgICAgIGxldCBoZWFsdGhiYXIgPSBuZXcgSGVhbHRoYmFySFVEKHRoaXMsIG5wYywgXCJwcmltYXJ5XCIsIHtzaXplOiBucGMuc2l6ZS5jbG9uZSgpLnNjYWxlZCgxLzIsIDEvNCksIG9mZnNldDogbnBjLnNpemUuY2xvbmUoKS5zY2FsZWQoMCwgLTEvMyl9KTtcbiAgICAgICAgdGhpcy5oZWFsdGhiYXJzLnNldChucGMuaWQsIGhlYWx0aGJhcik7XG5cbiAgICAgICAgbnBjLmJhdHRsZUdyb3VwID0gMVxuICAgICAgICBucGMuc3BlZWQgPSAxMDtcbiAgICAgICAgbnBjLmhlYWx0aCA9IDI7XG4gICAgICAgIG5wYy5tYXhIZWFsdGggPSAyO1xuICAgICAgICBucGMubmF2a2V5ID0gXCJuYXZtZXNoXCI7XG4gICAgICAgIG5wYy5zY2FsZSA9IG5ldyBWZWMyKDAuNCwwLjQpO1xuXG4gICAgICAgIC8vIEdpdmUgdGhlIE5QQ3MgdGhlaXIgQUlcbiAgICAgICAgbnBjLmFkZEFJKEd1YXJkQmVoYXZpb3IsIHt0YXJnZXQ6IHRoaXMuYmF0dGxlcnNbMF0sIHJhbmdlOiAwfSk7XG5cbiAgICAgICAgLy8gUGxheSB0aGUgTlBDcyBcIklETEVcIiBhbmltYXRpb24gXG4gICAgICAgIG5wYy5hbmltYXRpb24ucGxheShcIklETEVcIik7XG5cbiAgICAgICAgdGhpcy5iYXR0bGVycy5wdXNoKG5wYyk7XG4gICAgICAgIHRoaXMuZW5lbWllcy5wdXNoKG5wYyk7XG4gICAgfVxuXG4gICAgbGV0IG5wYyA9IHRoaXMuYWRkLmFuaW1hdGVkU3ByaXRlKE5QQ0FjdG9yLCBcIkJsdWVFbmVteVwiLCBcInByaW1hcnlcIik7XG4gICAgICAgIHRoaXMuYm9zcyA9IG5wYztcbiAgICAgICAgbnBjLnBvc2l0aW9uLnNldCgxMjAwLDEwMCk7XG4gICAgICAgIHRoaXMuYm9zc0xvY2F0aW9uID0gbmV3IFZlYzIoMTIwMCwgMTAwKTtcbiAgICAgICAgbnBjLmFkZFBoeXNpY3MobmV3IEFBQkIoVmVjMi5aRVJPLCBuZXcgVmVjMigzMiwgMzIpKSwgbnVsbCwgZmFsc2UpO1xuXG4gICAgICAgIC8vIEdpdmUgdGhlIE5QQ1MgdGhlaXIgaGVhbHRoYmFyc1xuICAgICAgICBsZXQgaGVhbHRoYmFyID0gbmV3IEhlYWx0aGJhckhVRCh0aGlzLCBucGMsIFwicHJpbWFyeVwiLCB7c2l6ZTogbnBjLnNpemUuY2xvbmUoKS5zY2FsZWQoMiwgMS80KSwgb2Zmc2V0OiBucGMuc2l6ZS5jbG9uZSgpLnNjYWxlZCgwLCAtMS8zKX0pO1xuICAgICAgICB0aGlzLmhlYWx0aGJhcnMuc2V0KG5wYy5pZCwgaGVhbHRoYmFyKTtcblxuICAgICAgICBucGMuYmF0dGxlR3JvdXAgPSAxXG4gICAgICAgIG5wYy5zcGVlZCA9IDEwO1xuICAgICAgICBucGMuaGVhbHRoID0gMTU7XG4gICAgICAgIG5wYy5tYXhIZWFsdGggPSAxNTtcbiAgICAgICAgbnBjLm5hdmtleSA9IFwibmF2bWVzaFwiO1xuICAgICAgICBucGMuc2NhbGUgPSBuZXcgVmVjMigxLDEpO1xuXG5cbiAgICAgICAgLy8gR2l2ZSB0aGUgTlBDcyB0aGVpciBBSVxuICAgICAgICBucGMuYWRkQUkoR3VhcmRCZWhhdmlvciwge3RhcmdldDogdGhpcy5iYXR0bGVyc1swXSwgcmFuZ2U6IDB9KTtcblxuICAgICAgICAvLyBQbGF5IHRoZSBOUENzIFwiSURMRVwiIGFuaW1hdGlvbiBcbiAgICAgICAgbnBjLmFuaW1hdGlvbi5wbGF5KFwiSURMRVwiKTtcblxuICAgICAgICB0aGlzLmJhdHRsZXJzLnB1c2gobnBjKTtcbiAgICAgICAgdGhpcy5lbmVtaWVzLnB1c2gobnBjKTtcblxuICAgIC8vIEluaXRpYWxpemUgdGhlIGJsdWUgaGVhbGVyc1xuICAgIFxuXG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZSB0aGUgaXRlbXMgaW4gdGhlIHNjZW5lIChoZWFsdGhwYWNrcyBhbmQgbGFzZXIgZ3VucylcbiAqL1xucHJvdGVjdGVkIGluaXRpYWxpemVJdGVtcygpOiB2b2lkIHtcbiAgICBsZXQgbGFzZXJndW5zID0gdGhpcy5sb2FkLmdldE9iamVjdChcImxhc2VyZ3Vuc1wiKTtcbiAgICB0aGlzLmxhc2VyZ3VucyA9IG5ldyBBcnJheTxMYXNlckd1bj4obGFzZXJndW5zLml0ZW1zLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsYXNlcmd1bnMuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHNwcml0ZSA9IHRoaXMuYWRkLnNwcml0ZShcImxhc2VyR3VuXCIsIFwicHJpbWFyeVwiKTtcbiAgICAgICAgbGV0IGxpbmUgPSA8TGluZT50aGlzLmFkZC5ncmFwaGljKEdyYXBoaWNUeXBlLkxJTkUsIFwicHJpbWFyeVwiLCB7c3RhcnQ6IFZlYzIuWkVSTywgZW5kOiBWZWMyLlpFUk99KTtcbiAgICAgICAgdGhpcy5sYXNlcmd1bnNbaV0gPSBMYXNlckd1bi5jcmVhdGUoc3ByaXRlLCBsaW5lKTtcbiAgICAgICAgdGhpcy5sYXNlcmd1bnNbaV0ucG9zaXRpb24uc2V0KGxhc2VyZ3Vucy5pdGVtc1tpXVswXSwgbGFzZXJndW5zLml0ZW1zW2ldWzFdKTtcbiAgICB9XG5cbiAgICBsZXQgaGVhbHRocGFja3MgPSB0aGlzLmxvYWQuZ2V0T2JqZWN0KFwiaGVhbHRocGFja3NcIik7XG4gICAgdGhpcy5oZWFsdGhwYWNrcyA9IG5ldyBBcnJheTxIZWFsdGhwYWNrPihoZWFsdGhwYWNrcy5pdGVtcy5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGVhbHRocGFja3MuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHNwcml0ZSA9IHRoaXMuYWRkLnNwcml0ZShcImhlYWx0aHBhY2tcIiwgXCJwcmltYXJ5XCIpO1xuICAgICAgICB0aGlzLmhlYWx0aHBhY2tzW2ldID0gbmV3IEhlYWx0aHBhY2soc3ByaXRlKTtcbiAgICAgICAgdGhpcy5oZWFsdGhwYWNrc1tpXS5wb3NpdGlvbi5zZXQoaGVhbHRocGFja3MuaXRlbXNbaV1bMF0sIGhlYWx0aHBhY2tzLml0ZW1zW2ldWzFdKTtcbiAgICB9XG59XG4vKipcbiAqIEluaXRpYWxpemVzIHRoZSBuYXZtZXNoIGdyYXBoIHVzZWQgYnkgdGhlIE5QQ3MgaW4gdGhlIEhXM1NjZW5lLiBUaGlzIG1ldGhvZCBpcyBhIGxpdHRsZSBidWdneSwgYW5kXG4gKiBhbmQgaXQgc2tpcHMgb3ZlciBzb21lIG9mIHRoZSBwb3NpdGlvbnMgb24gdGhlIHRpbGVtYXAuIElmIHlvdSBjYW4gZml4IG15IG5hdm1lc2ggZ2VuZXJhdGlvbiBhbGdvcml0aG0sXG4gKiBnbyBmb3IgaXQuXG4gKiBcbiAqIC0gUGV0ZXJcbiAqL1xucHJvdGVjdGVkIGluaXRpYWxpemVOYXZtZXNoKCk6IHZvaWQge1xuICAgIC8vIENyZWF0ZSB0aGUgZ3JhcGhcbiAgICB0aGlzLmdyYXBoID0gbmV3IFBvc2l0aW9uR3JhcGgoKTtcblxuICAgIGxldCBkaW06IFZlYzIgPSB0aGlzLndhbGxzLmdldERpbWVuc2lvbnMoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpbS55OyBpKyspIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBkaW0ueDsgaisrKSB7XG4gICAgICAgICAgICBsZXQgdGlsZTogQUFCQiA9IHRoaXMud2FsbHMuZ2V0VGlsZUNvbGxpZGVyKGosIGkpO1xuICAgICAgICAgICAgdGhpcy5ncmFwaC5hZGRQb3NpdGlvbmVkTm9kZSh0aWxlLmNlbnRlcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgcmM6IFZlYzI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmdyYXBoLm51bVZlcnRpY2VzOyBpKyspIHtcbiAgICAgICAgcmMgPSB0aGlzLndhbGxzLmdldFRpbGVDb2xSb3coaSk7XG4gICAgICAgIGlmICghdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKHJjLngsIHJjLnkpICYmXG4gICAgICAgICAgICAhdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKE1hdGhVdGlscy5jbGFtcChyYy54IC0gMSwgMCwgZGltLnggLSAxKSwgcmMueSkgJiZcbiAgICAgICAgICAgICF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUoTWF0aFV0aWxzLmNsYW1wKHJjLnggKyAxLCAwLCBkaW0ueCAtIDEpLCByYy55KSAmJlxuICAgICAgICAgICAgIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShyYy54LCBNYXRoVXRpbHMuY2xhbXAocmMueSAtIDEsIDAsIGRpbS55IC0gMSkpICYmXG4gICAgICAgICAgICAhdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKHJjLngsIE1hdGhVdGlscy5jbGFtcChyYy55ICsgMSwgMCwgZGltLnkgLSAxKSkgJiZcbiAgICAgICAgICAgICF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUoTWF0aFV0aWxzLmNsYW1wKHJjLnggKyAxLCAwLCBkaW0ueCAtIDEpLCBNYXRoVXRpbHMuY2xhbXAocmMueSArIDEsIDAsIGRpbS55IC0gMSkpICYmXG4gICAgICAgICAgICAhdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKE1hdGhVdGlscy5jbGFtcChyYy54IC0gMSwgMCwgZGltLnggLSAxKSwgTWF0aFV0aWxzLmNsYW1wKHJjLnkgKyAxLCAwLCBkaW0ueSAtIDEpKSAmJlxuICAgICAgICAgICAgIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShNYXRoVXRpbHMuY2xhbXAocmMueCArIDEsIDAsIGRpbS54IC0gMSksIE1hdGhVdGlscy5jbGFtcChyYy55IC0gMSwgMCwgZGltLnkgLSAxKSkgJiZcbiAgICAgICAgICAgICF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUoTWF0aFV0aWxzLmNsYW1wKHJjLnggLSAxLCAwLCBkaW0ueCAtIDEpLCBNYXRoVXRpbHMuY2xhbXAocmMueSAtIDEsIDAsIGRpbS55IC0gMSkpXG5cbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgZWRnZSB0byB0aGUgbGVmdFxuICAgICAgICAgICAgcmMgPSB0aGlzLndhbGxzLmdldFRpbGVDb2xSb3coaSArIDEpO1xuICAgICAgICAgICAgaWYgKChpICsgMSkgJSBkaW0ueCAhPT0gMCAmJiAhdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKHJjLngsIHJjLnkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ncmFwaC5hZGRFZGdlKGksIGkgKyAxKTtcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmFkZC5ncmFwaGljKEdyYXBoaWNUeXBlLkxJTkUsIFwiZ3JhcGhcIiwge3N0YXJ0OiB0aGlzLmdyYXBoLmdldE5vZGVQb3NpdGlvbihpKSwgZW5kOiB0aGlzLmdyYXBoLmdldE5vZGVQb3NpdGlvbihpICsgMSl9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ3JlYXRlIGVkZ2UgYmVsb3dcbiAgICAgICAgICAgIHJjID0gdGhpcy53YWxscy5nZXRUaWxlQ29sUm93KGkgKyBkaW0ueCk7XG4gICAgICAgICAgICBpZiAoaSArIGRpbS54IDwgdGhpcy5ncmFwaC5udW1WZXJ0aWNlcyAmJiAhdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKHJjLngsIHJjLnkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ncmFwaC5hZGRFZGdlKGksIGkgKyBkaW0ueCk7XG4gICAgICAgICAgICAgICAgLy8gdGhpcy5hZGQuZ3JhcGhpYyhHcmFwaGljVHlwZS5MSU5FLCBcImdyYXBoXCIsIHtzdGFydDogdGhpcy5ncmFwaC5nZXROb2RlUG9zaXRpb24oaSksIGVuZDogdGhpcy5ncmFwaC5nZXROb2RlUG9zaXRpb24oaSArIGRpbS54KX0pXG4gICAgICAgICAgICB9XG5cblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoaXMgZ3JhcGggYXMgYSBuYXZpZ2FibGUgZW50aXR5XG4gICAgbGV0IG5hdm1lc2ggPSBuZXcgTmF2bWVzaCh0aGlzLmdyYXBoKTtcbiAgICAvLyBBZGQgZGlmZmVyZW50IHN0cmF0ZWdpZXMgdG8gdXNlIGZvciB0aGlzIG5hdm1lc2hcbiAgICBuYXZtZXNoLnJlZ2lzdGVyU3RyYXRlZ3koXCJkaXJlY3RcIiwgbmV3IERpcmVjdFN0cmF0ZWd5KG5hdm1lc2gpKTtcbiAgICBuYXZtZXNoLnJlZ2lzdGVyU3RyYXRlZ3koXCJhc3RhclwiLCBuZXcgQXN0YXJTdHJhdGVneShuYXZtZXNoKSk7XG4gICAgLy8gU2VsZWN0IEEqIGFzIG91ciBuYXZpZ2F0aW9uIHN0cmF0ZWd5XG4gICAgbmF2bWVzaC5zZXRTdHJhdGVneShcImFzdGFyXCIpO1xuXG4gICAgLy8gQWRkIHRoaXMgbmF2bWVzaCB0byB0aGUgbmF2aWdhdGlvbiBtYW5hZ2VyXG4gICAgdGhpcy5uYXZNYW5hZ2VyLmFkZE5hdmlnYWJsZUVudGl0eShcIm5hdm1lc2hcIiwgbmF2bWVzaCk7XG59XG5cbnB1YmxpYyB1bmxvYWRTY2VuZSgpOiB2b2lkIHtcbiAgICAvLyBUaGUgc2NlbmUgaXMgYmVpbmcgZGVzdHJveWVkLCBzbyB3ZSBjYW4gc3RvcCBwbGF5aW5nIHRoZSBzb25nXG4gICAgdGhpcy5lbWl0dGVyLmZpcmVFdmVudChHYW1lRXZlbnRUeXBlLlNUT1BfU09VTkQsIHtrZXk6IHRoaXMubGV2ZWxNdXNpY0tleX0pO1xufVxuXG5cbiAgICBwdWJsaWMgZ2V0QmF0dGxlcnMoKTogQmF0dGxlcltdIHsgcmV0dXJuIHRoaXMuYmF0dGxlcnM7IH1cblxuICAgIHB1YmxpYyBnZXRXYWxscygpOiBPcnRob2dvbmFsVGlsZW1hcCB7IHJldHVybiB0aGlzLndhbGxzOyB9XG5cbiAgICBwdWJsaWMgZ2V0SGVhbHRocGFja3MoKTogSGVhbHRocGFja1tdIHsgcmV0dXJuIHRoaXMuaGVhbHRocGFja3M7IH1cblxuICAgIHB1YmxpYyBnZXRMYXNlckd1bnMoKTogTGFzZXJHdW5bXSB7IHJldHVybiB0aGlzLmxhc2VyZ3VuczsgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSBnaXZlbiB0YXJnZXQgcG9zaXRpb24gaXMgdmlzaWJsZSBmcm9tIHRoZSBnaXZlbiBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0gcG9zaXRpb24gXG4gICAgICogQHBhcmFtIHRhcmdldCBcbiAgICAgKiBAcmV0dXJucyBcbiAgICAgKi9cbiAgICBwdWJsaWMgaXNUYXJnZXRWaXNpYmxlKHBvc2l0aW9uOiBWZWMyLCB0YXJnZXQ6IFZlYzIpOiBib29sZWFuIHtcblxuICAgICAgICAvLyBHZXQgdGhlIG5ldyBwbGF5ZXIgbG9jYXRpb25cbiAgICAgICAgbGV0IHN0YXJ0ID0gcG9zaXRpb24uY2xvbmUoKTtcbiAgICAgICAgbGV0IGRlbHRhID0gdGFyZ2V0LmNsb25lKCkuc3ViKHN0YXJ0KTtcblxuICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggdGhlIHRpbGVtYXAgcmVnaW9uIHVudGlsIHdlIGZpbmQgYSBjb2xsaXNpb25cbiAgICAgICAgbGV0IG1pblggPSBNYXRoLm1pbihzdGFydC54LCB0YXJnZXQueCk7XG4gICAgICAgIGxldCBtYXhYID0gTWF0aC5tYXgoc3RhcnQueCwgdGFyZ2V0LngpO1xuICAgICAgICBsZXQgbWluWSA9IE1hdGgubWluKHN0YXJ0LnksIHRhcmdldC55KTtcbiAgICAgICAgbGV0IG1heFkgPSBNYXRoLm1heChzdGFydC55LCB0YXJnZXQueSk7XG5cbiAgICAgICAgLy8gR2V0IHRoZSB3YWxsIHRpbGVtYXBcbiAgICAgICAgbGV0IHdhbGxzID0gdGhpcy5nZXRXYWxscygpO1xuXG4gICAgICAgIGxldCBtaW5JbmRleCA9IHdhbGxzLmdldFRpbGVtYXBQb3NpdGlvbihtaW5YLCBtaW5ZKTtcbiAgICAgICAgbGV0IG1heEluZGV4ID0gd2FsbHMuZ2V0VGlsZW1hcFBvc2l0aW9uKG1heFgsIG1heFkpO1xuXG4gICAgICAgIGxldCB0aWxlU2l6ZSA9IHdhbGxzLmdldFNjYWxlZFRpbGVTaXplKCk7XG5cbiAgICAgICAgZm9yIChsZXQgY29sID0gbWluSW5kZXgueDsgY29sIDw9IG1heEluZGV4Lng7IGNvbCsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCByb3cgPSBtaW5JbmRleC55OyByb3cgPD0gbWF4SW5kZXgueTsgcm93KyspIHtcbiAgICAgICAgICAgICAgICBpZiAod2FsbHMuaXNUaWxlQ29sbGlkYWJsZShjb2wsIHJvdykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBwb3NpdGlvbiBvZiB0aGlzIHRpbGVcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRpbGVQb3MgPSBuZXcgVmVjMihjb2wgKiB0aWxlU2l6ZS54ICsgdGlsZVNpemUueCAvIDIsIHJvdyAqIHRpbGVTaXplLnkgKyB0aWxlU2l6ZS55IC8gMik7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgY29sbGlkZXIgZm9yIHRoaXMgdGlsZVxuICAgICAgICAgICAgICAgICAgICBsZXQgY29sbGlkZXIgPSBuZXcgQUFCQih0aWxlUG9zLCB0aWxlU2l6ZS5zY2FsZWQoMS80KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IGhpdCA9IGNvbGxpZGVyLmludGVyc2VjdFNlZ21lbnQoc3RhcnQsIGRlbHRhLCBWZWMyLlpFUk8pO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChoaXQgIT09IG51bGwgJiYgc3RhcnQuZGlzdGFuY2VTcVRvKGhpdC5wb3MpIDwgc3RhcnQuZGlzdGFuY2VTcVRvKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGhpdCBhIHdhbGwsIHdlIGNhbid0IHNlZSB0aGUgcGxheWVyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICB9XG5cbiAgICBcbn0iLCJpbXBvcnQgUG9zaXRpb25HcmFwaCBmcm9tIFwiLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL0dyYXBocy9Qb3NpdGlvbkdyYXBoXCI7XG5pbXBvcnQgQWN0b3IgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9JbnRlcmZhY2VzL0FjdG9yXCI7XG5pbXBvcnQgQUFCQiBmcm9tIFwiLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL1NoYXBlcy9BQUJCXCI7XG5pbXBvcnQgU2hhcGUgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9TaGFwZXMvU2hhcGVcIjtcbmltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IEdhbWVFdmVudCBmcm9tIFwiLi4vLi4vV29sZmllMkQvRXZlbnRzL0dhbWVFdmVudFwiO1xuaW1wb3J0IElucHV0IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9JbnB1dC9JbnB1dFwiO1xuaW1wb3J0IEdhbWVOb2RlIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9HYW1lTm9kZVwiO1xuaW1wb3J0IHsgR3JhcGhpY1R5cGUgfSBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvR3JhcGhpY3MvR3JhcGhpY1R5cGVzXCI7XG5pbXBvcnQgTGluZSBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvR3JhcGhpY3MvTGluZVwiO1xuaW1wb3J0IFNwcml0ZSBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvU3ByaXRlcy9TcHJpdGVcIjtcbmltcG9ydCBPcnRob2dvbmFsVGlsZW1hcCBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvVGlsZW1hcHMvT3J0aG9nb25hbFRpbGVtYXBcIjtcbmltcG9ydCBVSUVsZW1lbnQgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL05vZGVzL1VJRWxlbWVudFwiO1xuaW1wb3J0IEJ1dHRvbiBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvVUlFbGVtZW50cy9CdXR0b25cIjtcbmltcG9ydCB7IFVJRWxlbWVudFR5cGUgfSBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvVUlFbGVtZW50cy9VSUVsZW1lbnRUeXBlc1wiO1xuaW1wb3J0IE5hdm1lc2ggZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1BhdGhmaW5kaW5nL05hdm1lc2hcIjtcbmltcG9ydCBEaXJlY3RTdHJhdGVneSBmcm9tIFwiLi4vLi4vV29sZmllMkQvUGF0aGZpbmRpbmcvU3RyYXRlZ2llcy9EaXJlY3RTdHJhdGVneVwiO1xuaW1wb3J0IFJlbmRlcmluZ01hbmFnZXIgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1JlbmRlcmluZy9SZW5kZXJpbmdNYW5hZ2VyXCI7XG5pbXBvcnQgU2NlbmVNYW5hZ2VyIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9TY2VuZS9TY2VuZU1hbmFnZXJcIjtcbmltcG9ydCBWaWV3cG9ydCBmcm9tIFwiLi4vLi4vV29sZmllMkQvU2NlbmVHcmFwaC9WaWV3cG9ydFwiO1xuaW1wb3J0IFRpbWVyIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9UaW1pbmcvVGltZXJcIjtcbmltcG9ydCBDb2xvciBmcm9tIFwiLi4vLi4vV29sZmllMkQvVXRpbHMvQ29sb3JcIjtcbmltcG9ydCBNYXRoVXRpbHMgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1V0aWxzL01hdGhVdGlsc1wiO1xuaW1wb3J0IE5QQ0FjdG9yIGZyb20gXCIuLi9BY3RvcnMvTlBDQWN0b3JcIjtcbmltcG9ydCBQbGF5ZXJBY3RvciBmcm9tIFwiLi4vQWN0b3JzL1BsYXllckFjdG9yXCI7XG5pbXBvcnQgR3VhcmRCZWhhdmlvciBmcm9tIFwiLi4vQUkvTlBDL05QQ0JlaGF2aW9yL0dhdXJkQmVoYXZpb3JcIjtcbmltcG9ydCBIZWFsZXJCZWhhdmlvciBmcm9tIFwiLi4vQUkvTlBDL05QQ0JlaGF2aW9yL0hlYWxlckJlaGF2aW9yXCI7XG5pbXBvcnQgUGxheWVyQUkgZnJvbSBcIi4uL0FJL1BsYXllci9QbGF5ZXJBSVwiO1xuaW1wb3J0IFBsYXllckNvbnRyb2xsZXIsIHsgUGxheWVySW5wdXQgfSBmcm9tIFwiLi4vQUkvUGxheWVyL1BsYXllckNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IEl0ZW1FdmVudCwgUGxheWVyRXZlbnQsIEJhdHRsZXJFdmVudCwgSHVkRXZlbnQgfSBmcm9tIFwiLi4vRXZlbnRzXCI7XG5pbXBvcnQgQmF0dGxlciBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvQmF0dGxlU3lzdGVtL0JhdHRsZXJcIjtcbmltcG9ydCBCYXR0bGVyQmFzZSBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvQmF0dGxlU3lzdGVtL0JhdHRsZXJCYXNlXCI7XG5pbXBvcnQgSGVhbHRoYmFySFVEIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9IVUQvSGVhbHRoYmFySFVEXCI7XG5pbXBvcnQgSW52ZW50b3J5SFVEIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9IVUQvSW52ZW50b3J5SFVEXCI7XG5pbXBvcnQgUGF1c2VIVUQgZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL0hVRC9QYXVzZUhVRFwiO1xuaW1wb3J0IEludmVudG9yeSBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvSXRlbVN5c3RlbS9JbnZlbnRvcnlcIjtcbmltcG9ydCBJdGVtIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9JdGVtU3lzdGVtL0l0ZW1cIjtcbmltcG9ydCBIZWFsdGhwYWNrIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9JdGVtU3lzdGVtL0l0ZW1zL0hlYWx0aHBhY2tcIjtcbmltcG9ydCBMYXNlckd1biBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvSXRlbVN5c3RlbS9JdGVtcy9MYXNlckd1blwiO1xuaW1wb3J0IHsgQ2xvc2VzdFBvc2l0aW9uZWQgfSBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvU2VhcmNoaW5nL0hXNFJlZHVjZXJzXCI7XG5pbXBvcnQgQmFzaWNUYXJnZXRhYmxlIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9UYXJnZXRpbmcvQmFzaWNUYXJnZXRhYmxlXCI7XG5pbXBvcnQgUG9zaXRpb24gZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL1RhcmdldGluZy9Qb3NpdGlvblwiO1xuaW1wb3J0IEFzdGFyU3RyYXRlZ3kgZnJvbSBcIi4uL1BhdGhmaW5kaW5nL0FzdGFyU3RyYXRlZ3lcIjtcbmltcG9ydCBHYW1lT3ZlciBmcm9tIFwiLi9HYW1lT3ZlclwiO1xuLy8gaW1wb3J0IEhXNFNjZW5lIGZyb20gXCIuL0hXNFNjZW5lXCI7XG4vLyBpbXBvcnQgTWFpbk1lbnUgZnJvbSBcIi4vTWFpbk1lbnVcIjtcbi8vIGltcG9ydCBMZXZlbFNlbGVjdGlvblNjZW5lIGZyb20gXCIuL0xldmVsU2VsZWN0aW9uU2NlbmVcIjtcbi8vIGltcG9ydCB7IEdhbWVFdmVudFR5cGUgfSBmcm9tIFwiLi4vLi4vV29sZmllMkQvRXZlbnRzL0dhbWVFdmVudFR5cGVcIjtcbi8vIGltcG9ydCB0ZXN0SFc0U2NlbmUgZnJvbSBcIi4vRmluYWxQcm9qZWN0U2NlbmVcIjtcbmltcG9ydCBGaW5hbFByb2plY3RTY2VuZSBmcm9tIFwiLi9GaW5hbFByb2plY3RTY2VuZVwiO1xuLy8gaW1wb3J0IHRlc3RNYWluU2NlbmUgZnJvbSBcIi4vdGVzdG1haW5cIjtcbmltcG9ydCBIVzRTY2VuZSBmcm9tIFwiLi9IVzRTY2VuZVwiO1xuaW1wb3J0IExldmVsU2VsZWN0aW9uU2NlbmUgZnJvbSBcIi4vTGV2ZWxTZWxlY3Rpb25TY2VuZVwiO1xuaW1wb3J0IE1haW5NZW51IGZyb20gXCIuL01haW5NZW51XCI7XG5pbXBvcnQgTGFzdFNjZW5lIGZyb20gXCIuL0xhc3RTY2VuZVwiO1xuaW1wb3J0IExldmVsMVNjZW5lIGZyb20gXCIuL0xldmVsMVNjZW5lXCI7XG5pbXBvcnQgTGV2ZWwyU2NlbmUgZnJvbSBcIi4vTGV2ZWwyU2NlbmVcIjtcbmltcG9ydCBMZXZlbDRTY2VuZSBmcm9tIFwiLi9MZXZlbDRTY2VuZVwiO1xuaW1wb3J0IExldmVsNVNjZW5lIGZyb20gXCIuL0xldmVsNVNjZW5lXCI7XG5pbXBvcnQgdGVzdE1lbnUgZnJvbSBcIi4vTWFpbk1lbnVcIjtcbmltcG9ydCB7IEdhbWVFdmVudFR5cGUgfSBmcm9tIFwiLi4vLi4vV29sZmllMkQvRXZlbnRzL0dhbWVFdmVudFR5cGVcIjtcblxuXG5jb25zdCBCYXR0bGVyR3JvdXBzID0ge1xuICAgIFJFRDogMSxcbiAgICBCTFVFOiAyXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgY29uc3QgTGV2ZWwzU2NlbmVMYXllcnMgPSB7XG5cdFBSSU1BUlk6IFwiUFJJTUFSWVwiLFxuXHRCQUNLR1JPVU5EOiBcIkJBQ0tHUk9VTkRcIiwgXG5cdFVJOiBcIlVJXCIsXG4gICAgUEFVU0U6IFwiUEFVU0VcIixcbiAgICBDT05UUk9MUzogXCJDT05UUk9MU1wiLFxuICAgIEhFTFA6IFwiSEVMUFwiLFxuICAgIENPTVBMRVRFOiBcIkNPTVBMRVRFXCJcbn0gYXMgY29uc3Q7XG5cblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMZXZlbDNTY2VuZSBleHRlbmRzIEhXNFNjZW5lIHtcblxuICAgIC8qKiBHYW1lU3lzdGVtcyBpbiB0aGUgSFczIFNjZW5lICovXG4gICAgLy8gcHJpdmF0ZSBpbnZlbnRvcnlIdWQ6IEludmVudG9yeUhVRDtcblxuICAgIC8qKiBBbGwgdGhlIGJhdHRsZXJzIGluIHRoZSBIVzNTY2VuZSAoaW5jbHVkaW5nIHRoZSBwbGF5ZXIpICovXG4gICAgcHJvdGVjdGVkIGJhdHRsZXJzOiAoQmF0dGxlciAmIEFjdG9yKVtdO1xuICAgIC8qKiBIZWFsdGhiYXJzIGZvciB0aGUgYmF0dGxlcnMgKi9cbiAgICBwcm90ZWN0ZWQgaGVhbHRoYmFyczogTWFwPG51bWJlciwgSGVhbHRoYmFySFVEPjtcblxuICAgIHByb3RlY3RlZCBwbGF5ZXI6IChQbGF5ZXJBY3RvcilbXTtcbiAgICBwcm90ZWN0ZWQgZW5lbWllczogKE5QQ0FjdG9yKVtdO1xuXG4gICAgcHJvdGVjdGVkIGJvc3M6IE5QQ0FjdG9yO1xuICAgIFxuICAgIC8vIHByb3RlY3RlZCBzaG9vdEF1ZGlvS2V5OiBzdHJpbmc7XG4gICAgLy8gcHJvdGVjdGVkIGhpdEF1ZGlvS2V5OiBzdHJpbmc7XG5cbiAgICBwcm90ZWN0ZWQgbGV2ZWxNdXNpY0tleTogc3RyaW5nO1xuXG4gICAgLy9wcml2YXRlIHpvb21Cb29sID0gZmFsc2U7XG5cbiAgICAvLyBwcm90ZWN0ZWQgc2hvb3RBdWRpb0tleTogc3RyaW5nO1xuXG4gICAgcHJvdGVjdGVkIGJhc2VzOiBCYXR0bGVyQmFzZVtdO1xuXG4gICAgcHJvdGVjdGVkIGhlYWx0aHBhY2tzOiBBcnJheTxIZWFsdGhwYWNrPjtcbiAgICBwcm90ZWN0ZWQgbGFzZXJndW5zOiBBcnJheTxMYXNlckd1bj47XG5cbiAgICAvLyBUaGUgd2FsbCBsYXllciBvZiB0aGUgdGlsZW1hcFxuICAgIHByb3RlY3RlZCB3YWxsczogT3J0aG9nb25hbFRpbGVtYXA7XG5cbiAgICAvLyBUaGUgcG9zaXRpb24gZ3JhcGggZm9yIHRoZSBuYXZtZXNoXG4gICAgcHJvdGVjdGVkIGdyYXBoOiBQb3NpdGlvbkdyYXBoO1xuXG4gICAgcHJvdGVjdGVkIHBhdXNlSW1hZ2U6IFNwcml0ZTtcbiAgICBwcm90ZWN0ZWQgaGVscEltYWdlOiBTcHJpdGU7XG4gICAgcHJvdGVjdGVkIGNvbnRyb2xzSW1hZ2U6IFNwcml0ZTtcbiAgICBwcm90ZWN0ZWQgY29tcGxldGVJbWFnZTogU3ByaXRlO1xuXG4gICAgcHJvdGVjdGVkIGJvc3NMb2NhdGlvbjogVmVjMjtcblxuICAgIHB1YmxpYyBzdGF0aWMgUEFVU0VfS0VZID0gXCJQQVVTRVwiO1xuICAgIHB1YmxpYyBzdGF0aWMgUEFVU0VfUEFUSCA9IFwiaHc0X2Fzc2V0cy9zcHJpdGVzL1BhdXNlZC1TY3JlZW4ucG5nXCI7XG5cbiAgICBwdWJsaWMgc3RhdGljIEhFTFBfS0VZID0gXCJIRUxQXCI7XG4gICAgcHVibGljIHN0YXRpYyBIRUxQX1BBVEggPSBcImh3NF9hc3NldHMvc3ByaXRlcy9IZWxwLVNjcmVlbi5wbmdcIjtcblxuXG4gICAgcHVibGljIHN0YXRpYyBDT05UUk9MU19LRVkgPSBcIkNPTlRST0xTXCJcbiAgICBwdWJsaWMgc3RhdGljIENPTlRST0xTX1BBVEggPSBcImh3NF9hc3NldHMvc3ByaXRlcy9Db250cm9scy1TY3JlZW4ucG5nXCJcbiAgIFxuICAgIHB1YmxpYyBzdGF0aWMgU0hPT1RfQVVESU9fS0VZID0gXCJQTEFZRVJfU0hPT1RcIlxuICAgIHB1YmxpYyBzdGF0aWMgU0hPT1RfQVVESU9fUEFUSCA9IFwiaHc0X2Fzc2V0cy9zb3VuZHMvbGFzZXJTaG9vdC53YXZcIlxuXG4gICAgcHVibGljIHN0YXRpYyBDT01QTEVURV9LRVkgPSBcIkNPTVBMRVRFXCJcbiAgICBwdWJsaWMgc3RhdGljIENPTVBMRVRFX1BBVEggPSBcImh3NF9hc3NldHMvc3ByaXRlcy9MZXZlbC1Db21wbGV0ZS5wbmdcIlxuXG4gICAgcHVibGljIHN0YXRpYyBISVRfQVVESU9fS0VZID0gXCJQTEFZRVJfSElUXCJcbiAgICBwdWJsaWMgc3RhdGljIEhJVF9BVURJT19QQVRIID0gXCJodzRfYXNzZXRzL3NvdW5kcy9oaXQud2F2XCJcblxuICAgIHB1YmxpYyBzdGF0aWMgRFlJTkdfQVVESU9fS0VZID0gXCJQTEFZRVJfRFlJTkdcIlxuICAgIHB1YmxpYyBzdGF0aWMgRFlJTkdfQVVESU9fUEFUSCA9IFwiaHc0X2Fzc2V0cy9zb3VuZHMvZHlpbmcud2F2XCJcblxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTEVWRUxfTVVTSUNfS0VZID0gXCJMRVZFTF9NVVNJQ1wiO1xuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTEVWRUxfTVVTSUNfUEFUSCA9IFwiaHc0X2Fzc2V0cy9tdXNpYy9NYWluR2FtZU11c2ljLndhdlwiO1xuXG5cblxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih2aWV3cG9ydDogVmlld3BvcnQsIHNjZW5lTWFuYWdlcjogU2NlbmVNYW5hZ2VyLCByZW5kZXJpbmdNYW5hZ2VyOiBSZW5kZXJpbmdNYW5hZ2VyLCBvcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSB7XG4gICAgICAgIHN1cGVyKHZpZXdwb3J0LCBzY2VuZU1hbmFnZXIsIHJlbmRlcmluZ01hbmFnZXIsIG9wdGlvbnMpO1xuXG4gICAgICAgIHRoaXMuYmF0dGxlcnMgPSBuZXcgQXJyYXk8QmF0dGxlciAmIEFjdG9yPigpO1xuICAgICAgICB0aGlzLmhlYWx0aGJhcnMgPSBuZXcgTWFwPG51bWJlciwgSGVhbHRoYmFySFVEPigpO1xuICAgICAgICB0aGlzLnBsYXllciA9IG5ldyBBcnJheTxQbGF5ZXJBY3Rvcj4oKTtcbiAgICAgICAgdGhpcy5lbmVtaWVzID0gbmV3IEFycmF5PE5QQ0FjdG9yPigpO1xuICAgXG5cbiAgICAgICAgdGhpcy5sYXNlcmd1bnMgPSBuZXcgQXJyYXk8TGFzZXJHdW4+KCk7XG4gICAgICAgIHRoaXMuaGVhbHRocGFja3MgPSBuZXcgQXJyYXk8SGVhbHRocGFjaz4oKTtcblxuICAgICAgICB0aGlzLnNob290QXVkaW9LZXkgPSBMZXZlbDNTY2VuZS5TSE9PVF9BVURJT19LRVk7XG4gICAgICAgIHRoaXMuaGl0QXVkaW9LZXkgPSBMZXZlbDNTY2VuZS5ISVRfQVVESU9fS0VZO1xuICAgICAgICB0aGlzLmR5aW5nQXVkaW9LZXkgPSBMZXZlbDNTY2VuZS5EWUlOR19BVURJT19LRVk7XG4gICAgICAgIHRoaXMubGV2ZWxNdXNpY0tleSA9IExldmVsM1NjZW5lLkxFVkVMX01VU0lDX0tFWTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAc2VlIFNjZW5lLnVwZGF0ZSgpXG4gICAgICovXG4gICAgcHVibGljIG92ZXJyaWRlIGxvYWRTY2VuZSgpIHtcblxuXG4gICAgICAgIC8vIExvYWQgdGhlIHBsYXllciBhbmQgZW5lbXkgc3ByaXRlc2hlZXRzXG4gICAgICAgIHRoaXMubG9hZC5zcHJpdGVzaGVldChcInBsYXllcjFcIiwgXCJodzRfYXNzZXRzL3Nwcml0ZXNoZWV0cy9XYXJiYWxsXzAwMV9MdWthcy5qc29uXCIpO1xuXG4gICAgICAgIC8vIExvYWQgaW4gdGhlIGVuZW15IHNwcml0ZXNcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KFwiQmx1ZUVuZW15XCIsIFwiaHc0X2Fzc2V0cy9zcHJpdGVzaGVldHMvQmFsbF9DbG93bi5qc29uXCIpO1xuICAgICAgICB0aGlzLmxvYWQuc3ByaXRlc2hlZXQoXCJSZWRFbmVteVwiLCBcImh3NF9hc3NldHMvc3ByaXRlc2hlZXRzL0JhbGxfQmF0Lmpzb25cIik7XG4gICAgICAgIHRoaXMubG9hZC5zcHJpdGVzaGVldChcIkJsdWVIZWFsZXJcIiwgXCJodzRfYXNzZXRzL3Nwcml0ZXNoZWV0cy9Qc3lmbHkuanNvblwiKTtcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KFwiUmVkSGVhbGVyXCIsIFwiaHc0X2Fzc2V0cy9zcHJpdGVzaGVldHMvQmFsbF9CYXQuanNvblwiKTtcblxuICAgICAgICAvLyBMb2FkIHRoZSB0aWxlbWFwXG4gICAgICAgIHRoaXMubG9hZC50aWxlbWFwKFwibGV2ZWxcIiwgXCJodzRfYXNzZXRzL3RpbGVtYXBzL0xldmVsM1RpbGVtYXAuanNvblwiKTtcblxuICAgICAgICAvLyBMb2FkIHRoZSBlbmVteSBsb2NhdGlvbnNcbiAgICAgICAgLy8gdGhpcy5sb2FkLm9iamVjdChcInJlZFwiLCBcImh3NF9hc3NldHMvZGF0YS9lbmVtaWVzL2x2bDIuanNvblwiKTtcbiAgICAgICAgdGhpcy5sb2FkLm9iamVjdChcImJsdWVcIiwgXCJodzRfYXNzZXRzL2RhdGEvZW5lbWllcy9sdmwzLmpzb25cIik7XG5cbiAgICAgICAgLy8gTG9hZCB0aGUgaGVhbHRocGFjayBhbmQgbGFzZXJndW4gbG9hY3Rpb25zXG4gICAgICAgIHRoaXMubG9hZC5vYmplY3QoXCJoZWFsdGhwYWNrc1wiLCBcImh3NF9hc3NldHMvZGF0YS9pdGVtcy9oZWFsdGhwYWNrcy5qc29uXCIpO1xuICAgICAgICB0aGlzLmxvYWQub2JqZWN0KFwibGFzZXJndW5zXCIsIFwiaHc0X2Fzc2V0cy9kYXRhL2l0ZW1zL2xhc2VyZ3Vucy5qc29uXCIpO1xuXG4gICAgICAgIC8vIExvYWQgdGhlIGhlYWx0aHBhY2ssIGludmVudG9yeSBzbG90LCBhbmQgbGFzZXIgZ3VuIHNwcml0ZXNcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKFwiaGVhbHRocGFja1wiLCBcImh3NF9hc3NldHMvc3ByaXRlcy9oZWFsdGhwYWNrLnBuZ1wiKTtcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKFwiaW52ZW50b3J5U2xvdFwiLCBcImh3NF9hc3NldHMvc3ByaXRlcy9pbnZlbnRvcnkucG5nXCIpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoXCJsYXNlckd1blwiLCBcImh3NF9hc3NldHMvc3ByaXRlcy9sYXNlckd1bi5wbmdcIik7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShMZXZlbDNTY2VuZS5QQVVTRV9LRVksIExldmVsM1NjZW5lLlBBVVNFX1BBVEgpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoTGV2ZWwzU2NlbmUuSEVMUF9LRVksIExldmVsM1NjZW5lLkhFTFBfUEFUSCk7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShMZXZlbDNTY2VuZS5DT05UUk9MU19LRVksIExldmVsM1NjZW5lLkNPTlRST0xTX1BBVEgpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoTGV2ZWwzU2NlbmUuQ09NUExFVEVfS0VZLCBMZXZlbDNTY2VuZS5DT01QTEVURV9QQVRIKTtcblxuICAgICAgICB0aGlzLmxvYWQuYXVkaW8odGhpcy5zaG9vdEF1ZGlvS2V5LCBMZXZlbDNTY2VuZS5TSE9PVF9BVURJT19QQVRIKTtcbiAgICAgICAgdGhpcy5sb2FkLmF1ZGlvKHRoaXMuaGl0QXVkaW9LZXksIExldmVsM1NjZW5lLkhJVF9BVURJT19QQVRIKTtcbiAgICAgICAgdGhpcy5sb2FkLmF1ZGlvKHRoaXMuZHlpbmdBdWRpb0tleSwgTGV2ZWwzU2NlbmUuRFlJTkdfQVVESU9fUEFUSCk7XG4gICAgICAgIHRoaXMubG9hZC5hdWRpbyh0aGlzLmxldmVsTXVzaWNLZXksIExldmVsM1NjZW5lLkxFVkVMX01VU0lDX1BBVEgpO1xuXG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBzdGFydFNjZW5lKCkge1xuICAgICAgICAvLyBzdXBlci5zdGFydFNjZW5lKCk7XG4gICAgICAgIC8vIFxuXG4gICAgICAgIGNvbnN0IGNlbnRlciA9IHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCk7XG5cbiAgICAgICAgXG5cbiAgICAgICAgLy8gdGhpcy5hZGRMYXllcihNYWluU2NlbmVMYXllcnMuVUksICk7XG4gICAgICAgIC8vIHRoaXMuYWRkTGF5ZXIoTWFpblNjZW5lTGF5ZXJzLlBBVVNFLCA1KTtcbiAgICAgICAgLy8gbGV0IHYgPSB0aGlzLmdldExheWVyKFwiVUlcIik7XG4gICAgICAgIFxuICAgICAgICBcblxuICAgICAgICAvLyBBZGQgaW4gdGhlIHRpbGVtYXBcbiAgICAgICAgbGV0IHRpbGVtYXBMYXllcnMgPSB0aGlzLmFkZC50aWxlbWFwKFwibGV2ZWxcIik7XG5cbiAgICAgICAgLy8gR2V0IHRoZSB3YWxsIGxheWVyXG4gICAgICAgIHRoaXMud2FsbHMgPSA8T3J0aG9nb25hbFRpbGVtYXA+dGlsZW1hcExheWVyc1sxXS5nZXRJdGVtcygpWzBdO1xuXG4gICAgICAgIC8vIFNldCB0aGUgdmlld3BvcnQgYm91bmRzIHRvIHRoZSB0aWxlbWFwXG4gICAgICAgIGxldCB0aWxlbWFwU2l6ZTogVmVjMiA9IHRoaXMud2FsbHMuc2l6ZTtcblxuICAgICAgICB0aGlzLnZpZXdwb3J0LnNldEJvdW5kcygwLCAwLCB0aWxlbWFwU2l6ZS54LCB0aWxlbWFwU2l6ZS55KTtcbiAgICBcbiAgICAgICAgLy8gXG5cbiAgICAgICAgdGhpcy5pbml0TGF5ZXJzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgdGhlIHBsYXllclxuICAgICAgICB0aGlzLmluaXRpYWxpemVQbGF5ZXIoKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplSXRlbXMoKTtcblxuICAgICAgICB0aGlzLmluaXRpYWxpemVOYXZtZXNoKCk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBOUENTXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZU5QQ3MoKTtcblxuICAgICAgICAvLyBTdWJzY3JpYmUgdG8gcmVsZXZhbnQgZXZlbnRzXG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFwiaGVhbHRocGFja1wiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJlbmVteURpZWRcIik7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKEl0ZW1FdmVudC5JVEVNX1JFUVVFU1QpO1xuXG4gICAgXG5cbiAgICAgICAgLy8gQWRkIGEgVUkgZm9yIGhlYWx0aFxuICAgICAgICB0aGlzLmFkZFVJTGF5ZXIoXCJoZWFsdGhcIik7XG5cbiAgICAgICAgLy8gUGF1c2UgQnV0dG9uIChOb3QgbmVlZGVkIGp1c3QgcHJlc3MgZXNjYXBlKVxuICAgICAgICAvLyBsZXQgcGF1c2UgPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIE1haW5TY2VuZUxheWVycy5VSSwge3Bvc2l0aW9uOiBuZXcgVmVjMihjZW50ZXIueCArIDYwMCwgY2VudGVyLnkgLSA0MDApLCB0ZXh0OiBcIlBhdXNlXCJ9KTtcbiAgICAgICAgLy8gcGF1c2Uuc2l6ZS5zZXQoMTAwLCA1MCk7XG4gICAgICAgIC8vIHBhdXNlLmJvcmRlcldpZHRoID0gMjtcbiAgICAgICAgLy8gcGF1c2UuYm9yZGVyQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgLy8gcGF1c2UuYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIC8vIHBhdXNlLm9uQ2xpY2tFdmVudElkID0gXCJwYXVzZVwiO1xuXG4gICAgICAgIC8vIHRoaXMucGF1c2VNZW51ID0gcGF1c2U7XG5cbiAgICAgICAgLy8gVE9ETyBNYWtlIHRleHQgbW92ZSB3aXRoIGJ1dHRvblxuXG4gICAgICAgIC8vIGxldCBwYXVzZUJhciA9IG5ldyBQYXVzZUhVRCh0aGlzLCBwYXVzZSwgY2VudGVyKTtcbiAgICAgICAgLy8gdGhpcy5wYXVzZSA9IHBhdXNlQmFyO1xuXG5cbiAgICAgICAgbGV0IHBhdXNlTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiUEFVU0VcIik7XG5cbiAgICAgICAgdGhpcy5wYXVzZUltYWdlID0gdGhpcy5hZGQuc3ByaXRlKExldmVsM1NjZW5lLlBBVVNFX0tFWSwgcGF1c2VMYXllci5nZXROYW1lKCkpO1xuICAgICAgICB0aGlzLnBhdXNlSW1hZ2UucG9zaXRpb24uY29weSh0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTtcbiAgICAgICAgLy8gdGhpcy5wYXVzZUltYWdlLmFscGhhID0gMC43O1xuXG4gICAgICAgIGNvbnN0IHVucGF1c2UgPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIExldmVsM1NjZW5lTGF5ZXJzLlBBVVNFLCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54IC0gNSwgY2VudGVyLnkgLSAyMTApLCB0ZXh0OiBcIlwifSk7XG4gICAgICAgIHVucGF1c2Uuc2l6ZS5zZXQoNDAwLCAxMDApO1xuICAgICAgICB1bnBhdXNlLmJvcmRlcldpZHRoID0gMjtcbiAgICAgICAgdW5wYXVzZS5ib3JkZXJDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICB1bnBhdXNlLmJhY2tncm91bmRDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICB1bnBhdXNlLm9uQ2xpY2tFdmVudElkID0gXCJ1bnBhdXNlXCI7XG5cbiAgICAgICAgY29uc3QgbWFpbk1lbnUgPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIExldmVsM1NjZW5lTGF5ZXJzLlBBVVNFLCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54IC0gNSwgY2VudGVyLnkgKyAyMjMpLCB0ZXh0OiBcIlwifSk7XG4gICAgICAgIG1haW5NZW51LnNpemUuc2V0KDQwMCwgMTAwKTtcbiAgICAgICAgbWFpbk1lbnUuYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICBtYWluTWVudS5ib3JkZXJDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBtYWluTWVudS5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgbWFpbk1lbnUub25DbGlja0V2ZW50SWQgPSBcIm1haW5tZW51XCI7XG5cbiAgICAgICAgY29uc3QgY29udHJvbHNCdXR0b24gPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIExldmVsM1NjZW5lTGF5ZXJzLlBBVVNFLCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54IC0gNSwgY2VudGVyLnkgLSA2NSksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgY29udHJvbHNCdXR0b24uc2l6ZS5zZXQoNDAwLCAxMDApO1xuICAgICAgICBjb250cm9sc0J1dHRvbi5ib3JkZXJXaWR0aCA9IDI7XG4gICAgICAgIGNvbnRyb2xzQnV0dG9uLmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIGNvbnRyb2xzQnV0dG9uLmJhY2tncm91bmRDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBjb250cm9sc0J1dHRvbi5vbkNsaWNrRXZlbnRJZCA9IFwiY29udHJvbHNcIjtcblxuICAgICAgICBjb25zdCBoZWxwQnV0dG9uID0gdGhpcy5hZGQudWlFbGVtZW50KFVJRWxlbWVudFR5cGUuQlVUVE9OLCBMZXZlbDNTY2VuZUxheWVycy5QQVVTRSwge3Bvc2l0aW9uOiBuZXcgVmVjMihjZW50ZXIueCAtIDUsIGNlbnRlci55ICsgODApLCB0ZXh0OiBcIlwifSk7XG4gICAgICAgIGhlbHBCdXR0b24uc2l6ZS5zZXQoNDAwLCAxMDApXG4gICAgICAgIGhlbHBCdXR0b24uYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICBoZWxwQnV0dG9uLmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIGhlbHBCdXR0b24uYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIGhlbHBCdXR0b24ub25DbGlja0V2ZW50SWQgPSBcImhlbHBcIjtcbiAgICAgICAgXG5cbiAgICAgICAgcGF1c2VMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgICAgIHBhdXNlTGF5ZXIuc2V0SGlkZGVuKHRydWUpO1xuXG4gICAgICAgXG4gICAgICAgIGxldCBjb250cm9sc0xheWVyID0gdGhpcy5nZXRMYXllcihcIkNPTlRST0xTXCIpO1xuXG4gICAgICAgIHRoaXMuY29udHJvbHNJbWFnZSA9IHRoaXMuYWRkLnNwcml0ZShMZXZlbDNTY2VuZS5DT05UUk9MU19LRVksIGNvbnRyb2xzTGF5ZXIuZ2V0TmFtZSgpKTtcbiAgICAgICAgdGhpcy5jb250cm9sc0ltYWdlLnBvc2l0aW9uLmNvcHkodGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKSk7XG4gICAgICAgIC8vIHRoaXMuY29udHJvbHNJbWFnZS5hbHBoYSA9IDAuNTtcblxuICAgICAgICBjb25zdCBjb250cm9sc0JhY2tCdXR0b24gPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIExldmVsM1NjZW5lTGF5ZXJzLkNPTlRST0xTLCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54IC0gNTk1LCBjZW50ZXIueSArIDQxNSksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgY29udHJvbHNCYWNrQnV0dG9uLnNpemUuc2V0KDIwMCwgNTApO1xuICAgICAgICBjb250cm9sc0JhY2tCdXR0b24uYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICBjb250cm9sc0JhY2tCdXR0b24uYm9yZGVyQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgY29udHJvbHNCYWNrQnV0dG9uLmJhY2tncm91bmRDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBjb250cm9sc0JhY2tCdXR0b24ub25DbGlja0V2ZW50SWQgPSBcImJhY2tjb250cm9sc1wiO1xuXG4gICAgICAgIGNvbnRyb2xzTGF5ZXIuc2V0UGF1c2VkKHRydWUpO1xuICAgICAgICBjb250cm9sc0xheWVyLnNldEhpZGRlbih0cnVlKTtcblxuICAgICAgICAvLyBcbiAgICAgICAgbGV0IGhlbHBMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJIRUxQXCIpO1xuXG4gICAgICAgIHRoaXMuaGVscEltYWdlID0gdGhpcy5hZGQuc3ByaXRlKExldmVsM1NjZW5lLkhFTFBfS0VZLCBoZWxwTGF5ZXIuZ2V0TmFtZSgpKTtcbiAgICAgICAgdGhpcy5oZWxwSW1hZ2UucG9zaXRpb24uY29weSh0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTtcbiAgICAgICAgLy8gdGhpcy5oZWxwSW1hZ2UuYWxwaGEgPSAwLjU7XG5cbiAgICAgICAgY29uc3QgaGVscEJhY2tCdXR0b24gPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIExldmVsM1NjZW5lTGF5ZXJzLkhFTFAsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLnggLSA1OTUsIGNlbnRlci55ICsgNDE1KSwgdGV4dDogXCJcIn0pO1xuICAgICAgICBoZWxwQmFja0J1dHRvbi5zaXplLnNldCgyMDAsIDUwKTtcbiAgICAgICAgaGVscEJhY2tCdXR0b24uYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICBoZWxwQmFja0J1dHRvbi5ib3JkZXJDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBoZWxwQmFja0J1dHRvbi5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgaGVscEJhY2tCdXR0b24ub25DbGlja0V2ZW50SWQgPSBcImhlbHBjb250cm9sc1wiO1xuXG4gICAgICAgIGhlbHBMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgICAgIGhlbHBMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG5cbiAgICAgICAgbGV0IGNvbXBsZXRlTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiQ09NUExFVEVcIik7XG5cbiAgICAgICAgdGhpcy5jb21wbGV0ZUltYWdlID0gdGhpcy5hZGQuc3ByaXRlKEZpbmFsUHJvamVjdFNjZW5lLkNPTVBMRVRFX0tFWSwgY29tcGxldGVMYXllci5nZXROYW1lKCkpO1xuICAgICAgICB0aGlzLmNvbXBsZXRlSW1hZ2UucG9zaXRpb24uY29weSh0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTtcblxuICAgICAgICBjb25zdCBjb21wbGV0ZUJ1dHRvbiA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTGV2ZWwzU2NlbmVMYXllcnMuQ09NUExFVEUsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLngsIGNlbnRlci55ICsgNDc1KSwgdGV4dDogXCJcIn0pO1xuICAgICAgICBjb21wbGV0ZUJ1dHRvbi5zaXplLnNldCgxMzIwLCAyMDAwKTtcbiAgICAgICAgY29tcGxldGVCdXR0b24uYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICBjb21wbGV0ZUJ1dHRvbi5ib3JkZXJDb2xvciA9IENvbG9yLldISVRFO1xuICAgICAgICBjb21wbGV0ZUJ1dHRvbi5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgY29tcGxldGVCdXR0b24ub25DbGlja0V2ZW50SWQgPSBcIm5leHRsdmxcIjtcblxuICAgICAgICBjb21wbGV0ZUxheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICAgICAgY29tcGxldGVMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG5cblxuICAgICAgICAvLyB0aGlzLnBhdXNlTWVudSA9IHVucGF1c2U7XG5cbiAgICAgICAgLy8gbGV0IHZhbCA9IHRoaXMubGF5ZXJzO1xuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHZhbCk7XG5cbiAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMyk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShQbGF5ZXJFdmVudC5QTEFZRVJfS0lMTEVEKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoQmF0dGxlckV2ZW50LkJBVFRMRVJfS0lMTEVEKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoQmF0dGxlckV2ZW50LkJBVFRMRVJfUkVTUEFXTik7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFwicGF1c2VcIik7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFwidW5wYXVzZVwiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJtYWlubWVudVwiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJjb250cm9sc1wiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJoZWxwXCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcImJhY2tjb250cm9sc1wiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJoZWxwY29udHJvbHNcIik7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFwibmV4dGx2bFwiKTtcblxuICAgICAgICB0aGlzLmVtaXR0ZXIuZmlyZUV2ZW50KEdhbWVFdmVudFR5cGUuUExBWV9TT1VORCwge2tleTogdGhpcy5sZXZlbE11c2ljS2V5LCBsb29wOiB0cnVlLCBob2xkUmVmZXJlbmNlOiB0cnVlfSk7XG4gICAgICAgIC8vIHRoaXMuZW1pdHRlci5maXJlRXZlbnQoR2FtZUV2ZW50VHlwZS5QTEFZX1NPVU5ELCB7a2V5OiB0aGlzLmdldFNob290QXVkaW9LZXkoKSwgbG9vcDogZmFsc2UsIGhvbGRSZWZlcmVuY2U6IGZhbHNlfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHNlZSBTY2VuZS51cGRhdGVTY2VuZVxuICAgICAqL1xuICBwdWJsaWMgb3ZlcnJpZGUgdXBkYXRlU2NlbmUoZGVsdGFUOiBudW1iZXIpOiB2b2lkIHtcbiAgICB3aGlsZSAodGhpcy5yZWNlaXZlci5oYXNOZXh0RXZlbnQoKSkge1xuICAgICAgICB0aGlzLmhhbmRsZUV2ZW50KHRoaXMucmVjZWl2ZXIuZ2V0TmV4dEV2ZW50KCkpO1xuICAgIH1cbiAgICAvLyB0aGlzLmludmVudG9yeUh1ZC51cGRhdGUoZGVsdGFUKTtcbiAgICB0aGlzLmhlYWx0aGJhcnMuZm9yRWFjaChoZWFsdGhiYXIgPT4gaGVhbHRoYmFyLnVwZGF0ZShkZWx0YVQpKTtcbiAgICAvLyB0aGlzLnBhdXNlLnNldENlbnRlcih0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTtcbiAgICAvLyB0aGlzLnBhdXNlTWVudS51cGRhdGUoZGVsdGFUKTtcbiAgICAvLyB0aGlzLnBhdXNlLnVwZGF0ZShkZWx0YVQpO1xuXG4gICAgaWYgKElucHV0LmlzS2V5SnVzdFByZXNzZWQoXCJlc2NhcGVcIikpe1xuICAgIFxuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiRXNjYXBlIHByZXNzZWRcIik7XG4gICAgICAgIGxldCB2ID0gbmV3IEdhbWVFdmVudChcInBhdXNlXCIsIG51bGwpO1xuICAgICAgICB0aGlzLmhhbmRsZUV2ZW50KHYpO1xuICAgIH1cbiAgICBpZiAodGhpcy5ib3NzLmhlYWx0aCA8PSAwKSB7XG4gICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICB0aGlzLnVucGF1c2VDb21wbGV0ZUxheWVyKCk7XG5cbiAgICAgICAgdGhpcy5wbGF5ZXJbMF0uZnJlZXplKCk7IC8vIEZyZWV6ZXMgcGxheWVyXG4gICAgICAgIHRoaXMucGxheWVyWzBdLmRpc2FibGVQaHlzaWNzKCk7XG4gICAgICAgIHRoaXMucGxheWVyWzBdLmFpQWN0aXZlID0gZmFsc2U7XG4gICAgICAgIFxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5lbmVtaWVzLmxlbmd0aDsgaSsrKXsgLy8gRnJlZXplcyBlbmVtaWVzIFxuICAgICAgICAgICAgaWYodGhpcy5lbmVtaWVzW2ldLmJhdHRsZXJBY3RpdmUgPT0gdHJ1ZSl7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmVtaWVzW2ldLmZyZWV6ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5lbWllc1tpXS5kaXNhYmxlUGh5c2ljcygpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5lbWllc1tpXS5haUFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgfSBcblxuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBwYXVzZUxheWVyID0gdGhpcy5nZXRMYXllcihcIlBBVVNFXCIpO1xuICAgXG4gICAgaWYoIXBhdXNlTGF5ZXIuaXNIaWRkZW4oKSl7XG4gICAgICAgIHRoaXMucGF1c2VJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpOyAvLyBXb3JrcyBidXQgd2hlbiBtb3ZpbmcgdGhlIHNjcmVlbiBnZXRzIG1vdmVkIHVwd2FyZHMuXG4gICAgfVxuXG4gICAgaWYoSW5wdXQuaXNLZXlQcmVzc2VkKFwielwiKSl7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgxKTtcbiAgICB9XG4gICAgXG4gICAgaWYoSW5wdXQuaXNLZXlQcmVzc2VkKFwieFwiKSl7XG4gICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDMpO1xuICAgICB9XG5cbiAgICAgaWYoSW5wdXQuaXNLZXlKdXN0UHJlc3NlZChcIjFcIikpe1xuICAgICAgICB0aGlzLnZpZXdwb3J0LmZvbGxvdyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoTGV2ZWwxU2NlbmUpO1xuICAgICB9XG4gICAgIGlmKElucHV0LmlzS2V5SnVzdFByZXNzZWQoXCIyXCIpKXtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKExldmVsMlNjZW5lKTtcbiAgICAgfVxuICAgICBpZihJbnB1dC5pc0tleUp1c3RQcmVzc2VkKFwiM1wiKSl7XG4gICAgICAgIHRoaXMudmlld3BvcnQuZm9sbG93KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgxKTtcbiAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShMZXZlbDNTY2VuZSk7XG4gICAgIH1cbiAgICAgaWYoSW5wdXQuaXNLZXlKdXN0UHJlc3NlZChcIjRcIikpe1xuICAgICAgICB0aGlzLnZpZXdwb3J0LmZvbGxvdyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoTGV2ZWw0U2NlbmUpO1xuICAgICB9XG4gICAgIGlmKElucHV0LmlzS2V5SnVzdFByZXNzZWQoXCI1XCIpKXtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKExldmVsNVNjZW5lKTtcbiAgICAgfVxuICAgICBpZihJbnB1dC5pc0tleUp1c3RQcmVzc2VkKFwiNlwiKSl7XG4gICAgICAgIHRoaXMudmlld3BvcnQuZm9sbG93KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgxKTtcbiAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShMYXN0U2NlbmUpO1xuICAgICB9XG5cbiAgICAgaWYoSW5wdXQuaXNLZXlKdXN0UHJlc3NlZChcInRcIikpe1xuICAgICAgICB0aGlzLnBsYXllclswXS5wb3NpdGlvbiA9IHRoaXMuYm9zc0xvY2F0aW9uO1xuICAgICB9XG5cblxuICAgIC8vIEFub3RoZXIgd2F5IHRvIHBsYXkgc2hvb3QgYXVkaW8gaXMgd2hlbiBwbGF5ZXIgcHJlc3NlZCBzcGFjZVxuICAgIC8vICBpZihJbnB1dC5pc0tleUp1c3RQcmVzc2VkKFwic3BhY2VcIikpe1xuICAgIC8vICAgICBjb25zb2xlLmxvZyhcIlNob290IEF1ZGlvIFBsYXllZFwiKTtcbiAgICAvLyAgICAgdGhpcy5lbWl0dGVyLmZpcmVFdmVudChHYW1lRXZlbnRUeXBlLlBMQVlfU09VTkQsIHtrZXk6IHRoaXMuZ2V0U2hvb3RBdWRpb0tleSgpLCBsb29wOiBmYWxzZSwgaG9sZFJlZmVyZW5jZTogZmFsc2V9KTtcbiAgICAvLyAgfVxuICAgIC8vIFRPRE8gSWYgaW5wdXQgaXMgMiwgMywgNCwgNSwgNiBnbyB0byB0aG9zZSBsZXZlbHMgYnkgY2hhbmluZyB0aGUgc2NlbmVcblxufVxuXG4vKipcbiAqIEhhbmRsZSBldmVudHMgZnJvbSB0aGUgcmVzdCBvZiB0aGUgZ2FtZVxuICogQHBhcmFtIGV2ZW50IGEgZ2FtZSBldmVudFxuICovXG5wdWJsaWMgaGFuZGxlRXZlbnQoZXZlbnQ6IEdhbWVFdmVudCk6IHZvaWQge1xuICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuICAgICAgICBjYXNlIEJhdHRsZXJFdmVudC5CQVRUTEVSX0tJTExFRDoge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVCYXR0bGVyS2lsbGVkKGV2ZW50KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgQmF0dGxlckV2ZW50LkJBVFRMRVJfUkVTUEFXTjoge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBJdGVtRXZlbnQuSVRFTV9SRVFVRVNUOiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUl0ZW1SZXF1ZXN0KGV2ZW50LmRhdGEuZ2V0KFwibm9kZVwiKSwgZXZlbnQuZGF0YS5nZXQoXCJpbnZlbnRvcnlcIikpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBQbGF5ZXJFdmVudC5QTEFZRVJfS0lMTEVEOiB7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LmZvbGxvdyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShHYW1lT3Zlcik7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInBhdXNlXCI6IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGF1c2VcIik7XG5cbiAgICAgICAgICAgIC8vIHRoaXMucGF1c2VJbWFnZS5zY2FsZSA9IHRoaXMucGF1c2VJbWFnZS5zaXplV2l0aFpvb207XG5cbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICAgICAgdGhpcy5wYXVzZUltYWdlLnBvc2l0aW9uLmNvcHkodGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKSk7IC8vIFdvcmtzIGJ1dCB3aGVuIG1vdmluZyB0aGUgc2NyZWVuIGdldHMgbW92ZWQgdXB3YXJkcy5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIHRoaXMudmlld3BvcnQuZm9sbG93KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMucGxheWVyWzBdLmZyZWV6ZSgpOyAvLyBGcmVlemVzIHBsYXllclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJbMF0uZGlzYWJsZVBoeXNpY3MoKTtcblxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuZW5lbWllcy5sZW5ndGg7IGkrKyl7IC8vIEZyZWV6ZXMgZW5lbWllcyBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgIGlmKHRoaXMuZW5lbWllc1tpXS5iYXR0bGVyQWN0aXZlID09IHRydWUpe1xuICAgICAgICAgICAgICAgIHRoaXMuZW5lbWllc1tpXS5mcmVlemUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZW1pZXNbaV0uZGlzYWJsZVBoeXNpY3MoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZW1pZXNbaV0uYWlBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgIH0gXG5cbiAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIHRoaXMuZW5lbWllc1tpXS5jbGVhclRhcmdldCgpOyBcbiAgICAgICAgICAgICAgICAvLyBUT0RPIFN0b3AgZW5lbXkgZnJvbSBhdHRhY2tpbmcgd2hpbGUgcGF1c2VkXG4gICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICB0aGlzLnVucGF1c2VQYXVzZUxheWVyKCk7IFxuICAgICAgICAgICB0aGlzLnBhdXNlUHJpbWFyeUxheWVyKCk7XG4gICAgICAgICAgIHRoaXMucGF1c2VVSUxheWVyKCk7XG5cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInVucGF1c2VcIjoge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ1bnBhdXNlXCIpO1xuXG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgzKTtcbiAgICAgICAgICAgIGxldCBjZW50ZXIgPSB0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpO1xuICAgICAgICAgICAgLy8gdGhpcy5wYXVzZU1lbnUucG9zaXRpb24uc2V0KGNlbnRlci54LCBjZW50ZXIueSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJbMF0udW5mcmVlemUoKTtcbiAgICAgICAgICAgIHRoaXMucGxheWVyWzBdLmVuYWJsZVBoeXNpY3MoKTtcbiAgICAgICAgICAgIC8vIElucHV0LmVuYWJsZUlucHV0KCk7XG5cbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmVuZW1pZXMubGVuZ3RoOyBpKyspe1xuXG4gICAgICAgICAgICAgICAgaWYodGhpcy5lbmVtaWVzW2ldLmJhdHRsZXJBY3RpdmUgPT0gdHJ1ZSl7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuZW5lbWllc1tpXS51bmZyZWV6ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5lbWllc1tpXS5lbmFibGVQaHlzaWNzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmVtaWVzW2ldLmFpQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gdGhpcy5lbmVtaWVzW2ldLnNldFRhcmdldCh0aGlzLmJhdHRsZXJzWzBdKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5wYXVzZVBhdXNlTGF5ZXIoKTtcbiAgICAgICAgICAgIHRoaXMudW5wYXVzZVByaW1hcnlMYXllcigpO1xuICAgICAgICAgICAgdGhpcy51bnBhdXNlVUlMYXllcigpO1xuXG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IFxuICAgICAgICBjYXNlIFwibWFpbm1lbnVcIjoge1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShNYWluTWVudSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBcbiAgICAgICAgY2FzZSBcImNvbnRyb2xzXCI6IHtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbHNJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuICAgICAgICAgICAgdGhpcy5wYXVzZVBhdXNlTGF5ZXIoKTtcbiAgICAgICAgICAgIHRoaXMudW5wYXVzZUNvbnRyb2xzTGF5ZXIoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IFxuICAgICAgICBjYXNlIFwiYmFja2NvbnRyb2xzXCI6IHtcbiAgICAgICAgICAgIHRoaXMudW5wYXVzZVBhdXNlTGF5ZXIoKTtcbiAgICAgICAgICAgIHRoaXMucGF1c2VDb250cm9sc0xheWVyKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiaGVscFwiOiB7XG4gICAgICAgICAgICB0aGlzLmhlbHBJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuICAgICAgICAgICAgdGhpcy5wYXVzZVBhdXNlTGF5ZXIoKTtcbiAgICAgICAgICAgIHRoaXMudW5wYXVzZUhlbHBMYXllcigpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImhlbHBjb250cm9sc1wiOiB7XG4gICAgICAgICAgICB0aGlzLnVucGF1c2VQYXVzZUxheWVyKCk7XG4gICAgICAgICAgICB0aGlzLnBhdXNlSGVscExheWVyKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwibmV4dGx2bFwiOiB7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LmZvbGxvdyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKExldmVsNFNjZW5lKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5oYW5kbGVkIGV2ZW50IHR5cGUgXCIke2V2ZW50LnR5cGV9XCIgY2F1Z2h0IGluIEhXM1NjZW5lIGV2ZW50IGhhbmRsZXJgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxucHJvdGVjdGVkIHBhdXNlUGF1c2VMYXllcigpOiB2b2lkIHtcbiAgICBsZXQgcGF1c2VMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJQQVVTRVwiKTtcbiAgICBwYXVzZUxheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICBwYXVzZUxheWVyLnNldEhpZGRlbih0cnVlKTtcbn1cblxucHJvdGVjdGVkIHVucGF1c2VQYXVzZUxheWVyKCk6IHZvaWQge1xuICAgIGxldCBwYXVzZUxheWVyID0gdGhpcy5nZXRMYXllcihcIlBBVVNFXCIpO1xuICAgIHBhdXNlTGF5ZXIuc2V0UGF1c2VkKGZhbHNlKTtcbiAgICBwYXVzZUxheWVyLnNldEhpZGRlbihmYWxzZSk7XG59XG5cbnByb3RlY3RlZCBwYXVzZUNvbnRyb2xzTGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IGNvbnRyb2xzTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiQ09OVFJPTFNcIik7XG4gICAgY29udHJvbHNMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgY29udHJvbHNMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG59XG5cbnByb3RlY3RlZCB1bnBhdXNlQ29udHJvbHNMYXllcigpOiB2b2lkIHtcbiAgICBsZXQgY29udHJvbHNMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJDT05UUk9MU1wiKTtcbiAgICBjb250cm9sc0xheWVyLnNldFBhdXNlZChmYWxzZSk7XG4gICAgY29udHJvbHNMYXllci5zZXRIaWRkZW4oZmFsc2UpO1xufVxuXG5wcm90ZWN0ZWQgcGF1c2VQcmltYXJ5TGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IHByaW1hcnlMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJwcmltYXJ5XCIpO1xuICAgIHByaW1hcnlMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgcHJpbWFyeUxheWVyLnNldEhpZGRlbih0cnVlKTtcbn1cblxucHJvdGVjdGVkIHVucGF1c2VQcmltYXJ5TGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IHByaW1hcnlMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJwcmltYXJ5XCIpO1xuICAgIHByaW1hcnlMYXllci5zZXRQYXVzZWQoZmFsc2UpO1xuICAgIHByaW1hcnlMYXllci5zZXRIaWRkZW4oZmFsc2UpO1xufVxuXG5wcm90ZWN0ZWQgcGF1c2VVSUxheWVyKCk6IHZvaWQge1xuICAgIGxldCB1aUxheWVyID0gdGhpcy5nZXRMYXllcihcIlVJXCIpO1xuICAgIHVpTGF5ZXIuc2V0UGF1c2VkKHRydWUpO1xuICAgIHVpTGF5ZXIuc2V0SGlkZGVuKHRydWUpO1xufVxuXG5wcm90ZWN0ZWQgdW5wYXVzZVVJTGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IHVpTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiVUlcIik7XG4gICAgdWlMYXllci5zZXRQYXVzZWQoZmFsc2UpO1xuICAgIHVpTGF5ZXIuc2V0SGlkZGVuKGZhbHNlKTtcbn1cblxucHJvdGVjdGVkIHBhdXNlSGVscExheWVyKCk6IHZvaWQge1xuICAgIGxldCBoZWxwTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiSEVMUFwiKTtcbiAgICBoZWxwTGF5ZXIuc2V0UGF1c2VkKHRydWUpO1xuICAgIGhlbHBMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG59XG5cbnByb3RlY3RlZCB1bnBhdXNlSGVscExheWVyKCk6IHZvaWQge1xuICAgIGxldCBoZWxwTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiSEVMUFwiKTtcbiAgICBoZWxwTGF5ZXIuc2V0UGF1c2VkKGZhbHNlKTtcbiAgICBoZWxwTGF5ZXIuc2V0SGlkZGVuKGZhbHNlKTtcbn1cblxucHJvdGVjdGVkIHBhdXNlQ29tcGxldGVMYXllcigpOiB2b2lkIHtcbiAgICBsZXQgY29tcGxldGVMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJDT01QTEVURVwiKTtcbiAgICBjb21wbGV0ZUxheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICBjb21wbGV0ZUxheWVyLnNldEhpZGRlbih0cnVlKTtcbn1cblxucHJvdGVjdGVkIHVucGF1c2VDb21wbGV0ZUxheWVyKCk6IHZvaWQge1xuICAgIGxldCBjb21wbGV0ZUxheWVyID0gdGhpcy5nZXRMYXllcihcIkNPTVBMRVRFXCIpO1xuICAgIGNvbXBsZXRlTGF5ZXIuc2V0UGF1c2VkKGZhbHNlKTtcbiAgICBjb21wbGV0ZUxheWVyLnNldEhpZGRlbihmYWxzZSk7XG59XG5cblxuXG5wcm90ZWN0ZWQgaGFuZGxlSXRlbVJlcXVlc3Qobm9kZTogR2FtZU5vZGUsIGludmVudG9yeTogSW52ZW50b3J5KTogdm9pZCB7XG4gICAgbGV0IGl0ZW1zOiBJdGVtW10gPSBuZXcgQXJyYXk8SXRlbT4oLi4udGhpcy5oZWFsdGhwYWNrcywgLi4udGhpcy5sYXNlcmd1bnMpLmZpbHRlcigoaXRlbTogSXRlbSkgPT4ge1xuICAgICAgICByZXR1cm4gaXRlbS5pbnZlbnRvcnkgPT09IG51bGwgJiYgaXRlbS5wb3NpdGlvbi5kaXN0YW5jZVRvKG5vZGUucG9zaXRpb24pIDw9IDEwMDtcbiAgICB9KTtcblxuICAgIGlmIChpdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGludmVudG9yeS5hZGQoaXRlbXMucmVkdWNlKENsb3Nlc3RQb3NpdGlvbmVkKG5vZGUpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhhbmRsZXMgYW4gTlBDIGJlaW5nIGtpbGxlZCBieSB1bnJlZ2lzdGVyaW5nIHRoZSBOUEMgZnJvbSB0aGUgc2NlbmVzIHN1YnN5c3RlbXNcbiAqIEBwYXJhbSBldmVudCBhbiBOUEMta2lsbGVkIGV2ZW50XG4gKi9cbnByb3RlY3RlZCBoYW5kbGVCYXR0bGVyS2lsbGVkKGV2ZW50OiBHYW1lRXZlbnQpOiB2b2lkIHtcbiAgICBsZXQgaWQ6IG51bWJlciA9IGV2ZW50LmRhdGEuZ2V0KFwiaWRcIik7XG4gICAgbGV0IGJhdHRsZXIgPSB0aGlzLmJhdHRsZXJzLmZpbmQoYiA9PiBiLmlkID09PSBpZCk7XG5cbiAgICBpZiAoYmF0dGxlcikge1xuICAgICAgICBiYXR0bGVyLmJhdHRsZXJBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5oZWFsdGhiYXJzLmdldChpZCkudmlzaWJsZSA9IGZhbHNlO1xuICAgIH1cbiAgICBcbn1cblxuLyoqIEluaXRpYWxpemVzIHRoZSBsYXllcnMgaW4gdGhlIHNjZW5lICovXG5wcm90ZWN0ZWQgaW5pdExheWVycygpOiB2b2lkIHtcblxuICAgIHRoaXMuYWRkTGF5ZXIoTGV2ZWwzU2NlbmVMYXllcnMuVUkpO1xuICAgIHRoaXMuYWRkTGF5ZXIoTGV2ZWwzU2NlbmVMYXllcnMuUEFVU0UsIDEwKTtcbiAgICB0aGlzLmFkZExheWVyKExldmVsM1NjZW5lTGF5ZXJzLkhFTFAsIDExKTtcbiAgICB0aGlzLmFkZExheWVyKExldmVsM1NjZW5lTGF5ZXJzLkNPTlRST0xTLCAxMSk7XG4gICAgdGhpcy5hZGRMYXllcihMZXZlbDNTY2VuZUxheWVycy5DT01QTEVURSwgMTIpO1xuXG4gICAgdGhpcy5hZGRMYXllcihcInByaW1hcnlcIiwgNSk7XG59XG5cblxuXG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIHBsYXllciBpbiB0aGUgc2NlbmVcbiAqL1xucHJvdGVjdGVkIGluaXRpYWxpemVQbGF5ZXIoKTogdm9pZCB7XG4gICAgY29uc3QgY2VudGVyID0gdGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKTtcbiAgICBsZXQgcGxheWVyID0gdGhpcy5hZGQuYW5pbWF0ZWRTcHJpdGUoUGxheWVyQWN0b3IsIFwicGxheWVyMVwiLCBcInByaW1hcnlcIik7XG4gICAgcGxheWVyLnBvc2l0aW9uLnNldChjZW50ZXIueC02MDAsIGNlbnRlci55KzMwMCk7XG5cbiAgICBwbGF5ZXIuYmF0dGxlR3JvdXAgPSAyO1xuICAgIFxuXG4gICAgcGxheWVyLmhlYWx0aCA9IDEwO1xuICAgIHBsYXllci5tYXhIZWFsdGggPSAxMDtcbiAgICBwbGF5ZXIuc2NhbGUgPSBuZXcgVmVjMigwLjQsIDAuNCk7IC8vIFNjYWxlcyBwbGF5ZXIgXG5cbiAgICBwbGF5ZXIuaW52ZW50b3J5Lm9uQ2hhbmdlID0gSXRlbUV2ZW50LklOVkVOVE9SWV9DSEFOR0VEXG4gICAgLy8gdGhpcy5pbnZlbnRvcnlIdWQgPSBuZXcgSW52ZW50b3J5SFVEKHRoaXMsIHBsYXllci5pbnZlbnRvcnksIFwiaW52ZW50b3J5U2xvdFwiLCB7XG4gICAgLy8gICAgIHN0YXJ0OiBuZXcgVmVjMigyMzIsIDI0KSxcbiAgICAvLyAgICAgc2xvdExheWVyOiBcInNsb3RzXCIsXG4gICAgLy8gICAgIHBhZGRpbmc6IDgsXG4gICAgLy8gICAgIGl0ZW1MYXllcjogXCJpdGVtc1wiXG4gICAgLy8gfSk7XG5cbiAgICAvLyBHaXZlIHRoZSBwbGF5ZXIgcGh5c2ljc1xuICAgIHBsYXllci5hZGRQaHlzaWNzKG5ldyBBQUJCKFZlYzIuWkVSTywgbmV3IFZlYzIoMTYsIDE2KSkpO1xuXG4gICAgLy8gR2l2ZSB0aGUgcGxheWVyIGEgaGVhbHRoYmFyXG4gICAgIGxldCBoZWFsdGhiYXIgPSBuZXcgSGVhbHRoYmFySFVEKHRoaXMsIHBsYXllciwgXCJwcmltYXJ5XCIsIHtzaXplOiBwbGF5ZXIuc2l6ZS5jbG9uZSgpLnNjYWxlZCgxLCAxLzQpLCBvZmZzZXQ6IHBsYXllci5zaXplLmNsb25lKCkuc2NhbGVkKDAsIC0xLzMpfSk7XG4gICAgdGhpcy5oZWFsdGhiYXJzLnNldChwbGF5ZXIuaWQsIGhlYWx0aGJhcik7XG5cbiAgICAvLyBHaXZlIHRoZSBwbGF5ZXIgUGxheWVyQUlcbiAgICBwbGF5ZXIuYWRkQUkoUGxheWVyQUkpO1xuXG4gICAgLy8gU3RhcnQgdGhlIHBsYXllciBpbiB0aGUgXCJJRExFXCIgYW5pbWF0aW9uXG4gICAgcGxheWVyLmFuaW1hdGlvbi5wbGF5KFwiSURMRVwiKTtcbiAgICBcbiAgICB0aGlzLmJhdHRsZXJzLnB1c2gocGxheWVyKTtcbiAgICB0aGlzLnBsYXllci5wdXNoKHBsYXllcik7XG4gICAgdGhpcy52aWV3cG9ydC5mb2xsb3cocGxheWVyKTtcbiAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgzKTtcbiAgICBcbn1cbi8qKlxuICogSW5pdGlhbGl6ZSB0aGUgTlBDcyBcbiAqL1xucHJvdGVjdGVkIGluaXRpYWxpemVOUENzKCk6IHZvaWQge1xuXG4gICBcbiAgICAvLyBHZXQgdGhlIG9iamVjdCBkYXRhIGZvciB0aGUgYmx1ZSBlbmVtaWVzXG4gICAgbGV0IGJsdWUgPSB0aGlzLmxvYWQuZ2V0T2JqZWN0KFwiYmx1ZVwiKTtcblxuICAgIC8vIEluaXRpYWxpemUgdGhlIGJsdWUgZW5lbWllc1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmx1ZS5lbmVtaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBucGMgPSB0aGlzLmFkZC5hbmltYXRlZFNwcml0ZShOUENBY3RvciwgXCJCbHVlRW5lbXlcIiwgXCJwcmltYXJ5XCIpO1xuICAgICAgICBucGMucG9zaXRpb24uc2V0KGJsdWUuZW5lbWllc1tpXVswXSwgYmx1ZS5lbmVtaWVzW2ldWzFdKTtcbiAgICAgICAgbnBjLmFkZFBoeXNpY3MobmV3IEFBQkIoVmVjMi5aRVJPLCBuZXcgVmVjMig4LCA4KSksIG51bGwsIGZhbHNlKTtcblxuICAgICAgICAvLyBHaXZlIHRoZSBOUENTIHRoZWlyIGhlYWx0aGJhcnNcbiAgICAgICAgbGV0IGhlYWx0aGJhciA9IG5ldyBIZWFsdGhiYXJIVUQodGhpcywgbnBjLCBcInByaW1hcnlcIiwge3NpemU6IG5wYy5zaXplLmNsb25lKCkuc2NhbGVkKDEvMiwgMS80KSwgb2Zmc2V0OiBucGMuc2l6ZS5jbG9uZSgpLnNjYWxlZCgwLCAtMS8zKX0pO1xuICAgICAgICB0aGlzLmhlYWx0aGJhcnMuc2V0KG5wYy5pZCwgaGVhbHRoYmFyKTtcblxuICAgICAgICBucGMuYmF0dGxlR3JvdXAgPSAxXG4gICAgICAgIG5wYy5zcGVlZCA9IDEwO1xuICAgICAgICBucGMuaGVhbHRoID0gMztcbiAgICAgICAgbnBjLm1heEhlYWx0aCA9IDM7XG4gICAgICAgIG5wYy5uYXZrZXkgPSBcIm5hdm1lc2hcIjtcbiAgICAgICAgbnBjLnNjYWxlID0gbmV3IFZlYzIoMC40LDAuNCk7XG5cbiAgICAgICAgLy8gR2l2ZSB0aGUgTlBDcyB0aGVpciBBSVxuICAgICAgICBucGMuYWRkQUkoR3VhcmRCZWhhdmlvciwge3RhcmdldDogdGhpcy5iYXR0bGVyc1swXSwgcmFuZ2U6IDB9KTtcblxuICAgICAgICAvLyBQbGF5IHRoZSBOUENzIFwiSURMRVwiIGFuaW1hdGlvbiBcbiAgICAgICAgbnBjLmFuaW1hdGlvbi5wbGF5KFwiSURMRVwiKTtcblxuICAgICAgICB0aGlzLmJhdHRsZXJzLnB1c2gobnBjKTtcbiAgICAgICAgdGhpcy5lbmVtaWVzLnB1c2gobnBjKTtcbiAgICB9XG5cbiAgICBsZXQgbnBjID0gdGhpcy5hZGQuYW5pbWF0ZWRTcHJpdGUoTlBDQWN0b3IsIFwiQmx1ZUVuZW15XCIsIFwicHJpbWFyeVwiKTtcbiAgICAgICAgdGhpcy5ib3NzID0gbnBjO1xuICAgICAgICBucGMucG9zaXRpb24uc2V0KDEyMDAsMTAwKTtcbiAgICAgICAgdGhpcy5ib3NzTG9jYXRpb24gPSBuZXcgVmVjMigxMjAwLCAxMDApO1xuICAgICAgICBucGMuYWRkUGh5c2ljcyhuZXcgQUFCQihWZWMyLlpFUk8sIG5ldyBWZWMyKDMyLCAzMikpLCBudWxsLCBmYWxzZSk7XG5cbiAgICAgICAgLy8gR2l2ZSB0aGUgTlBDUyB0aGVpciBoZWFsdGhiYXJzXG4gICAgICAgIGxldCBoZWFsdGhiYXIgPSBuZXcgSGVhbHRoYmFySFVEKHRoaXMsIG5wYywgXCJwcmltYXJ5XCIsIHtzaXplOiBucGMuc2l6ZS5jbG9uZSgpLnNjYWxlZCgyLCAxLzQpLCBvZmZzZXQ6IG5wYy5zaXplLmNsb25lKCkuc2NhbGVkKDAsIC0xLzMpfSk7XG4gICAgICAgIHRoaXMuaGVhbHRoYmFycy5zZXQobnBjLmlkLCBoZWFsdGhiYXIpO1xuXG4gICAgICAgIG5wYy5iYXR0bGVHcm91cCA9IDFcbiAgICAgICAgbnBjLnNwZWVkID0gMTA7XG4gICAgICAgIG5wYy5oZWFsdGggPSAyMDtcbiAgICAgICAgbnBjLm1heEhlYWx0aCA9IDIwO1xuICAgICAgICBucGMubmF2a2V5ID0gXCJuYXZtZXNoXCI7XG4gICAgICAgIG5wYy5zY2FsZSA9IG5ldyBWZWMyKDEsMSk7XG5cblxuICAgICAgICAvLyBHaXZlIHRoZSBOUENzIHRoZWlyIEFJXG4gICAgICAgIG5wYy5hZGRBSShHdWFyZEJlaGF2aW9yLCB7dGFyZ2V0OiB0aGlzLmJhdHRsZXJzWzBdLCByYW5nZTogMH0pO1xuXG4gICAgICAgIC8vIFBsYXkgdGhlIE5QQ3MgXCJJRExFXCIgYW5pbWF0aW9uIFxuICAgICAgICBucGMuYW5pbWF0aW9uLnBsYXkoXCJJRExFXCIpO1xuXG4gICAgICAgIHRoaXMuYmF0dGxlcnMucHVzaChucGMpO1xuICAgICAgICB0aGlzLmVuZW1pZXMucHVzaChucGMpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSB0aGUgYmx1ZSBoZWFsZXJzXG4gICAgXG5cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplIHRoZSBpdGVtcyBpbiB0aGUgc2NlbmUgKGhlYWx0aHBhY2tzIGFuZCBsYXNlciBndW5zKVxuICovXG5wcm90ZWN0ZWQgaW5pdGlhbGl6ZUl0ZW1zKCk6IHZvaWQge1xuICAgIGxldCBsYXNlcmd1bnMgPSB0aGlzLmxvYWQuZ2V0T2JqZWN0KFwibGFzZXJndW5zXCIpO1xuICAgIHRoaXMubGFzZXJndW5zID0gbmV3IEFycmF5PExhc2VyR3VuPihsYXNlcmd1bnMuaXRlbXMubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxhc2VyZ3Vucy5pdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgc3ByaXRlID0gdGhpcy5hZGQuc3ByaXRlKFwibGFzZXJHdW5cIiwgXCJwcmltYXJ5XCIpO1xuICAgICAgICBsZXQgbGluZSA9IDxMaW5lPnRoaXMuYWRkLmdyYXBoaWMoR3JhcGhpY1R5cGUuTElORSwgXCJwcmltYXJ5XCIsIHtzdGFydDogVmVjMi5aRVJPLCBlbmQ6IFZlYzIuWkVST30pO1xuICAgICAgICB0aGlzLmxhc2VyZ3Vuc1tpXSA9IExhc2VyR3VuLmNyZWF0ZShzcHJpdGUsIGxpbmUpO1xuICAgICAgICB0aGlzLmxhc2VyZ3Vuc1tpXS5wb3NpdGlvbi5zZXQobGFzZXJndW5zLml0ZW1zW2ldWzBdLCBsYXNlcmd1bnMuaXRlbXNbaV1bMV0pO1xuICAgIH1cblxuICAgIGxldCBoZWFsdGhwYWNrcyA9IHRoaXMubG9hZC5nZXRPYmplY3QoXCJoZWFsdGhwYWNrc1wiKTtcbiAgICB0aGlzLmhlYWx0aHBhY2tzID0gbmV3IEFycmF5PEhlYWx0aHBhY2s+KGhlYWx0aHBhY2tzLml0ZW1zLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoZWFsdGhwYWNrcy5pdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgc3ByaXRlID0gdGhpcy5hZGQuc3ByaXRlKFwiaGVhbHRocGFja1wiLCBcInByaW1hcnlcIik7XG4gICAgICAgIHRoaXMuaGVhbHRocGFja3NbaV0gPSBuZXcgSGVhbHRocGFjayhzcHJpdGUpO1xuICAgICAgICB0aGlzLmhlYWx0aHBhY2tzW2ldLnBvc2l0aW9uLnNldChoZWFsdGhwYWNrcy5pdGVtc1tpXVswXSwgaGVhbHRocGFja3MuaXRlbXNbaV1bMV0pO1xuICAgIH1cbn1cbi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIG5hdm1lc2ggZ3JhcGggdXNlZCBieSB0aGUgTlBDcyBpbiB0aGUgSFczU2NlbmUuIFRoaXMgbWV0aG9kIGlzIGEgbGl0dGxlIGJ1Z2d5LCBhbmRcbiAqIGFuZCBpdCBza2lwcyBvdmVyIHNvbWUgb2YgdGhlIHBvc2l0aW9ucyBvbiB0aGUgdGlsZW1hcC4gSWYgeW91IGNhbiBmaXggbXkgbmF2bWVzaCBnZW5lcmF0aW9uIGFsZ29yaXRobSxcbiAqIGdvIGZvciBpdC5cbiAqIFxuICogLSBQZXRlclxuICovXG5wcm90ZWN0ZWQgaW5pdGlhbGl6ZU5hdm1lc2goKTogdm9pZCB7XG4gICAgLy8gQ3JlYXRlIHRoZSBncmFwaFxuICAgIHRoaXMuZ3JhcGggPSBuZXcgUG9zaXRpb25HcmFwaCgpO1xuXG4gICAgbGV0IGRpbTogVmVjMiA9IHRoaXMud2FsbHMuZ2V0RGltZW5zaW9ucygpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGltLnk7IGkrKykge1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGRpbS54OyBqKyspIHtcbiAgICAgICAgICAgIGxldCB0aWxlOiBBQUJCID0gdGhpcy53YWxscy5nZXRUaWxlQ29sbGlkZXIoaiwgaSk7XG4gICAgICAgICAgICB0aGlzLmdyYXBoLmFkZFBvc2l0aW9uZWROb2RlKHRpbGUuY2VudGVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxldCByYzogVmVjMjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZ3JhcGgubnVtVmVydGljZXM7IGkrKykge1xuICAgICAgICByYyA9IHRoaXMud2FsbHMuZ2V0VGlsZUNvbFJvdyhpKTtcbiAgICAgICAgaWYgKCF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUocmMueCwgcmMueSkgJiZcbiAgICAgICAgICAgICF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUoTWF0aFV0aWxzLmNsYW1wKHJjLnggLSAxLCAwLCBkaW0ueCAtIDEpLCByYy55KSAmJlxuICAgICAgICAgICAgIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShNYXRoVXRpbHMuY2xhbXAocmMueCArIDEsIDAsIGRpbS54IC0gMSksIHJjLnkpICYmXG4gICAgICAgICAgICAhdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKHJjLngsIE1hdGhVdGlscy5jbGFtcChyYy55IC0gMSwgMCwgZGltLnkgLSAxKSkgJiZcbiAgICAgICAgICAgICF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUocmMueCwgTWF0aFV0aWxzLmNsYW1wKHJjLnkgKyAxLCAwLCBkaW0ueSAtIDEpKSAmJlxuICAgICAgICAgICAgIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShNYXRoVXRpbHMuY2xhbXAocmMueCArIDEsIDAsIGRpbS54IC0gMSksIE1hdGhVdGlscy5jbGFtcChyYy55ICsgMSwgMCwgZGltLnkgLSAxKSkgJiZcbiAgICAgICAgICAgICF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUoTWF0aFV0aWxzLmNsYW1wKHJjLnggLSAxLCAwLCBkaW0ueCAtIDEpLCBNYXRoVXRpbHMuY2xhbXAocmMueSArIDEsIDAsIGRpbS55IC0gMSkpICYmXG4gICAgICAgICAgICAhdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKE1hdGhVdGlscy5jbGFtcChyYy54ICsgMSwgMCwgZGltLnggLSAxKSwgTWF0aFV0aWxzLmNsYW1wKHJjLnkgLSAxLCAwLCBkaW0ueSAtIDEpKSAmJlxuICAgICAgICAgICAgIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShNYXRoVXRpbHMuY2xhbXAocmMueCAtIDEsIDAsIGRpbS54IC0gMSksIE1hdGhVdGlscy5jbGFtcChyYy55IC0gMSwgMCwgZGltLnkgLSAxKSlcblxuICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBlZGdlIHRvIHRoZSBsZWZ0XG4gICAgICAgICAgICByYyA9IHRoaXMud2FsbHMuZ2V0VGlsZUNvbFJvdyhpICsgMSk7XG4gICAgICAgICAgICBpZiAoKGkgKyAxKSAlIGRpbS54ICE9PSAwICYmICF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUocmMueCwgcmMueSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdyYXBoLmFkZEVkZ2UoaSwgaSArIDEpO1xuICAgICAgICAgICAgICAgIC8vIHRoaXMuYWRkLmdyYXBoaWMoR3JhcGhpY1R5cGUuTElORSwgXCJncmFwaFwiLCB7c3RhcnQ6IHRoaXMuZ3JhcGguZ2V0Tm9kZVBvc2l0aW9uKGkpLCBlbmQ6IHRoaXMuZ3JhcGguZ2V0Tm9kZVBvc2l0aW9uKGkgKyAxKX0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDcmVhdGUgZWRnZSBiZWxvd1xuICAgICAgICAgICAgcmMgPSB0aGlzLndhbGxzLmdldFRpbGVDb2xSb3coaSArIGRpbS54KTtcbiAgICAgICAgICAgIGlmIChpICsgZGltLnggPCB0aGlzLmdyYXBoLm51bVZlcnRpY2VzICYmICF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUocmMueCwgcmMueSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdyYXBoLmFkZEVkZ2UoaSwgaSArIGRpbS54KTtcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmFkZC5ncmFwaGljKEdyYXBoaWNUeXBlLkxJTkUsIFwiZ3JhcGhcIiwge3N0YXJ0OiB0aGlzLmdyYXBoLmdldE5vZGVQb3NpdGlvbihpKSwgZW5kOiB0aGlzLmdyYXBoLmdldE5vZGVQb3NpdGlvbihpICsgZGltLngpfSlcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZXQgdGhpcyBncmFwaCBhcyBhIG5hdmlnYWJsZSBlbnRpdHlcbiAgICBsZXQgbmF2bWVzaCA9IG5ldyBOYXZtZXNoKHRoaXMuZ3JhcGgpO1xuICAgIC8vIEFkZCBkaWZmZXJlbnQgc3RyYXRlZ2llcyB0byB1c2UgZm9yIHRoaXMgbmF2bWVzaFxuICAgIG5hdm1lc2gucmVnaXN0ZXJTdHJhdGVneShcImRpcmVjdFwiLCBuZXcgRGlyZWN0U3RyYXRlZ3kobmF2bWVzaCkpO1xuICAgIG5hdm1lc2gucmVnaXN0ZXJTdHJhdGVneShcImFzdGFyXCIsIG5ldyBBc3RhclN0cmF0ZWd5KG5hdm1lc2gpKTtcbiAgICAvLyBTZWxlY3QgQSogYXMgb3VyIG5hdmlnYXRpb24gc3RyYXRlZ3lcbiAgICBuYXZtZXNoLnNldFN0cmF0ZWd5KFwiYXN0YXJcIik7XG5cbiAgICAvLyBBZGQgdGhpcyBuYXZtZXNoIHRvIHRoZSBuYXZpZ2F0aW9uIG1hbmFnZXJcbiAgICB0aGlzLm5hdk1hbmFnZXIuYWRkTmF2aWdhYmxlRW50aXR5KFwibmF2bWVzaFwiLCBuYXZtZXNoKTtcbn1cblxucHVibGljIHVubG9hZFNjZW5lKCk6IHZvaWQge1xuICAgIC8vIFRoZSBzY2VuZSBpcyBiZWluZyBkZXN0cm95ZWQsIHNvIHdlIGNhbiBzdG9wIHBsYXlpbmcgdGhlIHNvbmdcbiAgICB0aGlzLmVtaXR0ZXIuZmlyZUV2ZW50KEdhbWVFdmVudFR5cGUuU1RPUF9TT1VORCwge2tleTogdGhpcy5sZXZlbE11c2ljS2V5fSk7XG59XG5cblxuICAgIHB1YmxpYyBnZXRCYXR0bGVycygpOiBCYXR0bGVyW10geyByZXR1cm4gdGhpcy5iYXR0bGVyczsgfVxuXG4gICAgcHVibGljIGdldFdhbGxzKCk6IE9ydGhvZ29uYWxUaWxlbWFwIHsgcmV0dXJuIHRoaXMud2FsbHM7IH1cblxuICAgIHB1YmxpYyBnZXRIZWFsdGhwYWNrcygpOiBIZWFsdGhwYWNrW10geyByZXR1cm4gdGhpcy5oZWFsdGhwYWNrczsgfVxuXG4gICAgcHVibGljIGdldExhc2VyR3VucygpOiBMYXNlckd1bltdIHsgcmV0dXJuIHRoaXMubGFzZXJndW5zOyB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGdpdmVuIHRhcmdldCBwb3NpdGlvbiBpcyB2aXNpYmxlIGZyb20gdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSBwb3NpdGlvbiBcbiAgICAgKiBAcGFyYW0gdGFyZ2V0IFxuICAgICAqIEByZXR1cm5zIFxuICAgICAqL1xuICAgIHB1YmxpYyBpc1RhcmdldFZpc2libGUocG9zaXRpb246IFZlYzIsIHRhcmdldDogVmVjMik6IGJvb2xlYW4ge1xuXG4gICAgICAgIC8vIEdldCB0aGUgbmV3IHBsYXllciBsb2NhdGlvblxuICAgICAgICBsZXQgc3RhcnQgPSBwb3NpdGlvbi5jbG9uZSgpO1xuICAgICAgICBsZXQgZGVsdGEgPSB0YXJnZXQuY2xvbmUoKS5zdWIoc3RhcnQpO1xuXG4gICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCB0aGUgdGlsZW1hcCByZWdpb24gdW50aWwgd2UgZmluZCBhIGNvbGxpc2lvblxuICAgICAgICBsZXQgbWluWCA9IE1hdGgubWluKHN0YXJ0LngsIHRhcmdldC54KTtcbiAgICAgICAgbGV0IG1heFggPSBNYXRoLm1heChzdGFydC54LCB0YXJnZXQueCk7XG4gICAgICAgIGxldCBtaW5ZID0gTWF0aC5taW4oc3RhcnQueSwgdGFyZ2V0LnkpO1xuICAgICAgICBsZXQgbWF4WSA9IE1hdGgubWF4KHN0YXJ0LnksIHRhcmdldC55KTtcblxuICAgICAgICAvLyBHZXQgdGhlIHdhbGwgdGlsZW1hcFxuICAgICAgICBsZXQgd2FsbHMgPSB0aGlzLmdldFdhbGxzKCk7XG5cbiAgICAgICAgbGV0IG1pbkluZGV4ID0gd2FsbHMuZ2V0VGlsZW1hcFBvc2l0aW9uKG1pblgsIG1pblkpO1xuICAgICAgICBsZXQgbWF4SW5kZXggPSB3YWxscy5nZXRUaWxlbWFwUG9zaXRpb24obWF4WCwgbWF4WSk7XG5cbiAgICAgICAgbGV0IHRpbGVTaXplID0gd2FsbHMuZ2V0U2NhbGVkVGlsZVNpemUoKTtcblxuICAgICAgICBmb3IgKGxldCBjb2wgPSBtaW5JbmRleC54OyBjb2wgPD0gbWF4SW5kZXgueDsgY29sKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IHJvdyA9IG1pbkluZGV4Lnk7IHJvdyA8PSBtYXhJbmRleC55OyByb3crKykge1xuICAgICAgICAgICAgICAgIGlmICh3YWxscy5pc1RpbGVDb2xsaWRhYmxlKGNvbCwgcm93KSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIHBvc2l0aW9uIG9mIHRoaXMgdGlsZVxuICAgICAgICAgICAgICAgICAgICBsZXQgdGlsZVBvcyA9IG5ldyBWZWMyKGNvbCAqIHRpbGVTaXplLnggKyB0aWxlU2l6ZS54IC8gMiwgcm93ICogdGlsZVNpemUueSArIHRpbGVTaXplLnkgLyAyKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBjb2xsaWRlciBmb3IgdGhpcyB0aWxlXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb2xsaWRlciA9IG5ldyBBQUJCKHRpbGVQb3MsIHRpbGVTaXplLnNjYWxlZCgxLzQpKTtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgaGl0ID0gY29sbGlkZXIuaW50ZXJzZWN0U2VnbWVudChzdGFydCwgZGVsdGEsIFZlYzIuWkVSTyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGhpdCAhPT0gbnVsbCAmJiBzdGFydC5kaXN0YW5jZVNxVG8oaGl0LnBvcykgPCBzdGFydC5kaXN0YW5jZVNxVG8odGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgaGl0IGEgd2FsbCwgd2UgY2FuJ3Qgc2VlIHRoZSBwbGF5ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgIH1cblxuICAgIFxufSIsImltcG9ydCBQb3NpdGlvbkdyYXBoIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvR3JhcGhzL1Bvc2l0aW9uR3JhcGhcIjtcbmltcG9ydCBBY3RvciBmcm9tIFwiLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL0ludGVyZmFjZXMvQWN0b3JcIjtcbmltcG9ydCBBQUJCIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvU2hhcGVzL0FBQkJcIjtcbmltcG9ydCBTaGFwZSBmcm9tIFwiLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL1NoYXBlcy9TaGFwZVwiO1xuaW1wb3J0IFZlYzIgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgR2FtZUV2ZW50IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9FdmVudHMvR2FtZUV2ZW50XCI7XG5pbXBvcnQgSW5wdXQgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL0lucHV0L0lucHV0XCI7XG5pbXBvcnQgR2FtZU5vZGUgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL05vZGVzL0dhbWVOb2RlXCI7XG5pbXBvcnQgeyBHcmFwaGljVHlwZSB9IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9HcmFwaGljcy9HcmFwaGljVHlwZXNcIjtcbmltcG9ydCBMaW5lIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9HcmFwaGljcy9MaW5lXCI7XG5pbXBvcnQgU3ByaXRlIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9TcHJpdGVzL1Nwcml0ZVwiO1xuaW1wb3J0IE9ydGhvZ29uYWxUaWxlbWFwIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9UaWxlbWFwcy9PcnRob2dvbmFsVGlsZW1hcFwiO1xuaW1wb3J0IFVJRWxlbWVudCBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvVUlFbGVtZW50XCI7XG5pbXBvcnQgQnV0dG9uIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9VSUVsZW1lbnRzL0J1dHRvblwiO1xuaW1wb3J0IHsgVUlFbGVtZW50VHlwZSB9IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9VSUVsZW1lbnRzL1VJRWxlbWVudFR5cGVzXCI7XG5pbXBvcnQgTmF2bWVzaCBmcm9tIFwiLi4vLi4vV29sZmllMkQvUGF0aGZpbmRpbmcvTmF2bWVzaFwiO1xuaW1wb3J0IERpcmVjdFN0cmF0ZWd5IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9QYXRoZmluZGluZy9TdHJhdGVnaWVzL0RpcmVjdFN0cmF0ZWd5XCI7XG5pbXBvcnQgUmVuZGVyaW5nTWFuYWdlciBmcm9tIFwiLi4vLi4vV29sZmllMkQvUmVuZGVyaW5nL1JlbmRlcmluZ01hbmFnZXJcIjtcbmltcG9ydCBTY2VuZU1hbmFnZXIgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1NjZW5lL1NjZW5lTWFuYWdlclwiO1xuaW1wb3J0IFZpZXdwb3J0IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9TY2VuZUdyYXBoL1ZpZXdwb3J0XCI7XG5pbXBvcnQgVGltZXIgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1RpbWluZy9UaW1lclwiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9VdGlscy9Db2xvclwiO1xuaW1wb3J0IE1hdGhVdGlscyBmcm9tIFwiLi4vLi4vV29sZmllMkQvVXRpbHMvTWF0aFV0aWxzXCI7XG5pbXBvcnQgTlBDQWN0b3IgZnJvbSBcIi4uL0FjdG9ycy9OUENBY3RvclwiO1xuaW1wb3J0IFBsYXllckFjdG9yIGZyb20gXCIuLi9BY3RvcnMvUGxheWVyQWN0b3JcIjtcbmltcG9ydCBHdWFyZEJlaGF2aW9yIGZyb20gXCIuLi9BSS9OUEMvTlBDQmVoYXZpb3IvR2F1cmRCZWhhdmlvclwiO1xuaW1wb3J0IEhlYWxlckJlaGF2aW9yIGZyb20gXCIuLi9BSS9OUEMvTlBDQmVoYXZpb3IvSGVhbGVyQmVoYXZpb3JcIjtcbmltcG9ydCBQbGF5ZXJBSSBmcm9tIFwiLi4vQUkvUGxheWVyL1BsYXllckFJXCI7XG5pbXBvcnQgUGxheWVyQ29udHJvbGxlciwgeyBQbGF5ZXJJbnB1dCB9IGZyb20gXCIuLi9BSS9QbGF5ZXIvUGxheWVyQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgSXRlbUV2ZW50LCBQbGF5ZXJFdmVudCwgQmF0dGxlckV2ZW50LCBIdWRFdmVudCB9IGZyb20gXCIuLi9FdmVudHNcIjtcbmltcG9ydCBCYXR0bGVyIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9CYXR0bGVTeXN0ZW0vQmF0dGxlclwiO1xuaW1wb3J0IEJhdHRsZXJCYXNlIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9CYXR0bGVTeXN0ZW0vQmF0dGxlckJhc2VcIjtcbmltcG9ydCBIZWFsdGhiYXJIVUQgZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL0hVRC9IZWFsdGhiYXJIVURcIjtcbmltcG9ydCBJbnZlbnRvcnlIVUQgZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL0hVRC9JbnZlbnRvcnlIVURcIjtcbmltcG9ydCBQYXVzZUhVRCBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvSFVEL1BhdXNlSFVEXCI7XG5pbXBvcnQgSW52ZW50b3J5IGZyb20gXCIuLi9HYW1lU3lzdGVtcy9JdGVtU3lzdGVtL0ludmVudG9yeVwiO1xuaW1wb3J0IEl0ZW0gZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL0l0ZW1TeXN0ZW0vSXRlbVwiO1xuaW1wb3J0IEhlYWx0aHBhY2sgZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL0l0ZW1TeXN0ZW0vSXRlbXMvSGVhbHRocGFja1wiO1xuaW1wb3J0IExhc2VyR3VuIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9JdGVtU3lzdGVtL0l0ZW1zL0xhc2VyR3VuXCI7XG5pbXBvcnQgeyBDbG9zZXN0UG9zaXRpb25lZCB9IGZyb20gXCIuLi9HYW1lU3lzdGVtcy9TZWFyY2hpbmcvSFc0UmVkdWNlcnNcIjtcbmltcG9ydCBCYXNpY1RhcmdldGFibGUgZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL1RhcmdldGluZy9CYXNpY1RhcmdldGFibGVcIjtcbmltcG9ydCBQb3NpdGlvbiBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvVGFyZ2V0aW5nL1Bvc2l0aW9uXCI7XG5pbXBvcnQgQXN0YXJTdHJhdGVneSBmcm9tIFwiLi4vUGF0aGZpbmRpbmcvQXN0YXJTdHJhdGVneVwiO1xuaW1wb3J0IEdhbWVPdmVyIGZyb20gXCIuL0dhbWVPdmVyXCI7XG4vLyBpbXBvcnQgSFc0U2NlbmUgZnJvbSBcIi4vSFc0U2NlbmVcIjtcbi8vIGltcG9ydCBNYWluTWVudSBmcm9tIFwiLi9NYWluTWVudVwiO1xuLy8gaW1wb3J0IExldmVsU2VsZWN0aW9uU2NlbmUgZnJvbSBcIi4vTGV2ZWxTZWxlY3Rpb25TY2VuZVwiO1xuLy8gaW1wb3J0IHsgR2FtZUV2ZW50VHlwZSB9IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9FdmVudHMvR2FtZUV2ZW50VHlwZVwiO1xuLy8gaW1wb3J0IHRlc3RIVzRTY2VuZSBmcm9tIFwiLi9GaW5hbFByb2plY3RTY2VuZVwiO1xuaW1wb3J0IEZpbmFsUHJvamVjdFNjZW5lIGZyb20gXCIuL0ZpbmFsUHJvamVjdFNjZW5lXCI7XG4vLyBpbXBvcnQgdGVzdE1haW5TY2VuZSBmcm9tIFwiLi90ZXN0bWFpblwiO1xuaW1wb3J0IEhXNFNjZW5lIGZyb20gXCIuL0hXNFNjZW5lXCI7XG5pbXBvcnQgTGV2ZWxTZWxlY3Rpb25TY2VuZSBmcm9tIFwiLi9MZXZlbFNlbGVjdGlvblNjZW5lXCI7XG5pbXBvcnQgTWFpbk1lbnUgZnJvbSBcIi4vTWFpbk1lbnVcIjtcbmltcG9ydCBMYXN0U2NlbmUgZnJvbSBcIi4vTGFzdFNjZW5lXCI7XG5pbXBvcnQgTGV2ZWwxU2NlbmUgZnJvbSBcIi4vTGV2ZWwxU2NlbmVcIjtcbmltcG9ydCBMZXZlbDJTY2VuZSBmcm9tIFwiLi9MZXZlbDJTY2VuZVwiO1xuaW1wb3J0IExldmVsM1NjZW5lIGZyb20gXCIuL0xldmVsM1NjZW5lXCI7XG5pbXBvcnQgTGV2ZWw1U2NlbmUgZnJvbSBcIi4vTGV2ZWw1U2NlbmVcIjtcbmltcG9ydCB0ZXN0TWVudSBmcm9tIFwiLi9NYWluTWVudVwiO1xuaW1wb3J0IHsgR2FtZUV2ZW50VHlwZSB9IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9FdmVudHMvR2FtZUV2ZW50VHlwZVwiO1xuXG5cbmNvbnN0IEJhdHRsZXJHcm91cHMgPSB7XG4gICAgUkVEOiAxLFxuICAgIEJMVUU6IDJcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCBjb25zdCBMZXZlbDRTY2VuZUxheWVycyA9IHtcblx0UFJJTUFSWTogXCJQUklNQVJZXCIsXG5cdEJBQ0tHUk9VTkQ6IFwiQkFDS0dST1VORFwiLCBcblx0VUk6IFwiVUlcIixcbiAgICBQQVVTRTogXCJQQVVTRVwiLFxuICAgIENPTlRST0xTOiBcIkNPTlRST0xTXCIsXG4gICAgSEVMUDogXCJIRUxQXCIsXG4gICAgQ09NUExFVEU6IFwiQ09NUExFVEVcIlxufSBhcyBjb25zdDtcblxuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExldmVsNFNjZW5lIGV4dGVuZHMgSFc0U2NlbmUge1xuXG4gICAgLyoqIEdhbWVTeXN0ZW1zIGluIHRoZSBIVzMgU2NlbmUgKi9cbiAgICAvLyBwcml2YXRlIGludmVudG9yeUh1ZDogSW52ZW50b3J5SFVEO1xuXG4gICAgLyoqIEFsbCB0aGUgYmF0dGxlcnMgaW4gdGhlIEhXM1NjZW5lIChpbmNsdWRpbmcgdGhlIHBsYXllcikgKi9cbiAgICBwcm90ZWN0ZWQgYmF0dGxlcnM6IChCYXR0bGVyICYgQWN0b3IpW107XG4gICAgLyoqIEhlYWx0aGJhcnMgZm9yIHRoZSBiYXR0bGVycyAqL1xuICAgIHByb3RlY3RlZCBoZWFsdGhiYXJzOiBNYXA8bnVtYmVyLCBIZWFsdGhiYXJIVUQ+O1xuXG4gICAgcHJvdGVjdGVkIHBsYXllcjogKFBsYXllckFjdG9yKVtdO1xuICAgIHByb3RlY3RlZCBlbmVtaWVzOiAoTlBDQWN0b3IpW107XG5cbiAgICBwcm90ZWN0ZWQgYm9zczogTlBDQWN0b3I7XG4gICAgXG4gICAgLy8gcHJvdGVjdGVkIHNob290QXVkaW9LZXk6IHN0cmluZztcbiAgICAvLyBwcm90ZWN0ZWQgaGl0QXVkaW9LZXk6IHN0cmluZztcblxuICAgIC8vcHJpdmF0ZSB6b29tQm9vbCA9IGZhbHNlO1xuXG4gICAgLy8gcHJvdGVjdGVkIHNob290QXVkaW9LZXk6IHN0cmluZztcblxuICAgIHByb3RlY3RlZCBsZXZlbE11c2ljS2V5OiBzdHJpbmc7XG5cbiAgICBwcm90ZWN0ZWQgYmFzZXM6IEJhdHRsZXJCYXNlW107XG5cbiAgICBwcm90ZWN0ZWQgaGVhbHRocGFja3M6IEFycmF5PEhlYWx0aHBhY2s+O1xuICAgIHByb3RlY3RlZCBsYXNlcmd1bnM6IEFycmF5PExhc2VyR3VuPjtcblxuICAgIC8vIFRoZSB3YWxsIGxheWVyIG9mIHRoZSB0aWxlbWFwXG4gICAgcHJvdGVjdGVkIHdhbGxzOiBPcnRob2dvbmFsVGlsZW1hcDtcblxuICAgIC8vIFRoZSBwb3NpdGlvbiBncmFwaCBmb3IgdGhlIG5hdm1lc2hcbiAgICBwcm90ZWN0ZWQgZ3JhcGg6IFBvc2l0aW9uR3JhcGg7XG5cbiAgICBwcm90ZWN0ZWQgcGF1c2VJbWFnZTogU3ByaXRlO1xuICAgIHByb3RlY3RlZCBoZWxwSW1hZ2U6IFNwcml0ZTtcbiAgICBwcm90ZWN0ZWQgY29udHJvbHNJbWFnZTogU3ByaXRlO1xuICAgIHByb3RlY3RlZCBjb21wbGV0ZUltYWdlOiBTcHJpdGU7XG5cbiAgICBwcm90ZWN0ZWQgYm9zc0xvY2F0aW9uOiBWZWMyO1xuXG4gICAgcHVibGljIHN0YXRpYyBQQVVTRV9LRVkgPSBcIlBBVVNFXCI7XG4gICAgcHVibGljIHN0YXRpYyBQQVVTRV9QQVRIID0gXCJodzRfYXNzZXRzL3Nwcml0ZXMvUGF1c2VkLVNjcmVlbi5wbmdcIjtcblxuICAgIHB1YmxpYyBzdGF0aWMgSEVMUF9LRVkgPSBcIkhFTFBcIjtcbiAgICBwdWJsaWMgc3RhdGljIEhFTFBfUEFUSCA9IFwiaHc0X2Fzc2V0cy9zcHJpdGVzL0hlbHAtU2NyZWVuLnBuZ1wiO1xuXG5cbiAgICBwdWJsaWMgc3RhdGljIENPTlRST0xTX0tFWSA9IFwiQ09OVFJPTFNcIlxuICAgIHB1YmxpYyBzdGF0aWMgQ09OVFJPTFNfUEFUSCA9IFwiaHc0X2Fzc2V0cy9zcHJpdGVzL0NvbnRyb2xzLVNjcmVlbi5wbmdcIlxuXG4gICAgcHVibGljIHN0YXRpYyBDT01QTEVURV9LRVkgPSBcIkNPTVBMRVRFXCJcbiAgICBwdWJsaWMgc3RhdGljIENPTVBMRVRFX1BBVEggPSBcImh3NF9hc3NldHMvc3ByaXRlcy9MZXZlbC1Db21wbGV0ZS5wbmdcIlxuXG4gICBcbiAgICBwdWJsaWMgc3RhdGljIFNIT09UX0FVRElPX0tFWSA9IFwiUExBWUVSX1NIT09UXCJcbiAgICBwdWJsaWMgc3RhdGljIFNIT09UX0FVRElPX1BBVEggPSBcImh3NF9hc3NldHMvc291bmRzL2xhc2VyU2hvb3Qud2F2XCJcblxuICAgIHB1YmxpYyBzdGF0aWMgSElUX0FVRElPX0tFWSA9IFwiUExBWUVSX0hJVFwiXG4gICAgcHVibGljIHN0YXRpYyBISVRfQVVESU9fUEFUSCA9IFwiaHc0X2Fzc2V0cy9zb3VuZHMvaGl0LndhdlwiXG5cbiAgICBwdWJsaWMgc3RhdGljIERZSU5HX0FVRElPX0tFWSA9IFwiUExBWUVSX0RZSU5HXCJcbiAgICBwdWJsaWMgc3RhdGljIERZSU5HX0FVRElPX1BBVEggPSBcImh3NF9hc3NldHMvc291bmRzL2R5aW5nLndhdlwiXG5cbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IExFVkVMX01VU0lDX0tFWSA9IFwiTEVWRUxfTVVTSUNcIjtcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IExFVkVMX01VU0lDX1BBVEggPSBcImh3NF9hc3NldHMvbXVzaWMvTWFpbkdhbWVNdXNpYy53YXZcIjtcblxuXG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3Iodmlld3BvcnQ6IFZpZXdwb3J0LCBzY2VuZU1hbmFnZXI6IFNjZW5lTWFuYWdlciwgcmVuZGVyaW5nTWFuYWdlcjogUmVuZGVyaW5nTWFuYWdlciwgb3B0aW9uczogUmVjb3JkPHN0cmluZywgYW55Pikge1xuICAgICAgICBzdXBlcih2aWV3cG9ydCwgc2NlbmVNYW5hZ2VyLCByZW5kZXJpbmdNYW5hZ2VyLCBvcHRpb25zKTtcblxuICAgICAgICB0aGlzLmJhdHRsZXJzID0gbmV3IEFycmF5PEJhdHRsZXIgJiBBY3Rvcj4oKTtcbiAgICAgICAgdGhpcy5oZWFsdGhiYXJzID0gbmV3IE1hcDxudW1iZXIsIEhlYWx0aGJhckhVRD4oKTtcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBuZXcgQXJyYXk8UGxheWVyQWN0b3I+KCk7XG4gICAgICAgIHRoaXMuZW5lbWllcyA9IG5ldyBBcnJheTxOUENBY3Rvcj4oKTtcbiAgIFxuXG4gICAgICAgIHRoaXMubGFzZXJndW5zID0gbmV3IEFycmF5PExhc2VyR3VuPigpO1xuICAgICAgICB0aGlzLmhlYWx0aHBhY2tzID0gbmV3IEFycmF5PEhlYWx0aHBhY2s+KCk7XG5cbiAgICAgICAgdGhpcy5zaG9vdEF1ZGlvS2V5ID0gTGV2ZWw0U2NlbmUuU0hPT1RfQVVESU9fS0VZO1xuICAgICAgICB0aGlzLmhpdEF1ZGlvS2V5ID0gTGV2ZWw0U2NlbmUuSElUX0FVRElPX0tFWTtcbiAgICAgICAgdGhpcy5keWluZ0F1ZGlvS2V5ID0gTGV2ZWw0U2NlbmUuRFlJTkdfQVVESU9fS0VZO1xuICAgICAgICB0aGlzLmxldmVsTXVzaWNLZXkgPSBMZXZlbDRTY2VuZS5MRVZFTF9NVVNJQ19LRVk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHNlZSBTY2VuZS51cGRhdGUoKVxuICAgICAqL1xuICAgIHB1YmxpYyBvdmVycmlkZSBsb2FkU2NlbmUoKSB7XG5cblxuICAgICAgICAvLyBMb2FkIHRoZSBwbGF5ZXIgYW5kIGVuZW15IHNwcml0ZXNoZWV0c1xuICAgICAgICB0aGlzLmxvYWQuc3ByaXRlc2hlZXQoXCJwbGF5ZXIxXCIsIFwiaHc0X2Fzc2V0cy9zcHJpdGVzaGVldHMvV2FyYmFsbF8wMDFfTHVrYXMuanNvblwiKTtcblxuICAgICAgICAvLyBMb2FkIGluIHRoZSBlbmVteSBzcHJpdGVzXG4gICAgICAgIHRoaXMubG9hZC5zcHJpdGVzaGVldChcIkJsdWVFbmVteVwiLCBcImh3NF9hc3NldHMvc3ByaXRlc2hlZXRzL0JhbGxfQmF0Lmpzb25cIik7XG4gICAgICAgIHRoaXMubG9hZC5zcHJpdGVzaGVldChcIlJlZEVuZW15XCIsIFwiaHc0X2Fzc2V0cy9zcHJpdGVzaGVldHMvQmFsbF9CYXQuanNvblwiKTtcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KFwiQmx1ZUhlYWxlclwiLCBcImh3NF9hc3NldHMvc3ByaXRlc2hlZXRzL1BzeWZseS5qc29uXCIpO1xuICAgICAgICB0aGlzLmxvYWQuc3ByaXRlc2hlZXQoXCJSZWRIZWFsZXJcIiwgXCJodzRfYXNzZXRzL3Nwcml0ZXNoZWV0cy9CYWxsX0JhdC5qc29uXCIpO1xuXG4gICAgICAgIC8vIExvYWQgdGhlIHRpbGVtYXBcbiAgICAgICAgdGhpcy5sb2FkLnRpbGVtYXAoXCJsZXZlbFwiLCBcImh3NF9hc3NldHMvdGlsZW1hcHMvTGV2ZWw0VGlsZW1hcC5qc29uXCIpO1xuXG4gICAgICAgIC8vIExvYWQgdGhlIGVuZW15IGxvY2F0aW9uc1xuICAgICAgICAvLyB0aGlzLmxvYWQub2JqZWN0KFwicmVkXCIsIFwiaHc0X2Fzc2V0cy9kYXRhL2VuZW1pZXMvbHZsMi5qc29uXCIpO1xuICAgICAgICB0aGlzLmxvYWQub2JqZWN0KFwiYmx1ZVwiLCBcImh3NF9hc3NldHMvZGF0YS9lbmVtaWVzL2x2bDQuanNvblwiKTtcblxuICAgICAgICAvLyBMb2FkIHRoZSBoZWFsdGhwYWNrIGFuZCBsYXNlcmd1biBsb2FjdGlvbnNcbiAgICAgICAgdGhpcy5sb2FkLm9iamVjdChcImhlYWx0aHBhY2tzXCIsIFwiaHc0X2Fzc2V0cy9kYXRhL2l0ZW1zL2hlYWx0aHBhY2tzLmpzb25cIik7XG4gICAgICAgIHRoaXMubG9hZC5vYmplY3QoXCJsYXNlcmd1bnNcIiwgXCJodzRfYXNzZXRzL2RhdGEvaXRlbXMvbGFzZXJndW5zLmpzb25cIik7XG5cbiAgICAgICAgLy8gTG9hZCB0aGUgaGVhbHRocGFjaywgaW52ZW50b3J5IHNsb3QsIGFuZCBsYXNlciBndW4gc3ByaXRlc1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoXCJoZWFsdGhwYWNrXCIsIFwiaHc0X2Fzc2V0cy9zcHJpdGVzL2hlYWx0aHBhY2sucG5nXCIpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoXCJpbnZlbnRvcnlTbG90XCIsIFwiaHc0X2Fzc2V0cy9zcHJpdGVzL2ludmVudG9yeS5wbmdcIik7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShcImxhc2VyR3VuXCIsIFwiaHc0X2Fzc2V0cy9zcHJpdGVzL2xhc2VyR3VuLnBuZ1wiKTtcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKExldmVsNFNjZW5lLlBBVVNFX0tFWSwgTGV2ZWw0U2NlbmUuUEFVU0VfUEFUSCk7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShMZXZlbDRTY2VuZS5IRUxQX0tFWSwgTGV2ZWw0U2NlbmUuSEVMUF9QQVRIKTtcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKExldmVsNFNjZW5lLkNPTlRST0xTX0tFWSwgTGV2ZWw0U2NlbmUuQ09OVFJPTFNfUEFUSCk7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShMZXZlbDRTY2VuZS5DT01QTEVURV9LRVksIExldmVsNFNjZW5lLkNPTVBMRVRFX1BBVEgpO1xuXG4gICAgICAgIHRoaXMubG9hZC5hdWRpbyh0aGlzLnNob290QXVkaW9LZXksIExldmVsNFNjZW5lLlNIT09UX0FVRElPX1BBVEgpO1xuICAgICAgICB0aGlzLmxvYWQuYXVkaW8odGhpcy5oaXRBdWRpb0tleSwgTGV2ZWw0U2NlbmUuSElUX0FVRElPX1BBVEgpO1xuICAgICAgICB0aGlzLmxvYWQuYXVkaW8odGhpcy5keWluZ0F1ZGlvS2V5LCBMZXZlbDRTY2VuZS5EWUlOR19BVURJT19QQVRIKTtcbiAgICAgICAgdGhpcy5sb2FkLmF1ZGlvKHRoaXMubGV2ZWxNdXNpY0tleSwgTGV2ZWw0U2NlbmUuTEVWRUxfTVVTSUNfUEFUSCk7XG5cbiAgICB9XG4gICAgXG4gICAgcHVibGljIHN0YXJ0U2NlbmUoKSB7XG4gICAgICAgIC8vIHN1cGVyLnN0YXJ0U2NlbmUoKTtcbiAgICAgICAgLy8gXG5cbiAgICAgICAgY29uc3QgY2VudGVyID0gdGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKTtcblxuICAgICAgICBcblxuICAgICAgICAvLyB0aGlzLmFkZExheWVyKE1haW5TY2VuZUxheWVycy5VSSwgKTtcbiAgICAgICAgLy8gdGhpcy5hZGRMYXllcihNYWluU2NlbmVMYXllcnMuUEFVU0UsIDUpO1xuICAgICAgICAvLyBsZXQgdiA9IHRoaXMuZ2V0TGF5ZXIoXCJVSVwiKTtcbiAgICAgICAgXG4gICAgICAgIFxuXG4gICAgICAgIC8vIEFkZCBpbiB0aGUgdGlsZW1hcFxuICAgICAgICBsZXQgdGlsZW1hcExheWVycyA9IHRoaXMuYWRkLnRpbGVtYXAoXCJsZXZlbFwiKTtcblxuICAgICAgICAvLyBHZXQgdGhlIHdhbGwgbGF5ZXJcbiAgICAgICAgdGhpcy53YWxscyA9IDxPcnRob2dvbmFsVGlsZW1hcD50aWxlbWFwTGF5ZXJzWzFdLmdldEl0ZW1zKClbMF07XG5cbiAgICAgICAgLy8gU2V0IHRoZSB2aWV3cG9ydCBib3VuZHMgdG8gdGhlIHRpbGVtYXBcbiAgICAgICAgbGV0IHRpbGVtYXBTaXplOiBWZWMyID0gdGhpcy53YWxscy5zaXplO1xuXG4gICAgICAgIHRoaXMudmlld3BvcnQuc2V0Qm91bmRzKDAsIDAsIHRpbGVtYXBTaXplLngsIHRpbGVtYXBTaXplLnkpO1xuICAgIFxuICAgICAgICAvLyBcblxuICAgICAgICB0aGlzLmluaXRMYXllcnMoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgcGxheWVyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVBsYXllcigpO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVJdGVtcygpO1xuXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZU5hdm1lc2goKTtcblxuICAgICAgICAvLyBDcmVhdGUgdGhlIE5QQ1NcbiAgICAgICAgdGhpcy5pbml0aWFsaXplTlBDcygpO1xuXG4gICAgICAgIC8vIFN1YnNjcmliZSB0byByZWxldmFudCBldmVudHNcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJoZWFsdGhwYWNrXCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcImVuZW15RGllZFwiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoSXRlbUV2ZW50LklURU1fUkVRVUVTVCk7XG5cbiAgICBcblxuICAgICAgICAvLyBBZGQgYSBVSSBmb3IgaGVhbHRoXG4gICAgICAgIHRoaXMuYWRkVUlMYXllcihcImhlYWx0aFwiKTtcblxuICAgICAgICAvLyBQYXVzZSBCdXR0b24gKE5vdCBuZWVkZWQganVzdCBwcmVzcyBlc2NhcGUpXG4gICAgICAgIC8vIGxldCBwYXVzZSA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTWFpblNjZW5lTGF5ZXJzLlVJLCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54ICsgNjAwLCBjZW50ZXIueSAtIDQwMCksIHRleHQ6IFwiUGF1c2VcIn0pO1xuICAgICAgICAvLyBwYXVzZS5zaXplLnNldCgxMDAsIDUwKTtcbiAgICAgICAgLy8gcGF1c2UuYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICAvLyBwYXVzZS5ib3JkZXJDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICAvLyBwYXVzZS5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgLy8gcGF1c2Uub25DbGlja0V2ZW50SWQgPSBcInBhdXNlXCI7XG5cbiAgICAgICAgLy8gdGhpcy5wYXVzZU1lbnUgPSBwYXVzZTtcblxuICAgICAgICAvLyBUT0RPIE1ha2UgdGV4dCBtb3ZlIHdpdGggYnV0dG9uXG5cbiAgICAgICAgLy8gbGV0IHBhdXNlQmFyID0gbmV3IFBhdXNlSFVEKHRoaXMsIHBhdXNlLCBjZW50ZXIpO1xuICAgICAgICAvLyB0aGlzLnBhdXNlID0gcGF1c2VCYXI7XG5cblxuICAgICAgICBsZXQgcGF1c2VMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJQQVVTRVwiKTtcblxuICAgICAgICB0aGlzLnBhdXNlSW1hZ2UgPSB0aGlzLmFkZC5zcHJpdGUoTGV2ZWw0U2NlbmUuUEFVU0VfS0VZLCBwYXVzZUxheWVyLmdldE5hbWUoKSk7XG4gICAgICAgIHRoaXMucGF1c2VJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuICAgICAgICAvLyB0aGlzLnBhdXNlSW1hZ2UuYWxwaGEgPSAwLjc7XG5cbiAgICAgICAgY29uc3QgdW5wYXVzZSA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTGV2ZWw0U2NlbmVMYXllcnMuUEFVU0UsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLnggLSA1LCBjZW50ZXIueSAtIDIxMCksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgdW5wYXVzZS5zaXplLnNldCg0MDAsIDEwMCk7XG4gICAgICAgIHVucGF1c2UuYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICB1bnBhdXNlLmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIHVucGF1c2UuYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIHVucGF1c2Uub25DbGlja0V2ZW50SWQgPSBcInVucGF1c2VcIjtcblxuICAgICAgICBjb25zdCBtYWluTWVudSA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTGV2ZWw0U2NlbmVMYXllcnMuUEFVU0UsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLnggLSA1LCBjZW50ZXIueSArIDIyMyksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgbWFpbk1lbnUuc2l6ZS5zZXQoNDAwLCAxMDApO1xuICAgICAgICBtYWluTWVudS5ib3JkZXJXaWR0aCA9IDI7XG4gICAgICAgIG1haW5NZW51LmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIG1haW5NZW51LmJhY2tncm91bmRDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBtYWluTWVudS5vbkNsaWNrRXZlbnRJZCA9IFwibWFpbm1lbnVcIjtcblxuICAgICAgICBjb25zdCBjb250cm9sc0J1dHRvbiA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTGV2ZWw0U2NlbmVMYXllcnMuUEFVU0UsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLnggLSA1LCBjZW50ZXIueSAtIDY1KSwgdGV4dDogXCJcIn0pO1xuICAgICAgICBjb250cm9sc0J1dHRvbi5zaXplLnNldCg0MDAsIDEwMCk7XG4gICAgICAgIGNvbnRyb2xzQnV0dG9uLmJvcmRlcldpZHRoID0gMjtcbiAgICAgICAgY29udHJvbHNCdXR0b24uYm9yZGVyQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgY29udHJvbHNCdXR0b24uYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIGNvbnRyb2xzQnV0dG9uLm9uQ2xpY2tFdmVudElkID0gXCJjb250cm9sc1wiO1xuXG4gICAgICAgIGNvbnN0IGhlbHBCdXR0b24gPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIExldmVsNFNjZW5lTGF5ZXJzLlBBVVNFLCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54IC0gNSwgY2VudGVyLnkgKyA4MCksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgaGVscEJ1dHRvbi5zaXplLnNldCg0MDAsIDEwMClcbiAgICAgICAgaGVscEJ1dHRvbi5ib3JkZXJXaWR0aCA9IDI7XG4gICAgICAgIGhlbHBCdXR0b24uYm9yZGVyQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgaGVscEJ1dHRvbi5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgaGVscEJ1dHRvbi5vbkNsaWNrRXZlbnRJZCA9IFwiaGVscFwiO1xuICAgICAgICBcblxuICAgICAgICBwYXVzZUxheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICAgICAgcGF1c2VMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG5cbiAgICAgICBcbiAgICAgICAgbGV0IGNvbnRyb2xzTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiQ09OVFJPTFNcIik7XG5cbiAgICAgICAgdGhpcy5jb250cm9sc0ltYWdlID0gdGhpcy5hZGQuc3ByaXRlKExldmVsNFNjZW5lLkNPTlRST0xTX0tFWSwgY29udHJvbHNMYXllci5nZXROYW1lKCkpO1xuICAgICAgICB0aGlzLmNvbnRyb2xzSW1hZ2UucG9zaXRpb24uY29weSh0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTtcbiAgICAgICAgLy8gdGhpcy5jb250cm9sc0ltYWdlLmFscGhhID0gMC41O1xuXG4gICAgICAgIGNvbnN0IGNvbnRyb2xzQmFja0J1dHRvbiA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTGV2ZWw0U2NlbmVMYXllcnMuQ09OVFJPTFMsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLnggLSA1OTUsIGNlbnRlci55ICsgNDE1KSwgdGV4dDogXCJcIn0pO1xuICAgICAgICBjb250cm9sc0JhY2tCdXR0b24uc2l6ZS5zZXQoMjAwLCA1MCk7XG4gICAgICAgIGNvbnRyb2xzQmFja0J1dHRvbi5ib3JkZXJXaWR0aCA9IDI7XG4gICAgICAgIGNvbnRyb2xzQmFja0J1dHRvbi5ib3JkZXJDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBjb250cm9sc0JhY2tCdXR0b24uYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIGNvbnRyb2xzQmFja0J1dHRvbi5vbkNsaWNrRXZlbnRJZCA9IFwiYmFja2NvbnRyb2xzXCI7XG5cbiAgICAgICAgY29udHJvbHNMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgICAgIGNvbnRyb2xzTGF5ZXIuc2V0SGlkZGVuKHRydWUpO1xuXG4gICAgICAgIC8vIFxuICAgICAgICBsZXQgaGVscExheWVyID0gdGhpcy5nZXRMYXllcihcIkhFTFBcIik7XG5cbiAgICAgICAgdGhpcy5oZWxwSW1hZ2UgPSB0aGlzLmFkZC5zcHJpdGUoTGV2ZWw0U2NlbmUuSEVMUF9LRVksIGhlbHBMYXllci5nZXROYW1lKCkpO1xuICAgICAgICB0aGlzLmhlbHBJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuICAgICAgICAvLyB0aGlzLmhlbHBJbWFnZS5hbHBoYSA9IDAuNTtcblxuICAgICAgICBjb25zdCBoZWxwQmFja0J1dHRvbiA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTGV2ZWw0U2NlbmVMYXllcnMuSEVMUCwge3Bvc2l0aW9uOiBuZXcgVmVjMihjZW50ZXIueCAtIDU5NSwgY2VudGVyLnkgKyA0MTUpLCB0ZXh0OiBcIlwifSk7XG4gICAgICAgIGhlbHBCYWNrQnV0dG9uLnNpemUuc2V0KDIwMCwgNTApO1xuICAgICAgICBoZWxwQmFja0J1dHRvbi5ib3JkZXJXaWR0aCA9IDI7XG4gICAgICAgIGhlbHBCYWNrQnV0dG9uLmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIGhlbHBCYWNrQnV0dG9uLmJhY2tncm91bmRDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBoZWxwQmFja0J1dHRvbi5vbkNsaWNrRXZlbnRJZCA9IFwiaGVscGNvbnRyb2xzXCI7XG5cbiAgICAgICAgaGVscExheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICAgICAgaGVscExheWVyLnNldEhpZGRlbih0cnVlKTtcblxuICAgICAgICBsZXQgY29tcGxldGVMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJDT01QTEVURVwiKTtcblxuICAgICAgICB0aGlzLmNvbXBsZXRlSW1hZ2UgPSB0aGlzLmFkZC5zcHJpdGUoRmluYWxQcm9qZWN0U2NlbmUuQ09NUExFVEVfS0VZLCBjb21wbGV0ZUxheWVyLmdldE5hbWUoKSk7XG4gICAgICAgIHRoaXMuY29tcGxldGVJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuXG4gICAgICAgIGNvbnN0IGNvbXBsZXRlQnV0dG9uID0gdGhpcy5hZGQudWlFbGVtZW50KFVJRWxlbWVudFR5cGUuQlVUVE9OLCBMZXZlbDRTY2VuZUxheWVycy5DT01QTEVURSwge3Bvc2l0aW9uOiBuZXcgVmVjMihjZW50ZXIueCwgY2VudGVyLnkgKyA0NzUpLCB0ZXh0OiBcIlwifSk7XG4gICAgICAgIGNvbXBsZXRlQnV0dG9uLnNpemUuc2V0KDEzMjAsIDIwMDApO1xuICAgICAgICBjb21wbGV0ZUJ1dHRvbi5ib3JkZXJXaWR0aCA9IDI7XG4gICAgICAgIGNvbXBsZXRlQnV0dG9uLmJvcmRlckNvbG9yID0gQ29sb3IuV0hJVEU7XG4gICAgICAgIGNvbXBsZXRlQnV0dG9uLmJhY2tncm91bmRDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBjb21wbGV0ZUJ1dHRvbi5vbkNsaWNrRXZlbnRJZCA9IFwibmV4dGx2bFwiO1xuXG4gICAgICAgIGNvbXBsZXRlTGF5ZXIuc2V0UGF1c2VkKHRydWUpO1xuICAgICAgICBjb21wbGV0ZUxheWVyLnNldEhpZGRlbih0cnVlKTtcblxuXG4gICAgICAgIC8vIHRoaXMucGF1c2VNZW51ID0gdW5wYXVzZTtcblxuICAgICAgICAvLyBsZXQgdmFsID0gdGhpcy5sYXllcnM7XG5cbiAgICAgICAgLy8gY29uc29sZS5sb2codmFsKTtcblxuICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgzKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFBsYXllckV2ZW50LlBMQVlFUl9LSUxMRUQpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShCYXR0bGVyRXZlbnQuQkFUVExFUl9LSUxMRUQpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShCYXR0bGVyRXZlbnQuQkFUVExFUl9SRVNQQVdOKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJwYXVzZVwiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJ1bnBhdXNlXCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcIm1haW5tZW51XCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcImNvbnRyb2xzXCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcImhlbHBcIik7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFwiYmFja2NvbnRyb2xzXCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcImhlbHBjb250cm9sc1wiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJuZXh0bHZsXCIpO1xuXG4gICAgICAgIHRoaXMuZW1pdHRlci5maXJlRXZlbnQoR2FtZUV2ZW50VHlwZS5QTEFZX1NPVU5ELCB7a2V5OiB0aGlzLmxldmVsTXVzaWNLZXksIGxvb3A6IHRydWUsIGhvbGRSZWZlcmVuY2U6IHRydWV9KTtcbiAgICAgICAgLy8gdGhpcy5lbWl0dGVyLmZpcmVFdmVudChHYW1lRXZlbnRUeXBlLlBMQVlfU09VTkQsIHtrZXk6IHRoaXMuZ2V0U2hvb3RBdWRpb0tleSgpLCBsb29wOiBmYWxzZSwgaG9sZFJlZmVyZW5jZTogZmFsc2V9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAc2VlIFNjZW5lLnVwZGF0ZVNjZW5lXG4gICAgICovXG4gIHB1YmxpYyBvdmVycmlkZSB1cGRhdGVTY2VuZShkZWx0YVQ6IG51bWJlcik6IHZvaWQge1xuICAgIHdoaWxlICh0aGlzLnJlY2VpdmVyLmhhc05leHRFdmVudCgpKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlRXZlbnQodGhpcy5yZWNlaXZlci5nZXROZXh0RXZlbnQoKSk7XG4gICAgfVxuICAgIC8vIHRoaXMuaW52ZW50b3J5SHVkLnVwZGF0ZShkZWx0YVQpO1xuICAgIHRoaXMuaGVhbHRoYmFycy5mb3JFYWNoKGhlYWx0aGJhciA9PiBoZWFsdGhiYXIudXBkYXRlKGRlbHRhVCkpO1xuICAgIC8vIHRoaXMucGF1c2Uuc2V0Q2VudGVyKHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuICAgIC8vIHRoaXMucGF1c2VNZW51LnVwZGF0ZShkZWx0YVQpO1xuICAgIC8vIHRoaXMucGF1c2UudXBkYXRlKGRlbHRhVCk7XG5cbiAgICBpZiAoSW5wdXQuaXNLZXlKdXN0UHJlc3NlZChcImVzY2FwZVwiKSl7XG4gICAgXG5cbiAgICAgICAgY29uc29sZS5sb2coXCJFc2NhcGUgcHJlc3NlZFwiKTtcbiAgICAgICAgbGV0IHYgPSBuZXcgR2FtZUV2ZW50KFwicGF1c2VcIiwgbnVsbCk7XG4gICAgICAgIHRoaXMuaGFuZGxlRXZlbnQodik7XG4gICAgfVxuICAgIGlmICh0aGlzLmJvc3MuaGVhbHRoIDw9IDApIHtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgIHRoaXMudW5wYXVzZUNvbXBsZXRlTGF5ZXIoKTtcblxuICAgICAgICB0aGlzLnBsYXllclswXS5mcmVlemUoKTsgLy8gRnJlZXplcyBwbGF5ZXJcbiAgICAgICAgdGhpcy5wbGF5ZXJbMF0uZGlzYWJsZVBoeXNpY3MoKTtcbiAgICAgICAgdGhpcy5wbGF5ZXJbMF0uYWlBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmVuZW1pZXMubGVuZ3RoOyBpKyspeyAvLyBGcmVlemVzIGVuZW1pZXMgXG4gICAgICAgICAgICBpZih0aGlzLmVuZW1pZXNbaV0uYmF0dGxlckFjdGl2ZSA9PSB0cnVlKXtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZW1pZXNbaV0uZnJlZXplKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmVtaWVzW2ldLmRpc2FibGVQaHlzaWNzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmVtaWVzW2ldLmFpQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICB9IFxuXG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IHBhdXNlTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiUEFVU0VcIik7XG4gICBcbiAgICBpZighcGF1c2VMYXllci5pc0hpZGRlbigpKXtcbiAgICAgICAgdGhpcy5wYXVzZUltYWdlLnBvc2l0aW9uLmNvcHkodGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKSk7IC8vIFdvcmtzIGJ1dCB3aGVuIG1vdmluZyB0aGUgc2NyZWVuIGdldHMgbW92ZWQgdXB3YXJkcy5cbiAgICB9XG5cbiAgICBpZihJbnB1dC5pc0tleVByZXNzZWQoXCJ6XCIpKXtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgIH1cbiAgICBcbiAgICBpZihJbnB1dC5pc0tleVByZXNzZWQoXCJ4XCIpKXtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMyk7XG4gICAgIH1cblxuICAgICBpZihJbnB1dC5pc0tleUp1c3RQcmVzc2VkKFwiMVwiKSl7XG4gICAgICAgIHRoaXMudmlld3BvcnQuZm9sbG93KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgxKTtcbiAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShMZXZlbDFTY2VuZSk7XG4gICAgIH1cbiAgICAgaWYoSW5wdXQuaXNLZXlKdXN0UHJlc3NlZChcIjJcIikpe1xuICAgICAgICB0aGlzLnZpZXdwb3J0LmZvbGxvdyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoTGV2ZWwyU2NlbmUpO1xuICAgICB9XG4gICAgIGlmKElucHV0LmlzS2V5SnVzdFByZXNzZWQoXCIzXCIpKXtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKExldmVsM1NjZW5lKTtcbiAgICAgfVxuICAgICBpZihJbnB1dC5pc0tleUp1c3RQcmVzc2VkKFwiNFwiKSl7XG4gICAgICAgIHRoaXMudmlld3BvcnQuZm9sbG93KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgxKTtcbiAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShMZXZlbDRTY2VuZSk7XG4gICAgIH1cbiAgICAgaWYoSW5wdXQuaXNLZXlKdXN0UHJlc3NlZChcIjVcIikpe1xuICAgICAgICB0aGlzLnZpZXdwb3J0LmZvbGxvdyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoTGV2ZWw1U2NlbmUpO1xuICAgICB9XG4gICAgIGlmKElucHV0LmlzS2V5SnVzdFByZXNzZWQoXCI2XCIpKXtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKExhc3RTY2VuZSk7XG4gICAgIH1cblxuICAgICBpZihJbnB1dC5pc0tleUp1c3RQcmVzc2VkKFwidFwiKSl7XG4gICAgICAgIHRoaXMucGxheWVyWzBdLnBvc2l0aW9uID0gdGhpcy5ib3NzTG9jYXRpb247XG4gICAgIH1cblxuXG4gICAgLy8gQW5vdGhlciB3YXkgdG8gcGxheSBzaG9vdCBhdWRpbyBpcyB3aGVuIHBsYXllciBwcmVzc2VkIHNwYWNlXG4gICAgLy8gIGlmKElucHV0LmlzS2V5SnVzdFByZXNzZWQoXCJzcGFjZVwiKSl7XG4gICAgLy8gICAgIGNvbnNvbGUubG9nKFwiU2hvb3QgQXVkaW8gUGxheWVkXCIpO1xuICAgIC8vICAgICB0aGlzLmVtaXR0ZXIuZmlyZUV2ZW50KEdhbWVFdmVudFR5cGUuUExBWV9TT1VORCwge2tleTogdGhpcy5nZXRTaG9vdEF1ZGlvS2V5KCksIGxvb3A6IGZhbHNlLCBob2xkUmVmZXJlbmNlOiBmYWxzZX0pO1xuICAgIC8vICB9XG4gICAgLy8gVE9ETyBJZiBpbnB1dCBpcyAyLCAzLCA0LCA1LCA2IGdvIHRvIHRob3NlIGxldmVscyBieSBjaGFuaW5nIHRoZSBzY2VuZVxuXG59XG5cbi8qKlxuICogSGFuZGxlIGV2ZW50cyBmcm9tIHRoZSByZXN0IG9mIHRoZSBnYW1lXG4gKiBAcGFyYW0gZXZlbnQgYSBnYW1lIGV2ZW50XG4gKi9cbnB1YmxpYyBoYW5kbGVFdmVudChldmVudDogR2FtZUV2ZW50KTogdm9pZCB7XG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XG4gICAgICAgIGNhc2UgQmF0dGxlckV2ZW50LkJBVFRMRVJfS0lMTEVEOiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUJhdHRsZXJLaWxsZWQoZXZlbnQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBCYXR0bGVyRXZlbnQuQkFUVExFUl9SRVNQQVdOOiB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEl0ZW1FdmVudC5JVEVNX1JFUVVFU1Q6IHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlSXRlbVJlcXVlc3QoZXZlbnQuZGF0YS5nZXQoXCJub2RlXCIpLCBldmVudC5kYXRhLmdldChcImludmVudG9yeVwiKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFBsYXllckV2ZW50LlBMQVlFUl9LSUxMRUQ6IHtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuZm9sbG93KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKEdhbWVPdmVyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwicGF1c2VcIjoge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJQYXVzZVwiKTtcblxuICAgICAgICAgICAgLy8gdGhpcy5wYXVzZUltYWdlLnNjYWxlID0gdGhpcy5wYXVzZUltYWdlLnNpemVXaXRoWm9vbTtcblxuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgICAgICB0aGlzLnBhdXNlSW1hZ2UucG9zaXRpb24uY29weSh0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTsgLy8gV29ya3MgYnV0IHdoZW4gbW92aW5nIHRoZSBzY3JlZW4gZ2V0cyBtb3ZlZCB1cHdhcmRzLlxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJbMF0uZnJlZXplKCk7IC8vIEZyZWV6ZXMgcGxheWVyXG4gICAgICAgICAgICB0aGlzLnBsYXllclswXS5kaXNhYmxlUGh5c2ljcygpO1xuXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5lbmVtaWVzLmxlbmd0aDsgaSsrKXsgLy8gRnJlZXplcyBlbmVtaWVzIFxuICAgICAgICAgICAgICAgIGlmKHRoaXMuZW5lbWllc1tpXS5iYXR0bGVyQWN0aXZlID09IHRydWUpe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZW1pZXNbaV0uZnJlZXplKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5lbWllc1tpXS5kaXNhYmxlUGh5c2ljcygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZW1pZXNbaV0uYWlBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICB9IFxuICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgdGhpcy51bnBhdXNlUGF1c2VMYXllcigpOyBcbiAgICAgICAgICAgdGhpcy5wYXVzZVByaW1hcnlMYXllcigpO1xuICAgICAgICAgICB0aGlzLnBhdXNlVUlMYXllcigpO1xuXG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJ1bnBhdXNlXCI6IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidW5wYXVzZVwiKTtcblxuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMyk7XG4gICAgICAgICAgICBsZXQgY2VudGVyID0gdGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKTtcbiAgICAgICAgICAgIC8vIHRoaXMucGF1c2VNZW51LnBvc2l0aW9uLnNldChjZW50ZXIueCwgY2VudGVyLnkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMucGxheWVyWzBdLnVuZnJlZXplKCk7XG4gICAgICAgICAgICB0aGlzLnBsYXllclswXS5lbmFibGVQaHlzaWNzKCk7XG4gICAgICAgICAgICAvLyBJbnB1dC5lbmFibGVJbnB1dCgpO1xuXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5lbmVtaWVzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmVuZW1pZXNbaV0uYmF0dGxlckFjdGl2ZSA9PSB0cnVlKXsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5lbWllc1tpXS51bmZyZWV6ZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZW1pZXNbaV0uZW5hYmxlUGh5c2ljcygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZW1pZXNbaV0uYWlBY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gdGhpcy5lbmVtaWVzW2ldLnNldFRhcmdldCh0aGlzLmJhdHRsZXJzWzBdKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5wYXVzZVBhdXNlTGF5ZXIoKTtcbiAgICAgICAgICAgIHRoaXMudW5wYXVzZVByaW1hcnlMYXllcigpO1xuICAgICAgICAgICAgdGhpcy51bnBhdXNlVUlMYXllcigpO1xuXG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IFxuICAgICAgICBjYXNlIFwibWFpbm1lbnVcIjoge1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShNYWluTWVudSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBcbiAgICAgICAgY2FzZSBcImNvbnRyb2xzXCI6IHtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbHNJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuICAgICAgICAgICAgdGhpcy5wYXVzZVBhdXNlTGF5ZXIoKTtcbiAgICAgICAgICAgIHRoaXMudW5wYXVzZUNvbnRyb2xzTGF5ZXIoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IFxuICAgICAgICBjYXNlIFwiYmFja2NvbnRyb2xzXCI6IHtcbiAgICAgICAgICAgIHRoaXMudW5wYXVzZVBhdXNlTGF5ZXIoKTtcbiAgICAgICAgICAgIHRoaXMucGF1c2VDb250cm9sc0xheWVyKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiaGVscFwiOiB7XG4gICAgICAgICAgICB0aGlzLmhlbHBJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuICAgICAgICAgICAgdGhpcy5wYXVzZVBhdXNlTGF5ZXIoKTtcbiAgICAgICAgICAgIHRoaXMudW5wYXVzZUhlbHBMYXllcigpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImhlbHBjb250cm9sc1wiOiB7XG4gICAgICAgICAgICB0aGlzLnVucGF1c2VQYXVzZUxheWVyKCk7XG4gICAgICAgICAgICB0aGlzLnBhdXNlSGVscExheWVyKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwibmV4dGx2bFwiOiB7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LmZvbGxvdyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKExldmVsNVNjZW5lKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5oYW5kbGVkIGV2ZW50IHR5cGUgXCIke2V2ZW50LnR5cGV9XCIgY2F1Z2h0IGluIEhXM1NjZW5lIGV2ZW50IGhhbmRsZXJgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxucHJvdGVjdGVkIHBhdXNlUGF1c2VMYXllcigpOiB2b2lkIHtcbiAgICBsZXQgcGF1c2VMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJQQVVTRVwiKTtcbiAgICBwYXVzZUxheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICBwYXVzZUxheWVyLnNldEhpZGRlbih0cnVlKTtcbn1cblxucHJvdGVjdGVkIHVucGF1c2VQYXVzZUxheWVyKCk6IHZvaWQge1xuICAgIGxldCBwYXVzZUxheWVyID0gdGhpcy5nZXRMYXllcihcIlBBVVNFXCIpO1xuICAgIHBhdXNlTGF5ZXIuc2V0UGF1c2VkKGZhbHNlKTtcbiAgICBwYXVzZUxheWVyLnNldEhpZGRlbihmYWxzZSk7XG59XG5cbnByb3RlY3RlZCBwYXVzZUNvbnRyb2xzTGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IGNvbnRyb2xzTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiQ09OVFJPTFNcIik7XG4gICAgY29udHJvbHNMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgY29udHJvbHNMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG59XG5cbnByb3RlY3RlZCB1bnBhdXNlQ29udHJvbHNMYXllcigpOiB2b2lkIHtcbiAgICBsZXQgY29udHJvbHNMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJDT05UUk9MU1wiKTtcbiAgICBjb250cm9sc0xheWVyLnNldFBhdXNlZChmYWxzZSk7XG4gICAgY29udHJvbHNMYXllci5zZXRIaWRkZW4oZmFsc2UpO1xufVxuXG5wcm90ZWN0ZWQgcGF1c2VQcmltYXJ5TGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IHByaW1hcnlMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJwcmltYXJ5XCIpO1xuICAgIHByaW1hcnlMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgcHJpbWFyeUxheWVyLnNldEhpZGRlbih0cnVlKTtcbn1cblxucHJvdGVjdGVkIHVucGF1c2VQcmltYXJ5TGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IHByaW1hcnlMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJwcmltYXJ5XCIpO1xuICAgIHByaW1hcnlMYXllci5zZXRQYXVzZWQoZmFsc2UpO1xuICAgIHByaW1hcnlMYXllci5zZXRIaWRkZW4oZmFsc2UpO1xufVxuXG5wcm90ZWN0ZWQgcGF1c2VVSUxheWVyKCk6IHZvaWQge1xuICAgIGxldCB1aUxheWVyID0gdGhpcy5nZXRMYXllcihcIlVJXCIpO1xuICAgIHVpTGF5ZXIuc2V0UGF1c2VkKHRydWUpO1xuICAgIHVpTGF5ZXIuc2V0SGlkZGVuKHRydWUpO1xufVxuXG5wcm90ZWN0ZWQgdW5wYXVzZVVJTGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IHVpTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiVUlcIik7XG4gICAgdWlMYXllci5zZXRQYXVzZWQoZmFsc2UpO1xuICAgIHVpTGF5ZXIuc2V0SGlkZGVuKGZhbHNlKTtcbn1cblxucHJvdGVjdGVkIHBhdXNlSGVscExheWVyKCk6IHZvaWQge1xuICAgIGxldCBoZWxwTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiSEVMUFwiKTtcbiAgICBoZWxwTGF5ZXIuc2V0UGF1c2VkKHRydWUpO1xuICAgIGhlbHBMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG59XG5cbnByb3RlY3RlZCB1bnBhdXNlSGVscExheWVyKCk6IHZvaWQge1xuICAgIGxldCBoZWxwTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiSEVMUFwiKTtcbiAgICBoZWxwTGF5ZXIuc2V0UGF1c2VkKGZhbHNlKTtcbiAgICBoZWxwTGF5ZXIuc2V0SGlkZGVuKGZhbHNlKTtcbn1cblxucHJvdGVjdGVkIHBhdXNlQ29tcGxldGVMYXllcigpOiB2b2lkIHtcbiAgICBsZXQgY29tcGxldGVMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJDT01QTEVURVwiKTtcbiAgICBjb21wbGV0ZUxheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICBjb21wbGV0ZUxheWVyLnNldEhpZGRlbih0cnVlKTtcbn1cblxucHJvdGVjdGVkIHVucGF1c2VDb21wbGV0ZUxheWVyKCk6IHZvaWQge1xuICAgIGxldCBjb21wbGV0ZUxheWVyID0gdGhpcy5nZXRMYXllcihcIkNPTVBMRVRFXCIpO1xuICAgIGNvbXBsZXRlTGF5ZXIuc2V0UGF1c2VkKGZhbHNlKTtcbiAgICBjb21wbGV0ZUxheWVyLnNldEhpZGRlbihmYWxzZSk7XG59XG5cblxuXG5wcm90ZWN0ZWQgaGFuZGxlSXRlbVJlcXVlc3Qobm9kZTogR2FtZU5vZGUsIGludmVudG9yeTogSW52ZW50b3J5KTogdm9pZCB7XG4gICAgbGV0IGl0ZW1zOiBJdGVtW10gPSBuZXcgQXJyYXk8SXRlbT4oLi4udGhpcy5oZWFsdGhwYWNrcywgLi4udGhpcy5sYXNlcmd1bnMpLmZpbHRlcigoaXRlbTogSXRlbSkgPT4ge1xuICAgICAgICByZXR1cm4gaXRlbS5pbnZlbnRvcnkgPT09IG51bGwgJiYgaXRlbS5wb3NpdGlvbi5kaXN0YW5jZVRvKG5vZGUucG9zaXRpb24pIDw9IDEwMDtcbiAgICB9KTtcblxuICAgIGlmIChpdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGludmVudG9yeS5hZGQoaXRlbXMucmVkdWNlKENsb3Nlc3RQb3NpdGlvbmVkKG5vZGUpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhhbmRsZXMgYW4gTlBDIGJlaW5nIGtpbGxlZCBieSB1bnJlZ2lzdGVyaW5nIHRoZSBOUEMgZnJvbSB0aGUgc2NlbmVzIHN1YnN5c3RlbXNcbiAqIEBwYXJhbSBldmVudCBhbiBOUEMta2lsbGVkIGV2ZW50XG4gKi9cbnByb3RlY3RlZCBoYW5kbGVCYXR0bGVyS2lsbGVkKGV2ZW50OiBHYW1lRXZlbnQpOiB2b2lkIHtcbiAgICBsZXQgaWQ6IG51bWJlciA9IGV2ZW50LmRhdGEuZ2V0KFwiaWRcIik7XG4gICAgbGV0IGJhdHRsZXIgPSB0aGlzLmJhdHRsZXJzLmZpbmQoYiA9PiBiLmlkID09PSBpZCk7XG5cbiAgICBpZiAoYmF0dGxlcikge1xuICAgICAgICBiYXR0bGVyLmJhdHRsZXJBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5oZWFsdGhiYXJzLmdldChpZCkudmlzaWJsZSA9IGZhbHNlO1xuICAgIH1cbiAgICBcbn1cblxuLyoqIEluaXRpYWxpemVzIHRoZSBsYXllcnMgaW4gdGhlIHNjZW5lICovXG5wcm90ZWN0ZWQgaW5pdExheWVycygpOiB2b2lkIHtcblxuICAgIHRoaXMuYWRkTGF5ZXIoTGV2ZWw0U2NlbmVMYXllcnMuVUkpO1xuICAgIHRoaXMuYWRkTGF5ZXIoTGV2ZWw0U2NlbmVMYXllcnMuUEFVU0UsIDEwKTtcbiAgICB0aGlzLmFkZExheWVyKExldmVsNFNjZW5lTGF5ZXJzLkhFTFAsIDExKTtcbiAgICB0aGlzLmFkZExheWVyKExldmVsNFNjZW5lTGF5ZXJzLkNPTlRST0xTLCAxMSk7XG4gICAgdGhpcy5hZGRMYXllcihMZXZlbDRTY2VuZUxheWVycy5DT01QTEVURSwgMTIpO1xuXG4gICAgdGhpcy5hZGRMYXllcihcInByaW1hcnlcIiwgNSk7XG59XG5cblxuXG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIHBsYXllciBpbiB0aGUgc2NlbmVcbiAqL1xucHJvdGVjdGVkIGluaXRpYWxpemVQbGF5ZXIoKTogdm9pZCB7XG4gICAgY29uc3QgY2VudGVyID0gdGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKTtcbiAgICBsZXQgcGxheWVyID0gdGhpcy5hZGQuYW5pbWF0ZWRTcHJpdGUoUGxheWVyQWN0b3IsIFwicGxheWVyMVwiLCBcInByaW1hcnlcIik7XG4gICAgcGxheWVyLnBvc2l0aW9uLnNldChjZW50ZXIueCs2MDAsIGNlbnRlci55LTMwMCk7XG5cbiAgICBwbGF5ZXIuYmF0dGxlR3JvdXAgPSAyO1xuICAgIFxuXG4gICAgcGxheWVyLmhlYWx0aCA9IDEwO1xuICAgIHBsYXllci5tYXhIZWFsdGggPSAxMDtcbiAgICBwbGF5ZXIuc2NhbGUgPSBuZXcgVmVjMigwLjQsIDAuNCk7IC8vIFNjYWxlcyBwbGF5ZXIgXG5cbiAgICBwbGF5ZXIuaW52ZW50b3J5Lm9uQ2hhbmdlID0gSXRlbUV2ZW50LklOVkVOVE9SWV9DSEFOR0VEXG4gICAgLy8gdGhpcy5pbnZlbnRvcnlIdWQgPSBuZXcgSW52ZW50b3J5SFVEKHRoaXMsIHBsYXllci5pbnZlbnRvcnksIFwiaW52ZW50b3J5U2xvdFwiLCB7XG4gICAgLy8gICAgIHN0YXJ0OiBuZXcgVmVjMigyMzIsIDI0KSxcbiAgICAvLyAgICAgc2xvdExheWVyOiBcInNsb3RzXCIsXG4gICAgLy8gICAgIHBhZGRpbmc6IDgsXG4gICAgLy8gICAgIGl0ZW1MYXllcjogXCJpdGVtc1wiXG4gICAgLy8gfSk7XG5cbiAgICAvLyBHaXZlIHRoZSBwbGF5ZXIgcGh5c2ljc1xuICAgIHBsYXllci5hZGRQaHlzaWNzKG5ldyBBQUJCKFZlYzIuWkVSTywgbmV3IFZlYzIoMTYsIDE2KSkpO1xuXG4gICAgLy8gR2l2ZSB0aGUgcGxheWVyIGEgaGVhbHRoYmFyXG4gICAgIGxldCBoZWFsdGhiYXIgPSBuZXcgSGVhbHRoYmFySFVEKHRoaXMsIHBsYXllciwgXCJwcmltYXJ5XCIsIHtzaXplOiBwbGF5ZXIuc2l6ZS5jbG9uZSgpLnNjYWxlZCgxLCAxLzQpLCBvZmZzZXQ6IHBsYXllci5zaXplLmNsb25lKCkuc2NhbGVkKDAsIC0xLzMpfSk7XG4gICAgdGhpcy5oZWFsdGhiYXJzLnNldChwbGF5ZXIuaWQsIGhlYWx0aGJhcik7XG5cbiAgICAvLyBHaXZlIHRoZSBwbGF5ZXIgUGxheWVyQUlcbiAgICBwbGF5ZXIuYWRkQUkoUGxheWVyQUkpO1xuXG4gICAgLy8gU3RhcnQgdGhlIHBsYXllciBpbiB0aGUgXCJJRExFXCIgYW5pbWF0aW9uXG4gICAgcGxheWVyLmFuaW1hdGlvbi5wbGF5KFwiSURMRVwiKTtcbiAgICBcbiAgICB0aGlzLmJhdHRsZXJzLnB1c2gocGxheWVyKTtcbiAgICB0aGlzLnBsYXllci5wdXNoKHBsYXllcik7XG4gICAgdGhpcy52aWV3cG9ydC5mb2xsb3cocGxheWVyKTtcbiAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgzKTtcbiAgICBcbn1cbi8qKlxuICogSW5pdGlhbGl6ZSB0aGUgTlBDcyBcbiAqL1xucHJvdGVjdGVkIGluaXRpYWxpemVOUENzKCk6IHZvaWQge1xuXG4gICBcbiAgICAvLyBHZXQgdGhlIG9iamVjdCBkYXRhIGZvciB0aGUgYmx1ZSBlbmVtaWVzXG4gICAgbGV0IGJsdWUgPSB0aGlzLmxvYWQuZ2V0T2JqZWN0KFwiYmx1ZVwiKTtcblxuICAgIC8vIEluaXRpYWxpemUgdGhlIGJsdWUgZW5lbWllc1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmx1ZS5lbmVtaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBucGMgPSB0aGlzLmFkZC5hbmltYXRlZFNwcml0ZShOUENBY3RvciwgXCJCbHVlRW5lbXlcIiwgXCJwcmltYXJ5XCIpO1xuICAgICAgICBucGMucG9zaXRpb24uc2V0KGJsdWUuZW5lbWllc1tpXVswXSwgYmx1ZS5lbmVtaWVzW2ldWzFdKTtcbiAgICAgICAgbnBjLmFkZFBoeXNpY3MobmV3IEFBQkIoVmVjMi5aRVJPLCBuZXcgVmVjMig4LCA4KSksIG51bGwsIGZhbHNlKTtcblxuICAgICAgICAvLyBHaXZlIHRoZSBOUENTIHRoZWlyIGhlYWx0aGJhcnNcbiAgICAgICAgbGV0IGhlYWx0aGJhciA9IG5ldyBIZWFsdGhiYXJIVUQodGhpcywgbnBjLCBcInByaW1hcnlcIiwge3NpemU6IG5wYy5zaXplLmNsb25lKCkuc2NhbGVkKDEvMiwgMS80KSwgb2Zmc2V0OiBucGMuc2l6ZS5jbG9uZSgpLnNjYWxlZCgwLCAtMS8zKX0pO1xuICAgICAgICB0aGlzLmhlYWx0aGJhcnMuc2V0KG5wYy5pZCwgaGVhbHRoYmFyKTtcblxuICAgICAgICBucGMuYmF0dGxlR3JvdXAgPSAxXG4gICAgICAgIG5wYy5zcGVlZCA9IDEwO1xuICAgICAgICBucGMuaGVhbHRoID0gNDtcbiAgICAgICAgbnBjLm1heEhlYWx0aCA9IDQ7XG4gICAgICAgIG5wYy5uYXZrZXkgPSBcIm5hdm1lc2hcIjtcbiAgICAgICAgbnBjLnNjYWxlID0gbmV3IFZlYzIoMC40LDAuNCk7XG5cbiAgICAgICAgLy8gR2l2ZSB0aGUgTlBDcyB0aGVpciBBSVxuICAgICAgICBucGMuYWRkQUkoR3VhcmRCZWhhdmlvciwge3RhcmdldDogdGhpcy5iYXR0bGVyc1swXSwgcmFuZ2U6IDB9KTtcblxuICAgICAgICAvLyBQbGF5IHRoZSBOUENzIFwiSURMRVwiIGFuaW1hdGlvbiBcbiAgICAgICAgbnBjLmFuaW1hdGlvbi5wbGF5KFwiSURMRVwiKTtcblxuICAgICAgICB0aGlzLmJhdHRsZXJzLnB1c2gobnBjKTtcbiAgICAgICAgdGhpcy5lbmVtaWVzLnB1c2gobnBjKTtcbiAgICB9XG5cbiAgICBsZXQgbnBjID0gdGhpcy5hZGQuYW5pbWF0ZWRTcHJpdGUoTlBDQWN0b3IsIFwiQmx1ZUVuZW15XCIsIFwicHJpbWFyeVwiKTtcbiAgICAgICAgdGhpcy5ib3NzID0gbnBjO1xuICAgICAgICBucGMucG9zaXRpb24uc2V0KDEwMCw4MDApO1xuICAgICAgICB0aGlzLmJvc3NMb2NhdGlvbiA9IG5ldyBWZWMyKDEwMCwgODAwKTtcbiAgICAgICAgbnBjLmFkZFBoeXNpY3MobmV3IEFBQkIoVmVjMi5aRVJPLCBuZXcgVmVjMigzMiwgMzIpKSwgbnVsbCwgZmFsc2UpO1xuXG4gICAgICAgIC8vIEdpdmUgdGhlIE5QQ1MgdGhlaXIgaGVhbHRoYmFyc1xuICAgICAgICBsZXQgaGVhbHRoYmFyID0gbmV3IEhlYWx0aGJhckhVRCh0aGlzLCBucGMsIFwicHJpbWFyeVwiLCB7c2l6ZTogbnBjLnNpemUuY2xvbmUoKS5zY2FsZWQoMiwgMS80KSwgb2Zmc2V0OiBucGMuc2l6ZS5jbG9uZSgpLnNjYWxlZCgwLCAtMS8zKX0pO1xuICAgICAgICB0aGlzLmhlYWx0aGJhcnMuc2V0KG5wYy5pZCwgaGVhbHRoYmFyKTtcblxuICAgICAgICBucGMuYmF0dGxlR3JvdXAgPSAxXG4gICAgICAgIG5wYy5zcGVlZCA9IDEwO1xuICAgICAgICBucGMuaGVhbHRoID0gMjU7XG4gICAgICAgIG5wYy5tYXhIZWFsdGggPSAyNTtcbiAgICAgICAgbnBjLm5hdmtleSA9IFwibmF2bWVzaFwiO1xuICAgICAgICBucGMuc2NhbGUgPSBuZXcgVmVjMigxLDEpO1xuXG5cbiAgICAgICAgLy8gR2l2ZSB0aGUgTlBDcyB0aGVpciBBSVxuICAgICAgICBucGMuYWRkQUkoR3VhcmRCZWhhdmlvciwge3RhcmdldDogdGhpcy5iYXR0bGVyc1swXSwgcmFuZ2U6IDB9KTtcblxuICAgICAgICAvLyBQbGF5IHRoZSBOUENzIFwiSURMRVwiIGFuaW1hdGlvbiBcbiAgICAgICAgbnBjLmFuaW1hdGlvbi5wbGF5KFwiSURMRVwiKTtcblxuICAgICAgICB0aGlzLmJhdHRsZXJzLnB1c2gobnBjKTtcbiAgICAgICAgdGhpcy5lbmVtaWVzLnB1c2gobnBjKTtcblxuICAgIC8vIEluaXRpYWxpemUgdGhlIGJsdWUgaGVhbGVyc1xuICAgIFxuXG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZSB0aGUgaXRlbXMgaW4gdGhlIHNjZW5lIChoZWFsdGhwYWNrcyBhbmQgbGFzZXIgZ3VucylcbiAqL1xucHJvdGVjdGVkIGluaXRpYWxpemVJdGVtcygpOiB2b2lkIHtcbiAgICBsZXQgbGFzZXJndW5zID0gdGhpcy5sb2FkLmdldE9iamVjdChcImxhc2VyZ3Vuc1wiKTtcbiAgICB0aGlzLmxhc2VyZ3VucyA9IG5ldyBBcnJheTxMYXNlckd1bj4obGFzZXJndW5zLml0ZW1zLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsYXNlcmd1bnMuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHNwcml0ZSA9IHRoaXMuYWRkLnNwcml0ZShcImxhc2VyR3VuXCIsIFwicHJpbWFyeVwiKTtcbiAgICAgICAgbGV0IGxpbmUgPSA8TGluZT50aGlzLmFkZC5ncmFwaGljKEdyYXBoaWNUeXBlLkxJTkUsIFwicHJpbWFyeVwiLCB7c3RhcnQ6IFZlYzIuWkVSTywgZW5kOiBWZWMyLlpFUk99KTtcbiAgICAgICAgdGhpcy5sYXNlcmd1bnNbaV0gPSBMYXNlckd1bi5jcmVhdGUoc3ByaXRlLCBsaW5lKTtcbiAgICAgICAgdGhpcy5sYXNlcmd1bnNbaV0ucG9zaXRpb24uc2V0KGxhc2VyZ3Vucy5pdGVtc1tpXVswXSwgbGFzZXJndW5zLml0ZW1zW2ldWzFdKTtcbiAgICB9XG5cbiAgICBsZXQgaGVhbHRocGFja3MgPSB0aGlzLmxvYWQuZ2V0T2JqZWN0KFwiaGVhbHRocGFja3NcIik7XG4gICAgdGhpcy5oZWFsdGhwYWNrcyA9IG5ldyBBcnJheTxIZWFsdGhwYWNrPihoZWFsdGhwYWNrcy5pdGVtcy5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGVhbHRocGFja3MuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHNwcml0ZSA9IHRoaXMuYWRkLnNwcml0ZShcImhlYWx0aHBhY2tcIiwgXCJwcmltYXJ5XCIpO1xuICAgICAgICB0aGlzLmhlYWx0aHBhY2tzW2ldID0gbmV3IEhlYWx0aHBhY2soc3ByaXRlKTtcbiAgICAgICAgdGhpcy5oZWFsdGhwYWNrc1tpXS5wb3NpdGlvbi5zZXQoaGVhbHRocGFja3MuaXRlbXNbaV1bMF0sIGhlYWx0aHBhY2tzLml0ZW1zW2ldWzFdKTtcbiAgICB9XG59XG4vKipcbiAqIEluaXRpYWxpemVzIHRoZSBuYXZtZXNoIGdyYXBoIHVzZWQgYnkgdGhlIE5QQ3MgaW4gdGhlIEhXM1NjZW5lLiBUaGlzIG1ldGhvZCBpcyBhIGxpdHRsZSBidWdneSwgYW5kXG4gKiBhbmQgaXQgc2tpcHMgb3ZlciBzb21lIG9mIHRoZSBwb3NpdGlvbnMgb24gdGhlIHRpbGVtYXAuIElmIHlvdSBjYW4gZml4IG15IG5hdm1lc2ggZ2VuZXJhdGlvbiBhbGdvcml0aG0sXG4gKiBnbyBmb3IgaXQuXG4gKiBcbiAqIC0gUGV0ZXJcbiAqL1xucHJvdGVjdGVkIGluaXRpYWxpemVOYXZtZXNoKCk6IHZvaWQge1xuICAgIC8vIENyZWF0ZSB0aGUgZ3JhcGhcbiAgICB0aGlzLmdyYXBoID0gbmV3IFBvc2l0aW9uR3JhcGgoKTtcblxuICAgIGxldCBkaW06IFZlYzIgPSB0aGlzLndhbGxzLmdldERpbWVuc2lvbnMoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpbS55OyBpKyspIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBkaW0ueDsgaisrKSB7XG4gICAgICAgICAgICBsZXQgdGlsZTogQUFCQiA9IHRoaXMud2FsbHMuZ2V0VGlsZUNvbGxpZGVyKGosIGkpO1xuICAgICAgICAgICAgdGhpcy5ncmFwaC5hZGRQb3NpdGlvbmVkTm9kZSh0aWxlLmNlbnRlcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgcmM6IFZlYzI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmdyYXBoLm51bVZlcnRpY2VzOyBpKyspIHtcbiAgICAgICAgcmMgPSB0aGlzLndhbGxzLmdldFRpbGVDb2xSb3coaSk7XG4gICAgICAgIGlmICghdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKHJjLngsIHJjLnkpICYmXG4gICAgICAgICAgICAhdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKE1hdGhVdGlscy5jbGFtcChyYy54IC0gMSwgMCwgZGltLnggLSAxKSwgcmMueSkgJiZcbiAgICAgICAgICAgICF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUoTWF0aFV0aWxzLmNsYW1wKHJjLnggKyAxLCAwLCBkaW0ueCAtIDEpLCByYy55KSAmJlxuICAgICAgICAgICAgIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShyYy54LCBNYXRoVXRpbHMuY2xhbXAocmMueSAtIDEsIDAsIGRpbS55IC0gMSkpICYmXG4gICAgICAgICAgICAhdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKHJjLngsIE1hdGhVdGlscy5jbGFtcChyYy55ICsgMSwgMCwgZGltLnkgLSAxKSkgJiZcbiAgICAgICAgICAgICF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUoTWF0aFV0aWxzLmNsYW1wKHJjLnggKyAxLCAwLCBkaW0ueCAtIDEpLCBNYXRoVXRpbHMuY2xhbXAocmMueSArIDEsIDAsIGRpbS55IC0gMSkpICYmXG4gICAgICAgICAgICAhdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKE1hdGhVdGlscy5jbGFtcChyYy54IC0gMSwgMCwgZGltLnggLSAxKSwgTWF0aFV0aWxzLmNsYW1wKHJjLnkgKyAxLCAwLCBkaW0ueSAtIDEpKSAmJlxuICAgICAgICAgICAgIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShNYXRoVXRpbHMuY2xhbXAocmMueCArIDEsIDAsIGRpbS54IC0gMSksIE1hdGhVdGlscy5jbGFtcChyYy55IC0gMSwgMCwgZGltLnkgLSAxKSkgJiZcbiAgICAgICAgICAgICF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUoTWF0aFV0aWxzLmNsYW1wKHJjLnggLSAxLCAwLCBkaW0ueCAtIDEpLCBNYXRoVXRpbHMuY2xhbXAocmMueSAtIDEsIDAsIGRpbS55IC0gMSkpXG5cbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgZWRnZSB0byB0aGUgbGVmdFxuICAgICAgICAgICAgcmMgPSB0aGlzLndhbGxzLmdldFRpbGVDb2xSb3coaSArIDEpO1xuICAgICAgICAgICAgaWYgKChpICsgMSkgJSBkaW0ueCAhPT0gMCAmJiAhdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKHJjLngsIHJjLnkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ncmFwaC5hZGRFZGdlKGksIGkgKyAxKTtcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmFkZC5ncmFwaGljKEdyYXBoaWNUeXBlLkxJTkUsIFwiZ3JhcGhcIiwge3N0YXJ0OiB0aGlzLmdyYXBoLmdldE5vZGVQb3NpdGlvbihpKSwgZW5kOiB0aGlzLmdyYXBoLmdldE5vZGVQb3NpdGlvbihpICsgMSl9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ3JlYXRlIGVkZ2UgYmVsb3dcbiAgICAgICAgICAgIHJjID0gdGhpcy53YWxscy5nZXRUaWxlQ29sUm93KGkgKyBkaW0ueCk7XG4gICAgICAgICAgICBpZiAoaSArIGRpbS54IDwgdGhpcy5ncmFwaC5udW1WZXJ0aWNlcyAmJiAhdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKHJjLngsIHJjLnkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ncmFwaC5hZGRFZGdlKGksIGkgKyBkaW0ueCk7XG4gICAgICAgICAgICAgICAgLy8gdGhpcy5hZGQuZ3JhcGhpYyhHcmFwaGljVHlwZS5MSU5FLCBcImdyYXBoXCIsIHtzdGFydDogdGhpcy5ncmFwaC5nZXROb2RlUG9zaXRpb24oaSksIGVuZDogdGhpcy5ncmFwaC5nZXROb2RlUG9zaXRpb24oaSArIGRpbS54KX0pXG4gICAgICAgICAgICB9XG5cblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoaXMgZ3JhcGggYXMgYSBuYXZpZ2FibGUgZW50aXR5XG4gICAgbGV0IG5hdm1lc2ggPSBuZXcgTmF2bWVzaCh0aGlzLmdyYXBoKTtcbiAgICAvLyBBZGQgZGlmZmVyZW50IHN0cmF0ZWdpZXMgdG8gdXNlIGZvciB0aGlzIG5hdm1lc2hcbiAgICBuYXZtZXNoLnJlZ2lzdGVyU3RyYXRlZ3koXCJkaXJlY3RcIiwgbmV3IERpcmVjdFN0cmF0ZWd5KG5hdm1lc2gpKTtcbiAgICBuYXZtZXNoLnJlZ2lzdGVyU3RyYXRlZ3koXCJhc3RhclwiLCBuZXcgQXN0YXJTdHJhdGVneShuYXZtZXNoKSk7XG4gICAgLy8gU2VsZWN0IEEqIGFzIG91ciBuYXZpZ2F0aW9uIHN0cmF0ZWd5XG4gICAgbmF2bWVzaC5zZXRTdHJhdGVneShcImFzdGFyXCIpO1xuXG4gICAgLy8gQWRkIHRoaXMgbmF2bWVzaCB0byB0aGUgbmF2aWdhdGlvbiBtYW5hZ2VyXG4gICAgdGhpcy5uYXZNYW5hZ2VyLmFkZE5hdmlnYWJsZUVudGl0eShcIm5hdm1lc2hcIiwgbmF2bWVzaCk7XG59XG5cbnB1YmxpYyB1bmxvYWRTY2VuZSgpOiB2b2lkIHtcbiAgICAvLyBUaGUgc2NlbmUgaXMgYmVpbmcgZGVzdHJveWVkLCBzbyB3ZSBjYW4gc3RvcCBwbGF5aW5nIHRoZSBzb25nXG4gICAgdGhpcy5lbWl0dGVyLmZpcmVFdmVudChHYW1lRXZlbnRUeXBlLlNUT1BfU09VTkQsIHtrZXk6IHRoaXMubGV2ZWxNdXNpY0tleX0pO1xufVxuXG5cbiAgICBwdWJsaWMgZ2V0QmF0dGxlcnMoKTogQmF0dGxlcltdIHsgcmV0dXJuIHRoaXMuYmF0dGxlcnM7IH1cblxuICAgIHB1YmxpYyBnZXRXYWxscygpOiBPcnRob2dvbmFsVGlsZW1hcCB7IHJldHVybiB0aGlzLndhbGxzOyB9XG5cbiAgICBwdWJsaWMgZ2V0SGVhbHRocGFja3MoKTogSGVhbHRocGFja1tdIHsgcmV0dXJuIHRoaXMuaGVhbHRocGFja3M7IH1cblxuICAgIHB1YmxpYyBnZXRMYXNlckd1bnMoKTogTGFzZXJHdW5bXSB7IHJldHVybiB0aGlzLmxhc2VyZ3VuczsgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSBnaXZlbiB0YXJnZXQgcG9zaXRpb24gaXMgdmlzaWJsZSBmcm9tIHRoZSBnaXZlbiBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0gcG9zaXRpb24gXG4gICAgICogQHBhcmFtIHRhcmdldCBcbiAgICAgKiBAcmV0dXJucyBcbiAgICAgKi9cbiAgICBwdWJsaWMgaXNUYXJnZXRWaXNpYmxlKHBvc2l0aW9uOiBWZWMyLCB0YXJnZXQ6IFZlYzIpOiBib29sZWFuIHtcblxuICAgICAgICAvLyBHZXQgdGhlIG5ldyBwbGF5ZXIgbG9jYXRpb25cbiAgICAgICAgbGV0IHN0YXJ0ID0gcG9zaXRpb24uY2xvbmUoKTtcbiAgICAgICAgbGV0IGRlbHRhID0gdGFyZ2V0LmNsb25lKCkuc3ViKHN0YXJ0KTtcblxuICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggdGhlIHRpbGVtYXAgcmVnaW9uIHVudGlsIHdlIGZpbmQgYSBjb2xsaXNpb25cbiAgICAgICAgbGV0IG1pblggPSBNYXRoLm1pbihzdGFydC54LCB0YXJnZXQueCk7XG4gICAgICAgIGxldCBtYXhYID0gTWF0aC5tYXgoc3RhcnQueCwgdGFyZ2V0LngpO1xuICAgICAgICBsZXQgbWluWSA9IE1hdGgubWluKHN0YXJ0LnksIHRhcmdldC55KTtcbiAgICAgICAgbGV0IG1heFkgPSBNYXRoLm1heChzdGFydC55LCB0YXJnZXQueSk7XG5cbiAgICAgICAgLy8gR2V0IHRoZSB3YWxsIHRpbGVtYXBcbiAgICAgICAgbGV0IHdhbGxzID0gdGhpcy5nZXRXYWxscygpO1xuXG4gICAgICAgIGxldCBtaW5JbmRleCA9IHdhbGxzLmdldFRpbGVtYXBQb3NpdGlvbihtaW5YLCBtaW5ZKTtcbiAgICAgICAgbGV0IG1heEluZGV4ID0gd2FsbHMuZ2V0VGlsZW1hcFBvc2l0aW9uKG1heFgsIG1heFkpO1xuXG4gICAgICAgIGxldCB0aWxlU2l6ZSA9IHdhbGxzLmdldFNjYWxlZFRpbGVTaXplKCk7XG5cbiAgICAgICAgZm9yIChsZXQgY29sID0gbWluSW5kZXgueDsgY29sIDw9IG1heEluZGV4Lng7IGNvbCsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCByb3cgPSBtaW5JbmRleC55OyByb3cgPD0gbWF4SW5kZXgueTsgcm93KyspIHtcbiAgICAgICAgICAgICAgICBpZiAod2FsbHMuaXNUaWxlQ29sbGlkYWJsZShjb2wsIHJvdykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBwb3NpdGlvbiBvZiB0aGlzIHRpbGVcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRpbGVQb3MgPSBuZXcgVmVjMihjb2wgKiB0aWxlU2l6ZS54ICsgdGlsZVNpemUueCAvIDIsIHJvdyAqIHRpbGVTaXplLnkgKyB0aWxlU2l6ZS55IC8gMik7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgY29sbGlkZXIgZm9yIHRoaXMgdGlsZVxuICAgICAgICAgICAgICAgICAgICBsZXQgY29sbGlkZXIgPSBuZXcgQUFCQih0aWxlUG9zLCB0aWxlU2l6ZS5zY2FsZWQoMS80KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IGhpdCA9IGNvbGxpZGVyLmludGVyc2VjdFNlZ21lbnQoc3RhcnQsIGRlbHRhLCBWZWMyLlpFUk8pO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChoaXQgIT09IG51bGwgJiYgc3RhcnQuZGlzdGFuY2VTcVRvKGhpdC5wb3MpIDwgc3RhcnQuZGlzdGFuY2VTcVRvKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGhpdCBhIHdhbGwsIHdlIGNhbid0IHNlZSB0aGUgcGxheWVyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICB9XG5cbiAgICBcbn0iLCJpbXBvcnQgUG9zaXRpb25HcmFwaCBmcm9tIFwiLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL0dyYXBocy9Qb3NpdGlvbkdyYXBoXCI7XG5pbXBvcnQgQWN0b3IgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9JbnRlcmZhY2VzL0FjdG9yXCI7XG5pbXBvcnQgQUFCQiBmcm9tIFwiLi4vLi4vV29sZmllMkQvRGF0YVR5cGVzL1NoYXBlcy9BQUJCXCI7XG5pbXBvcnQgU2hhcGUgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9TaGFwZXMvU2hhcGVcIjtcbmltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IEdhbWVFdmVudCBmcm9tIFwiLi4vLi4vV29sZmllMkQvRXZlbnRzL0dhbWVFdmVudFwiO1xuaW1wb3J0IElucHV0IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9JbnB1dC9JbnB1dFwiO1xuaW1wb3J0IEdhbWVOb2RlIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9Ob2Rlcy9HYW1lTm9kZVwiO1xuaW1wb3J0IHsgR3JhcGhpY1R5cGUgfSBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvR3JhcGhpY3MvR3JhcGhpY1R5cGVzXCI7XG5pbXBvcnQgTGluZSBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvR3JhcGhpY3MvTGluZVwiO1xuaW1wb3J0IFNwcml0ZSBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvU3ByaXRlcy9TcHJpdGVcIjtcbmltcG9ydCBPcnRob2dvbmFsVGlsZW1hcCBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvVGlsZW1hcHMvT3J0aG9nb25hbFRpbGVtYXBcIjtcbmltcG9ydCBVSUVsZW1lbnQgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL05vZGVzL1VJRWxlbWVudFwiO1xuaW1wb3J0IEJ1dHRvbiBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvVUlFbGVtZW50cy9CdXR0b25cIjtcbmltcG9ydCB7IFVJRWxlbWVudFR5cGUgfSBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvVUlFbGVtZW50cy9VSUVsZW1lbnRUeXBlc1wiO1xuaW1wb3J0IE5hdm1lc2ggZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1BhdGhmaW5kaW5nL05hdm1lc2hcIjtcbmltcG9ydCBEaXJlY3RTdHJhdGVneSBmcm9tIFwiLi4vLi4vV29sZmllMkQvUGF0aGZpbmRpbmcvU3RyYXRlZ2llcy9EaXJlY3RTdHJhdGVneVwiO1xuaW1wb3J0IFJlbmRlcmluZ01hbmFnZXIgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1JlbmRlcmluZy9SZW5kZXJpbmdNYW5hZ2VyXCI7XG5pbXBvcnQgU2NlbmVNYW5hZ2VyIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9TY2VuZS9TY2VuZU1hbmFnZXJcIjtcbmltcG9ydCBWaWV3cG9ydCBmcm9tIFwiLi4vLi4vV29sZmllMkQvU2NlbmVHcmFwaC9WaWV3cG9ydFwiO1xuaW1wb3J0IFRpbWVyIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9UaW1pbmcvVGltZXJcIjtcbmltcG9ydCBDb2xvciBmcm9tIFwiLi4vLi4vV29sZmllMkQvVXRpbHMvQ29sb3JcIjtcbmltcG9ydCBNYXRoVXRpbHMgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL1V0aWxzL01hdGhVdGlsc1wiO1xuaW1wb3J0IE5QQ0FjdG9yIGZyb20gXCIuLi9BY3RvcnMvTlBDQWN0b3JcIjtcbmltcG9ydCBQbGF5ZXJBY3RvciBmcm9tIFwiLi4vQWN0b3JzL1BsYXllckFjdG9yXCI7XG5pbXBvcnQgR3VhcmRCZWhhdmlvciBmcm9tIFwiLi4vQUkvTlBDL05QQ0JlaGF2aW9yL0dhdXJkQmVoYXZpb3JcIjtcbmltcG9ydCBIZWFsZXJCZWhhdmlvciBmcm9tIFwiLi4vQUkvTlBDL05QQ0JlaGF2aW9yL0hlYWxlckJlaGF2aW9yXCI7XG5pbXBvcnQgUGxheWVyQUkgZnJvbSBcIi4uL0FJL1BsYXllci9QbGF5ZXJBSVwiO1xuaW1wb3J0IFBsYXllckNvbnRyb2xsZXIsIHsgUGxheWVySW5wdXQgfSBmcm9tIFwiLi4vQUkvUGxheWVyL1BsYXllckNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IEl0ZW1FdmVudCwgUGxheWVyRXZlbnQsIEJhdHRsZXJFdmVudCwgSHVkRXZlbnQgfSBmcm9tIFwiLi4vRXZlbnRzXCI7XG5pbXBvcnQgQmF0dGxlciBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvQmF0dGxlU3lzdGVtL0JhdHRsZXJcIjtcbmltcG9ydCBCYXR0bGVyQmFzZSBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvQmF0dGxlU3lzdGVtL0JhdHRsZXJCYXNlXCI7XG5pbXBvcnQgSGVhbHRoYmFySFVEIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9IVUQvSGVhbHRoYmFySFVEXCI7XG5pbXBvcnQgSW52ZW50b3J5SFVEIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9IVUQvSW52ZW50b3J5SFVEXCI7XG5pbXBvcnQgUGF1c2VIVUQgZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL0hVRC9QYXVzZUhVRFwiO1xuaW1wb3J0IEludmVudG9yeSBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvSXRlbVN5c3RlbS9JbnZlbnRvcnlcIjtcbmltcG9ydCBJdGVtIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9JdGVtU3lzdGVtL0l0ZW1cIjtcbmltcG9ydCBIZWFsdGhwYWNrIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9JdGVtU3lzdGVtL0l0ZW1zL0hlYWx0aHBhY2tcIjtcbmltcG9ydCBMYXNlckd1biBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvSXRlbVN5c3RlbS9JdGVtcy9MYXNlckd1blwiO1xuaW1wb3J0IHsgQ2xvc2VzdFBvc2l0aW9uZWQgfSBmcm9tIFwiLi4vR2FtZVN5c3RlbXMvU2VhcmNoaW5nL0hXNFJlZHVjZXJzXCI7XG5pbXBvcnQgQmFzaWNUYXJnZXRhYmxlIGZyb20gXCIuLi9HYW1lU3lzdGVtcy9UYXJnZXRpbmcvQmFzaWNUYXJnZXRhYmxlXCI7XG5pbXBvcnQgUG9zaXRpb24gZnJvbSBcIi4uL0dhbWVTeXN0ZW1zL1RhcmdldGluZy9Qb3NpdGlvblwiO1xuaW1wb3J0IEFzdGFyU3RyYXRlZ3kgZnJvbSBcIi4uL1BhdGhmaW5kaW5nL0FzdGFyU3RyYXRlZ3lcIjtcbmltcG9ydCBHYW1lT3ZlciBmcm9tIFwiLi9HYW1lT3ZlclwiO1xuLy8gaW1wb3J0IEhXNFNjZW5lIGZyb20gXCIuL0hXNFNjZW5lXCI7XG4vLyBpbXBvcnQgTWFpbk1lbnUgZnJvbSBcIi4vTWFpbk1lbnVcIjtcbi8vIGltcG9ydCBMZXZlbFNlbGVjdGlvblNjZW5lIGZyb20gXCIuL0xldmVsU2VsZWN0aW9uU2NlbmVcIjtcbi8vIGltcG9ydCB7IEdhbWVFdmVudFR5cGUgfSBmcm9tIFwiLi4vLi4vV29sZmllMkQvRXZlbnRzL0dhbWVFdmVudFR5cGVcIjtcbi8vIGltcG9ydCB0ZXN0SFc0U2NlbmUgZnJvbSBcIi4vRmluYWxQcm9qZWN0U2NlbmVcIjtcbmltcG9ydCBGaW5hbFByb2plY3RTY2VuZSBmcm9tIFwiLi9GaW5hbFByb2plY3RTY2VuZVwiO1xuLy8gaW1wb3J0IHRlc3RNYWluU2NlbmUgZnJvbSBcIi4vdGVzdG1haW5cIjtcbmltcG9ydCBIVzRTY2VuZSBmcm9tIFwiLi9IVzRTY2VuZVwiO1xuaW1wb3J0IExldmVsU2VsZWN0aW9uU2NlbmUgZnJvbSBcIi4vTGV2ZWxTZWxlY3Rpb25TY2VuZVwiO1xuaW1wb3J0IE1haW5NZW51IGZyb20gXCIuL01haW5NZW51XCI7XG5pbXBvcnQgTGV2ZWwxU2NlbmUgZnJvbSBcIi4vTGV2ZWwxU2NlbmVcIjtcbmltcG9ydCBMYXN0U2NlbmUgZnJvbSBcIi4vTGFzdFNjZW5lXCI7XG5pbXBvcnQgTGV2ZWwyU2NlbmUgZnJvbSBcIi4vTGV2ZWwyU2NlbmVcIjtcbmltcG9ydCBMZXZlbDNTY2VuZSBmcm9tIFwiLi9MZXZlbDNTY2VuZVwiO1xuaW1wb3J0IExldmVsNFNjZW5lIGZyb20gXCIuL0xldmVsNFNjZW5lXCI7XG5pbXBvcnQgdGVzdE1lbnUgZnJvbSBcIi4vTWFpbk1lbnVcIjtcbmltcG9ydCB7IEdhbWVFdmVudFR5cGUgfSBmcm9tIFwiLi4vLi4vV29sZmllMkQvRXZlbnRzL0dhbWVFdmVudFR5cGVcIjtcblxuXG5jb25zdCBCYXR0bGVyR3JvdXBzID0ge1xuICAgIFJFRDogMSxcbiAgICBCTFVFOiAyXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgY29uc3QgTGV2ZWw1U2NlbmVMYXllcnMgPSB7XG5cdFBSSU1BUlk6IFwiUFJJTUFSWVwiLFxuXHRCQUNLR1JPVU5EOiBcIkJBQ0tHUk9VTkRcIiwgXG5cdFVJOiBcIlVJXCIsXG4gICAgUEFVU0U6IFwiUEFVU0VcIixcbiAgICBDT05UUk9MUzogXCJDT05UUk9MU1wiLFxuICAgIEhFTFA6IFwiSEVMUFwiLFxuICAgIENPTVBMRVRFOiBcIkNPTVBMRVRFXCJcbn0gYXMgY29uc3Q7XG5cblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMZXZlbDVTY2VuZSBleHRlbmRzIEhXNFNjZW5lIHtcblxuICAgIC8qKiBHYW1lU3lzdGVtcyBpbiB0aGUgSFczIFNjZW5lICovXG4gICAgLy8gcHJpdmF0ZSBpbnZlbnRvcnlIdWQ6IEludmVudG9yeUhVRDtcblxuICAgIC8qKiBBbGwgdGhlIGJhdHRsZXJzIGluIHRoZSBIVzNTY2VuZSAoaW5jbHVkaW5nIHRoZSBwbGF5ZXIpICovXG4gICAgcHJvdGVjdGVkIGJhdHRsZXJzOiAoQmF0dGxlciAmIEFjdG9yKVtdO1xuICAgIC8qKiBIZWFsdGhiYXJzIGZvciB0aGUgYmF0dGxlcnMgKi9cbiAgICBwcm90ZWN0ZWQgaGVhbHRoYmFyczogTWFwPG51bWJlciwgSGVhbHRoYmFySFVEPjtcblxuICAgIHByb3RlY3RlZCBwbGF5ZXI6IChQbGF5ZXJBY3RvcilbXTtcbiAgICBwcm90ZWN0ZWQgZW5lbWllczogKE5QQ0FjdG9yKVtdO1xuXG4gICAgcHJvdGVjdGVkIGJvc3M6IE5QQ0FjdG9yO1xuICAgIFxuICAgIC8vIHByb3RlY3RlZCBzaG9vdEF1ZGlvS2V5OiBzdHJpbmc7XG4gICAgLy8gcHJvdGVjdGVkIGhpdEF1ZGlvS2V5OiBzdHJpbmc7XG5cbiAgICAvL3ByaXZhdGUgem9vbUJvb2wgPSBmYWxzZTtcblxuICAgIC8vIHByb3RlY3RlZCBzaG9vdEF1ZGlvS2V5OiBzdHJpbmc7XG5cbiAgICBwcm90ZWN0ZWQgbGV2ZWxNdXNpY0tleTogc3RyaW5nO1xuXG4gICAgcHJvdGVjdGVkIGJhc2VzOiBCYXR0bGVyQmFzZVtdO1xuXG4gICAgcHJvdGVjdGVkIGhlYWx0aHBhY2tzOiBBcnJheTxIZWFsdGhwYWNrPjtcbiAgICBwcm90ZWN0ZWQgbGFzZXJndW5zOiBBcnJheTxMYXNlckd1bj47XG5cbiAgICAvLyBUaGUgd2FsbCBsYXllciBvZiB0aGUgdGlsZW1hcFxuICAgIHByb3RlY3RlZCB3YWxsczogT3J0aG9nb25hbFRpbGVtYXA7XG5cbiAgICAvLyBUaGUgcG9zaXRpb24gZ3JhcGggZm9yIHRoZSBuYXZtZXNoXG4gICAgcHJvdGVjdGVkIGdyYXBoOiBQb3NpdGlvbkdyYXBoO1xuXG4gICAgcHJvdGVjdGVkIHBhdXNlSW1hZ2U6IFNwcml0ZTtcbiAgICBwcm90ZWN0ZWQgaGVscEltYWdlOiBTcHJpdGU7XG4gICAgcHJvdGVjdGVkIGNvbnRyb2xzSW1hZ2U6IFNwcml0ZTtcbiAgICBwcm90ZWN0ZWQgY29tcGxldGVJbWFnZTogU3ByaXRlO1xuXG4gICAgcHJvdGVjdGVkIGJvc3NMb2NhdGlvbjogVmVjMjtcblxuICAgIHB1YmxpYyBzdGF0aWMgUEFVU0VfS0VZID0gXCJQQVVTRVwiO1xuICAgIHB1YmxpYyBzdGF0aWMgUEFVU0VfUEFUSCA9IFwiaHc0X2Fzc2V0cy9zcHJpdGVzL1BhdXNlZC1TY3JlZW4ucG5nXCI7XG5cbiAgICBwdWJsaWMgc3RhdGljIEhFTFBfS0VZID0gXCJIRUxQXCI7XG4gICAgcHVibGljIHN0YXRpYyBIRUxQX1BBVEggPSBcImh3NF9hc3NldHMvc3ByaXRlcy9IZWxwLVNjcmVlbi5wbmdcIjtcblxuXG4gICAgcHVibGljIHN0YXRpYyBDT05UUk9MU19LRVkgPSBcIkNPTlRST0xTXCJcbiAgICBwdWJsaWMgc3RhdGljIENPTlRST0xTX1BBVEggPSBcImh3NF9hc3NldHMvc3ByaXRlcy9Db250cm9scy1TY3JlZW4ucG5nXCJcblxuICAgIHB1YmxpYyBzdGF0aWMgQ09NUExFVEVfS0VZID0gXCJDT01QTEVURVwiXG4gICAgcHVibGljIHN0YXRpYyBDT01QTEVURV9QQVRIID0gXCJodzRfYXNzZXRzL3Nwcml0ZXMvTGV2ZWwtQ29tcGxldGUucG5nXCJcblxuICAgXG4gICAgcHVibGljIHN0YXRpYyBTSE9PVF9BVURJT19LRVkgPSBcIlBMQVlFUl9TSE9PVFwiXG4gICAgcHVibGljIHN0YXRpYyBTSE9PVF9BVURJT19QQVRIID0gXCJodzRfYXNzZXRzL3NvdW5kcy9sYXNlclNob290LndhdlwiXG5cbiAgICBwdWJsaWMgc3RhdGljIEhJVF9BVURJT19LRVkgPSBcIlBMQVlFUl9ISVRcIlxuICAgIHB1YmxpYyBzdGF0aWMgSElUX0FVRElPX1BBVEggPSBcImh3NF9hc3NldHMvc291bmRzL2hpdC53YXZcIlxuXG4gICAgcHVibGljIHN0YXRpYyBEWUlOR19BVURJT19LRVkgPSBcIlBMQVlFUl9EWUlOR1wiXG4gICAgcHVibGljIHN0YXRpYyBEWUlOR19BVURJT19QQVRIID0gXCJodzRfYXNzZXRzL3NvdW5kcy9keWluZy53YXZcIlxuXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBMRVZFTF9NVVNJQ19LRVkgPSBcIkxFVkVMX01VU0lDXCI7XG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBMRVZFTF9NVVNJQ19QQVRIID0gXCJodzRfYXNzZXRzL211c2ljL01haW5HYW1lTXVzaWMud2F2XCI7XG5cblxuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHZpZXdwb3J0OiBWaWV3cG9ydCwgc2NlbmVNYW5hZ2VyOiBTY2VuZU1hbmFnZXIsIHJlbmRlcmluZ01hbmFnZXI6IFJlbmRlcmluZ01hbmFnZXIsIG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIGFueT4pIHtcbiAgICAgICAgc3VwZXIodmlld3BvcnQsIHNjZW5lTWFuYWdlciwgcmVuZGVyaW5nTWFuYWdlciwgb3B0aW9ucyk7XG5cbiAgICAgICAgdGhpcy5iYXR0bGVycyA9IG5ldyBBcnJheTxCYXR0bGVyICYgQWN0b3I+KCk7XG4gICAgICAgIHRoaXMuaGVhbHRoYmFycyA9IG5ldyBNYXA8bnVtYmVyLCBIZWFsdGhiYXJIVUQ+KCk7XG4gICAgICAgIHRoaXMucGxheWVyID0gbmV3IEFycmF5PFBsYXllckFjdG9yPigpO1xuICAgICAgICB0aGlzLmVuZW1pZXMgPSBuZXcgQXJyYXk8TlBDQWN0b3I+KCk7XG4gICBcblxuICAgICAgICB0aGlzLmxhc2VyZ3VucyA9IG5ldyBBcnJheTxMYXNlckd1bj4oKTtcbiAgICAgICAgdGhpcy5oZWFsdGhwYWNrcyA9IG5ldyBBcnJheTxIZWFsdGhwYWNrPigpO1xuXG4gICAgICAgIHRoaXMuc2hvb3RBdWRpb0tleSA9IExldmVsNVNjZW5lLlNIT09UX0FVRElPX0tFWTtcbiAgICAgICAgdGhpcy5oaXRBdWRpb0tleSA9IExldmVsNVNjZW5lLkhJVF9BVURJT19LRVk7XG4gICAgICAgIHRoaXMuZHlpbmdBdWRpb0tleSA9IExldmVsNVNjZW5lLkRZSU5HX0FVRElPX0tFWTtcbiAgICAgICAgdGhpcy5sZXZlbE11c2ljS2V5ID0gTGV2ZWw1U2NlbmUuTEVWRUxfTVVTSUNfS0VZO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBzZWUgU2NlbmUudXBkYXRlKClcbiAgICAgKi9cbiAgICBwdWJsaWMgb3ZlcnJpZGUgbG9hZFNjZW5lKCkge1xuXG5cbiAgICAgICAgLy8gTG9hZCB0aGUgcGxheWVyIGFuZCBlbmVteSBzcHJpdGVzaGVldHNcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KFwicGxheWVyMVwiLCBcImh3NF9hc3NldHMvc3ByaXRlc2hlZXRzL1dhcmJhbGxfMDAxX0x1a2FzLmpzb25cIik7XG5cbiAgICAgICAgLy8gTG9hZCBpbiB0aGUgZW5lbXkgc3ByaXRlc1xuICAgICAgICB0aGlzLmxvYWQuc3ByaXRlc2hlZXQoXCJCbHVlRW5lbXlcIiwgXCJodzRfYXNzZXRzL3Nwcml0ZXNoZWV0cy9OZW8uanNvblwiKTtcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KFwiUmVkRW5lbXlcIiwgXCJodzRfYXNzZXRzL3Nwcml0ZXNoZWV0cy9OZW8uanNvblwiKTtcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KFwiQmx1ZUhlYWxlclwiLCBcImh3NF9hc3NldHMvc3ByaXRlc2hlZXRzL05lby5qc29uXCIpO1xuICAgICAgICB0aGlzLmxvYWQuc3ByaXRlc2hlZXQoXCJSZWRIZWFsZXJcIiwgXCJodzRfYXNzZXRzL3Nwcml0ZXNoZWV0cy9OZW8uanNvblwiKTtcblxuICAgICAgICAvLyBMb2FkIHRoZSB0aWxlbWFwXG4gICAgICAgIHRoaXMubG9hZC50aWxlbWFwKFwibGV2ZWxcIiwgXCJodzRfYXNzZXRzL3RpbGVtYXBzL0xldmVsNVRpbGVtYXAuanNvblwiKTtcblxuICAgICAgICAvLyBMb2FkIHRoZSBlbmVteSBsb2NhdGlvbnNcbiAgICAgICAgLy8gdGhpcy5sb2FkLm9iamVjdChcInJlZFwiLCBcImh3NF9hc3NldHMvZGF0YS9lbmVtaWVzL2x2bDIuanNvblwiKTtcbiAgICAgICAgdGhpcy5sb2FkLm9iamVjdChcImJsdWVcIiwgXCJodzRfYXNzZXRzL2RhdGEvZW5lbWllcy9sdmw1Lmpzb25cIik7XG5cbiAgICAgICAgLy8gTG9hZCB0aGUgaGVhbHRocGFjayBhbmQgbGFzZXJndW4gbG9hY3Rpb25zXG4gICAgICAgIHRoaXMubG9hZC5vYmplY3QoXCJoZWFsdGhwYWNrc1wiLCBcImh3NF9hc3NldHMvZGF0YS9pdGVtcy9oZWFsdGhwYWNrcy5qc29uXCIpO1xuICAgICAgICB0aGlzLmxvYWQub2JqZWN0KFwibGFzZXJndW5zXCIsIFwiaHc0X2Fzc2V0cy9kYXRhL2l0ZW1zL2xhc2VyZ3Vucy5qc29uXCIpO1xuXG4gICAgICAgIC8vIExvYWQgdGhlIGhlYWx0aHBhY2ssIGludmVudG9yeSBzbG90LCBhbmQgbGFzZXIgZ3VuIHNwcml0ZXNcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKFwiaGVhbHRocGFja1wiLCBcImh3NF9hc3NldHMvc3ByaXRlcy9oZWFsdGhwYWNrLnBuZ1wiKTtcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKFwiaW52ZW50b3J5U2xvdFwiLCBcImh3NF9hc3NldHMvc3ByaXRlcy9pbnZlbnRvcnkucG5nXCIpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoXCJsYXNlckd1blwiLCBcImh3NF9hc3NldHMvc3ByaXRlcy9sYXNlckd1bi5wbmdcIik7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShMZXZlbDVTY2VuZS5QQVVTRV9LRVksIExldmVsNVNjZW5lLlBBVVNFX1BBVEgpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoTGV2ZWw1U2NlbmUuSEVMUF9LRVksIExldmVsNVNjZW5lLkhFTFBfUEFUSCk7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShMZXZlbDVTY2VuZS5DT05UUk9MU19LRVksIExldmVsNVNjZW5lLkNPTlRST0xTX1BBVEgpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoTGV2ZWw1U2NlbmUuQ09NUExFVEVfS0VZLCBMZXZlbDVTY2VuZS5DT01QTEVURV9QQVRIKTtcblxuICAgICAgICB0aGlzLmxvYWQuYXVkaW8odGhpcy5zaG9vdEF1ZGlvS2V5LCBMZXZlbDVTY2VuZS5TSE9PVF9BVURJT19QQVRIKTtcbiAgICAgICAgdGhpcy5sb2FkLmF1ZGlvKHRoaXMuaGl0QXVkaW9LZXksIExldmVsNVNjZW5lLkhJVF9BVURJT19QQVRIKTtcbiAgICAgICAgdGhpcy5sb2FkLmF1ZGlvKHRoaXMuZHlpbmdBdWRpb0tleSwgTGV2ZWw1U2NlbmUuRFlJTkdfQVVESU9fUEFUSCk7XG4gICAgICAgIHRoaXMubG9hZC5hdWRpbyh0aGlzLmxldmVsTXVzaWNLZXksIExldmVsNVNjZW5lLkxFVkVMX01VU0lDX1BBVEgpO1xuXG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBzdGFydFNjZW5lKCkge1xuICAgICAgICAvLyBzdXBlci5zdGFydFNjZW5lKCk7XG4gICAgICAgIC8vIFxuXG4gICAgICAgIGNvbnN0IGNlbnRlciA9IHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCk7XG5cbiAgICAgICAgXG5cbiAgICAgICAgLy8gdGhpcy5hZGRMYXllcihNYWluU2NlbmVMYXllcnMuVUksICk7XG4gICAgICAgIC8vIHRoaXMuYWRkTGF5ZXIoTWFpblNjZW5lTGF5ZXJzLlBBVVNFLCA1KTtcbiAgICAgICAgLy8gbGV0IHYgPSB0aGlzLmdldExheWVyKFwiVUlcIik7XG4gICAgICAgIFxuICAgICAgICBcblxuICAgICAgICAvLyBBZGQgaW4gdGhlIHRpbGVtYXBcbiAgICAgICAgbGV0IHRpbGVtYXBMYXllcnMgPSB0aGlzLmFkZC50aWxlbWFwKFwibGV2ZWxcIik7XG5cbiAgICAgICAgLy8gR2V0IHRoZSB3YWxsIGxheWVyXG4gICAgICAgIHRoaXMud2FsbHMgPSA8T3J0aG9nb25hbFRpbGVtYXA+dGlsZW1hcExheWVyc1sxXS5nZXRJdGVtcygpWzBdO1xuXG4gICAgICAgIC8vIFNldCB0aGUgdmlld3BvcnQgYm91bmRzIHRvIHRoZSB0aWxlbWFwXG4gICAgICAgIGxldCB0aWxlbWFwU2l6ZTogVmVjMiA9IHRoaXMud2FsbHMuc2l6ZTtcblxuICAgICAgICB0aGlzLnZpZXdwb3J0LnNldEJvdW5kcygwLCAwLCB0aWxlbWFwU2l6ZS54LCB0aWxlbWFwU2l6ZS55KTtcbiAgICBcbiAgICAgICAgLy8gXG5cbiAgICAgICAgdGhpcy5pbml0TGF5ZXJzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgdGhlIHBsYXllclxuICAgICAgICB0aGlzLmluaXRpYWxpemVQbGF5ZXIoKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplSXRlbXMoKTtcblxuICAgICAgICB0aGlzLmluaXRpYWxpemVOYXZtZXNoKCk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBOUENTXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZU5QQ3MoKTtcblxuICAgICAgICAvLyBTdWJzY3JpYmUgdG8gcmVsZXZhbnQgZXZlbnRzXG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFwiaGVhbHRocGFja1wiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJlbmVteURpZWRcIik7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKEl0ZW1FdmVudC5JVEVNX1JFUVVFU1QpO1xuXG4gICAgXG5cbiAgICAgICAgLy8gQWRkIGEgVUkgZm9yIGhlYWx0aFxuICAgICAgICB0aGlzLmFkZFVJTGF5ZXIoXCJoZWFsdGhcIik7XG5cbiAgICAgICAgLy8gUGF1c2UgQnV0dG9uIChOb3QgbmVlZGVkIGp1c3QgcHJlc3MgZXNjYXBlKVxuICAgICAgICAvLyBsZXQgcGF1c2UgPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIE1haW5TY2VuZUxheWVycy5VSSwge3Bvc2l0aW9uOiBuZXcgVmVjMihjZW50ZXIueCArIDYwMCwgY2VudGVyLnkgLSA0MDApLCB0ZXh0OiBcIlBhdXNlXCJ9KTtcbiAgICAgICAgLy8gcGF1c2Uuc2l6ZS5zZXQoMTAwLCA1MCk7XG4gICAgICAgIC8vIHBhdXNlLmJvcmRlcldpZHRoID0gMjtcbiAgICAgICAgLy8gcGF1c2UuYm9yZGVyQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgLy8gcGF1c2UuYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIC8vIHBhdXNlLm9uQ2xpY2tFdmVudElkID0gXCJwYXVzZVwiO1xuXG4gICAgICAgIC8vIHRoaXMucGF1c2VNZW51ID0gcGF1c2U7XG5cbiAgICAgICAgLy8gVE9ETyBNYWtlIHRleHQgbW92ZSB3aXRoIGJ1dHRvblxuXG4gICAgICAgIC8vIGxldCBwYXVzZUJhciA9IG5ldyBQYXVzZUhVRCh0aGlzLCBwYXVzZSwgY2VudGVyKTtcbiAgICAgICAgLy8gdGhpcy5wYXVzZSA9IHBhdXNlQmFyO1xuXG5cbiAgICAgICAgbGV0IHBhdXNlTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiUEFVU0VcIik7XG5cbiAgICAgICAgdGhpcy5wYXVzZUltYWdlID0gdGhpcy5hZGQuc3ByaXRlKExldmVsNVNjZW5lLlBBVVNFX0tFWSwgcGF1c2VMYXllci5nZXROYW1lKCkpO1xuICAgICAgICB0aGlzLnBhdXNlSW1hZ2UucG9zaXRpb24uY29weSh0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTtcbiAgICAgICAgLy8gdGhpcy5wYXVzZUltYWdlLmFscGhhID0gMC43O1xuXG4gICAgICAgIGNvbnN0IHVucGF1c2UgPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIExldmVsNVNjZW5lTGF5ZXJzLlBBVVNFLCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54IC0gNSwgY2VudGVyLnkgLSAyMTApLCB0ZXh0OiBcIlwifSk7XG4gICAgICAgIHVucGF1c2Uuc2l6ZS5zZXQoNDAwLCAxMDApO1xuICAgICAgICB1bnBhdXNlLmJvcmRlcldpZHRoID0gMjtcbiAgICAgICAgdW5wYXVzZS5ib3JkZXJDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICB1bnBhdXNlLmJhY2tncm91bmRDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICB1bnBhdXNlLm9uQ2xpY2tFdmVudElkID0gXCJ1bnBhdXNlXCI7XG5cbiAgICAgICAgY29uc3QgbWFpbk1lbnUgPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIExldmVsNVNjZW5lTGF5ZXJzLlBBVVNFLCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54IC0gNSwgY2VudGVyLnkgKyAyMjMpLCB0ZXh0OiBcIlwifSk7XG4gICAgICAgIG1haW5NZW51LnNpemUuc2V0KDQwMCwgMTAwKTtcbiAgICAgICAgbWFpbk1lbnUuYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICBtYWluTWVudS5ib3JkZXJDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBtYWluTWVudS5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgbWFpbk1lbnUub25DbGlja0V2ZW50SWQgPSBcIm1haW5tZW51XCI7XG5cbiAgICAgICAgY29uc3QgY29udHJvbHNCdXR0b24gPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIExldmVsNVNjZW5lTGF5ZXJzLlBBVVNFLCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54IC0gNSwgY2VudGVyLnkgLSA2NSksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgY29udHJvbHNCdXR0b24uc2l6ZS5zZXQoNDAwLCAxMDApO1xuICAgICAgICBjb250cm9sc0J1dHRvbi5ib3JkZXJXaWR0aCA9IDI7XG4gICAgICAgIGNvbnRyb2xzQnV0dG9uLmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIGNvbnRyb2xzQnV0dG9uLmJhY2tncm91bmRDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBjb250cm9sc0J1dHRvbi5vbkNsaWNrRXZlbnRJZCA9IFwiY29udHJvbHNcIjtcblxuICAgICAgICBjb25zdCBoZWxwQnV0dG9uID0gdGhpcy5hZGQudWlFbGVtZW50KFVJRWxlbWVudFR5cGUuQlVUVE9OLCBMZXZlbDVTY2VuZUxheWVycy5QQVVTRSwge3Bvc2l0aW9uOiBuZXcgVmVjMihjZW50ZXIueCAtIDUsIGNlbnRlci55ICsgODApLCB0ZXh0OiBcIlwifSk7XG4gICAgICAgIGhlbHBCdXR0b24uc2l6ZS5zZXQoNDAwLCAxMDApXG4gICAgICAgIGhlbHBCdXR0b24uYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICBoZWxwQnV0dG9uLmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIGhlbHBCdXR0b24uYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIGhlbHBCdXR0b24ub25DbGlja0V2ZW50SWQgPSBcImhlbHBcIjtcbiAgICAgICAgXG5cbiAgICAgICAgcGF1c2VMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgICAgIHBhdXNlTGF5ZXIuc2V0SGlkZGVuKHRydWUpO1xuXG4gICAgICAgXG4gICAgICAgIGxldCBjb250cm9sc0xheWVyID0gdGhpcy5nZXRMYXllcihcIkNPTlRST0xTXCIpO1xuXG4gICAgICAgIHRoaXMuY29udHJvbHNJbWFnZSA9IHRoaXMuYWRkLnNwcml0ZShMZXZlbDVTY2VuZS5DT05UUk9MU19LRVksIGNvbnRyb2xzTGF5ZXIuZ2V0TmFtZSgpKTtcbiAgICAgICAgdGhpcy5jb250cm9sc0ltYWdlLnBvc2l0aW9uLmNvcHkodGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKSk7XG4gICAgICAgIC8vIHRoaXMuY29udHJvbHNJbWFnZS5hbHBoYSA9IDAuNTtcblxuICAgICAgICBjb25zdCBjb250cm9sc0JhY2tCdXR0b24gPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIExldmVsNVNjZW5lTGF5ZXJzLkNPTlRST0xTLCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54IC0gNTk1LCBjZW50ZXIueSArIDQxNSksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgY29udHJvbHNCYWNrQnV0dG9uLnNpemUuc2V0KDIwMCwgNTApO1xuICAgICAgICBjb250cm9sc0JhY2tCdXR0b24uYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICBjb250cm9sc0JhY2tCdXR0b24uYm9yZGVyQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgY29udHJvbHNCYWNrQnV0dG9uLmJhY2tncm91bmRDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBjb250cm9sc0JhY2tCdXR0b24ub25DbGlja0V2ZW50SWQgPSBcImJhY2tjb250cm9sc1wiO1xuXG4gICAgICAgIGNvbnRyb2xzTGF5ZXIuc2V0UGF1c2VkKHRydWUpO1xuICAgICAgICBjb250cm9sc0xheWVyLnNldEhpZGRlbih0cnVlKTtcblxuICAgICAgICAvLyBcbiAgICAgICAgbGV0IGhlbHBMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJIRUxQXCIpO1xuXG4gICAgICAgIHRoaXMuaGVscEltYWdlID0gdGhpcy5hZGQuc3ByaXRlKExldmVsNVNjZW5lLkhFTFBfS0VZLCBoZWxwTGF5ZXIuZ2V0TmFtZSgpKTtcbiAgICAgICAgdGhpcy5oZWxwSW1hZ2UucG9zaXRpb24uY29weSh0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTtcbiAgICAgICAgLy8gdGhpcy5oZWxwSW1hZ2UuYWxwaGEgPSAwLjU7XG5cbiAgICAgICAgY29uc3QgaGVscEJhY2tCdXR0b24gPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIExldmVsNVNjZW5lTGF5ZXJzLkhFTFAsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLnggLSA1OTUsIGNlbnRlci55ICsgNDE1KSwgdGV4dDogXCJcIn0pO1xuICAgICAgICBoZWxwQmFja0J1dHRvbi5zaXplLnNldCgyMDAsIDUwKTtcbiAgICAgICAgaGVscEJhY2tCdXR0b24uYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICBoZWxwQmFja0J1dHRvbi5ib3JkZXJDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBoZWxwQmFja0J1dHRvbi5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgaGVscEJhY2tCdXR0b24ub25DbGlja0V2ZW50SWQgPSBcImhlbHBjb250cm9sc1wiO1xuXG4gICAgICAgIGhlbHBMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgICAgIGhlbHBMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG5cbiAgICAgICAgbGV0IGNvbXBsZXRlTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiQ09NUExFVEVcIik7XG5cbiAgICAgICAgdGhpcy5jb21wbGV0ZUltYWdlID0gdGhpcy5hZGQuc3ByaXRlKEZpbmFsUHJvamVjdFNjZW5lLkNPTVBMRVRFX0tFWSwgY29tcGxldGVMYXllci5nZXROYW1lKCkpO1xuICAgICAgICB0aGlzLmNvbXBsZXRlSW1hZ2UucG9zaXRpb24uY29weSh0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTtcblxuICAgICAgICBjb25zdCBjb21wbGV0ZUJ1dHRvbiA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTGV2ZWw1U2NlbmVMYXllcnMuQ09NUExFVEUsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLngsIGNlbnRlci55ICsgNDc1KSwgdGV4dDogXCJcIn0pO1xuICAgICAgICBjb21wbGV0ZUJ1dHRvbi5zaXplLnNldCgxMzIwLCAyMDAwKTtcbiAgICAgICAgY29tcGxldGVCdXR0b24uYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICBjb21wbGV0ZUJ1dHRvbi5ib3JkZXJDb2xvciA9IENvbG9yLldISVRFO1xuICAgICAgICBjb21wbGV0ZUJ1dHRvbi5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgY29tcGxldGVCdXR0b24ub25DbGlja0V2ZW50SWQgPSBcIm5leHRsdmxcIjtcblxuICAgICAgICBjb21wbGV0ZUxheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICAgICAgY29tcGxldGVMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG5cblxuICAgICAgICAvLyB0aGlzLnBhdXNlTWVudSA9IHVucGF1c2U7XG5cbiAgICAgICAgLy8gbGV0IHZhbCA9IHRoaXMubGF5ZXJzO1xuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHZhbCk7XG5cbiAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMyk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShQbGF5ZXJFdmVudC5QTEFZRVJfS0lMTEVEKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoQmF0dGxlckV2ZW50LkJBVFRMRVJfS0lMTEVEKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoQmF0dGxlckV2ZW50LkJBVFRMRVJfUkVTUEFXTik7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFwicGF1c2VcIik7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFwidW5wYXVzZVwiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJtYWlubWVudVwiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJjb250cm9sc1wiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJoZWxwXCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcImJhY2tjb250cm9sc1wiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJoZWxwY29udHJvbHNcIik7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFwibmV4dGx2bFwiKTtcblxuICAgICAgICB0aGlzLmVtaXR0ZXIuZmlyZUV2ZW50KEdhbWVFdmVudFR5cGUuUExBWV9TT1VORCwge2tleTogdGhpcy5sZXZlbE11c2ljS2V5LCBsb29wOiB0cnVlLCBob2xkUmVmZXJlbmNlOiB0cnVlfSk7XG4gICAgICAgIC8vIHRoaXMuZW1pdHRlci5maXJlRXZlbnQoR2FtZUV2ZW50VHlwZS5QTEFZX1NPVU5ELCB7a2V5OiB0aGlzLmdldFNob290QXVkaW9LZXkoKSwgbG9vcDogZmFsc2UsIGhvbGRSZWZlcmVuY2U6IGZhbHNlfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHNlZSBTY2VuZS51cGRhdGVTY2VuZVxuICAgICAqL1xuICBwdWJsaWMgb3ZlcnJpZGUgdXBkYXRlU2NlbmUoZGVsdGFUOiBudW1iZXIpOiB2b2lkIHtcbiAgICB3aGlsZSAodGhpcy5yZWNlaXZlci5oYXNOZXh0RXZlbnQoKSkge1xuICAgICAgICB0aGlzLmhhbmRsZUV2ZW50KHRoaXMucmVjZWl2ZXIuZ2V0TmV4dEV2ZW50KCkpO1xuICAgIH1cbiAgICAvLyB0aGlzLmludmVudG9yeUh1ZC51cGRhdGUoZGVsdGFUKTtcbiAgICB0aGlzLmhlYWx0aGJhcnMuZm9yRWFjaChoZWFsdGhiYXIgPT4gaGVhbHRoYmFyLnVwZGF0ZShkZWx0YVQpKTtcbiAgICAvLyB0aGlzLnBhdXNlLnNldENlbnRlcih0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTtcbiAgICAvLyB0aGlzLnBhdXNlTWVudS51cGRhdGUoZGVsdGFUKTtcbiAgICAvLyB0aGlzLnBhdXNlLnVwZGF0ZShkZWx0YVQpO1xuXG4gICAgaWYgKElucHV0LmlzS2V5SnVzdFByZXNzZWQoXCJlc2NhcGVcIikpe1xuICAgIFxuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiRXNjYXBlIHByZXNzZWRcIik7XG4gICAgICAgIGxldCB2ID0gbmV3IEdhbWVFdmVudChcInBhdXNlXCIsIG51bGwpO1xuICAgICAgICB0aGlzLmhhbmRsZUV2ZW50KHYpO1xuICAgIH1cbiAgICBpZiAodGhpcy5ib3NzLmhlYWx0aCA8PSAwKSB7XG4gICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICB0aGlzLnVucGF1c2VDb21wbGV0ZUxheWVyKCk7XG5cbiAgICAgICAgdGhpcy5wbGF5ZXJbMF0uZnJlZXplKCk7IC8vIEZyZWV6ZXMgcGxheWVyXG4gICAgICAgIHRoaXMucGxheWVyWzBdLmRpc2FibGVQaHlzaWNzKCk7XG4gICAgICAgIHRoaXMucGxheWVyWzBdLmFpQWN0aXZlID0gZmFsc2U7XG4gICAgICAgIFxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5lbmVtaWVzLmxlbmd0aDsgaSsrKXsgLy8gRnJlZXplcyBlbmVtaWVzIFxuICAgICAgICAgICAgaWYodGhpcy5lbmVtaWVzW2ldLmJhdHRsZXJBY3RpdmUgPT0gdHJ1ZSl7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmVtaWVzW2ldLmZyZWV6ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5lbWllc1tpXS5kaXNhYmxlUGh5c2ljcygpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5lbWllc1tpXS5haUFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgfSBcblxuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBwYXVzZUxheWVyID0gdGhpcy5nZXRMYXllcihcIlBBVVNFXCIpO1xuICAgXG4gICAgaWYoIXBhdXNlTGF5ZXIuaXNIaWRkZW4oKSl7XG4gICAgICAgIHRoaXMucGF1c2VJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpOyAvLyBXb3JrcyBidXQgd2hlbiBtb3ZpbmcgdGhlIHNjcmVlbiBnZXRzIG1vdmVkIHVwd2FyZHMuXG4gICAgfVxuXG4gICAgaWYoSW5wdXQuaXNLZXlQcmVzc2VkKFwielwiKSl7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgxKTtcbiAgICB9XG4gICAgXG4gICAgaWYoSW5wdXQuaXNLZXlQcmVzc2VkKFwieFwiKSl7XG4gICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDMpO1xuICAgICB9XG5cbiAgICAgaWYoSW5wdXQuaXNLZXlKdXN0UHJlc3NlZChcIjFcIikpe1xuICAgICAgICB0aGlzLnZpZXdwb3J0LmZvbGxvdyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoTGV2ZWwxU2NlbmUpO1xuICAgICB9XG4gICAgIGlmKElucHV0LmlzS2V5SnVzdFByZXNzZWQoXCIyXCIpKXtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKExldmVsMlNjZW5lKTtcbiAgICAgfVxuICAgICBpZihJbnB1dC5pc0tleUp1c3RQcmVzc2VkKFwiM1wiKSl7XG4gICAgICAgIHRoaXMudmlld3BvcnQuZm9sbG93KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgxKTtcbiAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShMZXZlbDNTY2VuZSk7XG4gICAgIH1cbiAgICAgaWYoSW5wdXQuaXNLZXlKdXN0UHJlc3NlZChcIjRcIikpe1xuICAgICAgICB0aGlzLnZpZXdwb3J0LmZvbGxvdyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMSk7XG4gICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoTGV2ZWw0U2NlbmUpO1xuICAgICB9XG4gICAgIGlmKElucHV0LmlzS2V5SnVzdFByZXNzZWQoXCI1XCIpKXtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKExldmVsNVNjZW5lKTtcbiAgICAgfVxuICAgICBpZihJbnB1dC5pc0tleUp1c3RQcmVzc2VkKFwiNlwiKSl7XG4gICAgICAgIHRoaXMudmlld3BvcnQuZm9sbG93KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgxKTtcbiAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShMYXN0U2NlbmUpO1xuICAgICB9XG5cbiAgICAgaWYoSW5wdXQuaXNLZXlKdXN0UHJlc3NlZChcInRcIikpe1xuICAgICAgICB0aGlzLnBsYXllclswXS5wb3NpdGlvbiA9IHRoaXMuYm9zc0xvY2F0aW9uO1xuICAgICB9XG5cblxuICAgIC8vIEFub3RoZXIgd2F5IHRvIHBsYXkgc2hvb3QgYXVkaW8gaXMgd2hlbiBwbGF5ZXIgcHJlc3NlZCBzcGFjZVxuICAgIC8vICBpZihJbnB1dC5pc0tleUp1c3RQcmVzc2VkKFwic3BhY2VcIikpe1xuICAgIC8vICAgICBjb25zb2xlLmxvZyhcIlNob290IEF1ZGlvIFBsYXllZFwiKTtcbiAgICAvLyAgICAgdGhpcy5lbWl0dGVyLmZpcmVFdmVudChHYW1lRXZlbnRUeXBlLlBMQVlfU09VTkQsIHtrZXk6IHRoaXMuZ2V0U2hvb3RBdWRpb0tleSgpLCBsb29wOiBmYWxzZSwgaG9sZFJlZmVyZW5jZTogZmFsc2V9KTtcbiAgICAvLyAgfVxuICAgIC8vIFRPRE8gSWYgaW5wdXQgaXMgMiwgMywgNCwgNSwgNiBnbyB0byB0aG9zZSBsZXZlbHMgYnkgY2hhbmluZyB0aGUgc2NlbmVcblxufVxuXG4vKipcbiAqIEhhbmRsZSBldmVudHMgZnJvbSB0aGUgcmVzdCBvZiB0aGUgZ2FtZVxuICogQHBhcmFtIGV2ZW50IGEgZ2FtZSBldmVudFxuICovXG5wdWJsaWMgaGFuZGxlRXZlbnQoZXZlbnQ6IEdhbWVFdmVudCk6IHZvaWQge1xuICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuICAgICAgICBjYXNlIEJhdHRsZXJFdmVudC5CQVRUTEVSX0tJTExFRDoge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVCYXR0bGVyS2lsbGVkKGV2ZW50KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgQmF0dGxlckV2ZW50LkJBVFRMRVJfUkVTUEFXTjoge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBJdGVtRXZlbnQuSVRFTV9SRVFVRVNUOiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUl0ZW1SZXF1ZXN0KGV2ZW50LmRhdGEuZ2V0KFwibm9kZVwiKSwgZXZlbnQuZGF0YS5nZXQoXCJpbnZlbnRvcnlcIikpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBQbGF5ZXJFdmVudC5QTEFZRVJfS0lMTEVEOiB7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LmZvbGxvdyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShHYW1lT3Zlcik7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInBhdXNlXCI6IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGF1c2VcIik7XG5cbiAgICAgICAgICAgIC8vIHRoaXMucGF1c2VJbWFnZS5zY2FsZSA9IHRoaXMucGF1c2VJbWFnZS5zaXplV2l0aFpvb207XG5cbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICAgICAgdGhpcy5wYXVzZUltYWdlLnBvc2l0aW9uLmNvcHkodGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKSk7IC8vIFdvcmtzIGJ1dCB3aGVuIG1vdmluZyB0aGUgc2NyZWVuIGdldHMgbW92ZWQgdXB3YXJkcy5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIHRoaXMudmlld3BvcnQuZm9sbG93KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMucGxheWVyWzBdLmZyZWV6ZSgpOyAvLyBGcmVlemVzIHBsYXllclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJbMF0uZGlzYWJsZVBoeXNpY3MoKTtcblxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuZW5lbWllcy5sZW5ndGg7IGkrKyl7IC8vIEZyZWV6ZXMgZW5lbWllcyBcbiAgICAgICAgICAgICAgICBpZih0aGlzLmVuZW1pZXNbaV0uYmF0dGxlckFjdGl2ZSA9PSB0cnVlKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmVtaWVzW2ldLmZyZWV6ZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZW1pZXNbaV0uZGlzYWJsZVBoeXNpY3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmVtaWVzW2ldLmFpQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgfSBcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgIHRoaXMudW5wYXVzZVBhdXNlTGF5ZXIoKTsgXG4gICAgICAgICAgIHRoaXMucGF1c2VQcmltYXJ5TGF5ZXIoKTtcbiAgICAgICAgICAgdGhpcy5wYXVzZVVJTGF5ZXIoKTtcblxuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwidW5wYXVzZVwiOiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInVucGF1c2VcIik7XG5cbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDMpO1xuICAgICAgICAgICAgbGV0IGNlbnRlciA9IHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCk7XG4gICAgICAgICAgICAvLyB0aGlzLnBhdXNlTWVudS5wb3NpdGlvbi5zZXQoY2VudGVyLngsIGNlbnRlci55KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnBsYXllclswXS51bmZyZWV6ZSgpO1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXJbMF0uZW5hYmxlUGh5c2ljcygpO1xuICAgICAgICAgICAgLy8gSW5wdXQuZW5hYmxlSW5wdXQoKTtcblxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuZW5lbWllcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5lbmVtaWVzW2ldLmJhdHRsZXJBY3RpdmUgPT0gdHJ1ZSl7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZW1pZXNbaV0udW5mcmVlemUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmVtaWVzW2ldLmVuYWJsZVBoeXNpY3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmVtaWVzW2ldLmFpQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHRoaXMuZW5lbWllc1tpXS5zZXRUYXJnZXQodGhpcy5iYXR0bGVyc1swXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucGF1c2VQYXVzZUxheWVyKCk7XG4gICAgICAgICAgICB0aGlzLnVucGF1c2VQcmltYXJ5TGF5ZXIoKTtcbiAgICAgICAgICAgIHRoaXMudW5wYXVzZVVJTGF5ZXIoKTtcblxuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBcbiAgICAgICAgY2FzZSBcIm1haW5tZW51XCI6IHtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuZm9sbG93KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNldFpvb21MZXZlbCgxKTtcbiAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoTWFpbk1lbnUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gXG4gICAgICAgIGNhc2UgXCJjb250cm9sc1wiOiB7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xzSW1hZ2UucG9zaXRpb24uY29weSh0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTtcbiAgICAgICAgICAgIHRoaXMucGF1c2VQYXVzZUxheWVyKCk7XG4gICAgICAgICAgICB0aGlzLnVucGF1c2VDb250cm9sc0xheWVyKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBcbiAgICAgICAgY2FzZSBcImJhY2tjb250cm9sc1wiOiB7XG4gICAgICAgICAgICB0aGlzLnVucGF1c2VQYXVzZUxheWVyKCk7XG4gICAgICAgICAgICB0aGlzLnBhdXNlQ29udHJvbHNMYXllcigpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImhlbHBcIjoge1xuICAgICAgICAgICAgdGhpcy5oZWxwSW1hZ2UucG9zaXRpb24uY29weSh0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTtcbiAgICAgICAgICAgIHRoaXMucGF1c2VQYXVzZUxheWVyKCk7XG4gICAgICAgICAgICB0aGlzLnVucGF1c2VIZWxwTGF5ZXIoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJoZWxwY29udHJvbHNcIjoge1xuICAgICAgICAgICAgdGhpcy51bnBhdXNlUGF1c2VMYXllcigpO1xuICAgICAgICAgICAgdGhpcy5wYXVzZUhlbHBMYXllcigpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcIm5leHRsdmxcIjoge1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5mb2xsb3codW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2V0Wm9vbUxldmVsKDEpO1xuICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShMYXN0U2NlbmUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmhhbmRsZWQgZXZlbnQgdHlwZSBcIiR7ZXZlbnQudHlwZX1cIiBjYXVnaHQgaW4gSFczU2NlbmUgZXZlbnQgaGFuZGxlcmApO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5wcm90ZWN0ZWQgcGF1c2VQYXVzZUxheWVyKCk6IHZvaWQge1xuICAgIGxldCBwYXVzZUxheWVyID0gdGhpcy5nZXRMYXllcihcIlBBVVNFXCIpO1xuICAgIHBhdXNlTGF5ZXIuc2V0UGF1c2VkKHRydWUpO1xuICAgIHBhdXNlTGF5ZXIuc2V0SGlkZGVuKHRydWUpO1xufVxuXG5wcm90ZWN0ZWQgdW5wYXVzZVBhdXNlTGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IHBhdXNlTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiUEFVU0VcIik7XG4gICAgcGF1c2VMYXllci5zZXRQYXVzZWQoZmFsc2UpO1xuICAgIHBhdXNlTGF5ZXIuc2V0SGlkZGVuKGZhbHNlKTtcbn1cblxucHJvdGVjdGVkIHBhdXNlQ29udHJvbHNMYXllcigpOiB2b2lkIHtcbiAgICBsZXQgY29udHJvbHNMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJDT05UUk9MU1wiKTtcbiAgICBjb250cm9sc0xheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICBjb250cm9sc0xheWVyLnNldEhpZGRlbih0cnVlKTtcbn1cblxucHJvdGVjdGVkIHVucGF1c2VDb250cm9sc0xheWVyKCk6IHZvaWQge1xuICAgIGxldCBjb250cm9sc0xheWVyID0gdGhpcy5nZXRMYXllcihcIkNPTlRST0xTXCIpO1xuICAgIGNvbnRyb2xzTGF5ZXIuc2V0UGF1c2VkKGZhbHNlKTtcbiAgICBjb250cm9sc0xheWVyLnNldEhpZGRlbihmYWxzZSk7XG59XG5cbnByb3RlY3RlZCBwYXVzZVByaW1hcnlMYXllcigpOiB2b2lkIHtcbiAgICBsZXQgcHJpbWFyeUxheWVyID0gdGhpcy5nZXRMYXllcihcInByaW1hcnlcIik7XG4gICAgcHJpbWFyeUxheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICBwcmltYXJ5TGF5ZXIuc2V0SGlkZGVuKHRydWUpO1xufVxuXG5wcm90ZWN0ZWQgdW5wYXVzZVByaW1hcnlMYXllcigpOiB2b2lkIHtcbiAgICBsZXQgcHJpbWFyeUxheWVyID0gdGhpcy5nZXRMYXllcihcInByaW1hcnlcIik7XG4gICAgcHJpbWFyeUxheWVyLnNldFBhdXNlZChmYWxzZSk7XG4gICAgcHJpbWFyeUxheWVyLnNldEhpZGRlbihmYWxzZSk7XG59XG5cbnByb3RlY3RlZCBwYXVzZVVJTGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IHVpTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiVUlcIik7XG4gICAgdWlMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgdWlMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG59XG5cbnByb3RlY3RlZCB1bnBhdXNlVUlMYXllcigpOiB2b2lkIHtcbiAgICBsZXQgdWlMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJVSVwiKTtcbiAgICB1aUxheWVyLnNldFBhdXNlZChmYWxzZSk7XG4gICAgdWlMYXllci5zZXRIaWRkZW4oZmFsc2UpO1xufVxuXG5wcm90ZWN0ZWQgcGF1c2VIZWxwTGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IGhlbHBMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJIRUxQXCIpO1xuICAgIGhlbHBMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgaGVscExheWVyLnNldEhpZGRlbih0cnVlKTtcbn1cblxucHJvdGVjdGVkIHVucGF1c2VIZWxwTGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IGhlbHBMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJIRUxQXCIpO1xuICAgIGhlbHBMYXllci5zZXRQYXVzZWQoZmFsc2UpO1xuICAgIGhlbHBMYXllci5zZXRIaWRkZW4oZmFsc2UpO1xufVxuXG5wcm90ZWN0ZWQgcGF1c2VDb21wbGV0ZUxheWVyKCk6IHZvaWQge1xuICAgIGxldCBjb21wbGV0ZUxheWVyID0gdGhpcy5nZXRMYXllcihcIkNPTVBMRVRFXCIpO1xuICAgIGNvbXBsZXRlTGF5ZXIuc2V0UGF1c2VkKHRydWUpO1xuICAgIGNvbXBsZXRlTGF5ZXIuc2V0SGlkZGVuKHRydWUpO1xufVxuXG5wcm90ZWN0ZWQgdW5wYXVzZUNvbXBsZXRlTGF5ZXIoKTogdm9pZCB7XG4gICAgbGV0IGNvbXBsZXRlTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiQ09NUExFVEVcIik7XG4gICAgY29tcGxldGVMYXllci5zZXRQYXVzZWQoZmFsc2UpO1xuICAgIGNvbXBsZXRlTGF5ZXIuc2V0SGlkZGVuKGZhbHNlKTtcbn1cblxuXG5cbnByb3RlY3RlZCBoYW5kbGVJdGVtUmVxdWVzdChub2RlOiBHYW1lTm9kZSwgaW52ZW50b3J5OiBJbnZlbnRvcnkpOiB2b2lkIHtcbiAgICBsZXQgaXRlbXM6IEl0ZW1bXSA9IG5ldyBBcnJheTxJdGVtPiguLi50aGlzLmhlYWx0aHBhY2tzLCAuLi50aGlzLmxhc2VyZ3VucykuZmlsdGVyKChpdGVtOiBJdGVtKSA9PiB7XG4gICAgICAgIHJldHVybiBpdGVtLmludmVudG9yeSA9PT0gbnVsbCAmJiBpdGVtLnBvc2l0aW9uLmRpc3RhbmNlVG8obm9kZS5wb3NpdGlvbikgPD0gMTAwO1xuICAgIH0pO1xuXG4gICAgaWYgKGl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaW52ZW50b3J5LmFkZChpdGVtcy5yZWR1Y2UoQ2xvc2VzdFBvc2l0aW9uZWQobm9kZSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGFuZGxlcyBhbiBOUEMgYmVpbmcga2lsbGVkIGJ5IHVucmVnaXN0ZXJpbmcgdGhlIE5QQyBmcm9tIHRoZSBzY2VuZXMgc3Vic3lzdGVtc1xuICogQHBhcmFtIGV2ZW50IGFuIE5QQy1raWxsZWQgZXZlbnRcbiAqL1xucHJvdGVjdGVkIGhhbmRsZUJhdHRsZXJLaWxsZWQoZXZlbnQ6IEdhbWVFdmVudCk6IHZvaWQge1xuICAgIGxldCBpZDogbnVtYmVyID0gZXZlbnQuZGF0YS5nZXQoXCJpZFwiKTtcbiAgICBsZXQgYmF0dGxlciA9IHRoaXMuYmF0dGxlcnMuZmluZChiID0+IGIuaWQgPT09IGlkKTtcblxuICAgIGlmIChiYXR0bGVyKSB7XG4gICAgICAgIGJhdHRsZXIuYmF0dGxlckFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhlYWx0aGJhcnMuZ2V0KGlkKS52aXNpYmxlID0gZmFsc2U7XG4gICAgfVxuICAgIFxufVxuXG4vKiogSW5pdGlhbGl6ZXMgdGhlIGxheWVycyBpbiB0aGUgc2NlbmUgKi9cbnByb3RlY3RlZCBpbml0TGF5ZXJzKCk6IHZvaWQge1xuXG4gICAgdGhpcy5hZGRMYXllcihMZXZlbDVTY2VuZUxheWVycy5VSSk7XG4gICAgdGhpcy5hZGRMYXllcihMZXZlbDVTY2VuZUxheWVycy5QQVVTRSwgMTApO1xuICAgIHRoaXMuYWRkTGF5ZXIoTGV2ZWw1U2NlbmVMYXllcnMuSEVMUCwgMTEpO1xuICAgIHRoaXMuYWRkTGF5ZXIoTGV2ZWw1U2NlbmVMYXllcnMuQ09OVFJPTFMsIDExKTtcbiAgICB0aGlzLmFkZExheWVyKExldmVsNVNjZW5lTGF5ZXJzLkNPTVBMRVRFLCAxMik7XG5cbiAgICB0aGlzLmFkZExheWVyKFwicHJpbWFyeVwiLCA1KTtcbn1cblxuXG5cblxuLyoqXG4gKiBJbml0aWFsaXplcyB0aGUgcGxheWVyIGluIHRoZSBzY2VuZVxuICovXG5wcm90ZWN0ZWQgaW5pdGlhbGl6ZVBsYXllcigpOiB2b2lkIHtcbiAgICBjb25zdCBjZW50ZXIgPSB0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpO1xuICAgIGxldCBwbGF5ZXIgPSB0aGlzLmFkZC5hbmltYXRlZFNwcml0ZShQbGF5ZXJBY3RvciwgXCJwbGF5ZXIxXCIsIFwicHJpbWFyeVwiKTtcbiAgICBwbGF5ZXIucG9zaXRpb24uc2V0KGNlbnRlci54LCBjZW50ZXIueSs0MDApO1xuXG4gICAgcGxheWVyLmJhdHRsZUdyb3VwID0gMjtcbiAgICBcblxuICAgIHBsYXllci5oZWFsdGggPSAxMDtcbiAgICBwbGF5ZXIubWF4SGVhbHRoID0gMTA7XG4gICAgcGxheWVyLnNjYWxlID0gbmV3IFZlYzIoMC40LCAwLjQpOyAvLyBTY2FsZXMgcGxheWVyIFxuXG4gICAgcGxheWVyLmludmVudG9yeS5vbkNoYW5nZSA9IEl0ZW1FdmVudC5JTlZFTlRPUllfQ0hBTkdFRFxuICAgIC8vIHRoaXMuaW52ZW50b3J5SHVkID0gbmV3IEludmVudG9yeUhVRCh0aGlzLCBwbGF5ZXIuaW52ZW50b3J5LCBcImludmVudG9yeVNsb3RcIiwge1xuICAgIC8vICAgICBzdGFydDogbmV3IFZlYzIoMjMyLCAyNCksXG4gICAgLy8gICAgIHNsb3RMYXllcjogXCJzbG90c1wiLFxuICAgIC8vICAgICBwYWRkaW5nOiA4LFxuICAgIC8vICAgICBpdGVtTGF5ZXI6IFwiaXRlbXNcIlxuICAgIC8vIH0pO1xuXG4gICAgLy8gR2l2ZSB0aGUgcGxheWVyIHBoeXNpY3NcbiAgICBwbGF5ZXIuYWRkUGh5c2ljcyhuZXcgQUFCQihWZWMyLlpFUk8sIG5ldyBWZWMyKDE2LCAxNikpKTtcblxuICAgIC8vIEdpdmUgdGhlIHBsYXllciBhIGhlYWx0aGJhclxuICAgICBsZXQgaGVhbHRoYmFyID0gbmV3IEhlYWx0aGJhckhVRCh0aGlzLCBwbGF5ZXIsIFwicHJpbWFyeVwiLCB7c2l6ZTogcGxheWVyLnNpemUuY2xvbmUoKS5zY2FsZWQoMSwgMS80KSwgb2Zmc2V0OiBwbGF5ZXIuc2l6ZS5jbG9uZSgpLnNjYWxlZCgwLCAtMS8zKX0pO1xuICAgIHRoaXMuaGVhbHRoYmFycy5zZXQocGxheWVyLmlkLCBoZWFsdGhiYXIpO1xuXG4gICAgLy8gR2l2ZSB0aGUgcGxheWVyIFBsYXllckFJXG4gICAgcGxheWVyLmFkZEFJKFBsYXllckFJKTtcblxuICAgIC8vIFN0YXJ0IHRoZSBwbGF5ZXIgaW4gdGhlIFwiSURMRVwiIGFuaW1hdGlvblxuICAgIHBsYXllci5hbmltYXRpb24ucGxheShcIklETEVcIik7XG4gICAgXG4gICAgdGhpcy5iYXR0bGVycy5wdXNoKHBsYXllcik7XG4gICAgdGhpcy5wbGF5ZXIucHVzaChwbGF5ZXIpO1xuICAgIHRoaXMudmlld3BvcnQuZm9sbG93KHBsYXllcik7XG4gICAgdGhpcy52aWV3cG9ydC5zZXRab29tTGV2ZWwoMyk7XG4gICAgXG59XG4vKipcbiAqIEluaXRpYWxpemUgdGhlIE5QQ3MgXG4gKi9cbnByb3RlY3RlZCBpbml0aWFsaXplTlBDcygpOiB2b2lkIHtcblxuICAgXG4gICAgLy8gR2V0IHRoZSBvYmplY3QgZGF0YSBmb3IgdGhlIGJsdWUgZW5lbWllc1xuICAgIGxldCBibHVlID0gdGhpcy5sb2FkLmdldE9iamVjdChcImJsdWVcIik7XG5cbiAgICAvLyBJbml0aWFsaXplIHRoZSBibHVlIGVuZW1pZXNcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJsdWUuZW5lbWllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgbnBjID0gdGhpcy5hZGQuYW5pbWF0ZWRTcHJpdGUoTlBDQWN0b3IsIFwiQmx1ZUVuZW15XCIsIFwicHJpbWFyeVwiKTtcbiAgICAgICAgbnBjLnBvc2l0aW9uLnNldChibHVlLmVuZW1pZXNbaV1bMF0sIGJsdWUuZW5lbWllc1tpXVsxXSk7XG4gICAgICAgIG5wYy5hZGRQaHlzaWNzKG5ldyBBQUJCKFZlYzIuWkVSTywgbmV3IFZlYzIoOCwgOCkpLCBudWxsLCBmYWxzZSk7XG5cbiAgICAgICAgLy8gR2l2ZSB0aGUgTlBDUyB0aGVpciBoZWFsdGhiYXJzXG4gICAgICAgIGxldCBoZWFsdGhiYXIgPSBuZXcgSGVhbHRoYmFySFVEKHRoaXMsIG5wYywgXCJwcmltYXJ5XCIsIHtzaXplOiBucGMuc2l6ZS5jbG9uZSgpLnNjYWxlZCgxLzIsIDEvNCksIG9mZnNldDogbnBjLnNpemUuY2xvbmUoKS5zY2FsZWQoMCwgLTEvMyl9KTtcbiAgICAgICAgdGhpcy5oZWFsdGhiYXJzLnNldChucGMuaWQsIGhlYWx0aGJhcik7XG5cbiAgICAgICAgbnBjLmJhdHRsZUdyb3VwID0gMVxuICAgICAgICBucGMuc3BlZWQgPSAxMDtcbiAgICAgICAgbnBjLmhlYWx0aCA9IDQ7XG4gICAgICAgIG5wYy5tYXhIZWFsdGggPSA0O1xuICAgICAgICBucGMubmF2a2V5ID0gXCJuYXZtZXNoXCI7XG4gICAgICAgIG5wYy5zY2FsZSA9IG5ldyBWZWMyKDAuNCwwLjQpO1xuXG4gICAgICAgIC8vIEdpdmUgdGhlIE5QQ3MgdGhlaXIgQUlcbiAgICAgICAgbnBjLmFkZEFJKEd1YXJkQmVoYXZpb3IsIHt0YXJnZXQ6IHRoaXMuYmF0dGxlcnNbMF0sIHJhbmdlOiAwfSk7XG5cbiAgICAgICAgLy8gUGxheSB0aGUgTlBDcyBcIklETEVcIiBhbmltYXRpb24gXG4gICAgICAgIG5wYy5hbmltYXRpb24ucGxheShcIklETEVcIik7XG5cbiAgICAgICAgdGhpcy5iYXR0bGVycy5wdXNoKG5wYyk7XG4gICAgICAgIHRoaXMuZW5lbWllcy5wdXNoKG5wYyk7XG4gICAgfVxuXG4gICAgbGV0IG5wYyA9IHRoaXMuYWRkLmFuaW1hdGVkU3ByaXRlKE5QQ0FjdG9yLCBcIkJsdWVFbmVteVwiLCBcInByaW1hcnlcIik7XG4gICAgICAgIHRoaXMuYm9zcyA9IG5wYztcbiAgICAgICAgY29uc3QgY2VudGVyID0gdGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKTtcbiAgICAgICAgbnBjLnBvc2l0aW9uLnNldChjZW50ZXIueCwgY2VudGVyLnkpO1xuICAgICAgICB0aGlzLmJvc3NMb2NhdGlvbiA9IG5ldyBWZWMyKGNlbnRlci54LCBjZW50ZXIueSk7XG4gICAgICAgIG5wYy5hZGRQaHlzaWNzKG5ldyBBQUJCKFZlYzIuWkVSTywgbmV3IFZlYzIoMzIsIDMyKSksIG51bGwsIGZhbHNlKTtcblxuICAgICAgICAvLyBHaXZlIHRoZSBOUENTIHRoZWlyIGhlYWx0aGJhcnNcbiAgICAgICAgbGV0IGhlYWx0aGJhciA9IG5ldyBIZWFsdGhiYXJIVUQodGhpcywgbnBjLCBcInByaW1hcnlcIiwge3NpemU6IG5wYy5zaXplLmNsb25lKCkuc2NhbGVkKDIsIDEvNCksIG9mZnNldDogbnBjLnNpemUuY2xvbmUoKS5zY2FsZWQoMCwgLTEvMyl9KTtcbiAgICAgICAgdGhpcy5oZWFsdGhiYXJzLnNldChucGMuaWQsIGhlYWx0aGJhcik7XG5cbiAgICAgICAgbnBjLmJhdHRsZUdyb3VwID0gMVxuICAgICAgICBucGMuc3BlZWQgPSAxMDtcbiAgICAgICAgbnBjLmhlYWx0aCA9IDI1O1xuICAgICAgICBucGMubWF4SGVhbHRoID0gMjU7XG4gICAgICAgIG5wYy5uYXZrZXkgPSBcIm5hdm1lc2hcIjtcbiAgICAgICAgbnBjLnNjYWxlID0gbmV3IFZlYzIoMSwxKTtcblxuXG4gICAgICAgIC8vIEdpdmUgdGhlIE5QQ3MgdGhlaXIgQUlcbiAgICAgICAgbnBjLmFkZEFJKEd1YXJkQmVoYXZpb3IsIHt0YXJnZXQ6IHRoaXMuYmF0dGxlcnNbMF0sIHJhbmdlOiAwfSk7XG5cbiAgICAgICAgLy8gUGxheSB0aGUgTlBDcyBcIklETEVcIiBhbmltYXRpb24gXG4gICAgICAgIG5wYy5hbmltYXRpb24ucGxheShcIklETEVcIik7XG5cbiAgICAgICAgdGhpcy5iYXR0bGVycy5wdXNoKG5wYyk7XG4gICAgICAgIHRoaXMuZW5lbWllcy5wdXNoKG5wYyk7XG5cbiAgICAvLyBJbml0aWFsaXplIHRoZSBibHVlIGhlYWxlcnNcbiAgICBcblxufVxuXG4vKipcbiAqIEluaXRpYWxpemUgdGhlIGl0ZW1zIGluIHRoZSBzY2VuZSAoaGVhbHRocGFja3MgYW5kIGxhc2VyIGd1bnMpXG4gKi9cbnByb3RlY3RlZCBpbml0aWFsaXplSXRlbXMoKTogdm9pZCB7XG4gICAgbGV0IGxhc2VyZ3VucyA9IHRoaXMubG9hZC5nZXRPYmplY3QoXCJsYXNlcmd1bnNcIik7XG4gICAgdGhpcy5sYXNlcmd1bnMgPSBuZXcgQXJyYXk8TGFzZXJHdW4+KGxhc2VyZ3Vucy5pdGVtcy5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGFzZXJndW5zLml0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBzcHJpdGUgPSB0aGlzLmFkZC5zcHJpdGUoXCJsYXNlckd1blwiLCBcInByaW1hcnlcIik7XG4gICAgICAgIGxldCBsaW5lID0gPExpbmU+dGhpcy5hZGQuZ3JhcGhpYyhHcmFwaGljVHlwZS5MSU5FLCBcInByaW1hcnlcIiwge3N0YXJ0OiBWZWMyLlpFUk8sIGVuZDogVmVjMi5aRVJPfSk7XG4gICAgICAgIHRoaXMubGFzZXJndW5zW2ldID0gTGFzZXJHdW4uY3JlYXRlKHNwcml0ZSwgbGluZSk7XG4gICAgICAgIHRoaXMubGFzZXJndW5zW2ldLnBvc2l0aW9uLnNldChsYXNlcmd1bnMuaXRlbXNbaV1bMF0sIGxhc2VyZ3Vucy5pdGVtc1tpXVsxXSk7XG4gICAgfVxuXG4gICAgbGV0IGhlYWx0aHBhY2tzID0gdGhpcy5sb2FkLmdldE9iamVjdChcImhlYWx0aHBhY2tzXCIpO1xuICAgIHRoaXMuaGVhbHRocGFja3MgPSBuZXcgQXJyYXk8SGVhbHRocGFjaz4oaGVhbHRocGFja3MuaXRlbXMubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhlYWx0aHBhY2tzLml0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBzcHJpdGUgPSB0aGlzLmFkZC5zcHJpdGUoXCJoZWFsdGhwYWNrXCIsIFwicHJpbWFyeVwiKTtcbiAgICAgICAgdGhpcy5oZWFsdGhwYWNrc1tpXSA9IG5ldyBIZWFsdGhwYWNrKHNwcml0ZSk7XG4gICAgICAgIHRoaXMuaGVhbHRocGFja3NbaV0ucG9zaXRpb24uc2V0KGhlYWx0aHBhY2tzLml0ZW1zW2ldWzBdLCBoZWFsdGhwYWNrcy5pdGVtc1tpXVsxXSk7XG4gICAgfVxufVxuLyoqXG4gKiBJbml0aWFsaXplcyB0aGUgbmF2bWVzaCBncmFwaCB1c2VkIGJ5IHRoZSBOUENzIGluIHRoZSBIVzNTY2VuZS4gVGhpcyBtZXRob2QgaXMgYSBsaXR0bGUgYnVnZ3ksIGFuZFxuICogYW5kIGl0IHNraXBzIG92ZXIgc29tZSBvZiB0aGUgcG9zaXRpb25zIG9uIHRoZSB0aWxlbWFwLiBJZiB5b3UgY2FuIGZpeCBteSBuYXZtZXNoIGdlbmVyYXRpb24gYWxnb3JpdGhtLFxuICogZ28gZm9yIGl0LlxuICogXG4gKiAtIFBldGVyXG4gKi9cbnByb3RlY3RlZCBpbml0aWFsaXplTmF2bWVzaCgpOiB2b2lkIHtcbiAgICAvLyBDcmVhdGUgdGhlIGdyYXBoXG4gICAgdGhpcy5ncmFwaCA9IG5ldyBQb3NpdGlvbkdyYXBoKCk7XG5cbiAgICBsZXQgZGltOiBWZWMyID0gdGhpcy53YWxscy5nZXREaW1lbnNpb25zKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkaW0ueTsgaSsrKSB7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZGltLng7IGorKykge1xuICAgICAgICAgICAgbGV0IHRpbGU6IEFBQkIgPSB0aGlzLndhbGxzLmdldFRpbGVDb2xsaWRlcihqLCBpKTtcbiAgICAgICAgICAgIHRoaXMuZ3JhcGguYWRkUG9zaXRpb25lZE5vZGUodGlsZS5jZW50ZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHJjOiBWZWMyO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ncmFwaC5udW1WZXJ0aWNlczsgaSsrKSB7XG4gICAgICAgIHJjID0gdGhpcy53YWxscy5nZXRUaWxlQ29sUm93KGkpO1xuICAgICAgICBpZiAoIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShyYy54LCByYy55KSAmJlxuICAgICAgICAgICAgIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShNYXRoVXRpbHMuY2xhbXAocmMueCAtIDEsIDAsIGRpbS54IC0gMSksIHJjLnkpICYmXG4gICAgICAgICAgICAhdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKE1hdGhVdGlscy5jbGFtcChyYy54ICsgMSwgMCwgZGltLnggLSAxKSwgcmMueSkgJiZcbiAgICAgICAgICAgICF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUocmMueCwgTWF0aFV0aWxzLmNsYW1wKHJjLnkgLSAxLCAwLCBkaW0ueSAtIDEpKSAmJlxuICAgICAgICAgICAgIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShyYy54LCBNYXRoVXRpbHMuY2xhbXAocmMueSArIDEsIDAsIGRpbS55IC0gMSkpICYmXG4gICAgICAgICAgICAhdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKE1hdGhVdGlscy5jbGFtcChyYy54ICsgMSwgMCwgZGltLnggLSAxKSwgTWF0aFV0aWxzLmNsYW1wKHJjLnkgKyAxLCAwLCBkaW0ueSAtIDEpKSAmJlxuICAgICAgICAgICAgIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShNYXRoVXRpbHMuY2xhbXAocmMueCAtIDEsIDAsIGRpbS54IC0gMSksIE1hdGhVdGlscy5jbGFtcChyYy55ICsgMSwgMCwgZGltLnkgLSAxKSkgJiZcbiAgICAgICAgICAgICF0aGlzLndhbGxzLmlzVGlsZUNvbGxpZGFibGUoTWF0aFV0aWxzLmNsYW1wKHJjLnggKyAxLCAwLCBkaW0ueCAtIDEpLCBNYXRoVXRpbHMuY2xhbXAocmMueSAtIDEsIDAsIGRpbS55IC0gMSkpICYmXG4gICAgICAgICAgICAhdGhpcy53YWxscy5pc1RpbGVDb2xsaWRhYmxlKE1hdGhVdGlscy5jbGFtcChyYy54IC0gMSwgMCwgZGltLnggLSAxKSwgTWF0aFV0aWxzLmNsYW1wKHJjLnkgLSAxLCAwLCBkaW0ueSAtIDEpKVxuXG4gICAgICAgICkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGVkZ2UgdG8gdGhlIGxlZnRcbiAgICAgICAgICAgIHJjID0gdGhpcy53YWxscy5nZXRUaWxlQ29sUm93KGkgKyAxKTtcbiAgICAgICAgICAgIGlmICgoaSArIDEpICUgZGltLnggIT09IDAgJiYgIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShyYy54LCByYy55KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ3JhcGguYWRkRWRnZShpLCBpICsgMSk7XG4gICAgICAgICAgICAgICAgLy8gdGhpcy5hZGQuZ3JhcGhpYyhHcmFwaGljVHlwZS5MSU5FLCBcImdyYXBoXCIsIHtzdGFydDogdGhpcy5ncmFwaC5nZXROb2RlUG9zaXRpb24oaSksIGVuZDogdGhpcy5ncmFwaC5nZXROb2RlUG9zaXRpb24oaSArIDEpfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIENyZWF0ZSBlZGdlIGJlbG93XG4gICAgICAgICAgICByYyA9IHRoaXMud2FsbHMuZ2V0VGlsZUNvbFJvdyhpICsgZGltLngpO1xuICAgICAgICAgICAgaWYgKGkgKyBkaW0ueCA8IHRoaXMuZ3JhcGgubnVtVmVydGljZXMgJiYgIXRoaXMud2FsbHMuaXNUaWxlQ29sbGlkYWJsZShyYy54LCByYy55KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ3JhcGguYWRkRWRnZShpLCBpICsgZGltLngpO1xuICAgICAgICAgICAgICAgIC8vIHRoaXMuYWRkLmdyYXBoaWMoR3JhcGhpY1R5cGUuTElORSwgXCJncmFwaFwiLCB7c3RhcnQ6IHRoaXMuZ3JhcGguZ2V0Tm9kZVBvc2l0aW9uKGkpLCBlbmQ6IHRoaXMuZ3JhcGguZ2V0Tm9kZVBvc2l0aW9uKGkgKyBkaW0ueCl9KVxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNldCB0aGlzIGdyYXBoIGFzIGEgbmF2aWdhYmxlIGVudGl0eVxuICAgIGxldCBuYXZtZXNoID0gbmV3IE5hdm1lc2godGhpcy5ncmFwaCk7XG4gICAgLy8gQWRkIGRpZmZlcmVudCBzdHJhdGVnaWVzIHRvIHVzZSBmb3IgdGhpcyBuYXZtZXNoXG4gICAgbmF2bWVzaC5yZWdpc3RlclN0cmF0ZWd5KFwiZGlyZWN0XCIsIG5ldyBEaXJlY3RTdHJhdGVneShuYXZtZXNoKSk7XG4gICAgbmF2bWVzaC5yZWdpc3RlclN0cmF0ZWd5KFwiYXN0YXJcIiwgbmV3IEFzdGFyU3RyYXRlZ3kobmF2bWVzaCkpO1xuICAgIC8vIFNlbGVjdCBBKiBhcyBvdXIgbmF2aWdhdGlvbiBzdHJhdGVneVxuICAgIG5hdm1lc2guc2V0U3RyYXRlZ3koXCJhc3RhclwiKTtcblxuICAgIC8vIEFkZCB0aGlzIG5hdm1lc2ggdG8gdGhlIG5hdmlnYXRpb24gbWFuYWdlclxuICAgIHRoaXMubmF2TWFuYWdlci5hZGROYXZpZ2FibGVFbnRpdHkoXCJuYXZtZXNoXCIsIG5hdm1lc2gpO1xufVxuXG5wdWJsaWMgdW5sb2FkU2NlbmUoKTogdm9pZCB7XG4gICAgLy8gVGhlIHNjZW5lIGlzIGJlaW5nIGRlc3Ryb3llZCwgc28gd2UgY2FuIHN0b3AgcGxheWluZyB0aGUgc29uZ1xuICAgIHRoaXMuZW1pdHRlci5maXJlRXZlbnQoR2FtZUV2ZW50VHlwZS5TVE9QX1NPVU5ELCB7a2V5OiB0aGlzLmxldmVsTXVzaWNLZXl9KTtcbn1cblxuXG4gICAgcHVibGljIGdldEJhdHRsZXJzKCk6IEJhdHRsZXJbXSB7IHJldHVybiB0aGlzLmJhdHRsZXJzOyB9XG5cbiAgICBwdWJsaWMgZ2V0V2FsbHMoKTogT3J0aG9nb25hbFRpbGVtYXAgeyByZXR1cm4gdGhpcy53YWxsczsgfVxuXG4gICAgcHVibGljIGdldEhlYWx0aHBhY2tzKCk6IEhlYWx0aHBhY2tbXSB7IHJldHVybiB0aGlzLmhlYWx0aHBhY2tzOyB9XG5cbiAgICBwdWJsaWMgZ2V0TGFzZXJHdW5zKCk6IExhc2VyR3VuW10geyByZXR1cm4gdGhpcy5sYXNlcmd1bnM7IH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gdGFyZ2V0IHBvc2l0aW9uIGlzIHZpc2libGUgZnJvbSB0aGUgZ2l2ZW4gcG9zaXRpb24uXG4gICAgICogQHBhcmFtIHBvc2l0aW9uIFxuICAgICAqIEBwYXJhbSB0YXJnZXQgXG4gICAgICogQHJldHVybnMgXG4gICAgICovXG4gICAgcHVibGljIGlzVGFyZ2V0VmlzaWJsZShwb3NpdGlvbjogVmVjMiwgdGFyZ2V0OiBWZWMyKTogYm9vbGVhbiB7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBuZXcgcGxheWVyIGxvY2F0aW9uXG4gICAgICAgIGxldCBzdGFydCA9IHBvc2l0aW9uLmNsb25lKCk7XG4gICAgICAgIGxldCBkZWx0YSA9IHRhcmdldC5jbG9uZSgpLnN1YihzdGFydCk7XG5cbiAgICAgICAgLy8gSXRlcmF0ZSB0aHJvdWdoIHRoZSB0aWxlbWFwIHJlZ2lvbiB1bnRpbCB3ZSBmaW5kIGEgY29sbGlzaW9uXG4gICAgICAgIGxldCBtaW5YID0gTWF0aC5taW4oc3RhcnQueCwgdGFyZ2V0LngpO1xuICAgICAgICBsZXQgbWF4WCA9IE1hdGgubWF4KHN0YXJ0LngsIHRhcmdldC54KTtcbiAgICAgICAgbGV0IG1pblkgPSBNYXRoLm1pbihzdGFydC55LCB0YXJnZXQueSk7XG4gICAgICAgIGxldCBtYXhZID0gTWF0aC5tYXgoc3RhcnQueSwgdGFyZ2V0LnkpO1xuXG4gICAgICAgIC8vIEdldCB0aGUgd2FsbCB0aWxlbWFwXG4gICAgICAgIGxldCB3YWxscyA9IHRoaXMuZ2V0V2FsbHMoKTtcblxuICAgICAgICBsZXQgbWluSW5kZXggPSB3YWxscy5nZXRUaWxlbWFwUG9zaXRpb24obWluWCwgbWluWSk7XG4gICAgICAgIGxldCBtYXhJbmRleCA9IHdhbGxzLmdldFRpbGVtYXBQb3NpdGlvbihtYXhYLCBtYXhZKTtcblxuICAgICAgICBsZXQgdGlsZVNpemUgPSB3YWxscy5nZXRTY2FsZWRUaWxlU2l6ZSgpO1xuXG4gICAgICAgIGZvciAobGV0IGNvbCA9IG1pbkluZGV4Lng7IGNvbCA8PSBtYXhJbmRleC54OyBjb2wrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgcm93ID0gbWluSW5kZXgueTsgcm93IDw9IG1heEluZGV4Lnk7IHJvdysrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHdhbGxzLmlzVGlsZUNvbGxpZGFibGUoY29sLCByb3cpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgcG9zaXRpb24gb2YgdGhpcyB0aWxlXG4gICAgICAgICAgICAgICAgICAgIGxldCB0aWxlUG9zID0gbmV3IFZlYzIoY29sICogdGlsZVNpemUueCArIHRpbGVTaXplLnggLyAyLCByb3cgKiB0aWxlU2l6ZS55ICsgdGlsZVNpemUueSAvIDIpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIGNvbGxpZGVyIGZvciB0aGlzIHRpbGVcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbGxpZGVyID0gbmV3IEFBQkIodGlsZVBvcywgdGlsZVNpemUuc2NhbGVkKDEvNCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBoaXQgPSBjb2xsaWRlci5pbnRlcnNlY3RTZWdtZW50KHN0YXJ0LCBkZWx0YSwgVmVjMi5aRVJPKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaGl0ICE9PSBudWxsICYmIHN0YXJ0LmRpc3RhbmNlU3FUbyhoaXQucG9zKSA8IHN0YXJ0LmRpc3RhbmNlU3FUbyh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoaXQgYSB3YWxsLCB3ZSBjYW4ndCBzZWUgdGhlIHBsYXllclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgfVxuXG4gICAgXG59IiwiaW1wb3J0IFZlYzIgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL0RhdGFUeXBlcy9WZWMyXCI7XG5pbXBvcnQgeyBVSUVsZW1lbnRUeXBlIH0gZnJvbSBcIi4uLy4uL1dvbGZpZTJEL05vZGVzL1VJRWxlbWVudHMvVUlFbGVtZW50VHlwZXNcIjtcbmltcG9ydCBMYXllciBmcm9tIFwiLi4vLi4vV29sZmllMkQvU2NlbmUvTGF5ZXJcIjtcbmltcG9ydCBTY2VuZSBmcm9tIFwiLi4vLi4vV29sZmllMkQvU2NlbmUvU2NlbmVcIjtcbmltcG9ydCBDb2xvciBmcm9tIFwiLi4vLi4vV29sZmllMkQvVXRpbHMvQ29sb3JcIjtcbmltcG9ydCBMYWJlbCBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvVUlFbGVtZW50cy9MYWJlbFwiO1xuLy8gaW1wb3J0IE1haW5IVzRTY2VuZSBmcm9tIFwiLi9NYWluSFc0U2NlbmVcIjtcbmltcG9ydCBHYW1lRXZlbnQgZnJvbSBcIi4uLy4uL1dvbGZpZTJEL0V2ZW50cy9HYW1lRXZlbnRcIjtcbi8vIGltcG9ydCBBc3RhckRlbW9TY2VuZSBmcm9tIFwiLi9Bc3RhckRlbW9TY2VuZVwiO1xuLy8gaW1wb3J0IEd1YXJkRGVtb1NjZW5lIGZyb20gXCIuL0d1YXJkRGVtb1NjZW5lXCI7XG5pbXBvcnQgSGVscFNjZW5lIGZyb20gXCIuL0hlbHBTY2VuZVwiO1xuaW1wb3J0IENvbnRyb2xzU2NlbmUgZnJvbSBcIi4vQ29udHJvbHNTY2VuZVwiO1xuaW1wb3J0IExldmVsU2VsZWN0aW9uU2NlbmUgZnJvbSBcIi4vTGV2ZWxTZWxlY3Rpb25TY2VuZVwiO1xuaW1wb3J0IFNwcml0ZSBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvU3ByaXRlcy9TcHJpdGVcIjtcbmltcG9ydCBJbnB1dCBmcm9tIFwiLi4vLi4vV29sZmllMkQvSW5wdXQvSW5wdXRcIjtcbmltcG9ydCB0ZXN0U2NlbmUgZnJvbSBcIi4vTGV2ZWwxU2NlbmVcIjtcbmltcG9ydCBMZXZlbDFTY2VuZSBmcm9tIFwiLi9MZXZlbDFTY2VuZVwiO1xuaW1wb3J0IHsgR2FtZUV2ZW50VHlwZSB9IGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9FdmVudHMvR2FtZUV2ZW50VHlwZVwiO1xuaW1wb3J0IExhc3RTY2VuZSBmcm9tIFwiLi9MYXN0U2NlbmVcIjtcbmltcG9ydCBMZXZlbDJTY2VuZSBmcm9tIFwiLi9MZXZlbDJTY2VuZVwiO1xuaW1wb3J0IExldmVsM1NjZW5lIGZyb20gXCIuL0xldmVsM1NjZW5lXCI7XG5pbXBvcnQgTGV2ZWw0U2NlbmUgZnJvbSBcIi4vTGV2ZWw0U2NlbmVcIjtcbmltcG9ydCBMZXZlbDVTY2VuZSBmcm9tIFwiLi9MZXZlbDVTY2VuZVwiO1xuXG5leHBvcnQgY29uc3QgTWFpbk1lbnVMYXllcnMgPSB7XG5cdFBSSU1BUlk6IFwiUFJJTUFSWVwiLFxuXHRCQUNLR1JPVU5EOiBcIkJBQ0tHUk9VTkRcIiwgXG5cdFVJOiBcIlVJXCIsXG4gICAgQ09OVFJPTFM6IFwiQ09OVFJPTFNcIixcbiAgICBIRUxQOiBcIkhFTFBcIixcbiAgICBMRVZFTFNFTEVDVDogXCJMRVZFTFNFTEVDVFwiXG59IGFzIGNvbnN0O1xuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1haW5NZW51IGV4dGVuZHMgU2NlbmUge1xuXG4gICAgcHVibGljIHN0YXRpYyBCQUNLR1JPVU5EX0tFWSA9IFwiQkFDS0dST1VORFwiXG4gICAgcHVibGljIHN0YXRpYyBCQUNLR1JPVU5EX1BBVEggPSBcImh3NF9hc3NldHMvc3ByaXRlcy9NYWluLU1lbnUucG5nXCJcblxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTVVTSUNfS0VZID0gXCJNQUlOX01FTlVfTVVTSUNcIjtcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE1VU0lDX1BBVEggPSBcImh3NF9hc3NldHMvbXVzaWMvRmFsbG9mdGhlQkdDTWFpbk1lbnUubXAzXCI7XG5cbiAgICBwcml2YXRlIGJnMTogU3ByaXRlO1xuXG4gICAgcHJvdGVjdGVkIGhlbHBJbWFnZTogU3ByaXRlO1xuICAgIHByb3RlY3RlZCBjb250cm9sc0ltYWdlOiBTcHJpdGU7XG4gICAgcHJvdGVjdGVkIGxldmVsU2VsZWN0SW1hZ2U6IFNwcml0ZTtcblxuICAgIHB1YmxpYyBzdGF0aWMgSEVMUF9LRVkgPSBcIkhFTFBcIjtcbiAgICBwdWJsaWMgc3RhdGljIEhFTFBfUEFUSCA9IFwiaHc0X2Fzc2V0cy9zcHJpdGVzL0hlbHAtU2NyZWVuLnBuZ1wiO1xuXG4gICAgcHVibGljIHN0YXRpYyBDT05UUk9MU19LRVkgPSBcIkNPTlRST0xTXCJcbiAgICBwdWJsaWMgc3RhdGljIENPTlRST0xTX1BBVEggPSBcImh3NF9hc3NldHMvc3ByaXRlcy9Db250cm9scy1TY3JlZW4ucG5nXCJcblxuICAgIFxuICAgIHB1YmxpYyBzdGF0aWMgTEVWRUxTRUxFQ1RfS0VZID0gXCJMRVZFTFNFTEVDVFwiXG4gICAgcHVibGljIHN0YXRpYyBMRVZFTFNFTEVDVF9QQVRIID0gXCJodzRfYXNzZXRzL3Nwcml0ZXMvTGV2ZWxzLVNlbGVjdGlvbi1TY3JlZW4ucG5nXCJcblxuICAgIFxuICAgIC8vIExheWVycywgZm9yIG11bHRpcGxlIG1haW4gbWVudSBzY3JlZW5zXG4gICAgcHJpdmF0ZSBtYWluTWVudTogTGF5ZXI7XG4gICAgcHJpdmF0ZSBhYm91dDogTGF5ZXI7XG4gICAgcHJpdmF0ZSBjb250cm9sOiBMYXllcjtcblxuICAgIHB1YmxpYyBsb2FkU2NlbmUoKXtcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKE1haW5NZW51LkJBQ0tHUk9VTkRfS0VZLCBNYWluTWVudS5CQUNLR1JPVU5EX1BBVEgpO1xuICAgICAgICB0aGlzLmxvYWQuYXVkaW8oTWFpbk1lbnUuTVVTSUNfS0VZLCBNYWluTWVudS5NVVNJQ19QQVRIKTtcblxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoTWFpbk1lbnUuSEVMUF9LRVksIE1haW5NZW51LkhFTFBfUEFUSCk7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShNYWluTWVudS5DT05UUk9MU19LRVksIE1haW5NZW51LkNPTlRST0xTX1BBVEgpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoTWFpbk1lbnUuTEVWRUxTRUxFQ1RfS0VZLCBNYWluTWVudS5MRVZFTFNFTEVDVF9QQVRIKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhcnRTY2VuZSgpe1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTtcbiAgICAgICAgXG4gICAgICAgIGxldCBhID0gbmV3IFZlYzIoNjYwLDQ0MCk7XG4gICAgICAgIHRoaXMudmlld3BvcnQuc2V0Q2VudGVyKGEpO1xuICAgICAgICAvLyBjb25zdCBjZW50ZXIgPSBhO1xuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGNlbnRlcik7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjZW50ZXIgPSB0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpO1xuXG4gICAgICAgIC8vIHRoaXMudmlld3BvcnQuc2V0Q2VudGVyKGNlbnRlcik7XG4gICAgICAgIC8vIGxldCBhID0gbmV3IFZlYzIoNjYwLDQ0MClcbiAgICAgICAgLy8gdGhpcy52aWV3cG9ydC5zZXRDZW50ZXIoNjYwLCA0NDApO1xuXG4gICAgICAgIHRoaXMuYWRkTGF5ZXIoTWFpbk1lbnVMYXllcnMuQkFDS0dST1VORCwgMCk7XG5cdFx0dGhpcy5pbml0QmFja2dyb3VuZCgpO1xuXG4gICAgICAgIHRoaXMuYWRkTGF5ZXIoTWFpbk1lbnVMYXllcnMuUFJJTUFSWSwgNSk7XG5cbiAgICAgICAgdGhpcy5hZGRMYXllcihNYWluTWVudUxheWVycy5DT05UUk9MUywgNik7XG4gICAgICAgIHRoaXMuYWRkTGF5ZXIoTWFpbk1lbnVMYXllcnMuSEVMUCwgNik7XG4gICAgICAgIHRoaXMuYWRkTGF5ZXIoTWFpbk1lbnVMYXllcnMuTEVWRUxTRUxFQ1QsIDYpO1xuXG4gICAgICAgIC8vIFRoZSBtYWluIG1lbnVcbiAgICAgICAgLy8gdGhpcy5tYWluTWVudSA9IHRoaXMuYWRkVUlMYXllcihcIm1haW5NZW51XCIpO1xuXG4gICAgICAgIGNvbnN0IHBsYXkgPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIE1haW5NZW51TGF5ZXJzLlBSSU1BUlksIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLnggKyAyLCBjZW50ZXIueSArIDMzNSksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgcGxheS5zaXplLnNldCgxODAsIDIxMCk7XG4gICAgICAgIHBsYXkuYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICBwbGF5LmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIHBsYXkuYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIHBsYXkub25DbGlja0V2ZW50SWQgPSBcInBsYXlcIjtcblxuICAgICAgICBjb25zdCBoZWxwID0gdGhpcy5hZGQudWlFbGVtZW50KFVJRWxlbWVudFR5cGUuQlVUVE9OLCBNYWluTWVudUxheWVycy5QUklNQVJZLCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54ICsgMjQyLCBjZW50ZXIueSArIDIzMCksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgaGVscC5zaXplLnNldCgyMzAsIDQzMCk7XG4gICAgICAgIGhlbHAuYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICBoZWxwLmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIGhlbHAuYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIGhlbHAub25DbGlja0V2ZW50SWQgPSBcImhlbHBcIjtcblxuICAgICAgICBjb25zdCBjb250cm9scyA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTWFpbk1lbnVMYXllcnMuUFJJTUFSWSwge3Bvc2l0aW9uOiBuZXcgVmVjMihjZW50ZXIueCAtIDIzOCwgY2VudGVyLnkgKyAyMzApLCB0ZXh0OiBcIlwifSk7XG4gICAgICAgIGNvbnRyb2xzLnNpemUuc2V0KDIzMCwgNDMwKTtcbiAgICAgICAgY29udHJvbHMuYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICBjb250cm9scy5ib3JkZXJDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBjb250cm9scy5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgY29udHJvbHMub25DbGlja0V2ZW50SWQgPSBcImNvbnRyb2xzXCI7XG5cbiAgICAgICAgY29uc3QgbGV2ZWwgPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIE1haW5NZW51TGF5ZXJzLlBSSU1BUlksIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLngsIGNlbnRlci55IC0gMjI1KSwgdGV4dDogXCJcIn0pO1xuICAgICAgICBsZXZlbC5zaXplLnNldCg3MDUsIDQ3MCk7XG4gICAgICAgIGxldmVsLmJvcmRlcldpZHRoID0gMjtcbiAgICAgICAgbGV2ZWwuYm9yZGVyQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgbGV2ZWwuYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIGxldmVsLm9uQ2xpY2tFdmVudElkID0gXCJsZXZlbFwiO1xuXG4gICAgICAgIGxldCBjb250cm9sc0xheWVyID0gdGhpcy5nZXRMYXllcihcIkNPTlRST0xTXCIpO1xuXG4gICAgICAgIHRoaXMuY29udHJvbHNJbWFnZSA9IHRoaXMuYWRkLnNwcml0ZShNYWluTWVudS5DT05UUk9MU19LRVksIGNvbnRyb2xzTGF5ZXIuZ2V0TmFtZSgpKTtcbiAgICAgICAgdGhpcy5jb250cm9sc0ltYWdlLnBvc2l0aW9uLmNvcHkodGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKSk7XG4gICAgICAgIC8vIHRoaXMuY29udHJvbHNJbWFnZS5hbHBoYSA9IDAuNTtcblxuICAgICAgICBjb25zdCBjb250cm9sc0JhY2tCdXR0b24gPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIE1haW5NZW51TGF5ZXJzLkNPTlRST0xTLCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54IC0gNTk1LCBjZW50ZXIueSArIDQxNSksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgY29udHJvbHNCYWNrQnV0dG9uLnNpemUuc2V0KDIwMCwgNTApO1xuICAgICAgICBjb250cm9sc0JhY2tCdXR0b24uYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICBjb250cm9sc0JhY2tCdXR0b24uYm9yZGVyQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgY29udHJvbHNCYWNrQnV0dG9uLmJhY2tncm91bmRDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBjb250cm9sc0JhY2tCdXR0b24ub25DbGlja0V2ZW50SWQgPSBcImJhY2tjb250cm9sc1wiO1xuXG4gICAgICAgIGNvbnRyb2xzTGF5ZXIuc2V0UGF1c2VkKHRydWUpO1xuICAgICAgICBjb250cm9sc0xheWVyLnNldEhpZGRlbih0cnVlKTtcblxuICAgICAgICAvLyBcbiAgICAgICAgbGV0IGhlbHBMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJIRUxQXCIpO1xuXG4gICAgICAgIHRoaXMuaGVscEltYWdlID0gdGhpcy5hZGQuc3ByaXRlKE1haW5NZW51LkhFTFBfS0VZLCBoZWxwTGF5ZXIuZ2V0TmFtZSgpKTtcbiAgICAgICAgdGhpcy5oZWxwSW1hZ2UucG9zaXRpb24uY29weSh0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTtcbiAgICAgICAgLy8gdGhpcy5oZWxwSW1hZ2UuYWxwaGEgPSAwLjU7XG5cbiAgICAgICAgY29uc3QgaGVscEJhY2tCdXR0b24gPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIE1haW5NZW51TGF5ZXJzLkhFTFAsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLnggLSA1OTUsIGNlbnRlci55ICsgNDE1KSwgdGV4dDogXCJcIn0pO1xuICAgICAgICBoZWxwQmFja0J1dHRvbi5zaXplLnNldCgyMDAsIDUwKTtcbiAgICAgICAgaGVscEJhY2tCdXR0b24uYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICBoZWxwQmFja0J1dHRvbi5ib3JkZXJDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICBoZWxwQmFja0J1dHRvbi5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgaGVscEJhY2tCdXR0b24ub25DbGlja0V2ZW50SWQgPSBcImhlbHBjb250cm9sc1wiO1xuXG4gICAgICAgIGhlbHBMYXllci5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgICAgIGhlbHBMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG5cblxuICAgICAgICBsZXQgTGV2ZWxTZWxlY3RMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJMRVZFTFNFTEVDVFwiKTtcblxuICAgICAgICB0aGlzLmxldmVsU2VsZWN0SW1hZ2UgPSB0aGlzLmFkZC5zcHJpdGUoTWFpbk1lbnUuTEVWRUxTRUxFQ1RfS0VZLCBMZXZlbFNlbGVjdExheWVyLmdldE5hbWUoKSk7XG4gICAgICAgIHRoaXMubGV2ZWxTZWxlY3RJbWFnZS5wb3NpdGlvbi5jb3B5KHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCkpO1xuXG4gICAgICAgICAvLyBCYWNrIEJ1dHRvblxuICAgICAgICAgY29uc3QgYmFjayA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTWFpbk1lbnVMYXllcnMuTEVWRUxTRUxFQ1QsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLnggLSA2MDAsIGNlbnRlci55ICsgNDIwKSwgdGV4dDogXCJcIn0pO1xuICAgICAgICAgYmFjay5zaXplLnNldCg2MDAsIDUwKTtcbiAgICAgICAgIGJhY2suYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICAgYmFjay5ib3JkZXJDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICAgYmFjay5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgIGJhY2sub25DbGlja0V2ZW50SWQgPSBcIm1haW5tZW51XCI7XG4gICAgICAgICAvLyBcbiBcbiAgICAgICAgIC8vIEx2bCAxIEJ1dHRvblxuICAgICAgICAgY29uc3QgbHZsMUJ1dHRvbiA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTWFpbk1lbnVMYXllcnMuTEVWRUxTRUxFQ1QsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLnggLSA1LCBjZW50ZXIueSArIDI2OCksIHRleHQ6IFwiXCJ9KTtcbiAgICAgICAgIGx2bDFCdXR0b24uc2l6ZS5zZXQoMzcwLCA2Nyk7XG4gICAgICAgICBsdmwxQnV0dG9uLmJvcmRlcldpZHRoID0gMjtcbiAgICAgICAgIGx2bDFCdXR0b24uYm9yZGVyQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgIGx2bDFCdXR0b24uYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgICBsdmwxQnV0dG9uLm9uQ2xpY2tFdmVudElkID0gXCJsZXZlbDFcIjtcbiAgICAgICAgIC8vXG4gXG4gICAgICAgICAvLyBMdmwgMiBCdXR0b25cbiAgICAgICAgIGNvbnN0IGx2bDJCdXR0b24gPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIE1haW5NZW51TGF5ZXJzLkxFVkVMU0VMRUNULCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54IC0gNSwgY2VudGVyLnkgKyAxOTIpLCB0ZXh0OiBcIlwifSk7XG4gICAgICAgICBsdmwyQnV0dG9uLnNpemUuc2V0KDM3MCwgNjcpO1xuICAgICAgICAgbHZsMkJ1dHRvbi5ib3JkZXJXaWR0aCA9IDI7XG4gICAgICAgICBsdmwyQnV0dG9uLmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgICBsdmwyQnV0dG9uLmJhY2tncm91bmRDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICAgbHZsMkJ1dHRvbi5vbkNsaWNrRXZlbnRJZCA9IFwibGV2ZWwyXCI7XG4gICAgICAgICAvL1xuIFxuICAgICAgICAgIC8vIEx2bCAzIEJ1dHRvblxuICAgICAgICAgIGNvbnN0IGx2bDNCdXR0b24gPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIE1haW5NZW51TGF5ZXJzLkxFVkVMU0VMRUNULCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54IC0gNSwgY2VudGVyLnkgKyAxMTYpLCB0ZXh0OiBcIlwifSk7XG4gICAgICAgICAgbHZsM0J1dHRvbi5zaXplLnNldCgzNzAsIDY3KTtcbiAgICAgICAgICBsdmwzQnV0dG9uLmJvcmRlcldpZHRoID0gMjtcbiAgICAgICAgICBsdmwzQnV0dG9uLmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgICAgbHZsM0J1dHRvbi5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgICBsdmwzQnV0dG9uLm9uQ2xpY2tFdmVudElkID0gXCJsZXZlbDNcIjtcbiAgICAgICAgICAvL1xuIFxuICAgICAgICAgIC8vIDQwXG4gXG4gICAgICAgICAgLy8gTHZsIDQgQnV0dG9uXG4gICAgICAgICAgY29uc3QgbHZsNEJ1dHRvbiA9IHRoaXMuYWRkLnVpRWxlbWVudChVSUVsZW1lbnRUeXBlLkJVVFRPTiwgTWFpbk1lbnVMYXllcnMuTEVWRUxTRUxFQ1QsIHtwb3NpdGlvbjogbmV3IFZlYzIoY2VudGVyLnggLSA1LCBjZW50ZXIueSArIDQwKSwgdGV4dDogXCJcIn0pO1xuICAgICAgICAgIGx2bDRCdXR0b24uc2l6ZS5zZXQoMzcwLCA2Nyk7XG4gICAgICAgICAgbHZsNEJ1dHRvbi5ib3JkZXJXaWR0aCA9IDI7XG4gICAgICAgICAgbHZsNEJ1dHRvbi5ib3JkZXJDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICAgIGx2bDRCdXR0b24uYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgICAgbHZsNEJ1dHRvbi5vbkNsaWNrRXZlbnRJZCA9IFwibGV2ZWw0XCI7XG4gICAgICAgICAgLy9cbiBcbiAgICAgICAgICAvLyAtMzZcbiBcbiAgICAgICAgICAvLyBMdmwgNSBCdXR0b25cbiAgICAgICAgICBjb25zdCBsdmw1QnV0dG9uID0gdGhpcy5hZGQudWlFbGVtZW50KFVJRWxlbWVudFR5cGUuQlVUVE9OLCBNYWluTWVudUxheWVycy5MRVZFTFNFTEVDVCwge3Bvc2l0aW9uOiBuZXcgVmVjMihjZW50ZXIueCAtIDUsIGNlbnRlci55IC0gMzYpLCB0ZXh0OiBcIlwifSk7XG4gICAgICAgICAgbHZsNUJ1dHRvbi5zaXplLnNldCgzNzAsIDY3KTtcbiAgICAgICAgICBsdmw1QnV0dG9uLmJvcmRlcldpZHRoID0gMjtcbiAgICAgICAgICBsdmw1QnV0dG9uLmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgICAgbHZsNUJ1dHRvbi5iYWNrZ3JvdW5kQ29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgICBsdmw1QnV0dG9uLm9uQ2xpY2tFdmVudElkID0gXCJsZXZlbDVcIjtcbiAgICAgICAgICAvL1xuIFxuICAgICAgICAgICAvLyBMdmwgNSBCdXR0b25cbiAgICAgICAgICAgY29uc3QgZmluYWxMdmxCdXR0b24gPSB0aGlzLmFkZC51aUVsZW1lbnQoVUlFbGVtZW50VHlwZS5CVVRUT04sIE1haW5NZW51TGF5ZXJzLkxFVkVMU0VMRUNULCB7cG9zaXRpb246IG5ldyBWZWMyKGNlbnRlci54IC0gNSwgY2VudGVyLnkgLSAxMjIpLCB0ZXh0OiBcIlwifSk7XG4gICAgICAgICAgIGZpbmFsTHZsQnV0dG9uLnNpemUuc2V0KDIzMCwgNjMpO1xuICAgICAgICAgICBmaW5hbEx2bEJ1dHRvbi5ib3JkZXJXaWR0aCA9IDI7XG4gICAgICAgICAgIGZpbmFsTHZsQnV0dG9uLmJvcmRlckNvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgICAgIGZpbmFsTHZsQnV0dG9uLmJhY2tncm91bmRDb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgICAgICBmaW5hbEx2bEJ1dHRvbi5vbkNsaWNrRXZlbnRJZCA9IFwiZmluYWxcIjtcbiAgICAgICAgICAgLy9cblxuICAgICAgICAgICBMZXZlbFNlbGVjdExheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICAgICAgICAgTGV2ZWxTZWxlY3RMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG4gXG4gICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcIm1haW5tZW51XCIpO1xuICAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJsZXZlbDFcIik7XG4gICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcImxldmVsMlwiKTtcbiAgICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFwibGV2ZWwzXCIpO1xuICAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJsZXZlbDRcIik7XG4gICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcImxldmVsNVwiKTtcbiAgICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFwiZmluYWxcIik7XG5cbiAgICAgICAgLy8gU3Vic2NyaWJlIHRvIHRoZSBidXR0b24gZXZlbnRzXG4gICAgICAgIHRoaXMucmVjZWl2ZXIuc3Vic2NyaWJlKFwicGxheVwiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJoZWxwXCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcImNvbnRyb2xzXCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcImxldmVsXCIpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyLnN1YnNjcmliZShcImJhY2tjb250cm9sc1wiKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJoZWxwY29udHJvbHNcIik7XG5cbiAgICAgICAgdGhpcy5lbWl0dGVyLmZpcmVFdmVudChHYW1lRXZlbnRUeXBlLlBMQVlfU09VTkQsIHtrZXk6IE1haW5NZW51Lk1VU0lDX0tFWSwgbG9vcDogdHJ1ZSwgaG9sZFJlZmVyZW5jZTogdHJ1ZX0pO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVTY2VuZSgpe1xuICAgICAgICB3aGlsZSh0aGlzLnJlY2VpdmVyLmhhc05leHRFdmVudCgpKXtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXZlbnQodGhpcy5yZWNlaXZlci5nZXROZXh0RXZlbnQoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaW5pdEJhY2tncm91bmQoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGNlbnRlciA9IHRoaXMudmlld3BvcnQuZ2V0Q2VudGVyKCk7XG5cblx0XHR0aGlzLmJnMSA9IHRoaXMuYWRkLnNwcml0ZShNYWluTWVudS5CQUNLR1JPVU5EX0tFWSwgTWFpbk1lbnVMYXllcnMuQkFDS0dST1VORCk7XG5cdFx0Ly8gdGhpcy5iZzEuc2NhbGUuc2V0KDEsIDEuMTUpO1xuICAgICAgICAvLyB0aGlzLnZpZXdwb3J0LnNldENlbnRlcig2NjAsIDQ0MCk7XG5cdFx0dGhpcy5iZzEucG9zaXRpb24uY29weShjZW50ZXIpO1xuXG4gICAgICAgIC8vIHRoaXMuYmcyID0gdGhpcy5hZGQuc3ByaXRlKFNwbGFzaFNjcmVlbi5CQUNLR1JPVU5EX0tFWSwgU3BsYXNoU2NyZWVuTGF5ZXJzLkJBQ0tHUk9VTkQpO1xuXHRcdC8vIHRoaXMuYmcyLnNjYWxlLnNldCgxLjUsIDEuNSk7XG5cdFx0Ly8gdGhpcy5iZzIucG9zaXRpb24gPSB0aGlzLmJnMS5wb3NpdGlvbi5jbG9uZSgpO1xuXHRcdC8vIHRoaXMuYmcyLnBvc2l0aW9uLmFkZCh0aGlzLmJnMS5zaXplV2l0aFpvb20uc2NhbGUoMiwgMCkpO1xuXG5cdH1cblxuICAgIHB1YmxpYyBoYW5kbGVFdmVudChldmVudDogR2FtZUV2ZW50KTogdm9pZCB7XG4gICAgICAgIHN3aXRjaChldmVudC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwicGxheVwiOiB7XG4gICAgICAgICAgICAgICAgLy8gdGhpcy5lbWl0dGVyLmZpcmVFdmVudChHYW1lRXZlbnRUeXBlLlNUT1BfU09VTkQsIHtrZXk6IE1haW5NZW51Lk1VU0lDX0tFWX0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoTGV2ZWwxU2NlbmUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcImhlbHBcIjoge1xuICAgICAgICAgICAgICAgIHRoaXMuaGVscEltYWdlLnBvc2l0aW9uLmNvcHkodGhpcy52aWV3cG9ydC5nZXRDZW50ZXIoKSk7XG4gICAgICAgICAgICAgICAgLy8gdGhpcy5wYXVzZVBhdXNlTGF5ZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhdXNlUHJpbWFyeUxheWVyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXVzZUJhY2tncm91bmRMYXllcigpOyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLnVucGF1c2VIZWxwTGF5ZXIoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJjb250cm9sc1wiOiB7XG4gICAgICAgICAgICAgICAgLy8gdGhpcy5zY2VuZU1hbmFnZXIuY2hhbmdlVG9TY2VuZShDb250cm9sc1NjZW5lKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhdXNlUHJpbWFyeUxheWVyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXVzZUJhY2tncm91bmRMYXllcigpOyAgXG4gICAgICAgICAgICAgICAgdGhpcy51bnBhdXNlQ29udHJvbHNMYXllcigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcImJhY2tjb250cm9sc1wiOiB7XG4gICAgICAgICAgICAgICAgdGhpcy51bnBhdXNlUHJpbWFyeUxheWVyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy51bnBhdXNlQmFja2dyb3VuZExheWVyKCk7ICBcbiAgICAgICAgICAgICAgICB0aGlzLnBhdXNlQ29udHJvbHNMYXllcigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcImhlbHBjb250cm9sc1wiOiB7XG4gICAgICAgICAgICAgICAgLy8gdGhpcy51bnBhdXNlUGF1c2VMYXllcigpO1xuICAgICAgICAgICAgICAgIHRoaXMudW5wYXVzZVByaW1hcnlMYXllcigpO1xuICAgICAgICAgICAgICAgIHRoaXMudW5wYXVzZUJhY2tncm91bmRMYXllcigpOyAgXG4gICAgICAgICAgICAgICAgdGhpcy5wYXVzZUhlbHBMYXllcigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcImxldmVsXCI6IHtcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKExldmVsU2VsZWN0aW9uU2NlbmUpO1xuICAgICAgICAgICAgICAgIHRoaXMucGF1c2VQcmltYXJ5TGF5ZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhdXNlQmFja2dyb3VuZExheWVyKCk7ICBcbiAgICAgICAgICAgICAgICB0aGlzLnVucGF1c2VMZXZlbFNlbGVjdExheWVyKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwibGV2ZWwxXCI6IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkdvdG8gbHZsMVwiKTsgIFxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoTGV2ZWwxU2NlbmUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcImxldmVsMlwiOiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJHb3RvIGx2bDJcIik7ICBcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKExldmVsMlNjZW5lKTtcbiAgICAgICAgICAgICAgIC8vIFRPRE8gQ2hhbmdlIHNjZW5lIHRvIGx2bCAyXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwibGV2ZWwzXCI6IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkdvdG8gbHZsM1wiKTsgIFxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoTGV2ZWwzU2NlbmUpO1xuICAgICAgICAgICAgICAgIC8vIFRPRE8gQ2hhbmdlIHNjZW5lIHRvIGx2bCAzXG4gICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICBjYXNlIFwibGV2ZWw0XCI6IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkdvdG8gbHZsNFwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKExldmVsNFNjZW5lKTsgIFxuICAgICAgICAgICAgICAgIC8vIFRPRE8gQ2hhbmdlIHNjZW5lIHRvIGx2bCA0XG4gICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICBjYXNlIFwibGV2ZWw1XCI6IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkdvdG8gbHZsNVwiKTsgIFxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoTGV2ZWw1U2NlbmUpOyAgXG4gICAgICAgICAgICAgICAgLy8gVE9ETyBDaGFuZ2Ugc2NlbmUgdG8gbHZsIDVcbiAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgfVxuICAgICAgICAgICAgIGNhc2UgXCJmaW5hbFwiOiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJHb3RvIGZpbmFsIGx2bFwiKTsgIFxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLmNoYW5nZVRvU2NlbmUoTGFzdFNjZW5lKTtcbiAgICAgICAgICAgICAgICAvLyBUT0RPIENoYW5nZSBzY2VuZSB0byBmaW5hbCBsZXZlbFxuICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgY2FzZSBcIm1haW5tZW51XCI6IHtcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKE1haW5NZW51KTtcbiAgICAgICAgICAgICAgICB0aGlzLnVucGF1c2VQcmltYXJ5TGF5ZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVucGF1c2VCYWNrZ3JvdW5kTGF5ZXIoKTsgIFxuICAgICAgICAgICAgICAgIHRoaXMucGF1c2VMZXZlbFNlbGVjdExheWVyKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgcGF1c2VQcmltYXJ5TGF5ZXIoKTogdm9pZCB7XG4gICAgICAgIGxldCBwcmltYXJ5TGF5ZXIgPSB0aGlzLmdldExheWVyKFwiUFJJTUFSWVwiKTtcbiAgICAgICAgcHJpbWFyeUxheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICAgICAgcHJpbWFyeUxheWVyLnNldEhpZGRlbih0cnVlKTtcbiAgICB9XG4gICAgXG4gICAgcHJvdGVjdGVkIHVucGF1c2VQcmltYXJ5TGF5ZXIoKTogdm9pZCB7XG4gICAgICAgIGxldCBwcmltYXJ5TGF5ZXIgPSB0aGlzLmdldExheWVyKFwiUFJJTUFSWVwiKTtcbiAgICAgICAgcHJpbWFyeUxheWVyLnNldFBhdXNlZChmYWxzZSk7XG4gICAgICAgIHByaW1hcnlMYXllci5zZXRIaWRkZW4oZmFsc2UpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBwYXVzZUJhY2tncm91bmRMYXllcigpOiB2b2lkIHtcbiAgICAgICAgbGV0IGJhY2tncm91bmRMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJCQUNLR1JPVU5EXCIpO1xuICAgICAgICBiYWNrZ3JvdW5kTGF5ZXIuc2V0UGF1c2VkKHRydWUpO1xuICAgICAgICBiYWNrZ3JvdW5kTGF5ZXIuc2V0SGlkZGVuKHRydWUpO1xuICAgIH1cbiAgICBcbiAgICBwcm90ZWN0ZWQgdW5wYXVzZUJhY2tncm91bmRMYXllcigpOiB2b2lkIHtcbiAgICAgICAgbGV0IGJhY2tncm91bmRMYXllciA9IHRoaXMuZ2V0TGF5ZXIoXCJCQUNLR1JPVU5EXCIpO1xuICAgICAgICBiYWNrZ3JvdW5kTGF5ZXIuc2V0UGF1c2VkKGZhbHNlKTtcbiAgICAgICAgYmFja2dyb3VuZExheWVyLnNldEhpZGRlbihmYWxzZSk7XG4gICAgfVxuXG5cbiAgICBwcm90ZWN0ZWQgcGF1c2VIZWxwTGF5ZXIoKTogdm9pZCB7XG4gICAgICAgIGxldCBoZWxwTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiSEVMUFwiKTtcbiAgICAgICAgaGVscExheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICAgICAgaGVscExheWVyLnNldEhpZGRlbih0cnVlKTtcbiAgICB9XG4gICAgXG4gICAgcHJvdGVjdGVkIHVucGF1c2VIZWxwTGF5ZXIoKTogdm9pZCB7XG4gICAgICAgIGxldCBoZWxwTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiSEVMUFwiKTtcbiAgICAgICAgaGVscExheWVyLnNldFBhdXNlZChmYWxzZSk7XG4gICAgICAgIGhlbHBMYXllci5zZXRIaWRkZW4oZmFsc2UpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBwYXVzZUNvbnRyb2xzTGF5ZXIoKTogdm9pZCB7XG4gICAgICAgIGxldCBjb250cm9sc0xheWVyID0gdGhpcy5nZXRMYXllcihcIkNPTlRST0xTXCIpO1xuICAgICAgICBjb250cm9sc0xheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICAgICAgY29udHJvbHNMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG4gICAgfVxuICAgIFxuICAgIHByb3RlY3RlZCB1bnBhdXNlQ29udHJvbHNMYXllcigpOiB2b2lkIHtcbiAgICAgICAgbGV0IGNvbnRyb2xzTGF5ZXIgPSB0aGlzLmdldExheWVyKFwiQ09OVFJPTFNcIik7XG4gICAgICAgIGNvbnRyb2xzTGF5ZXIuc2V0UGF1c2VkKGZhbHNlKTtcbiAgICAgICAgY29udHJvbHNMYXllci5zZXRIaWRkZW4oZmFsc2UpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBwYXVzZUxldmVsU2VsZWN0TGF5ZXIoKTogdm9pZCB7XG4gICAgICAgIGxldCBsZXZlbFNlbGVjdExheWVyID0gdGhpcy5nZXRMYXllcihcIkxFVkVMU0VMRUNUXCIpO1xuICAgICAgICBsZXZlbFNlbGVjdExheWVyLnNldFBhdXNlZCh0cnVlKTtcbiAgICAgICAgbGV2ZWxTZWxlY3RMYXllci5zZXRIaWRkZW4odHJ1ZSk7XG4gICAgfVxuICAgIFxuICAgIHByb3RlY3RlZCB1bnBhdXNlTGV2ZWxTZWxlY3RMYXllcigpOiB2b2lkIHtcbiAgICAgICAgbGV0IGxldmVsU2VsZWN0TGF5ZXIgPSB0aGlzLmdldExheWVyKFwiTEVWRUxTRUxFQ1RcIik7XG4gICAgICAgIGxldmVsU2VsZWN0TGF5ZXIuc2V0UGF1c2VkKGZhbHNlKTtcbiAgICAgICAgbGV2ZWxTZWxlY3RMYXllci5zZXRIaWRkZW4oZmFsc2UpO1xuICAgIH1cblxuICAgIHB1YmxpYyB1bmxvYWRTY2VuZSgpOiB2b2lkIHtcbiAgICAgICAgLy8gVGhlIHNjZW5lIGlzIGJlaW5nIGRlc3Ryb3llZCwgc28gd2UgY2FuIHN0b3AgcGxheWluZyB0aGUgc29uZ1xuICAgICAgICB0aGlzLmVtaXR0ZXIuZmlyZUV2ZW50KEdhbWVFdmVudFR5cGUuU1RPUF9TT1VORCwge2tleTogTWFpbk1lbnUuTVVTSUNfS0VZfSk7XG4gICAgfVxufSIsImltcG9ydCBWZWMyIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9EYXRhVHlwZXMvVmVjMlwiO1xuaW1wb3J0IEdhbWVFdmVudCBmcm9tIFwiLi4vLi4vV29sZmllMkQvRXZlbnRzL0dhbWVFdmVudFwiO1xuaW1wb3J0IFNwcml0ZSBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvU3ByaXRlcy9TcHJpdGVcIjtcbmltcG9ydCB7IFVJRWxlbWVudFR5cGUgfSBmcm9tIFwiLi4vLi4vV29sZmllMkQvTm9kZXMvVUlFbGVtZW50cy9VSUVsZW1lbnRUeXBlc1wiO1xuaW1wb3J0IFNjZW5lIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9TY2VuZS9TY2VuZVwiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi8uLi9Xb2xmaWUyRC9VdGlscy9Db2xvclwiO1xuaW1wb3J0IE1haW5NZW51IGZyb20gXCIuL01haW5NZW51XCI7XG5pbXBvcnQgdGVzdE1lbnUgZnJvbSBcIi4vTWFpbk1lbnVcIjtcblxuZXhwb3J0IGNvbnN0IFNwbGFzaFNjcmVlbkxheWVycyA9IHtcblx0UFJJTUFSWTogXCJQUklNQVJZXCIsXG5cdEJBQ0tHUk9VTkQ6IFwiQkFDS0dST1VORFwiLCBcblx0VUk6IFwiVUlcIlxufSBhcyBjb25zdDtcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTcGxhc2hTY3JlZW4gZXh0ZW5kcyBTY2VuZSB7XG5cbiAgICBwdWJsaWMgc3RhdGljIEJBQ0tHUk9VTkRfS0VZID0gXCJCQUNLR1JPVU5EXCJcbiAgICBwdWJsaWMgc3RhdGljIEJBQ0tHUk9VTkRfUEFUSCA9IFwiaHc0X2Fzc2V0cy9zcHJpdGVzL1NwbGFzaC1TY3JlZW4ucG5nXCJcblxuXG4gICAgcHJpdmF0ZSBiZzE6IFNwcml0ZTtcbiAgICBwcml2YXRlIGJnMjogU3ByaXRlO1xuXG5cbiAgICBwdWJsaWMgbG9hZFNjZW5lKCl7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShTcGxhc2hTY3JlZW4uQkFDS0dST1VORF9LRVksIFNwbGFzaFNjcmVlbi5CQUNLR1JPVU5EX1BBVEgpO1xuXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXJ0U2NlbmUoKXtcblxuICAgICAgICBjb25zdCBjZW50ZXIgPSB0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpO1xuXG4gICAgICAgIHRoaXMuYWRkTGF5ZXIoU3BsYXNoU2NyZWVuTGF5ZXJzLkJBQ0tHUk9VTkQsIDApO1xuXHRcdHRoaXMuaW5pdEJhY2tncm91bmQoKTtcblxuICAgICAgICB0aGlzLmFkZExheWVyKFNwbGFzaFNjcmVlbkxheWVycy5QUklNQVJZLCA1KTtcblxuICAgICAgICBjb25zdCBwbGF5ID0gdGhpcy5hZGQudWlFbGVtZW50KFVJRWxlbWVudFR5cGUuQlVUVE9OLCBTcGxhc2hTY3JlZW5MYXllcnMuUFJJTUFSWSwge3Bvc2l0aW9uOiBuZXcgVmVjMihjZW50ZXIueCwgY2VudGVyLnkgKyA0NzUpLCB0ZXh0OiBcIlwifSk7XG4gICAgICAgIHBsYXkuc2l6ZS5zZXQoMTMyMCwgMjAwMCk7XG4gICAgICAgIHBsYXkuYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICBwbGF5LmJvcmRlckNvbG9yID0gQ29sb3IuV0hJVEU7XG4gICAgICAgIHBsYXkuYmFja2dyb3VuZENvbG9yID0gQ29sb3IuVFJBTlNQQVJFTlQ7XG4gICAgICAgIHBsYXkub25DbGlja0V2ZW50SWQgPSBcIm1haW5tZW51XCI7XG5cbiAgICAgICAgdGhpcy5yZWNlaXZlci5zdWJzY3JpYmUoXCJtYWlubWVudVwiKTtcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVTY2VuZSgpe1xuICAgICAgICB3aGlsZSh0aGlzLnJlY2VpdmVyLmhhc05leHRFdmVudCgpKXtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXZlbnQodGhpcy5yZWNlaXZlci5nZXROZXh0RXZlbnQoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaW5pdEJhY2tncm91bmQoKTogdm9pZCB7XG5cdFx0dGhpcy5iZzEgPSB0aGlzLmFkZC5zcHJpdGUoU3BsYXNoU2NyZWVuLkJBQ0tHUk9VTkRfS0VZLCBTcGxhc2hTY3JlZW5MYXllcnMuQkFDS0dST1VORCk7XG5cdFx0Ly8gdGhpcy5iZzEuc2NhbGUuc2V0KDEuNzUsIDEuMik7XG5cdFx0dGhpcy5iZzEucG9zaXRpb24uY29weSh0aGlzLnZpZXdwb3J0LmdldENlbnRlcigpKTtcblxuICAgICAgICAvLyB0aGlzLmJnMiA9IHRoaXMuYWRkLnNwcml0ZShTcGxhc2hTY3JlZW4uQkFDS0dST1VORF9LRVksIFNwbGFzaFNjcmVlbkxheWVycy5CQUNLR1JPVU5EKTtcblx0XHQvLyB0aGlzLmJnMi5zY2FsZS5zZXQoMS41LCAxLjUpO1xuXHRcdC8vIHRoaXMuYmcyLnBvc2l0aW9uID0gdGhpcy5iZzEucG9zaXRpb24uY2xvbmUoKTtcblx0XHQvLyB0aGlzLmJnMi5wb3NpdGlvbi5hZGQodGhpcy5iZzEuc2l6ZVdpdGhab29tLnNjYWxlKDIsIDApKTtcblxuXHR9XG5cbiAgICBwdWJsaWMgaGFuZGxlRXZlbnQoZXZlbnQ6IEdhbWVFdmVudCk6IHZvaWQge1xuICAgICAgICBzd2l0Y2goZXZlbnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcIm1haW5tZW51XCI6IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5jaGFuZ2VUb1NjZW5lKE1haW5NZW51KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxufSIsImltcG9ydCBHYW1lIGZyb20gXCIuL1dvbGZpZTJEL0xvb3AvR2FtZVwiO1xuaW1wb3J0IE1haW5NZW51IGZyb20gXCIuL2h3NC9TY2VuZXMvTWFpbk1lbnVcIjtcbmltcG9ydCB7IFBsYXllcklucHV0IH0gZnJvbSBcIi4vaHc0L0FJL1BsYXllci9QbGF5ZXJDb250cm9sbGVyXCI7XG5pbXBvcnQgU3BsYXNoU2NyZWVuIGZyb20gXCIuL2h3NC9TY2VuZXMvU3BsYXNoU2NyZWVuXCI7XG5cbi8vIFRoZSBtYWluIGZ1bmN0aW9uIGlzIHlvdXIgZW50cnlwb2ludCBpbnRvIFdvbGZpZTJELiBTcGVjaWZ5IHlvdXIgZmlyc3Qgc2NlbmUgYW5kIGFueSBvcHRpb25zIGhlcmUuXG4oZnVuY3Rpb24gbWFpbigpe1xuICAgIC8vIFJ1biBhbnkgdGVzdHNcbiAgICBydW5UZXN0cygpO1xuXG4gICAgLy8gU2V0IHVwIG9wdGlvbnMgZm9yIG91ciBnYW1lXG4gICAgbGV0IG9wdGlvbnMgPSB7XG4gICAgICAgIGNhbnZhc1NpemU6IHt4OiAxMzIwLCB5OiA4ODB9LCAgICAgICAgICAvLyBUaGUgc2l6ZSBvZiB0aGUgZ2FtZSB4OiAxMzIwLCB5OiA4ODBcbiAgICAgICAgY2xlYXJDb2xvcjoge3I6IDAuMSwgZzogMC4xLCBiOiAwLjF9LCAgIC8vIFRoZSBjb2xvciB0aGUgZ2FtZSBjbGVhcnMgdG9cbiAgICAgICAgaW5wdXRzOiBbXG4gICAgICAgICAgICB7bmFtZTogUGxheWVySW5wdXQuTU9WRV9VUCwga2V5czogW1wid1wiXX0sXG4gICAgICAgICAgICB7bmFtZTogUGxheWVySW5wdXQuTU9WRV9ET1dOLCBrZXlzOiBbXCJzXCJdfSxcbiAgICAgICAgICAgIHtuYW1lOiBQbGF5ZXJJbnB1dC5NT1ZFX0xFRlQsIGtleXM6IFtcImFcIl19LFxuICAgICAgICAgICAge25hbWU6IFBsYXllcklucHV0Lk1PVkVfUklHSFQsIGtleXM6IFtcImRcIl19LFxuICAgICAgICAgICAge25hbWU6IFBsYXllcklucHV0LlBJQ0tVUF9JVEVNLCBrZXlzOiBbXCJlXCJdfSxcbiAgICAgICAgICAgIHtuYW1lOiBQbGF5ZXJJbnB1dC5EUk9QX0lURU0sIGtleXM6IFtcInFcIl19LFxuICAgICAgICAgICAge25hbWU6IFwic2xvdDFcIiwga2V5czogW1wiMVwiXX0sXG4gICAgICAgICAgICB7bmFtZTogXCJzbG90MlwiLCBrZXlzOiBbXCIyXCJdfSxcbiAgICAgICAgXSxcbiAgICAgICAgdXNlV2ViR0w6IGZhbHNlLCAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRlbGwgdGhlIGdhbWUgd2Ugd2FudCB0byB1c2Ugd2ViZ2xcbiAgICAgICAgc2hvd0RlYnVnOiBmYWxzZSAgICAgICAgICAgICAgICAgICAgICAvLyBXaGV0aGVyIHRvIHNob3cgZGVidWcgbWVzc2FnZXMuIFlvdSBjYW4gY2hhbmdlIHRoaXMgdG8gdHJ1ZSBpZiB5b3Ugd2FudFxuICAgIH1cblxuICAgIC8vIFNldCB1cCBjdXN0b20gcmVnaXN0cmllc1xuXG4gICAgLy8gQ3JlYXRlIGEgZ2FtZSB3aXRoIHRoZSBvcHRpb25zIHNwZWNpZmllZFxuICAgIGNvbnN0IGdhbWUgPSBuZXcgR2FtZShvcHRpb25zKTtcblxuICAgIC8vIFN0YXJ0IG91ciBnYW1lXG4gICAgZ2FtZS5zdGFydChTcGxhc2hTY3JlZW4sIHt9KTtcbiAgICBcbn0pKCk7XG5cbmZ1bmN0aW9uIHJ1blRlc3RzKCl7fTsiXX0=
