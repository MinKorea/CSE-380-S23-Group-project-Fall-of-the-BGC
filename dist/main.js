/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();const e=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},n={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let e=0;e<t.length;e+=3){const r=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,h=a?t[e+2]:0,c=r>>2,l=(3&r)<<4|o>>4;let u=(15&o)<<2|h>>6,d=63&h;a||(d=64,s||(u=64)),i.push(n[c],n[l],n[u],n[d])}return i.join("")},encodeString(t,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(t):this.encodeByteArray(e(t),n)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let e=0;e<t.length;){const s=n[t.charAt(e++)],o=e<t.length?n[t.charAt(e)]:0;++e;const a=e<t.length?n[t.charAt(e)]:64;++e;const h=e<t.length?n[t.charAt(e)]:64;if(++e,null==s||null==o||null==a||null==h)throw new i;const c=s<<2|o>>4;if(r.push(c),64!==a){const t=o<<4&240|a>>2;if(r.push(t),64!==h){const t=a<<6&192|h;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const r=function(t){return function(t){const i=e(t);return n.encodeByteArray(i,!0)}(t).replace(/\./g,"")},s=function(t){try{return n.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},o=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t.g)return t.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&s(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}};class a{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function h(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function c(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function l(){try{return"object"==typeof indexedDB}catch(t){return!1}}function u(){return new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}class d extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,d.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,f.prototype.create)}}class f{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?function(t,e){return t.replace(p,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new d(i,o,n)}}const p=/\{\$([^}]+)}/g;function g(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(m(n)&&m(s)){if(!g(n,s))return!1}else if(n!==s)return!1}for(const t of i)if(!n.includes(t))return!1;return!0}function m(t){return null!==t&&"object"==typeof t}function y(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function v(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}})),e}function I(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class b{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=function(t,e){if("object"!=typeof t||null===t)return!1;for(const e of["next","error","complete"])if(e in t&&"function"==typeof t[e])return!0;return!1}(t)?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=w),void 0===i.error&&(i.error=w),void 0===i.complete&&(i.complete=w);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}})),this.observers.push(i),r}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function w(){}const T=1e3,E=2,_=144e5,S=.5;function k(t,e=T,n=E){const i=e*Math.pow(n,t),r=Math.round(S*i*(Math.random()-.5)*2);return Math.min(_,i+r)}function A(t){return t&&t._delegate?t._delegate:t}class C{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const R="[DEFAULT]";class O{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new a;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(i)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:R})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=R){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=R){return this.instances.has(t)}getOptions(t=R){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(i);return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===R?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var i;return n||null}normalizeInstanceIdentifier(t=R){return this.component?this.component.multipleInstances?t:R:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class N{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new O(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const D=[];var P,L;(L=P||(P={}))[L.DEBUG=0]="DEBUG",L[L.VERBOSE=1]="VERBOSE",L[L.INFO=2]="INFO",L[L.WARN=3]="WARN",L[L.ERROR=4]="ERROR",L[L.SILENT=5]="SILENT";const M={debug:P.DEBUG,verbose:P.VERBOSE,info:P.INFO,warn:P.WARN,error:P.ERROR,silent:P.SILENT},U=P.INFO,x={[P.DEBUG]:"log",[P.VERBOSE]:"log",[P.INFO]:"info",[P.WARN]:"warn",[P.ERROR]:"error"},F=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=x[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class j{constructor(t){this.name=t,this._logLevel=U,this._logHandler=F,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in P))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?M[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,P.DEBUG,...t),this._logHandler(this,P.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,P.VERBOSE,...t),this._logHandler(this,P.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,P.INFO,...t),this._logHandler(this,P.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,P.WARN,...t),this._logHandler(this,P.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,P.ERROR,...t),this._logHandler(this,P.ERROR,...t)}}const B=(t,e)=>e.some((e=>t instanceof e));let V,H;const $=new WeakMap,z=new WeakMap,K=new WeakMap,q=new WeakMap,G=new WeakMap;let W={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return z.get(t);if("objectStoreNames"===e)return t.objectStoreNames||K.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return J(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function X(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(H||(H=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Y(this),t),J($.get(this))}:function(...t){return J(e.apply(Y(this),t))}:function(t,...n){const i=e.call(Y(this),t,...n);return K.set(i,t.sort?t.sort():[t]),J(i)}:(t instanceof IDBTransaction&&function(t){if(z.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));z.set(t,e)}(t),B(t,V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,W):t);var e}function J(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(J(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&$.set(e,t)})).catch((()=>{})),G.set(e,t),e}(t);if(q.has(t))return q.get(t);const e=X(t);return e!==t&&(q.set(t,e),G.set(e,t)),e}const Y=t=>G.get(t);function Q(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=J(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(J(o.result),t.oldVersion,t.newVersion,J(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(()=>r()))})).catch((()=>{})),a}const Z=["get","getKey","getAll","getAllKeys","count"],tt=["put","add","delete","clear"],et=new Map;function nt(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(et.get(e))return et.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=tt.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Z.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&s.done]))[0]};return et.set(e,s),s}var it;it=W,W={...it,get:(t,e,n)=>nt(t,e)||it.get(t,e,n),has:(t,e)=>!!nt(t,e)||it.has(t,e)};class rt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const st="@firebase/app",ot="0.9.5",at=new j("@firebase/app"),ht="[DEFAULT]",ct={[st]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},lt=new Map,ut=new Map;function dt(t,e){try{t.container.addComponent(e)}catch(n){at.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ft(t){const e=t.name;if(ut.has(e))return at.debug(`There were multiple attempts to register component ${e}.`),!1;ut.set(e,t);for(const e of lt.values())dt(e,t);return!0}function pt(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const gt=new f("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class mt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new C("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw gt.create("app-deleted",{appName:this._name})}}const yt="9.18.0";function vt(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:ht,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!=typeof r||!r)throw gt.create("bad-app-name",{appName:String(r)});if(n||(n=null===(s=o())||void 0===s?void 0:s.config),!n)throw gt.create("no-options");var s;const a=lt.get(r);if(a){if(g(n,a.options)&&g(i,a.config))return a;throw gt.create("duplicate-app",{appName:r})}const h=new N(r);for(const t of ut.values())h.addComponent(t);const c=new mt(n,i,h);return lt.set(r,c),c}function It(t,e,n){var i;let r=null!==(i=ct[t])&&void 0!==i?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${r}" with version "${e}":`];return s&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void at.warn(t.join(" "))}ft(new C(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}const bt="firebase-heartbeat-database",wt=1,Tt="firebase-heartbeat-store";let Et=null;function _t(){return Et||(Et=Q(bt,wt,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Tt)}}).catch((t=>{throw gt.create("idb-open",{originalErrorMessage:t.message})}))),Et}async function St(t,e){try{const n=(await _t()).transaction(Tt,"readwrite"),i=n.objectStore(Tt);return await i.put(e,kt(t)),n.done}catch(t){if(t instanceof d)at.warn(t.message);else{const e=gt.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});at.warn(e.message)}}}function kt(t){return`${t.name}!${t.options.appId}`}class At{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Rt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),e=Ct();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==e&&!this._heartbeatsCache.heartbeats.some((t=>t.date===e)))return this._heartbeatsCache.heartbeats.push({date:e,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ct(),{heartbeatsToSend:e,unsentEntries:n}=function(t,e=1024){const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),Ot(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Ot(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=r(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ct(){return(new Date).toISOString().substring(0,10)}class Rt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!l()&&u().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(t){try{return(await _t()).transaction(Tt).objectStore(Tt).get(kt(t))}catch(t){if(t instanceof d)at.warn(t.message);else{const e=gt.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});at.warn(e.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return St(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return St(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function Ot(t){return r(JSON.stringify({version:2,heartbeats:t})).length}ft(new C("platform-logger",(t=>new rt(t)),"PRIVATE")),ft(new C("heartbeat",(t=>new At(t)),"PRIVATE")),It(st,ot,""),It(st,ot,"esm2017"),It("fire-js",""),It("firebase","9.18.0","app");const Nt="@firebase/installations",Dt="0.6.4",Pt=1e4,Lt=`w:${Dt}`,Mt="FIS_v2",Ut="https://firebaseinstallations.googleapis.com/v1",xt=36e5,Ft=new f("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function jt(t){return t instanceof d&&t.code.includes("request-failed")}function Bt({projectId:t}){return`${Ut}/projects/${t}/installations`}function Vt(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function Ht(t,e){const n=(await e.json()).error;return Ft.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function $t({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}async function zt(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Kt(t){return new Promise((e=>{setTimeout(e,t)}))}const qt=/^[cdef][\w-]{21}$/,Gt="";function Wt(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){var e;return(e=t,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22)}(t);return qt.test(e)?e:Gt}catch(t){return Gt}}function Xt(t){return`${t.appName}!${t.appId}`}const Jt=new Map;function Yt(t,e){const n=Xt(t);Qt(n,e),function(t,e){const n=(!Zt&&"BroadcastChannel"in self&&(Zt=new BroadcastChannel("[Firebase] FID Change"),Zt.onmessage=t=>{Qt(t.data.key,t.data.fid)}),Zt);n&&n.postMessage({key:t,fid:e}),0===Jt.size&&Zt&&(Zt.close(),Zt=null)}(n,e)}function Qt(t,e){const n=Jt.get(t);if(n)for(const t of n)t(e)}let Zt=null;const te="firebase-installations-database",ee=1,ne="firebase-installations-store";let ie=null;function re(){return ie||(ie=Q(te,ee,{upgrade:(t,e)=>{0===e&&t.createObjectStore(ne)}})),ie}async function se(t,e){const n=Xt(t),i=(await re()).transaction(ne,"readwrite"),r=i.objectStore(ne),s=await r.get(n);return await r.put(e,n),await i.done,s&&s.fid===e.fid||Yt(t,e.fid),e}async function oe(t){const e=Xt(t),n=(await re()).transaction(ne,"readwrite");await n.objectStore(ne).delete(e),await n.done}async function ae(t,e){const n=Xt(t),i=(await re()).transaction(ne,"readwrite"),r=i.objectStore(ne),s=await r.get(n),o=e(s);return void 0===o?await r.delete(n):await r.put(o,n),await i.done,!o||s&&s.fid===o.fid||Yt(t,o.fid),o}async function he(t){let e;const n=await ae(t.appConfig,(n=>{const i=function(t){return ue(t||{fid:Wt(),registrationStatus:0})}(n),r=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Ft.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(t,e){try{const n=await async function({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=Bt(t),r=$t(t),s=e.getImmediate({optional:!0});if(s){const t=await s.getHeartbeatsHeader();t&&r.append("x-firebase-client",t)}const o={fid:n,authVersion:Mt,appId:t.appId,sdkVersion:Lt},a={method:"POST",headers:r,body:JSON.stringify(o)},h=await zt((()=>fetch(i,a)));if(h.ok){const t=await h.json();return{fid:t.fid||n,registrationStatus:2,refreshToken:t.refreshToken,authToken:Vt(t.authToken)}}throw await Ht("Create Installation",h)}(t,e);return se(t.appConfig,n)}catch(n){throw jt(n)&&409===n.customData.serverCode?await oe(t.appConfig):await se(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}(t,n);return{installationEntry:n,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:ce(t)}:{installationEntry:e}}(t,i);return e=r.registrationPromise,r.installationEntry}));return n.fid===Gt?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}async function ce(t){let e=await le(t.appConfig);for(;1===e.registrationStatus;)await Kt(100),e=await le(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await he(t);return n||e}return e}function le(t){return ae(t,(t=>{if(!t)throw Ft.create("installation-not-found");return ue(t)}))}function ue(t){return 1===(e=t).registrationStatus&&e.registrationTime+Pt<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}async function de({appConfig:t,heartbeatServiceProvider:e},n){const i=function(t,{fid:e}){return`${Bt(t)}/${e}/authTokens:generate`}(t,n),r=function(t,{refreshToken:e}){const n=$t(t);return n.append("Authorization",function(t){return`${Mt} ${t}`}(e)),n}(t,n),s=e.getImmediate({optional:!0});if(s){const t=await s.getHeartbeatsHeader();t&&r.append("x-firebase-client",t)}const o={installation:{sdkVersion:Lt,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},h=await zt((()=>fetch(i,a)));if(h.ok)return Vt(await h.json());throw await Ht("Generate Auth Token",h)}async function fe(t,e=!1){let n;const i=await ae(t.appConfig,(i=>{if(!ge(i))throw Ft.create("not-registered");const r=i.authToken;if(!e&&(2===(s=r).requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+xt}(s)))return i;var s;if(1===r.requestStatus)return n=async function(t,e){let n=await pe(t.appConfig);for(;1===n.authToken.requestStatus;)await Kt(100),n=await pe(t.appConfig);const i=n.authToken;return 0===i.requestStatus?fe(t,e):i}(t,e),i;{if(!navigator.onLine)throw Ft.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(i);return n=async function(t,e){try{const n=await de(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await se(t.appConfig,i),n}catch(n){if(!jt(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await se(t.appConfig,n)}else await oe(t.appConfig);throw n}}(t,e),e}}));return n?await n:i.authToken}function pe(t){return ae(t,(t=>{if(!ge(t))throw Ft.create("not-registered");return 1===(e=t.authToken).requestStatus&&e.requestTime+Pt<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var e}))}function ge(t){return void 0!==t&&2===t.registrationStatus}function me(t){return Ft.create("missing-app-config-values",{valueName:t})}const ye="installations";ft(new C(ye,(t=>{const e=t.getProvider("app").getImmediate(),n=function(t){if(!t||!t.options)throw me("App Configuration");if(!t.name)throw me("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw me(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:pt(e,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),ft(new C("installations-internal",(t=>{const e=pt(t.getProvider("app").getImmediate(),ye).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:n,registrationPromise:i}=await he(e);return i?i.catch(console.error):fe(e).catch(console.error),n.fid}(e),getToken:t=>async function(t,e=!1){const n=t;return await async function(t){const{registrationPromise:e}=await he(t);e&&await e}(n),(await fe(n,e)).token}(e,t)}}),"PRIVATE")),It(Nt,Dt),It(Nt,Dt,"esm2017");const ve="analytics",Ie="firebase_id",be="origin",we=6e4,Te="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ee="https://www.googletagmanager.com/gtag/js",_e=new j("@firebase/analytics");function Se(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}const ke=new f("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ae=30,Ce=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function Re(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Oe(t,e=Ce,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw ke.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw ke.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new De;return setTimeout((async()=>{a.abort()}),void 0!==n?n:we),Ne({appId:i,apiKey:r,measurementId:s},o,a,e)}async function Ne(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=Ce){var s;const{appId:o,measurementId:a}=t;try{await function(t,e){return new Promise(((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener((()=>{clearTimeout(s),i(ke.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(i,e)}catch(t){if(a)return _e.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==t?void 0:t.message}]`),{appId:o,measurementId:a};throw t}try{const e=await async function(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:Re(i)},s=Te.replace("{app-id}",n),o=await fetch(s,r);if(200!==o.status&&304!==o.status){let t="";try{const n=await o.json();(null===(e=n.error)||void 0===e?void 0:e.message)&&(t=n.error.message)}catch(t){}throw ke.create("config-fetch-failed",{httpStatus:o.status,responseMessage:t})}return o.json()}(t);return r.deleteThrottleMetadata(o),e}catch(e){const h=e;if(!function(t){if(!(t instanceof d&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(h)){if(r.deleteThrottleMetadata(o),a)return _e.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==h?void 0:h.message}]`),{appId:o,measurementId:a};throw e}const c=503===Number(null===(s=null==h?void 0:h.customData)||void 0===s?void 0:s.httpStatus)?k(n,r.intervalMillis,Ae):k(n,r.intervalMillis),l={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return r.setThrottleMetadata(o,l),_e.debug(`Calling attemptFetch again in ${c} millis`),Ne(t,l,i,r)}}class De{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}let Pe,Le;async function Me(t,e,n,i,r,s,o){var a;const h=Oe(t);h.then((e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&_e.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((t=>_e.error(t))),e.push(h);const c=async function(){if(!l())return _e.warn(ke.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await u()}catch(t){return _e.warn(ke.create("indexeddb-unavailable",{errorInfo:null==t?void 0:t.toString()}).message),!1}return!0}().then((t=>t?i.getId():void 0)),[d,f]=await Promise.all([h,c]);(function(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Ee)&&n.src.includes(t))return n;return null})(s)||function(t,e){const n=document.createElement("script");n.src=`${Ee}?l=${t}&id=${e}`,n.async=!0,document.head.appendChild(n)}(s,d.measurementId),Le&&(r("consent","default",Le),Le=void 0),r("js",new Date);const p=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return p[be]="firebase",p.update=!0,null!=f&&(p[Ie]=f),r("config",d.measurementId,p),Pe&&(r("set",Pe),Pe=void 0),d.measurementId}class Ue{constructor(t){this.app=t}_delete(){return delete xe[this.app.options.appId],Promise.resolve()}}let xe={},Fe=[];const je={};let Be,Ve,He="dataLayer",$e=!1;function ze(t,e,n){!function(){const t=[];if(c()&&t.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>`(${e+1}) ${t}`)).join(" "),n=ke.create("invalid-analytics-context",{errorInfo:e});_e.warn(n.message)}}();const i=t.options.appId;if(!i)throw ke.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw ke.create("no-api-key");_e.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=xe[i])throw ke.create("already-exists",{id:i});if(!$e){!function(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(He);const{wrappedGtag:t,gtagCore:e}=function(t,e,n,i,r){let s=function(...t){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(s=window[r]),window[r]=function(t,e,n,i){return async function(r,s,o){try{"event"===r?await async function(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let t=r.send_to;Array.isArray(t)||(t=[t]);const i=await Se(n);for(const n of t){const t=i.find((t=>t.measurementId===n)),r=t&&e[t.appId];if(!r){s=[];break}s.push(r)}}0===s.length&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(t){_e.error(t)}}(t,e,n,s,o):"config"===r?await async function(t,e,n,i,r,s){const o=i[r];try{if(o)await e[o];else{const t=(await Se(n)).find((t=>t.measurementId===r));t&&await e[t.appId]}}catch(t){_e.error(t)}t("config",r,s)}(t,e,n,i,s,o):"consent"===r?t("consent","update",o):t("set",s)}catch(t){_e.error(t)}}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}(xe,Fe,je,He,"gtag");Ve=t,Be=e,$e=!0}return xe[i]=Me(t,Fe,je,e,Be,He,n),new Ue(t)}const Ke="@firebase/analytics",qe="0.9.4";function Ge(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}ft(new C(ve,((t,{options:e})=>ze(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e)),"PUBLIC")),ft(new C("analytics-internal",(function(t){try{const e=t.getProvider(ve).getImmediate();return{logEvent:(t,n,i)=>function(t,e,n,i){t=A(t),async function(t,e,n,i,r){if(r&&r.global)t("event",n,i);else{const r=await e;t("event",n,Object.assign(Object.assign({},i),{send_to:r}))}}(Ve,xe[t.app.options.appId],e,n,i).catch((t=>_e.error(t)))}(e,t,n,i)}}catch(t){throw ke.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),It(Ke,qe),It(Ke,qe,"esm2017"),Object.create,Object.create;const We=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Xe=new f("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Je=new j("@firebase/auth");function Ye(t,...e){Je.logLevel<=P.ERROR&&Je.error(`Auth (${yt}): ${t}`,...e)}function Qe(t,...e){throw tn(t,...e)}function Ze(t,...e){return tn(t,...e)}function tn(t,...e){if("string"!=typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Xe.create(t,...e)}function en(t,e,...n){if(!t)throw tn(e,...n)}function nn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ye(e),new Error(e)}function rn(t,e){t||nn(e)}const sn=new Map;function on(t){rn(t instanceof Function,"Expected a class definition");let e=sn.get(t);return e?(rn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sn.set(t,e),e)}function an(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class hn{constructor(t,e){this.shortDelay=t,this.longDelay=e,rn(e>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===an()||"https:"===an()||c()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}class cn{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void nn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void nn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void nn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ln={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},un=new hn(3e4,6e4);function dn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function fn(t,e,n,i,r={}){return pn(t,r,(async()=>{let r={},s={};i&&("GET"===e?s=i:r={body:JSON.stringify(i)});const o=y(Object.assign({key:t.config.apiKey},s)).slice(1),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode),cn.fetch()(mn(t,t.config.apiHost,n,o),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},r))}))}async function pn(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},ln),e);try{const e=new yn(t),r=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw vn(t,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const e=r.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw vn(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw vn(t,"email-already-in-use",s);if("USER_DISABLED"===n)throw vn(t,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw function(t,e,n){const i=Object.assign(Object.assign({},We()),{[e]:n});return new f("auth","Firebase",i).create(e,{appName:t.name})}(t,a,o);Qe(t,a)}}catch(e){if(e instanceof d)throw e;Qe(t,"internal-error",{message:String(e)})}}async function gn(t,e,n,i,r={}){const s=await fn(t,e,n,i,r);return"mfaPendingCredential"in s&&Qe(t,"multi-factor-auth-required",{_serverResponse:s}),s}function mn(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?function(t,e){rn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}(t.config,r):`${t.config.apiScheme}://${r}`}class yn{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(Ze(this.auth,"network-request-failed"))),un.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function vn(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ze(t,e,i);return r.customData._tokenResponse=n,r}function In(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}function bn(t){return 1e3*Number(t)}function wn(t){const[e,n,i]=t.split(".");if(void 0===e||void 0===n||void 0===i)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const t=s(n);return t?JSON.parse(t):(Ye("Failed to decode base64 JWT payload"),null)}catch(t){return Ye("Caught error parsing JWT payload as JSON",null==t?void 0:t.toString()),null}}async function Tn(t,e,n=!1){if(n)return e;try{return await e}catch(e){throw e instanceof d&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class En{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null==t?void 0:t.code)&&this.schedule(!0))}this.schedule()}}class _n{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=In(this.lastLoginAt),this.creationTime=In(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Sn(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Tn(t,async function(t,e){return fn(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:i}));en(null==r?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?s.providerUserInfo.map((t=>{var{providerId:e}=t,n=Ge(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(h=t.providerData,c=o,[...h.filter((t=>!c.some((e=>e.providerId===t.providerId)))),...c]);var h,c;const l=t.isAnonymous,u=!(t.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!l&&u,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new _n(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}class kn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){en(t.idToken,"internal-error"),en(void 0!==t.idToken,"internal-error"),en(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=wn(t);return en(e,"internal-error"),en(void 0!==e.exp,"internal-error"),en(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return en(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(t,e){const n=await pn(t,{},(async()=>{const n=y({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,s=mn(t,i,"/v1/token",`key=${r}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",cn.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,s=new kn;return n&&(en("string"==typeof n,"internal-error",{appName:t}),s.refreshToken=n),i&&(en("string"==typeof i,"internal-error",{appName:t}),s.accessToken=i),r&&(en("number"==typeof r,"internal-error",{appName:t}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new kn,this.toJSON())}_performRefresh(){return nn("not implemented")}}function An(t,e){en("string"==typeof t||void 0===t,"internal-error",{appName:e})}class Cn{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,r=Ge(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new En(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new _n(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await Tn(this,this.stsTokenManager.getToken(this.auth,t));return en(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t,e=!1){const n=A(t),i=await n.getIdToken(e),r=wn(i);en(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:In(bn(r.auth_time)),issuedAtTime:In(bn(r.iat)),expirationTime:In(bn(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=A(t);await Sn(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(en(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Cn(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){en(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await Sn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await Tn(this,async function(t,e){return fn(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,s,o,a,h,c;const l=null!==(n=e.displayName)&&void 0!==n?n:void 0,u=null!==(i=e.email)&&void 0!==i?i:void 0,d=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=e.photoURL)&&void 0!==s?s:void 0,p=null!==(o=e.tenantId)&&void 0!==o?o:void 0,g=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,m=null!==(h=e.createdAt)&&void 0!==h?h:void 0,y=null!==(c=e.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:I,isAnonymous:b,providerData:w,stsTokenManager:T}=e;en(v&&T,t,"internal-error");const E=kn.fromJSON(this.name,T);en("string"==typeof v,t,"internal-error"),An(l,t.name),An(u,t.name),en("boolean"==typeof I,t,"internal-error"),en("boolean"==typeof b,t,"internal-error"),An(d,t.name),An(f,t.name),An(p,t.name),An(g,t.name),An(m,t.name),An(y,t.name);const _=new Cn({uid:v,auth:t,email:u,emailVerified:I,displayName:l,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:m,lastLoginAt:y});return w&&Array.isArray(w)&&(_.providerData=w.map((t=>Object.assign({},t)))),g&&(_._redirectEventId=g),_}static async _fromIdTokenResponse(t,e,n=!1){const i=new kn;i.updateFromServerResponse(e);const r=new Cn({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await Sn(r),r}}class Rn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}Rn.type="NONE";const On=Rn;function Nn(t,e,n){return`firebase:${t}:${e}:${n}`}class Dn{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=Nn(this.userKey,i.apiKey,r),this.fullPersistenceKey=Nn("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Cn._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new Dn(on(On),t,n);const i=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let r=i[0]||on(On);const s=Nn(n,t.config.apiKey,t.name);let o=null;for(const n of e)try{const e=await n._get(s);if(e){const i=Cn._fromJSON(t,e);n!==r&&(o=i),r=n;break}}catch(t){}const a=i.filter((t=>t._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==r)try{await t._remove(s)}catch(t){}}))),new Dn(r,t,n)):new Dn(r,t,n)}}function Pn(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Mn(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function(t=h()){return/firefox\//i.test(t)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xn(e))return"Blackberry";if(Fn(e))return"Webos";if(Ln(e))return"Safari";if((e.includes("chrome/")||function(t=h()){return/crios\//i.test(t)}(e))&&!e.includes("edge/"))return"Chrome";if(Un(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Ln(t=h()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Mn(t=h()){return/iemobile/i.test(t)}function Un(t=h()){return/android/i.test(t)}function xn(t=h()){return/blackberry/i.test(t)}function Fn(t=h()){return/webos/i.test(t)}function jn(t=h()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Bn(t,e=[]){let n;switch(t){case"Browser":n=Pn(h());break;case"Worker":n=`${Pn(h())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yt}/${i}`}class Vn{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise(((n,i)=>{try{n(t(e))}catch(t){i(t)}}));n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(t){e.reverse();for(const t of e)try{t()}catch(t){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==t?void 0:t.message})}}}class Hn{constructor(t,e,n){this.app=t,this.heartbeatServiceProvider=e,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zn(this),this.idTokenSubscription=new zn(this),this.beforeStateQueue=new Vn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=on(e)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Dn.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(t){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUser(t){var e;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,s=null==i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(t);n&&n!==s||!(null==o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(t){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(t)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return en(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Sn(t)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?A(t):null;return e&&en(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&en(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(on(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new f("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&on(t)||this._popupRedirectResolver;en(e,this,"argument-error"),this.redirectPersistenceManager=await Dn.create(this,[on(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"==typeof e?e:e.next.bind(e),s=this._isInitialized?Promise.resolve():this._initializationPromise;return en(s,this,"internal-error"),s.then((()=>r(this.currentUser))),"function"==typeof e?t.addObserver(e,n,i):t.addObserver(e)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return en(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Bn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());return n&&(e["X-Firebase-Client"]=n),e}}function $n(t){return A(t)}class zn{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new b(t,void 0);return n.subscribe.bind(n)}((t=>this.observer=t))}get next(){return en(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class Kn{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return nn("not implemented")}_getIdTokenResponse(t){return nn("not implemented")}_linkToIdToken(t,e){return nn("not implemented")}_getReauthenticationResolver(t){return nn("not implemented")}}class qn extends Kn{constructor(t,e,n,i=null){super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new qn(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new qn(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return async function(t,e){return gn(t,"POST","/v1/accounts:signInWithPassword",dn(t,e))}(t,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return gn(t,"POST","/v1/accounts:signInWithEmailLink",dn(t,e))}(t,{email:this._email,oobCode:this._password});default:Qe(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return async function(t,e){return fn(t,"POST","/v1/accounts:update",e)}(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return gn(t,"POST","/v1/accounts:signInWithEmailLink",dn(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:Qe(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Gn(t,e){return gn(t,"POST","/v1/accounts:signInWithIdp",dn(t,e))}class Wn extends Kn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Wn(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Qe("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=Ge(e,["providerId","signInMethod"]);if(!n||!i)return null;const s=new Wn(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(t){return Gn(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Gn(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Gn(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=y(e)}return t}}const Xn={USER_NOT_FOUND:"user-not-found"};class Jn extends Kn{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new Jn({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new Jn({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return gn(t,"POST","/v1/accounts:signInWithPhoneNumber",dn(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await gn(t,"POST","/v1/accounts:signInWithPhoneNumber",dn(t,e));if(n.temporaryProof)throw vn(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return gn(t,"POST","/v1/accounts:signInWithPhoneNumber",dn(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),Xn)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}=t;return n||e||i||r?new Jn({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class Yn{constructor(t){var e,n,i,r,s,o;const a=v(I(t)),h=null!==(e=a.apiKey)&&void 0!==e?e:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,l=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);en(h&&c&&l,"argument-error"),this.apiKey=h,this.operation=l,this.code=c,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(t){const e=function(t){const e=v(I(t)).link,n=e?v(I(e)).deep_link_id:null,i=v(I(t)).deep_link_id;return(i?v(I(i)).link:null)||i||n||e||t}(t);try{return new Yn(e)}catch(t){return null}}}class Qn{constructor(){this.providerId=Qn.PROVIDER_ID}static credential(t,e){return qn._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=Yn.parseLink(e);return en(n,"argument-error"),qn._fromEmailAndCode(t,n.code,n.tenantId)}}Qn.PROVIDER_ID="password",Qn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Qn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Zn{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class ti extends Zn{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class ei extends ti{constructor(){super("facebook.com")}static credential(t){return Wn._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ei.credentialFromTaggedObject(t)}static credentialFromError(t){return ei.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ei.credential(t.oauthAccessToken)}catch(t){return null}}}ei.FACEBOOK_SIGN_IN_METHOD="facebook.com",ei.PROVIDER_ID="facebook.com";class ni extends ti{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Wn._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return ni.credentialFromTaggedObject(t)}static credentialFromError(t){return ni.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return ni.credential(e,n)}catch(t){return null}}}ni.GOOGLE_SIGN_IN_METHOD="google.com",ni.PROVIDER_ID="google.com";class ii extends ti{constructor(){super("github.com")}static credential(t){return Wn._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ii.credentialFromTaggedObject(t)}static credentialFromError(t){return ii.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ii.credential(t.oauthAccessToken)}catch(t){return null}}}ii.GITHUB_SIGN_IN_METHOD="github.com",ii.PROVIDER_ID="github.com";class ri extends ti{constructor(){super("twitter.com")}static credential(t,e){return Wn._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return ri.credentialFromTaggedObject(t)}static credentialFromError(t){return ri.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return ri.credential(e,n)}catch(t){return null}}}ri.TWITTER_SIGN_IN_METHOD="twitter.com",ri.PROVIDER_ID="twitter.com";class si{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const r=await Cn._fromIdTokenResponse(t,n,i),s=oi(n);return new si({user:r,providerId:s,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=oi(n);return new si({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function oi(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class ai extends d{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,ai.prototype),this.customData={appName:t.name,tenantId:null!==(r=t.tenantId)&&void 0!==r?r:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new ai(t,e,n,i)}}function hi(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw ai._fromErrorAndOperation(t,n,e,i);throw n}))}new WeakMap;const ci="__sak";class li{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(ci,"1"),this.storage.removeItem(ci),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}(class extends li{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=h();return Ln(t)||jn(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=function(t=h()){return jn(t)||Un(t)||Fn(t)||xn(t)||/windows phone/i.test(t)||Mn(t)}(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},r=this.storage.getItem(n);!function(){const t=h();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||10!==document.documentMode||r===t.newValue||t.newValue===t.oldValue?i():setTimeout(i,10)}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}).type="LOCAL";(class extends li{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}).type="SESSION";class ui{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new ui(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async t=>t(e.origin,r))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function di(t="",e=10){let n="";for(let t=0;t<e;t++)n+=Math.floor(10*Math.random());return t+n}ui.receivers=[];Math.floor(1e6*Math.random()),new hn(3e4,6e4);class fi{constructor(t){this.providerId=fi.PROVIDER_ID,this.auth=$n(t)}verifyPhoneNumber(t,e){return async function(t,e,n){var i;const r=await n.verify();try{let s;if(en("string"==typeof r,t,"argument-error"),en("recaptcha"===n.type,t,"argument-error"),s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){en("enroll"===e.type,t,"internal-error");const n=await function(t,e){return fn(t,"POST","/v2/accounts/mfaEnrollment:start",dn(t,e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{en("signin"===e.type,t,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;en(n,t,"missing-multi-factor-info");const o=await function(t,e){return fn(t,"POST","/v2/accounts/mfaSignIn:start",dn(t,e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return fn(t,"POST","/v1/accounts:sendVerificationCode",dn(t,e))}(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return e}}finally{n._reset()}}(this.auth,t,A(e))}static credential(t,e){return Jn._fromVerification(t,e)}static credentialFromResult(t){const e=t;return fi.credentialFromTaggedObject(e)}static credentialFromError(t){return fi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?Jn._fromTokenResponse(e,n):null}}fi.PROVIDER_ID="phone",fi.PHONE_SIGN_IN_METHOD="phone";class pi extends Kn{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Gn(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Gn(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Gn(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function gi(t){return async function(t,e,n=!1){const i="signIn",r=await hi(t,i,e),s=await si._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}(t.auth,new pi(t),t.bypassAuthState)}function mi(t){const{auth:e,user:n}=t;return en(n,e,"internal-error"),async function(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await Tn(t,hi(i,r,e,t),n);en(s.idToken,i,"internal-error");const o=wn(s.idToken);en(o,i,"internal-error");const{sub:a}=o;return en(t.uid===a,i,"user-mismatch"),si._forOperation(t,r,s)}catch(t){throw"auth/user-not-found"===(null==t?void 0:t.code)&&Qe(i,"user-mismatch"),t}}(n,new pi(t),t.bypassAuthState)}async function yi(t){const{auth:e,user:n}=t;return en(n,e,"internal-error"),async function(t,e,n=!1){const i=await Tn(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return si._forOperation(t,"link",i)}(n,new pi(t),t.bypassAuthState)}class vi{constructor(t,e,n,i,r=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return gi;case"linkViaPopup":case"linkViaRedirect":return yi;case"reauthViaPopup":case"reauthViaRedirect":return mi;default:Qe(this.auth,"internal-error")}}resolve(t){rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ii=new hn(2e3,1e4);class bi extends vi{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,bi.currentPopupAction&&bi.currentPopupAction.cancel(),bi.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return en(t,this.auth,"internal-error"),t}async onExecution(){rn(1===this.filter.length,"Popup operations only handle one event");const t=di();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(Ze(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(Ze(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bi.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Ze(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(t,Ii.get())};t()}}bi.currentPopupAction=null,new Map,new hn(3e4,6e4),new hn(5e3,15e3),new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);var wi,Ti,Ei="@firebase/auth",_i="0.21.5";class Si{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{t((null==e?void 0:e.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){en(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}null===(wi=o())||void 0===wi||wi._authIdTokenMaxAge,Ti="Browser",ft(new C("auth",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),{apiKey:r,authDomain:s}=n.options;return((t,n)=>{en(r&&!r.includes(":"),"invalid-api-key",{appName:t.name}),en(!(null==s?void 0:s.includes(":")),"argument-error",{appName:t.name});const i={apiKey:r,authDomain:s,clientPlatform:Ti,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bn(Ti)},o=new Hn(t,n,i);return function(t,e){const n=(null==e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(on);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null==e?void 0:e.popupRedirectResolver)}(o,e),o})(n,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),ft(new C("auth-internal",(t=>{return e=$n(t.getProvider("auth").getImmediate()),new Si(e);var e}),"PRIVATE").setInstantiationMode("EXPLICIT")),It(Ei,_i,function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ti)),It(Ei,_i,"esm2017");var ki,Ai="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t.g?t.g:"undefined"!=typeof self?self:{},Ci={},Ri=Ri||{},Oi=Ai||self;function Ni(){}function Di(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Pi(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Li="closure_uid_"+(1e9*Math.random()>>>0),Mi=0;function Ui(t,e,n){return t.call.apply(t.bind,arguments)}function xi(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Fi(t,e,n){return(Fi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ui:xi).apply(null,arguments)}function ji(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Bi(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function Vi(){this.s=this.s,this.o=this.o}Vi.prototype.s=!1,Vi.prototype.na=function(){var t;!this.s&&(this.s=!0,this.M(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Li)&&t[Li]||(t[Li]=++Mi))},Vi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Hi=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function $i(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function zi(t,e){for(let e=1;e<arguments.length;e++){const n=arguments[e];if(Di(n)){const e=t.length||0,i=n.length||0;t.length=e+i;for(let r=0;r<i;r++)t[e+r]=n[r]}else t.push(n)}}function Ki(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ki.prototype.h=function(){this.defaultPrevented=!0};var qi=function(){if(!Oi.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Oi.addEventListener("test",Ni,e),Oi.removeEventListener("test",Ni,e)}catch(t){}return t}();function Gi(t){return/^[\s\xa0]*$/.test(t)}var Wi=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Xi(t,e){return t<e?-1:t>e?1:0}function Ji(){var t=Oi.navigator;return t&&(t=t.userAgent)?t:""}function Yi(t){return-1!=Ji().indexOf(t)}function Qi(t){return Qi[" "](t),t}Qi[" "]=Ni;var Zi,tr,er=Yi("Opera"),nr=Yi("Trident")||Yi("MSIE"),ir=Yi("Edge"),rr=ir||nr,sr=Yi("Gecko")&&!(-1!=Ji().toLowerCase().indexOf("webkit")&&!Yi("Edge"))&&!(Yi("Trident")||Yi("MSIE"))&&!Yi("Edge"),or=-1!=Ji().toLowerCase().indexOf("webkit")&&!Yi("Edge");function ar(){var t=Oi.document;return t?t.documentMode:void 0}t:{var hr="",cr=(tr=Ji(),sr?/rv:([^\);]+)(\)|;)/.exec(tr):ir?/Edge\/([\d\.]+)/.exec(tr):nr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(tr):or?/WebKit\/(\S+)/.exec(tr):er?/(?:Version)[ \/]?(\S+)/.exec(tr):void 0);if(cr&&(hr=cr?cr[1]:""),nr){var lr=ar();if(null!=lr&&lr>parseFloat(hr)){Zi=String(lr);break t}}Zi=hr}var ur,dr={};function fr(){return function(t){var e=dr;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let t=0;const e=Wi(String(Zi)).split("."),n=Wi("9").split("."),i=Math.max(e.length,n.length);for(let o=0;0==t&&o<i;o++){var r=e[o]||"",s=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;t=Xi(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||Xi(0==r[2].length,0==s[2].length)||Xi(r[2],s[2]),r=r[3],s=s[3]}while(0==t)}return 0<=t}()}()}Oi.document&&nr?ur=ar()||parseInt(Zi,10)||void 0:ur=void 0;var pr=ur;function gr(t,e){if(Ki.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(sr){t:{try{Qi(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:mr[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&gr.X.h.call(this)}}Bi(gr,Ki);var mr={2:"touch",3:"pen",4:"mouse"};gr.prototype.h=function(){gr.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var yr="closure_listenable_"+(1e6*Math.random()|0),vr=0;function Ir(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ha=r,this.key=++vr,this.ba=this.ea=!1}function br(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function wr(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function Tr(t){const e={};for(const n in t)e[n]=t[n];return e}const Er="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _r(t,e){let n,i;for(let e=1;e<arguments.length;e++){for(n in i=arguments[e],i)t[n]=i[n];for(let e=0;e<Er.length;e++)n=Er[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Sr(t){this.src=t,this.g={},this.h=0}function kr(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=Hi(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(br(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Ar(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.ba&&s.listener==e&&s.capture==!!n&&s.ha==i)return r}return-1}Sr.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=Ar(t,e,i,r);return-1<o?(e=t[o],n||(e.ea=!1)):((e=new Ir(e,this.src,s,!!i,r)).ea=n,t.push(e)),e};var Cr="closure_lm_"+(1e6*Math.random()|0),Rr={};function Or(t,e,n,i,r){if(i&&i.once)return Dr(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Or(t,e[s],n,i,r);return null}return n=jr(n),t&&t[yr]?t.N(e,n,Pi(i)?!!i.capture:!!i,r):Nr(t,e,n,!1,i,r)}function Nr(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=Pi(r)?!!r.capture:!!r,a=xr(t);if(a||(t[Cr]=a=new Sr(t)),(n=a.add(e,n,i,o,s)).proxy)return n;if(i=function(){const t=Ur;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)qi||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Mr(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function Dr(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Dr(t,e[s],n,i,r);return null}return n=jr(n),t&&t[yr]?t.O(e,n,Pi(i)?!!i.capture:!!i,r):Nr(t,e,n,!0,i,r)}function Pr(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)Pr(t,e[s],n,i,r);else i=Pi(i)?!!i.capture:!!i,n=jr(n),t&&t[yr]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Ar(s=t.g[e],n,i,r))&&(br(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=xr(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ar(e,n,i,r)),(n=-1<t?e[t]:null)&&Lr(n))}function Lr(t){if("number"!=typeof t&&t&&!t.ba){var e=t.src;if(e&&e[yr])kr(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Mr(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=xr(e))?(kr(n,t),0==n.h&&(n.src=null,e[Cr]=null)):br(t)}}}function Mr(t){return t in Rr?Rr[t]:Rr[t]="on"+t}function Ur(t,e){if(t.ba)t=!0;else{e=new gr(e,this);var n=t.listener,i=t.ha||t.src;t.ea&&Lr(t),t=n.call(i,e)}return t}function xr(t){return(t=t[Cr])instanceof Sr?t:null}var Fr="__closure_events_fn_"+(1e9*Math.random()>>>0);function jr(t){return"function"==typeof t?t:(t[Fr]||(t[Fr]=function(e){return t.handleEvent(e)}),t[Fr])}function Br(){Vi.call(this),this.i=new Sr(this),this.P=this,this.I=null}function Vr(t,e){var n,i=t.I;if(i)for(n=[];i;i=i.I)n.push(i);if(t=t.P,i=e.type||e,"string"==typeof e)e=new Ki(e,t);else if(e instanceof Ki)e.target=e.target||t;else{var r=e;_r(e=new Ki(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=Hr(o,i,!0,e)&&r}if(r=Hr(o=e.g=t,i,!0,e)&&r,r=Hr(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=Hr(o=e.g=n[s],i,!1,e)&&r}function Hr(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==n){var a=o.listener,h=o.ha||o.src;o.ea&&kr(t.i,o),r=!1!==a.call(h,i)&&r}}return r&&!i.defaultPrevented}Bi(Br,Vi),Br.prototype[yr]=!0,Br.prototype.removeEventListener=function(t,e,n,i){Pr(this,t,e,n,i)},Br.prototype.M=function(){if(Br.X.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)br(n[i]);delete e.g[t],e.h--}}this.I=null},Br.prototype.N=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},Br.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var $r=Oi.JSON.stringify;function zr(){var t=Yr;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Kr,qr=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new Gr),(t=>t.reset()));class Gr{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Wr(t){Oi.setTimeout((()=>{throw t}),0)}function Xr(t,e){Kr||function(){var t=Oi.Promise.resolve(void 0);Kr=function(){t.then(Qr)}}(),Jr||(Kr(),Jr=!0),Yr.add(t,e)}var Jr=!1,Yr=new class{constructor(){this.h=this.g=null}add(t,e){const n=qr.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}};function Qr(){for(var t;t=zr();){try{t.h.call(t.g)}catch(t){Wr(t)}var e=qr;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Jr=!1}function Zr(t,e){Br.call(this),this.h=t||1,this.g=e||Oi,this.j=Fi(this.lb,this),this.l=Date.now()}function ts(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}function es(t,e,n){if("function"==typeof t)n&&(t=Fi(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Fi(t.handleEvent,t)}return 2147483647<Number(e)?-1:Oi.setTimeout(t,e||0)}function ns(t){t.g=es((()=>{t.g=null,t.i&&(t.i=!1,ns(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Bi(Zr,Br),(ki=Zr.prototype).ca=!1,ki.R=null,ki.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Vr(this,"tick"),this.ca&&(ts(this),this.start()))}},ki.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ki.M=function(){Zr.X.M.call(this),ts(this),delete this.g};class is extends Vi{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:ns(this)}M(){super.M(),this.g&&(Oi.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rs(t){Vi.call(this),this.h=t,this.g={}}Bi(rs,Vi);var ss=[];function os(t,e,n,i){Array.isArray(n)||(n&&(ss[0]=n.toString()),n=ss);for(var r=0;r<n.length;r++){var s=Or(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function as(t){wr(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Lr(t)}),t),t.g={}}function hs(){this.g=!0}function cs(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return $r(n)}catch(t){return e}}(t,n)+(i?" "+i:"")}))}rs.prototype.M=function(){rs.X.M.call(this),as(this)},rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},hs.prototype.Aa=function(){this.g=!1},hs.prototype.info=function(){};var ls={},us=null;function ds(){return us=us||new Br}function fs(t){Ki.call(this,ls.Pa,t)}function ps(t){const e=ds();Vr(e,new fs(e))}function gs(t,e){Ki.call(this,ls.STAT_EVENT,t),this.stat=e}function ms(t){const e=ds();Vr(e,new gs(e,t))}function ys(t,e){Ki.call(this,ls.Qa,t),this.size=e}function vs(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Oi.setTimeout((function(){t()}),e)}ls.Pa="serverreachability",Bi(fs,Ki),ls.STAT_EVENT="statevent",Bi(gs,Ki),ls.Qa="timingevent",Bi(ys,Ki);var Is={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},bs={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function ws(){}function Ts(t){return t.h||(t.h=t.i())}function Es(){}ws.prototype.h=null;var _s,Ss={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function ks(){Ki.call(this,"d")}function As(){Ki.call(this,"c")}function Cs(){}function Rs(t,e,n,i){this.l=t,this.j=e,this.m=n,this.U=i||1,this.S=new rs(this),this.O=Ns,t=rr?125:void 0,this.T=new Zr(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Os}function Os(){this.i=null,this.g="",this.h=!1}Bi(ks,Ki),Bi(As,Ki),Bi(Cs,ws),Cs.prototype.g=function(){return new XMLHttpRequest},Cs.prototype.i=function(){return{}},_s=new Cs;var Ns=45e3,Ds={},Ps={};function Ls(t,e,n){t.K=1,t.v=Zs(Ws(e)),t.s=n,t.P=!0,Ms(t,null)}function Ms(t,e){t.F=Date.now(),js(t),t.A=Ws(t.v);var n=t.A,i=t.U;Array.isArray(i)||(i=[String(i)]),fo(n.i,"t",i),t.C=0,n=t.l.H,t.h=new Os,t.g=da(t.l,n?e:null,!t.s),0<t.N&&(t.L=new is(Fi(t.La,t,t.g),t.N)),os(t.S,t.g,"readystatechange",t.ib),e=t.H?Tr(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),ps(),function(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),h=0;h<a.length;h++){var c=a[h].split("=");if(1<c.length){var l=c[0];c=c[1];var u=l.split("_");o=2<=u.length&&"type"==u[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.U,t.s)}function Us(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Da}function xs(t,e,n){let i,r=!0;for(;!t.I&&t.C<n.length;){if(i=Fs(t,n),i==Ps){4==e&&(t.o=4,ms(14),r=!1),cs(t.j,t.m,null,"[Incomplete Response]");break}if(i==Ds){t.o=4,ms(15),cs(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}cs(t.j,t.m,i,null),zs(t,i)}Us(t)&&i!=Ps&&i!=Ds&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,ms(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,(e=t.l).g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),ra(e),e.K=!0,ms(11))):(cs(t.j,t.m,n,"[Invalid Chunked Response]"),$s(t),Hs(t))}function Fs(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?Ps:(n=Number(e.substring(n,i)),isNaN(n)?Ds:(i+=1)+n>e.length?Ps:(e=e.substr(i,n),t.C=i+n,e))}function js(t){t.V=Date.now()+t.O,Bs(t,t.O)}function Bs(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=vs(Fi(t.gb,t),e)}function Vs(t){t.B&&(Oi.clearTimeout(t.B),t.B=null)}function Hs(t){0==t.l.G||t.I||aa(t.l,t)}function $s(t){Vs(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,ts(t.T),as(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function zs(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Io(n.h,t)))if(!t.J&&Io(n.h,t)&&3==n.G){try{var i=n.Fa.g.parse(e)}catch(t){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;oa(n),Jo(n)}ia(n),ms(18)}}else n.Ba=r[1],0<n.Ba-n.T&&37500>r[2]&&n.L&&0==n.A&&!n.v&&(n.v=vs(Fi(n.cb,n),6e3));if(1>=vo(n.h)&&n.ja){try{n.ja()}catch(t){}n.ja=void 0}}else ca(n,11)}else if((t.J||n.g==t)&&oa(n),!Gi(e))for(r=n.Fa.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.I=c[1],n.ka=c[2];const e=c[3];null!=e&&(n.ma=e,n.j.info("VER="+n.ma));const r=c[4];null!=r&&(n.Ca=r,n.j.info("SVER="+n.Ca));const l=c[5];null!=l&&"number"==typeof l&&0<l&&(i=1.5*l,n.J=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const u=t.g;if(u){const t=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.h;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(bo(s,s.h),s.h=null))}if(i.D){const t=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.za=t,Qs(i.F,i.D,t))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms"));var o=t;if((i=n).sa=ua(i,i.H?i.ka:null,i.V),o.J){wo(i.h,o);var a=o,h=i.J;h&&a.setTimeout(h),a.B&&(Vs(a),js(a)),i.g=o}else na(i);0<n.i.length&&Qo(n)}else"stop"!=c[0]&&"close"!=c[0]||ca(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?ca(n,7):Xo(n):"noop"!=c[0]&&n.l&&n.l.wa(c),n.A=0)}ps()}catch(t){}}function Ks(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Di(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.oa&&"function"==typeof t.oa)return t.oa();if(!t.W||"function"!=typeof t.W){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(Di(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.W&&"function"==typeof t.W)return t.W();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(Di(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}(ki=Rs.prototype).setTimeout=function(t){this.O=t},ki.ib=function(t){t=t.target;const e=this.L;e&&3==$o(t)?e.l():this.La(t)},ki.La=function(t){try{if(t==this.g)t:{const l=$o(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>l)&&(3!=l||rr||this.g&&(this.h.h||this.g.fa()||zo(this.g)))){this.I||4!=l||7==e||ps(),Vs(this);var n=this.g.aa();this.Y=n;e:if(Us(this)){var i=zo(this.g);t="";var r=i.length,s=4==$o(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){$s(this),Hs(this);var o="";break e}this.h.i=new Oi.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==n,function(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.U,l,n),this.i){if(this.Z&&!this.J){e:{if(this.g){var a,h=this.g;if((a=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gi(a)){var c=a;break e}}c=null}if(!(n=c)){this.i=!1,this.o=3,ms(12),$s(this),Hs(this);break t}cs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,zs(this,n)}this.P?(xs(this,l,o),rr&&this.i&&3==l&&(os(this.S,this.T,"tick",this.hb),this.T.start())):(cs(this.j,this.m,o,null),zs(this,o)),4==l&&$s(this),this.i&&!this.I&&(4==l?aa(this.l,this):(this.i=!1,js(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,ms(12)):(this.o=0,ms(13)),$s(this),Hs(this)}}}catch(t){}},ki.hb=function(){if(this.g){var t=$o(this.g),e=this.g.fa();this.C<e.length&&(Vs(this),xs(this,t,e),this.i&&4!=t&&js(this))}},ki.cancel=function(){this.I=!0,$s(this)},ki.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(ps(),ms(17)),$s(this),this.o=2,Hs(this)):Bs(this,this.V-t)};var qs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gs(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Gs){this.h=void 0!==e?e:t.h,Xs(this,t.j),this.s=t.s,this.g=t.g,Js(this,t.m),this.l=t.l,e=t.i;var n=new ho;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Ys(this,n),this.o=t.o}else t&&(n=String(t).match(qs))?(this.h=!!e,Xs(this,n[1]||"",!0),this.s=to(n[2]||""),this.g=to(n[3]||"",!0),Js(this,n[4]),this.l=to(n[5]||"",!0),Ys(this,n[6]||"",!0),this.o=to(n[7]||"")):(this.h=!!e,this.i=new ho(null,this.h))}function Ws(t){return new Gs(t)}function Xs(t,e,n){t.j=n?to(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Js(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ys(t,e,n){e instanceof ho?(t.i=e,function(t,e){e&&!t.j&&(co(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(lo(this,e),fo(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=eo(e,oo)),t.i=new ho(e,t.h))}function Qs(t,e,n){t.i.set(e,n)}function Zs(t){return Qs(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function to(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function eo(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,no),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function no(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Gs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(eo(e,io,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(eo(e,io,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(eo(n,"/"==n.charAt(0)?so:ro,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",eo(n,ao)),t.join("")};var io=/[#\/\?@]/g,ro=/[#\?:]/g,so=/[#\?]/g,oo=/[#\?@]/g,ao=/#/g;function ho(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function co(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function lo(t,e){co(t),e=po(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function uo(t,e){return co(t),e=po(t,e),t.g.has(e)}function fo(t,e,n){lo(t,e),0<n.length&&(t.i=null,t.g.set(po(t,e),$i(n)),t.h+=n.length)}function po(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function go(t){this.l=t||mo,t=Oi.PerformanceNavigationTiming?0<(t=Oi.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Oi.g&&Oi.g.Ga&&Oi.g.Ga()&&Oi.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ki=ho.prototype).add=function(t,e){co(this),this.i=null,t=po(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},ki.forEach=function(t,e){co(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},ki.oa=function(){co(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},ki.W=function(t){co(this);let e=[];if("string"==typeof t)uo(this,t)&&(e=e.concat(this.g.get(po(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},ki.set=function(t,e){return co(this),this.i=null,uo(this,t=po(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},ki.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},ki.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.W(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};var mo=10;function yo(t){return!!t.h||!!t.g&&t.g.size>=t.j}function vo(t){return t.h?1:t.g?t.g.size:0}function Io(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function bo(t,e){t.g?t.g.add(e):t.h=e}function wo(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function To(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return $i(t.i)}function Eo(){}function _o(){this.g=new Eo}function So(t,e,n){const i=n||"";try{Ks(t,(function(t,n){let r=t;Pi(t)&&(r=$r(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(t){throw e.push(i+"type="+encodeURIComponent("_badmap")),t}}function ko(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(t){}}function Ao(t){this.l=t.ac||null,this.j=t.jb||!1}function Co(t,e){Br.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Ro,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}go.prototype.cancel=function(){if(this.i=To(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},Eo.prototype.stringify=function(t){return Oi.JSON.stringify(t,void 0)},Eo.prototype.parse=function(t){return Oi.JSON.parse(t,void 0)},Bi(Ao,ws),Ao.prototype.g=function(){return new Co(this.l,this.j)},Ao.prototype.i=function(t){return function(){return t}}({}),Bi(Co,Br);var Ro=0;function Oo(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}function No(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Do(t)}function Do(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(ki=Co.prototype).open=function(t,e){if(this.readyState!=Ro)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Do(this)},ki.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Oi).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ki.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,No(this)),this.readyState=Ro},ki.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Do(this)),this.g&&(this.readyState=3,Do(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Oi.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Oo(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))},ki.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?No(this):Do(this),3==this.readyState&&Oo(this)}},ki.Va=function(t){this.g&&(this.response=this.responseText=t,No(this))},ki.Ua=function(t){this.g&&(this.response=t,No(this))},ki.ga=function(){this.g&&No(this)},ki.setRequestHeader=function(t,e){this.v.append(t,e)},ki.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},ki.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Co.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Po=Oi.JSON.parse;function Lo(t){Br.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Mo,this.K=this.L=!1}Bi(Lo,Br);var Mo="",Uo=/^https?$/i,xo=["POST","PUT"];function Fo(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,jo(t),Vo(t)}function jo(t){t.D||(t.D=!0,Vr(t,"complete"),Vr(t,"error"))}function Bo(t){if(t.h&&void 0!==Ri&&(!t.C[1]||4!=$o(t)||2!=t.aa()))if(t.v&&4==$o(t))es(t.Ha,0,t);else if(Vr(t,"readystatechange"),4==$o(t)){t.h=!1;try{const a=t.aa();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===a){var r=String(t.H).match(qs)[1]||null;if(!r&&Oi.self&&Oi.self.location){var s=Oi.self.location.protocol;r=s.substr(0,s.length-1)}i=!Uo.test(r?r.toLowerCase():"")}n=i}if(n)Vr(t,"complete"),Vr(t,"success");else{t.m=6;try{var o=2<$o(t)?t.g.statusText:""}catch(t){o=""}t.j=o+" ["+t.aa()+"]",jo(t)}}finally{Vo(t)}}}function Vo(t,e){if(t.g){Ho(t);const n=t.g,i=t.C[0]?Ni:null;t.g=null,t.C=null,e||Vr(t,"ready");try{n.onreadystatechange=i}catch(t){}}}function Ho(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Oi.clearTimeout(t.A),t.A=null)}function $o(t){return t.g?t.g.readyState:0}function zo(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Mo:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ko(t){let e="";return wr(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function qo(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Ko(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Qs(t,e,n))}function Go(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Wo(t){this.Ca=0,this.i=[],this.j=new hs,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Go("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Go("baseRetryDelayMs",5e3,t),this.bb=Go("retryDelaySeedMs",1e4,t),this.$a=Go("forwardChannelMaxRetries",2,t),this.ta=Go("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new go(t&&t.concurrentRequestLimit),this.Fa=new _o,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Xo(t){if(Yo(t),3==t.G){var e=t.U++,n=Ws(t.F);Qs(n,"SID",t.I),Qs(n,"RID",e),Qs(n,"TYPE","terminate"),ta(t,n),(e=new Rs(t,t.j,e,void 0)).K=2,e.v=Zs(Ws(n)),n=!1,Oi.navigator&&Oi.navigator.sendBeacon&&(n=Oi.navigator.sendBeacon(e.v.toString(),"")),!n&&Oi.Image&&((new Image).src=e.v,n=!0),n||(e.g=da(e.l,null),e.g.da(e.v)),e.F=Date.now(),js(e)}la(t)}function Jo(t){t.g&&(ra(t),t.g.cancel(),t.g=null)}function Yo(t){Jo(t),t.u&&(Oi.clearTimeout(t.u),t.u=null),oa(t),t.h.cancel(),t.m&&("number"==typeof t.m&&Oi.clearTimeout(t.m),t.m=null)}function Qo(t){yo(t.h)||t.m||(t.m=!0,Xr(t.Ja,t),t.C=0)}function Zo(t,e){var n;n=e?e.m:t.U++;const i=Ws(t.F);Qs(i,"SID",t.I),Qs(i,"RID",n),Qs(i,"AID",t.T),ta(t,i),t.o&&t.s&&qo(i,t.o,t.s),n=new Rs(t,t.j,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=ea(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),bo(t.h,n),Ls(n,i,e)}function ta(t,e){t.ia&&wr(t.ia,(function(t,n){Qs(e,n,t)})),t.l&&Ks({},(function(t,n){Qs(e,n,t)}))}function ea(t,e,n){n=Math.min(t.i.length,n);var i=t.l?Fi(t.l.Ra,t.l,t):null;t:{var r=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=r[o].h;const a=r[o].g;if(n-=e,0>n)e=Math.max(0,r[o].h-100),s=!1;else try{So(a,t,"req"+n+"_")}catch(t){i&&i(a)}}if(s){i=t.join("&");break t}}}return t=t.i.splice(0,n),e.D=t,i}function na(t){t.g||t.u||(t.Z=1,Xr(t.Ia,t),t.A=0)}function ia(t){return!(t.g||t.u||3<=t.A||(t.Z++,t.u=vs(Fi(t.Ia,t),ha(t,t.A)),t.A++,0))}function ra(t){null!=t.B&&(Oi.clearTimeout(t.B),t.B=null)}function sa(t){t.g=new Rs(t,t.j,"rpc",t.Z),null===t.o&&(t.g.H=t.s),t.g.N=0;var e=Ws(t.sa);Qs(e,"RID","rpc"),Qs(e,"SID",t.I),Qs(e,"CI",t.L?"0":"1"),Qs(e,"AID",t.T),Qs(e,"TYPE","xmlhttp"),ta(t,e),t.o&&t.s&&qo(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=Zs(Ws(e)),n.s=null,n.P=!0,Ms(n,t)}function oa(t){null!=t.v&&(Oi.clearTimeout(t.v),t.v=null)}function aa(t,e){var n=null;if(t.g==e){oa(t),ra(t),t.g=null;var i=2}else{if(!Io(t.h,e))return;n=e.D,wo(t.h,e),i=1}if(0!=t.G)if(t.pa=e.Y,e.i)if(1==i){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;Vr(i=ds(),new ys(i,n)),Qo(t)}else na(t);else if(3==(r=e.o)||0==r&&0<t.pa||!(1==i&&function(t,e){return!(vo(t.h)>=t.h.j-(t.m?1:0)||(t.m?(t.i=e.D.concat(t.i),0):1==t.G||2==t.G||t.C>=(t.Za?0:t.$a)||(t.m=vs(Fi(t.Ja,t,e),ha(t,t.C)),t.C++,0)))}(t,e)||2==i&&ia(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:ca(t,5);break;case 4:ca(t,10);break;case 3:ca(t,6);break;default:ca(t,2)}}function ha(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function ca(t,e){if(t.j.info("Error code "+e),2==e){var n=null;t.l&&(n=null);var i=Fi(t.kb,t);n||(n=new Gs("//www.google.com/images/cleardot.gif"),Oi.location&&"http"==Oi.location.protocol||Xs(n,"https"),Zs(n)),function(t,e){const n=new hs;if(Oi.Image){const i=new Image;i.onload=ji(ko,n,i,"TestLoadImage: loaded",!0,e),i.onerror=ji(ko,n,i,"TestLoadImage: error",!1,e),i.onabort=ji(ko,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=ji(ko,n,i,"TestLoadImage: timeout",!1,e),Oi.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else ms(2);t.G=0,t.l&&t.l.va(e),la(t),Yo(t)}function la(t){if(t.G=0,t.la=[],t.l){const e=To(t.h);0==e.length&&0==t.i.length||(zi(t.la,e),zi(t.la,t.i),t.h.i.length=0,$i(t.i),t.i.length=0),t.l.ua()}}function ua(t,e,n){var i=n instanceof Gs?Ws(n):new Gs(n,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),Js(i,i.m);else{var r=Oi.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new Gs(null,void 0);i&&Xs(s,i),e&&(s.g=e),r&&Js(s,r),n&&(s.l=n),i=s}return n=t.D,e=t.za,n&&e&&Qs(i,n,e),Qs(i,"VER",t.ma),ta(t,i),i}function da(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Da&&!t.ra?new Lo(new Ao({jb:!0})):new Lo(t.ra)).Ka(t.H),e}function fa(){}function pa(){if(nr&&!(10<=Number(pr)))throw Error("Environmental error: no available transport.")}function ga(t,e){Br.call(this),this.g=new Wo(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!Gi(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gi(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new va(this)}function ma(t){ks.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function ya(){As.call(this),this.status=1}function va(t){this.g=t}(ki=Lo.prototype).Ka=function(t){this.L=t},ki.da=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_s.g(),this.C=this.u?Ts(this.u):Ts(_s),this.g.onreadystatechange=Fi(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void Fo(this,t)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=Oi.FormData&&t instanceof Oi.FormData,!(0<=Hi(xo,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of n)this.g.setRequestHeader(t,e);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ho(this),0<this.B&&((this.K=function(t){return nr&&fr()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fi(this.qa,this)):this.A=es(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Fo(this,t)}},ki.qa=function(){void 0!==Ri&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vr(this,"timeout"),this.abort(8))},ki.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Vr(this,"complete"),Vr(this,"abort"),Vo(this))},ki.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vo(this,!0)),Lo.X.M.call(this)},ki.Ha=function(){this.s||(this.F||this.v||this.l?Bo(this):this.fb())},ki.fb=function(){Bo(this)},ki.aa=function(){try{return 2<$o(this)?this.g.status:-1}catch(t){return-1}},ki.fa=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},ki.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Po(e)}},ki.Ea=function(){return this.m},ki.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ki=Wo.prototype).ma=8,ki.G=1,ki.Ja=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const r=new Rs(this,this.j,t,void 0);let s=this.s;if(this.S&&(s?(s=Tr(s),_r(s,this.S)):s=this.S),null!==this.o||this.N||(r.H=s,s=null),this.O)t:{for(var e=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=ea(this,r,e),Qs(n=Ws(this.F),"RID",t),Qs(n,"CVER",22),this.D&&Qs(n,"X-HTTP-Session-Id",this.D),ta(this,n),s&&(this.N?e="headers="+encodeURIComponent(String(Ko(s)))+"&"+e:this.o&&qo(n,this.o,s)),bo(this.h,r),this.Ya&&Qs(n,"TYPE","init"),this.O?(Qs(n,"$req",e),Qs(n,"SID","null"),r.Z=!0,Ls(r,n,null)):Ls(r,n,e),this.G=2}}else 3==this.G&&(t?Zo(this,t):0==this.i.length||yo(this.h)||Zo(this))},ki.Ia=function(){if(this.u=null,sa(this),this.$&&!(this.K||null==this.g||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=vs(Fi(this.eb,this),t)}},ki.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ms(10),Jo(this),sa(this))},ki.cb=function(){null!=this.v&&(this.v=null,Jo(this),ia(this),ms(19))},ki.kb=function(t){t?(this.j.info("Successfully pinged google.com"),ms(2)):(this.j.info("Failed to ping google.com"),ms(1))},(ki=fa.prototype).xa=function(){},ki.wa=function(){},ki.va=function(){},ki.ua=function(){},ki.Ra=function(){},pa.prototype.g=function(t,e){return new ga(t,e)},Bi(ga,Br),ga.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;ms(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=ua(t,null,t.V),Qo(t)},ga.prototype.close=function(){Xo(this.g)},ga.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=$r(t),t=n);e.i.push(new class{constructor(t,e){this.h=t,this.g=e}}(e.ab++,t)),3==e.G&&Qo(e)},ga.prototype.M=function(){this.g.l=null,delete this.j,Xo(this.g),delete this.g,ga.X.M.call(this)},Bi(ma,ks),Bi(ya,As),Bi(va,fa),va.prototype.xa=function(){Vr(this.g,"a")},va.prototype.wa=function(t){Vr(this.g,new ma(t))},va.prototype.va=function(t){Vr(this.g,new ya)},va.prototype.ua=function(){Vr(this.g,"b")},pa.prototype.createWebChannel=pa.prototype.g,ga.prototype.send=ga.prototype.u,ga.prototype.open=ga.prototype.m,ga.prototype.close=ga.prototype.close,Is.NO_ERROR=0,Is.TIMEOUT=8,Is.HTTP_ERROR=6,bs.COMPLETE="complete",Es.EventType=Ss,Ss.OPEN="a",Ss.CLOSE="b",Ss.ERROR="c",Ss.MESSAGE="d",Br.prototype.listen=Br.prototype.N,Lo.prototype.listenOnce=Lo.prototype.O,Lo.prototype.getLastError=Lo.prototype.Oa,Lo.prototype.getLastErrorCode=Lo.prototype.Ea,Lo.prototype.getStatus=Lo.prototype.aa,Lo.prototype.getResponseJson=Lo.prototype.Sa,Lo.prototype.getResponseText=Lo.prototype.fa,Lo.prototype.send=Lo.prototype.da,Lo.prototype.setWithCredentials=Lo.prototype.Ka,Ci.createWebChannelTransport=function(){return new pa},Ci.getStatEventTarget=function(){return ds()},Ci.ErrorCode=Is,Ci.EventType=bs,Ci.Event=ls,Ci.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Ci.FetchXmlHttpFactory=Ao,Ci.WebChannel=Es,Ci.XhrIo=Lo;const Ia="@firebase/firestore";class ba{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ba.UNAUTHENTICATED=new ba(null),ba.GOOGLE_CREDENTIALS=new ba("google-credentials-uid"),ba.FIRST_PARTY=new ba("first-party-uid"),ba.MOCK_USER=new ba("mock-user");let wa="9.18.0";const Ta=new j("@firebase/firestore");function Ea(t,...e){if(Ta.logLevel<=P.DEBUG){const n=e.map(Sa);Ta.debug(`Firestore (${wa}): ${t}`,...n)}}function _a(t,...e){if(Ta.logLevel<=P.ERROR){const n=e.map(Sa);Ta.error(`Firestore (${wa}): ${t}`,...n)}}function Sa(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function ka(t="Unexpected state"){const e=`FIRESTORE (${wa}) INTERNAL ASSERTION FAILED: `+t;throw _a(e),new Error(e)}function Aa(t,e){t||ka()}const Ca={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ra extends d{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Oa{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Na{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Da{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(ba.UNAUTHENTICATED)))}shutdown(){}}class Pa{constructor(t){this.t=t,this.currentUser=ba.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new Oa;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Oa,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{Ea("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Ea("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Oa)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Ea("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Aa("string"==typeof e.accessToken),new Na(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Aa(null===t||"string"==typeof t),new ba(t)}}class La{constructor(t,e,n,i){this.h=t,this.l=e,this.m=n,this.g=i,this.type="FirstParty",this.user=ba.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Aa(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.p.set("Authorization",t),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Ma{constructor(t,e,n,i){this.h=t,this.l=e,this.m=n,this.g=i}getToken(){return Promise.resolve(new La(this.h,this.l,this.m,this.g))}start(t,e){t.enqueueRetryable((()=>e(ba.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ua{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xa{constructor(t){this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(t,e){const n=t=>{null!=t.error&&Ea("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.A;return this.A=t.token,Ea("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{Ea("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.T.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.T.getImmediate({optional:!0});t?i(t):Ea("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(Aa("string"==typeof t.token),this.A=t.token,new Ua(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Fa(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class ja{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const i=Fa(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%t.length))}return n}}function Ba(t,e){return t<e?-1:t>e?1:0}class Va{constructor(t,e,n){void 0===e?e=0:e>t.length&&ka(),void 0===n?n=t.length-e:n>t.length-e&&ka(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Va.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Va?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Ha extends Va{construct(t,e,n){return new Ha(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Ra(Ca.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Ha(e)}static emptyPath(){return new Ha([])}}class $a{constructor(t){this.path=t}static fromPath(t){return new $a(Ha.fromString(t))}static fromName(t){return new $a(Ha.fromString(t).popFirst(5))}static empty(){return new $a(Ha.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Ha.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Ha.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new $a(new Ha(t.slice()))}}function za(t){return"IndexedDbTransactionError"===t.name}class Ka{constructor(t,e,n,i,r,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class qa{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new qa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof qa&&t.projectId===this.projectId&&t.database===this.database}}class Ga extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wa{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw t instanceof DOMException?new Ga("Invalid base64 string: "+t):t}}(t);return new Wa(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Wa(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ba(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}function Xa(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}Wa.EMPTY_BYTE_STRING=new Wa("");class Ja{constructor(t,e){this.comparator=t,this.root=e||Qa.EMPTY}insert(t,e){return new Ja(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Qa.BLACK,null,null))}remove(t){return new Ja(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Qa.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ya(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ya(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ya(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ya(this.root,t,this.comparator,!0)}}class Ya{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Qa{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:Qa.RED,this.left=null!=i?i:Qa.EMPTY,this.right=null!=r?r:Qa.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new Qa(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Qa.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return Qa.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Qa.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Qa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ka();if(this.right.isRed())throw ka();const t=this.left.check();if(t!==this.right.check())throw ka();return t+(this.isRed()?0:1)}}Qa.EMPTY=null,Qa.RED=!0,Qa.BLACK=!1,Qa.EMPTY=new class{constructor(){this.size=0}get key(){throw ka()}get value(){throw ka()}get color(){throw ka()}get left(){throw ka()}get right(){throw ka()}copy(t,e,n,i,r){return this}insert(t,e,n){return new Qa(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Za{constructor(t){this.comparator=t,this.data=new Ja(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new th(this.data.getIterator())}getIteratorFrom(t){return new th(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Za))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Za(this.comparator);return e.data=t,e}}class th{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}var eh,nh;(nh=eh||(eh={}))[nh.OK=0]="OK",nh[nh.CANCELLED=1]="CANCELLED",nh[nh.UNKNOWN=2]="UNKNOWN",nh[nh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nh[nh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nh[nh.NOT_FOUND=5]="NOT_FOUND",nh[nh.ALREADY_EXISTS=6]="ALREADY_EXISTS",nh[nh.PERMISSION_DENIED=7]="PERMISSION_DENIED",nh[nh.UNAUTHENTICATED=16]="UNAUTHENTICATED",nh[nh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nh[nh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nh[nh.ABORTED=10]="ABORTED",nh[nh.OUT_OF_RANGE=11]="OUT_OF_RANGE",nh[nh.UNIMPLEMENTED=12]="UNIMPLEMENTED",nh[nh.INTERNAL=13]="INTERNAL",nh[nh.UNAVAILABLE=14]="UNAVAILABLE",nh[nh.DATA_LOSS=15]="DATA_LOSS",new Ja($a.comparator),new Ja($a.comparator),new Ja($a.comparator),new Za($a.comparator),new Za(Ba);class ih{constructor(){}ae(t,e){this.he(t,e),e.le()}he(t,e){if("nullValue"in t)this.fe(e,5);else if("booleanValue"in t)this.fe(e,10),e.de(t.booleanValue?1:0);else if("integerValue"in t)this.fe(e,15),e.de(Xa(t.integerValue));else if("doubleValue"in t){const n=Xa(t.doubleValue);isNaN(n)?this.fe(e,13):(this.fe(e,15),function(t){return 0===t&&1/t==-1/0}(n)?e.de(0):e.de(n))}else if("timestampValue"in t){const n=t.timestampValue;this.fe(e,20),"string"==typeof n?e._e(n):(e._e(`${n.seconds||""}`),e.de(n.nanos||0))}else if("stringValue"in t)this.we(t.stringValue,e),this.me(e);else if("bytesValue"in t)this.fe(e,30),e.ge(function(t){return"string"==typeof t?Wa.fromBase64String(t):Wa.fromUint8Array(t)}(t.bytesValue)),this.me(e);else if("referenceValue"in t)this.ye(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.fe(e,45),e.de(n.latitude||0),e.de(n.longitude||0)}else"mapValue"in t?function(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}(t)?this.fe(e,Number.MAX_SAFE_INTEGER):(this.pe(t.mapValue,e),this.me(e)):"arrayValue"in t?(this.Ie(t.arrayValue,e),this.me(e)):ka()}we(t,e){this.fe(e,25),this.Te(t,e)}Te(t,e){e._e(t)}pe(t,e){const n=t.fields||{};this.fe(e,55);for(const t of Object.keys(n))this.we(t,e),this.he(n[t],e)}Ie(t,e){const n=t.values||[];this.fe(e,50);for(const t of n)this.he(t,e)}ye(t,e){this.fe(e,37),$a.fromName(t).path.forEach((t=>{this.fe(e,60),this.Te(t,e)}))}fe(t,e){t.de(e)}me(t){t.de(2)}}ih.Ee=new ih,new Uint8Array(0);class rh{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new rh(t,rh.DEFAULT_COLLECTION_PERCENTILE,rh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function sh(){return"undefined"!=typeof document?document:null}rh.DEFAULT_COLLECTION_PERCENTILE=10,rh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rh.DEFAULT=new rh(41943040,rh.DEFAULT_COLLECTION_PERCENTILE,rh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rh.DISABLED=new rh(-1,0,0);class oh{constructor(t,e,n=1e3,i=1.5,r=6e4){this.Ys=t,this.timerId=e,this.po=n,this.Io=i,this.To=r,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(t){this.cancel();const e=Math.floor(this.Eo+this.bo()),n=Math.max(0,Date.now()-this.Ro),i=Math.max(0,e-n);i>0&&Ea("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Eo} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,(()=>(this.Ro=Date.now(),t()))),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}class ah{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Oa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new ah(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ra(Ca.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class hh{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=ba.UNAUTHENTICATED,this.clientId=ja.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{Ea("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(Ea("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ra(Ca.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Oa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=function(t,e){if(_a("AsyncQueue",`${e}: ${t}`),za(t))return new Ra(Ca.UNAVAILABLE,`${e}: ${t}`);throw t}(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}const ch=new Map;class lh{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ra(Ca.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ra(Ca.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(t,e,n,i){if(!0===e&&!0===i)throw new Ra(Ca.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class uh{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ra(Ca.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ra(Ca.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lh(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Da;switch(t.type){case"gapi":const e=t.client;return new Ma(e,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ra(Ca.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=ch.get(t);e&&(Ea("ComponentProvider","Removing Datastore"),ch.delete(t),e.terminate())}(this),Promise.resolve()}}class dh{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new oh(this,"async_queue_retry"),this.Hc=()=>{const t=sh();t&&Ea("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const t=sh();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Jc(),this.Yc(t)}enterRestrictedMode(t){if(!this.Kc){this.Kc=!0,this.zc=t||!1;const e=sh();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Hc)}}enqueue(t){if(this.Jc(),this.Kc)return new Promise((()=>{}));const e=new Oa;return this.Yc((()=>this.Kc&&this.zc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Uc.push(t),this.Zc())))}async Zc(){if(0!==this.Uc.length){try{await this.Uc[0](),this.Uc.shift(),this.ko.reset()}catch(t){if(!za(t))throw t;Ea("AsyncQueue","Operation failed with retryable error: "+t)}this.Uc.length>0&&this.ko.vo((()=>this.Zc()))}}Yc(t){const e=this.qc.then((()=>(this.jc=!0,t().catch((t=>{this.Qc=t,this.jc=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw _a("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.jc=!1,t))))));return this.qc=e,e}enqueueAfterDelay(t,e,n){this.Jc(),this.Wc.indexOf(t)>-1&&(e=0);const i=ah.createAndSchedule(this,t,e,n,(t=>this.Xc(t)));return this.Gc.push(i),i}Jc(){this.Qc&&ka()}verifyOperationInProgress(){}async ta(){let t;do{t=this.qc,await t}while(t!==this.qc)}ea(t){for(const e of this.Gc)if(e.timerId===t)return!0;return!1}na(t){return this.ta().then((()=>{this.Gc.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.Gc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.ta()}))}sa(t){this.Wc.push(t)}Xc(t){const e=this.Gc.indexOf(t);this.Gc.splice(e,1)}}class fh extends uh{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new dh,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||function(t){var e;const n=t._freezeSettings(),i=function(t,e,n,i){return new Ka(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new hh(t._authCredentials,t._appCheckCredentials,t._queue,i)}(this),this._firestoreClient.terminate()}}!function(t,e=!0){!function(t){wa=t}(yt),ft(new C("firestore",((t,{instanceIdentifier:n,options:i})=>{const r=t.getProvider("app").getImmediate(),s=new fh(new Pa(t.getProvider("auth-internal")),new xa(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ra(Ca.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qa(t.options.projectId,e)}(r,n),r);return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),It(Ia,"3.9.0",t),It(Ia,"3.9.0","esm2017")}(),function(t=function(t=ht){const e=lt.get(t);if(!e&&t===ht)return vt();if(!e)throw gt.create("no-app",{appName:t});return e}()){const e=pt(t=A(t),ve);e.isInitialized()?e.getImmediate():function(t,e={}){const n=pt(t,ve);if(n.isInitialized()){const t=n.getImmediate();if(g(e,n.getOptions()))return t;throw ke.create("already-initialized")}n.initialize({options:e})}(t)}(vt({apiKey:"AIzaSyDHBh5GCt0nV9IJpAUZtwDXa2WkL8yDfUg",authDomain:"fall-of-the-bgc.firebaseapp.com",projectId:"fall-of-the-bgc",storageBucket:"fall-of-the-bgc.appspot.com",messagingSenderId:"11710345981",appId:"1:11710345981:web:7b7bcff6fbc9fb4b944494",measurementId:"G-WJ6CWF3033"}))})();